(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function du(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Be={},Nr=[],bn=()=>{},um=()=>!1,Ha=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),fu=t=>t.startsWith("onUpdate:"),Et=Object.assign,pu=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},l0=Object.prototype.hasOwnProperty,Fe=(t,e)=>l0.call(t,e),ve=Array.isArray,Vr=t=>qa(t)==="[object Map]",hm=t=>qa(t)==="[object Set]",Ee=t=>typeof t=="function",at=t=>typeof t=="string",ns=t=>typeof t=="symbol",qe=t=>t!==null&&typeof t=="object",dm=t=>(qe(t)||Ee(t))&&Ee(t.then)&&Ee(t.catch),fm=Object.prototype.toString,qa=t=>fm.call(t),c0=t=>qa(t).slice(8,-1),pm=t=>qa(t)==="[object Object]",mu=t=>at(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Di=du(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),za=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},u0=/-\w/g,sn=za(t=>t.replace(u0,e=>e.slice(1).toUpperCase())),h0=/\B([A-Z])/g,mr=za(t=>t.replace(h0,"-$1").toLowerCase()),Ga=za(t=>t.charAt(0).toUpperCase()+t.slice(1)),Hl=za(t=>t?`on${Ga(t)}`:""),Ts=(t,e)=>!Object.is(t,e),Qo=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},mm=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},gu=t=>{const e=parseFloat(t);return isNaN(e)?t:e},d0=t=>{const e=at(t)?Number(t):NaN;return isNaN(e)?t:e};let vd;const Wa=()=>vd||(vd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Fs(t){if(ve(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=at(s)?g0(s):Fs(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(at(t)||qe(t))return t}const f0=/;(?![^(]*\))/g,p0=/:([^]+)/,m0=/\/\*[^]*?\*\//g;function g0(t){const e={};return t.replace(m0,"").split(f0).forEach(n=>{if(n){const s=n.split(p0);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function ot(t){let e="";if(at(t))e=t;else if(ve(t))for(let n=0;n<t.length;n++){const s=ot(t[n]);s&&(e+=s+" ")}else if(qe(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const _0="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",y0=du(_0);function gm(t){return!!t||t===""}const _m=t=>!!(t&&t.__v_isRef===!0),pe=t=>at(t)?t:t==null?"":ve(t)||qe(t)&&(t.toString===fm||!Ee(t.toString))?_m(t)?pe(t.value):JSON.stringify(t,ym,2):String(t),ym=(t,e)=>_m(e)?ym(t,e.value):Vr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[ql(s,i)+" =>"]=r,n),{})}:hm(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>ql(n))}:ns(e)?ql(e):qe(e)&&!ve(e)&&!pm(e)?String(e):e,ql=(t,e="")=>{var n;return ns(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let jt;class v0{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=jt,!e&&jt&&(this.index=(jt.scopes||(jt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=jt;try{return jt=this,e()}finally{jt=n}}}on(){++this._on===1&&(this.prevScope=jt,jt=this)}off(){this._on>0&&--this._on===0&&(jt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function w0(){return jt}let je;const zl=new WeakSet;class vm{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,jt&&jt.active&&jt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,zl.has(this)&&(zl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Em(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,wd(this),Tm(this);const e=je,n=un;je=this,un=!0;try{return this.fn()}finally{Im(this),je=e,un=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)vu(e);this.deps=this.depsTail=void 0,wd(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?zl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Tc(this)&&this.run()}get dirty(){return Tc(this)}}let wm=0,Ni,Vi;function Em(t,e=!1){if(t.flags|=8,e){t.next=Vi,Vi=t;return}t.next=Ni,Ni=t}function _u(){wm++}function yu(){if(--wm>0)return;if(Vi){let e=Vi;for(Vi=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Ni;){let e=Ni;for(Ni=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function Tm(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Im(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),vu(s),E0(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function Tc(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(bm(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function bm(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===zi)||(t.globalVersion=zi,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Tc(t))))return;t.flags|=2;const e=t.dep,n=je,s=un;je=t,un=!0;try{Tm(t);const r=t.fn(t._value);(e.version===0||Ts(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{je=n,un=s,Im(t),t.flags&=-3}}function vu(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)vu(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function E0(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let un=!0;const Am=[];function Qn(){Am.push(un),un=!1}function Yn(){const t=Am.pop();un=t===void 0?!0:t}function wd(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=je;je=void 0;try{e()}finally{je=n}}}let zi=0;class T0{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class wu{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!je||!un||je===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==je)n=this.activeLink=new T0(je,this),je.deps?(n.prevDep=je.depsTail,je.depsTail.nextDep=n,je.depsTail=n):je.deps=je.depsTail=n,Rm(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=je.depsTail,n.nextDep=void 0,je.depsTail.nextDep=n,je.depsTail=n,je.deps===n&&(je.deps=s)}return n}trigger(e){this.version++,zi++,this.notify(e)}notify(e){_u();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{yu()}}}function Rm(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)Rm(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Ic=new WeakMap,ir=Symbol(""),bc=Symbol(""),Gi=Symbol("");function Pt(t,e,n){if(un&&je){let s=Ic.get(t);s||Ic.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new wu),r.map=s,r.key=n),r.track()}}function Hn(t,e,n,s,r,i){const o=Ic.get(t);if(!o){zi++;return}const l=c=>{c&&c.trigger()};if(_u(),e==="clear")o.forEach(l);else{const c=ve(t),u=c&&mu(n);if(c&&n==="length"){const d=Number(s);o.forEach((f,m)=>{(m==="length"||m===Gi||!ns(m)&&m>=d)&&l(f)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),u&&l(o.get(Gi)),e){case"add":c?u&&l(o.get("length")):(l(o.get(ir)),Vr(t)&&l(o.get(bc)));break;case"delete":c||(l(o.get(ir)),Vr(t)&&l(o.get(bc)));break;case"set":Vr(t)&&l(o.get(ir));break}}yu()}function Ar(t){const e=Oe(t);return e===t?e:(Pt(e,"iterate",Gi),nn(t)?e:e.map(fn))}function Ka(t){return Pt(t=Oe(t),"iterate",Gi),t}function ps(t,e){return Xn(t)?or(t)?Kr(fn(e)):Kr(e):fn(e)}const I0={__proto__:null,[Symbol.iterator](){return Gl(this,Symbol.iterator,t=>ps(this,t))},concat(...t){return Ar(this).concat(...t.map(e=>ve(e)?Ar(e):e))},entries(){return Gl(this,"entries",t=>(t[1]=ps(this,t[1]),t))},every(t,e){return Ln(this,"every",t,e,void 0,arguments)},filter(t,e){return Ln(this,"filter",t,e,n=>n.map(s=>ps(this,s)),arguments)},find(t,e){return Ln(this,"find",t,e,n=>ps(this,n),arguments)},findIndex(t,e){return Ln(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Ln(this,"findLast",t,e,n=>ps(this,n),arguments)},findLastIndex(t,e){return Ln(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Ln(this,"forEach",t,e,void 0,arguments)},includes(...t){return Wl(this,"includes",t)},indexOf(...t){return Wl(this,"indexOf",t)},join(t){return Ar(this).join(t)},lastIndexOf(...t){return Wl(this,"lastIndexOf",t)},map(t,e){return Ln(this,"map",t,e,void 0,arguments)},pop(){return bi(this,"pop")},push(...t){return bi(this,"push",t)},reduce(t,...e){return Ed(this,"reduce",t,e)},reduceRight(t,...e){return Ed(this,"reduceRight",t,e)},shift(){return bi(this,"shift")},some(t,e){return Ln(this,"some",t,e,void 0,arguments)},splice(...t){return bi(this,"splice",t)},toReversed(){return Ar(this).toReversed()},toSorted(t){return Ar(this).toSorted(t)},toSpliced(...t){return Ar(this).toSpliced(...t)},unshift(...t){return bi(this,"unshift",t)},values(){return Gl(this,"values",t=>ps(this,t))}};function Gl(t,e,n){const s=Ka(t),r=s[e]();return s!==t&&!nn(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=n(i.value)),i}),r}const b0=Array.prototype;function Ln(t,e,n,s,r,i){const o=Ka(t),l=o!==t&&!nn(t),c=o[e];if(c!==b0[e]){const f=c.apply(t,i);return l?fn(f):f}let u=n;o!==t&&(l?u=function(f,m){return n.call(this,ps(t,f),m,t)}:n.length>2&&(u=function(f,m){return n.call(this,f,m,t)}));const d=c.call(o,u,s);return l&&r?r(d):d}function Ed(t,e,n,s){const r=Ka(t);let i=n;return r!==t&&(nn(t)?n.length>3&&(i=function(o,l,c){return n.call(this,o,l,c,t)}):i=function(o,l,c){return n.call(this,o,ps(t,l),c,t)}),r[e](i,...s)}function Wl(t,e,n){const s=Oe(t);Pt(s,"iterate",Gi);const r=s[e](...n);return(r===-1||r===!1)&&Iu(n[0])?(n[0]=Oe(n[0]),s[e](...n)):r}function bi(t,e,n=[]){Qn(),_u();const s=Oe(t)[e].apply(t,n);return yu(),Yn(),s}const A0=du("__proto__,__v_isRef,__isVue"),Sm=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ns));function R0(t){ns(t)||(t=String(t));const e=Oe(this);return Pt(e,"has",t),e.hasOwnProperty(t)}class Cm{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?M0:Dm:i?km:xm).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=ve(e);if(!r){let c;if(o&&(c=I0[n]))return c;if(n==="hasOwnProperty")return R0}const l=Reflect.get(e,n,Nt(e)?e:s);if((ns(n)?Sm.has(n):A0(n))||(r||Pt(e,"get",n),i))return l;if(Nt(l)){const c=o&&mu(n)?l:l.value;return r&&qe(c)?Rc(c):c}return qe(l)?r?Rc(l):Qa(l):l}}class Pm extends Cm{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];const o=ve(e)&&mu(n);if(!this._isShallow){const u=Xn(i);if(!nn(s)&&!Xn(s)&&(i=Oe(i),s=Oe(s)),!o&&Nt(i)&&!Nt(s))return u||(i.value=s),!0}const l=o?Number(n)<e.length:Fe(e,n),c=Reflect.set(e,n,s,Nt(e)?e:r);return e===Oe(r)&&(l?Ts(s,i)&&Hn(e,"set",n,s):Hn(e,"add",n,s)),c}deleteProperty(e,n){const s=Fe(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&Hn(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!ns(n)||!Sm.has(n))&&Pt(e,"has",n),s}ownKeys(e){return Pt(e,"iterate",ve(e)?"length":ir),Reflect.ownKeys(e)}}class S0 extends Cm{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const C0=new Pm,P0=new S0,x0=new Pm(!0);const Ac=t=>t,Lo=t=>Reflect.getPrototypeOf(t);function k0(t,e,n){return function(...s){const r=this.__v_raw,i=Oe(r),o=Vr(i),l=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=r[t](...s),d=n?Ac:e?Kr:fn;return!e&&Pt(i,"iterate",c?bc:ir),{next(){const{value:f,done:m}=u.next();return m?{value:f,done:m}:{value:l?[d(f[0]),d(f[1])]:d(f),done:m}},[Symbol.iterator](){return this}}}}function Fo(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function D0(t,e){const n={get(r){const i=this.__v_raw,o=Oe(i),l=Oe(r);t||(Ts(r,l)&&Pt(o,"get",r),Pt(o,"get",l));const{has:c}=Lo(o),u=e?Ac:t?Kr:fn;if(c.call(o,r))return u(i.get(r));if(c.call(o,l))return u(i.get(l));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&Pt(Oe(r),"iterate",ir),r.size},has(r){const i=this.__v_raw,o=Oe(i),l=Oe(r);return t||(Ts(r,l)&&Pt(o,"has",r),Pt(o,"has",l)),r===l?i.has(r):i.has(r)||i.has(l)},forEach(r,i){const o=this,l=o.__v_raw,c=Oe(l),u=e?Ac:t?Kr:fn;return!t&&Pt(c,"iterate",ir),l.forEach((d,f)=>r.call(i,u(d),u(f),o))}};return Et(n,t?{add:Fo("add"),set:Fo("set"),delete:Fo("delete"),clear:Fo("clear")}:{add(r){!e&&!nn(r)&&!Xn(r)&&(r=Oe(r));const i=Oe(this);return Lo(i).has.call(i,r)||(i.add(r),Hn(i,"add",r,r)),this},set(r,i){!e&&!nn(i)&&!Xn(i)&&(i=Oe(i));const o=Oe(this),{has:l,get:c}=Lo(o);let u=l.call(o,r);u||(r=Oe(r),u=l.call(o,r));const d=c.call(o,r);return o.set(r,i),u?Ts(i,d)&&Hn(o,"set",r,i):Hn(o,"add",r,i),this},delete(r){const i=Oe(this),{has:o,get:l}=Lo(i);let c=o.call(i,r);c||(r=Oe(r),c=o.call(i,r)),l&&l.call(i,r);const u=i.delete(r);return c&&Hn(i,"delete",r,void 0),u},clear(){const r=Oe(this),i=r.size!==0,o=r.clear();return i&&Hn(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=k0(r,t,e)}),n}function Eu(t,e){const n=D0(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(Fe(n,r)&&r in s?n:s,r,i)}const N0={get:Eu(!1,!1)},V0={get:Eu(!1,!0)},O0={get:Eu(!0,!1)};const xm=new WeakMap,km=new WeakMap,Dm=new WeakMap,M0=new WeakMap;function L0(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function F0(t){return t.__v_skip||!Object.isExtensible(t)?0:L0(c0(t))}function Qa(t){return Xn(t)?t:Tu(t,!1,C0,N0,xm)}function Nm(t){return Tu(t,!1,x0,V0,km)}function Rc(t){return Tu(t,!0,P0,O0,Dm)}function Tu(t,e,n,s,r){if(!qe(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=F0(t);if(i===0)return t;const o=r.get(t);if(o)return o;const l=new Proxy(t,i===2?s:n);return r.set(t,l),l}function or(t){return Xn(t)?or(t.__v_raw):!!(t&&t.__v_isReactive)}function Xn(t){return!!(t&&t.__v_isReadonly)}function nn(t){return!!(t&&t.__v_isShallow)}function Iu(t){return t?!!t.__v_raw:!1}function Oe(t){const e=t&&t.__v_raw;return e?Oe(e):t}function U0(t){return!Fe(t,"__v_skip")&&Object.isExtensible(t)&&mm(t,"__v_skip",!0),t}const fn=t=>qe(t)?Qa(t):t,Kr=t=>qe(t)?Rc(t):t;function Nt(t){return t?t.__v_isRef===!0:!1}function _e(t){return Vm(t,!1)}function $0(t){return Vm(t,!0)}function Vm(t,e){return Nt(t)?t:new B0(t,e)}class B0{constructor(e,n){this.dep=new wu,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Oe(e),this._value=n?e:fn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||nn(e)||Xn(e);e=s?e:Oe(e),Ts(e,n)&&(this._rawValue=e,this._value=s?e:fn(e),this.dep.trigger())}}function Vt(t){return Nt(t)?t.value:t}const j0={get:(t,e,n)=>e==="__v_raw"?t:Vt(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return Nt(r)&&!Nt(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function Om(t){return or(t)?t:new Proxy(t,j0)}class H0{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new wu(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=zi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&je!==this)return Em(this,!0),!0}get value(){const e=this.dep.track();return bm(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function q0(t,e,n=!1){let s,r;return Ee(t)?s=t:(s=t.get,r=t.set),new H0(s,r,n)}const Uo={},ha=new WeakMap;let Js;function z0(t,e=!1,n=Js){if(n){let s=ha.get(n);s||ha.set(n,s=[]),s.push(t)}}function G0(t,e,n=Be){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:l,call:c}=n,u=O=>r?O:nn(O)||r===!1||r===0?qn(O,1):qn(O);let d,f,m,_,k=!1,x=!1;if(Nt(t)?(f=()=>t.value,k=nn(t)):or(t)?(f=()=>u(t),k=!0):ve(t)?(x=!0,k=t.some(O=>or(O)||nn(O)),f=()=>t.map(O=>{if(Nt(O))return O.value;if(or(O))return u(O);if(Ee(O))return c?c(O,2):O()})):Ee(t)?e?f=c?()=>c(t,2):t:f=()=>{if(m){Qn();try{m()}finally{Yn()}}const O=Js;Js=d;try{return c?c(t,3,[_]):t(_)}finally{Js=O}}:f=bn,e&&r){const O=f,U=r===!0?1/0:r;f=()=>qn(O(),U)}const N=w0(),H=()=>{d.stop(),N&&N.active&&pu(N.effects,d)};if(i&&e){const O=e;e=(...U)=>{O(...U),H()}}let V=x?new Array(t.length).fill(Uo):Uo;const C=O=>{if(!(!(d.flags&1)||!d.dirty&&!O))if(e){const U=d.run();if(r||k||(x?U.some((F,E)=>Ts(F,V[E])):Ts(U,V))){m&&m();const F=Js;Js=d;try{const E=[U,V===Uo?void 0:x&&V[0]===Uo?[]:V,_];V=U,c?c(e,3,E):e(...E)}finally{Js=F}}}else d.run()};return l&&l(C),d=new vm(f),d.scheduler=o?()=>o(C,!1):C,_=O=>z0(O,!1,d),m=d.onStop=()=>{const O=ha.get(d);if(O){if(c)c(O,4);else for(const U of O)U();ha.delete(d)}},e?s?C(!0):V=d.run():o?o(C.bind(null,!0),!0):d.run(),H.pause=d.pause.bind(d),H.resume=d.resume.bind(d),H.stop=H,H}function qn(t,e=1/0,n){if(e<=0||!qe(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,Nt(t))qn(t.value,e,n);else if(ve(t))for(let s=0;s<t.length;s++)qn(t[s],e,n);else if(hm(t)||Vr(t))t.forEach(s=>{qn(s,e,n)});else if(pm(t)){for(const s in t)qn(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&qn(t[s],e,n)}return t}function lo(t,e,n,s){try{return s?t(...s):t()}catch(r){Ya(r,e,n)}}function pn(t,e,n,s){if(Ee(t)){const r=lo(t,e,n,s);return r&&dm(r)&&r.catch(i=>{Ya(i,e,n)}),r}if(ve(t)){const r=[];for(let i=0;i<t.length;i++)r.push(pn(t[i],e,n,s));return r}}function Ya(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Be;if(e){let l=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let f=0;f<d.length;f++)if(d[f](t,c,u)===!1)return}l=l.parent}if(i){Qn(),lo(i,null,10,[t,c,u]),Yn();return}}W0(t,n,r,s,o)}function W0(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const Ut=[];let En=-1;const Or=[];let ms=null,Rr=0;const Mm=Promise.resolve();let da=null;function bu(t){const e=da||Mm;return t?e.then(this?t.bind(this):t):e}function K0(t){let e=En+1,n=Ut.length;for(;e<n;){const s=e+n>>>1,r=Ut[s],i=Wi(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function Au(t){if(!(t.flags&1)){const e=Wi(t),n=Ut[Ut.length-1];!n||!(t.flags&2)&&e>=Wi(n)?Ut.push(t):Ut.splice(K0(e),0,t),t.flags|=1,Lm()}}function Lm(){da||(da=Mm.then(Um))}function Q0(t){ve(t)?Or.push(...t):ms&&t.id===-1?ms.splice(Rr+1,0,t):t.flags&1||(Or.push(t),t.flags|=1),Lm()}function Td(t,e,n=En+1){for(;n<Ut.length;n++){const s=Ut[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;Ut.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Fm(t){if(Or.length){const e=[...new Set(Or)].sort((n,s)=>Wi(n)-Wi(s));if(Or.length=0,ms){ms.push(...e);return}for(ms=e,Rr=0;Rr<ms.length;Rr++){const n=ms[Rr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ms=null,Rr=0}}const Wi=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Um(t){try{for(En=0;En<Ut.length;En++){const e=Ut[En];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),lo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;En<Ut.length;En++){const e=Ut[En];e&&(e.flags&=-2)}En=-1,Ut.length=0,Fm(),da=null,(Ut.length||Or.length)&&Um()}}let bt=null,$m=null;function fa(t){const e=bt;return bt=t,$m=t&&t.type.__scopeId||null,e}function Bn(t,e=bt,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&ga(-1);const i=fa(e);let o;try{o=t(...r)}finally{fa(i),s._d&&ga(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Mr(t,e){if(bt===null)return t;const n=tl(bt),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,l,c=Be]=e[r];i&&(Ee(i)&&(i={mounted:i,updated:i}),i.deep&&qn(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:l,modifiers:c}))}return t}function Ks(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const l=r[o];i&&(l.oldValue=i[o].value);let c=l.dir[s];c&&(Qn(),pn(c,n,8,[t.el,l,t,e]),Yn())}}const Y0=Symbol("_vte"),Bm=t=>t.__isTeleport,jn=Symbol("_leaveCb"),$o=Symbol("_enterCb");function X0(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return rs(()=>{t.isMounted=!0}),Ym(()=>{t.isUnmounting=!0}),t}const Zt=[Function,Array],jm={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Zt,onEnter:Zt,onAfterEnter:Zt,onEnterCancelled:Zt,onBeforeLeave:Zt,onLeave:Zt,onAfterLeave:Zt,onLeaveCancelled:Zt,onBeforeAppear:Zt,onAppear:Zt,onAfterAppear:Zt,onAppearCancelled:Zt},Hm=t=>{const e=t.subTree;return e.component?Hm(e.component):e},J0={name:"BaseTransition",props:jm,setup(t,{slots:e}){const n=Tg(),s=X0();return()=>{const r=e.default&&Gm(e.default(),!0);if(!r||!r.length)return;const i=qm(r),o=Oe(t),{mode:l}=o;if(s.isLeaving)return Kl(i);const c=Id(i);if(!c)return Kl(i);let u=Sc(c,o,s,n,f=>u=f);c.type!==kt&&Ki(c,u);let d=n.subTree&&Id(n.subTree);if(d&&d.type!==kt&&!er(d,c)&&Hm(n).type!==kt){let f=Sc(d,o,s,n);if(Ki(d,f),l==="out-in"&&c.type!==kt)return s.isLeaving=!0,f.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,d=void 0},Kl(i);l==="in-out"&&c.type!==kt?f.delayLeave=(m,_,k)=>{const x=zm(s,d);x[String(d.key)]=d,m[jn]=()=>{_(),m[jn]=void 0,delete u.delayedLeave,d=void 0},u.delayedLeave=()=>{k(),delete u.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return i}}};function qm(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==kt){e=n;break}}return e}const Z0=J0;function zm(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function Sc(t,e,n,s,r){const{appear:i,mode:o,persisted:l=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:d,onEnterCancelled:f,onBeforeLeave:m,onLeave:_,onAfterLeave:k,onLeaveCancelled:x,onBeforeAppear:N,onAppear:H,onAfterAppear:V,onAppearCancelled:C}=e,O=String(t.key),U=zm(n,t),F=(v,S)=>{v&&pn(v,s,9,S)},E=(v,S)=>{const R=S[1];F(v,S),ve(v)?v.every(A=>A.length<=1)&&R():v.length<=1&&R()},y={mode:o,persisted:l,beforeEnter(v){let S=c;if(!n.isMounted)if(i)S=N||c;else return;v[jn]&&v[jn](!0);const R=U[O];R&&er(t,R)&&R.el[jn]&&R.el[jn](),F(S,[v])},enter(v){let S=u,R=d,A=f;if(!n.isMounted)if(i)S=H||u,R=V||d,A=C||f;else return;let T=!1;const ke=v[$o]=Xe=>{T||(T=!0,Xe?F(A,[v]):F(R,[v]),y.delayedLeave&&y.delayedLeave(),v[$o]=void 0)};S?E(S,[v,ke]):ke()},leave(v,S){const R=String(t.key);if(v[$o]&&v[$o](!0),n.isUnmounting)return S();F(m,[v]);let A=!1;const T=v[jn]=ke=>{A||(A=!0,S(),ke?F(x,[v]):F(k,[v]),v[jn]=void 0,U[R]===t&&delete U[R])};U[R]=t,_?E(_,[v,T]):T()},clone(v){const S=Sc(v,e,n,s,r);return r&&r(S),S}};return y}function Kl(t){if(Xa(t))return t=xs(t),t.children=null,t}function Id(t){if(!Xa(t))return Bm(t.type)&&t.children?qm(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Ee(n.default))return n.default()}}function Ki(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ki(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Gm(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const l=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Ke?(o.patchFlag&128&&r++,s=s.concat(Gm(o.children,e,l))):(e||o.type!==kt)&&s.push(l!=null?xs(o,{key:l}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}function Wm(t,e){return Ee(t)?Et({name:t.name},e,{setup:t}):t}function Km(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const pa=new WeakMap;function Oi(t,e,n,s,r=!1){if(ve(t)){t.forEach((k,x)=>Oi(k,e&&(ve(e)?e[x]:e),n,s,r));return}if(Lr(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Oi(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?tl(s.component):s.el,o=r?null:i,{i:l,r:c}=t,u=e&&e.r,d=l.refs===Be?l.refs={}:l.refs,f=l.setupState,m=Oe(f),_=f===Be?um:k=>Fe(m,k);if(u!=null&&u!==c){if(bd(e),at(u))d[u]=null,_(u)&&(f[u]=null);else if(Nt(u)){u.value=null;const k=e;k.k&&(d[k.k]=null)}}if(Ee(c))lo(c,l,12,[o,d]);else{const k=at(c),x=Nt(c);if(k||x){const N=()=>{if(t.f){const H=k?_(c)?f[c]:d[c]:c.value;if(r)ve(H)&&pu(H,i);else if(ve(H))H.includes(i)||H.push(i);else if(k)d[c]=[i],_(c)&&(f[c]=d[c]);else{const V=[i];c.value=V,t.k&&(d[t.k]=V)}}else k?(d[c]=o,_(c)&&(f[c]=o)):x&&(c.value=o,t.k&&(d[t.k]=o))};if(o){const H=()=>{N(),pa.delete(t)};H.id=-1,pa.set(t,H),Kt(H,n)}else bd(t),N()}}}function bd(t){const e=pa.get(t);e&&(e.flags|=8,pa.delete(t))}Wa().requestIdleCallback;Wa().cancelIdleCallback;const Lr=t=>!!t.type.__asyncLoader,Xa=t=>t.type.__isKeepAlive;function ew(t,e){Qm(t,"a",e)}function tw(t,e){Qm(t,"da",e)}function Qm(t,e,n=Dt){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Ja(e,s,n),n){let r=n.parent;for(;r&&r.parent;)Xa(r.parent.vnode)&&nw(s,e,n,r),r=r.parent}}function nw(t,e,n,s){const r=Ja(e,t,s,!0);Xm(()=>{pu(s[e],r)},n)}function Ja(t,e,n=Dt,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Qn();const l=co(n),c=pn(e,n,t,o);return l(),Yn(),c});return s?r.unshift(i):r.push(i),i}}const ss=t=>(e,n=Dt)=>{(!Xi||t==="sp")&&Ja(t,(...s)=>e(...s),n)},sw=ss("bm"),rs=ss("m"),rw=ss("bu"),iw=ss("u"),Ym=ss("bum"),Xm=ss("um"),ow=ss("sp"),aw=ss("rtg"),lw=ss("rtc");function cw(t,e=Dt){Ja("ec",t,e)}const Jm="components";function Zm(t,e){return tg(Jm,t,!0,e)||t}const eg=Symbol.for("v-ndc");function uw(t){return at(t)?tg(Jm,t,!1)||t:t||eg}function tg(t,e,n=!0,s=!1){const r=bt||Dt;if(r){const i=r.type;{const l=Jw(i,!1);if(l&&(l===e||l===sn(e)||l===Ga(sn(e))))return i}const o=Ad(r[t]||i[t],e)||Ad(r.appContext[t],e);return!o&&s?i:o}}function Ad(t,e){return t&&(t[e]||t[sn(e)]||t[Ga(sn(e))])}function An(t,e,n,s){let r;const i=n,o=ve(t);if(o||at(t)){const l=o&&or(t);let c=!1,u=!1;l&&(c=!nn(t),u=Xn(t),t=Ka(t)),r=new Array(t.length);for(let d=0,f=t.length;d<f;d++)r[d]=e(c?u?Kr(fn(t[d])):fn(t[d]):t[d],d,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let l=0;l<t;l++)r[l]=e(l+1,l,void 0,i)}else if(qe(t))if(t[Symbol.iterator])r=Array.from(t,(l,c)=>e(l,c,void 0,i));else{const l=Object.keys(t);r=new Array(l.length);for(let c=0,u=l.length;c<u;c++){const d=l[c];r[c]=e(t[d],d,c,i)}}else r=[];return r}function Rd(t,e,n={},s,r){if(bt.ce||bt.parent&&Lr(bt.parent)&&bt.parent.ce){const u=Object.keys(n).length>0;return e!=="default"&&(n.name=e),J(),Ps(Ke,null,[Ve("slot",n,s&&s())],u?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),J();const o=i&&ng(i(n)),l=n.key||o&&o.key,c=Ps(Ke,{key:(l&&!ns(l)?l:`_${e}`)+(!o&&s?"_fb":"")},o||(s?s():[]),o&&t._===1?64:-2);return c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),i&&i._c&&(i._d=!0),c}function ng(t){return t.some(e=>Yi(e)?!(e.type===kt||e.type===Ke&&!ng(e.children)):!0)?t:null}const Cc=t=>t?Ig(t)?tl(t):Cc(t.parent):null,Mi=Et(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Cc(t.parent),$root:t=>Cc(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>rg(t),$forceUpdate:t=>t.f||(t.f=()=>{Au(t.update)}),$nextTick:t=>t.n||(t.n=bu.bind(t.proxy)),$watch:t=>Ew.bind(t)}),Ql=(t,e)=>t!==Be&&!t.__isScriptSetup&&Fe(t,e),hw={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:l,appContext:c}=t;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(Ql(s,e))return o[e]=1,s[e];if(r!==Be&&Fe(r,e))return o[e]=2,r[e];if(Fe(i,e))return o[e]=3,i[e];if(n!==Be&&Fe(n,e))return o[e]=4,n[e];Pc&&(o[e]=0)}}const u=Mi[e];let d,f;if(u)return e==="$attrs"&&Pt(t.attrs,"get",""),u(t);if((d=l.__cssModules)&&(d=d[e]))return d;if(n!==Be&&Fe(n,e))return o[e]=4,n[e];if(f=c.config.globalProperties,Fe(f,e))return f[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return Ql(r,e)?(r[e]=n,!0):s!==Be&&Fe(s,e)?(s[e]=n,!0):Fe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,props:i,type:o}},l){let c;return!!(n[l]||t!==Be&&l[0]!=="$"&&Fe(t,l)||Ql(e,l)||Fe(i,l)||Fe(s,l)||Fe(Mi,l)||Fe(r.config.globalProperties,l)||(c=o.__cssModules)&&c[l])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Fe(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Sd(t){return ve(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Pc=!0;function dw(t){const e=rg(t),n=t.proxy,s=t.ctx;Pc=!1,e.beforeCreate&&Cd(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:l,provide:c,inject:u,created:d,beforeMount:f,mounted:m,beforeUpdate:_,updated:k,activated:x,deactivated:N,beforeDestroy:H,beforeUnmount:V,destroyed:C,unmounted:O,render:U,renderTracked:F,renderTriggered:E,errorCaptured:y,serverPrefetch:v,expose:S,inheritAttrs:R,components:A,directives:T,filters:ke}=e;if(u&&fw(u,s,null),o)for(const Ne in o){const Se=o[Ne];Ee(Se)&&(s[Ne]=Se.bind(n))}if(r){const Ne=r.call(n,n);qe(Ne)&&(t.data=Qa(Ne))}if(Pc=!0,i)for(const Ne in i){const Se=i[Ne],de=Ee(Se)?Se.bind(n,n):Ee(Se.get)?Se.get.bind(n,n):bn,K=!Ee(Se)&&Ee(Se.set)?Se.set.bind(n):bn,M=Ze({get:de,set:K});Object.defineProperty(s,Ne,{enumerable:!0,configurable:!0,get:()=>M.value,set:ae=>M.value=ae})}if(l)for(const Ne in l)sg(l[Ne],s,n,Ne);if(c){const Ne=Ee(c)?c.call(n):c;Reflect.ownKeys(Ne).forEach(Se=>{Yo(Se,Ne[Se])})}d&&Cd(d,t,"c");function ze(Ne,Se){ve(Se)?Se.forEach(de=>Ne(de.bind(n))):Se&&Ne(Se.bind(n))}if(ze(sw,f),ze(rs,m),ze(rw,_),ze(iw,k),ze(ew,x),ze(tw,N),ze(cw,y),ze(lw,F),ze(aw,E),ze(Ym,V),ze(Xm,O),ze(ow,v),ve(S))if(S.length){const Ne=t.exposed||(t.exposed={});S.forEach(Se=>{Object.defineProperty(Ne,Se,{get:()=>n[Se],set:de=>n[Se]=de,enumerable:!0})})}else t.exposed||(t.exposed={});U&&t.render===bn&&(t.render=U),R!=null&&(t.inheritAttrs=R),A&&(t.components=A),T&&(t.directives=T),v&&Km(t)}function fw(t,e,n=bn){ve(t)&&(t=xc(t));for(const s in t){const r=t[s];let i;qe(r)?"default"in r?i=Rn(r.from||s,r.default,!0):i=Rn(r.from||s):i=Rn(r),Nt(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function Cd(t,e,n){pn(ve(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function sg(t,e,n,s){let r=s.includes(".")?ag(n,s):()=>n[s];if(at(t)){const i=e[t];Ee(i)&&ar(r,i)}else if(Ee(t))ar(r,t.bind(n));else if(qe(t))if(ve(t))t.forEach(i=>sg(i,e,n,s));else{const i=Ee(t.handler)?t.handler.bind(n):e[t.handler];Ee(i)&&ar(r,i,t)}}function rg(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,l=i.get(e);let c;return l?c=l:!r.length&&!n&&!s?c=e:(c={},r.length&&r.forEach(u=>ma(c,u,o,!0)),ma(c,e,o)),qe(e)&&i.set(e,c),c}function ma(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&ma(t,i,n,!0),r&&r.forEach(o=>ma(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const l=pw[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const pw={data:Pd,props:xd,emits:xd,methods:Ci,computed:Ci,beforeCreate:Lt,created:Lt,beforeMount:Lt,mounted:Lt,beforeUpdate:Lt,updated:Lt,beforeDestroy:Lt,beforeUnmount:Lt,destroyed:Lt,unmounted:Lt,activated:Lt,deactivated:Lt,errorCaptured:Lt,serverPrefetch:Lt,components:Ci,directives:Ci,watch:gw,provide:Pd,inject:mw};function Pd(t,e){return e?t?function(){return Et(Ee(t)?t.call(this,this):t,Ee(e)?e.call(this,this):e)}:e:t}function mw(t,e){return Ci(xc(t),xc(e))}function xc(t){if(ve(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Lt(t,e){return t?[...new Set([].concat(t,e))]:e}function Ci(t,e){return t?Et(Object.create(null),t,e):e}function xd(t,e){return t?ve(t)&&ve(e)?[...new Set([...t,...e])]:Et(Object.create(null),Sd(t),Sd(e??{})):e}function gw(t,e){if(!t)return e;if(!e)return t;const n=Et(Object.create(null),t);for(const s in e)n[s]=Lt(t[s],e[s]);return n}function ig(){return{app:null,config:{isNativeTag:um,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let _w=0;function yw(t,e){return function(s,r=null){Ee(s)||(s=Et({},s)),r!=null&&!qe(r)&&(r=null);const i=ig(),o=new WeakSet,l=[];let c=!1;const u=i.app={_uid:_w++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:eE,get config(){return i.config},set config(d){},use(d,...f){return o.has(d)||(d&&Ee(d.install)?(o.add(d),d.install(u,...f)):Ee(d)&&(o.add(d),d(u,...f))),u},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),u},component(d,f){return f?(i.components[d]=f,u):i.components[d]},directive(d,f){return f?(i.directives[d]=f,u):i.directives[d]},mount(d,f,m){if(!c){const _=u._ceVNode||Ve(s,r);return _.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),t(_,d,m),c=!0,u._container=d,d.__vue_app__=u,tl(_.component)}},onUnmount(d){l.push(d)},unmount(){c&&(pn(l,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(d,f){return i.provides[d]=f,u},runWithContext(d){const f=Fr;Fr=u;try{return d()}finally{Fr=f}}};return u}}let Fr=null;function Yo(t,e){if(Dt){let n=Dt.provides;const s=Dt.parent&&Dt.parent.provides;s===n&&(n=Dt.provides=Object.create(s)),n[t]=e}}function Rn(t,e,n=!1){const s=Tg();if(s||Fr){let r=Fr?Fr._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&Ee(e)?e.call(s&&s.proxy):e}}const vw=Symbol.for("v-scx"),ww=()=>Rn(vw);function ar(t,e,n){return og(t,e,n)}function og(t,e,n=Be){const{immediate:s,deep:r,flush:i,once:o}=n,l=Et({},n),c=e&&s||!e&&i!=="post";let u;if(Xi){if(i==="sync"){const _=ww();u=_.__watcherHandles||(_.__watcherHandles=[])}else if(!c){const _=()=>{};return _.stop=bn,_.resume=bn,_.pause=bn,_}}const d=Dt;l.call=(_,k,x)=>pn(_,d,k,x);let f=!1;i==="post"?l.scheduler=_=>{Kt(_,d&&d.suspense)}:i!=="sync"&&(f=!0,l.scheduler=(_,k)=>{k?_():Au(_)}),l.augmentJob=_=>{e&&(_.flags|=4),f&&(_.flags|=2,d&&(_.id=d.uid,_.i=d))};const m=G0(t,e,l);return Xi&&(u?u.push(m):c&&m()),m}function Ew(t,e,n){const s=this.proxy,r=at(t)?t.includes(".")?ag(s,t):()=>s[t]:t.bind(s,s);let i;Ee(e)?i=e:(i=e.handler,n=e);const o=co(this),l=og(r,i.bind(s),n);return o(),l}function ag(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const Tw=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${sn(e)}Modifiers`]||t[`${mr(e)}Modifiers`];function Iw(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||Be;let r=n;const i=e.startsWith("update:"),o=i&&Tw(s,e.slice(7));o&&(o.trim&&(r=n.map(d=>at(d)?d.trim():d)),o.number&&(r=n.map(gu)));let l,c=s[l=Hl(e)]||s[l=Hl(sn(e))];!c&&i&&(c=s[l=Hl(mr(e))]),c&&pn(c,t,6,r);const u=s[l+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,pn(u,t,6,r)}}const bw=new WeakMap;function lg(t,e,n=!1){const s=n?bw:e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},l=!1;if(!Ee(t)){const c=u=>{const d=lg(u,e,!0);d&&(l=!0,Et(o,d))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!l?(qe(t)&&s.set(t,null),null):(ve(i)?i.forEach(c=>o[c]=null):Et(o,i),qe(t)&&s.set(t,o),o)}function Za(t,e){return!t||!Ha(e)?!1:(e=e.slice(2).replace(/Once$/,""),Fe(t,e[0].toLowerCase()+e.slice(1))||Fe(t,mr(e))||Fe(t,e))}function kd(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:l,emit:c,render:u,renderCache:d,props:f,data:m,setupState:_,ctx:k,inheritAttrs:x}=t,N=fa(t);let H,V;try{if(n.shapeFlag&4){const O=r||s,U=O;H=In(u.call(U,O,d,f,_,m,k)),V=l}else{const O=e;H=In(O.length>1?O(f,{attrs:l,slots:o,emit:c}):O(f,null)),V=e.props?l:Aw(l)}}catch(O){Li.length=0,Ya(O,t,1),H=Ve(kt)}let C=H;if(V&&x!==!1){const O=Object.keys(V),{shapeFlag:U}=C;O.length&&U&7&&(i&&O.some(fu)&&(V=Rw(V,i)),C=xs(C,V,!1,!0))}return n.dirs&&(C=xs(C,null,!1,!0),C.dirs=C.dirs?C.dirs.concat(n.dirs):n.dirs),n.transition&&Ki(C,n.transition),H=C,fa(N),H}const Aw=t=>{let e;for(const n in t)(n==="class"||n==="style"||Ha(n))&&((e||(e={}))[n]=t[n]);return e},Rw=(t,e)=>{const n={};for(const s in t)(!fu(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function Sw(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:l,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?Dd(s,o,u):!!o;if(c&8){const d=e.dynamicProps;for(let f=0;f<d.length;f++){const m=d[f];if(o[m]!==s[m]&&!Za(u,m))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?Dd(s,o,u):!0:!!o;return!1}function Dd(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!Za(n,i))return!0}return!1}function Cw({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const cg={},ug=()=>Object.create(cg),hg=t=>Object.getPrototypeOf(t)===cg;function Pw(t,e,n,s=!1){const r={},i=ug();t.propsDefaults=Object.create(null),dg(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:Nm(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function xw(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,l=Oe(r),[c]=t.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let f=0;f<d.length;f++){let m=d[f];if(Za(t.emitsOptions,m))continue;const _=e[m];if(c)if(Fe(i,m))_!==i[m]&&(i[m]=_,u=!0);else{const k=sn(m);r[k]=kc(c,l,k,_,t,!1)}else _!==i[m]&&(i[m]=_,u=!0)}}}else{dg(t,e,r,i)&&(u=!0);let d;for(const f in l)(!e||!Fe(e,f)&&((d=mr(f))===f||!Fe(e,d)))&&(c?n&&(n[f]!==void 0||n[d]!==void 0)&&(r[f]=kc(c,l,f,void 0,t,!0)):delete r[f]);if(i!==l)for(const f in i)(!e||!Fe(e,f))&&(delete i[f],u=!0)}u&&Hn(t.attrs,"set","")}function dg(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,l;if(e)for(let c in e){if(Di(c))continue;const u=e[c];let d;r&&Fe(r,d=sn(c))?!i||!i.includes(d)?n[d]=u:(l||(l={}))[d]=u:Za(t.emitsOptions,c)||(!(c in s)||u!==s[c])&&(s[c]=u,o=!0)}if(i){const c=Oe(n),u=l||Be;for(let d=0;d<i.length;d++){const f=i[d];n[f]=kc(r,c,f,u[f],t,!Fe(u,f))}}return o}function kc(t,e,n,s,r,i){const o=t[n];if(o!=null){const l=Fe(o,"default");if(l&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Ee(c)){const{propsDefaults:u}=r;if(n in u)s=u[n];else{const d=co(r);s=u[n]=c.call(null,e),d()}}else s=c;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!l?s=!1:o[1]&&(s===""||s===mr(n))&&(s=!0))}return s}const kw=new WeakMap;function fg(t,e,n=!1){const s=n?kw:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},l=[];let c=!1;if(!Ee(t)){const d=f=>{c=!0;const[m,_]=fg(f,e,!0);Et(o,m),_&&l.push(..._)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!i&&!c)return qe(t)&&s.set(t,Nr),Nr;if(ve(i))for(let d=0;d<i.length;d++){const f=sn(i[d]);Nd(f)&&(o[f]=Be)}else if(i)for(const d in i){const f=sn(d);if(Nd(f)){const m=i[d],_=o[f]=ve(m)||Ee(m)?{type:m}:Et({},m),k=_.type;let x=!1,N=!0;if(ve(k))for(let H=0;H<k.length;++H){const V=k[H],C=Ee(V)&&V.name;if(C==="Boolean"){x=!0;break}else C==="String"&&(N=!1)}else x=Ee(k)&&k.name==="Boolean";_[0]=x,_[1]=N,(x||Fe(_,"default"))&&l.push(f)}}const u=[o,l];return qe(t)&&s.set(t,u),u}function Nd(t){return t[0]!=="$"&&!Di(t)}const Ru=t=>t==="_"||t==="_ctx"||t==="$stable",Su=t=>ve(t)?t.map(In):[In(t)],Dw=(t,e,n)=>{if(e._n)return e;const s=Bn((...r)=>Su(e(...r)),n);return s._c=!1,s},pg=(t,e,n)=>{const s=t._ctx;for(const r in t){if(Ru(r))continue;const i=t[r];if(Ee(i))e[r]=Dw(r,i,s);else if(i!=null){const o=Su(i);e[r]=()=>o}}},mg=(t,e)=>{const n=Su(e);t.slots.default=()=>n},gg=(t,e,n)=>{for(const s in e)(n||!Ru(s))&&(t[s]=e[s])},Nw=(t,e,n)=>{const s=t.slots=ug();if(t.vnode.shapeFlag&32){const r=e._;r?(gg(s,e,n),n&&mm(s,"_",r,!0)):pg(e,s)}else e&&mg(t,e)},Vw=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=Be;if(s.shapeFlag&32){const l=e._;l?n&&l===1?i=!1:gg(r,e,n):(i=!e.$stable,pg(e,r)),o=e}else e&&(mg(t,e),o={default:1});if(i)for(const l in r)!Ru(l)&&o[l]==null&&delete r[l]},Kt=Uw;function Ow(t){return Mw(t)}function Mw(t,e){const n=Wa();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:l,createComment:c,setText:u,setElementText:d,parentNode:f,nextSibling:m,setScopeId:_=bn,insertStaticContent:k}=t,x=(I,b,P,B=null,q=null,j=null,ne=void 0,X=null,Y=!!b.dynamicChildren)=>{if(I===b)return;I&&!er(I,b)&&(B=$(I),ae(I,q,j,!0),I=null),b.patchFlag===-2&&(Y=!1,b.dynamicChildren=null);const{type:W,ref:ie,shapeFlag:Z}=b;switch(W){case el:N(I,b,P,B);break;case kt:H(I,b,P,B);break;case Xo:I==null&&V(b,P,B,ne);break;case Ke:A(I,b,P,B,q,j,ne,X,Y);break;default:Z&1?U(I,b,P,B,q,j,ne,X,Y):Z&6?T(I,b,P,B,q,j,ne,X,Y):(Z&64||Z&128)&&W.process(I,b,P,B,q,j,ne,X,Y,ce)}ie!=null&&q?Oi(ie,I&&I.ref,j,b||I,!b):ie==null&&I&&I.ref!=null&&Oi(I.ref,null,j,I,!0)},N=(I,b,P,B)=>{if(I==null)s(b.el=l(b.children),P,B);else{const q=b.el=I.el;b.children!==I.children&&u(q,b.children)}},H=(I,b,P,B)=>{I==null?s(b.el=c(b.children||""),P,B):b.el=I.el},V=(I,b,P,B)=>{[I.el,I.anchor]=k(I.children,b,P,B,I.el,I.anchor)},C=({el:I,anchor:b},P,B)=>{let q;for(;I&&I!==b;)q=m(I),s(I,P,B),I=q;s(b,P,B)},O=({el:I,anchor:b})=>{let P;for(;I&&I!==b;)P=m(I),r(I),I=P;r(b)},U=(I,b,P,B,q,j,ne,X,Y)=>{if(b.type==="svg"?ne="svg":b.type==="math"&&(ne="mathml"),I==null)F(b,P,B,q,j,ne,X,Y);else{const W=I.el&&I.el._isVueCE?I.el:null;try{W&&W._beginPatch(),v(I,b,q,j,ne,X,Y)}finally{W&&W._endPatch()}}},F=(I,b,P,B,q,j,ne,X)=>{let Y,W;const{props:ie,shapeFlag:Z,transition:ue,dirs:se}=I;if(Y=I.el=o(I.type,j,ie&&ie.is,ie),Z&8?d(Y,I.children):Z&16&&y(I.children,Y,null,B,q,Yl(I,j),ne,X),se&&Ks(I,null,B,"created"),E(Y,I,I.scopeId,ne,B),ie){for(const Ie in ie)Ie!=="value"&&!Di(Ie)&&i(Y,Ie,null,ie[Ie],j,B);"value"in ie&&i(Y,"value",null,ie.value,j),(W=ie.onVnodeBeforeMount)&&wn(W,B,I)}se&&Ks(I,null,B,"beforeMount");const ge=Lw(q,ue);ge&&ue.beforeEnter(Y),s(Y,b,P),((W=ie&&ie.onVnodeMounted)||ge||se)&&Kt(()=>{W&&wn(W,B,I),ge&&ue.enter(Y),se&&Ks(I,null,B,"mounted")},q)},E=(I,b,P,B,q)=>{if(P&&_(I,P),B)for(let j=0;j<B.length;j++)_(I,B[j]);if(q){let j=q.subTree;if(b===j||vg(j.type)&&(j.ssContent===b||j.ssFallback===b)){const ne=q.vnode;E(I,ne,ne.scopeId,ne.slotScopeIds,q.parent)}}},y=(I,b,P,B,q,j,ne,X,Y=0)=>{for(let W=Y;W<I.length;W++){const ie=I[W]=X?gs(I[W]):In(I[W]);x(null,ie,b,P,B,q,j,ne,X)}},v=(I,b,P,B,q,j,ne)=>{const X=b.el=I.el;let{patchFlag:Y,dynamicChildren:W,dirs:ie}=b;Y|=I.patchFlag&16;const Z=I.props||Be,ue=b.props||Be;let se;if(P&&Qs(P,!1),(se=ue.onVnodeBeforeUpdate)&&wn(se,P,b,I),ie&&Ks(b,I,P,"beforeUpdate"),P&&Qs(P,!0),(Z.innerHTML&&ue.innerHTML==null||Z.textContent&&ue.textContent==null)&&d(X,""),W?S(I.dynamicChildren,W,X,P,B,Yl(b,q),j):ne||Se(I,b,X,null,P,B,Yl(b,q),j,!1),Y>0){if(Y&16)R(X,Z,ue,P,q);else if(Y&2&&Z.class!==ue.class&&i(X,"class",null,ue.class,q),Y&4&&i(X,"style",Z.style,ue.style,q),Y&8){const ge=b.dynamicProps;for(let Ie=0;Ie<ge.length;Ie++){const Re=ge[Ie],tt=Z[Re],nt=ue[Re];(nt!==tt||Re==="value")&&i(X,Re,tt,nt,q,P)}}Y&1&&I.children!==b.children&&d(X,b.children)}else!ne&&W==null&&R(X,Z,ue,P,q);((se=ue.onVnodeUpdated)||ie)&&Kt(()=>{se&&wn(se,P,b,I),ie&&Ks(b,I,P,"updated")},B)},S=(I,b,P,B,q,j,ne)=>{for(let X=0;X<b.length;X++){const Y=I[X],W=b[X],ie=Y.el&&(Y.type===Ke||!er(Y,W)||Y.shapeFlag&198)?f(Y.el):P;x(Y,W,ie,null,B,q,j,ne,!0)}},R=(I,b,P,B,q)=>{if(b!==P){if(b!==Be)for(const j in b)!Di(j)&&!(j in P)&&i(I,j,b[j],null,q,B);for(const j in P){if(Di(j))continue;const ne=P[j],X=b[j];ne!==X&&j!=="value"&&i(I,j,X,ne,q,B)}"value"in P&&i(I,"value",b.value,P.value,q)}},A=(I,b,P,B,q,j,ne,X,Y)=>{const W=b.el=I?I.el:l(""),ie=b.anchor=I?I.anchor:l("");let{patchFlag:Z,dynamicChildren:ue,slotScopeIds:se}=b;se&&(X=X?X.concat(se):se),I==null?(s(W,P,B),s(ie,P,B),y(b.children||[],P,ie,q,j,ne,X,Y)):Z>0&&Z&64&&ue&&I.dynamicChildren?(S(I.dynamicChildren,ue,P,q,j,ne,X),(b.key!=null||q&&b===q.subTree)&&_g(I,b,!0)):Se(I,b,P,ie,q,j,ne,X,Y)},T=(I,b,P,B,q,j,ne,X,Y)=>{b.slotScopeIds=X,I==null?b.shapeFlag&512?q.ctx.activate(b,P,B,ne,Y):ke(b,P,B,q,j,ne,Y):Xe(I,b,Y)},ke=(I,b,P,B,q,j,ne)=>{const X=I.component=Ww(I,B,q);if(Xa(I)&&(X.ctx.renderer=ce),Kw(X,!1,ne),X.asyncDep){if(q&&q.registerDep(X,ze,ne),!I.el){const Y=X.subTree=Ve(kt);H(null,Y,b,P),I.placeholder=Y.el}}else ze(X,I,b,P,q,j,ne)},Xe=(I,b,P)=>{const B=b.component=I.component;if(Sw(I,b,P))if(B.asyncDep&&!B.asyncResolved){Ne(B,b,P);return}else B.next=b,B.update();else b.el=I.el,B.vnode=b},ze=(I,b,P,B,q,j,ne)=>{const X=()=>{if(I.isMounted){let{next:Z,bu:ue,u:se,parent:ge,vnode:Ie}=I;{const Bt=yg(I);if(Bt){Z&&(Z.el=Ie.el,Ne(I,Z,ne)),Bt.asyncDep.then(()=>{I.isUnmounted||X()});return}}let Re=Z,tt;Qs(I,!1),Z?(Z.el=Ie.el,Ne(I,Z,ne)):Z=Ie,ue&&Qo(ue),(tt=Z.props&&Z.props.onVnodeBeforeUpdate)&&wn(tt,ge,Z,Ie),Qs(I,!0);const nt=kd(I),Rt=I.subTree;I.subTree=nt,x(Rt,nt,f(Rt.el),$(Rt),I,q,j),Z.el=nt.el,Re===null&&Cw(I,nt.el),se&&Kt(se,q),(tt=Z.props&&Z.props.onVnodeUpdated)&&Kt(()=>wn(tt,ge,Z,Ie),q)}else{let Z;const{el:ue,props:se}=b,{bm:ge,m:Ie,parent:Re,root:tt,type:nt}=I,Rt=Lr(b);Qs(I,!1),ge&&Qo(ge),!Rt&&(Z=se&&se.onVnodeBeforeMount)&&wn(Z,Re,b),Qs(I,!0);{tt.ce&&tt.ce._def.shadowRoot!==!1&&tt.ce._injectChildStyle(nt);const Bt=I.subTree=kd(I);x(null,Bt,P,B,I,q,j),b.el=Bt.el}if(Ie&&Kt(Ie,q),!Rt&&(Z=se&&se.onVnodeMounted)){const Bt=b;Kt(()=>wn(Z,Re,Bt),q)}(b.shapeFlag&256||Re&&Lr(Re.vnode)&&Re.vnode.shapeFlag&256)&&I.a&&Kt(I.a,q),I.isMounted=!0,b=P=B=null}};I.scope.on();const Y=I.effect=new vm(X);I.scope.off();const W=I.update=Y.run.bind(Y),ie=I.job=Y.runIfDirty.bind(Y);ie.i=I,ie.id=I.uid,Y.scheduler=()=>Au(ie),Qs(I,!0),W()},Ne=(I,b,P)=>{b.component=I;const B=I.vnode.props;I.vnode=b,I.next=null,xw(I,b.props,B,P),Vw(I,b.children,P),Qn(),Td(I),Yn()},Se=(I,b,P,B,q,j,ne,X,Y=!1)=>{const W=I&&I.children,ie=I?I.shapeFlag:0,Z=b.children,{patchFlag:ue,shapeFlag:se}=b;if(ue>0){if(ue&128){K(W,Z,P,B,q,j,ne,X,Y);return}else if(ue&256){de(W,Z,P,B,q,j,ne,X,Y);return}}se&8?(ie&16&&Ye(W,q,j),Z!==W&&d(P,Z)):ie&16?se&16?K(W,Z,P,B,q,j,ne,X,Y):Ye(W,q,j,!0):(ie&8&&d(P,""),se&16&&y(Z,P,B,q,j,ne,X,Y))},de=(I,b,P,B,q,j,ne,X,Y)=>{I=I||Nr,b=b||Nr;const W=I.length,ie=b.length,Z=Math.min(W,ie);let ue;for(ue=0;ue<Z;ue++){const se=b[ue]=Y?gs(b[ue]):In(b[ue]);x(I[ue],se,P,null,q,j,ne,X,Y)}W>ie?Ye(I,q,j,!0,!1,Z):y(b,P,B,q,j,ne,X,Y,Z)},K=(I,b,P,B,q,j,ne,X,Y)=>{let W=0;const ie=b.length;let Z=I.length-1,ue=ie-1;for(;W<=Z&&W<=ue;){const se=I[W],ge=b[W]=Y?gs(b[W]):In(b[W]);if(er(se,ge))x(se,ge,P,null,q,j,ne,X,Y);else break;W++}for(;W<=Z&&W<=ue;){const se=I[Z],ge=b[ue]=Y?gs(b[ue]):In(b[ue]);if(er(se,ge))x(se,ge,P,null,q,j,ne,X,Y);else break;Z--,ue--}if(W>Z){if(W<=ue){const se=ue+1,ge=se<ie?b[se].el:B;for(;W<=ue;)x(null,b[W]=Y?gs(b[W]):In(b[W]),P,ge,q,j,ne,X,Y),W++}}else if(W>ue)for(;W<=Z;)ae(I[W],q,j,!0),W++;else{const se=W,ge=W,Ie=new Map;for(W=ge;W<=ue;W++){const st=b[W]=Y?gs(b[W]):In(b[W]);st.key!=null&&Ie.set(st.key,W)}let Re,tt=0;const nt=ue-ge+1;let Rt=!1,Bt=0;const Gt=new Array(nt);for(W=0;W<nt;W++)Gt[W]=0;for(W=se;W<=Z;W++){const st=I[W];if(tt>=nt){ae(st,q,j,!0);continue}let Ge;if(st.key!=null)Ge=Ie.get(st.key);else for(Re=ge;Re<=ue;Re++)if(Gt[Re-ge]===0&&er(st,b[Re])){Ge=Re;break}Ge===void 0?ae(st,q,j,!0):(Gt[Ge-ge]=W+1,Ge>=Bt?Bt=Ge:Rt=!0,x(st,b[Ge],P,null,q,j,ne,X,Y),tt++)}const js=Rt?Fw(Gt):Nr;for(Re=js.length-1,W=nt-1;W>=0;W--){const st=ge+W,Ge=b[st],Er=b[st+1],Mn=st+1<ie?Er.el||Er.placeholder:B;Gt[W]===0?x(null,Ge,P,Mn,q,j,ne,X,Y):Rt&&(Re<0||W!==js[Re]?M(Ge,P,Mn,2):Re--)}}},M=(I,b,P,B,q=null)=>{const{el:j,type:ne,transition:X,children:Y,shapeFlag:W}=I;if(W&6){M(I.component.subTree,b,P,B);return}if(W&128){I.suspense.move(b,P,B);return}if(W&64){ne.move(I,b,P,ce);return}if(ne===Ke){s(j,b,P);for(let Z=0;Z<Y.length;Z++)M(Y[Z],b,P,B);s(I.anchor,b,P);return}if(ne===Xo){C(I,b,P);return}if(B!==2&&W&1&&X)if(B===0)X.beforeEnter(j),s(j,b,P),Kt(()=>X.enter(j),q);else{const{leave:Z,delayLeave:ue,afterLeave:se}=X,ge=()=>{I.ctx.isUnmounted?r(j):s(j,b,P)},Ie=()=>{j._isLeaving&&j[jn](!0),Z(j,()=>{ge(),se&&se()})};ue?ue(j,ge,Ie):Ie()}else s(j,b,P)},ae=(I,b,P,B=!1,q=!1)=>{const{type:j,props:ne,ref:X,children:Y,dynamicChildren:W,shapeFlag:ie,patchFlag:Z,dirs:ue,cacheIndex:se}=I;if(Z===-2&&(q=!1),X!=null&&(Qn(),Oi(X,null,P,I,!0),Yn()),se!=null&&(b.renderCache[se]=void 0),ie&256){b.ctx.deactivate(I);return}const ge=ie&1&&ue,Ie=!Lr(I);let Re;if(Ie&&(Re=ne&&ne.onVnodeBeforeUnmount)&&wn(Re,b,I),ie&6)ft(I.component,P,B);else{if(ie&128){I.suspense.unmount(P,B);return}ge&&Ks(I,null,b,"beforeUnmount"),ie&64?I.type.remove(I,b,P,ce,B):W&&!W.hasOnce&&(j!==Ke||Z>0&&Z&64)?Ye(W,b,P,!1,!0):(j===Ke&&Z&384||!q&&ie&16)&&Ye(Y,b,P),B&&Me(I)}(Ie&&(Re=ne&&ne.onVnodeUnmounted)||ge)&&Kt(()=>{Re&&wn(Re,b,I),ge&&Ks(I,null,b,"unmounted")},P)},Me=I=>{const{type:b,el:P,anchor:B,transition:q}=I;if(b===Ke){Ae(P,B);return}if(b===Xo){O(I);return}const j=()=>{r(P),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(I.shapeFlag&1&&q&&!q.persisted){const{leave:ne,delayLeave:X}=q,Y=()=>ne(P,j);X?X(I.el,j,Y):Y()}else j()},Ae=(I,b)=>{let P;for(;I!==b;)P=m(I),r(I),I=P;r(b)},ft=(I,b,P)=>{const{bum:B,scope:q,job:j,subTree:ne,um:X,m:Y,a:W}=I;Vd(Y),Vd(W),B&&Qo(B),q.stop(),j&&(j.flags|=8,ae(ne,I,b,P)),X&&Kt(X,b),Kt(()=>{I.isUnmounted=!0},b)},Ye=(I,b,P,B=!1,q=!1,j=0)=>{for(let ne=j;ne<I.length;ne++)ae(I[ne],b,P,B,q)},$=I=>{if(I.shapeFlag&6)return $(I.component.subTree);if(I.shapeFlag&128)return I.suspense.next();const b=m(I.anchor||I.el),P=b&&b[Y0];return P?m(P):b};let Q=!1;const re=(I,b,P)=>{I==null?b._vnode&&ae(b._vnode,null,null,!0):x(b._vnode||null,I,b,null,null,null,P),b._vnode=I,Q||(Q=!0,Td(),Fm(),Q=!1)},ce={p:x,um:ae,m:M,r:Me,mt:ke,mc:y,pc:Se,pbc:S,n:$,o:t};return{render:re,hydrate:void 0,createApp:yw(re)}}function Yl({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Qs({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Lw(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function _g(t,e,n=!1){const s=t.children,r=e.children;if(ve(s)&&ve(r))for(let i=0;i<s.length;i++){const o=s[i];let l=r[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[i]=gs(r[i]),l.el=o.el),!n&&l.patchFlag!==-2&&_g(o,l)),l.type===el&&l.patchFlag!==-1&&(l.el=o.el),l.type===kt&&!l.el&&(l.el=o.el)}}function Fw(t){const e=t.slice(),n=[0];let s,r,i,o,l;const c=t.length;for(s=0;s<c;s++){const u=t[s];if(u!==0){if(r=n[n.length-1],t[r]<u){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)l=i+o>>1,t[n[l]]<u?i=l+1:o=l;u<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function yg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:yg(e)}function Vd(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const vg=t=>t.__isSuspense;function Uw(t,e){e&&e.pendingBranch?ve(t)?e.effects.push(...t):e.effects.push(t):Q0(t)}const Ke=Symbol.for("v-fgt"),el=Symbol.for("v-txt"),kt=Symbol.for("v-cmt"),Xo=Symbol.for("v-stc"),Li=[];let Qt=null;function J(t=!1){Li.push(Qt=t?null:[])}function $w(){Li.pop(),Qt=Li[Li.length-1]||null}let Qi=1;function ga(t,e=!1){Qi+=t,t<0&&Qt&&e&&(Qt.hasOnce=!0)}function wg(t){return t.dynamicChildren=Qi>0?Qt||Nr:null,$w(),Qi>0&&Qt&&Qt.push(t),t}function ee(t,e,n,s,r,i){return wg(w(t,e,n,s,r,i,!0))}function Ps(t,e,n,s,r){return wg(Ve(t,e,n,s,r,!0))}function Yi(t){return t?t.__v_isVNode===!0:!1}function er(t,e){return t.type===e.type&&t.key===e.key}const Eg=({key:t})=>t??null,Jo=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?at(t)||Nt(t)||Ee(t)?{i:bt,r:t,k:e,f:!!n}:t:null);function w(t,e=null,n=null,s=0,r=null,i=t===Ke?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Eg(e),ref:e&&Jo(e),scopeId:$m,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:bt};return l?(Cu(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=at(n)?8:16),Qi>0&&!o&&Qt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Qt.push(c),c}const Ve=Bw;function Bw(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===eg)&&(t=kt),Yi(t)){const l=xs(t,e,!0);return n&&Cu(l,n),Qi>0&&!i&&Qt&&(l.shapeFlag&6?Qt[Qt.indexOf(t)]=l:Qt.push(l)),l.patchFlag=-2,l}if(Zw(t)&&(t=t.__vccOpts),e){e=jw(e);let{class:l,style:c}=e;l&&!at(l)&&(e.class=ot(l)),qe(c)&&(Iu(c)&&!ve(c)&&(c=Et({},c)),e.style=Fs(c))}const o=at(t)?1:vg(t)?128:Bm(t)?64:qe(t)?4:Ee(t)?2:0;return w(t,e,n,s,r,o,i,!0)}function jw(t){return t?Iu(t)||hg(t)?Et({},t):t:null}function xs(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:l,transition:c}=t,u=e?qw(r||{},e):r,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Eg(u),ref:e&&e.ref?n&&i?ve(i)?i.concat(Jo(e)):[i,Jo(e)]:Jo(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ke?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&xs(t.ssContent),ssFallback:t.ssFallback&&xs(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&s&&Ki(d,c.clone(d)),d}function zn(t=" ",e=0){return Ve(el,null,t,e)}function Hw(t,e){const n=Ve(Xo,null,t);return n.staticCount=e,n}function Je(t="",e=!1){return e?(J(),Ps(kt,null,t)):Ve(kt,null,t)}function In(t){return t==null||typeof t=="boolean"?Ve(kt):ve(t)?Ve(Ke,null,t.slice()):Yi(t)?gs(t):Ve(el,null,String(t))}function gs(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:xs(t)}function Cu(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(ve(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),Cu(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!hg(e)?e._ctx=bt:r===3&&bt&&(bt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ee(e)?(e={default:e,_ctx:bt},n=32):(e=String(e),s&64?(n=16,e=[zn(e)]):n=8);t.children=e,t.shapeFlag|=n}function qw(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=ot([e.class,s.class]));else if(r==="style")e.style=Fs([e.style,s.style]);else if(Ha(r)){const i=e[r],o=s[r];o&&i!==o&&!(ve(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function wn(t,e,n,s=null){pn(t,e,7,[n,s])}const zw=ig();let Gw=0;function Ww(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||zw,i={uid:Gw++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new v0(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:fg(s,r),emitsOptions:lg(s,r),emit:null,emitted:null,propsDefaults:Be,inheritAttrs:s.inheritAttrs,ctx:Be,data:Be,props:Be,attrs:Be,slots:Be,refs:Be,setupState:Be,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Iw.bind(null,i),t.ce&&t.ce(i),i}let Dt=null;const Tg=()=>Dt||bt;let _a,Dc;{const t=Wa(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};_a=e("__VUE_INSTANCE_SETTERS__",n=>Dt=n),Dc=e("__VUE_SSR_SETTERS__",n=>Xi=n)}const co=t=>{const e=Dt;return _a(t),t.scope.on(),()=>{t.scope.off(),_a(e)}},Od=()=>{Dt&&Dt.scope.off(),_a(null)};function Ig(t){return t.vnode.shapeFlag&4}let Xi=!1;function Kw(t,e=!1,n=!1){e&&Dc(e);const{props:s,children:r}=t.vnode,i=Ig(t);Pw(t,s,i,e),Nw(t,r,n||e);const o=i?Qw(t,e):void 0;return e&&Dc(!1),o}function Qw(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,hw);const{setup:s}=n;if(s){Qn();const r=t.setupContext=s.length>1?Xw(t):null,i=co(t),o=lo(s,t,0,[t.props,r]),l=dm(o);if(Yn(),i(),(l||t.sp)&&!Lr(t)&&Km(t),l){if(o.then(Od,Od),e)return o.then(c=>{Md(t,c)}).catch(c=>{Ya(c,t,0)});t.asyncDep=o}else Md(t,o)}else bg(t)}function Md(t,e,n){Ee(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:qe(e)&&(t.setupState=Om(e)),bg(t)}function bg(t,e,n){const s=t.type;t.render||(t.render=s.render||bn);{const r=co(t);Qn();try{dw(t)}finally{Yn(),r()}}}const Yw={get(t,e){return Pt(t,"get",""),t[e]}};function Xw(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Yw),slots:t.slots,emit:t.emit,expose:e}}function tl(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Om(U0(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Mi)return Mi[n](t)},has(e,n){return n in e||n in Mi}})):t.proxy}function Jw(t,e=!0){return Ee(t)?t.displayName||t.name:t.name||e&&t.__name}function Zw(t){return Ee(t)&&"__vccOpts"in t}const Ze=(t,e)=>q0(t,e,Xi);function Pu(t,e,n){try{ga(-1);const s=arguments.length;return s===2?qe(e)&&!ve(e)?Yi(e)?Ve(t,null,[e]):Ve(t,e):Ve(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Yi(n)&&(n=[n]),Ve(t,e,n))}finally{ga(1)}}const eE="3.5.25";let Nc;const Ld=typeof window<"u"&&window.trustedTypes;if(Ld)try{Nc=Ld.createPolicy("vue",{createHTML:t=>t})}catch{}const Ag=Nc?t=>Nc.createHTML(t):t=>t,tE="http://www.w3.org/2000/svg",nE="http://www.w3.org/1998/Math/MathML",$n=typeof document<"u"?document:null,Fd=$n&&$n.createElement("template"),sE={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?$n.createElementNS(tE,t):e==="mathml"?$n.createElementNS(nE,t):n?$n.createElement(t,{is:n}):$n.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>$n.createTextNode(t),createComment:t=>$n.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>$n.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{Fd.innerHTML=Ag(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const l=Fd.content;if(s==="svg"||s==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},hs="transition",Ai="animation",Ji=Symbol("_vtc"),Rg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},rE=Et({},jm,Rg),iE=t=>(t.displayName="Transition",t.props=rE,t),oE=iE((t,{slots:e})=>Pu(Z0,aE(t),e)),Ys=(t,e=[])=>{ve(t)?t.forEach(n=>n(...e)):t&&t(...e)},Ud=t=>t?ve(t)?t.some(e=>e.length>1):t.length>1:!1;function aE(t){const e={};for(const A in t)A in Rg||(e[A]=t[A]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:u=o,appearToClass:d=l,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:_=`${n}-leave-to`}=t,k=lE(r),x=k&&k[0],N=k&&k[1],{onBeforeEnter:H,onEnter:V,onEnterCancelled:C,onLeave:O,onLeaveCancelled:U,onBeforeAppear:F=H,onAppear:E=V,onAppearCancelled:y=C}=e,v=(A,T,ke,Xe)=>{A._enterCancelled=Xe,Xs(A,T?d:l),Xs(A,T?u:o),ke&&ke()},S=(A,T)=>{A._isLeaving=!1,Xs(A,f),Xs(A,_),Xs(A,m),T&&T()},R=A=>(T,ke)=>{const Xe=A?E:V,ze=()=>v(T,A,ke);Ys(Xe,[T,ze]),$d(()=>{Xs(T,A?c:i),Fn(T,A?d:l),Ud(Xe)||Bd(T,s,x,ze)})};return Et(e,{onBeforeEnter(A){Ys(H,[A]),Fn(A,i),Fn(A,o)},onBeforeAppear(A){Ys(F,[A]),Fn(A,c),Fn(A,u)},onEnter:R(!1),onAppear:R(!0),onLeave(A,T){A._isLeaving=!0;const ke=()=>S(A,T);Fn(A,f),A._enterCancelled?(Fn(A,m),qd(A)):(qd(A),Fn(A,m)),$d(()=>{A._isLeaving&&(Xs(A,f),Fn(A,_),Ud(O)||Bd(A,s,N,ke))}),Ys(O,[A,ke])},onEnterCancelled(A){v(A,!1,void 0,!0),Ys(C,[A])},onAppearCancelled(A){v(A,!0,void 0,!0),Ys(y,[A])},onLeaveCancelled(A){S(A),Ys(U,[A])}})}function lE(t){if(t==null)return null;if(qe(t))return[Xl(t.enter),Xl(t.leave)];{const e=Xl(t);return[e,e]}}function Xl(t){return d0(t)}function Fn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Ji]||(t[Ji]=new Set)).add(e)}function Xs(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[Ji];n&&(n.delete(e),n.size||(t[Ji]=void 0))}function $d(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let cE=0;function Bd(t,e,n,s){const r=t._endId=++cE,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:l,propCount:c}=uE(t,e);if(!o)return s();const u=o+"end";let d=0;const f=()=>{t.removeEventListener(u,m),i()},m=_=>{_.target===t&&++d>=c&&f()};setTimeout(()=>{d<c&&f()},l+1),t.addEventListener(u,m)}function uE(t,e){const n=window.getComputedStyle(t),s=k=>(n[k]||"").split(", "),r=s(`${hs}Delay`),i=s(`${hs}Duration`),o=jd(r,i),l=s(`${Ai}Delay`),c=s(`${Ai}Duration`),u=jd(l,c);let d=null,f=0,m=0;e===hs?o>0&&(d=hs,f=o,m=i.length):e===Ai?u>0&&(d=Ai,f=u,m=c.length):(f=Math.max(o,u),d=f>0?o>u?hs:Ai:null,m=d?d===hs?i.length:c.length:0);const _=d===hs&&/\b(?:transform|all)(?:,|$)/.test(s(`${hs}Property`).toString());return{type:d,timeout:f,propCount:m,hasTransform:_}}function jd(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>Hd(n)+Hd(t[s])))}function Hd(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function qd(t){return(t?t.ownerDocument:document).body.offsetHeight}function hE(t,e,n){const s=t[Ji];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const zd=Symbol("_vod"),dE=Symbol("_vsh"),fE=Symbol(""),pE=/(?:^|;)\s*display\s*:/;function mE(t,e,n){const s=t.style,r=at(n);let i=!1;if(n&&!r){if(e)if(at(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&Zo(s,l,"")}else for(const o in e)n[o]==null&&Zo(s,o,"");for(const o in n)o==="display"&&(i=!0),Zo(s,o,n[o])}else if(r){if(e!==n){const o=s[fE];o&&(n+=";"+o),s.cssText=n,i=pE.test(n)}}else e&&t.removeAttribute("style");zd in t&&(t[zd]=i?s.display:"",t[dE]&&(s.display="none"))}const Gd=/\s*!important$/;function Zo(t,e,n){if(ve(n))n.forEach(s=>Zo(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=gE(t,e);Gd.test(n)?t.setProperty(mr(s),n.replace(Gd,""),"important"):t[s]=n}}const Wd=["Webkit","Moz","ms"],Jl={};function gE(t,e){const n=Jl[e];if(n)return n;let s=sn(e);if(s!=="filter"&&s in t)return Jl[e]=s;s=Ga(s);for(let r=0;r<Wd.length;r++){const i=Wd[r]+s;if(i in t)return Jl[e]=i}return e}const Kd="http://www.w3.org/1999/xlink";function Qd(t,e,n,s,r,i=y0(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Kd,e.slice(6,e.length)):t.setAttributeNS(Kd,e,n):n==null||i&&!gm(n)?t.removeAttribute(e):t.setAttribute(e,i?"":ns(n)?String(n):n)}function Yd(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Ag(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=gm(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function Sr(t,e,n,s){t.addEventListener(e,n,s)}function _E(t,e,n,s){t.removeEventListener(e,n,s)}const Xd=Symbol("_vei");function yE(t,e,n,s,r=null){const i=t[Xd]||(t[Xd]={}),o=i[e];if(s&&o)o.value=s;else{const[l,c]=vE(e);if(s){const u=i[e]=TE(s,r);Sr(t,l,u,c)}else o&&(_E(t,l,o,c),i[e]=void 0)}}const Jd=/(?:Once|Passive|Capture)$/;function vE(t){let e;if(Jd.test(t)){e={};let s;for(;s=t.match(Jd);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):mr(t.slice(2)),e]}let Zl=0;const wE=Promise.resolve(),EE=()=>Zl||(wE.then(()=>Zl=0),Zl=Date.now());function TE(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;pn(IE(s,n.value),e,5,[s])};return n.value=t,n.attached=EE(),n}function IE(t,e){if(ve(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const Zd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,bE=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?hE(t,s,o):e==="style"?mE(t,n,s):Ha(e)?fu(e)||yE(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):AE(t,e,s,o))?(Yd(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Qd(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!at(s))?Yd(t,sn(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Qd(t,e,s,o))};function AE(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&Zd(e)&&Ee(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Zd(e)&&at(n)?!1:e in t}const ef=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ve(e)?n=>Qo(e,n):e};function RE(t){t.target.composing=!0}function tf(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ec=Symbol("_assign");function nf(t,e,n){return e&&(t=t.trim()),n&&(t=gu(t)),t}const Ur={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[ec]=ef(r);const i=s||r.props&&r.props.type==="number";Sr(t,e?"change":"input",o=>{o.target.composing||t[ec](nf(t.value,n,i))}),(n||i)&&Sr(t,"change",()=>{t.value=nf(t.value,n,i)}),e||(Sr(t,"compositionstart",RE),Sr(t,"compositionend",tf),Sr(t,"change",tf))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(t[ec]=ef(o),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?gu(t.value):t.value,c=e??"";l!==c&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||r&&t.value.trim()===c)||(t.value=c))}},SE=["ctrl","shift","alt","meta"],CE={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>SE.some(n=>t[`${n}Key`]&&!e.includes(n))},ya=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const l=CE[e[o]];if(l&&l(r,e))return}return t(r,...i)})},PE=Et({patchProp:bE},sE);let sf;function xE(){return sf||(sf=Ow(PE))}const kE=(...t)=>{const e=xE().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=NE(s);if(!r)return;const i=e._component;!Ee(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,DE(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function DE(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function NE(t){return at(t)?document.querySelector(t):t}const uo=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},VE={},OE={class:"min-h-screen w-full overflow-x-hidden"};function ME(t,e){const n=Zm("router-view");return J(),ee("div",OE,[Ve(n)])}const LE=uo(VE,[["render",ME]]);const Cr=typeof document<"u";function Sg(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function FE(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Sg(t.default)}const Le=Object.assign;function tc(t,e){const n={};for(const s in e){const r=e[s];n[s]=mn(r)?r.map(t):t(r)}return n}const Fi=()=>{},mn=Array.isArray;function rf(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}const Cg=/#/g,UE=/&/g,$E=/\//g,BE=/=/g,jE=/\?/g,Pg=/\+/g,HE=/%5B/g,qE=/%5D/g,xg=/%5E/g,zE=/%60/g,kg=/%7B/g,GE=/%7C/g,Dg=/%7D/g,WE=/%20/g;function xu(t){return t==null?"":encodeURI(""+t).replace(GE,"|").replace(HE,"[").replace(qE,"]")}function KE(t){return xu(t).replace(kg,"{").replace(Dg,"}").replace(xg,"^")}function Vc(t){return xu(t).replace(Pg,"%2B").replace(WE,"+").replace(Cg,"%23").replace(UE,"%26").replace(zE,"`").replace(kg,"{").replace(Dg,"}").replace(xg,"^")}function QE(t){return Vc(t).replace(BE,"%3D")}function YE(t){return xu(t).replace(Cg,"%23").replace(jE,"%3F")}function XE(t){return YE(t).replace($E,"%2F")}function Zi(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const JE=/\/$/,ZE=t=>t.replace(JE,"");function nc(t,e,n="/"){let s,r={},i="",o="";const l=e.indexOf("#");let c=e.indexOf("?");return c=l>=0&&c>l?-1:c,c>=0&&(s=e.slice(0,c),i=e.slice(c,l>0?l:e.length),r=t(i.slice(1))),l>=0&&(s=s||e.slice(0,l),o=e.slice(l,e.length)),s=sT(s??e,n),{fullPath:s+i+o,path:s,query:r,hash:Zi(o)}}function eT(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function of(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function tT(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&Qr(e.matched[s],n.matched[r])&&Ng(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Qr(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Ng(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!nT(t[n],e[n]))return!1;return!0}function nT(t,e){return mn(t)?af(t,e):mn(e)?af(e,t):t===e}function af(t,e){return mn(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function sT(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,l;for(o=0;o<s.length;o++)if(l=s[o],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const ds={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Oc=function(t){return t.pop="pop",t.push="push",t}({}),sc=function(t){return t.back="back",t.forward="forward",t.unknown="",t}({});function rT(t){if(!t)if(Cr){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),ZE(t)}const iT=/^[^#]+#/;function oT(t,e){return t.replace(iT,"#")+e}function aT(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const nl=()=>({left:window.scrollX,top:window.scrollY});function lT(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=aT(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function lf(t,e){return(history.state?history.state.position-e:-1)+t}const Mc=new Map;function cT(t,e){Mc.set(t,e)}function uT(t){const e=Mc.get(t);return Mc.delete(t),e}function hT(t){return typeof t=="string"||t&&typeof t=="object"}function Vg(t){return typeof t=="string"||typeof t=="symbol"}let it=function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t}({});const Og=Symbol("");it.MATCHER_NOT_FOUND+"",it.NAVIGATION_GUARD_REDIRECT+"",it.NAVIGATION_ABORTED+"",it.NAVIGATION_CANCELLED+"",it.NAVIGATION_DUPLICATED+"";function Yr(t,e){return Le(new Error,{type:t,[Og]:!0},e)}function Un(t,e){return t instanceof Error&&Og in t&&(e==null||!!(t.type&e))}const dT=["params","query","hash"];function fT(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of dT)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function pT(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(Pg," "),i=r.indexOf("="),o=Zi(i<0?r:r.slice(0,i)),l=i<0?null:Zi(r.slice(i+1));if(o in e){let c=e[o];mn(c)||(c=e[o]=[c]),c.push(l)}else e[o]=l}return e}function cf(t){let e="";for(let n in t){const s=t[n];if(n=QE(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(mn(s)?s.map(r=>r&&Vc(r)):[s&&Vc(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function mT(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=mn(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const gT=Symbol(""),uf=Symbol(""),sl=Symbol(""),Mg=Symbol(""),Lc=Symbol("");function Ri(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function _s(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((l,c)=>{const u=m=>{m===!1?c(Yr(it.NAVIGATION_ABORTED,{from:n,to:e})):m instanceof Error?c(m):hT(m)?c(Yr(it.NAVIGATION_GUARD_REDIRECT,{from:e,to:m})):(o&&s.enterCallbacks[r]===o&&typeof m=="function"&&o.push(m),l())},d=i(()=>t.call(s&&s.instances[r],e,n,u));let f=Promise.resolve(d);t.length<3&&(f=f.then(u)),f.catch(m=>c(m))})}function rc(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const l in o.components){let c=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(Sg(c)){const u=(c.__vccOpts||c)[e];u&&i.push(_s(u,n,s,o,l,r))}else{let u=c();i.push(()=>u.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const f=FE(d)?d.default:d;o.mods[l]=d,o.components[l]=f;const m=(f.__vccOpts||f)[e];return m&&_s(m,n,s,o,l,r)()}))}}return i}function _T(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const l=e.matched[o];l&&(t.matched.find(u=>Qr(u,l))?s.push(l):n.push(l));const c=t.matched[o];c&&(e.matched.find(u=>Qr(u,c))||r.push(c))}return[n,s,r]}let yT=()=>location.protocol+"//"+location.host;function Lg(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,l=r.slice(o);return l[0]!=="/"&&(l="/"+l),of(l,"")}return of(n,t)+s+r}function vT(t,e,n,s){let r=[],i=[],o=null;const l=({state:m})=>{const _=Lg(t,location),k=n.value,x=e.value;let N=0;if(m){if(n.value=_,e.value=m,o&&o===k){o=null;return}N=x?m.position-x.position:0}else s(_);r.forEach(H=>{H(n.value,k,{delta:N,type:Oc.pop,direction:N?N>0?sc.forward:sc.back:sc.unknown})})};function c(){o=n.value}function u(m){r.push(m);const _=()=>{const k=r.indexOf(m);k>-1&&r.splice(k,1)};return i.push(_),_}function d(){if(document.visibilityState==="hidden"){const{history:m}=window;if(!m.state)return;m.replaceState(Le({},m.state,{scroll:nl()}),"")}}function f(){for(const m of i)m();i=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",d),document.removeEventListener("visibilitychange",d)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",d),document.addEventListener("visibilitychange",d),{pauseListeners:c,listen:u,destroy:f}}function hf(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?nl():null}}function wT(t){const{history:e,location:n}=window,s={value:Lg(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,u,d){const f=t.indexOf("#"),m=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+c:yT()+t+c;try{e[d?"replaceState":"pushState"](u,"",m),r.value=u}catch(_){console.error(_),n[d?"replace":"assign"](m)}}function o(c,u){i(c,Le({},e.state,hf(r.value.back,c,r.value.forward,!0),u,{position:r.value.position}),!0),s.value=c}function l(c,u){const d=Le({},r.value,e.state,{forward:c,scroll:nl()});i(d.current,d,!0),i(c,Le({},hf(s.value,c,null),{position:d.position+1},u),!1),s.value=c}return{location:s,state:r,push:l,replace:o}}function ET(t){t=rT(t);const e=wT(t),n=vT(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=Le({location:"",base:t,go:s,createHref:oT.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function TT(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),ET(t)}let tr=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t}({});var mt=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t}(mt||{});const IT={type:tr.Static,value:""},bT=/[a-zA-Z0-9_]/;function AT(t){if(!t)return[[]];if(t==="/")return[[IT]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(_){throw new Error(`ERR (${n})/"${u}": ${_}`)}let n=mt.Static,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let l=0,c,u="",d="";function f(){u&&(n===mt.Static?i.push({type:tr.Static,value:u}):n===mt.Param||n===mt.ParamRegExp||n===mt.ParamRegExpEnd?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:tr.Param,value:u,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function m(){u+=c}for(;l<t.length;){if(c=t[l++],c==="\\"&&n!==mt.ParamRegExp){s=n,n=mt.EscapeNext;continue}switch(n){case mt.Static:c==="/"?(u&&f(),o()):c===":"?(f(),n=mt.Param):m();break;case mt.EscapeNext:m(),n=s;break;case mt.Param:c==="("?n=mt.ParamRegExp:bT.test(c)?m():(f(),n=mt.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case mt.ParamRegExp:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:n=mt.ParamRegExpEnd:d+=c;break;case mt.ParamRegExpEnd:f(),n=mt.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--,d="";break;default:e("Unknown state");break}}return n===mt.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),f(),o(),r}const df="[^/]+?",RT={sensitive:!1,strict:!1,start:!0,end:!0};var Ft=function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t}(Ft||{});const ST=/[.+*?^${}()[\]/\\]/g;function CT(t,e){const n=Le({},RT,e),s=[];let r=n.start?"^":"";const i=[];for(const u of t){const d=u.length?[]:[Ft.Root];n.strict&&!u.length&&(r+="/");for(let f=0;f<u.length;f++){const m=u[f];let _=Ft.Segment+(n.sensitive?Ft.BonusCaseSensitive:0);if(m.type===tr.Static)f||(r+="/"),r+=m.value.replace(ST,"\\$&"),_+=Ft.Static;else if(m.type===tr.Param){const{value:k,repeatable:x,optional:N,regexp:H}=m;i.push({name:k,repeatable:x,optional:N});const V=H||df;if(V!==df){_+=Ft.BonusCustomRegExp;try{`${V}`}catch(O){throw new Error(`Invalid custom RegExp for param "${k}" (${V}): `+O.message)}}let C=x?`((?:${V})(?:/(?:${V}))*)`:`(${V})`;f||(C=N&&u.length<2?`(?:/${C})`:"/"+C),N&&(C+="?"),r+=C,_+=Ft.Dynamic,N&&(_+=Ft.BonusOptional),x&&(_+=Ft.BonusRepeatable),V===".*"&&(_+=Ft.BonusWildcard)}d.push(_)}s.push(d)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=Ft.BonusStrict}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function l(u){const d=u.match(o),f={};if(!d)return null;for(let m=1;m<d.length;m++){const _=d[m]||"",k=i[m-1];f[k.name]=_&&k.repeatable?_.split("/"):_}return f}function c(u){let d="",f=!1;for(const m of t){(!f||!d.endsWith("/"))&&(d+="/"),f=!1;for(const _ of m)if(_.type===tr.Static)d+=_.value;else if(_.type===tr.Param){const{value:k,repeatable:x,optional:N}=_,H=k in u?u[k]:"";if(mn(H)&&!x)throw new Error(`Provided param "${k}" is an array but it is not repeatable (* or + modifiers)`);const V=mn(H)?H.join("/"):H;if(!V)if(N)m.length<2&&(d.endsWith("/")?d=d.slice(0,-1):f=!0);else throw new Error(`Missing required param "${k}"`);d+=V}}return d||"/"}return{re:o,score:s,keys:i,parse:l,stringify:c}}function PT(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===Ft.Static+Ft.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Ft.Static+Ft.Segment?1:-1:0}function Fg(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=PT(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(ff(s))return 1;if(ff(r))return-1}return r.length-s.length}function ff(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const xT={strict:!1,end:!0,sensitive:!1};function kT(t,e,n){const s=CT(AT(t.path),n),r=Le(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function DT(t,e){const n=[],s=new Map;e=rf(xT,e);function r(f){return s.get(f)}function i(f,m,_){const k=!_,x=mf(f);x.aliasOf=_&&_.record;const N=rf(e,f),H=[x];if("alias"in f){const O=typeof f.alias=="string"?[f.alias]:f.alias;for(const U of O)H.push(mf(Le({},x,{components:_?_.record.components:x.components,path:U,aliasOf:_?_.record:x})))}let V,C;for(const O of H){const{path:U}=O;if(m&&U[0]!=="/"){const F=m.record.path,E=F[F.length-1]==="/"?"":"/";O.path=m.record.path+(U&&E+U)}if(V=kT(O,m,N),_?_.alias.push(V):(C=C||V,C!==V&&C.alias.push(V),k&&f.name&&!gf(V)&&o(f.name)),Ug(V)&&c(V),x.children){const F=x.children;for(let E=0;E<F.length;E++)i(F[E],V,_&&_.children[E])}_=_||V}return C?()=>{o(C)}:Fi}function o(f){if(Vg(f)){const m=s.get(f);m&&(s.delete(f),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(f);m>-1&&(n.splice(m,1),f.record.name&&s.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function l(){return n}function c(f){const m=OT(f,n);n.splice(m,0,f),f.record.name&&!gf(f)&&s.set(f.record.name,f)}function u(f,m){let _,k={},x,N;if("name"in f&&f.name){if(_=s.get(f.name),!_)throw Yr(it.MATCHER_NOT_FOUND,{location:f});N=_.record.name,k=Le(pf(m.params,_.keys.filter(C=>!C.optional).concat(_.parent?_.parent.keys.filter(C=>C.optional):[]).map(C=>C.name)),f.params&&pf(f.params,_.keys.map(C=>C.name))),x=_.stringify(k)}else if(f.path!=null)x=f.path,_=n.find(C=>C.re.test(x)),_&&(k=_.parse(x),N=_.record.name);else{if(_=m.name?s.get(m.name):n.find(C=>C.re.test(m.path)),!_)throw Yr(it.MATCHER_NOT_FOUND,{location:f,currentLocation:m});N=_.record.name,k=Le({},m.params,f.params),x=_.stringify(k)}const H=[];let V=_;for(;V;)H.unshift(V.record),V=V.parent;return{name:N,path:x,params:k,matched:H,meta:VT(H)}}t.forEach(f=>i(f));function d(){n.length=0,s.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:d,getRoutes:l,getRecordMatcher:r}}function pf(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function mf(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:NT(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function NT(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function gf(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function VT(t){return t.reduce((e,n)=>Le(e,n.meta),{})}function OT(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;Fg(t,e[i])<0?s=i:n=i+1}const r=MT(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function MT(t){let e=t;for(;e=e.parent;)if(Ug(e)&&Fg(t,e)===0)return e}function Ug({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function _f(t){const e=Rn(sl),n=Rn(Mg),s=Ze(()=>{const c=Vt(t.to);return e.resolve(c)}),r=Ze(()=>{const{matched:c}=s.value,{length:u}=c,d=c[u-1],f=n.matched;if(!d||!f.length)return-1;const m=f.findIndex(Qr.bind(null,d));if(m>-1)return m;const _=yf(c[u-2]);return u>1&&yf(d)===_&&f[f.length-1].path!==_?f.findIndex(Qr.bind(null,c[u-2])):m}),i=Ze(()=>r.value>-1&&BT(n.params,s.value.params)),o=Ze(()=>r.value>-1&&r.value===n.matched.length-1&&Ng(n.params,s.value.params));function l(c={}){if($T(c)){const u=e[Vt(t.replace)?"replace":"push"](Vt(t.to)).catch(Fi);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:Ze(()=>s.value.href),isActive:i,isExactActive:o,navigate:l}}function LT(t){return t.length===1?t[0]:t}const FT=Wm({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:_f,setup(t,{slots:e}){const n=Qa(_f(t)),{options:s}=Rn(sl),r=Ze(()=>({[vf(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[vf(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&LT(e.default(n));return t.custom?i:Pu("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),UT=FT;function $T(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function BT(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!mn(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function yf(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const vf=(t,e,n)=>t??e??n,jT=Wm({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=Rn(Lc),r=Ze(()=>t.route||s.value),i=Rn(uf,0),o=Ze(()=>{let u=Vt(i);const{matched:d}=r.value;let f;for(;(f=d[u])&&!f.components;)u++;return u}),l=Ze(()=>r.value.matched[o.value]);Yo(uf,Ze(()=>o.value+1)),Yo(gT,l),Yo(Lc,r);const c=_e();return ar(()=>[c.value,l.value,t.name],([u,d,f],[m,_,k])=>{d&&(d.instances[f]=u,_&&_!==d&&u&&u===m&&(d.leaveGuards.size||(d.leaveGuards=_.leaveGuards),d.updateGuards.size||(d.updateGuards=_.updateGuards))),u&&d&&(!_||!Qr(d,_)||!m)&&(d.enterCallbacks[f]||[]).forEach(x=>x(u))},{flush:"post"}),()=>{const u=r.value,d=t.name,f=l.value,m=f&&f.components[d];if(!m)return wf(n.default,{Component:m,route:u});const _=f.props[d],k=_?_===!0?u.params:typeof _=="function"?_(u):_:null,N=Pu(m,Le({},k,e,{onVnodeUnmounted:H=>{H.component.isUnmounted&&(f.instances[d]=null)},ref:c}));return wf(n.default,{Component:N,route:u})||N}}});function wf(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const HT=jT;function qT(t){const e=DT(t.routes,t),n=t.parseQuery||pT,s=t.stringifyQuery||cf,r=t.history,i=Ri(),o=Ri(),l=Ri(),c=$0(ds);let u=ds;Cr&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=tc.bind(null,$=>""+$),f=tc.bind(null,XE),m=tc.bind(null,Zi);function _($,Q){let re,ce;return Vg($)?(re=e.getRecordMatcher($),ce=Q):ce=$,e.addRoute(ce,re)}function k($){const Q=e.getRecordMatcher($);Q&&e.removeRoute(Q)}function x(){return e.getRoutes().map($=>$.record)}function N($){return!!e.getRecordMatcher($)}function H($,Q){if(Q=Le({},Q||c.value),typeof $=="string"){const P=nc(n,$,Q.path),B=e.resolve({path:P.path},Q),q=r.createHref(P.fullPath);return Le(P,B,{params:m(B.params),hash:Zi(P.hash),redirectedFrom:void 0,href:q})}let re;if($.path!=null)re=Le({},$,{path:nc(n,$.path,Q.path).path});else{const P=Le({},$.params);for(const B in P)P[B]==null&&delete P[B];re=Le({},$,{params:f(P)}),Q.params=f(Q.params)}const ce=e.resolve(re,Q),fe=$.hash||"";ce.params=d(m(ce.params));const I=eT(s,Le({},$,{hash:KE(fe),path:ce.path})),b=r.createHref(I);return Le({fullPath:I,hash:fe,query:s===cf?mT($.query):$.query||{}},ce,{redirectedFrom:void 0,href:b})}function V($){return typeof $=="string"?nc(n,$,c.value.path):Le({},$)}function C($,Q){if(u!==$)return Yr(it.NAVIGATION_CANCELLED,{from:Q,to:$})}function O($){return E($)}function U($){return O(Le(V($),{replace:!0}))}function F($,Q){const re=$.matched[$.matched.length-1];if(re&&re.redirect){const{redirect:ce}=re;let fe=typeof ce=="function"?ce($,Q):ce;return typeof fe=="string"&&(fe=fe.includes("?")||fe.includes("#")?fe=V(fe):{path:fe},fe.params={}),Le({query:$.query,hash:$.hash,params:fe.path!=null?{}:$.params},fe)}}function E($,Q){const re=u=H($),ce=c.value,fe=$.state,I=$.force,b=$.replace===!0,P=F(re,ce);if(P)return E(Le(V(P),{state:typeof P=="object"?Le({},fe,P.state):fe,force:I,replace:b}),Q||re);const B=re;B.redirectedFrom=Q;let q;return!I&&tT(s,ce,re)&&(q=Yr(it.NAVIGATION_DUPLICATED,{to:B,from:ce}),M(ce,ce,!0,!1)),(q?Promise.resolve(q):S(B,ce)).catch(j=>Un(j)?Un(j,it.NAVIGATION_GUARD_REDIRECT)?j:K(j):Se(j,B,ce)).then(j=>{if(j){if(Un(j,it.NAVIGATION_GUARD_REDIRECT))return E(Le({replace:b},V(j.to),{state:typeof j.to=="object"?Le({},fe,j.to.state):fe,force:I}),Q||B)}else j=A(B,ce,!0,b,fe);return R(B,ce,j),j})}function y($,Q){const re=C($,Q);return re?Promise.reject(re):Promise.resolve()}function v($){const Q=Ae.values().next().value;return Q&&typeof Q.runWithContext=="function"?Q.runWithContext($):$()}function S($,Q){let re;const[ce,fe,I]=_T($,Q);re=rc(ce.reverse(),"beforeRouteLeave",$,Q);for(const P of ce)P.leaveGuards.forEach(B=>{re.push(_s(B,$,Q))});const b=y.bind(null,$,Q);return re.push(b),Ye(re).then(()=>{re=[];for(const P of i.list())re.push(_s(P,$,Q));return re.push(b),Ye(re)}).then(()=>{re=rc(fe,"beforeRouteUpdate",$,Q);for(const P of fe)P.updateGuards.forEach(B=>{re.push(_s(B,$,Q))});return re.push(b),Ye(re)}).then(()=>{re=[];for(const P of I)if(P.beforeEnter)if(mn(P.beforeEnter))for(const B of P.beforeEnter)re.push(_s(B,$,Q));else re.push(_s(P.beforeEnter,$,Q));return re.push(b),Ye(re)}).then(()=>($.matched.forEach(P=>P.enterCallbacks={}),re=rc(I,"beforeRouteEnter",$,Q,v),re.push(b),Ye(re))).then(()=>{re=[];for(const P of o.list())re.push(_s(P,$,Q));return re.push(b),Ye(re)}).catch(P=>Un(P,it.NAVIGATION_CANCELLED)?P:Promise.reject(P))}function R($,Q,re){l.list().forEach(ce=>v(()=>ce($,Q,re)))}function A($,Q,re,ce,fe){const I=C($,Q);if(I)return I;const b=Q===ds,P=Cr?history.state:{};re&&(ce||b?r.replace($.fullPath,Le({scroll:b&&P&&P.scroll},fe)):r.push($.fullPath,fe)),c.value=$,M($,Q,re,b),K()}let T;function ke(){T||(T=r.listen(($,Q,re)=>{if(!ft.listening)return;const ce=H($),fe=F(ce,ft.currentRoute.value);if(fe){E(Le(fe,{replace:!0,force:!0}),ce).catch(Fi);return}u=ce;const I=c.value;Cr&&cT(lf(I.fullPath,re.delta),nl()),S(ce,I).catch(b=>Un(b,it.NAVIGATION_ABORTED|it.NAVIGATION_CANCELLED)?b:Un(b,it.NAVIGATION_GUARD_REDIRECT)?(E(Le(V(b.to),{force:!0}),ce).then(P=>{Un(P,it.NAVIGATION_ABORTED|it.NAVIGATION_DUPLICATED)&&!re.delta&&re.type===Oc.pop&&r.go(-1,!1)}).catch(Fi),Promise.reject()):(re.delta&&r.go(-re.delta,!1),Se(b,ce,I))).then(b=>{b=b||A(ce,I,!1),b&&(re.delta&&!Un(b,it.NAVIGATION_CANCELLED)?r.go(-re.delta,!1):re.type===Oc.pop&&Un(b,it.NAVIGATION_ABORTED|it.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),R(ce,I,b)}).catch(Fi)}))}let Xe=Ri(),ze=Ri(),Ne;function Se($,Q,re){K($);const ce=ze.list();return ce.length?ce.forEach(fe=>fe($,Q,re)):console.error($),Promise.reject($)}function de(){return Ne&&c.value!==ds?Promise.resolve():new Promise(($,Q)=>{Xe.add([$,Q])})}function K($){return Ne||(Ne=!$,ke(),Xe.list().forEach(([Q,re])=>$?re($):Q()),Xe.reset()),$}function M($,Q,re,ce){const{scrollBehavior:fe}=t;if(!Cr||!fe)return Promise.resolve();const I=!re&&uT(lf($.fullPath,0))||(ce||!re)&&history.state&&history.state.scroll||null;return bu().then(()=>fe($,Q,I)).then(b=>b&&lT(b)).catch(b=>Se(b,$,Q))}const ae=$=>r.go($);let Me;const Ae=new Set,ft={currentRoute:c,listening:!0,addRoute:_,removeRoute:k,clearRoutes:e.clearRoutes,hasRoute:N,getRoutes:x,resolve:H,options:t,push:O,replace:U,go:ae,back:()=>ae(-1),forward:()=>ae(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:ze.add,isReady:de,install($){$.component("RouterLink",UT),$.component("RouterView",HT),$.config.globalProperties.$router=ft,Object.defineProperty($.config.globalProperties,"$route",{enumerable:!0,get:()=>Vt(c)}),Cr&&!Me&&c.value===ds&&(Me=!0,O(r.location).catch(ce=>{}));const Q={};for(const ce in ds)Object.defineProperty(Q,ce,{get:()=>c.value[ce],enumerable:!0});$.provide(sl,ft),$.provide(Mg,Nm(Q)),$.provide(Lc,c);const re=$.unmount;Ae.add($),$.unmount=function(){Ae.delete($),Ae.size<1&&(u=ds,T&&T(),T=null,c.value=ds,Me=!1,Ne=!1),re()}}};function Ye($){return $.reduce((Q,re)=>Q.then(()=>v(re)),Promise.resolve())}return ft}function ku(){return Rn(sl)}const zT="/HTF/assets/Logo_yellow-C2dq30_U.png",GT=()=>{};var Ef={};const $g=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},WT=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],l=t[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Bg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,l=o?t[r+1]:0,c=r+2<t.length,u=c?t[r+2]:0,d=i>>2,f=(i&3)<<4|l>>4;let m=(l&15)<<2|u>>6,_=u&63;c||(_=64,o||(m=64)),s.push(n[d],n[f],n[m],n[_])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($g(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):WT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const f=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||l==null||u==null||f==null)throw new KT;const m=i<<2|l>>4;if(s.push(m),u!==64){const _=l<<4&240|u>>2;if(s.push(_),f!==64){const k=u<<6&192|f;s.push(k)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class KT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QT=function(t){const e=$g(t);return Bg.encodeByteArray(e,!0)},va=function(t){return QT(t).replace(/\./g,"")},jg=function(t){try{return Bg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function YT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const XT=()=>YT().__FIREBASE_DEFAULTS__,JT=()=>{if(typeof process>"u"||typeof Ef>"u")return;const t=Ef.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ZT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&jg(t[1]);return e&&JSON.parse(e)},rl=()=>{try{return GT()||XT()||JT()||ZT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Hg=t=>rl()?.emulatorHosts?.[t],qg=t=>{const e=Hg(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},zg=()=>rl()?.config,Gg=t=>rl()?.[`_${t}`];class eI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function gr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Du(t){return(await fetch(t,{credentials:"include"})).ok}function Wg(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[va(JSON.stringify(n)),va(JSON.stringify(o)),""].join(".")}const Ui={};function tI(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ui))Ui[e]?t.emulator.push(e):t.prod.push(e);return t}function nI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Tf=!1;function Nu(t,e){if(typeof window>"u"||typeof document>"u"||!gr(window.location.host)||Ui[t]===e||Ui[t]||Tf)return;Ui[t]=e;function n(m){return`__firebase__banner__${m}`}const s="__firebase__banner",i=tI().prod.length>0;function o(){const m=document.getElementById(s);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Tf=!0,o()},m}function d(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=nI(s),_=n("text"),k=document.getElementById(_)||document.createElement("span"),x=n("learnmore"),N=document.getElementById(x)||document.createElement("a"),H=n("preprendIcon"),V=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const C=m.element;l(C),d(N,x);const O=u();c(V,H),C.append(V,k,N,O),document.body.appendChild(C)}i?(k.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function Ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())}function rI(){const t=rl()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Kg(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function oI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aI(){const t=Ot();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lI(){return!rI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qg(){try{return typeof indexedDB=="object"}catch{return!1}}function Yg(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}function cI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const uI="FirebaseError";class on extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=uI,Object.setPrototypeOf(this,on.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_r.prototype.create)}}class _r{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?hI(i,s):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new on(r,l,s)}}function hI(t,e){return t.replace(dI,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const dI=/\{\$([^}]+)}/g;function fI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ks(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(If(i)&&If(o)){if(!ks(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function If(t){return t!==null&&typeof t=="object"}function ho(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function pI(t,e){const n=new mI(t,e);return n.subscribe.bind(n)}class mI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");gI(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=ic),r.error===void 0&&(r.error=ic),r.complete===void 0&&(r.complete=ic);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ic(){}const _I=1e3,yI=2,vI=4*60*60*1e3,wI=.5;function bf(t,e=_I,n=yI){const s=e*Math.pow(n,t),r=Math.round(wI*s*(Math.random()-.5)*2);return Math.min(vI,s+r)}function ct(t){return t&&t._delegate?t._delegate:t}class rn{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Zs="[DEFAULT]";class EI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new eI;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(II(e))try{this.getOrInitializeService({instanceIdentifier:Zs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Zs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zs){return this.instances.has(e)}getOptions(e=Zs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:TI(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Zs){return this.component?this.component.multipleInstances?e:Zs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TI(t){return t===Zs?void 0:t}function II(t){return t.instantiationMode==="EAGER"}class bI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new EI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const AI={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},RI=Ce.INFO,SI={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},CI=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=SI[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class il{constructor(e){this.name=e,this._logLevel=RI,this._logHandler=CI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const PI=(t,e)=>e.some(n=>t instanceof n);let Af,Rf;function xI(){return Af||(Af=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kI(){return Rf||(Rf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Xg=new WeakMap,Fc=new WeakMap,Jg=new WeakMap,oc=new WeakMap,Vu=new WeakMap;function DI(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Is(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Xg.set(n,t)}).catch(()=>{}),Vu.set(e,t),e}function NI(t){if(Fc.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Fc.set(t,e)}let Uc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Fc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Jg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Is(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function VI(t){Uc=t(Uc)}function OI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(ac(this),e,...n);return Jg.set(s,e.sort?e.sort():[e]),Is(s)}:kI().includes(t)?function(...e){return t.apply(ac(this),e),Is(Xg.get(this))}:function(...e){return Is(t.apply(ac(this),e))}}function MI(t){return typeof t=="function"?OI(t):(t instanceof IDBTransaction&&NI(t),PI(t,xI())?new Proxy(t,Uc):t)}function Is(t){if(t instanceof IDBRequest)return DI(t);if(oc.has(t))return oc.get(t);const e=MI(t);return e!==t&&(oc.set(t,e),Vu.set(e,t)),e}const ac=t=>Vu.get(t);function Zg(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),l=Is(o);return s&&o.addEventListener("upgradeneeded",c=>{s(Is(o.result),c.oldVersion,c.newVersion,Is(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const LI=["get","getKey","getAll","getAllKeys","count"],FI=["put","add","delete","clear"],lc=new Map;function Sf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(lc.get(e))return lc.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=FI.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||LI.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,r?"readwrite":"readonly");let u=c.store;return s&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),r&&c.done]))[0]};return lc.set(e,i),i}VI(t=>({...t,get:(e,n,s)=>Sf(e,n)||t.get(e,n,s),has:(e,n)=>!!Sf(e,n)||t.has(e,n)}));class UI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($I(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function $I(t){return t.getComponent()?.type==="VERSION"}const $c="@firebase/app",Cf="0.14.6";const Jn=new il("@firebase/app"),BI="@firebase/app-compat",jI="@firebase/analytics-compat",HI="@firebase/analytics",qI="@firebase/app-check-compat",zI="@firebase/app-check",GI="@firebase/auth",WI="@firebase/auth-compat",KI="@firebase/database",QI="@firebase/data-connect",YI="@firebase/database-compat",XI="@firebase/functions",JI="@firebase/functions-compat",ZI="@firebase/installations",eb="@firebase/installations-compat",tb="@firebase/messaging",nb="@firebase/messaging-compat",sb="@firebase/performance",rb="@firebase/performance-compat",ib="@firebase/remote-config",ob="@firebase/remote-config-compat",ab="@firebase/storage",lb="@firebase/storage-compat",cb="@firebase/firestore",ub="@firebase/ai",hb="@firebase/firestore-compat",db="firebase",fb="12.6.0";const Bc="[DEFAULT]",pb={[$c]:"fire-core",[BI]:"fire-core-compat",[HI]:"fire-analytics",[jI]:"fire-analytics-compat",[zI]:"fire-app-check",[qI]:"fire-app-check-compat",[GI]:"fire-auth",[WI]:"fire-auth-compat",[KI]:"fire-rtdb",[QI]:"fire-data-connect",[YI]:"fire-rtdb-compat",[XI]:"fire-fn",[JI]:"fire-fn-compat",[ZI]:"fire-iid",[eb]:"fire-iid-compat",[tb]:"fire-fcm",[nb]:"fire-fcm-compat",[sb]:"fire-perf",[rb]:"fire-perf-compat",[ib]:"fire-rc",[ob]:"fire-rc-compat",[ab]:"fire-gcs",[lb]:"fire-gcs-compat",[cb]:"fire-fst",[hb]:"fire-fst-compat",[ub]:"fire-vertex","fire-js":"fire-js",[db]:"fire-js-all"};const wa=new Map,mb=new Map,jc=new Map;function Pf(t,e){try{t.container.addComponent(e)}catch(n){Jn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function gn(t){const e=t.name;if(jc.has(e))return Jn.debug(`There were multiple attempts to register component ${e}.`),!1;jc.set(e,t);for(const n of wa.values())Pf(n,t);for(const n of mb.values())Pf(n,t);return!0}function Us(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function en(t){return t==null?!1:t.settings!==void 0}const gb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bs=new _r("app","Firebase",gb);class _b{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new rn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bs.create("app-deleted",{appName:this._name})}}const yr=fb;function e_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:Bc,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw bs.create("bad-app-name",{appName:String(r)});if(n||(n=zg()),!n)throw bs.create("no-options");const i=wa.get(r);if(i){if(ks(n,i.options)&&ks(s,i.config))return i;throw bs.create("duplicate-app",{appName:r})}const o=new bI(r);for(const c of jc.values())o.addComponent(c);const l=new _b(n,s,o);return wa.set(r,l),l}function ol(t=Bc){const e=wa.get(t);if(!e&&t===Bc&&zg())return e_();if(!e)throw bs.create("no-app",{appName:t});return e}function zt(t,e,n){let s=pb[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jn.warn(o.join(" "));return}gn(new rn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const yb="firebase-heartbeat-database",vb=1,eo="firebase-heartbeat-store";let cc=null;function t_(){return cc||(cc=Zg(yb,vb,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(eo)}catch(n){console.warn(n)}}}}).catch(t=>{throw bs.create("idb-open",{originalErrorMessage:t.message})})),cc}async function wb(t){try{const n=(await t_()).transaction(eo),s=await n.objectStore(eo).get(n_(t));return await n.done,s}catch(e){if(e instanceof on)Jn.warn(e.message);else{const n=bs.create("idb-get",{originalErrorMessage:e?.message});Jn.warn(n.message)}}}async function xf(t,e){try{const s=(await t_()).transaction(eo,"readwrite");await s.objectStore(eo).put(e,n_(t)),await s.done}catch(n){if(n instanceof on)Jn.warn(n.message);else{const s=bs.create("idb-set",{originalErrorMessage:n?.message});Jn.warn(s.message)}}}function n_(t){return`${t.name}!${t.options.appId}`}const Eb=1024,Tb=30;class Ib{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ab(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=kf();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>Tb){const r=Rb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Jn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=kf(),{heartbeatsToSend:n,unsentEntries:s}=bb(this._heartbeatsCache.heartbeats),r=va(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Jn.warn(e),""}}}function kf(){return new Date().toISOString().substring(0,10)}function bb(t,e=Eb){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),Df(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Df(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Ab{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Qg()?Yg().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wb(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return xf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return xf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Df(t){return va(JSON.stringify({version:2,heartbeats:t})).length}function Rb(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}function Sb(t){gn(new rn("platform-logger",e=>new UI(e),"PRIVATE")),gn(new rn("heartbeat",e=>new Ib(e),"PRIVATE")),zt($c,Cf,t),zt($c,Cf,"esm2020"),zt("fire-js","")}Sb("");var Cb="firebase",Pb="12.6.0";zt(Cb,Pb,"app");const s_="@firebase/installations",Ou="0.6.19";const r_=1e4,i_=`w:${Ou}`,o_="FIS_v2",xb="https://firebaseinstallations.googleapis.com/v1",kb=60*60*1e3,Db="installations",Nb="Installations";const Vb={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},cr=new _r(Db,Nb,Vb);function a_(t){return t instanceof on&&t.code.includes("request-failed")}function l_({projectId:t}){return`${xb}/projects/${t}/installations`}function c_(t){return{token:t.token,requestStatus:2,expiresIn:Mb(t.expiresIn),creationTime:Date.now()}}async function u_(t,e){const s=(await e.json()).error;return cr.create("request-failed",{requestName:t,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function h_({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Ob(t,{refreshToken:e}){const n=h_(t);return n.append("Authorization",Lb(e)),n}async function d_(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Mb(t){return Number(t.replace("s","000"))}function Lb(t){return`${o_} ${t}`}async function Fb({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const s=l_(t),r=h_(t),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={fid:n,authVersion:o_,appId:t.appId,sdkVersion:i_},l={method:"POST",headers:r,body:JSON.stringify(o)},c=await d_(()=>fetch(s,l));if(c.ok){const u=await c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:c_(u.authToken)}}else throw await u_("Create Installation",c)}function f_(t){return new Promise(e=>{setTimeout(e,t)})}function Ub(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}const $b=/^[cdef][\w-]{21}$/,Hc="";function Bb(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=jb(t);return $b.test(n)?n:Hc}catch{return Hc}}function jb(t){return Ub(t).substr(0,22)}function al(t){return`${t.appName}!${t.appId}`}const p_=new Map;function m_(t,e){const n=al(t);g_(n,e),Hb(n,e)}function g_(t,e){const n=p_.get(t);if(n)for(const s of n)s(e)}function Hb(t,e){const n=qb();n&&n.postMessage({key:t,fid:e}),zb()}let nr=null;function qb(){return!nr&&"BroadcastChannel"in self&&(nr=new BroadcastChannel("[Firebase] FID Change"),nr.onmessage=t=>{g_(t.data.key,t.data.fid)}),nr}function zb(){p_.size===0&&nr&&(nr.close(),nr=null)}const Gb="firebase-installations-database",Wb=1,ur="firebase-installations-store";let uc=null;function Mu(){return uc||(uc=Zg(Gb,Wb,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ur)}}})),uc}async function Ea(t,e){const n=al(t),r=(await Mu()).transaction(ur,"readwrite"),i=r.objectStore(ur),o=await i.get(n);return await i.put(e,n),await r.done,(!o||o.fid!==e.fid)&&m_(t,e.fid),e}async function __(t){const e=al(t),s=(await Mu()).transaction(ur,"readwrite");await s.objectStore(ur).delete(e),await s.done}async function ll(t,e){const n=al(t),r=(await Mu()).transaction(ur,"readwrite"),i=r.objectStore(ur),o=await i.get(n),l=e(o);return l===void 0?await i.delete(n):await i.put(l,n),await r.done,l&&(!o||o.fid!==l.fid)&&m_(t,l.fid),l}async function Lu(t){let e;const n=await ll(t.appConfig,s=>{const r=Kb(s),i=Qb(t,r);return e=i.registrationPromise,i.installationEntry});return n.fid===Hc?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function Kb(t){const e=t||{fid:Bb(),registrationStatus:0};return y_(e)}function Qb(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(cr.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=Yb(t,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Xb(t)}:{installationEntry:e}}async function Yb(t,e){try{const n=await Fb(t,e);return Ea(t.appConfig,n)}catch(n){throw a_(n)&&n.customData.serverCode===409?await __(t.appConfig):await Ea(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function Xb(t){let e=await Nf(t.appConfig);for(;e.registrationStatus===1;)await f_(100),e=await Nf(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await Lu(t);return s||n}return e}function Nf(t){return ll(t,e=>{if(!e)throw cr.create("installation-not-found");return y_(e)})}function y_(t){return Jb(t)?{fid:t.fid,registrationStatus:0}:t}function Jb(t){return t.registrationStatus===1&&t.registrationTime+r_<Date.now()}async function Zb({appConfig:t,heartbeatServiceProvider:e},n){const s=eA(t,n),r=Ob(t,n),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={installation:{sdkVersion:i_,appId:t.appId}},l={method:"POST",headers:r,body:JSON.stringify(o)},c=await d_(()=>fetch(s,l));if(c.ok){const u=await c.json();return c_(u)}else throw await u_("Generate Auth Token",c)}function eA(t,{fid:e}){return`${l_(t)}/${e}/authTokens:generate`}async function Fu(t,e=!1){let n;const s=await ll(t.appConfig,i=>{if(!v_(i))throw cr.create("not-registered");const o=i.authToken;if(!e&&sA(o))return i;if(o.requestStatus===1)return n=tA(t,e),i;{if(!navigator.onLine)throw cr.create("app-offline");const l=iA(i);return n=nA(t,l),l}});return n?await n:s.authToken}async function tA(t,e){let n=await Vf(t.appConfig);for(;n.authToken.requestStatus===1;)await f_(100),n=await Vf(t.appConfig);const s=n.authToken;return s.requestStatus===0?Fu(t,e):s}function Vf(t){return ll(t,e=>{if(!v_(e))throw cr.create("not-registered");const n=e.authToken;return oA(n)?{...e,authToken:{requestStatus:0}}:e})}async function nA(t,e){try{const n=await Zb(t,e),s={...e,authToken:n};return await Ea(t.appConfig,s),n}catch(n){if(a_(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await __(t.appConfig);else{const s={...e,authToken:{requestStatus:0}};await Ea(t.appConfig,s)}throw n}}function v_(t){return t!==void 0&&t.registrationStatus===2}function sA(t){return t.requestStatus===2&&!rA(t)}function rA(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+kb}function iA(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function oA(t){return t.requestStatus===1&&t.requestTime+r_<Date.now()}async function aA(t){const e=t,{installationEntry:n,registrationPromise:s}=await Lu(e);return s?s.catch(console.error):Fu(e).catch(console.error),n.fid}async function lA(t,e=!1){const n=t;return await cA(n),(await Fu(n,e)).token}async function cA(t){const{registrationPromise:e}=await Lu(t);e&&await e}function uA(t){if(!t||!t.options)throw hc("App Configuration");if(!t.name)throw hc("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw hc(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function hc(t){return cr.create("missing-app-config-values",{valueName:t})}const w_="installations",hA="installations-internal",dA=t=>{const e=t.getProvider("app").getImmediate(),n=uA(e),s=Us(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},fA=t=>{const e=t.getProvider("app").getImmediate(),n=Us(e,w_).getImmediate();return{getId:()=>aA(n),getToken:r=>lA(n,r)}};function pA(){gn(new rn(w_,dA,"PUBLIC")),gn(new rn(hA,fA,"PRIVATE"))}pA();zt(s_,Ou);zt(s_,Ou,"esm2020");const Ta="analytics",mA="firebase_id",gA="origin",_A=60*1e3,yA="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Uu="https://www.googletagmanager.com/gtag/js";const $t=new il("@firebase/analytics");const vA={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Jt=new _r("analytics","Analytics",vA);function wA(t){if(!t.startsWith(Uu)){const e=Jt.create("invalid-gtag-resource",{gtagURL:t});return $t.warn(e.message),""}return t}function E_(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function EA(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function TA(t,e){const n=EA("firebase-js-sdk-policy",{createScriptURL:wA}),s=document.createElement("script"),r=`${Uu}?l=${t}&id=${e}`;s.src=n?n?.createScriptURL(r):r,s.async=!0,document.head.appendChild(s)}function IA(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function bA(t,e,n,s,r,i){const o=s[r];try{if(o)await e[o];else{const c=(await E_(n)).find(u=>u.measurementId===r);c&&await e[c.appId]}}catch(l){$t.error(l)}t("config",r,i)}async function AA(t,e,n,s,r){try{let i=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const l=await E_(n);for(const c of o){const u=l.find(f=>f.measurementId===c),d=u&&e[u.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",s,r||{})}catch(i){$t.error(i)}}function RA(t,e,n,s){async function r(i,...o){try{if(i==="event"){const[l,c]=o;await AA(t,e,n,l,c)}else if(i==="config"){const[l,c]=o;await bA(t,e,n,s,l,c)}else if(i==="consent"){const[l,c]=o;t("consent",l,c)}else if(i==="get"){const[l,c,u]=o;t("get",l,c,u)}else if(i==="set"){const[l]=o;t("set",l)}else t(i,...o)}catch(l){$t.error(l)}}return r}function SA(t,e,n,s,r){let i=function(...o){window[s].push(arguments)};return window[r]&&typeof window[r]=="function"&&(i=window[r]),window[r]=RA(i,t,e,n),{gtagCore:i,wrappedGtag:window[r]}}function CA(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Uu)&&n.src.includes(t))return n;return null}const PA=30,xA=1e3;class kA{constructor(e={},n=xA){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const T_=new kA;function DA(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function NA(t){const{appId:e,apiKey:n}=t,s={method:"GET",headers:DA(n)},r=yA.replace("{app-id}",e),i=await fetch(r,s);if(i.status!==200&&i.status!==304){let o="";try{const l=await i.json();l.error?.message&&(o=l.error.message)}catch{}throw Jt.create("config-fetch-failed",{httpStatus:i.status,responseMessage:o})}return i.json()}async function VA(t,e=T_,n){const{appId:s,apiKey:r,measurementId:i}=t.options;if(!s)throw Jt.create("no-app-id");if(!r){if(i)return{measurementId:i,appId:s};throw Jt.create("no-api-key")}const o=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new LA;return setTimeout(async()=>{l.abort()},_A),I_({appId:s,apiKey:r,measurementId:i},o,l,e)}async function I_(t,{throttleEndTimeMillis:e,backoffCount:n},s,r=T_){const{appId:i,measurementId:o}=t;try{await OA(s,e)}catch(l){if(o)return $t.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:i,measurementId:o};throw l}try{const l=await NA(t);return r.deleteThrottleMetadata(i),l}catch(l){const c=l;if(!MA(c)){if(r.deleteThrottleMetadata(i),o)return $t.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:i,measurementId:o};throw l}const u=Number(c?.customData?.httpStatus)===503?bf(n,r.intervalMillis,PA):bf(n,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return r.setThrottleMetadata(i,d),$t.debug(`Calling attemptFetch again in ${u} millis`),I_(t,d,s,r)}}function OA(t,e){return new Promise((n,s)=>{const r=Math.max(e-Date.now(),0),i=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(i),s(Jt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function MA(t){if(!(t instanceof on)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class LA{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function FA(t,e,n,s,r){if(r&&r.global){t("event",n,s);return}else{const i=await e,o={...s,send_to:i};t("event",n,o)}}async function UA(t,e,n,s){if(s&&s.global){const r={};for(const i of Object.keys(n))r[`user_properties.${i}`]=n[i];return t("set",r),Promise.resolve()}else{const r=await e;t("config",r,{update:!0,user_properties:n})}}async function $A(){if(Qg())try{await Yg()}catch(t){return $t.warn(Jt.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return $t.warn(Jt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function BA(t,e,n,s,r,i,o){const l=VA(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&$t.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>$t.error(m)),e.push(l);const c=$A().then(m=>{if(m)return s.getId()}),[u,d]=await Promise.all([l,c]);CA(i)||TA(i,u.measurementId),r("js",new Date);const f=o?.config??{};return f[gA]="firebase",f.update=!0,d!=null&&(f[mA]=d),r("config",u.measurementId,f),u.measurementId}class jA{constructor(e){this.app=e}_delete(){return delete $r[this.app.options.appId],Promise.resolve()}}let $r={},Of=[];const Mf={};let dc="dataLayer",HA="gtag",Lf,$u,Ff=!1;function qA(){const t=[];if(Kg()&&t.push("This is a browser extension environment."),cI()||t.push("Cookies are not available."),t.length>0){const e=t.map((s,r)=>`(${r+1}) ${s}`).join(" "),n=Jt.create("invalid-analytics-context",{errorInfo:e});$t.warn(n.message)}}function zA(t,e,n){qA();const s=t.options.appId;if(!s)throw Jt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)$t.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Jt.create("no-api-key");if($r[s]!=null)throw Jt.create("already-exists",{id:s});if(!Ff){IA(dc);const{wrappedGtag:i,gtagCore:o}=SA($r,Of,Mf,dc,HA);$u=i,Lf=o,Ff=!0}return $r[s]=BA(t,Of,Mf,e,Lf,dc,n),new jA(t)}function GA(t=ol()){t=ct(t);const e=Us(t,Ta);return e.isInitialized()?e.getImmediate():WA(t)}function WA(t,e={}){const n=Us(t,Ta);if(n.isInitialized()){const r=n.getImmediate();if(ks(e,n.getOptions()))return r;throw Jt.create("already-initialized")}return n.initialize({options:e})}function KA(t,e,n){t=ct(t),UA($u,$r[t.app.options.appId],e,n).catch(s=>$t.error(s))}function QA(t,e,n,s){t=ct(t),FA($u,$r[t.app.options.appId],e,n,s).catch(r=>$t.error(r))}const Uf="@firebase/analytics",$f="0.10.19";function YA(){gn(new rn(Ta,(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return zA(s,r,n)},"PUBLIC")),gn(new rn("analytics-internal",t,"PRIVATE")),zt(Uf,$f),zt(Uf,$f,"esm2020");function t(e){try{const n=e.getProvider(Ta).getImmediate();return{logEvent:(s,r,i)=>QA(n,s,r,i),setUserProperties:(s,r)=>KA(n,s,r)}}catch(n){throw Jt.create("interop-component-reg-failed",{reason:n})}}}YA();function b_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XA=b_,A_=new _r("auth","Firebase",b_());const Ia=new il("@firebase/auth");function JA(t,...e){Ia.logLevel<=Ce.WARN&&Ia.warn(`Auth (${yr}): ${t}`,...e)}function ea(t,...e){Ia.logLevel<=Ce.ERROR&&Ia.error(`Auth (${yr}): ${t}`,...e)}function Dn(t,...e){throw ju(t,...e)}function hn(t,...e){return ju(t,...e)}function Bu(t,e,n){const s={...XA(),[e]:n};return new _r("auth","Firebase",s).create(e,{appName:t.name})}function lr(t){return Bu(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ZA(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Dn(t,"argument-error"),Bu(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ju(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return A_.create(t,...e)}function ye(t,e,...n){if(!t)throw ju(e,...n)}function Wn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ea(e),new Error(e)}function Zn(t,e){t||Wn(e)}function qc(){return typeof self<"u"&&self.location?.href||""}function e1(){return Bf()==="http:"||Bf()==="https:"}function Bf(){return typeof self<"u"&&self.location?.protocol||null}function t1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(e1()||Kg()||"connection"in navigator)?navigator.onLine:!0}function n1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class fo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zn(n>e,"Short delay should be less than long delay!"),this.isMobile=sI()||oI()}get(){return t1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Hu(t,e){Zn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class R_{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const s1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const r1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],i1=new fo(3e4,6e4);function qu(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ri(t,e,n,s,r={}){return S_(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const l=ho({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return iI()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&gr(t.emulatorConfig.host)&&(u.credentials="include"),R_.fetch()(await C_(t,t.config.apiHost,n,l),u)})}async function S_(t,e,n){t._canInitEmulator=!1;const s={...s1,...e};try{const r=new a1(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Bo(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bo(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Bo(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Bo(t,"user-disabled",o);const d=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Bu(t,d,u);Dn(t,d)}}catch(r){if(r instanceof on)throw r;Dn(t,"network-request-failed",{message:String(r)})}}async function o1(t,e,n,s,r={}){const i=await ri(t,e,n,s,r);return"mfaPendingCredential"in i&&Dn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function C_(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?Hu(t.config,r):`${t.config.apiScheme}://${r}`;return r1.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class a1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(hn(this.auth,"network-request-failed")),i1.get())})}}function Bo(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=hn(t,e,s);return r.customData._tokenResponse=n,r}async function l1(t,e){return ri(t,"POST","/v1/accounts:delete",e)}async function ba(t,e){return ri(t,"POST","/v1/accounts:lookup",e)}function $i(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function c1(t,e=!1){const n=ct(t),s=await n.getIdToken(e),r=zu(s);ye(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:$i(fc(r.auth_time)),issuedAtTime:$i(fc(r.iat)),expirationTime:$i(fc(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function fc(t){return Number(t)*1e3}function zu(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return ea("JWT malformed, contained fewer than 3 sections"),null;try{const r=jg(n);return r?JSON.parse(r):(ea("Failed to decode base64 JWT payload"),null)}catch(r){return ea("Caught error parsing JWT payload as JSON",r?.toString()),null}}function jf(t){const e=zu(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function to(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof on&&u1(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function u1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class h1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class zc{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$i(this.lastLoginAt),this.creationTime=$i(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Aa(t){const e=t.auth,n=await t.getIdToken(),s=await to(t,ba(e,{idToken:n}));ye(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?P_(r.providerUserInfo):[],o=f1(t.providerData,i),l=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!o?.length,u=l?c:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new zc(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function d1(t){const e=ct(t);await Aa(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function f1(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function P_(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function p1(t,e){const n=await S_(t,{},async()=>{const s=ho({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await C_(t,r,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:s};return t.emulatorConfig&&gr(t.emulatorConfig.host)&&(c.credentials="include"),R_.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function m1(t,e){return ri(t,"POST","/v2/accounts:revokeToken",qu(t,e))}class Br{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jf(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=jf(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await p1(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new Br;return s&&(ye(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(ye(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(ye(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Br,this.toJSON())}_performRefresh(){return Wn("not implemented")}}function fs(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class an{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new h1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new zc(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await to(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return c1(this,e)}reload(){return d1(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new an({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Aa(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(en(this.auth.app))return Promise.reject(lr(this.auth));const e=await this.getIdToken();return await to(this,l1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:_,providerData:k,stsTokenManager:x}=n;ye(f&&x,e,"internal-error");const N=Br.fromJSON(this.name,x);ye(typeof f=="string",e,"internal-error"),fs(s,e.name),fs(r,e.name),ye(typeof m=="boolean",e,"internal-error"),ye(typeof _=="boolean",e,"internal-error"),fs(i,e.name),fs(o,e.name),fs(l,e.name),fs(c,e.name),fs(u,e.name),fs(d,e.name);const H=new an({uid:f,auth:e,email:r,emailVerified:m,displayName:s,isAnonymous:_,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:N,createdAt:u,lastLoginAt:d});return k&&Array.isArray(k)&&(H.providerData=k.map(V=>({...V}))),c&&(H._redirectEventId=c),H}static async _fromIdTokenResponse(e,n,s=!1){const r=new Br;r.updateFromServerResponse(n);const i=new an({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await Aa(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];ye(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?P_(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,l=new Br;l.updateFromIdToken(s);const c=new an({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new zc(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(c,u),c}}const Hf=new Map;function Kn(t){Zn(t instanceof Function,"Expected a class definition");let e=Hf.get(t);return e?(Zn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Hf.set(t,e),e)}class x_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}x_.type="NONE";const qf=x_;function ta(t,e,n){return`firebase:${t}:${e}:${n}`}class jr{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=ta(this.userKey,r.apiKey,i),this.fullPersistenceKey=ta("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ba(this.auth,{idToken:e}).catch(()=>{});return n?an._fromGetAccountInfoResponse(this.auth,n,e):null}return an._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new jr(Kn(qf),e,s);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||Kn(qf);const o=ta(s,e.config.apiKey,e.name);let l=null;for(const u of n)try{const d=await u._get(o);if(d){let f;if(typeof d=="string"){const m=await ba(e,{idToken:d}).catch(()=>{});if(!m)break;f=await an._fromGetAccountInfoResponse(e,m,d)}else f=an._fromJSON(e,d);u!==i&&(l=f),i=u;break}}catch{}const c=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new jr(i,e,s):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new jr(i,e,s))}}function zf(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(V_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(k_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(M_(e))return"Blackberry";if(L_(e))return"Webos";if(D_(e))return"Safari";if((e.includes("chrome/")||N_(e))&&!e.includes("edge/"))return"Chrome";if(O_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function k_(t=Ot()){return/firefox\//i.test(t)}function D_(t=Ot()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function N_(t=Ot()){return/crios\//i.test(t)}function V_(t=Ot()){return/iemobile/i.test(t)}function O_(t=Ot()){return/android/i.test(t)}function M_(t=Ot()){return/blackberry/i.test(t)}function L_(t=Ot()){return/webos/i.test(t)}function Gu(t=Ot()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function g1(t=Ot()){return Gu(t)&&!!window.navigator?.standalone}function _1(){return aI()&&document.documentMode===10}function F_(t=Ot()){return Gu(t)||O_(t)||L_(t)||M_(t)||/windows phone/i.test(t)||V_(t)}function U_(t,e=[]){let n;switch(t){case"Browser":n=zf(Ot());break;case"Worker":n=`${zf(Ot())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${yr}/${s}`}class y1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function v1(t,e={}){return ri(t,"GET","/v2/passwordPolicy",qu(t,e))}const w1=6;class E1{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??w1,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class T1{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gf(this),this.idTokenSubscription=new Gf(this),this.beforeStateQueue=new y1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=A_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Kn(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await jr.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ba(this,{idToken:e}),s=await an._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(en(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&l?.user&&(s=l.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Aa(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=n1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(en(this.app))return Promise.reject(lr(this));const n=e?ct(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return en(this.app)?Promise.reject(lr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return en(this.app)?Promise.reject(lr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await v1(this),n=new E1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _r("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await m1(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Kn(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await jr.create(this,[Kn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,r);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=U_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(en(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&JA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function cl(t){return ct(t)}class Gf{constructor(e){this.auth=e,this.observer=null,this.addObserver=pI(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Wu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function I1(t){Wu=t}function b1(t){return Wu.loadJS(t)}function A1(){return Wu.gapiScript}function R1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function S1(t,e){const n=Us(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(ks(i,e??{}))return r;Dn(r,"already-initialized")}return n.initialize({options:e})}function C1(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Kn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function P1(t,e,n){const s=cl(t);ye(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=$_(e),{host:o,port:l}=x1(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){ye(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ye(ks(u,s.config.emulator)&&ks(d,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=d,s.settings.appVerificationDisabledForTesting=!0,gr(o)?(Du(`${i}//${o}${c}`),Nu("Auth",!0)):k1()}function $_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function x1(t){const e=$_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:Wf(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:Wf(o)}}}function Wf(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function k1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class B_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wn("not implemented")}_getIdTokenResponse(e){return Wn("not implemented")}_linkToIdToken(e,n){return Wn("not implemented")}_getReauthenticationResolver(e){return Wn("not implemented")}}async function Hr(t,e){return o1(t,"POST","/v1/accounts:signInWithIdp",qu(t,e))}const D1="http://localhost";class hr extends B_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new hr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Dn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new hr(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Hr(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Hr(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Hr(e,n)}buildRequest(){const e={requestUri:D1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ho(n)}return e}}class Ku{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class po extends Ku{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ys extends po{constructor(){super("facebook.com")}static credential(e){return hr._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ys.credential(e.oauthAccessToken)}catch{return null}}}ys.FACEBOOK_SIGN_IN_METHOD="facebook.com";ys.PROVIDER_ID="facebook.com";class Gn extends po{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return hr._fromParams({providerId:Gn.PROVIDER_ID,signInMethod:Gn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Gn.credentialFromTaggedObject(e)}static credentialFromError(e){return Gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Gn.credential(n,s)}catch{return null}}}Gn.GOOGLE_SIGN_IN_METHOD="google.com";Gn.PROVIDER_ID="google.com";class vs extends po{constructor(){super("github.com")}static credential(e){return hr._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vs.credential(e.oauthAccessToken)}catch{return null}}}vs.GITHUB_SIGN_IN_METHOD="github.com";vs.PROVIDER_ID="github.com";class ws extends po{constructor(){super("twitter.com")}static credential(e,n){return hr._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ws.credential(n,s)}catch{return null}}}ws.TWITTER_SIGN_IN_METHOD="twitter.com";ws.PROVIDER_ID="twitter.com";class Xr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await an._fromIdTokenResponse(e,s,r),o=Kf(s);return new Xr({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=Kf(s);return new Xr({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function Kf(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Ra extends on{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,Ra.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new Ra(e,n,s,r)}}function j_(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ra._fromErrorAndOperation(t,i,e,s):i})}async function N1(t,e,n=!1){const s=await to(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Xr._forOperation(t,"link",s)}async function V1(t,e,n=!1){const{auth:s}=t;if(en(s.app))return Promise.reject(lr(s));const r="reauthenticate";try{const i=await to(t,j_(s,r,e,t),n);ye(i.idToken,s,"internal-error");const o=zu(i.idToken);ye(o,s,"internal-error");const{sub:l}=o;return ye(t.uid===l,s,"user-mismatch"),Xr._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&Dn(s,"user-mismatch"),i}}async function O1(t,e,n=!1){if(en(t.app))return Promise.reject(lr(t));const s="signIn",r=await j_(t,s,e),i=await Xr._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}function M1(t,e,n,s){return ct(t).onIdTokenChanged(e,n,s)}function L1(t,e,n){return ct(t).beforeAuthStateChanged(e,n)}function Qu(t,e,n,s){return ct(t).onAuthStateChanged(e,n,s)}function F1(t){return ct(t).signOut()}const Sa="__sak";class H_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sa,"1"),this.storage.removeItem(Sa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const U1=1e3,$1=10;class q_ extends H_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=F_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);_1()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,$1):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},U1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}q_.type="LOCAL";const B1=q_;class z_ extends H_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}z_.type="SESSION";const G_=z_;function j1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class ul{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new ul(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await j1(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ul.receivers=[];function Yu(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}class H1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=Yu("",20);r.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(d),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Sn(){return window}function q1(t){Sn().location.href=t}function W_(){return typeof Sn().WorkerGlobalScope<"u"&&typeof Sn().importScripts=="function"}async function z1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function G1(){return navigator?.serviceWorker?.controller||null}function W1(){return W_()?self:null}const K_="firebaseLocalStorageDb",K1=1,Ca="firebaseLocalStorage",Q_="fbase_key";class mo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hl(t,e){return t.transaction([Ca],e?"readwrite":"readonly").objectStore(Ca)}function Q1(){const t=indexedDB.deleteDatabase(K_);return new mo(t).toPromise()}function Gc(){const t=indexedDB.open(K_,K1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Ca,{keyPath:Q_})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Ca)?e(s):(s.close(),await Q1(),e(await Gc()))})})}async function Qf(t,e,n){const s=hl(t,!0).put({[Q_]:e,value:n});return new mo(s).toPromise()}async function Y1(t,e){const n=hl(t,!1).get(e),s=await new mo(n).toPromise();return s===void 0?null:s.value}function Yf(t,e){const n=hl(t,!0).delete(e);return new mo(n).toPromise()}const X1=800,J1=3;class Y_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gc(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>J1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return W_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ul._getInstance(W1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await z1(),!this.activeServiceWorker)return;this.sender=new H1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||G1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gc();return await Qf(e,Sa,"1"),await Yf(e,Sa),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Qf(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>Y1(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Yf(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=hl(r,!1).getAll();return new mo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),X1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Y_.type="LOCAL";const Z1=Y_;new fo(3e4,6e4);function X_(t,e){return e?Kn(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Xu extends B_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Hr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Hr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Hr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function eR(t){return O1(t.auth,new Xu(t),t.bypassAuthState)}function tR(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),V1(n,new Xu(t),t.bypassAuthState)}async function nR(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),N1(n,new Xu(t),t.bypassAuthState)}class J_{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eR;case"linkViaPopup":case"linkViaRedirect":return nR;case"reauthViaPopup":case"reauthViaRedirect":return tR;default:Dn(this.auth,"internal-error")}}resolve(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const sR=new fo(2e3,1e4);async function rR(t,e,n){if(en(t.app))return Promise.reject(hn(t,"operation-not-supported-in-this-environment"));const s=cl(t);ZA(t,e,Ku);const r=X_(s,n);return new sr(s,"signInViaPopup",e,r).executeNotNull()}class sr extends J_{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,sr.currentPopupAction&&sr.currentPopupAction.cancel(),sr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){Zn(this.filter.length===1,"Popup operations only handle one event");const e=Yu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sr.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,sR.get())};e()}}sr.currentPopupAction=null;const iR="pendingRedirect",na=new Map;class oR extends J_{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=na.get(this.auth._key());if(!e){try{const s=await aR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}na.set(this.auth._key(),e)}return this.bypassAuthState||na.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aR(t,e){const n=uR(e),s=cR(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function lR(t,e){na.set(t._key(),e)}function cR(t){return Kn(t._redirectPersistence)}function uR(t){return ta(iR,t.config.apiKey,t.name)}async function hR(t,e,n=!1){if(en(t.app))return Promise.reject(lr(t));const s=cl(t),r=X_(s,e),o=await new oR(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}const dR=10*60*1e3;class fR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Z_(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(hn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xf(e))}saveEventToCache(e){this.cachedEventUids.add(Xf(e)),this.lastProcessedEventTime=Date.now()}}function Xf(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Z_({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function pR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Z_(t);default:return!1}}async function mR(t,e={}){return ri(t,"GET","/v1/projects",e)}const gR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_R=/^https?/;async function yR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await mR(t);for(const n of e)try{if(vR(n))return}catch{}Dn(t,"unauthorized-domain")}function vR(t){const e=qc(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!_R.test(n))return!1;if(gR.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}const wR=new fo(3e4,6e4);function Jf(){const t=Sn().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ER(t){return new Promise((e,n)=>{function s(){Jf(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Jf(),n(hn(t,"network-request-failed"))},timeout:wR.get()})}if(Sn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Sn().gapi?.load)s();else{const r=R1("iframefcb");return Sn()[r]=()=>{gapi.load?s():n(hn(t,"network-request-failed"))},b1(`${A1()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw sa=null,e})}let sa=null;function TR(t){return sa=sa||ER(t),sa}const IR=new fo(5e3,15e3),bR="__/auth/iframe",AR="emulator/auth/iframe",RR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CR(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Hu(e,AR):`https://${t.config.authDomain}/${bR}`,s={apiKey:e.apiKey,appName:t.name,v:yr},r=SR.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${ho(s).slice(1)}`}async function PR(t){const e=await TR(t),n=Sn().gapi;return ye(n,t,"internal-error"),e.open({where:document.body,url:CR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RR,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=hn(t,"network-request-failed"),l=Sn().setTimeout(()=>{i(o)},IR.get());function c(){Sn().clearTimeout(l),r(s)}s.ping(c).then(c,()=>{i(o)})}))}const xR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kR=500,DR=600,NR="_blank",VR="http://localhost";class Zf{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function OR(t,e,n,s=kR,r=DR){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c={...xR,width:s.toString(),height:r.toString(),top:i,left:o},u=Ot().toLowerCase();n&&(l=N_(u)?NR:n),k_(u)&&(e=e||VR,c.scrollbars="yes");const d=Object.entries(c).reduce((m,[_,k])=>`${m}${_}=${k},`,"");if(g1(u)&&l!=="_self")return MR(e||"",l),new Zf(null);const f=window.open(e||"",l,d);ye(f,t,"popup-blocked");try{f.focus()}catch{}return new Zf(f)}function MR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const LR="__/auth/handler",FR="emulator/auth/handler",UR=encodeURIComponent("fac");async function ep(t,e,n,s,r,i){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:yr,eventId:r};if(e instanceof Ku){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",fI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof po){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${UR}=${encodeURIComponent(c)}`:"";return`${$R(t)}?${ho(l).slice(1)}${u}`}function $R({config:t}){return t.emulator?Hu(t,FR):`https://${t.authDomain}/${LR}`}const pc="webStorageSupport";class BR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=G_,this._completeRedirectFn=hR,this._overrideRedirectResult=lR}async _openPopup(e,n,s,r){Zn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await ep(e,n,s,qc(),r);return OR(e,i,Yu())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await ep(e,n,s,qc(),r);return q1(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(Zn(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await PR(e),s=new fR(e);return n.register("authEvent",r=>(ye(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(pc,{type:pc},r=>{const i=r?.[0]?.[pc];i!==void 0&&n(!!i),Dn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=yR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return F_()||D_()||Gu()}}const jR=BR;var tp="@firebase/auth",np="1.11.1";class HR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function qR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zR(t){gn(new rn("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;ye(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:U_(t)},u=new T1(s,r,i,c);return C1(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),gn(new rn("auth-internal",e=>{const n=cl(e.getProvider("auth").getImmediate());return(s=>new HR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zt(tp,np,qR(t)),zt(tp,np,"esm2020")}const GR=5*60,WR=Gg("authIdTokenMaxAge")||GR;let sp=null;const KR=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>WR)return;const r=n?.token;sp!==r&&(sp=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function QR(t=ol()){const e=Us(t,"auth");if(e.isInitialized())return e.getImmediate();const n=S1(t,{popupRedirectResolver:jR,persistence:[Z1,B1,G_]}),s=Gg("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=KR(i.toString());L1(n,o,()=>o(n.currentUser)),M1(n,l=>o(l))}}const r=Hg("auth");return r&&P1(n,`http://${r}`),n}function YR(){return document.getElementsByTagName("head")?.[0]??document}I1({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=hn("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",YR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zR("Browser");var rp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var As,ey;(function(){var t;function e(E,y){function v(){}v.prototype=y.prototype,E.F=y.prototype,E.prototype=new v,E.prototype.constructor=E,E.D=function(S,R,A){for(var T=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)T[ke-2]=arguments[ke];return y.prototype[R].apply(S,T)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(E,y,v){v||(v=0);const S=Array(16);if(typeof y=="string")for(var R=0;R<16;++R)S[R]=y.charCodeAt(v++)|y.charCodeAt(v++)<<8|y.charCodeAt(v++)<<16|y.charCodeAt(v++)<<24;else for(R=0;R<16;++R)S[R]=y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24;y=E.g[0],v=E.g[1],R=E.g[2];let A=E.g[3],T;T=y+(A^v&(R^A))+S[0]+3614090360&4294967295,y=v+(T<<7&4294967295|T>>>25),T=A+(R^y&(v^R))+S[1]+3905402710&4294967295,A=y+(T<<12&4294967295|T>>>20),T=R+(v^A&(y^v))+S[2]+606105819&4294967295,R=A+(T<<17&4294967295|T>>>15),T=v+(y^R&(A^y))+S[3]+3250441966&4294967295,v=R+(T<<22&4294967295|T>>>10),T=y+(A^v&(R^A))+S[4]+4118548399&4294967295,y=v+(T<<7&4294967295|T>>>25),T=A+(R^y&(v^R))+S[5]+1200080426&4294967295,A=y+(T<<12&4294967295|T>>>20),T=R+(v^A&(y^v))+S[6]+2821735955&4294967295,R=A+(T<<17&4294967295|T>>>15),T=v+(y^R&(A^y))+S[7]+4249261313&4294967295,v=R+(T<<22&4294967295|T>>>10),T=y+(A^v&(R^A))+S[8]+1770035416&4294967295,y=v+(T<<7&4294967295|T>>>25),T=A+(R^y&(v^R))+S[9]+2336552879&4294967295,A=y+(T<<12&4294967295|T>>>20),T=R+(v^A&(y^v))+S[10]+4294925233&4294967295,R=A+(T<<17&4294967295|T>>>15),T=v+(y^R&(A^y))+S[11]+2304563134&4294967295,v=R+(T<<22&4294967295|T>>>10),T=y+(A^v&(R^A))+S[12]+1804603682&4294967295,y=v+(T<<7&4294967295|T>>>25),T=A+(R^y&(v^R))+S[13]+4254626195&4294967295,A=y+(T<<12&4294967295|T>>>20),T=R+(v^A&(y^v))+S[14]+2792965006&4294967295,R=A+(T<<17&4294967295|T>>>15),T=v+(y^R&(A^y))+S[15]+1236535329&4294967295,v=R+(T<<22&4294967295|T>>>10),T=y+(R^A&(v^R))+S[1]+4129170786&4294967295,y=v+(T<<5&4294967295|T>>>27),T=A+(v^R&(y^v))+S[6]+3225465664&4294967295,A=y+(T<<9&4294967295|T>>>23),T=R+(y^v&(A^y))+S[11]+643717713&4294967295,R=A+(T<<14&4294967295|T>>>18),T=v+(A^y&(R^A))+S[0]+3921069994&4294967295,v=R+(T<<20&4294967295|T>>>12),T=y+(R^A&(v^R))+S[5]+3593408605&4294967295,y=v+(T<<5&4294967295|T>>>27),T=A+(v^R&(y^v))+S[10]+38016083&4294967295,A=y+(T<<9&4294967295|T>>>23),T=R+(y^v&(A^y))+S[15]+3634488961&4294967295,R=A+(T<<14&4294967295|T>>>18),T=v+(A^y&(R^A))+S[4]+3889429448&4294967295,v=R+(T<<20&4294967295|T>>>12),T=y+(R^A&(v^R))+S[9]+568446438&4294967295,y=v+(T<<5&4294967295|T>>>27),T=A+(v^R&(y^v))+S[14]+3275163606&4294967295,A=y+(T<<9&4294967295|T>>>23),T=R+(y^v&(A^y))+S[3]+4107603335&4294967295,R=A+(T<<14&4294967295|T>>>18),T=v+(A^y&(R^A))+S[8]+1163531501&4294967295,v=R+(T<<20&4294967295|T>>>12),T=y+(R^A&(v^R))+S[13]+2850285829&4294967295,y=v+(T<<5&4294967295|T>>>27),T=A+(v^R&(y^v))+S[2]+4243563512&4294967295,A=y+(T<<9&4294967295|T>>>23),T=R+(y^v&(A^y))+S[7]+1735328473&4294967295,R=A+(T<<14&4294967295|T>>>18),T=v+(A^y&(R^A))+S[12]+2368359562&4294967295,v=R+(T<<20&4294967295|T>>>12),T=y+(v^R^A)+S[5]+4294588738&4294967295,y=v+(T<<4&4294967295|T>>>28),T=A+(y^v^R)+S[8]+2272392833&4294967295,A=y+(T<<11&4294967295|T>>>21),T=R+(A^y^v)+S[11]+1839030562&4294967295,R=A+(T<<16&4294967295|T>>>16),T=v+(R^A^y)+S[14]+4259657740&4294967295,v=R+(T<<23&4294967295|T>>>9),T=y+(v^R^A)+S[1]+2763975236&4294967295,y=v+(T<<4&4294967295|T>>>28),T=A+(y^v^R)+S[4]+1272893353&4294967295,A=y+(T<<11&4294967295|T>>>21),T=R+(A^y^v)+S[7]+4139469664&4294967295,R=A+(T<<16&4294967295|T>>>16),T=v+(R^A^y)+S[10]+3200236656&4294967295,v=R+(T<<23&4294967295|T>>>9),T=y+(v^R^A)+S[13]+681279174&4294967295,y=v+(T<<4&4294967295|T>>>28),T=A+(y^v^R)+S[0]+3936430074&4294967295,A=y+(T<<11&4294967295|T>>>21),T=R+(A^y^v)+S[3]+3572445317&4294967295,R=A+(T<<16&4294967295|T>>>16),T=v+(R^A^y)+S[6]+76029189&4294967295,v=R+(T<<23&4294967295|T>>>9),T=y+(v^R^A)+S[9]+3654602809&4294967295,y=v+(T<<4&4294967295|T>>>28),T=A+(y^v^R)+S[12]+3873151461&4294967295,A=y+(T<<11&4294967295|T>>>21),T=R+(A^y^v)+S[15]+530742520&4294967295,R=A+(T<<16&4294967295|T>>>16),T=v+(R^A^y)+S[2]+3299628645&4294967295,v=R+(T<<23&4294967295|T>>>9),T=y+(R^(v|~A))+S[0]+4096336452&4294967295,y=v+(T<<6&4294967295|T>>>26),T=A+(v^(y|~R))+S[7]+1126891415&4294967295,A=y+(T<<10&4294967295|T>>>22),T=R+(y^(A|~v))+S[14]+2878612391&4294967295,R=A+(T<<15&4294967295|T>>>17),T=v+(A^(R|~y))+S[5]+4237533241&4294967295,v=R+(T<<21&4294967295|T>>>11),T=y+(R^(v|~A))+S[12]+1700485571&4294967295,y=v+(T<<6&4294967295|T>>>26),T=A+(v^(y|~R))+S[3]+2399980690&4294967295,A=y+(T<<10&4294967295|T>>>22),T=R+(y^(A|~v))+S[10]+4293915773&4294967295,R=A+(T<<15&4294967295|T>>>17),T=v+(A^(R|~y))+S[1]+2240044497&4294967295,v=R+(T<<21&4294967295|T>>>11),T=y+(R^(v|~A))+S[8]+1873313359&4294967295,y=v+(T<<6&4294967295|T>>>26),T=A+(v^(y|~R))+S[15]+4264355552&4294967295,A=y+(T<<10&4294967295|T>>>22),T=R+(y^(A|~v))+S[6]+2734768916&4294967295,R=A+(T<<15&4294967295|T>>>17),T=v+(A^(R|~y))+S[13]+1309151649&4294967295,v=R+(T<<21&4294967295|T>>>11),T=y+(R^(v|~A))+S[4]+4149444226&4294967295,y=v+(T<<6&4294967295|T>>>26),T=A+(v^(y|~R))+S[11]+3174756917&4294967295,A=y+(T<<10&4294967295|T>>>22),T=R+(y^(A|~v))+S[2]+718787259&4294967295,R=A+(T<<15&4294967295|T>>>17),T=v+(A^(R|~y))+S[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(R+(T<<21&4294967295|T>>>11))&4294967295,E.g[2]=E.g[2]+R&4294967295,E.g[3]=E.g[3]+A&4294967295}s.prototype.v=function(E,y){y===void 0&&(y=E.length);const v=y-this.blockSize,S=this.C;let R=this.h,A=0;for(;A<y;){if(R==0)for(;A<=v;)r(this,E,A),A+=this.blockSize;if(typeof E=="string"){for(;A<y;)if(S[R++]=E.charCodeAt(A++),R==this.blockSize){r(this,S),R=0;break}}else for(;A<y;)if(S[R++]=E[A++],R==this.blockSize){r(this,S),R=0;break}}this.h=R,this.o+=y},s.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;y=this.o*8;for(var v=E.length-8;v<E.length;++v)E[v]=y&255,y/=256;for(this.v(E),E=Array(16),y=0,v=0;v<4;++v)for(let S=0;S<32;S+=8)E[y++]=this.g[v]>>>S&255;return E};function i(E,y){var v=l;return Object.prototype.hasOwnProperty.call(v,E)?v[E]:v[E]=y(E)}function o(E,y){this.h=y;const v=[];let S=!0;for(let R=E.length-1;R>=0;R--){const A=E[R]|0;S&&A==y||(v[R]=A,S=!1)}this.g=v}var l={};function c(E){return-128<=E&&E<128?i(E,function(y){return new o([y|0],y<0?-1:0)}):new o([E|0],E<0?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return f;if(E<0)return N(u(-E));const y=[];let v=1;for(let S=0;E>=v;S++)y[S]=E/v|0,v*=4294967296;return new o(y,0)}function d(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return N(d(E.substring(1),y));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const v=u(Math.pow(y,8));let S=f;for(let A=0;A<E.length;A+=8){var R=Math.min(8,E.length-A);const T=parseInt(E.substring(A,A+R),y);R<8?(R=u(Math.pow(y,R)),S=S.j(R).add(u(T))):(S=S.j(v),S=S.add(u(T)))}return S}var f=c(0),m=c(1),_=c(16777216);t=o.prototype,t.m=function(){if(x(this))return-N(this).m();let E=0,y=1;for(let v=0;v<this.g.length;v++){const S=this.i(v);E+=(S>=0?S:4294967296+S)*y,y*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(k(this))return"0";if(x(this))return"-"+N(this).toString(E);const y=u(Math.pow(E,6));var v=this;let S="";for(;;){const R=O(v,y).g;v=H(v,R.j(y));let A=((v.g.length>0?v.g[0]:v.h)>>>0).toString(E);if(v=R,k(v))return A+S;for(;A.length<6;)A="0"+A;S=A+S}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function k(E){if(E.h!=0)return!1;for(let y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function x(E){return E.h==-1}t.l=function(E){return E=H(this,E),x(E)?-1:k(E)?0:1};function N(E){const y=E.g.length,v=[];for(let S=0;S<y;S++)v[S]=~E.g[S];return new o(v,~E.h).add(m)}t.abs=function(){return x(this)?N(this):this},t.add=function(E){const y=Math.max(this.g.length,E.g.length),v=[];let S=0;for(let R=0;R<=y;R++){let A=S+(this.i(R)&65535)+(E.i(R)&65535),T=(A>>>16)+(this.i(R)>>>16)+(E.i(R)>>>16);S=T>>>16,A&=65535,T&=65535,v[R]=T<<16|A}return new o(v,v[v.length-1]&-2147483648?-1:0)};function H(E,y){return E.add(N(y))}t.j=function(E){if(k(this)||k(E))return f;if(x(this))return x(E)?N(this).j(N(E)):N(N(this).j(E));if(x(E))return N(this.j(N(E)));if(this.l(_)<0&&E.l(_)<0)return u(this.m()*E.m());const y=this.g.length+E.g.length,v=[];for(var S=0;S<2*y;S++)v[S]=0;for(S=0;S<this.g.length;S++)for(let R=0;R<E.g.length;R++){const A=this.i(S)>>>16,T=this.i(S)&65535,ke=E.i(R)>>>16,Xe=E.i(R)&65535;v[2*S+2*R]+=T*Xe,V(v,2*S+2*R),v[2*S+2*R+1]+=A*Xe,V(v,2*S+2*R+1),v[2*S+2*R+1]+=T*ke,V(v,2*S+2*R+1),v[2*S+2*R+2]+=A*ke,V(v,2*S+2*R+2)}for(E=0;E<y;E++)v[E]=v[2*E+1]<<16|v[2*E];for(E=y;E<2*y;E++)v[E]=0;return new o(v,0)};function V(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function C(E,y){this.g=E,this.h=y}function O(E,y){if(k(y))throw Error("division by zero");if(k(E))return new C(f,f);if(x(E))return y=O(N(E),y),new C(N(y.g),N(y.h));if(x(y))return y=O(E,N(y)),new C(N(y.g),y.h);if(E.g.length>30){if(x(E)||x(y))throw Error("slowDivide_ only works with positive integers.");for(var v=m,S=y;S.l(E)<=0;)v=U(v),S=U(S);var R=F(v,1),A=F(S,1);for(S=F(S,2),v=F(v,2);!k(S);){var T=A.add(S);T.l(E)<=0&&(R=R.add(v),A=T),S=F(S,1),v=F(v,1)}return y=H(E,R.j(y)),new C(R,y)}for(R=f;E.l(y)>=0;){for(v=Math.max(1,Math.floor(E.m()/y.m())),S=Math.ceil(Math.log(v)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),A=u(v),T=A.j(y);x(T)||T.l(E)>0;)v-=S,A=u(v),T=A.j(y);k(A)&&(A=m),R=R.add(A),E=H(E,T)}return new C(R,E)}t.B=function(E){return O(this,E).h},t.and=function(E){const y=Math.max(this.g.length,E.g.length),v=[];for(let S=0;S<y;S++)v[S]=this.i(S)&E.i(S);return new o(v,this.h&E.h)},t.or=function(E){const y=Math.max(this.g.length,E.g.length),v=[];for(let S=0;S<y;S++)v[S]=this.i(S)|E.i(S);return new o(v,this.h|E.h)},t.xor=function(E){const y=Math.max(this.g.length,E.g.length),v=[];for(let S=0;S<y;S++)v[S]=this.i(S)^E.i(S);return new o(v,this.h^E.h)};function U(E){const y=E.g.length+1,v=[];for(let S=0;S<y;S++)v[S]=E.i(S)<<1|E.i(S-1)>>>31;return new o(v,E.h)}function F(E,y){const v=y>>5;y%=32;const S=E.g.length-v,R=[];for(let A=0;A<S;A++)R[A]=y>0?E.i(A+v)>>>y|E.i(A+v+1)<<32-y:E.i(A+v);return new o(R,E.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,ey=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,As=o}).apply(typeof rp<"u"?rp:typeof self<"u"?self:typeof window<"u"?window:{});var jo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ty,Pi,ny,ra,Wc,sy,ry,iy;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof jo=="object"&&jo];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var s=n(this);function r(a,h){if(h)e:{var p=s;a=a.split(".");for(var g=0;g<a.length-1;g++){var D=a[g];if(!(D in p))break e;p=p[D]}a=a[a.length-1],g=p[a],h=h(g),h!=g&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}r("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(a){return a||function(h){var p=[],g;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&p.push([g,h[g]]);return p}});var i=i||{},o=this||self;function l(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function c(a,h,p){return a.call.apply(a.bind,arguments)}function u(a,h,p){return u=c,u.apply(null,arguments)}function d(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function f(a,h){function p(){}p.prototype=h.prototype,a.Z=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Ob=function(g,D,L){for(var te=Array(arguments.length-2),be=2;be<arguments.length;be++)te[be-2]=arguments[be];return h.prototype[D].apply(g,te)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function _(a){const h=a.length;if(h>0){const p=Array(h);for(let g=0;g<h;g++)p[g]=a[g];return p}return[]}function k(a,h){for(let g=1;g<arguments.length;g++){const D=arguments[g];var p=typeof D;if(p=p!="object"?p:D?Array.isArray(D)?"array":p:"null",p=="array"||p=="object"&&typeof D.length=="number"){p=a.length||0;const L=D.length||0;a.length=p+L;for(let te=0;te<L;te++)a[p+te]=D[te]}else a.push(D)}}class x{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function N(a){o.setTimeout(()=>{throw a},0)}function H(){var a=E;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class V{constructor(){this.h=this.g=null}add(h,p){const g=C.get();g.set(h,p),this.h?this.h.next=g:this.g=g,this.h=g}}var C=new x(()=>new O,a=>a.reset());class O{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let U,F=!1,E=new V,y=()=>{const a=Promise.resolve(void 0);U=()=>{a.then(v)}};function v(){for(var a;a=H();){try{a.h.call(a.g)}catch(p){N(p)}var h=C;h.j(a),h.h<100&&(h.h++,a.next=h.g,h.g=a)}F=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};o.addEventListener("test",p,h),o.removeEventListener("test",p,h)}catch{}return a}();function T(a){return/^[\s\xa0]*$/.test(a)}function ke(a,h){R.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,h)}f(ke,R),ke.prototype.init=function(a,h){const p=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget,h||(p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement)),this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&ke.Z.h.call(this)},ke.prototype.h=function(){ke.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Xe="closure_listenable_"+(Math.random()*1e6|0),ze=0;function Ne(a,h,p,g,D){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!g,this.ha=D,this.key=++ze,this.da=this.fa=!1}function Se(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function de(a,h,p){for(const g in a)h.call(p,a[g],g,a)}function K(a,h){for(const p in a)h.call(void 0,a[p],p,a)}function M(a){const h={};for(const p in a)h[p]=a[p];return h}const ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Me(a,h){let p,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(p in g)a[p]=g[p];for(let L=0;L<ae.length;L++)p=ae[L],Object.prototype.hasOwnProperty.call(g,p)&&(a[p]=g[p])}}function Ae(a){this.src=a,this.g={},this.h=0}Ae.prototype.add=function(a,h,p,g,D){const L=a.toString();a=this.g[L],a||(a=this.g[L]=[],this.h++);const te=Ye(a,h,g,D);return te>-1?(h=a[te],p||(h.fa=!1)):(h=new Ne(h,this.src,L,!!g,D),h.fa=p,a.push(h)),h};function ft(a,h){const p=h.type;if(p in a.g){var g=a.g[p],D=Array.prototype.indexOf.call(g,h,void 0),L;(L=D>=0)&&Array.prototype.splice.call(g,D,1),L&&(Se(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function Ye(a,h,p,g){for(let D=0;D<a.length;++D){const L=a[D];if(!L.da&&L.listener==h&&L.capture==!!p&&L.ha==g)return D}return-1}var $="closure_lm_"+(Math.random()*1e6|0),Q={};function re(a,h,p,g,D){if(Array.isArray(h)){for(let L=0;L<h.length;L++)re(a,h[L],p,g,D);return null}return p=ne(p),a&&a[Xe]?a.J(h,p,l(g)?!!g.capture:!1,D):ce(a,h,p,!1,g,D)}function ce(a,h,p,g,D,L){if(!h)throw Error("Invalid event type");const te=l(D)?!!D.capture:!!D;let be=q(a);if(be||(a[$]=be=new Ae(a)),p=be.add(h,p,g,te,L),p.proxy)return p;if(g=fe(),p.proxy=g,g.src=a,g.listener=p,a.addEventListener)A||(D=te),D===void 0&&(D=!1),a.addEventListener(h.toString(),g,D);else if(a.attachEvent)a.attachEvent(P(h.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function fe(){function a(p){return h.call(a.src,a.listener,p)}const h=B;return a}function I(a,h,p,g,D){if(Array.isArray(h))for(var L=0;L<h.length;L++)I(a,h[L],p,g,D);else g=l(g)?!!g.capture:!!g,p=ne(p),a&&a[Xe]?(a=a.i,L=String(h).toString(),L in a.g&&(h=a.g[L],p=Ye(h,p,g,D),p>-1&&(Se(h[p]),Array.prototype.splice.call(h,p,1),h.length==0&&(delete a.g[L],a.h--)))):a&&(a=q(a))&&(h=a.g[h.toString()],a=-1,h&&(a=Ye(h,p,g,D)),(p=a>-1?h[a]:null)&&b(p))}function b(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Xe])ft(h.i,a);else{var p=a.type,g=a.proxy;h.removeEventListener?h.removeEventListener(p,g,a.capture):h.detachEvent?h.detachEvent(P(p),g):h.addListener&&h.removeListener&&h.removeListener(g),(p=q(h))?(ft(p,a),p.h==0&&(p.src=null,h[$]=null)):Se(a)}}}function P(a){return a in Q?Q[a]:Q[a]="on"+a}function B(a,h){if(a.da)a=!0;else{h=new ke(h,this);const p=a.listener,g=a.ha||a.src;a.fa&&b(a),a=p.call(g,h)}return a}function q(a){return a=a[$],a instanceof Ae?a:null}var j="__closure_events_fn_"+(Math.random()*1e9>>>0);function ne(a){return typeof a=="function"?a:(a[j]||(a[j]=function(h){return a.handleEvent(h)}),a[j])}function X(){S.call(this),this.i=new Ae(this),this.M=this,this.G=null}f(X,S),X.prototype[Xe]=!0,X.prototype.removeEventListener=function(a,h,p,g){I(this,a,h,p,g)};function Y(a,h){var p,g=a.G;if(g)for(p=[];g;g=g.G)p.push(g);if(a=a.M,g=h.type||h,typeof h=="string")h=new R(h,a);else if(h instanceof R)h.target=h.target||a;else{var D=h;h=new R(g,a),Me(h,D)}D=!0;let L,te;if(p)for(te=p.length-1;te>=0;te--)L=h.g=p[te],D=W(L,g,!0,h)&&D;if(L=h.g=a,D=W(L,g,!0,h)&&D,D=W(L,g,!1,h)&&D,p)for(te=0;te<p.length;te++)L=h.g=p[te],D=W(L,g,!1,h)&&D}X.prototype.N=function(){if(X.Z.N.call(this),this.i){var a=this.i;for(const h in a.g){const p=a.g[h];for(let g=0;g<p.length;g++)Se(p[g]);delete a.g[h],a.h--}}this.G=null},X.prototype.J=function(a,h,p,g){return this.i.add(String(a),h,!1,p,g)},X.prototype.K=function(a,h,p,g){return this.i.add(String(a),h,!0,p,g)};function W(a,h,p,g){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();let D=!0;for(let L=0;L<h.length;++L){const te=h[L];if(te&&!te.da&&te.capture==p){const be=te.listener,pt=te.ha||te.src;te.fa&&ft(a.i,te),D=be.call(pt,g)!==!1&&D}}return D&&!g.defaultPrevented}function ie(a,h){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(a,h||0)}function Z(a){a.g=ie(()=>{a.g=null,a.i&&(a.i=!1,Z(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class ue extends S{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Z(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function se(a){S.call(this),this.h=a,this.g={}}f(se,S);var ge=[];function Ie(a){de(a.g,function(h,p){this.g.hasOwnProperty(p)&&b(h)},a),a.g={}}se.prototype.N=function(){se.Z.N.call(this),Ie(this)},se.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Re=o.JSON.stringify,tt=o.JSON.parse,nt=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Rt(){}function Bt(){}var Gt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function js(){R.call(this,"d")}f(js,R);function st(){R.call(this,"c")}f(st,R);var Ge={},Er=null;function Mn(){return Er=Er||new X}Ge.Ia="serverreachability";function ui(a){R.call(this,Ge.Ia,a)}f(ui,R);function Hs(a){const h=Mn();Y(h,new ui(h))}Ge.STAT_EVENT="statevent";function Ro(a,h){R.call(this,Ge.STAT_EVENT,a),this.stat=h}f(Ro,R);function Mt(a){const h=Mn();Y(h,new Ro(h,a))}Ge.Ja="timingevent";function Nh(a,h){R.call(this,Ge.Ja,a),this.size=h}f(Nh,R);function hi(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},h)}function di(){this.g=!0}di.prototype.ua=function(){this.g=!1};function $v(a,h,p,g,D,L){a.info(function(){if(a.g)if(L){var te="",be=L.split("&");for(let $e=0;$e<be.length;$e++){var pt=be[$e].split("=");if(pt.length>1){const yt=pt[0];pt=pt[1];const vn=yt.split("_");te=vn.length>=2&&vn[1]=="type"?te+(yt+"="+pt+"&"):te+(yt+"=redacted&")}}}else te=null;else te=L;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+h+`
`+p+`
`+te})}function Bv(a,h,p,g,D,L,te){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+h+`
`+p+`
`+L+" "+te})}function Tr(a,h,p,g){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+Hv(a,p)+(g?" "+g:"")})}function jv(a,h){a.info(function(){return"TIMEOUT: "+h})}di.prototype.info=function(){};function Hv(a,h){if(!a.g)return h;if(!h)return null;try{const L=JSON.parse(h);if(L){for(a=0;a<L.length;a++)if(Array.isArray(L[a])){var p=L[a];if(!(p.length<2)){var g=p[1];if(Array.isArray(g)&&!(g.length<1)){var D=g[0];if(D!="noop"&&D!="stop"&&D!="close")for(let te=1;te<g.length;te++)g[te]=""}}}}return Re(L)}catch{return h}}var So={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Vh={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Oh;function Pl(){}f(Pl,Rt),Pl.prototype.g=function(){return new XMLHttpRequest},Oh=new Pl;function fi(a){return encodeURIComponent(String(a))}function qv(a){var h=1;a=a.split(":");const p=[];for(;h>0&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function is(a,h,p,g){this.j=a,this.i=h,this.l=p,this.S=g||1,this.V=new se(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Mh}function Mh(){this.i=null,this.g="",this.h=!1}var Lh={},xl={};function kl(a,h,p){a.M=1,a.A=Po(yn(h)),a.u=p,a.R=!0,Fh(a,null)}function Fh(a,h){a.F=Date.now(),Co(a),a.B=yn(a.A);var p=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),Xh(p.i,"t",g),a.C=0,p=a.j.L,a.h=new Mh,a.g=md(a.j,p?h:null,!a.u),a.P>0&&(a.O=new ue(u(a.Y,a,a.g),a.P)),h=a.V,p=a.g,g=a.ba;var D="readystatechange";Array.isArray(D)||(D&&(ge[0]=D.toString()),D=ge);for(let L=0;L<D.length;L++){const te=re(p,D[L],g||h.handleEvent,!1,h.h||h);if(!te)break;h.g[te.key]=te}h=a.J?M(a.J):{},a.u?(a.v||(a.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,h)):(a.v="GET",a.g.ea(a.B,a.v,null,h)),Hs(),$v(a.i,a.v,a.B,a.l,a.S,a.u)}is.prototype.ba=function(a){a=a.target;const h=this.O;h&&ls(a)==3?h.j():this.Y(a)},is.prototype.Y=function(a){try{if(a==this.g)e:{const be=ls(this.g),pt=this.g.ya(),$e=this.g.ca();if(!(be<3)&&(be!=3||this.g&&(this.h.h||this.g.la()||rd(this.g)))){this.K||be!=4||pt==7||(pt==8||$e<=0?Hs(3):Hs(2)),Dl(this);var h=this.g.ca();this.X=h;var p=zv(this);if(this.o=h==200,Bv(this.i,this.v,this.B,this.l,this.S,be,h),this.o){if(this.U&&!this.L){t:{if(this.g){var g,D=this.g;if((g=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(g)){var L=g;break t}}L=null}if(a=L)Tr(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Nl(this,a);else{this.o=!1,this.m=3,Mt(12),qs(this),pi(this);break e}}if(this.R){a=!0;let yt;for(;!this.K&&this.C<p.length;)if(yt=Gv(this,p),yt==xl){be==4&&(this.m=4,Mt(14),a=!1),Tr(this.i,this.l,null,"[Incomplete Response]");break}else if(yt==Lh){this.m=4,Mt(15),Tr(this.i,this.l,p,"[Invalid Chunk]"),a=!1;break}else Tr(this.i,this.l,yt,null),Nl(this,yt);if(Uh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),be!=4||p.length!=0||this.h.h||(this.m=1,Mt(16),a=!1),this.o=this.o&&a,!a)Tr(this.i,this.l,p,"[Invalid Chunked Response]"),qs(this),pi(this);else if(p.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),Bl(te),te.P=!0,Mt(11))}}else Tr(this.i,this.l,p,null),Nl(this,p);be==4&&qs(this),this.o&&!this.K&&(be==4?hd(this.j,this):(this.o=!1,Co(this)))}else o0(this.g),h==400&&p.indexOf("Unknown SID")>0?(this.m=3,Mt(12)):(this.m=0,Mt(13)),qs(this),pi(this)}}}catch{}finally{}};function zv(a){if(!Uh(a))return a.g.la();const h=rd(a.g);if(h==="")return"";let p="";const g=h.length,D=ls(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return qs(a),pi(a),"";a.h.i=new o.TextDecoder}for(let L=0;L<g;L++)a.h.h=!0,p+=a.h.i.decode(h[L],{stream:!(D&&L==g-1)});return h.length=0,a.h.g+=p,a.C=0,a.h.g}function Uh(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function Gv(a,h){var p=a.C,g=h.indexOf(`
`,p);return g==-1?xl:(p=Number(h.substring(p,g)),isNaN(p)?Lh:(g+=1,g+p>h.length?xl:(h=h.slice(g,g+p),a.C=g+p,h)))}is.prototype.cancel=function(){this.K=!0,qs(this)};function Co(a){a.T=Date.now()+a.H,$h(a,a.H)}function $h(a,h){if(a.D!=null)throw Error("WatchDog timer not null");a.D=hi(u(a.aa,a),h)}function Dl(a){a.D&&(o.clearTimeout(a.D),a.D=null)}is.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(jv(this.i,this.B),this.M!=2&&(Hs(),Mt(17)),qs(this),this.m=2,pi(this)):$h(this,this.T-a)};function pi(a){a.j.I==0||a.K||hd(a.j,a)}function qs(a){Dl(a);var h=a.O;h&&typeof h.dispose=="function"&&h.dispose(),a.O=null,Ie(a.V),a.g&&(h=a.g,a.g=null,h.abort(),h.dispose())}function Nl(a,h){try{var p=a.j;if(p.I!=0&&(p.g==a||Vl(p.h,a))){if(!a.L&&Vl(p.h,a)&&p.I==3){try{var g=p.Ba.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<a.F)Vo(p),Do(p);else break e;$l(p),Mt(18)}}else p.xa=D[1],0<p.xa-p.K&&D[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=hi(u(p.Va,p),6e3));Hh(p.h)<=1&&p.ta&&(p.ta=void 0)}else Gs(p,11)}else if((a.L||p.g==a)&&Vo(p),!T(h))for(D=p.Ba.g.parse(h),h=0;h<D.length;h++){let $e=D[h];const yt=$e[0];if(!(yt<=p.K))if(p.K=yt,$e=$e[1],p.I==2)if($e[0]=="c"){p.M=$e[1],p.ba=$e[2];const vn=$e[3];vn!=null&&(p.ka=vn,p.j.info("VER="+p.ka));const Ws=$e[4];Ws!=null&&(p.za=Ws,p.j.info("SVER="+p.za));const cs=$e[5];cs!=null&&typeof cs=="number"&&cs>0&&(g=1.5*cs,p.O=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;const us=a.g;if(us){const Mo=us.g?us.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mo){var L=g.h;L.g||Mo.indexOf("spdy")==-1&&Mo.indexOf("quic")==-1&&Mo.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Ol(L,L.h),L.h=null))}if(g.G){const jl=us.g?us.g.getResponseHeader("X-HTTP-Session-Id"):null;jl&&(g.wa=jl,We(g.J,g.G,jl))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-a.F,p.j.info("Handshake RTT: "+p.T+"ms")),g=p;var te=a;if(g.na=pd(g,g.L?g.ba:null,g.W),te.L){qh(g.h,te);var be=te,pt=g.O;pt&&(be.H=pt),be.D&&(Dl(be),Co(be)),g.g=te}else cd(g);p.i.length>0&&No(p)}else $e[0]!="stop"&&$e[0]!="close"||Gs(p,7);else p.I==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?Gs(p,7):Ul(p):$e[0]!="noop"&&p.l&&p.l.qa($e),p.A=0)}}Hs(4)}catch{}}var Wv=class{constructor(a,h){this.g=a,this.map=h}};function Bh(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function jh(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Hh(a){return a.h?1:a.g?a.g.size:0}function Vl(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Ol(a,h){a.g?a.g.add(h):a.h=h}function qh(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Bh.prototype.cancel=function(){if(this.i=zh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function zh(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const p of a.g.values())h=h.concat(p.G);return h}return _(a.i)}var Gh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kv(a,h){if(a){a=a.split("&");for(let p=0;p<a.length;p++){const g=a[p].indexOf("=");let D,L=null;g>=0?(D=a[p].substring(0,g),L=a[p].substring(g+1)):D=a[p],h(D,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function os(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;a instanceof os?(this.l=a.l,mi(this,a.j),this.o=a.o,this.g=a.g,gi(this,a.u),this.h=a.h,Ml(this,Jh(a.i)),this.m=a.m):a&&(h=String(a).match(Gh))?(this.l=!1,mi(this,h[1]||"",!0),this.o=_i(h[2]||""),this.g=_i(h[3]||"",!0),gi(this,h[4]),this.h=_i(h[5]||"",!0),Ml(this,h[6]||"",!0),this.m=_i(h[7]||"")):(this.l=!1,this.i=new vi(null,this.l))}os.prototype.toString=function(){const a=[];var h=this.j;h&&a.push(yi(h,Wh,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(yi(h,Wh,!0),"@"),a.push(fi(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&a.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(yi(p,p.charAt(0)=="/"?Xv:Yv,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",yi(p,Zv)),a.join("")},os.prototype.resolve=function(a){const h=yn(this);let p=!!a.j;p?mi(h,a.j):p=!!a.o,p?h.o=a.o:p=!!a.g,p?h.g=a.g:p=a.u!=null;var g=a.h;if(p)gi(h,a.u);else if(p=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var D=h.h.lastIndexOf("/");D!=-1&&(g=h.h.slice(0,D+1)+g)}if(D=g,D==".."||D==".")g="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){g=D.lastIndexOf("/",0)==0,D=D.split("/");const L=[];for(let te=0;te<D.length;){const be=D[te++];be=="."?g&&te==D.length&&L.push(""):be==".."?((L.length>1||L.length==1&&L[0]!="")&&L.pop(),g&&te==D.length&&L.push("")):(L.push(be),g=!0)}g=L.join("/")}else g=D}return p?h.h=g:p=a.i.toString()!=="",p?Ml(h,Jh(a.i)):p=!!a.m,p&&(h.m=a.m),h};function yn(a){return new os(a)}function mi(a,h,p){a.j=p?_i(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function gi(a,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);a.u=h}else a.u=null}function Ml(a,h,p){h instanceof vi?(a.i=h,e0(a.i,a.l)):(p||(h=yi(h,Jv)),a.i=new vi(h,a.l))}function We(a,h,p){a.i.set(h,p)}function Po(a){return We(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function _i(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function yi(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,Qv),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Qv(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Wh=/[#\/\?@]/g,Yv=/[#\?:]/g,Xv=/[#\?]/g,Jv=/[#\?@]/g,Zv=/#/g;function vi(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function zs(a){a.g||(a.g=new Map,a.h=0,a.i&&Kv(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=vi.prototype,t.add=function(a,h){zs(this),this.i=null,a=Ir(this,a);let p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function Kh(a,h){zs(a),h=Ir(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Qh(a,h){return zs(a),h=Ir(a,h),a.g.has(h)}t.forEach=function(a,h){zs(this),this.g.forEach(function(p,g){p.forEach(function(D){a.call(h,D,g,this)},this)},this)};function Yh(a,h){zs(a);let p=[];if(typeof h=="string")Qh(a,h)&&(p=p.concat(a.g.get(Ir(a,h))));else for(a=Array.from(a.g.values()),h=0;h<a.length;h++)p=p.concat(a[h]);return p}t.set=function(a,h){return zs(this),this.i=null,a=Ir(this,a),Qh(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=Yh(this,a),a.length>0?String(a[0]):h):h};function Xh(a,h,p){Kh(a,h),p.length>0&&(a.i=null,a.g.set(Ir(a,h),_(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(let g=0;g<h.length;g++){var p=h[g];const D=fi(p);p=Yh(this,p);for(let L=0;L<p.length;L++){let te=D;p[L]!==""&&(te+="="+fi(p[L])),a.push(te)}}return this.i=a.join("&")};function Jh(a){const h=new vi;return h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),h}function Ir(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function e0(a,h){h&&!a.j&&(zs(a),a.i=null,a.g.forEach(function(p,g){const D=g.toLowerCase();g!=D&&(Kh(this,g),Xh(this,D,p))},a)),a.j=h}function t0(a,h){const p=new di;if(o.Image){const g=new Image;g.onload=d(as,p,"TestLoadImage: loaded",!0,h,g),g.onerror=d(as,p,"TestLoadImage: error",!1,h,g),g.onabort=d(as,p,"TestLoadImage: abort",!1,h,g),g.ontimeout=d(as,p,"TestLoadImage: timeout",!1,h,g),o.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else h(!1)}function n0(a,h){const p=new di,g=new AbortController,D=setTimeout(()=>{g.abort(),as(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:g.signal}).then(L=>{clearTimeout(D),L.ok?as(p,"TestPingServer: ok",!0,h):as(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),as(p,"TestPingServer: error",!1,h)})}function as(a,h,p,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(p)}catch{}}function s0(){this.g=new nt}function Ll(a){this.i=a.Sb||null,this.h=a.ab||!1}f(Ll,Rt),Ll.prototype.g=function(){return new xo(this.i,this.h)};function xo(a,h){X.call(this),this.H=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(xo,X),t=xo.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=h,this.readyState=1,Ei(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(h.body=a),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,wi(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ei(this)),this.g&&(this.readyState=3,Ei(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Zh(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Zh(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?wi(this):Ei(this),this.readyState==3&&Zh(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,wi(this))},t.Na=function(a){this.g&&(this.response=a,wi(this))},t.ga=function(){this.g&&wi(this)};function wi(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Ei(a)}t.setRequestHeader=function(a,h){this.A.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function Ei(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(xo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function ed(a){let h="";return de(a,function(p,g){h+=g,h+=":",h+=p,h+=`\r
`}),h}function Fl(a,h,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=ed(p),typeof a=="string"?p!=null&&fi(p):We(a,h,p))}function rt(a){X.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(rt,X);var r0=/^https?$/i,i0=["POST","PUT"];t=rt.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,h,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Oh.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(L){td(this,L);return}if(a=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)p.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const L of g.keys())p.set(L,g.get(L));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(L=>L.toLowerCase()=="content-type"),D=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(i0,h,void 0)>=0)||g||D||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,te]of p)this.g.setRequestHeader(L,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(L){td(this,L)}};function td(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.o=5,nd(a),ko(a)}function nd(a){a.A||(a.A=!0,Y(a,"complete"),Y(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,Y(this,"complete"),Y(this,"abort"),ko(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ko(this,!0)),rt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?sd(this):this.Xa())},t.Xa=function(){sd(this)};function sd(a){if(a.h&&typeof i<"u"){if(a.v&&ls(a)==4)setTimeout(a.Ca.bind(a),0);else if(Y(a,"readystatechange"),ls(a)==4){a.h=!1;try{const L=a.ca();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var g;if(g=L===0){let te=String(a.D).match(Gh)[1]||null;!te&&o.self&&o.self.location&&(te=o.self.location.protocol.slice(0,-1)),g=!r0.test(te?te.toLowerCase():"")}p=g}if(p)Y(a,"complete"),Y(a,"success");else{a.o=6;try{var D=ls(a)>2?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.ca()+"]",nd(a)}}finally{ko(a)}}}}function ko(a,h){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const p=a.g;a.g=null,h||Y(a,"ready");try{p.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ls(a){return a.g?a.g.readyState:0}t.ca=function(){try{return ls(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),tt(h)}};function rd(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function o0(a){const h={};a=(a.g&&ls(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(T(a[g]))continue;var p=qv(a[g]);const D=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const L=h[D]||[];h[D]=L,L.push(p)}K(h,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ti(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function id(a){this.za=0,this.i=[],this.j=new di,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ti("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ti("baseRetryDelayMs",5e3,a),this.Za=Ti("retryDelaySeedMs",1e4,a),this.Ta=Ti("forwardChannelMaxRetries",2,a),this.va=Ti("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Bh(a&&a.concurrentRequestLimit),this.Ba=new s0,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=id.prototype,t.ka=8,t.I=1,t.connect=function(a,h,p,g){Mt(0),this.W=a,this.H=h||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.J=pd(this,null,this.W),No(this)};function Ul(a){if(od(a),a.I==3){var h=a.V++,p=yn(a.J);if(We(p,"SID",a.M),We(p,"RID",h),We(p,"TYPE","terminate"),Ii(a,p),h=new is(a,a.j,h),h.M=2,h.A=Po(yn(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!p&&o.Image&&(new Image().src=h.A,p=!0),p||(h.g=md(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Co(h)}fd(a)}function Do(a){a.g&&(Bl(a),a.g.cancel(),a.g=null)}function od(a){Do(a),a.v&&(o.clearTimeout(a.v),a.v=null),Vo(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function No(a){if(!jh(a.h)&&!a.m){a.m=!0;var h=a.Ea;U||y(),F||(U(),F=!0),E.add(h,a),a.D=0}}function a0(a,h){return Hh(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=h.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=hi(u(a.Ea,a,h),dd(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const D=new is(this,this.j,a);let L=this.o;if(this.U&&(L?(L=M(L),Me(L,this.U)):L=this.U),this.u!==null||this.R||(D.J=L,L=null),this.S)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,h>4096){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=ld(this,D,h),p=yn(this.J),We(p,"RID",a),We(p,"CVER",22),this.G&&We(p,"X-HTTP-Session-Id",this.G),Ii(this,p),L&&(this.R?h="headers="+fi(ed(L))+"&"+h:this.u&&Fl(p,this.u,L)),Ol(this.h,D),this.Ra&&We(p,"TYPE","init"),this.S?(We(p,"$req",h),We(p,"SID","null"),D.U=!0,kl(D,p,null)):kl(D,p,h),this.I=2}}else this.I==3&&(a?ad(this,a):this.i.length==0||jh(this.h)||ad(this))};function ad(a,h){var p;h?p=h.l:p=a.V++;const g=yn(a.J);We(g,"SID",a.M),We(g,"RID",p),We(g,"AID",a.K),Ii(a,g),a.u&&a.o&&Fl(g,a.u,a.o),p=new is(a,a.j,p,a.D+1),a.u===null&&(p.J=a.o),h&&(a.i=h.G.concat(a.i)),h=ld(a,p,1e3),p.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Ol(a.h,p),kl(p,g,h)}function Ii(a,h){a.H&&de(a.H,function(p,g){We(h,g,p)}),a.l&&de({},function(p,g){We(h,g,p)})}function ld(a,h,p){p=Math.min(a.i.length,p);const g=a.l?u(a.l.Ka,a.l,a):null;e:{var D=a.i;let be=-1;for(;;){const pt=["count="+p];be==-1?p>0?(be=D[0].g,pt.push("ofs="+be)):be=0:pt.push("ofs="+be);let $e=!0;for(let yt=0;yt<p;yt++){var L=D[yt].g;const vn=D[yt].map;if(L-=be,L<0)be=Math.max(0,D[yt].g-100),$e=!1;else try{L="req"+L+"_"||"";try{var te=vn instanceof Map?vn:Object.entries(vn);for(const[Ws,cs]of te){let us=cs;l(cs)&&(us=Re(cs)),pt.push(L+Ws+"="+encodeURIComponent(us))}}catch(Ws){throw pt.push(L+"type="+encodeURIComponent("_badmap")),Ws}}catch{g&&g(vn)}}if($e){te=pt.join("&");break e}}te=void 0}return a=a.i.splice(0,p),h.G=a,te}function cd(a){if(!a.g&&!a.v){a.Y=1;var h=a.Da;U||y(),F||(U(),F=!0),E.add(h,a),a.A=0}}function $l(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=hi(u(a.Da,a),dd(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,ud(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=hi(u(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Mt(10),Do(this),ud(this))};function Bl(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function ud(a){a.g=new is(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var h=yn(a.na);We(h,"RID","rpc"),We(h,"SID",a.M),We(h,"AID",a.K),We(h,"CI",a.F?"0":"1"),!a.F&&a.ia&&We(h,"TO",a.ia),We(h,"TYPE","xmlhttp"),Ii(a,h),a.u&&a.o&&Fl(h,a.u,a.o),a.O&&(a.g.H=a.O);var p=a.g;a=a.ba,p.M=1,p.A=Po(yn(h)),p.u=null,p.R=!0,Fh(p,a)}t.Va=function(){this.C!=null&&(this.C=null,Do(this),$l(this),Mt(19))};function Vo(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function hd(a,h){var p=null;if(a.g==h){Vo(a),Bl(a),a.g=null;var g=2}else if(Vl(a.h,h))p=h.G,qh(a.h,h),g=1;else return;if(a.I!=0){if(h.o)if(g==1){p=h.u?h.u.length:0,h=Date.now()-h.F;var D=a.D;g=Mn(),Y(g,new Nh(g,p)),No(a)}else cd(a);else if(D=h.m,D==3||D==0&&h.X>0||!(g==1&&a0(a,h)||g==2&&$l(a)))switch(p&&p.length>0&&(h=a.h,h.i=h.i.concat(p)),D){case 1:Gs(a,5);break;case 4:Gs(a,10);break;case 3:Gs(a,6);break;default:Gs(a,2)}}}function dd(a,h){let p=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(p*=2),p*h}function Gs(a,h){if(a.j.info("Error code "+h),h==2){var p=u(a.bb,a),g=a.Ua;const D=!g;g=new os(g||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||mi(g,"https"),Po(g),D?t0(g.toString(),p):n0(g.toString(),p)}else Mt(2);a.I=0,a.l&&a.l.pa(h),fd(a),od(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function fd(a){if(a.I=0,a.ja=[],a.l){const h=zh(a.h);(h.length!=0||a.i.length!=0)&&(k(a.ja,h),k(a.ja,a.i),a.h.i.length=0,_(a.i),a.i.length=0),a.l.oa()}}function pd(a,h,p){var g=p instanceof os?yn(p):new os(p);if(g.g!="")h&&(g.g=h+"."+g.g),gi(g,g.u);else{var D=o.location;g=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;const L=new os(null);g&&mi(L,g),h&&(L.g=h),D&&gi(L,D),p&&(L.h=p),g=L}return p=a.G,h=a.wa,p&&h&&We(g,p,h),We(g,"VER",a.ka),Ii(a,g),g}function md(a,h,p){if(h&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Aa&&!a.ma?new rt(new Ll({ab:p})):new rt(a.ma),h.Fa(a.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function gd(){}t=gd.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Oo(){}Oo.prototype.g=function(a,h){return new Wt(a,h)};function Wt(a,h){X.call(this),this.g=new id(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(a?a["X-WebChannel-Client-Profile"]=h.sa:a={"X-WebChannel-Client-Profile":h.sa}),this.g.U=a,(a=h&&h.Qb)&&!T(a)&&(this.g.u=a),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!T(h)&&(this.g.G=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new br(this)}f(Wt,X),Wt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Wt.prototype.close=function(){Ul(this.g)},Wt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.v&&(p={},p.__data__=Re(a),a=p);h.i.push(new Wv(h.Ya++,a)),h.I==3&&No(h)},Wt.prototype.N=function(){this.g.l=null,delete this.j,Ul(this.g),delete this.g,Wt.Z.N.call(this)};function _d(a){js.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}f(_d,js);function yd(){st.call(this),this.status=1}f(yd,st);function br(a){this.g=a}f(br,gd),br.prototype.ra=function(){Y(this.g,"a")},br.prototype.qa=function(a){Y(this.g,new _d(a))},br.prototype.pa=function(a){Y(this.g,new yd)},br.prototype.oa=function(){Y(this.g,"b")},Oo.prototype.createWebChannel=Oo.prototype.g,Wt.prototype.send=Wt.prototype.o,Wt.prototype.open=Wt.prototype.m,Wt.prototype.close=Wt.prototype.close,iy=function(){return new Oo},ry=function(){return Mn()},sy=Ge,Wc={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},So.NO_ERROR=0,So.TIMEOUT=8,So.HTTP_ERROR=6,ra=So,Vh.COMPLETE="complete",ny=Vh,Bt.EventType=Gt,Gt.OPEN="a",Gt.CLOSE="b",Gt.ERROR="c",Gt.MESSAGE="d",X.prototype.listen=X.prototype.J,Pi=Bt,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,ty=rt}).apply(typeof jo<"u"?jo:typeof self<"u"?self:typeof window<"u"?window:{});const ip="@firebase/firestore",op="4.9.2";class Ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");let ii="12.3.0";const dr=new il("@firebase/firestore");function Pr(){return dr.logLevel}function le(t,...e){if(dr.logLevel<=Ce.DEBUG){const n=e.map(Ju);dr.debug(`Firestore (${ii}): ${t}`,...n)}}function es(t,...e){if(dr.logLevel<=Ce.ERROR){const n=e.map(Ju);dr.error(`Firestore (${ii}): ${t}`,...n)}}function Jr(t,...e){if(dr.logLevel<=Ce.WARN){const n=e.map(Ju);dr.warn(`Firestore (${ii}): ${t}`,...n)}}function Ju(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function me(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,oy(t,s,n)}function oy(t,e,n){let s=`FIRESTORE (${ii}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw es(s),new Error(s)}function Ue(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||oy(e,r,s)}function Te(t,e){return t}const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends on{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Rs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class ay{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ct.UNAUTHENTICATED))}shutdown(){}}class JR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ZR{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ue(this.o===void 0,42304);let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new Rs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Rs,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},l=c=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Rs)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ue(typeof s.accessToken=="string",31837,{l:s}),new ay(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string",2055,{h:e}),new Ct(e)}}class eS{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tS{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new eS(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ap{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nS{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,en(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ue(this.o===void 0,3512);const s=i=>{i.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,le("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ap(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ue(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ap(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function sS(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}class Zu{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=sS(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Pe(t,e){return t<e?-1:t>e?1:0}function Kc(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return mc(r)===mc(i)?Pe(r,i):mc(r)?1:-1}return Pe(t.length,e.length)}const rS=55296,iS=57343;function mc(t){const e=t.charCodeAt(0);return e>=rS&&e<=iS}function Zr(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}const lp="__name__";class Tn{constructor(e,n,s){n===void 0?n=0:n>e.length&&me(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&me(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Tn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Tn?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=Tn.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Pe(e.length,n.length)}static compareSegments(e,n){const s=Tn.isNumericId(e),r=Tn.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?Tn.extractNumericId(e).compare(Tn.extractNumericId(n)):Kc(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return As.fromString(e.substring(4,e.length-2))}}class He extends Tn{construct(e,n,s){return new He(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new oe(z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new He(n)}static emptyPath(){return new He([])}}const oS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class It extends Tn{construct(e,n,s){return new It(e,n,s)}static isValidIdentifier(e){return oS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),It.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lp}static keyField(){return new It([lp])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new oe(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new oe(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new oe(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(s+=l,r++):(i(),r++)}if(i(),o)throw new oe(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new It(n)}static emptyPath(){return new It([])}}class he{constructor(e){this.path=e}static fromPath(e){return new he(He.fromString(e))}static fromName(e){return new he(He.fromString(e).popFirst(5))}static empty(){return new he(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new He(e.slice()))}}function ly(t,e,n){if(!n)throw new oe(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function aS(t,e,n,s){if(e===!0&&s===!0)throw new oe(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function cp(t){if(!he.isDocumentKey(t))throw new oe(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function up(t){if(he.isDocumentKey(t))throw new oe(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function cy(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function dl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":me(12329,{type:typeof t})}function fr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new oe(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dl(t);throw new oe(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function dt(t,e){const n={typeString:t};return e&&(n.value=e),n}function go(t,e){if(!cy(t))throw new oe(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new oe(z.INVALID_ARGUMENT,n);return!0}const hp=-62135596800,dp=1e6;class Qe{static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*dp);return new Qe(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new oe(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new oe(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<hp)throw new oe(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/dp}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(go(e,Qe._jsonSchema))return new Qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-hp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qe._jsonSchemaVersion="firestore/timestamp/1.0",Qe._jsonSchema={type:dt("string",Qe._jsonSchemaVersion),seconds:dt("number"),nanoseconds:dt("number")};class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new Qe(0,0))}static max(){return new we(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const no=-1;function lS(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=we.fromTimestamp(s===1e9?new Qe(n+1,0):new Qe(n,s));return new Ds(r,he.empty(),e)}function cS(t){return new Ds(t.readTime,t.key,no)}class Ds{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Ds(we.min(),he.empty(),no)}static max(){return new Ds(we.max(),he.empty(),no)}}function uS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(t.documentKey,e.documentKey),n!==0?n:Pe(t.largestBatchId,e.largestBatchId))}const hS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function oi(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==hS)throw t;le("LocalStore","Unexpectedly lost primary lease")}class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,s)=>{n(e)})}static reject(e){return new G((n,s)=>{s(e)})}static waitFor(e){return new G((n,s)=>{let r=0,i=0,o=!1;e.forEach(l=>{++r,l.next(()=>{++i,o&&i===r&&n()},c=>s(c))}),o=!0,i===r&&n()})}static or(e){let n=G.resolve(!1);for(const s of e)n=n.next(r=>r?G.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new G((s,r)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(d=>{o[u]=d,++l,l===i&&s(o)},d=>r(d))}})}static doWhile(e,n){return new G((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function fS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ai(t){return t.name==="IndexedDbTransactionError"}class fl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}fl.ce=-1;const eh=-1;function pl(t){return t==null}function Pa(t){return t===0&&1/t==-1/0}function pS(t){return typeof t=="number"&&Number.isInteger(t)&&!Pa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const uy="";function mS(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=fp(e)),e=gS(t.get(n),e);return fp(e)}function gS(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case uy:n+="";break;default:n+=i}}return n}function fp(t){return t+uy+""}function pp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $s(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function hy(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class et{constructor(e,n){this.comparator=e,this.root=n||Tt.EMPTY}insert(e,n){return new et(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tt.BLACK,null,null))}remove(e){return new et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ho(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ho(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ho(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ho(this.root,e,this.comparator,!0)}}class Ho{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tt{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??Tt.RED,this.left=r??Tt.EMPTY,this.right=i??Tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Tt(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Tt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}}Tt.EMPTY=null,Tt.RED=!0,Tt.BLACK=!1;Tt.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new Tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _t{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new mp(this.data.getIterator())}getIteratorFrom(e){return new mp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new _t(this.comparator);return n.data=e,n}}class mp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Yt{constructor(e){this.fields=e,e.sort(It.comparator)}static empty(){return new Yt([])}unionWith(e){let n=new _t(It.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Yt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zr(this.fields,e.fields,(n,s)=>n.isEqual(s))}}class dy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class At{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new dy("Invalid base64 string: "+i):i}}(e);return new At(n)}static fromUint8Array(e){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new At(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}At.EMPTY_BYTE_STRING=new At("");const _S=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ns(t){if(Ue(!!t,39018),typeof t=="string"){let e=0;const n=_S.exec(t);if(Ue(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:lt(t.seconds),nanos:lt(t.nanos)}}function lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vs(t){return typeof t=="string"?At.fromBase64String(t):At.fromUint8Array(t)}const fy="server_timestamp",py="__type__",my="__previous_value__",gy="__local_write_time__";function th(t){return(t?.mapValue?.fields||{})[py]?.stringValue===fy}function ml(t){const e=t.mapValue.fields[my];return th(e)?ml(e):e}function so(t){const e=Ns(t.mapValue.fields[gy].timestampValue);return new Qe(e.seconds,e.nanos)}class yS{constructor(e,n,s,r,i,o,l,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const xa="(default)";class ro{constructor(e,n){this.projectId=e,this.database=n||xa}static empty(){return new ro("","")}get isDefaultDatabase(){return this.database===xa}isEqual(e){return e instanceof ro&&e.projectId===this.projectId&&e.database===this.database}}const _y="__type__",vS="__max__",qo={mapValue:{}},yy="__vector__",ka="value";function Os(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?th(t)?4:ES(t)?9007199254740991:wS(t)?10:11:me(28295,{value:t})}function Nn(t,e){if(t===e)return!0;const n=Os(t);if(n!==Os(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return so(t).isEqual(so(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Ns(r.timestampValue),l=Ns(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Vs(r.bytesValue).isEqual(Vs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return lt(r.geoPointValue.latitude)===lt(i.geoPointValue.latitude)&&lt(r.geoPointValue.longitude)===lt(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return lt(r.integerValue)===lt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=lt(r.doubleValue),l=lt(i.doubleValue);return o===l?Pa(o)===Pa(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Zr(t.arrayValue.values||[],e.arrayValue.values||[],Nn);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(pp(o)!==pp(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Nn(o[c],l[c])))return!1;return!0}(t,e);default:return me(52216,{left:t})}}function io(t,e){return(t.values||[]).find(n=>Nn(n,e))!==void 0}function ei(t,e){if(t===e)return 0;const n=Os(t),s=Os(e);if(n!==s)return Pe(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=lt(i.integerValue||i.doubleValue),c=lt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return gp(t.timestampValue,e.timestampValue);case 4:return gp(so(t),so(e));case 5:return Kc(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Vs(i),c=Vs(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=Pe(l[u],c[u]);if(d!==0)return d}return Pe(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Pe(lt(i.latitude),lt(o.latitude));return l!==0?l:Pe(lt(i.longitude),lt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return _p(t.arrayValue,e.arrayValue);case 10:return function(i,o){const l=i.fields||{},c=o.fields||{},u=l[ka]?.arrayValue,d=c[ka]?.arrayValue,f=Pe(u?.values?.length||0,d?.values?.length||0);return f!==0?f:_p(u,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===qo.mapValue&&o===qo.mapValue)return 0;if(i===qo.mapValue)return 1;if(o===qo.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const m=Kc(c[f],d[f]);if(m!==0)return m;const _=ei(l[c[f]],u[d[f]]);if(_!==0)return _}return Pe(c.length,d.length)}(t.mapValue,e.mapValue);default:throw me(23264,{he:n})}}function gp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Pe(t,e);const n=Ns(t),s=Ns(e),r=Pe(n.seconds,s.seconds);return r!==0?r:Pe(n.nanos,s.nanos)}function _p(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=ei(n[r],s[r]);if(i)return i}return Pe(n.length,s.length)}function ti(t){return Qc(t)}function Qc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=Ns(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Vs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return he.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=Qc(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${Qc(n.fields[o])}`;return r+"}"}(t.mapValue):me(61005,{value:t})}function ia(t){switch(Os(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ml(t);return e?16+ia(e):16;case 5:return 2*t.stringValue.length;case 6:return Vs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+ia(i),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return $s(s.fields,(i,o)=>{r+=i.length+ia(o)}),r}(t.mapValue);default:throw me(13486,{value:t})}}function yp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Yc(t){return!!t&&"integerValue"in t}function nh(t){return!!t&&"arrayValue"in t}function vp(t){return!!t&&"nullValue"in t}function wp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function oa(t){return!!t&&"mapValue"in t}function wS(t){return(t?.mapValue?.fields||{})[_y]?.stringValue===yy}function Bi(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return $s(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Bi(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bi(t.arrayValue.values[n]);return e}return{...t}}function ES(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===vS}class qt{constructor(e){this.value=e}static empty(){return new qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!oa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bi(n)}setAll(e){let n=It.emptyPath(),s={},r=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=l.popLast()}o?s[l.lastSegment()]=Bi(o):r.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());oa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Nn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];oa(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){$s(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new qt(Bi(this.value))}}function vy(t){const e=[];return $s(t.fields,(n,s)=>{const r=new It([n]);if(oa(s)){const i=vy(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new Yt(e)}class xt{constructor(e,n,s,r,i,o,l){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new xt(e,0,we.min(),we.min(),we.min(),qt.empty(),0)}static newFoundDocument(e,n,s,r){return new xt(e,1,n,we.min(),s,r,0)}static newNoDocument(e,n){return new xt(e,2,n,we.min(),we.min(),qt.empty(),0)}static newUnknownDocument(e,n){return new xt(e,3,n,we.min(),we.min(),qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Da{constructor(e,n){this.position=e,this.inclusive=n}}function Ep(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=he.comparator(he.fromName(o.referenceValue),n.key):s=ei(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function Tp(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Nn(t.position[n],e.position[n]))return!1;return!0}class Na{constructor(e,n="asc"){this.field=e,this.dir=n}}function TS(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class wy{}class ht extends wy{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new bS(e,n,s):n==="array-contains"?new SS(e,s):n==="in"?new CS(e,s):n==="not-in"?new PS(e,s):n==="array-contains-any"?new xS(e,s):new ht(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new AS(e,s):new RS(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ei(n,this.value)):n!==null&&Os(this.value)===Os(n)&&this.matchesComparison(ei(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _n extends wy{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new _n(e,n)}matches(e){return Ey(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ey(t){return t.op==="and"}function Ty(t){return IS(t)&&Ey(t)}function IS(t){for(const e of t.filters)if(e instanceof _n)return!1;return!0}function Xc(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+ti(t.value);if(Ty(t))return t.filters.map(e=>Xc(e)).join(",");{const e=t.filters.map(n=>Xc(n)).join(",");return`${t.op}(${e})`}}function Iy(t,e){return t instanceof ht?function(s,r){return r instanceof ht&&s.op===r.op&&s.field.isEqual(r.field)&&Nn(s.value,r.value)}(t,e):t instanceof _n?function(s,r){return r instanceof _n&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,l)=>i&&Iy(o,r.filters[l]),!0):!1}(t,e):void me(19439)}function by(t){return t instanceof ht?function(n){return`${n.field.canonicalString()} ${n.op} ${ti(n.value)}`}(t):t instanceof _n?function(n){return n.op.toString()+" {"+n.getFilters().map(by).join(" ,")+"}"}(t):"Filter"}class bS extends ht{constructor(e,n,s){super(e,n,s),this.key=he.fromName(s.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class AS extends ht{constructor(e,n){super(e,"in",n),this.keys=Ay("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class RS extends ht{constructor(e,n){super(e,"not-in",n),this.keys=Ay("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Ay(t,e){return(e.arrayValue?.values||[]).map(n=>he.fromName(n.referenceValue))}class SS extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return nh(n)&&io(n.arrayValue,this.value)}}class CS extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&io(this.value.arrayValue,n)}}class PS extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(io(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!io(this.value.arrayValue,n)}}class xS extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!nh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>io(this.value.arrayValue,s))}}class kS{constructor(e,n=null,s=[],r=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function Ip(t,e=null,n=[],s=[],r=null,i=null,o=null){return new kS(t,e,n,s,r,i,o)}function sh(t){const e=Te(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Xc(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),pl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>ti(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>ti(s)).join(",")),e.Te=n}return e.Te}function rh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!TS(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Iy(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Tp(t.startAt,e.startAt)&&Tp(t.endAt,e.endAt)}function Jc(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class _o{constructor(e,n=null,s=[],r=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function DS(t,e,n,s,r,i,o,l){return new _o(t,e,n,s,r,i,o,l)}function Ry(t){return new _o(t)}function bp(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Sy(t){return t.collectionGroup!==null}function ji(t){const e=Te(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new _t(It.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Na(i,s))}),n.has(It.keyField().canonicalString())||e.Ie.push(new Na(It.keyField(),s))}return e.Ie}function Cn(t){const e=Te(t);return e.Ee||(e.Ee=NS(e,ji(t))),e.Ee}function NS(t,e){if(t.limitType==="F")return Ip(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new Na(r.field,i)});const n=t.endAt?new Da(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Da(t.startAt.position,t.startAt.inclusive):null;return Ip(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Zc(t,e){const n=t.filters.concat([e]);return new _o(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function eu(t,e,n){return new _o(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function gl(t,e){return rh(Cn(t),Cn(e))&&t.limitType===e.limitType}function Cy(t){return`${sh(Cn(t))}|lt:${t.limitType}`}function xr(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>by(r)).join(", ")}]`),pl(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>ti(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>ti(r)).join(",")),`Target(${s})`}(Cn(t))}; limitType=${t.limitType})`}function _l(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):he.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of ji(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(o,l,c){const u=Ep(o,l,c);return o.inclusive?u<=0:u<0}(s.startAt,ji(s),r)||s.endAt&&!function(o,l,c){const u=Ep(o,l,c);return o.inclusive?u>=0:u>0}(s.endAt,ji(s),r))}(t,e)}function VS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Py(t){return(e,n)=>{let s=!1;for(const r of ji(t)){const i=OS(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function OS(t,e,n){const s=t.field.isKeyField()?he.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?ei(c,u):me(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return me(19790,{direction:t.dir})}}class vr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){$s(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return hy(this.inner)}size(){return this.innerSize}}const MS=new et(he.comparator);function ts(){return MS}const xy=new et(he.comparator);function xi(...t){let e=xy;for(const n of t)e=e.insert(n.key,n);return e}function ky(t){let e=xy;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function rr(){return Hi()}function Dy(){return Hi()}function Hi(){return new vr(t=>t.toString(),(t,e)=>t.isEqual(e))}const LS=new et(he.comparator),FS=new _t(he.comparator);function xe(...t){let e=FS;for(const n of t)e=e.add(n);return e}const US=new _t(Pe);function $S(){return US}function ih(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pa(e)?"-0":e}}function Ny(t){return{integerValue:""+t}}function BS(t,e){return pS(e)?Ny(e):ih(t,e)}class yl{constructor(){this._=void 0}}function jS(t,e,n){return t instanceof Va?function(r,i){const o={fields:{[py]:{stringValue:fy},[gy]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&th(i)&&(i=ml(i)),i&&(o.fields[my]=i),{mapValue:o}}(n,e):t instanceof oo?Oy(t,e):t instanceof ao?My(t,e):function(r,i){const o=Vy(r,i),l=Ap(o)+Ap(r.Ae);return Yc(o)&&Yc(r.Ae)?Ny(l):ih(r.serializer,l)}(t,e)}function HS(t,e,n){return t instanceof oo?Oy(t,e):t instanceof ao?My(t,e):n}function Vy(t,e){return t instanceof Oa?function(s){return Yc(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class Va extends yl{}class oo extends yl{constructor(e){super(),this.elements=e}}function Oy(t,e){const n=Ly(e);for(const s of t.elements)n.some(r=>Nn(r,s))||n.push(s);return{arrayValue:{values:n}}}class ao extends yl{constructor(e){super(),this.elements=e}}function My(t,e){let n=Ly(e);for(const s of t.elements)n=n.filter(r=>!Nn(r,s));return{arrayValue:{values:n}}}class Oa extends yl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Ap(t){return lt(t.integerValue||t.doubleValue)}function Ly(t){return nh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function qS(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof oo&&r instanceof oo||s instanceof ao&&r instanceof ao?Zr(s.elements,r.elements,Nn):s instanceof Oa&&r instanceof Oa?Nn(s.Ae,r.Ae):s instanceof Va&&r instanceof Va}(t.transform,e.transform)}class zS{constructor(e,n){this.version=e,this.transformResults=n}}class dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new dn}static exists(e){return new dn(void 0,e)}static updateTime(e){return new dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function aa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class vl{}function Fy(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new oh(t.key,dn.none()):new yo(t.key,t.data,dn.none());{const n=t.data,s=qt.empty();let r=new _t(It.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Bs(t.key,s,new Yt(r.toArray()),dn.none())}}function GS(t,e,n){t instanceof yo?function(r,i,o){const l=r.value.clone(),c=Sp(r.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Bs?function(r,i,o){if(!aa(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Sp(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Uy(r)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function qi(t,e,n,s){return t instanceof yo?function(i,o,l,c){if(!aa(i.precondition,o))return l;const u=i.value.clone(),d=Cp(i.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,s):t instanceof Bs?function(i,o,l,c){if(!aa(i.precondition,o))return l;const u=Cp(i.fieldTransforms,c,o),d=o.data;return d.setAll(Uy(i)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,s):function(i,o,l){return aa(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function WS(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=Vy(s.transform,r||null);i!=null&&(n===null&&(n=qt.empty()),n.set(s.field,i))}return n||null}function Rp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Zr(s,r,(i,o)=>qS(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class yo extends vl{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Bs extends vl{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Uy(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function Sp(t,e,n){const s=new Map;Ue(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,l=e.data.field(i.field);s.set(i.field,HS(o,l,n[r]))}return s}function Cp(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,jS(i,o,e))}return s}class oh extends vl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KS extends vl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class QS{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&GS(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=qi(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=qi(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Dy();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(r.key)?null:l;const c=Fy(o,l);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(we.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),xe())}isEqual(e){return this.batchId===e.batchId&&Zr(this.mutations,e.mutations,(n,s)=>Rp(n,s))&&Zr(this.baseMutations,e.baseMutations,(n,s)=>Rp(n,s))}}class ah{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){Ue(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=function(){return LS}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new ah(e,n,s,r)}}class YS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class XS{constructor(e,n){this.count=e,this.unchangedNames=n}}var ut,De;function JS(t){switch(t){case z.OK:return me(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return me(15467,{code:t})}}function $y(t){if(t===void 0)return es("GRPC error has no .code"),z.UNKNOWN;switch(t){case ut.OK:return z.OK;case ut.CANCELLED:return z.CANCELLED;case ut.UNKNOWN:return z.UNKNOWN;case ut.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case ut.INTERNAL:return z.INTERNAL;case ut.UNAVAILABLE:return z.UNAVAILABLE;case ut.UNAUTHENTICATED:return z.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case ut.NOT_FOUND:return z.NOT_FOUND;case ut.ALREADY_EXISTS:return z.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return z.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case ut.ABORTED:return z.ABORTED;case ut.OUT_OF_RANGE:return z.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return z.UNIMPLEMENTED;case ut.DATA_LOSS:return z.DATA_LOSS;default:return me(39323,{code:t})}}(De=ut||(ut={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";function ZS(){return new TextEncoder}const eC=new As([4294967295,4294967295],0);function Pp(t){const e=ZS().encode(t),n=new ey;return n.update(e),new Uint8Array(n.digest())}function xp(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new As([n,s],0),new As([r,i],0)]}class lh{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new ki(`Invalid padding: ${n}`);if(s<0)throw new ki(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ki(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new ki(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=As.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(As.fromNumber(s)));return r.compare(eC)===1&&(r=new As([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Pp(e),[s,r]=xp(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new lh(i,r,n);return s.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=Pp(e),[s,r]=xp(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class ki extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class wl{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,vo.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new wl(we.min(),r,new et(Pe),ts(),xe())}}class vo{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new vo(s,n,xe(),xe(),xe())}}class la{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class By{constructor(e,n){this.targetId=e,this.Ce=n}}class jy{constructor(e,n,s=At.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class kp{constructor(){this.ve=0,this.Fe=Dp(),this.Me=At.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=xe(),n=xe(),s=xe();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:me(38017,{changeType:i})}}),new vo(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Dp()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ue(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class tC{constructor(e){this.Ge=e,this.ze=new Map,this.je=ts(),this.Je=zo(),this.He=zo(),this.Ye=new et(Pe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(Jc(i))if(s===0){const o=new he(i.path);this.et(n,o,xt.newNoDocument(o,we.min()))}else Ue(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,l;try{o=Vs(s).toUint8Array()}catch(c){if(c instanceof dy)return Jr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new lh(o,r,i)}catch(c){return Jr(c instanceof ki?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Jc(l.target)){const c=new he(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,xt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let s=xe();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const r=new wl(e,n,this.Ye,this.je,s);return this.je=ts(),this.Je=zo(),this.He=zo(),this.Ye=new et(Pe),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new kp,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new _t(Pe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new _t(Pe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||le("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new kp),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function zo(){return new et(he.comparator)}function Dp(){return new et(he.comparator)}const nC={asc:"ASCENDING",desc:"DESCENDING"},sC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rC={and:"AND",or:"OR"};class iC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function tu(t,e){return t.useProto3Json||pl(e)?e:{value:e}}function Ma(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Hy(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function oC(t,e){return Ma(t,e.toTimestamp())}function Pn(t){return Ue(!!t,49232),we.fromTimestamp(function(n){const s=Ns(n);return new Qe(s.seconds,s.nanos)}(t))}function ch(t,e){return nu(t,e).canonicalString()}function nu(t,e){const n=function(r){return new He(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function qy(t){const e=He.fromString(t);return Ue(Qy(e),10190,{key:e.toString()}),e}function su(t,e){return ch(t.databaseId,e.path)}function gc(t,e){const n=qy(e);if(n.get(1)!==t.databaseId.projectId)throw new oe(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new oe(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new he(Gy(n))}function zy(t,e){return ch(t.databaseId,e)}function aC(t){const e=qy(t);return e.length===4?He.emptyPath():Gy(e)}function ru(t){return new He(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Gy(t){return Ue(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Np(t,e,n){return{name:su(t,e),fields:n.value.mapValue.fields}}function lC(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:me(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(u,d){return u.useProto3Json?(Ue(d===void 0||typeof d=="string",58123),At.fromBase64String(d||"")):(Ue(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),At.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?z.UNKNOWN:$y(u.code);return new oe(d,u.message||"")}(o);n=new jy(s,r,i,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=gc(t,s.document.name),i=Pn(s.document.updateTime),o=s.document.createTime?Pn(s.document.createTime):we.min(),l=new qt({mapValue:{fields:s.document.fields}}),c=xt.newFoundDocument(r,i,o,l),u=s.targetIds||[],d=s.removedTargetIds||[];n=new la(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=gc(t,s.document),i=s.readTime?Pn(s.readTime):we.min(),o=xt.newNoDocument(r,i),l=s.removedTargetIds||[];n=new la([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=gc(t,s.document),i=s.removedTargetIds||[];n=new la([],i,r,null)}else{if(!("filter"in e))return me(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new XS(r,i),l=s.targetId;n=new By(l,o)}}return n}function cC(t,e){let n;if(e instanceof yo)n={update:Np(t,e.key,e.value)};else if(e instanceof oh)n={delete:su(t,e.key)};else if(e instanceof Bs)n={update:Np(t,e.key,e.data),updateMask:yC(e.fieldMask)};else{if(!(e instanceof KS))return me(16599,{Vt:e.type});n={verify:su(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const l=o.transform;if(l instanceof Va)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof oo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ao)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Oa)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw me(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:oC(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:me(27497)}(t,e.precondition)),n}function uC(t,e){return t&&t.length>0?(Ue(e!==void 0,14353),t.map(n=>function(r,i){let o=r.updateTime?Pn(r.updateTime):Pn(i);return o.isEqual(we.min())&&(o=Pn(i)),new zS(o,r.transformResults||[])}(n,e))):[]}function hC(t,e){return{documents:[zy(t,e.path)]}}function dC(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=zy(t,r);const i=function(u){if(u.length!==0)return Ky(_n.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:kr(m.field),direction:mC(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=tu(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:r}}function fC(t){let e=aC(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Ue(s===1,65062);const d=n.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(f){const m=Wy(f);return m instanceof _n&&Ty(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(k){return new Na(Dr(k.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,pl(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){const m=!!f.before,_=f.values||[];return new Da(_,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const m=!f.before,_=f.values||[];return new Da(_,m)}(n.endAt)),DS(e,r,o,i,l,"F",c,u)}function pC(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Wy(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Dr(n.unaryFilter.field);return ht.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=Dr(n.unaryFilter.field);return ht.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Dr(n.unaryFilter.field);return ht.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Dr(n.unaryFilter.field);return ht.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}}(t):t.fieldFilter!==void 0?function(n){return ht.create(Dr(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return _n.create(n.compositeFilter.filters.map(s=>Wy(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return me(1026)}}(n.compositeFilter.op))}(t):me(30097,{filter:t})}function mC(t){return nC[t]}function gC(t){return sC[t]}function _C(t){return rC[t]}function kr(t){return{fieldPath:t.canonicalString()}}function Dr(t){return It.fromServerFormat(t.fieldPath)}function Ky(t){return t instanceof ht?function(n){if(n.op==="=="){if(wp(n.value))return{unaryFilter:{field:kr(n.field),op:"IS_NAN"}};if(vp(n.value))return{unaryFilter:{field:kr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(wp(n.value))return{unaryFilter:{field:kr(n.field),op:"IS_NOT_NAN"}};if(vp(n.value))return{unaryFilter:{field:kr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kr(n.field),op:gC(n.op),value:n.value}}}(t):t instanceof _n?function(n){const s=n.getFilters().map(r=>Ky(r));return s.length===1?s[0]:{compositeFilter:{op:_C(n.op),filters:s}}}(t):me(54877,{filter:t})}function yC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Qy(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class Es{constructor(e,n,s,r,i=we.min(),o=we.min(),l=At.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class vC{constructor(e){this.yt=e}}function wC(t){const e=fC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?eu(e,e.limit,"L"):e}class EC{constructor(){this.Cn=new TC}addToCollectionParentIndex(e,n){return this.Cn.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(Ds.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(Ds.min())}updateCollectionGroup(e,n,s){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class TC{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new _t(He.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new _t(He.comparator)).toArray()}}const Vp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Yy=41943040;class Ht{static withCacheSize(e){return new Ht(e,Ht.DEFAULT_COLLECTION_PERCENTILE,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Ht.DEFAULT_COLLECTION_PERCENTILE=10,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ht.DEFAULT=new Ht(Yy,Ht.DEFAULT_COLLECTION_PERCENTILE,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ht.DISABLED=new Ht(-1,0,0);class ni{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ni(0)}static cr(){return new ni(-1)}}const Op="LruGarbageCollector",IC=1048576;function Mp([t,e],[n,s]){const r=Pe(t,n);return r===0?Pe(e,s):r}class bC{constructor(e){this.Ir=e,this.buffer=new _t(Mp),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Mp(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class AC{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){le(Op,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ai(n)?le(Op,"Ignoring IndexedDB error during garbage collection: ",n):await oi(n)}await this.Vr(3e5)})}}class RC{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return G.resolve(fl.ce);const s=new bC(n);return this.mr.forEachTarget(e,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(Vp)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vp):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,o=Date.now(),this.nthSequenceNumber(e,r))).next(f=>(s=f,l=Date.now(),this.removeTargets(e,s,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,s))).next(f=>(u=Date.now(),Pr()<=Ce.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${r} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:f})))}}function SC(t,e){return new RC(t,e)}class CC{constructor(){this.changes=new vr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?G.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class PC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class xC{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&qi(s.mutation,r,Yt.empty(),Qe.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,xe()).next(()=>s))}getLocalViewOfDocuments(e,n,s=xe()){const r=rr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=xi();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=rr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,xe()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,s,r){let i=ts();const o=Hi(),l=function(){return Hi()}();return n.forEach((c,u)=>{const d=s.get(u.key);r.has(u.key)&&(d===void 0||d.mutation instanceof Bs)?i=i.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),qi(d.mutation,u,d.mutation.getFieldMask(),Qe.now())):o.set(u.key,Yt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>l.set(u,new PC(d,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const s=Hi();let r=new et((o,l)=>o-l),i=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=s.get(c)||Yt.empty();d=l.applyToLocalView(u,d),s.set(c,d);const f=(r.get(l.batchId)||xe()).add(c);r=r.insert(l.batchId,f)})}).next(()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=Dy();d.forEach(m=>{if(!i.has(m)){const _=Fy(n.get(m),s.get(m));_!==null&&f.set(m,_),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return G.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Sy(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):G.resolve(rr());let l=no,c=i;return o.next(u=>G.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(d)?G.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,xe())).next(d=>({batchId:l,changes:ky(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next(s=>{let r=xi();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=xi();return this.indexManager.getCollectionParents(e,i).next(l=>G.forEach(l,c=>{const u=function(f,m){return new _o(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,r).next(d=>{d.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,xt.newInvalidDocument(d)))});let l=xi();return o.forEach((c,u)=>{const d=i.get(c);d!==void 0&&qi(d.mutation,u,Yt.empty(),Qe.now()),_l(n,u)&&(l=l.insert(c,u))}),l})}}class kC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return G.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Pn(r.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:wC(r.bundledQuery),readTime:Pn(r.readTime)}}(n)),G.resolve()}}class DC{constructor(){this.overlays=new et(he.comparator),this.qr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const s=rr();return G.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),G.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),G.resolve()}getOverlaysForCollection(e,n,s){const r=rr(),i=n.length+1,o=new he(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return G.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new et((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let d=i.get(u.largestBatchId);d===null&&(d=rr(),i=i.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=rr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=r)););return G.resolve(l)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new YS(n,s));let i=this.qr.get(n);i===void 0&&(i=xe(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}class NC{constructor(){this.sessionToken=At.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}class uh{constructor(){this.Qr=new _t(wt.$r),this.Ur=new _t(wt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new wt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new wt(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new he(new He([])),s=new wt(n,e),r=new wt(n,e+1),i=[];return this.Ur.forEachInRange([s,r],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new he(new He([])),s=new wt(n,e),r=new wt(n,e+1);let i=xe();return this.Ur.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new wt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class wt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return he.comparator(e.key,n.key)||Pe(e.Yr,n.Yr)}static Kr(e,n){return Pe(e.Yr,n.Yr)||he.comparator(e.key,n.key)}}class VC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new _t(wt.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new QS(i,n,s,r);this.mutationQueue.push(o);for(const l of r)this.Zr=this.Zr.add(new wt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,n){return G.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return G.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?eh:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new wt(n,0),r=new wt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],o=>{const l=this.Xr(o.Yr);i.push(l)}),G.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new _t(Pe);return n.forEach(r=>{const i=new wt(r,0),o=new wt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{s=s.add(l.Yr)})}),G.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;he.isDocumentKey(i)||(i=i.child(""));const o=new wt(new he(i),0);let l=new _t(Pe);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(l=l.add(c.Yr)),!0)},o),G.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(s=>{const r=this.Xr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Ue(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return G.forEach(n.mutations,r=>{const i=new wt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new wt(n,0),r=this.Zr.firstAfterOrEqual(s);return G.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class OC{constructor(e){this.ri=e,this.docs=function(){return new et(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return G.resolve(s?s.document.mutableCopy():xt.newInvalidDocument(n))}getEntries(e,n){let s=ts();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():xt.newInvalidDocument(r))}),G.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=ts();const o=n.path,l=new he(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||uS(cS(d),s)<=0||(r.has(d.key)||_l(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return G.resolve(i)}getAllFromCollectionGroup(e,n,s,r){me(9500)}ii(e,n){return G.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new MC(this)}getSize(e){return G.resolve(this.size)}}class MC extends CC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)}),G.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class LC{constructor(e){this.persistence=e,this.si=new vr(n=>sh(n),rh),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new uh,this.targetCount=0,this.ai=ni.ur()}forEachTarget(e,n){return this.si.forEach((s,r)=>n(r)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),G.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ni(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Pr(n),G.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),G.waitFor(i).next(()=>r)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return G.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),G.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),G.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return G.resolve(s)}containsKey(e,n){return G.resolve(this._i.containsKey(n))}}class Xy{constructor(e,n){this.ui={},this.overlays={},this.ci=new fl(0),this.li=!1,this.li=!0,this.hi=new NC,this.referenceDelegate=e(this),this.Pi=new LC(this),this.indexManager=new EC,this.remoteDocumentCache=function(r){return new OC(r)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new vC(n),this.Ii=new kC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new DC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new VC(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){le("MemoryPersistence","Starting transaction:",e);const r=new FC(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(e,n){return G.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class FC extends dS{constructor(e){super(),this.currentSequenceNumber=e}}class hh{constructor(e){this.persistence=e,this.Ri=new uh,this.Vi=null}static mi(e){return new hh(e)}get fi(){if(this.Vi)return this.Vi;throw me(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),G.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),G.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,s=>{const r=he.fromPath(s);return this.gi(e,r).next(i=>{i||n.removeEntry(r,we.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return G.or([()=>G.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class La{constructor(e,n){this.persistence=e,this.pi=new vr(s=>mS(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=SC(this,n)}static mi(e,n){return new La(e,n)}Ei(){}di(e){return G.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return G.forEach(this.pi,(s,r)=>this.br(e,s,r).next(i=>i?G.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,o=>this.br(e,o,n).next(l=>{l||(s++,i.removeEntry(o,we.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),G.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ia(e.data.value)),n}br(e,n,s){return G.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return G.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class dh{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=xe(),r=xe();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new dh(e,n.fromCache,s,r)}}class UC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class $C{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return lI()?8:fS(Ot())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new UC;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,s,r){return s.documentReadCount<this.fs?(Pr()<=Ce.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",xr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(Pr()<=Ce.DEBUG&&le("QueryEngine","Query:",xr(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(Pr()<=Ce.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",xr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cn(n))):G.resolve())}ys(e,n){if(bp(n))return G.resolve(null);let s=Cn(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=eu(n,null,"F"),s=Cn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=xe(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,s).next(c=>{const u=this.Ds(n,l);return this.Cs(n,u,o,c.readTime)?this.ys(e,eu(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,s,r){return bp(n)||r.isEqual(we.min())?G.resolve(null):this.ps.getDocuments(e,s).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?G.resolve(null):(Pr()<=Ce.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),xr(n)),this.vs(e,o,n,lS(r,no)).next(l=>l))})}Ds(e,n){let s=new _t(Py(e));return n.forEach((r,i)=>{_l(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return Pr()<=Ce.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",xr(n)),this.ps.getDocumentsMatchingQuery(e,n,Ds.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}const fh="LocalStore",BC=3e8;class jC{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new et(Pe),this.xs=new vr(i=>sh(i),rh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function HC(t,e,n,s){return new jC(t,e,n,s)}async function Jy(t,e){const n=Te(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],l=[];let c=xe();for(const u of r){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of i){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(s,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function qC(t,e){const n=Te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,m=f.keys();let _=G.resolve();return m.forEach(k=>{_=_.next(()=>d.getEntry(c,k)).next(x=>{const N=u.docVersions.get(k);Ue(N!==null,48541),x.version.compareTo(N)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let c=xe();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function Zy(t){const e=Te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function zC(t,e){const n=Te(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];e.targetChanges.forEach((d,f)=>{const m=r.get(f);if(!m)return;l.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,f)));let _=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?_=_.withResumeToken(At.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,s)),r=r.insert(f,_),function(x,N,H){return x.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=BC?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(m,_,d)&&l.push(n.Pi.updateTargetData(i,_))});let c=ts(),u=xe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(GC(i,o,e.documentUpdates).next(d=>{c=d.ks,u=d.qs})),!s.isEqual(we.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));l.push(d)}return G.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ms=r,i))}function GC(t,e,n){let s=xe(),r=xe();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=ts();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(we.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):le(fh,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:r}})}function WC(t,e){const n=Te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=eh),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function KC(t,e){const n=Te(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Pi.getTargetData(s,e).next(i=>i?(r=i,G.resolve(r)):n.Pi.allocateTargetId(s).next(o=>(r=new Es(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function iu(t,e,n){const s=Te(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!ai(o))throw o;le(fh,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function Lp(t,e,n){const s=Te(t);let r=we.min(),i=xe();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const f=Te(c),m=f.xs.get(d);return m!==void 0?G.resolve(f.Ms.get(m)):f.Pi.getTargetData(u,d)}(s,o,Cn(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:we.min(),n?i:xe())).next(l=>(QC(s,VS(e),l),{documents:l,Qs:i})))}function QC(t,e,n){let s=t.Os.get(e)||we.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Os.set(e,s)}class Fp{constructor(){this.activeTargetIds=$S()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YC{constructor(){this.Mo=new Fp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Fp,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class XC{Oo(e){}shutdown(){}}const Up="ConnectivityMonitor";class $p{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){le(Up,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){le(Up,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Go=null;function ou(){return Go===null?Go=function(){return 268435456+Math.round(2147483648*Math.random())}():Go++,"0x"+Go.toString(16)}const _c="RestConnection",JC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ZC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===xa?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=ou(),l=this.zo(e,n.toUriEncodedString());le(_c,`Sending RPC '${e}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,i);const{host:u}=new URL(l),d=gr(u);return this.Jo(e,l,c,s,d).then(f=>(le(_c,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Jr(_c,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",s),f})}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ii}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}zo(e,n){const s=JC[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class eP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const St="WebChannelConnection";class tP extends ZC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=ou();return new Promise((l,c)=>{const u=new ty;u.setWithCredentials(!0),u.listenOnce(ny.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ra.NO_ERROR:const f=u.getResponseJson();le(St,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case ra.TIMEOUT:le(St,`RPC '${e}' ${o} timed out`),c(new oe(z.DEADLINE_EXCEEDED,"Request time out"));break;case ra.HTTP_ERROR:const m=u.getStatus();if(le(St,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const k=_?.error;if(k&&k.status&&k.message){const x=function(H){const V=H.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(V)>=0?V:z.UNKNOWN}(k.status);c(new oe(x,k.message))}else c(new oe(z.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new oe(z.UNAVAILABLE,"Connection failed."));break;default:me(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{le(St,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(r);le(St,`RPC '${e}' ${o} sending request:`,r),u.send(n,"POST",d,s,15)})}T_(e,n,s){const r=ou(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=iy(),l=ry(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const d=i.join("");le(St,`Creating RPC '${e}' stream ${r}: ${d}`,c);const f=o.createWebChannel(d,c);this.I_(f);let m=!1,_=!1;const k=new eP({Yo:N=>{_?le(St,`Not sending because RPC '${e}' stream ${r} is closed:`,N):(m||(le(St,`Opening RPC '${e}' stream ${r} transport.`),f.open(),m=!0),le(St,`RPC '${e}' stream ${r} sending:`,N),f.send(N))},Zo:()=>f.close()}),x=(N,H,V)=>{N.listen(H,C=>{try{V(C)}catch(O){setTimeout(()=>{throw O},0)}})};return x(f,Pi.EventType.OPEN,()=>{_||(le(St,`RPC '${e}' stream ${r} transport opened.`),k.o_())}),x(f,Pi.EventType.CLOSE,()=>{_||(_=!0,le(St,`RPC '${e}' stream ${r} transport closed`),k.a_(),this.E_(f))}),x(f,Pi.EventType.ERROR,N=>{_||(_=!0,Jr(St,`RPC '${e}' stream ${r} transport errored. Name:`,N.name,"Message:",N.message),k.a_(new oe(z.UNAVAILABLE,"The operation could not be completed")))}),x(f,Pi.EventType.MESSAGE,N=>{if(!_){const H=N.data[0];Ue(!!H,16349);const V=H,C=V?.error||V[0]?.error;if(C){le(St,`RPC '${e}' stream ${r} received error:`,C);const O=C.status;let U=function(y){const v=ut[y];if(v!==void 0)return $y(v)}(O),F=C.message;U===void 0&&(U=z.INTERNAL,F="Unknown error status: "+O+" with message "+C.message),_=!0,k.a_(new oe(U,F)),f.close()}else le(St,`RPC '${e}' stream ${r} received:`,H),k.u_(H)}}),x(l,sy.STAT_EVENT,N=>{N.stat===Wc.PROXY?le(St,`RPC '${e}' stream ${r} detected buffering proxy`):N.stat===Wc.NOPROXY&&le(St,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function yc(){return typeof document<"u"?document:null}function El(t){return new iC(t,!0)}class ev{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&le("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Bp="PersistentStream";class tv{constructor(e,n,s,r,i,o,l,c){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ev(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(es(n.toString()),es("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===n&&this.G_(s,r)},s=>{e(()=>{const r=new oe(z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return le(Bp,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(le(Bp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nP extends tv{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=lC(this.serializer,e),s=function(i){if(!("targetChange"in i))return we.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?we.min():o.readTime?Pn(o.readTime):we.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=ru(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Jc(c)?{documents:hC(i,c)}:{query:dC(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Hy(i,o.resumeToken);const u=tu(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(we.min())>0){l.readTime=Ma(i,o.snapshotVersion.toTimestamp());const u=tu(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const s=pC(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=ru(this.serializer),n.removeTarget=e,this.q_(n)}}class sP extends tv{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=uC(e.writeResults,e.commitTime),s=Pn(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=ru(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>cC(this.serializer,s))};this.q_(n)}}class rP{}class iP extends rP{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new oe(z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,nu(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new oe(z.UNKNOWN,i.toString())})}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,nu(n,s),r,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new oe(z.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class oP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(es(n),this.aa=!1):le("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const pr="RemoteStore";class aP{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{wr(this)&&(le(pr,"Restarting streams for network reachability change."),await async function(c){const u=Te(c);u.Ea.add(4),await wo(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Tl(u)}(this))})}),this.Ra=new oP(s,r)}}async function Tl(t){if(wr(t))for(const e of t.da)await e(!0)}async function wo(t){for(const e of t.da)await e(!1)}function nv(t,e){const n=Te(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),_h(n)?gh(n):li(n).O_()&&mh(n,e))}function ph(t,e){const n=Te(t),s=li(n);n.Ia.delete(e),s.O_()&&sv(n,e),n.Ia.size===0&&(s.O_()?s.L_():wr(n)&&n.Ra.set("Unknown"))}function mh(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}li(t).Y_(e)}function sv(t,e){t.Va.Ue(e),li(t).Z_(e)}function gh(t){t.Va=new tC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),li(t).start(),t.Ra.ua()}function _h(t){return wr(t)&&!li(t).x_()&&t.Ia.size>0}function wr(t){return Te(t).Ea.size===0}function rv(t){t.Va=void 0}async function lP(t){t.Ra.set("Online")}async function cP(t){t.Ia.forEach((e,n)=>{mh(t,e)})}async function uP(t,e){rv(t),_h(t)?(t.Ra.ha(e),gh(t)):t.Ra.set("Unknown")}async function hP(t,e,n){if(t.Ra.set("Online"),e instanceof jy&&e.state===2&&e.cause)try{await async function(r,i){const o=i.cause;for(const l of i.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.Ia.delete(l),r.Va.removeTarget(l))}(t,e)}catch(s){le(pr,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Fa(t,s)}else if(e instanceof la?t.Va.Ze(e):e instanceof By?t.Va.st(e):t.Va.tt(e),!n.isEqual(we.min()))try{const s=await Zy(t.localStore);n.compareTo(s)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.Ia.get(u);d&&i.Ia.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=i.Ia.get(c);if(!d)return;i.Ia.set(c,d.withResumeToken(At.EMPTY_BYTE_STRING,d.snapshotVersion)),sv(i,c);const f=new Es(d.target,c,u,d.sequenceNumber);mh(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(s){le(pr,"Failed to raise snapshot:",s),await Fa(t,s)}}async function Fa(t,e,n){if(!ai(e))throw e;t.Ea.add(1),await wo(t),t.Ra.set("Offline"),n||(n=()=>Zy(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{le(pr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Tl(t)})}function iv(t,e){return e().catch(n=>Fa(t,n,e))}async function Il(t){const e=Te(t),n=Ms(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:eh;for(;dP(e);)try{const r=await WC(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,fP(e,r)}catch(r){await Fa(e,r)}ov(e)&&av(e)}function dP(t){return wr(t)&&t.Ta.length<10}function fP(t,e){t.Ta.push(e);const n=Ms(t);n.O_()&&n.X_&&n.ea(e.mutations)}function ov(t){return wr(t)&&!Ms(t).x_()&&t.Ta.length>0}function av(t){Ms(t).start()}async function pP(t){Ms(t).ra()}async function mP(t){const e=Ms(t);for(const n of t.Ta)e.ea(n.mutations)}async function gP(t,e,n){const s=t.Ta.shift(),r=ah.from(s,e,n);await iv(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Il(t)}async function _P(t,e){e&&Ms(t).X_&&await async function(s,r){if(function(o){return JS(o)&&o!==z.ABORTED}(r.code)){const i=s.Ta.shift();Ms(s).B_(),await iv(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Il(s)}}(t,e),ov(t)&&av(t)}async function jp(t,e){const n=Te(t);n.asyncQueue.verifyOperationInProgress(),le(pr,"RemoteStore received new credentials");const s=wr(n);n.Ea.add(3),await wo(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Tl(n)}async function yP(t,e){const n=Te(t);e?(n.Ea.delete(2),await Tl(n)):e||(n.Ea.add(2),await wo(n),n.Ra.set("Unknown"))}function li(t){return t.ma||(t.ma=function(n,s,r){const i=Te(n);return i.sa(),new nP(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:lP.bind(null,t),t_:cP.bind(null,t),r_:uP.bind(null,t),H_:hP.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),_h(t)?gh(t):t.Ra.set("Unknown")):(await t.ma.stop(),rv(t))})),t.ma}function Ms(t){return t.fa||(t.fa=function(n,s,r){const i=Te(n);return i.sa(),new sP(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:pP.bind(null,t),r_:_P.bind(null,t),ta:mP.bind(null,t),na:gP.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Il(t)):(await t.fa.stop(),t.Ta.length>0&&(le(pr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}class yh{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new Rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,l=new yh(e,n,o,r,i);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vh(t,e){if(es("AsyncQueue",`${e}: ${t}`),ai(t))return new oe(z.UNAVAILABLE,`${e}: ${t}`);throw t}class qr{static emptySet(e){return new qr(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||he.comparator(n.key,s.key):(n,s)=>he.comparator(n.key,s.key),this.keyedMap=xi(),this.sortedSet=new et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new qr;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class Hp{constructor(){this.ga=new et(he.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):me(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class si{constructor(e,n,s,r,i,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new si(e,n,qr.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}class vP{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class wP{constructor(){this.queries=qp(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=Te(n),i=r.queries;r.queries=qp(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(s)})})(this,new oe(z.ABORTED,"Firestore shutting down"))}}function qp(){return new vr(t=>Cy(t),gl)}async function EP(t,e){const n=Te(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new vP,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const l=vh(o,`Initialization of query '${xr(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&wh(n)}async function TP(t,e){const n=Te(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function IP(t,e){const n=Te(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(r)&&(s=!0);o.wa=r}}s&&wh(n)}function bP(t,e,n){const s=Te(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function wh(t){t.Ca.forEach(e=>{e.next()})}var au,zp;(zp=au||(au={})).Ma="default",zp.Cache="cache";class AP{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new si(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=si.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==au.Cache}}class lv{constructor(e){this.key=e}}class cv{constructor(e){this.key=e}}class RP{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=xe(),this.mutatedKeys=xe(),this.eu=Py(e),this.tu=new qr(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new Hp,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((d,f)=>{const m=r.get(d),_=_l(this.query,f)?f:null,k=!!m&&this.mutatedKeys.has(m.key),x=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let N=!1;m&&_?m.data.isEqual(_.data)?k!==x&&(s.track({type:3,doc:_}),N=!0):this.su(m,_)||(s.track({type:2,doc:_}),N=!0,(c&&this.eu(_,c)>0||u&&this.eu(_,u)<0)&&(l=!0)):!m&&_?(s.track({type:0,doc:_}),N=!0):m&&!_&&(s.track({type:1,doc:m}),N=!0,(c||u)&&(l=!0)),N&&(_?(o=o.add(_),i=x?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),s.track({type:1,doc:d})}return{tu:o,iu:s,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,f)=>function(_,k){const x=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{Rt:N})}};return x(_)-x(k)}(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(s),r=r??!1;const l=n&&!r?this._u():[],c=this.Xa.size===0&&this.current&&!r?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new si(this.query,e.tu,i,o,e.mutatedKeys,c===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Hp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=xe(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new cv(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new lv(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=xe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return si.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Eh="SyncEngine";class SP{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class CP{constructor(e){this.key=e,this.hu=!1}}class PP{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new vr(l=>Cy(l),gl),this.Iu=new Map,this.Eu=new Set,this.du=new et(he.comparator),this.Au=new Map,this.Ru=new uh,this.Vu={},this.mu=new Map,this.fu=ni.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function xP(t,e,n=!0){const s=mv(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await uv(s,e,n,!0),r}async function kP(t,e){const n=mv(t);await uv(n,e,!0,!1)}async function uv(t,e,n,s){const r=await KC(t.localStore,Cn(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return s&&(l=await DP(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&nv(t.remoteStore,r),l}async function DP(t,e,n,s,r){t.pu=(f,m,_)=>async function(x,N,H,V){let C=N.view.ru(H);C.Cs&&(C=await Lp(x.localStore,N.query,!1).then(({documents:E})=>N.view.ru(E,C)));const O=V&&V.targetChanges.get(N.targetId),U=V&&V.targetMismatches.get(N.targetId)!=null,F=N.view.applyChanges(C,x.isPrimaryClient,O,U);return Wp(x,N.targetId,F.au),F.snapshot}(t,f,m,_);const i=await Lp(t.localStore,e,!0),o=new RP(e,i.Qs),l=o.ru(i.documents),c=vo.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=o.applyChanges(l,t.isPrimaryClient,c);Wp(t,n,u.au);const d=new SP(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function NP(t,e,n){const s=Te(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(o=>!gl(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await iu(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&ph(s.remoteStore,r.targetId),lu(s,r.targetId)}).catch(oi)):(lu(s,r.targetId),await iu(s.localStore,r.targetId,!0))}async function VP(t,e){const n=Te(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),ph(n.remoteStore,s.targetId))}async function OP(t,e,n){const s=jP(t);try{const r=await function(o,l){const c=Te(o),u=Qe.now(),d=l.reduce((_,k)=>_.add(k.key),xe());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let k=ts(),x=xe();return c.Ns.getEntries(_,d).next(N=>{k=N,k.forEach((H,V)=>{V.isValidDocument()||(x=x.add(H))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,k)).next(N=>{f=N;const H=[];for(const V of l){const C=WS(V,f.get(V.key).overlayedDocument);C!=null&&H.push(new Bs(V.key,C,vy(C.value.mapValue),dn.exists(!0)))}return c.mutationQueue.addMutationBatch(_,u,H,l)}).next(N=>{m=N;const H=N.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(_,N.batchId,H)})}).then(()=>({batchId:m.batchId,changes:ky(f)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new et(Pe)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(s,r.batchId,n),await Eo(s,r.changes),await Il(s.remoteStore)}catch(r){const i=vh(r,"Failed to persist write");n.reject(i)}}async function hv(t,e){const n=Te(t);try{const s=await zC(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Au.get(i);o&&(Ue(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?Ue(o.hu,14607):r.removedDocuments.size>0&&(Ue(o.hu,42227),o.hu=!1))}),await Eo(n,s,e)}catch(s){await oi(s)}}function Gp(t,e,n){const s=Te(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&r.push(l.snapshot)}),function(o,l){const c=Te(o);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const m of f.Sa)m.va(l)&&(u=!0)}),u&&wh(c)}(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function MP(t,e,n){const s=Te(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new et(he.comparator);o=o.insert(i,xt.newNoDocument(i,we.min()));const l=xe().add(i),c=new wl(we.min(),new Map,new et(Pe),o,l);await hv(s,c),s.du=s.du.remove(i),s.Au.delete(e),Th(s)}else await iu(s.localStore,e,!1).then(()=>lu(s,e,n)).catch(oi)}async function LP(t,e){const n=Te(t),s=e.batch.batchId;try{const r=await qC(n.localStore,e);fv(n,s,null),dv(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Eo(n,r)}catch(r){await oi(r)}}async function FP(t,e,n){const s=Te(t);try{const r=await function(o,l){const c=Te(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(Ue(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(s.localStore,e);fv(s,e,n),dv(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Eo(s,r)}catch(r){await oi(r)}}function dv(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function fv(t,e,n){const s=Te(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function lu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||pv(t,s)})}function pv(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(ph(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Th(t))}function Wp(t,e,n){for(const s of n)s instanceof lv?(t.Ru.addReference(s.key,e),UP(t,s)):s instanceof cv?(le(Eh,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||pv(t,s.key)):me(19791,{wu:s})}function UP(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(le(Eh,"New document in limbo: "+n),t.Eu.add(s),Th(t))}function Th(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new he(He.fromString(e)),s=t.fu.next();t.Au.set(s,new CP(n)),t.du=t.du.insert(n,s),nv(t.remoteStore,new Es(Cn(Ry(n.path)),s,"TargetPurposeLimboResolution",fl.ce))}}async function Eo(t,e,n){const s=Te(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((l,c)=>{o.push(s.pu(c,e,n).then(u=>{if((u||n)&&s.isPrimaryClient){const d=u?!u.fromCache:n?.targetChanges.get(c.targetId)?.current;s.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(u){r.push(u);const d=dh.As(c.targetId,u);i.push(d)}}))}),await Promise.all(o),s.Pu.H_(r),await async function(c,u){const d=Te(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>G.forEach(u,m=>G.forEach(m.Es,_=>d.persistence.referenceDelegate.addReference(f,m.targetId,_)).next(()=>G.forEach(m.ds,_=>d.persistence.referenceDelegate.removeReference(f,m.targetId,_)))))}catch(f){if(!ai(f))throw f;le(fh,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const _=d.Ms.get(m),k=_.snapshotVersion,x=_.withLastLimboFreeSnapshotVersion(k);d.Ms=d.Ms.insert(m,x)}}}(s.localStore,i))}async function $P(t,e){const n=Te(t);if(!n.currentUser.isEqual(e)){le(Eh,"User change. New user:",e.toKey());const s=await Jy(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new oe(z.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Eo(n,s.Ls)}}function BP(t,e){const n=Te(t),s=n.Au.get(e);if(s&&s.hu)return xe().add(s.key);{let r=xe();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const l=n.Tu.get(o);r=r.unionWith(l.view.nu)}return r}}function mv(t){const e=Te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=hv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MP.bind(null,e),e.Pu.H_=IP.bind(null,e.eventManager),e.Pu.yu=bP.bind(null,e.eventManager),e}function jP(t){const e=Te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=LP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FP.bind(null,e),e}class Ua{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=El(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return HC(this.persistence,new $C,e.initialUser,this.serializer)}Cu(e){return new Xy(hh.mi,this.serializer)}Du(e){return new YC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ua.provider={build:()=>new Ua};class HP extends Ua{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ue(this.persistence.referenceDelegate instanceof La,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new AC(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ht.withCacheSize(this.cacheSizeBytes):Ht.DEFAULT;return new Xy(s=>La.mi(s,n),this.serializer)}}class cu{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Gp(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=$P.bind(null,this.syncEngine),await yP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new wP}()}createDatastore(e){const n=El(e.databaseInfo.databaseId),s=function(i){return new tP(i)}(e.databaseInfo);return function(i,o,l,c){return new iP(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,o,l){return new aP(s,r,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Gp(this.syncEngine,n,0),function(){return $p.v()?new $p:new XC}())}createSyncEngine(e,n){return function(r,i,o,l,c,u,d){const f=new PP(r,i,o,l,c,u);return d&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const s=Te(n);le(pr,"RemoteStore shutting down."),s.Ea.add(5),await wo(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}cu.provider={build:()=>new cu};class qP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):es("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}const Ls="FirestoreClient";class zP{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Ct.UNAUTHENTICATED,this.clientId=Zu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{le(Ls,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(le(Ls,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=vh(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function vc(t,e){t.asyncQueue.verifyOperationInProgress(),le(Ls,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await Jy(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Kp(t,e){t.asyncQueue.verifyOperationInProgress();const n=await GP(t);le(Ls,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>jp(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>jp(e.remoteStore,r)),t._onlineComponents=e}async function GP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){le(Ls,"Using user provided OfflineComponentProvider");try{await vc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===z.FAILED_PRECONDITION||r.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Jr("Error using user provided cache. Falling back to memory cache: "+n),await vc(t,new Ua)}}else le(Ls,"Using default OfflineComponentProvider"),await vc(t,new HP(void 0));return t._offlineComponents}async function gv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(le(Ls,"Using user provided OnlineComponentProvider"),await Kp(t,t._uninitializedComponentsProvider._online)):(le(Ls,"Using default OnlineComponentProvider"),await Kp(t,new cu))),t._onlineComponents}function WP(t){return gv(t).then(e=>e.syncEngine)}async function KP(t){const e=await gv(t),n=e.eventManager;return n.onListen=xP.bind(null,e.syncEngine),n.onUnlisten=NP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=kP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=VP.bind(null,e.syncEngine),n}function QP(t,e,n={}){const s=new Rs;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const d=new qP({next:m=>{d.Nu(),o.enqueueAndForget(()=>TP(i,f)),m.fromCache&&c.source==="server"?u.reject(new oe(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new AP(l,d,{includeMetadataChanges:!0,qa:!0});return EP(i,f)}(await KP(t),t.asyncQueue,e,n,s)),s.promise}function _v(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const Qp=new Map;const yv="firestore.googleapis.com",Yp=!0;class Xp{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=yv,this.ssl=Yp}else this.host=e.host,this.ssl=e.ssl??Yp;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Yy;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<IC)throw new oe(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_v(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new oe(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new oe(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new oe(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bl{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new XR;switch(s.type){case"firstParty":return new tS(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new oe(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Qp.get(n);s&&(le("ComponentProvider","Removing Datastore"),Qp.delete(n),s.terminate())}(this),Promise.resolve()}}function YP(t,e,n,s={}){t=fr(t,bl);const r=gr(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;r&&(Du(`https://${l}`),Nu("Firestore",!0)),i.host!==yv&&i.host!==l&&Jr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:r,emulatorOptions:s};if(!ks(c,o)&&(t._setSettings(c),s.mockUserToken)){let u,d;if(typeof s.mockUserToken=="string")u=s.mockUserToken,d=Ct.MOCK_USER;else{u=Wg(s.mockUserToken,t._app?.options.projectId);const f=s.mockUserToken.sub||s.mockUserToken.user_id;if(!f)throw new oe(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Ct(f)}t._authCredentials=new JR(new ay(u,d))}}class ci{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ci(this.firestore,e,this._query)}}class gt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gt(this.firestore,e,this._key)}toJSON(){return{type:gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(go(n,gt._jsonSchema))return new gt(e,s||null,new he(He.fromString(n.referencePath)))}}gt._jsonSchemaVersion="firestore/documentReference/1.0",gt._jsonSchema={type:dt("string",gt._jsonSchemaVersion),referencePath:dt("string")};class Ss extends ci{constructor(e,n,s){super(e,n,Ry(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new he(e))}withConverter(e){return new Ss(this.firestore,e,this._path)}}function ln(t,e,...n){if(t=ct(t),ly("collection","path",e),t instanceof bl){const s=He.fromString(e,...n);return up(s),new Ss(t,null,s)}{if(!(t instanceof gt||t instanceof Ss))throw new oe(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(He.fromString(e,...n));return up(s),new Ss(t.firestore,null,s)}}function uu(t,e,...n){if(t=ct(t),arguments.length===1&&(e=Zu.newId()),ly("doc","path",e),t instanceof bl){const s=He.fromString(e,...n);return cp(s),new gt(t,null,new he(s))}{if(!(t instanceof gt||t instanceof Ss))throw new oe(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(He.fromString(e,...n));return cp(s),new gt(t.firestore,t instanceof Ss?t.converter:null,new he(s))}}const Jp="AsyncQueue";class Zp{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ev(this,"async_queue_retry"),this._c=()=>{const s=yc();s&&le(Jp,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=yc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=yc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Rs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ai(e))throw e;le(Jp,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,es("INTERNAL UNHANDLED ERROR: ",em(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=yh.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&me(47125,{Pc:em(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function em(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class To extends bl{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new Zp,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Zp(e),this._firestoreClient=void 0,await e}}}function XP(t,e){const n=typeof t=="object"?t:ol(),s=typeof t=="string"?t:xa,r=Us(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=qg("firestore");i&&YP(r,...i)}return r}function vv(t){if(t._terminated)throw new oe(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||JP(t),t._firestoreClient}function JP(t){const e=t._freezeSettings(),n=function(r,i,o,l){return new yS(r,i,o,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,_v(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new zP(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(r){const i=r?._online.build();return{_offline:r?._offline.build(i),_online:i}}(t._componentsProvider))}class tn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new tn(At.fromBase64String(e))}catch(n){throw new oe(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new tn(At.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:tn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(go(e,tn._jsonSchema))return tn.fromBase64String(e.bytes)}}tn._jsonSchemaVersion="firestore/bytes/1.0",tn._jsonSchema={type:dt("string",tn._jsonSchemaVersion),bytes:dt("string")};class Al{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new oe(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new It(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ih{constructor(e){this._methodName=e}}class xn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new oe(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new oe(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xn._jsonSchemaVersion}}static fromJSON(e){if(go(e,xn._jsonSchema))return new xn(e.latitude,e.longitude)}}xn._jsonSchemaVersion="firestore/geoPoint/1.0",xn._jsonSchema={type:dt("string",xn._jsonSchemaVersion),latitude:dt("number"),longitude:dt("number")};class kn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:kn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(go(e,kn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new kn(e.vectorValues);throw new oe(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}kn._jsonSchemaVersion="firestore/vectorValue/1.0",kn._jsonSchema={type:dt("string",kn._jsonSchemaVersion),vectorValues:dt("object")};const ZP=/^__.*__$/;class ex{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Bs(e,this.data,this.fieldMask,n,this.fieldTransforms):new yo(e,this.data,n,this.fieldTransforms)}}class wv{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Bs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Ev(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{Ac:t})}}class bh{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new bh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return $a(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Ev(this.Ac)&&ZP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class tx{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||El(e)}Cc(e,n,s,r=!1){return new bh({Ac:e,methodName:n,Dc:s,path:It.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ah(t){const e=t._freezeSettings(),n=El(t._databaseId);return new tx(t._databaseId,!!e.ignoreUndefinedProperties,n)}function nx(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);Rh("Data must be an object, but it was:",o,s);const l=Tv(s,o);let c,u;if(i.merge)c=new Yt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const f of i.mergeFields){const m=hu(e,f,n);if(!o.contains(m))throw new oe(z.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);bv(d,m)||d.push(m)}c=new Yt(d),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new ex(new qt(l),c,u)}class Rl extends Ih{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rl}}function sx(t,e,n,s){const r=t.Cc(1,e,n);Rh("Data must be an object, but it was:",r,s);const i=[],o=qt.empty();$s(s,(c,u)=>{const d=Sh(e,c,n);u=ct(u);const f=r.yc(d);if(u instanceof Rl)i.push(d);else{const m=Io(u,f);m!=null&&(i.push(d),o.set(d,m))}});const l=new Yt(i);return new wv(o,l,r.fieldTransforms)}function rx(t,e,n,s,r,i){const o=t.Cc(1,e,n),l=[hu(e,s,n)],c=[r];if(i.length%2!=0)throw new oe(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(hu(e,i[m])),c.push(i[m+1]);const u=[],d=qt.empty();for(let m=l.length-1;m>=0;--m)if(!bv(u,l[m])){const _=l[m];let k=c[m];k=ct(k);const x=o.yc(_);if(k instanceof Rl)u.push(_);else{const N=Io(k,x);N!=null&&(u.push(_),d.set(_,N))}}const f=new Yt(u);return new wv(d,f,o.fieldTransforms)}function ix(t,e,n,s=!1){return Io(n,t.Cc(s?4:3,e))}function Io(t,e){if(Iv(t=ct(t)))return Rh("Unsupported field value:",e,t),Tv(t,e);if(t instanceof Ih)return function(s,r){if(!Ev(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const l of s){let c=Io(l,r.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=ct(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return BS(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Qe.fromDate(s);return{timestampValue:Ma(r.serializer,i)}}if(s instanceof Qe){const i=new Qe(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ma(r.serializer,i)}}if(s instanceof xn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof tn)return{bytesValue:Hy(r.serializer,s._byteString)};if(s instanceof gt){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ch(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof kn)return function(o,l){return{mapValue:{fields:{[_y]:{stringValue:yy},[ka]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return ih(l.serializer,u)})}}}}}}(s,r);throw r.Sc(`Unsupported field value: ${dl(s)}`)}(t,e)}function Tv(t,e){const n={};return hy(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$s(t,(s,r)=>{const i=Io(r,e.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function Iv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof xn||t instanceof tn||t instanceof gt||t instanceof Ih||t instanceof kn)}function Rh(t,e,n){if(!Iv(n)||!cy(n)){const s=dl(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function hu(t,e,n){if((e=ct(e))instanceof Al)return e._internalPath;if(typeof e=="string")return Sh(t,e);throw $a("Field path arguments must be of type string or ",t,!1,void 0,n)}const ox=new RegExp("[~\\*/\\[\\]]");function Sh(t,e,n){if(e.search(ox)>=0)throw $a(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Al(...e.split("."))._internalPath}catch{throw $a(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $a(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new oe(z.INVALID_ARGUMENT,l+t+c)}function bv(t,e){return t.some(n=>n.isEqual(e))}class Av{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ax(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ch("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ax extends Av{data(){return super.data()}}function Ch(t,e){return typeof e=="string"?Sh(t,e):e instanceof Al?e._internalPath:e._delegate._internalPath}function lx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new oe(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ph{}class cx extends Ph{}function zr(t,e,...n){let s=[];e instanceof Ph&&s.push(e),s=s.concat(n),function(i){const o=i.filter(c=>c instanceof xh).length,l=i.filter(c=>c instanceof Sl).length;if(o>1||o>0&&l>0)throw new oe(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)t=r._apply(t);return t}class Sl extends cx{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Sl(e,n,s)}_apply(e){const n=this._parse(e);return Rv(e._query,n),new ci(e.firestore,e.converter,Zc(e._query,n))}_parse(e){const n=Ah(e.firestore);return function(i,o,l,c,u,d,f){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new oe(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){nm(f,d);const k=[];for(const x of f)k.push(tm(c,i,x));m={arrayValue:{values:k}}}else m=tm(c,i,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||nm(f,d),m=ix(l,o,f,d==="in"||d==="not-in");return ht.create(u,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ca(t,e,n){const s=e,r=Ch("where",t);return Sl._create(r,s,n)}class xh extends Ph{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new xh(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:_n.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let o=r;const l=i.getFlattenedFilters();for(const c of l)Rv(o,c),o=Zc(o,c)}(e._query,n),new ci(e.firestore,e.converter,Zc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function tm(t,e,n){if(typeof(n=ct(n))=="string"){if(n==="")throw new oe(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sy(e)&&n.indexOf("/")!==-1)throw new oe(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(He.fromString(n));if(!he.isDocumentKey(s))throw new oe(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return yp(t,new he(s))}if(n instanceof gt)return yp(t,n._key);throw new oe(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dl(n)}.`)}function nm(t,e){if(!Array.isArray(t)||t.length===0)throw new oe(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Rv(t,e){const n=function(r,i){for(const o of r)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new oe(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ux{convertValue(e,n="none"){switch(Os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return $s(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){const n=e.fields?.[ka].arrayValue?.values?.map(s=>lt(s.doubleValue));return new kn(n)}convertGeoPoint(e){return new xn(lt(e.latitude),lt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=ml(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(so(e));default:return null}}convertTimestamp(e){const n=Ns(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=He.fromString(e);Ue(Qy(s),9688,{name:e});const r=new ro(s.get(1),s.get(3)),i=new he(s.popFirst(5));return r.isEqual(n)||es(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function hx(t,e,n){let s;return s=t?t.toFirestore(e):e,s}class Wo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gr extends Av{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ua(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Ch("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Gr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Gr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Gr._jsonSchema={type:dt("string",Gr._jsonSchemaVersion),bundleSource:dt("string","DocumentSnapshot"),bundleName:dt("string"),bundle:dt("string")};class ua extends Gr{data(e={}){return super.data(e)}}class Wr{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Wo(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new ua(this._firestore,this._userDataWriter,s.key,s,new Wo(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new oe(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>{const c=new ua(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Wo(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new ua(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Wo(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:dx(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Wr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Zu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function dx(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:t})}}Wr._jsonSchemaVersion="firestore/querySnapshot/1.0",Wr._jsonSchema={type:dt("string",Wr._jsonSchemaVersion),bundleSource:dt("string","QuerySnapshot"),bundleName:dt("string"),bundle:dt("string")};class fx extends ux{constructor(e){super(),this.firestore=e}convertBytes(e){return new tn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,n)}}function Cs(t){t=fr(t,ci);const e=fr(t.firestore,To),n=vv(e),s=new fx(e);return lx(t._query),QP(n,t._query).then(r=>new Wr(e,s,t,r))}function px(t,e,n,...s){t=fr(t,gt);const r=fr(t.firestore,To),i=Ah(r);let o;return o=typeof(e=ct(e))=="string"||e instanceof Al?rx(i,"updateDoc",t._key,e,n,s):sx(i,"updateDoc",t._key,e),Dh(r,[o.toMutation(t._key,dn.exists(!0))])}function Sv(t){return Dh(fr(t.firestore,To),[new oh(t._key,dn.none())])}function kh(t,e){const n=fr(t.firestore,To),s=uu(t),r=hx(t.converter,e);return Dh(n,[nx(Ah(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,dn.exists(!1))]).then(()=>s)}function Dh(t,e){return function(s,r){const i=new Rs;return s.asyncQueue.enqueueAndForget(async()=>OP(await WP(s),r,i)),i.promise}(vv(t),e)}(function(e,n=!0){(function(r){ii=r})(yr),gn(new rn("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),l=new To(new ZR(s.getProvider("auth-internal")),new nS(o,s.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new oe(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ro(u.options.projectId,d)}(o,r),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),zt(ip,op,e),zt(ip,op,"esm2020")})();const Cv="firebasestorage.googleapis.com",mx="storageBucket",gx=2*60*1e3,_x=10*60*1e3;class On extends on{constructor(e,n,s=0){super(wc(e),`Firebase Storage: ${n} (${wc(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,On.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return wc(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Vn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Vn||(Vn={}));function wc(t){return"storage/"+t}function yx(){const t="An unknown error occurred, please check the error payload for server response.";return new On(Vn.UNKNOWN,t)}function vx(){return new On(Vn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function wx(){return new On(Vn.CANCELED,"User canceled the upload/download.")}function Ex(t){return new On(Vn.INVALID_URL,"Invalid URL '"+t+"'.")}function Tx(t){return new On(Vn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function sm(t){return new On(Vn.INVALID_ARGUMENT,t)}function Pv(){return new On(Vn.APP_DELETED,"The Firebase app was deleted.")}function Ix(t){return new On(Vn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class cn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=cn.makeFromUrl(e,n)}catch{return new cn(e,"")}if(s.path==="")return s;throw Tx(e)}static makeFromUrl(e,n){let s=null;const r="([A-Za-z0-9.\\-_]+)";function i(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+r+o,"i"),c={bucket:1,path:3};function u(O){O.path_=decodeURIComponent(O.path)}const d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",_=new RegExp(`^https?://${f}/${d}/b/${r}/o${m}`,"i"),k={bucket:1,path:3},x=n===Cv?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",H=new RegExp(`^https?://${x}/${r}/${N}`,"i"),C=[{regex:l,indices:c,postModify:i},{regex:_,indices:k,postModify:u},{regex:H,indices:{bucket:1,path:2},postModify:u}];for(let O=0;O<C.length;O++){const U=C[O],F=U.regex.exec(e);if(F){const E=F[U.indices.bucket];let y=F[U.indices.path];y||(y=""),s=new cn(E,y),U.postModify(s);break}}if(s==null)throw Ex(e);return s}}class bx{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Ax(t,e,n){let s=1,r=null,i=null,o=!1,l=0;function c(){return l===2}let u=!1;function d(...N){u||(u=!0,e.apply(null,N))}function f(N){r=setTimeout(()=>{r=null,t(_,c())},N)}function m(){i&&clearTimeout(i)}function _(N,...H){if(u){m();return}if(N){m(),d.call(null,N,...H);return}if(c()||o){m(),d.call(null,N,...H);return}s<64&&(s*=2);let C;l===1?(l=2,C=0):C=(s+Math.random())*1e3,f(C)}let k=!1;function x(N){k||(k=!0,m(),!u&&(r!==null?(N||(l=2),clearTimeout(r),f(0)):N||(l=1)))}return f(0),i=setTimeout(()=>{o=!0,x(!0)},n),x}function Rx(t){t(!1)}function Sx(t){return t!==void 0}function rm(t,e,n,s){if(s<e)throw sm(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw sm(`Invalid value for '${t}'. Expected ${n} or less.`)}function Cx(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const r=e(s)+"="+e(t[s]);n=n+r+"&"}return n=n.slice(0,-1),n}var Ba;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ba||(Ba={}));function Px(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||r||i}class xx{constructor(e,n,s,r,i,o,l,c,u,d,f,m=!0,_=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=m,this.isUsingEmulator=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,x)=>{this.resolve_=k,this.reject_=x,this.start_()})}start_(){const e=(s,r)=>{if(r){s(!1,new Ko(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===Ba.NO_ERROR,c=i.getStatus();if(!l||Px(c,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===Ba.ABORT;s(!1,new Ko(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;s(!0,new Ko(u,i))})},n=(s,r)=>{const i=this.resolve_,o=this.reject_,l=r.connection;if(r.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());Sx(c)?i(c):i()}catch(c){o(c)}else if(l!==null){const c=yx();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(r.canceled){const c=this.appDelete_?Pv():wx();o(c)}else{const c=vx();o(c)}};this.canceled_?n(!1,new Ko(!1,null,!0)):this.backoffId_=Ax(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Rx(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ko{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function kx(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Dx(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Nx(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Vx(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Ox(t,e,n,s,r,i,o=!0,l=!1){const c=Cx(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return Nx(d,e),kx(d,n),Dx(d,i),Vx(d,s),new xx(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o,l)}function Mx(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Lx(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}class ja{constructor(e,n){this._service=e,n instanceof cn?this._location=n:this._location=cn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ja(e,n)}get root(){const e=new cn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Lx(this._location.path)}get storage(){return this._service}get parent(){const e=Mx(this._location.path);if(e===null)return null;const n=new cn(this._location.bucket,e);return new ja(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Ix(e)}}function im(t,e){const n=e?.[mx];return n==null?null:cn.makeFromBucketSpec(n,t)}function Fx(t,e,n,s={}){t.host=`${e}:${n}`;const r=gr(e);r&&(Du(`https://${t.host}/b`),Nu("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:i}=s;i&&(t._overrideAuthToken=typeof i=="string"?i:Wg(i,t.app.options.projectId))}class Ux{constructor(e,n,s,r,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=Cv,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=gx,this._maxUploadRetryTime=_x,this._requests=new Set,r!=null?this._bucket=cn.makeFromBucketSpec(r,this._host):this._bucket=im(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=cn.makeFromBucketSpec(this._url,e):this._bucket=im(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){rm("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){rm("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(en(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ja(this,e)}_makeRequest(e,n,s,r,i=!0){if(this._deleted)return new bx(Pv());{const o=Ox(e,this._appId,s,r,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,r).getPromise()}}const om="@firebase/storage",am="0.14.0";const xv="storage";function $x(t=ol(),e){t=ct(t);const s=Us(t,xv).getImmediate({identifier:e}),r=qg("storage");return r&&Bx(s,...r),s}function Bx(t,e,n,s={}){Fx(t,e,n,s)}function jx(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new Ux(n,s,r,e,yr)}function Hx(){gn(new rn(xv,jx,"PUBLIC").setMultipleInstances(!0)),zt(om,am,""),zt(om,am,"esm2020")}Hx();const qx={apiKey:"AIzaSyBREo7YpHmycRgjyftoxkiFMLwMVePqeKc",authDomain:"happy-tri-friends.firebaseapp.com",databaseURL:"https://happy-tri-friends-default-rtdb.europe-west1.firebasedatabase.app",projectId:"happy-tri-friends",storageBucket:"happy-tri-friends.firebasestorage.app",messagingSenderId:"442257914194",appId:"1:442257914194:web:bf5e1c5cb21cac78e5e28b",measurementId:"G-RV9XDZH7J9"},Cl=e_(qx);GA(Cl);const vt=QR(Cl),kv=new Gn;kv.setCustomParameters({prompt:"select_account"});const Xt=XP(Cl);$x(Cl);const zx={class:"flex flex-col items-center md:flex-row md:justify-between text-white p-4"},Gx={class:"flex flex-wrap justify-center space-x-4 text-sm md:text-base"},Wx={class:"flex flex-col gap-2 items-end"},Kx={key:1,class:"flex items-center gap-3"},Qx={__name:"htfHeader",setup(t){const e=ku(),n=_e(!1),s=_e(""),r=["kulikalovdenis@gmail.com","bugary20@gmail.com"],i=Ze(()=>n.value&&r.includes(s.value||"")),o=Ze(()=>i.value?"/admin":"/user");rs(()=>{Qu(vt,u=>{u?(n.value=!0,s.value=u.email):(n.value=!1,s.value="")})});function l(){alert("Welcome to Happy TRI Friends!")}async function c(){try{await F1(vt),e.push("/")}catch(u){console.error(" :",u)}}return(u,d)=>{const f=Zm("router-link");return J(),ee("header",zx,[Ve(f,{to:"/"},{default:Bn(()=>[...d[0]||(d[0]=[w("img",{src:zT,alt:"Logo",class:"w-20 h-auto mb-4 md:mb-0 cursor-pointer hover:opacity-80 transition"},null,-1)])]),_:1}),w("ul",Gx,[w("li",null,[Ve(f,{to:"/schedule",class:"menu-link font-bold hover:text-yellow-400","active-class":"text-yellow-400"},{default:Bn(()=>[...d[1]||(d[1]=[zn("",-1)])]),_:1})]),w("li",null,[Ve(f,{to:"/donations",class:"menu-link font-bold hover:text-yellow-400","active-class":"text-yellow-400"},{default:Bn(()=>[...d[2]||(d[2]=[zn(" ",-1)])]),_:1})]),w("li",null,[n.value?Je("",!0):(J(),Ps(f,{key:0,to:"/login",class:"menu-link font-bold hover:text-yellow-400","active-class":"text-yellow-400"},{default:Bn(()=>[...d[3]||(d[3]=[zn("",-1)])]),_:1}))])]),w("div",Wx,[w("button",{type:"button",onClick:l,class:"bg-yellow-400 text-black font-bold py-2 px-6 rounded-full hover:bg-yellow-500 transition"},"  "),n.value?(J(),ee("div",Kx,[Ve(f,{to:o.value,class:"flex items-center gap-2 bg-transparent border-2 border-white text-white font-semibold py-1.5 px-4 rounded-lg hover:bg-white hover:text-black transition"},{default:Bn(()=>[...d[5]||(d[5]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"})],-1),zn("  ",-1)])]),_:1},8,["to"]),w("button",{onClick:c,title:"",class:"p-2 bg-transparent border-2 border-white text-white rounded-lg hover:bg-red-500 hover:border-red-500 transition"},[...d[6]||(d[6]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z","clip-rule":"evenodd"})],-1)])])])):(J(),Ps(f,{key:0,to:"/login",class:"flex items-center gap-2 bg-transparent border-2 border-white text-white font-semibold py-1.5 px-4 rounded-lg hover:bg-white hover:text-black transition"},{default:Bn(()=>[...d[4]||(d[4]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 011 1v12a1 1 0 11-2 0V4a1 1 0 011-1zm7.707 3.293a1 1 0 010 1.414L9.414 9H17a1 1 0 110 2H9.414l1.293 1.293a1 1 0 01-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),zn("    ",-1)])]),_:1}))])])}}},bo=uo(Qx,[["__scopeId","data-v-8386a2a6"]]),Yx={},Xx={class:"home text-center text-white px-2 sm:px-4 py-4"};function Jx(t,e){return J(),ee("div",Xx,[...e[0]||(e[0]=[w("div",{class:"uppercase text-xs sm:text-sm tracking-widest font-light mb-6 sm:mb-10"},"triathlon club",-1),w("div",{class:"text-3xl sm:text-6xl font-bold mb-6 sm:mb-10"},"Happy TRI Friends",-1),w("div",{class:"text-base sm:text-lg text-white"},"Swimmius. Bikeus. Runius",-1)])])}const Zx=uo(Yx,[["render",Jx]]),Ao="/HTF/assets/background-CxF9_idu.png",e2="/HTF/assets/founders_HTF-D-k_59ix.png",t2="/HTF/assets/Kulikalov-c-KDy7Jn.png",n2={class:"relative z-10"},s2={class:"text-center p-4 sm:p-6 md:p-10 lg:p-40"},r2={class:"flex flex-col md:flex-row items-center justify-center md:justify-between h-auto md:h-150 bg-gray-100 text-black p-8 sm:p-10 md:p-16 gap-4 md:gap-0 overflow-hidden"},i2=["src"],o2={class:"flex flex-col md:flex-row-reverse items-center justify-center md:justify-between h-auto md:h-150 bg-white text-black p-8 sm:p-10 md:p-16 gap-4 md:gap-0 overflow-hidden"},a2=["src"],l2={__name:"MainPage",setup(t){ku();function e(){window.scrollBy({top:window.innerHeight,behavior:"smooth"})}return(n,s)=>(J(),ee(Ke,null,[w("div",{class:"relative min-h-screen bg-cover bg-center bg-fixed",style:Fs({backgroundImage:`url(${Vt(Ao)})`})},[s[0]||(s[0]=w("div",{class:"absolute inset-0 bg-black opacity-50"},null,-1)),w("div",n2,[Ve(bo),w("main",s2,[Ve(Zx)])]),w("button",{onClick:e,class:"fixed sm:absolute bottom-5 left-1/2 transform -translate-x-1/2 bg-yellow-400 text-black font-bold py-2 px-4 sm:px-6 md:px-8 rounded-full hover:bg-yellow-500 transition text-base sm:text-lg"},"   ")],4),s[3]||(s[3]=w("div",{class:"flex flex-col items-center justify-center h-auto bg-white text-black p-4 sm:p-6 md:h-80"},[w("h1",{class:"text-xl sm:text-2xl md:text-4xl font-bold mb-4 md:mb-10"},"  "),w("p",{class:"text-sm sm:text-base md:text-lg mb-4 md:mb-0"},"  ,        !")],-1)),w("div",r2,[w("img",{src:Vt(e2),alt:"Founders",class:"w-2/3 sm:w-1/2 md:w-1/3 h-auto mb-4 md:mb-0 ml-0 md:ml-20 object-contain max-h-full"},null,8,i2),s[1]||(s[1]=w("div",{class:"w-full md:w-1/2 text-center md:text-left px-6 md:px-12 lg:px-16"},[w("h2",{class:"text-lg sm:text-xl md:text-2xl font-bold mb-2 md:mb-4"}," HTF"),w("p",{class:"text-sm sm:text-base md:text-lg"},"  '  .   HTF,       ,        .       !")],-1))]),w("div",o2,[w("img",{src:Vt(t2),alt:"Kulikalov",class:"w-2/3 sm:w-1/2 md:w-1/3 h-auto mb-4 md:mb-0 mr-0 md:mr-20 object-contain max-h-full"},null,8,a2),s[2]||(s[2]=w("div",{class:"w-full md:w-1/2 text-center md:text-left px-6 md:px-12 lg:px-16"},[w("h2",{class:"text-lg sm:text-xl md:text-2xl font-bold mb-2 md:mb-4"},"  "),w("p",{class:"text-sm sm:text-base md:text-lg"},"       .     ,             .")],-1))])],64))}},c2="/HTF/HTF.png",u2={class:"relative z-10"},h2={__name:"LoginView",setup(t){const e=ku(),n=["kulikalovdenis@gmail.com","bugary20@gmail.com"];async function s(){try{const i=(await rR(vt,kv)).user;n.includes(i.email)?e.push("/admin"):e.push("/user")}catch(r){r.code&&r.code!=="auth/popup-closed-by-user"&&r.code!=="auth/cancelled-popup-request"&&console.error(" :",r.code,r.message)}}return(r,i)=>(J(),ee("div",{class:"relative min-h-screen bg-cover bg-center bg-fixed",style:Fs({backgroundImage:`url(${Vt(Ao)})`})},[i[5]||(i[5]=w("div",{class:"absolute inset-0 bg-black opacity-50"},null,-1)),w("div",u2,[Ve(bo),w("div",{class:"flex flex-col items-center justify-center min-h-[calc(100vh-100px)] p-2 sm:p-4"},[w("div",{class:"bg-gradient-to-br from-blue-50 via-white to-blue-50 p-4 sm:p-6 md:p-10 rounded-2xl shadow-2xl max-w-xs sm:max-w-md w-full border border-blue-100"},[i[1]||(i[1]=w("div",{class:"flex justify-center mb-6"},[w("img",{src:c2,alt:"HTF Logo",class:"w-20 h-20 sm:w-24 sm:h-24 rounded-full shadow-lg border-4 border-blue-500"})],-1)),i[2]||(i[2]=w("h1",{class:"text-2xl sm:text-3xl font-bold mb-3 text-center text-gray-800"},"!",-1)),i[3]||(i[3]=w("p",{class:"text-center text-gray-600 mb-6 sm:mb-8"},"Happy TRI Friends",-1)),w("button",{onClick:s,class:"w-full flex items-center justify-center gap-3 bg-white hover:bg-gray-50 text-gray-800 font-semibold px-4 py-3 sm:px-6 sm:py-4 rounded-xl transition shadow-md border border-gray-200 hover:shadow-lg text-base sm:text-lg"},[...i[0]||(i[0]=[Hw('<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"></path><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"></path><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"></path><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"></path></svg>   Google ',2)])]),i[4]||(i[4]=w("p",{class:"text-center text-xs sm:text-sm text-gray-500 mt-4 sm:mt-6"},"      ",-1))])])])],4))}},d2={class:"flex-shrink-0 text-2xl"},f2={class:"flex-1"},p2={key:0,class:"font-bold text-lg mb-1"},m2={class:"text-sm"},g2={__name:"Notification",props:{type:{type:String,default:"success",validator:t=>["success","warning","error"].includes(t)},message:{type:String,required:!0},title:{type:String,default:""},duration:{type:Number,default:3e3},show:{type:Boolean,default:!1}},emits:["close"],setup(t,{emit:e}){const n=t,s=e,r=_e(n.show);let i=null;const o=Ze(()=>({success:"bg-green-50 border-l-4 border-green-500 text-green-800",warning:"bg-yellow-50 border-l-4 border-yellow-500 text-yellow-800",error:"bg-red-50 border-l-4 border-red-500 text-red-800"})[n.type]),l=Ze(()=>({success:"",warning:"",error:""})[n.type]),c=()=>{r.value=!1,s("close"),i&&clearTimeout(i)};return ar(()=>n.show,u=>{r.value=u,u&&n.duration>0&&(i&&clearTimeout(i),i=setTimeout(()=>{c()},n.duration))}),n.show&&n.duration>0&&(i=setTimeout(()=>{c()},n.duration)),(u,d)=>(J(),Ps(oE,{name:"slide-fade"},{default:Bn(()=>[r.value?(J(),ee("div",{key:0,class:ot(["fixed top-20 left-1/2 -translate-x-1/2 z-50 max-w-md rounded-lg shadow-2xl p-4 flex items-start gap-3","transition-all duration-300",o.value])},[w("div",d2,pe(l.value),1),w("div",f2,[t.title?(J(),ee("h4",p2,pe(t.title),1)):Je("",!0),w("p",m2,pe(t.message),1)]),w("button",{onClick:c,class:"flex-shrink-0 text-2xl opacity-60 hover:opacity-100 transition-opacity"},"  ")],2)):Je("",!0)]),_:1}))}},_2=uo(g2,[["__scopeId","data-v-21362ac3"]]),y2={class:"relative w-full"},v2=["value","placeholder","readonly"],w2={key:0,class:"absolute left-0 right-0 z-20 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-auto mt-1"},E2=["onMousedown"],T2={key:0,class:"px-3 py-2 text-gray-400 text-sm"},I2={__name:"CustomDropdown",props:{modelValue:String,options:Array,placeholder:String,hasError:{type:Boolean,default:!1},allowCustom:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,s=Ze(()=>n.options.length>0&&typeof n.options[0]=="object"),r=x=>typeof x=="string"?x:x.label||x.value,i=x=>typeof x=="string"?x:x.value,o=Ze(()=>{if(n.modelValue===void 0||n.modelValue===null)return"";if(!s.value)return n.modelValue;const x=n.options.find(N=>N.value===n.modelValue);return x?x.label:n.modelValue}),l=_e(!1);function c(){setTimeout(()=>{l.value=!1},150)}function u(x){const N=i(x);d("update:modelValue",N),l.value=!1}const d=e,f=_e(o.value),m=Ze(()=>{if(!n.allowCustom||f.value===o.value||!f.value)return n.options;const x=f.value.toLowerCase();return n.options.filter(N=>r(N).toLowerCase().includes(x))});ar(()=>n.modelValue,()=>{f.value=o.value});function _(){l.value=!0}function k(x){n.allowCustom&&(f.value=x.target.value,l.value=!1,d("update:modelValue",x.target.value))}return(x,N)=>(J(),ee("div",y2,[w("input",{value:t.allowCustom?f.value:o.value,onInput:k,onClick:_,onFocus:_,onBlur:c,placeholder:t.placeholder,class:ot(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white appearance-none cursor-pointer placeholder-gray-400 text-gray-900",t.hasError?"border-red-500":"border-gray-300"]),autocomplete:"off",readonly:!t.allowCustom},null,42,v2),w("button",{type:"button",onMousedown:N[0]||(N[0]=ya(H=>l.value=!0,["prevent"])),class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 pointer-events-none"},[...N[1]||(N[1]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])],32),l.value?(J(),ee("ul",w2,[(J(!0),ee(Ke,null,An(m.value,(H,V)=>(J(),ee("li",{key:V,onMousedown:ya(C=>u(H),["prevent"]),class:ot(["px-3 py-2 cursor-pointer transition",i(H)===t.modelValue?"bg-green-500 text-white font-semibold":"hover:bg-gray-100"])},pe(r(H)),43,E2))),128)),t.allowCustom&&m.value.length===0?(J(),ee("li",T2,"    ")):Je("",!0)])):Je("",!0)]))}},Si=uo(I2,[["__scopeId","data-v-6673c2a9"]]),Dv="/HTF/assets/icon-swimming-BaKitOA7.png",Nv="/HTF/assets/icon-running-CXWM86tb.png",Vv="/HTF/assets/icon-cycling-BWF-ICF6.png",Ov="/HTF/assets/icon-other-CNe9co9v.png",b2={swimming:[" "," "," "],running:[""," ","  "," "],cycling:["","Indoor Zwift"],other:[" "," "]},A2=["",""," ",""],R2=t=>b2[t]||A2,S2={swimming:[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}],running:[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}],cycling:[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}],other:[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}]},C2=[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}],lm=t=>S2[t]||C2,P2=[" , . .  36","  , . , 10"," , 61"," , .  5","",""," "," "],x2="",k2="",D2="",N2="",Mv=[{value:"swimming",label:"",icon:x2,iconImg:Dv,name:""},{value:"running",label:"",icon:k2,iconImg:Nv,name:""},{value:"cycling",label:"",icon:D2,iconImg:Vv,name:""},{value:"other",label:"",icon:N2,iconImg:Ov,name:""}],Lv=t=>{const e=Mv.find(n=>n.value===t||n.name===t);return e?e.icon:""},V2={class:"bg-white bg-opacity-90 rounded-2xl shadow-lg p-2 sm:p-4"},O2={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4"},M2={key:0,class:"flex items-center gap-2"},L2=["disabled"],F2=["disabled"],U2={key:1,class:"text-gray-500 text-sm"},$2={key:2,class:"text-gray-400 text-sm"},B2={class:"mb-4 sm:mb-6 p-2 sm:p-4 bg-blue-50 rounded-lg border border-blue-200"},j2={class:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4"},H2={key:0,class:"text-red-600 text-sm mt-2"},q2={class:"space-y-4 sm:space-y-6"},z2={class:"text-lg sm:text-xl font-semibold mb-2 sm:mb-4 text-gray-800"},G2={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-4"},W2={class:"flex gap-2"},K2=["onUpdate:modelValue"],Q2={class:"md:col-span-2"},Y2={class:"flex gap-2"},X2=["onClick"],J2=["onClick"],Z2={key:0,class:"mt-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg"},ek={key:1,class:"mt-4 p-4 bg-green-100 border-2 border-green-500 text-green-800 rounded-lg shadow-lg animate-pulse"},tk={key:2,class:"mt-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg"},nk={key:3,class:"mt-8 p-4 bg-gray-50 rounded-xl"},sk={class:"flex flex-col items-center gap-4"},rk={__name:"FormSchedule",props:{notification:Object},emits:["show-notification"],setup(t,{emit:e}){const n=e,s=_e(null),r=_e(null),i=_e(null),o=_e(!1),l=_e(!1),c=_e(!1),u=_e(""),d=_e(""),f=_e(!1),m=_e([]),_=_e(0),k=_e(!1),x=_e(!1),N=_e(""),H=_e(0),V=_e([{id:"monday",name:"",trainings:[]},{id:"tuesday",name:"",trainings:[]},{id:"wednesday",name:"",trainings:[]},{id:"thursday",name:"",trainings:[]},{id:"friday",name:"'",trainings:[]},{id:"saturday",name:"",trainings:[]},{id:"sunday",name:"",trainings:[]}]),C=_e(P2);function O(de,K,M=""){n("show-notification",de,K,M)}async function U(){try{k.value=!0;const de=zr(ln(Xt,"schedules")),K=await Cs(de),M=[];K.forEach(ae=>{M.push({id:ae.id,...ae.data()})}),m.value=M.sort((ae,Me)=>new Date(Me.weekStart)-new Date(ae.weekStart)),m.value.length>0&&(_.value=0)}catch(de){console.error("  :",de)}finally{k.value=!1}}const F=Ze(()=>m.value.length===0?null:m.value[_.value]);function E(de,K){const M=new Date(de),ae=new Date(K),Me=Ae=>{const ft=String(Ae.getDate()).padStart(2,"0"),Ye=String(Ae.getMonth()+1).padStart(2,"0");return`${ft}.${Ye}`};return`${Me(M)} - ${Me(ae)}`}function y(){_.value<m.value.length-1&&_.value++}function v(){_.value>0&&_.value--}function S(){const de=F.value;de&&(u.value=de.weekStart,d.value=de.weekEnd,V.value.forEach(K=>{K.trainings=[]}),de.trainings&&Array.isArray(de.trainings)&&de.trainings.forEach(K=>{const M=R(K.dayName),ae=V.value.find(Me=>Me.id===M);ae&&ae.trainings.push({name:K.name,time:K.time,type:K.type,difficulty:K.difficulty,address:K.address,isPaid:K.isPaid||!1})}),O("success","   !      .",""))}function R(de){return{:"monday",:"tuesday",:"wednesday",:"thursday","'":"friday",:"saturday",:"sunday"}[de]||"monday"}function A(de){const K=V.value.find(M=>M.id===de);K&&K.trainings.push({type:"swimming",name:"",difficulty:"ELEMENTARY",time:"07:00",isPaid:"",address:"",error:!1})}function T(de){const K=de.target;if(K&&typeof K.showPicker=="function")try{K.showPicker()}catch{}}ar(()=>V.value.map(de=>de.trainings.map(K=>K.type)),(de,K)=>{V.value.forEach((M,ae)=>{M.trainings.forEach((Me,Ae)=>{const ft=K[ae]?.[Ae],Ye=de[ae]?.[Ae];if(ft&&Ye&&ft!==Ye){const $=lm(Me.type);$.length>0&&(Me.difficulty=$[0].value),Me.name=""}})})},{deep:!0});function ke(de,K){const M=V.value.find(ae=>ae.id===de);M&&M.trainings.splice(K,1)}async function Xe(){l.value=!1,c.value=!1;let de=!1;if((!u.value||!d.value)&&(c.value=!0,de=!0),V.value.forEach(ce=>{ce.trainings.forEach(fe=>{fe.error=!1,(!fe.name||!fe.type||!fe.difficulty||!fe.time||!fe.address)&&(fe.error=!0,de=!0)})}),de){l.value=!0,H.value++,await bu(),O("error"," ,   '  (  *)"," ");return}o.value=!0,await new Promise(ce=>setTimeout(ce,100)),await document.fonts.ready;const K=s.value;if(!K){console.error("Canvas not found");return}const M=K.getContext("2d");K.width=1080,K.height=1920,M.fillStyle="#2C3E5F",M.fillRect(0,0,K.width,K.height),M.fillStyle="#FFD700",M.font="bold 70px Montserrat",M.textAlign="center",M.fillText("  HTF",K.width/2,120),M.font="bold 26px Montserrat";const ae=M.measureText("($) - ").width;M.font="26px Montserrat";const Me=M.measureText(" ").width,Ae=ae+Me,ft=K.width-60-Ae;M.fillStyle="#FFD700",M.font="bold 26px Montserrat",M.textAlign="left",M.fillText("($) - ",ft,150),M.fillStyle="#ffffff",M.font="26px Montserrat",M.fillText(" ",ft+ae,150),M.fillStyle="#ffffff",M.font="26px Montserrat",M.textAlign="right",M.fillText(" ",K.width-60,180);const Ye={},$=[{type:"swimming",src:Dv},{type:"running",src:Nv},{type:"cycling",src:Vv},{type:"other",src:Ov}].map(({type:ce,src:fe})=>new Promise(I=>{const b=new Image;b.onload=()=>{Ye[ce]=b,I()},b.onerror=()=>I(),b.src=fe}));await Promise.all($);let Q=220;const re={:"",:"",:"",:"","'":"",:"",:""};V.value.forEach(ce=>{if(ce.trainings.length>0){const fe=[];ce.trainings.forEach(se=>{const ge=fe.find(Ie=>Ie.type===se.type&&Ie.isPaid===se.isPaid&&Ie.address===se.address&&Ie.name===se.name);if(ge){const Ie=ge.difficultyTimes.find(Re=>Re.difficulty===se.difficulty);Ie?Ie.times.push(se.time):ge.difficultyTimes.push({difficulty:se.difficulty,times:[se.time]})}else fe.push({type:se.type,name:se.name,isPaid:se.isPaid,address:se.address,difficultyTimes:[{difficulty:se.difficulty,times:[se.time]}]})});const I=[];let b=15;fe.forEach((se,ge)=>{const Re=28+(se.difficultyTimes.length-1)*35,nt=Math.max(Re,60)+30;I.push(nt),b+=nt,ge<fe.length-1&&(b+=15)}),b+=15;const P=b,B=45,q=P;M.fillStyle="#FFD700",M.beginPath(),M.moveTo(55,Q),M.lineTo(40+B,Q),M.lineTo(40+B,Q+q),M.lineTo(55,Q+q),M.arcTo(40,Q+q,40,Q+q-15,15),M.lineTo(40,Q+15),M.arcTo(40,Q,55,Q,15),M.closePath(),M.fill(),M.fillStyle="#000000",M.font="32px Montserrat",M.textAlign="center";const ne=(re[ce.name]||ce.name.substring(0,2)).toUpperCase().split(""),X=38,Y=ne.length*X,W=Q+(q-Y)/2+30;ne.forEach((se,ge)=>{M.fillText(se,40+B/2,W+ge*X)});const ie=40+B,Z=K.width-ie-50;M.fillStyle="#2C3E5F",M.beginPath(),M.moveTo(ie,Q),M.lineTo(ie+Z-15,Q),M.arcTo(ie+Z,Q,ie+Z,Q+15,15),M.lineTo(ie+Z,Q+P-15),M.arcTo(ie+Z,Q+P,ie+Z-15,Q+P,15),M.lineTo(ie,Q+P),M.closePath(),M.fill(),M.strokeStyle="#FFD700",M.lineWidth=4,M.beginPath(),M.moveTo(55,Q),M.lineTo(ie+Z-15,Q),M.arcTo(ie+Z,Q,ie+Z,Q+15,15),M.lineTo(ie+Z,Q+P-15),M.arcTo(ie+Z,Q+P,ie+Z-15,Q+P,15),M.lineTo(55,Q+P),M.arcTo(40,Q+P,40,Q+P-15,15),M.lineTo(40,Q+15),M.arcTo(40,Q,55,Q,15),M.closePath(),M.stroke();let ue=Q+15;fe.forEach((se,ge)=>{const Ie=I[ge],tt=(Ie-55)/2,nt=Ye[se.type];if(nt&&M.drawImage(nt,ie+20,ue+tt,50,50),M.fillStyle="#ffffff",M.font="semi-bold 34px Montserrat",M.textAlign="left",M.fillText(se.name,ie+85,ue+tt+25),se.isPaid){const Ge=M.measureText(se.name).width;M.fillStyle="#FFD700",M.fillText(" ($)",ie+85+Ge,ue+tt+25)}M.fillStyle="#D1D5DB",M.font="22px Montserrat",M.fillText(se.address,ie+85,ue+tt+55);const Rt=ie+Z-350,Gt=28+(se.difficultyTimes.length-1)*35;let st=ue+(Ie-Gt)/2;se.difficultyTimes.forEach((Ge,Er)=>{M.font="20px Montserrat",M.textAlign="left";const Mn=M.measureText(Ge.difficulty).width,ui=15,Hs=Mn+ui*2;M.strokeStyle="#FFD700",M.lineWidth=2,M.strokeRect(Rt,st,Hs,28),M.fillStyle="#FFD700",M.fillText(Ge.difficulty,Rt+ui,st+20),M.fillStyle="#ffffff",M.font="22px Montserrat",M.textAlign="right";const Ro=Ge.times.join(" | ");M.fillText(Ro,ie+Z-30,st+18),st+=35}),ue+=Ie,ge<fe.length-1&&(ue+=7.5,M.strokeStyle="#FFD700",M.lineWidth=1,M.beginPath(),M.moveTo(ie+20,ue),M.lineTo(ie+Z-20,ue),M.stroke(),ue+=7.5)}),Q+=P+25}})}function ze(){const de=s.value;if(!de)return;const K=document.createElement("a");K.download="htf-schedule.png",K.href=de.toDataURL("image/png"),K.click()}function Ne(de){const K=new Date(u.value),ae={monday:0,tuesday:1,wednesday:2,thursday:3,friday:4,saturday:5,sunday:6}[de],Me=new Date(K);return Me.setDate(K.getDate()+ae),Me.toISOString().split("T")[0]}async function Se(){if(f.value=!1,x.value=!1,N.value="",l.value=!1,c.value=!1,!u.value||!d.value){c.value=!0,x.value=!0,N.value="      ";return}let de=!1;if(V.value.forEach(K=>{K.trainings.forEach(M=>{M.error=!1,(!M.name||!M.type||!M.difficulty||!M.time||!M.address)&&(M.error=!0,de=!0)})}),de){l.value=!0,x.value=!0,N.value="  '  ";return}try{const K=[];V.value.forEach(ae=>{if(ae.trainings.length>0){const Me=Ne(ae.id);ae.trainings.forEach(Ae=>{K.push({date:Me,dayName:ae.name,type:Ae.type,name:Ae.name,difficulty:Ae.difficulty,time:Ae.time,isPaid:Ae.isPaid==="paid",address:Ae.address,createdAt:new Date().toISOString(),createdBy:vt.currentUser?.email||"unknown"})})}});const M=await kh(ln(Xt,"schedules"),{weekStart:u.value,weekEnd:d.value,trainings:K,createdAt:new Date().toISOString(),createdBy:vt.currentUser?.email||"unknown"});if(M&&M.id)f.value=!0,O("success",`  ${K.length} `," "),setTimeout(()=>{f.value=!1},5e3),await U();else throw new Error("   ID  ")}catch(K){console.error("  :",K),x.value=!0,N.value=K.message||"   "}}return rs(()=>{U()}),(de,K)=>(J(),ee("div",V2,[w("div",O2,[K[4]||(K[4]=w("h1",{class:"text-3xl font-bold"}," ",-1)),m.value.length>0?(J(),ee("div",M2,[w("button",{onClick:y,disabled:_.value===m.value.length-1,class:ot(["px-3 py-2 rounded-lg font-bold transition-colors",_.value===m.value.length-1?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"]),title:" "}," < ",10,L2),w("button",{onClick:S,class:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold transition-colors",title:"   "},pe(F.value?`${_.value+1}: ${E(F.value.weekStart,F.value.weekEnd)}`:" "),1),w("button",{onClick:v,disabled:_.value===0,class:ot(["px-3 py-2 rounded-lg font-bold transition-colors",_.value===0?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"]),title:" "}," > ",10,F2)])):k.value?(J(),ee("div",U2,"  ... ")):(J(),ee("div",$2,"    "))]),w("div",B2,[w("div",j2,[w("div",null,[K[5]||(K[5]=w("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"   *",-1)),Mr(w("input",{ref_key:"startDateInput",ref:r,"onUpdate:modelValue":K[0]||(K[0]=M=>u.value=M),type:"date",onClick:K[1]||(K[1]=M=>T(M)),class:ot(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-pointer",c.value&&!u.value?"border-red-500":"border-gray-300"])},null,2),[[Ur,u.value]])]),w("div",null,[K[6]||(K[6]=w("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"   *",-1)),Mr(w("input",{ref_key:"endDateInput",ref:i,"onUpdate:modelValue":K[2]||(K[2]=M=>d.value=M),type:"date",onClick:K[3]||(K[3]=M=>T(M)),class:ot(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-pointer",c.value&&!d.value?"border-red-500":"border-gray-300"])},null,2),[[Ur,d.value]])])]),c.value?(J(),ee("p",H2," '      ")):Je("",!0)]),w("div",q2,[(J(!0),ee(Ke,null,An(V.value,M=>(J(),ee("div",{key:M.id,class:"border border-gray-200 rounded-xl p-2 sm:p-4 bg-gray-50"},[w("h3",z2,pe(M.name),1),(J(!0),ee(Ke,null,An(M.trainings,(ae,Me)=>(J(),ee("div",{key:`${M.id}-${Me}-${H.value}`,class:"mb-2 sm:mb-4 p-2 sm:p-4 bg-white rounded-lg shadow-sm border border-gray-100"},[w("div",G2,[w("div",null,[K[7]||(K[7]=w("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"  *",-1)),w("div",W2,[Ve(Si,{modelValue:ae.type,"onUpdate:modelValue":Ae=>ae.type=Ae,options:Vt(Mv),placeholder:"  *",hasError:!!(ae.error&&!ae.type)},null,8,["modelValue","onUpdate:modelValue","options","hasError"]),Ve(Si,{modelValue:ae.name,"onUpdate:modelValue":Ae=>ae.name=Ae,options:Vt(R2)(ae.type),placeholder:"  *",hasError:!!(ae.error&&!ae.name),allowCustom:!0},null,8,["modelValue","onUpdate:modelValue","options","hasError"])])]),w("div",null,[K[8]||(K[8]=w("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," *",-1)),Ve(Si,{modelValue:ae.difficulty,"onUpdate:modelValue":Ae=>ae.difficulty=Ae,options:Vt(lm)(ae.type),placeholder:" *",hasError:!!(ae.error&&!ae.difficulty)},null,8,["modelValue","onUpdate:modelValue","options","hasError"])]),w("div",null,[K[9]||(K[9]=w("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"  *",-1)),Mr(w("input",{"onUpdate:modelValue":Ae=>ae.time=Ae,type:"time",class:ot(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",ae.error&&!ae.time?"border-red-500":"border-gray-300"])},null,10,K2),[[Ur,ae.time]])]),w("div",null,[K[10]||(K[10]=w("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," ",-1)),Ve(Si,{modelValue:ae.isPaid,"onUpdate:modelValue":Ae=>ae.isPaid=Ae,options:[{value:"",label:""},{value:"paid",label:" "}],placeholder:""},null,8,["modelValue","onUpdate:modelValue"])]),w("div",Q2,[K[12]||(K[12]=w("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," *",-1)),w("div",Y2,[Ve(Si,{modelValue:ae.address,"onUpdate:modelValue":Ae=>ae.address=Ae,options:C.value,placeholder:"  *",hasError:ae.error&&!ae.address,allowCustom:!0},null,8,["modelValue","onUpdate:modelValue","options","hasError"]),w("button",{onClick:Ae=>ke(M.id,Me),class:"px-3 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg transition"},[...K[11]||(K[11]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-red-500",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)])],8,X2)])])])]))),128)),w("button",{onClick:ae=>A(M.id),class:"w-full mt-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition"},"    ",8,J2)]))),128))]),l.value?(J(),ee("div",Z2,[...K[13]||(K[13]=[w("p",{class:"font-semibold"},"  ",-1),w("p",null," ,   '  (  *)",-1)])])):Je("",!0),w("div",{class:"mt-8 flex gap-4"},[w("button",{onClick:Xe,class:"flex-1 px-6 py-3 bg-green-500 hover:bg-green-600 text-white font-semibold rounded-lg transition text-lg"},"    "),w("button",{onClick:Se,class:"flex-1 px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white font-semibold rounded-lg transition text-lg"},"      ")]),f.value?(J(),ee("div",ek,[...K[14]||(K[14]=[w("p",{class:"font-bold text-lg"},"  !",-1),w("p",null,"      Firebase",-1)])])):Je("",!0),x.value?(J(),ee("div",tk,[K[15]||(K[15]=w("p",{class:"font-semibold"},"  ",-1)),w("p",null,pe(N.value),1)])):Je("",!0),o.value?(J(),ee("div",nk,[K[16]||(K[16]=w("h3",{class:"text-xl font-semibold mb-4"}," ",-1)),w("div",sk,[w("canvas",{ref_key:"scheduleCanvas",ref:s,class:"border border-gray-300 rounded-lg shadow-lg max-w-full"},null,512),w("button",{onClick:ze,class:"px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white font-semibold rounded-lg transition"},"    ")])])):Je("",!0)]))}},ik={class:"bg-white bg-opacity-90 rounded-2xl shadow-lg p-2 sm:p-4"},ok={class:"text-3xl font-bold mb-6"},ak={key:0,class:"text-center py-12"},lk={key:1,class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ck={class:"space-y-4"},uk={class:"flex items-center justify-between mb-4"},hk={class:"text-xl font-semibold"},dk={class:"text-sm text-gray-500"},fk={key:0,class:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300"},pk={class:"text-gray-600"},mk={key:1,class:"space-y-4 max-h-[600px] overflow-y-auto pr-2"},gk=["onClick"],_k={key:0,class:"mb-3"},yk=["src"],vk={key:1,class:"mb-3 h-32 bg-gray-100 rounded-lg flex items-center justify-center"},wk={class:"font-bold text-lg mb-2 text-gray-800"},Ek={class:"text-sm text-gray-600 mb-2 line-clamp-2"},Tk=["href"],Ik={class:"flex gap-2 mt-3"},bk=["onClick"],Ak=["onClick"],Rk={class:"text-xs text-gray-400 mt-2"},Sk={class:"space-y-6 lg:sticky lg:top-4 lg:self-start"},Ck={class:"flex items-center justify-between mb-4"},Pk={class:"text-xl font-semibold"},xk={class:"flex gap-4"},kk=["disabled"],Dk={key:0},Nk={key:1},Vk={__name:"ItemsManager",props:{title:{type:String,default:"  "},listTitle:{type:String,default:"  "},formCreateTitle:{type:String,default:"  "},formEditTitle:{type:String,default:"  "},emptyMessage:{type:String,default:"  "},items:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},saving:{type:Boolean,default:!1},editingId:{type:String,default:null}},emits:["edit","delete","save","cancel"],setup(t){function e(n){return n?new Date(n).toLocaleString("uk-UA",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):""}return(n,s)=>(J(),ee("div",ik,[w("h1",ok,pe(t.title),1),t.loading?(J(),ee("div",ak,[...s[3]||(s[3]=[w("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"},null,-1),w("p",{class:"text-gray-600"},"...",-1)])])):(J(),ee("div",lk,[w("div",ck,[w("div",uk,[w("h2",hk,pe(t.listTitle),1),w("span",dk,": "+pe(t.items.length),1)]),t.items.length===0?(J(),ee("div",fk,[s[4]||(s[4]=w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 mx-auto text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1)),w("p",pk,pe(t.emptyMessage),1),s[5]||(s[5]=w("p",{class:"text-gray-500 text-sm"},"     ",-1))])):(J(),ee("div",mk,[(J(!0),ee(Ke,null,An(t.items,r=>(J(),ee("div",{key:r.id,class:ot(["bg-white border-2 rounded-lg p-4 hover:shadow-lg transition cursor-pointer",t.editingId===r.id?"border-blue-500 shadow-lg":"border-gray-200"]),onClick:i=>n.$emit("edit",r)},[Rd(n.$slots,"item-card",{item:r},()=>[r.imageUrl||r.imageBase64?(J(),ee("div",_k,[w("img",{src:r.imageUrl||r.imageBase64,alt:"Item",class:"w-full h-32 object-cover rounded-lg"},null,8,yk)])):(J(),ee("div",vk,[...s[6]||(s[6]=[w("span",{class:"text-gray-400"}," ",-1)])])),w("h3",wk,pe(r.title),1),w("p",Ek,pe(r.description),1),r.link?(J(),ee("a",{key:2,href:r.link,target:"_blank",class:"text-xs text-blue-600 hover:underline block mb-3 truncate"},"  "+pe(r.link),9,Tk)):Je("",!0)]),w("div",Ik,[w("button",{onClick:ya(i=>n.$emit("edit",r),["stop"]),class:"flex-1 px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded transition"},"   ",8,bk),w("button",{onClick:ya(i=>n.$emit("delete",r.id),["stop"]),class:"px-3 py-2 bg-red-500 hover:bg-red-600 text-white text-sm rounded transition"},"  ",8,Ak)]),w("p",Rk,": "+pe(e(r.updatedAt)),1)],10,gk))),128))]))]),w("div",Sk,[w("div",Ck,[w("h2",Pk,pe(t.editingId?t.formEditTitle:t.formCreateTitle),1),t.editingId?(J(),ee("button",{key:0,onClick:s[0]||(s[0]=r=>n.$emit("cancel")),class:"text-sm text-gray-500 hover:text-gray-700"},"   ")):Je("",!0)]),Rd(n.$slots,"form"),w("div",xk,[w("button",{onClick:s[1]||(s[1]=r=>n.$emit("save")),disabled:t.saving,class:"flex-1 px-6 py-3 bg-green-500 hover:bg-green-600 text-white font-semibold rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed"},[t.saving?(J(),ee("span",Dk," ...")):(J(),ee("span",Nk,pe(t.editingId?" ":" "),1))],8,kk),t.editingId?(J(),ee("button",{key:0,onClick:s[2]||(s[2]=r=>n.$emit("cancel")),class:"px-6 py-3 bg-gray-500 hover:bg-gray-600 text-white font-semibold rounded-lg transition"},"   ")):Je("",!0)])])]))]))}},Ok={class:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-blue-500 transition"},Mk={key:0,class:"mb-4"},Lk=["src"],Fk={key:1},Uk={key:0,class:"text-red-600 text-sm mt-1"},$k={key:0,class:"text-red-600 text-sm mt-1"},Bk={key:0,class:"text-red-600 text-sm mt-1"},jk={__name:"DonationsManager",emits:["show-notification"],setup(t,{emit:e}){const n=e,s=_e(!1),r=_e(!1),i=_e(""),o=_e(null),l=_e([]),c=_e(null),u=_e(null),d=_e({title:"",description:"",link:""}),f=_e({title:"",description:"",link:""});async function m(){try{s.value=!0;const U=await Cs(ln(Xt,"donations"));l.value=[],U.forEach(F=>{l.value.push({id:F.id,...F.data()})}),l.value.sort((F,E)=>new Date(E.updatedAt||0)-new Date(F.updatedAt||0))}catch(U){console.error("  :",U),n("show-notification","error","  ","")}finally{s.value=!1}}function _(U){c.value=U.id,d.value.title=U.title||"",d.value.description=U.description||"",d.value.link=U.link||"",U.imageBase64?i.value=U.imageBase64:i.value="",o.value=null,window.scrollTo({top:0,behavior:"smooth"})}function k(){c.value=null,O()}async function x(U){if(confirm(" ,     ?"))try{await Sv(uu(Xt,"donations",U)),n("show-notification","success","  ",""),await m(),c.value===U&&k()}catch(F){console.error(" :",F),n("show-notification","error","  ","")}}function N(U){const F=U.target.files[0];if(!F)return;if(!F.type.includes("png")){n("show-notification","warning"," ,    PNG"," ");return}if(F.size>1024*1024){n("show-notification","warning","  .  1MB"," ");return}o.value=F;const E=new FileReader;E.onload=y=>{i.value=y.target.result},E.readAsDataURL(F)}function H(){i.value="",o.value=null,u.value&&(u.value.value="")}function V(){f.value={title:"",description:"",link:""};let U=!0;return d.value.title.trim()||(f.value.title=" '",U=!1),d.value.description.trim()||(f.value.description=" '",U=!1),d.value.link.trim()?d.value.link.startsWith("http")||(f.value.link="    http://  https://",U=!1):(f.value.link=" '",U=!1),U}async function C(){if(!V()){n("show-notification","warning","  ' "," ");return}try{r.value=!0;const U={title:d.value.title.trim(),description:d.value.description.trim(),link:d.value.link.trim(),imageBase64:i.value||"",updatedAt:new Date().toISOString()};if(c.value){const F=uu(Xt,"donations",c.value);await px(F,U),n("show-notification","success","  ","")}else U.createdAt=new Date().toISOString(),await kh(ln(Xt,"donations"),U),n("show-notification","success","   ","");await m(),k()}catch(U){console.error(" :",U),n("show-notification","error",U.message||"   ","")}finally{r.value=!1}}function O(){d.value={title:"",description:"",link:""},H(),f.value={title:"",description:"",link:""}}return rs(()=>{m()}),(U,F)=>(J(),Ps(Vk,{title:"  ","list-title":"  ","form-create-title":"  ","form-edit-title":"  ","empty-message":"  ",items:l.value,loading:s.value,saving:r.value,"editing-id":c.value,onEdit:_,onDelete:x,onSave:C,onCancel:k},{form:Bn(()=>[w("div",Ok,[i.value?(J(),ee("div",Mk,[w("img",{src:i.value,alt:"Preview",class:"max-h-64 mx-auto rounded-lg shadow-md"},null,8,Lk),w("button",{onClick:H,class:"mt-4 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition"},"    ")])):(J(),ee("div",Fk,[F[4]||(F[4]=w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 mx-auto text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),F[5]||(F[5]=w("p",{class:"text-gray-600 mb-2"},"  (PNG)",-1)),w("input",{ref_key:"fileInput",ref:u,type:"file",accept:"image/png",onChange:N,class:"hidden"},null,544),w("button",{onClick:F[0]||(F[0]=E=>U.$refs.fileInput.click()),class:"px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition"},"    ")]))]),w("div",null,[F[6]||(F[6]=w("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," *",-1)),Mr(w("input",{"onUpdate:modelValue":F[1]||(F[1]=E=>d.value.title=E),type:"text",placeholder:":  ",class:ot(["w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",f.value.title?"border-red-500":"border-gray-300"])},null,2),[[Ur,d.value.title]]),f.value.title?(J(),ee("p",Uk," "+pe(f.value.title),1)):Je("",!0)]),w("div",null,[F[7]||(F[7]=w("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," *",-1)),Mr(w("textarea",{"onUpdate:modelValue":F[2]||(F[2]=E=>d.value.description=E),rows:"4",placeholder:"  ...",class:ot(["w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",f.value.description?"border-red-500":"border-gray-300"])},null,2),[[Ur,d.value.description]]),f.value.description?(J(),ee("p",$k," "+pe(f.value.description),1)):Je("",!0)]),w("div",null,[F[8]||(F[8]=w("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"   *",-1)),Mr(w("input",{"onUpdate:modelValue":F[3]||(F[3]=E=>d.value.link=E),type:"url",placeholder:"https://send.monobank.ua/...",class:ot(["w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",f.value.link?"border-red-500":"border-gray-300"])},null,2),[[Ur,d.value.link]]),f.value.link?(J(),ee("p",Bk," "+pe(f.value.link),1)):Je("",!0)])]),_:1},8,["items","loading","saving","editing-id"]))}},Hk={class:"bg-white bg-opacity-90 rounded-2xl shadow-lg p-6"},qk={key:0,class:"text-center py-12"},zk={key:1,class:"text-center py-12"},Gk={key:2,class:"space-y-6"},Wk={class:"bg-gradient-to-r from-blue-600 to-blue-800 text-white px-6 py-4"},Kk={class:"text-2xl font-bold"},Qk={class:"text-sm text-blue-100"},Yk={class:"p-6 space-y-4 bg-gray-50"},Xk={class:"flex-1"},Jk={class:"flex items-center gap-3 mb-2"},Zk={class:"text-2xl"},eD={class:"text-xl font-bold text-gray-800"},tD={key:0,class:"px-3 py-1 rounded-full text-sm font-semibold bg-yellow-100 text-yellow-800"},nD={class:"flex items-center gap-6 text-gray-600"},sD={class:"flex items-center gap-2"},rD={class:"font-semibold"},iD={class:"flex items-center gap-2"},oD={class:"flex items-center gap-2"},aD={class:"ml-6 flex flex-col gap-2"},lD={key:0,disabled:"",class:"px-6 py-3 rounded-lg font-semibold bg-gray-400 text-white cursor-not-allowed shadow-lg opacity-60"},cD=["onClick"],uD=["onClick"],hD={key:3,class:"fixed bottom-8 right-8 bg-green-500 text-white px-6 py-4 rounded-lg shadow-2xl animate-bounce"},dD={class:"font-semibold"},cm={__name:"TrainingRegistration",props:{notification:Object},emits:["show-notification"],setup(t,{emit:e}){const n=e,s=_e(!1),r=_e(null),i=_e([]),o=_e("");function l(C,O,U=""){n("show-notification",C,O,U)}const c=()=>{const C=new Date,O=C.getDay(),U=O===0?-6:1-O,F=new Date(C);F.setDate(C.getDate()+U),F.setHours(0,0,0,0);const E=new Date(F);return E.setDate(F.getDate()+6),E.setHours(23,59,59,999),{monday:F,sunday:E}},u=C=>new Date(C).toLocaleDateString("uk-UA",{day:"2-digit",month:"long"}),d=Ze(()=>{if(!r.value||!r.value.trainings)return{};const C={};r.value.trainings.forEach(F=>{const E=F.dayName;C[E]||(C[E]=[]),C[E].push(F)});const O=["","","","","'","",""],U={};return O.forEach(F=>{C[F]&&(U[F]=C[F].sort((E,y)=>E.time.localeCompare(y.time)))}),U}),f=C=>Lv(C),m=C=>({:"bg-green-100 text-green-800",:"bg-yellow-100 text-yellow-800",:"bg-red-100 text-red-800"})[C]||"bg-gray-100 text-gray-800",_=async()=>{try{s.value=!0;const{monday:C,sunday:O}=c(),U=C.toISOString().split("T")[0],F=O.toISOString().split("T")[0],E=zr(ln(Xt,"schedules")),y=await Cs(E),v=[];y.forEach(S=>{const R=S.data(),A=R.weekStart,T=R.weekEnd;A>=U&&T<=F&&v.push({id:S.id,...R})}),v.length>0?(v.sort((S,R)=>{const A=new Date(S.createdAt||0);return new Date(R.createdAt||0)-A}),r.value=v[0],await k()):r.value=null}catch(C){console.error("  :",C)}finally{s.value=!1}},k=async()=>{if(vt.currentUser)try{const C=zr(ln(Xt,"registrations"),ca("userId","==",vt.currentUser.uid)),O=await Cs(C);i.value=O.docs.map(U=>U.data().trainingId)}catch{}},x=C=>{const O=`${r.value.id}_${C.date}_${C.time}`;return i.value.includes(O)},N=C=>{const O=new Date(`${C.date}T${C.time}:00`),U=new Date,F=2*60,E=U.getTimezoneOffset(),y=new Date(U.getTime()+(F+E)*6e4);return O<y},H=async C=>{if(!vt.currentUser){l("warning"," ,     "," ");return}try{const O=`${r.value.id}_${C.date}_${C.time}`;if(x(C))return;await kh(ln(Xt,"registrations"),{userId:vt.currentUser.uid,userEmail:vt.currentUser.email,userName:vt.currentUser.displayName||vt.currentUser.email,userPhoto:vt.currentUser.photoURL||null,trainingId:O,scheduleId:r.value.id,trainingDate:C.date,trainingTime:C.time,trainingName:C.name,trainingType:C.type,registeredAt:new Date().toISOString()}),i.value.push(O),o.value=`   ${C.name}`,setTimeout(()=>{o.value=""},3e3)}catch(O){l("error",O.message," ")}},V=async C=>{if(vt.currentUser)try{const O=`${r.value.id}_${C.date}_${C.time}`,U=zr(ln(Xt,"registrations"),ca("userId","==",vt.currentUser.uid),ca("trainingId","==",O)),F=await Cs(U);if(!F.empty){const E=F.docs[0];await Sv(E.ref);const y=i.value.indexOf(O);y>-1&&i.value.splice(y,1),o.value=`  ${C.name} `,setTimeout(()=>{o.value=""},3e3)}}catch(O){l("error",O.message," ")}};return rs(()=>{_()}),(C,O)=>(J(),ee("div",Hk,[O[6]||(O[6]=w("h1",{class:"text-3xl font-bold mb-6"},"   ",-1)),s.value?(J(),ee("div",qk,[...O[0]||(O[0]=[w("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"},null,-1),w("p",{class:"text-gray-600"}," ...",-1)])])):!r.value||!r.value.trainings||r.value.trainings.length===0?(J(),ee("div",zk,[...O[1]||(O[1]=[w("p",{class:"text-gray-600 text-xl mb-4"},"       ",-1),w("p",{class:"text-gray-500"},'     " "',-1)])])):(J(),ee("div",Gk,[(J(!0),ee(Ke,null,An(d.value,(U,F)=>(J(),ee("div",{key:F,class:"border border-gray-200 rounded-xl overflow-hidden"},[w("div",Wk,[w("h2",Kk,pe(F),1),w("p",Qk,pe(u(U[0].date)),1)]),w("div",Yk,[(J(!0),ee(Ke,null,An(U,(E,y)=>(J(),ee("div",{key:y,class:"flex items-center justify-between p-4 bg-white rounded-lg hover:shadow-md transition-shadow border border-gray-200"},[w("div",Xk,[w("div",Jk,[w("span",Zk,pe(f(E.type)),1),w("h3",eD,pe(E.name),1),w("span",{class:ot(["px-3 py-1 rounded-full text-sm font-semibold",m(E.difficulty)])},pe(E.difficulty),3),E.isPaid?(J(),ee("span",tD,"   ")):Je("",!0)]),w("div",nD,[w("div",sD,[O[2]||(O[2]=w("span",null,"",-1)),w("span",rD,pe(E.time),1)]),w("div",iD,[O[3]||(O[3]=w("span",null,"",-1)),w("span",null,pe(E.address),1)]),w("div",oD,[O[4]||(O[4]=w("span",null,"",-1)),w("span",null,pe(E.type),1)])])]),w("div",aD,[N(E)&&!x(E)?(J(),ee("button",lD,"    ")):x(E)?(J(),ee(Ke,{key:2},[O[5]||(O[5]=w("button",{class:"px-6 py-3 rounded-lg font-semibold bg-green-500 text-white cursor-default shadow-lg"},"   ",-1)),N(E)?Je("",!0):(J(),ee("button",{key:0,onClick:v=>V(E),class:"px-6 py-2 rounded-lg font-semibold transition-all transform hover:scale-105 bg-red-500 text-white hover:bg-red-600 shadow-lg hover:shadow-xl"},"   ",8,uD))],64)):(J(),ee("button",{key:1,onClick:v=>H(E),class:"px-6 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 bg-blue-600 text-white hover:bg-blue-700 shadow-lg hover:shadow-xl"},"   ",8,cD))])]))),128))])]))),128))])),o.value?(J(),ee("div",hD,[w("p",dD," "+pe(o.value),1)])):Je("",!0)]))}},fD={class:"relative z-10 h-full flex flex-col"},pD={class:"bg-gray-800"},mD={class:"flex flex-col lg:flex-row gap-2 lg:gap-4 p-2 sm:p-4 flex-1 min-h-0 overflow-y-auto"},gD={class:"w-full lg:w-80 bg-white bg-opacity-90 rounded-2xl shadow-lg p-2 sm:p-4 flex-shrink-0 overflow-y-auto flex flex-col mb-2 lg:mb-0"},_D={class:"flex flex-col items-center mb-6 pb-6 border-b border-gray-200"},yD={key:0,class:"w-20 h-20 rounded-full mb-3 shadow-md overflow-hidden bg-gray-200"},vD=["src","alt"],wD={key:1,class:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-bold text-2xl mb-3 shadow-md"},ED={class:"flex items-center justify-center gap-2 w-full"},TD={class:"font-semibold text-gray-800 text-center"},ID={class:"text-sm text-gray-500 text-center break-all"},bD={key:0,class:"mb-6"},AD={class:"flex-1 w-full"},Ec={__name:"CabinetView",setup(t){const e=_e(""),n=_e(""),s=_e(""),r=_e(!1),i=_e("training-registration"),o=_e({show:!1,type:"success",title:"",message:""});function l(f,m,_=""){o.value={show:!0,type:f,title:_,message:m}}function c(){o.value.show=!1}const u=Ze(()=>({"form-schedule":rk,"donations-manager":jk,"training-registration":cm})[i.value]||cm);rs(()=>{Qu(vt,f=>{if(f){e.value=f.displayName||"",n.value=f.email||"",s.value=f.photoURL||"";const m=["kulikalovdenis@gmail.com","bugary20@gmail.com"];r.value=m.includes(f.email),r.value&&(i.value="form-schedule")}})});async function d(){await vt.signOut(),window.location.href="/HTF/"}return(f,m)=>(J(),ee("div",{class:"relative h-screen bg-cover bg-center bg-fixed overflow-hidden",style:Fs({backgroundImage:`url(${Vt(Ao)})`})},[m[7]||(m[7]=w("div",{class:"absolute inset-0 bg-black opacity-40"},null,-1)),Ve(_2,{show:o.value.show,type:o.value.type,title:o.value.title,message:o.value.message,onClose:c},null,8,["show","type","title","message"]),w("div",fD,[w("div",pD,[Ve(bo)]),w("div",mD,[w("aside",gD,[w("div",_D,[s.value?(J(),ee("div",yD,[w("img",{src:s.value,alt:e.value,class:"w-full h-full object-cover",referrerpolicy:"no-referrer"},null,8,vD)])):(J(),ee("div",wD,pe(e.value?e.value.charAt(0).toUpperCase():"A"),1)),w("div",ED,[w("p",TD,pe(e.value||""),1),w("button",{onClick:d,class:"bg-gray-200 hover:bg-gray-300 p-1.5 rounded transition flex-shrink-0 border border-red-500",title:""},[...m[3]||(m[3]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-red-500",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z","clip-rule":"evenodd"})],-1)])])]),w("p",ID,pe(n.value),1)]),r.value?(J(),ee("div",bD,[m[5]||(m[5]=w("h3",{class:"text-sm font-semibold text-gray-500 uppercase mb-3"},"",-1)),w("button",{onClick:m[0]||(m[0]=_=>i.value="form-schedule"),class:ot(["w-full text-left px-4 py-3 rounded-lg mb-2 transition flex items-center gap-2",i.value==="form-schedule"?"bg-blue-500 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-700"])},[w("span",{class:ot(i.value==="form-schedule"?"text-white":"text-red-500")},"",2),m[4]||(m[4]=w("span",null," ",-1))],2),w("button",{onClick:m[1]||(m[1]=_=>i.value="donations-manager"),class:ot(["w-full text-left px-4 py-3 rounded-lg mb-2 transition",i.value==="donations-manager"?"bg-blue-500 text-white":"hover:bg-gray-100 text-gray-700"])},"    ",2)])):Je("",!0),w("div",null,[m[6]||(m[6]=w("h3",{class:"text-sm font-semibold text-gray-500 uppercase mb-3"},"",-1)),w("button",{onClick:m[2]||(m[2]=_=>i.value="training-registration"),class:ot(["w-full text-left px-4 py-3 rounded-lg mb-2 transition",i.value==="training-registration"?"bg-blue-500 text-white":"hover:bg-gray-100 text-gray-700"])},"     ",2)])]),w("main",AD,[(J(),Ps(uw(u.value),{notification:o.value,onShowNotification:l},null,40,["notification"]))])])])],4))}},RD={class:"relative z-10 min-h-screen flex flex-col"},SD={class:"bg-gray-800"},CD={class:"flex-1 p-2 sm:p-4 md:p-8"},PD={class:"max-w-6xl mx-auto"},xD={class:"bg-white bg-opacity-95 rounded-2xl shadow-2xl p-2 sm:p-4 md:p-8 mb-4 sm:mb-6"},kD={key:0,class:"text-center text-gray-600"},DD={key:0,class:"bg-white bg-opacity-95 rounded-2xl shadow-2xl p-4 sm:p-8 md:p-12 text-center"},ND={key:1,class:"bg-white bg-opacity-95 rounded-2xl shadow-2xl p-4 sm:p-8 md:p-12 text-center"},VD={key:2,class:"space-y-2 sm:space-y-4"},OD={class:"w-full sm:w-32 flex-shrink-0"},MD={class:"bg-gradient-to-br from-blue-600 to-blue-800 rounded-lg p-2 sm:p-4 text-center sticky top-4"},LD={class:"text-base sm:text-lg font-bold text-white"},FD={class:"flex-1 space-y-3"},UD={class:"p-4"},$D={class:"flex items-start justify-between gap-4"},BD={class:"flex-1"},jD={class:"flex items-center gap-2 mb-2"},HD={class:"text-2xl"},qD={class:"text-lg font-bold text-gray-800"},zD={key:0,class:"px-2 py-0.5 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800"},GD={class:"flex items-center gap-4 text-sm text-gray-600"},WD={class:"flex items-center gap-1"},KD={class:"font-semibold"},QD={class:"flex items-center gap-1"},YD={class:"text-xs"},XD={class:"text-xs"},JD={class:"flex-shrink-0"},ZD=["onClick"],eN={class:"font-semibold text-gray-800"},tN={class:"text-gray-500 text-xs"},nN={key:0,class:"mt-3 pt-3 border-t border-gray-200"},sN={key:0,class:"text-center text-gray-400 text-sm py-2"},rN={key:1,class:"space-y-1"},iN={class:"font-medium"},oN={class:"text-xs text-gray-500"},aN={__name:"ScheduleView",setup(t){const e=_e(!0),n=_e(null),s=_e([]),r=_e(new Set),i=()=>{const V=new Date,C=V.getDay(),O=C===0?-6:1-C,U=new Date(V);U.setDate(V.getDate()+O),U.setHours(0,0,0,0);const F=new Date(U);return F.setDate(U.getDate()+6),F.setHours(23,59,59,999),{monday:U,sunday:F}},o=V=>new Date(V).toLocaleDateString("uk-UA",{day:"2-digit",month:"long"}),l=V=>new Date(V).toLocaleString("uk-UA",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),c=Ze(()=>{if(!n.value||!n.value.trainings)return{};const V={};n.value.trainings.forEach(U=>{const F=U.dayName;V[F]||(V[F]=[]),V[F].push(U)});const C=["","","","","'","",""],O={};return C.forEach(U=>{V[U]&&(O[U]=V[U].sort((F,E)=>F.time.localeCompare(E.time)))}),O}),u=V=>Lv(V),d=V=>({:"bg-green-100 text-green-800",:"bg-yellow-100 text-yellow-800",:"bg-red-100 text-red-800"})[V]||"bg-gray-100 text-gray-800",f=V=>n.value.id+"_"+V.date+"_"+V.time,m=V=>{const C=f(V);return s.value.filter(O=>O.trainingId===C).length},_=V=>{const C=f(V);return s.value.filter(O=>O.trainingId===C)},k=V=>{const C=f(V);r.value.has(C)?r.value.delete(C):r.value.add(C)},x=V=>{const C=f(V);return r.value.has(C)},N=async()=>{try{e.value=!0;const{monday:V,sunday:C}=i(),O=V.toISOString().split("T")[0],U=C.toISOString().split("T")[0],F=zr(ln(Xt,"schedules")),E=await Cs(F),y=[];E.forEach(v=>{const S=v.data(),R=S.weekStart,A=S.weekEnd;R>=O&&A<=U&&y.push({id:v.id,...S})}),y.length>0?(y.sort((v,S)=>{const R=new Date(v.createdAt||0);return new Date(S.createdAt||0).getTime()-R.getTime()}),n.value=y[0],await H(n.value.id)):n.value=null}catch(V){console.error("  :",V)}finally{e.value=!1}},H=async V=>{try{const C=zr(ln(Xt,"registrations"),ca("scheduleId","==",V)),O=await Cs(C);s.value=O.docs.map(U=>({id:U.id,...U.data()}))}catch(C){console.error("  :",C)}};return rs(()=>{N()}),(V,C)=>(J(),ee("div",{class:"relative min-h-screen bg-cover bg-center bg-fixed overflow-y-auto",style:Fs({backgroundImage:`url(${Vt(Ao)})`})},[C[7]||(C[7]=w("div",{class:"absolute inset-0 bg-black opacity-40"},null,-1)),w("div",RD,[w("div",SD,[Ve(bo)]),w("div",CD,[w("div",PD,[w("div",xD,[C[0]||(C[0]=w("h1",{class:"text-4xl font-bold text-gray-800 text-center mb-2 flex items-center justify-center gap-3"},[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"})]),zn("   ")],-1)),n.value?(J(),ee("p",kD,pe(o(n.value.weekStart))+" - "+pe(o(n.value.weekEnd)),1)):Je("",!0)]),e.value?(J(),ee("div",DD,[...C[1]||(C[1]=[w("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"},null,-1),w("p",{class:"text-gray-600"}," ...",-1)])])):!n.value||!n.value.trainings||n.value.trainings.length===0?(J(),ee("div",ND,[...C[2]||(C[2]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 mx-auto mb-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1),w("p",{class:"text-gray-600 text-xl mb-4"},"      ",-1),w("p",{class:"text-gray-500"},"   ",-1)])])):(J(),ee("div",VD,[(J(!0),ee(Ke,null,An(c.value,(O,U)=>(J(),ee("div",{key:U,class:"flex flex-col sm:flex-row gap-2 sm:gap-4"},[w("div",OD,[w("div",MD,[w("h2",LD,pe(U),1)])]),w("div",FD,[(J(!0),ee(Ke,null,An(O,(F,E)=>(J(),ee("div",{key:E,class:"bg-white bg-opacity-95 rounded-lg shadow-md border border-gray-200"},[w("div",UD,[w("div",$D,[w("div",BD,[w("div",jD,[w("span",HD,pe(u(F.type)),1),w("h3",qD,pe(F.name),1),w("span",{class:ot(["px-2 py-0.5 rounded-full text-xs font-semibold",d(F.difficulty)])},pe(F.difficulty),3),F.isPaid?(J(),ee("span",zD,"  ")):Je("",!0)]),w("div",GD,[w("div",WD,[C[3]||(C[3]=w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),w("span",KD,pe(F.time),1)]),w("div",QD,[C[4]||(C[4]=w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)),w("span",YD,pe(F.address),1)]),w("span",XD,pe(F.type),1)])]),w("div",JD,[w("button",{onClick:y=>k(F),class:"flex items-center gap-2 px-3 py-2 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors text-sm"},[C[5]||(C[5]=w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-blue-600",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"})],-1)),w("span",eN,pe(m(F)),1),w("span",tN,pe(x(F)?"":""),1)],8,ZD)])]),x(F)?(J(),ee("div",nN,[_(F).length===0?(J(),ee("div",sN,"   ")):(J(),ee("div",rN,[(J(!0),ee(Ke,null,An(_(F),(y,v)=>(J(),ee("div",{key:v,class:"text-sm text-gray-700 py-1"},[w("span",iN,pe(y.userName),1),C[6]||(C[6]=w("span",{class:"text-gray-400 mx-1"},"",-1)),w("span",oN,pe(l(y.registeredAt)),1)]))),128))]))])):Je("",!0)])]))),128))])]))),128))]))])])])],4))}},lN={class:"relative z-10 min-h-screen flex flex-col"},cN={class:"bg-gray-800"},uN={class:"flex-1 p-2 sm:p-4 md:p-8"},hN={class:"max-w-7xl mx-auto"},dN={key:0,class:"bg-white bg-opacity-95 rounded-2xl shadow-2xl p-8 md:p-12 text-center"},fN={key:1,class:"bg-white bg-opacity-95 rounded-2xl shadow-2xl p-8 md:p-12 text-center"},pN={key:0,class:"w-full h-64 overflow-hidden bg-gray-200"},mN=["src","alt"],gN={key:1,class:"w-full h-64 bg-gradient-to-br from-blue-500 to-yellow-500 flex items-center justify-center"},_N={class:"p-6"},yN={class:"text-2xl font-bold text-gray-800 mb-3"},vN={class:"text-gray-600 mb-6 leading-relaxed"},wN=["href"],EN={class:"text-xs text-gray-400 text-center mt-4"},TN={__name:"DonationsView",setup(t){const e=_e(!1),n=_e([]),s=Ze(()=>{const o=n.value.length;return o===1?"grid grid-cols-1 md:grid-cols-1 gap-6 max-w-md mx-auto":o===2?"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto":o===3?"grid grid-cols-1 md:grid-cols-3 gap-6":"grid grid-cols-1 md:grid-cols-2 gap-6"});async function r(){try{e.value=!0;const o=await Cs(ln(Xt,"donations"));n.value=[],o.forEach(l=>{n.value.push({id:l.id,...l.data()})}),n.value.sort((l,c)=>new Date(c.updatedAt||0)-new Date(l.updatedAt||0))}catch(o){console.error("  :",o)}finally{e.value=!1}}function i(o){return o?new Date(o).toLocaleString("uk-UA",{year:"numeric",month:"long",day:"numeric"}):""}return rs(()=>{r()}),(o,l)=>(J(),ee("div",{class:"relative min-h-screen bg-cover bg-center bg-fixed overflow-y-auto",style:Fs({backgroundImage:`url(${Vt(Ao)})`})},[l[6]||(l[6]=w("div",{class:"absolute inset-0 bg-black opacity-40"},null,-1)),w("div",lN,[w("div",cN,[Ve(bo)]),w("div",uN,[w("div",hN,[l[4]||(l[4]=w("div",{class:"bg-white bg-opacity-95 rounded-2xl shadow-2xl p-4 sm:p-6 md:p-8 mb-6"},[w("h1",{class:"text-4xl font-bold text-gray-800 text-center mb-4 flex items-center justify-center gap-3"},[w("span",{class:"text-5xl"},""),zn("     ")]),w("p",{class:"text-center text-gray-600 text-lg"},"     .    ! ")],-1)),e.value?(J(),ee("div",dN,[...l[0]||(l[0]=[w("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"},null,-1),w("p",{class:"text-gray-600"},"...",-1)])])):n.value.length===0?(J(),ee("div",fN,[...l[1]||(l[1]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 mx-auto mb-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),w("p",{class:"text-gray-600 text-xl"},"     ",-1)])])):(J(),ee("div",{key:2,class:ot(s.value)},[(J(!0),ee(Ke,null,An(n.value,c=>(J(),ee("div",{key:c.id,class:"bg-white bg-opacity-95 rounded-2xl shadow-xl overflow-hidden transform transition-all duration-300 hover:scale-105 hover:shadow-2xl"},[c.imageBase64?(J(),ee("div",pN,[w("img",{src:c.imageBase64,alt:c.title,class:"w-full h-full object-cover"},null,8,mN)])):(J(),ee("div",gN,[...l[2]||(l[2]=[w("span",{class:"text-white text-6xl"},"",-1)])])),w("div",_N,[w("h2",yN,pe(c.title),1),w("p",vN,pe(c.description),1),w("a",{href:c.link,target:"_blank",rel:"noopener noreferrer",class:"block w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-bold py-4 px-6 rounded-xl transition-all duration-300 text-center shadow-lg hover:shadow-xl transform hover:-translate-y-1"},[...l[3]||(l[3]=[w("span",{class:"flex items-center justify-center gap-2"},[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),zn("   ")],-1)])],8,wN),w("p",EN," : "+pe(i(c.updatedAt)),1)])]))),128))],2)),l[5]||(l[5]=w("div",{class:"mt-8 bg-gradient-to-r from-blue-600 to-yellow-500 bg-opacity-95 rounded-2xl shadow-2xl p-6 md:p-8 text-white"},[w("h3",{class:"text-2xl font-bold mb-4 text-center"},"   !"),w("p",{class:"text-center text-lg mb-4"},"      .    ! "),w("p",{class:"text-center text-sm opacity-90"},"        ")],-1))])])])],4))}},Fv=qT({history:TT("/HTF/"),routes:[{path:"/",name:"home",component:l2},{path:"/login",name:"login",component:h2},{path:"/schedule",name:"schedule",component:aN},{path:"/donations",name:"donations",component:TN},{path:"/user",name:"user",component:Ec,meta:{requiresAuth:!0}},{path:"/admin",name:"admin",component:Ec,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/cabinet",name:"cabinet",component:Ec,meta:{requiresAuth:!0}}]}),IN=["kulikalovdenis@gmail.com","bugary20@gmail.com"],bN=()=>new Promise((t,e)=>{const n=Qu(vt,s=>{n(),t(s)},e)});Fv.beforeEach(async(t,e,n)=>{const s=t.matched.some(i=>i.meta.requiresAuth),r=t.matched.some(i=>i.meta.requiresAdmin);if(s||r){const i=await bN();s&&!i?n("/login"):r&&i?IN.includes(i.email||"")?n():n("/user"):n()}else n()});const Uv=kE(LE);Uv.use(Fv);Uv.mount("#app");
