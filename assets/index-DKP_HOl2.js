(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function au(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Ue={},Lr=[],kn=()=>{},zp=()=>!1,Ua=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),lu=t=>t.startsWith("onUpdate:"),vt=Object.assign,cu=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Nv=Object.prototype.hasOwnProperty,Ne=(t,e)=>Nv.call(t,e),de=Array.isArray,Fr=t=>$a(t)==="[object Map]",Gp=t=>$a(t)==="[object Set]",ge=t=>typeof t=="function",it=t=>typeof t=="string",Bs=t=>typeof t=="symbol",ze=t=>t!==null&&typeof t=="object",Wp=t=>(ze(t)||ge(t))&&ge(t.then)&&ge(t.catch),Kp=Object.prototype.toString,$a=t=>Kp.call(t),Vv=t=>$a(t).slice(8,-1),Qp=t=>$a(t)==="[object Object]",uu=t=>it(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ki=au(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ba=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Ov=/-\w/g,cn=Ba(t=>t.replace(Ov,e=>e.slice(1).toUpperCase())),Mv=/\B([A-Z])/g,gr=Ba(t=>t.replace(Mv,"-$1").toLowerCase()),ja=Ba(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ul=Ba(t=>t?`on${ja(t)}`:""),Ss=(t,e)=>!Object.is(t,e),Wo=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Yp=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},hu=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Lv=t=>{const e=it(t)?Number(t):NaN;return isNaN(e)?t:e};let od;const Ha=()=>od||(od=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function js(t){if(de(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=it(s)?Bv(s):js(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(it(t)||ze(t))return t}const Fv=/;(?![^(]*\))/g,Uv=/:([^]+)/,$v=/\/\*[^]*?\*\//g;function Bv(t){const e={};return t.replace($v,"").split(Fv).forEach(n=>{if(n){const s=n.split(Uv);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Et(t){let e="";if(it(t))e=t;else if(de(t))for(let n=0;n<t.length;n++){const s=Et(t[n]);s&&(e+=s+" ")}else if(ze(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const jv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Hv=au(jv);function Jp(t){return!!t||t===""}const Xp=t=>!!(t&&t.__v_isRef===!0),fe=t=>it(t)?t:t==null?"":de(t)||ze(t)&&(t.toString===Kp||!ge(t.toString))?Xp(t)?fe(t.value):JSON.stringify(t,Zp,2):String(t),Zp=(t,e)=>Xp(e)?Zp(t,e.value):Fr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[$l(s,i)+" =>"]=r,n),{})}:Gp(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>$l(n))}:Bs(e)?$l(e):ze(e)&&!de(e)&&!Qp(e)?String(e):e,$l=(t,e="")=>{var n;return Bs(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let Ht;class qv{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ht,!e&&Ht&&(this.index=(Ht.scopes||(Ht.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Ht;try{return Ht=this,e()}finally{Ht=n}}}on(){++this._on===1&&(this.prevScope=Ht,Ht=this)}off(){this._on>0&&--this._on===0&&(Ht=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function zv(){return Ht}let He;const Bl=new WeakSet;class em{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ht&&Ht.active&&Ht.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Bl.has(this)&&(Bl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||nm(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ad(this),sm(this);const e=He,n=mn;He=this,mn=!0;try{return this.fn()}finally{rm(this),He=e,mn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)pu(e);this.deps=this.depsTail=void 0,ad(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Bl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){yc(this)&&this.run()}get dirty(){return yc(this)}}let tm=0,Di,Ni;function nm(t,e=!1){if(t.flags|=8,e){t.next=Ni,Ni=t;return}t.next=Di,Di=t}function du(){tm++}function fu(){if(--tm>0)return;if(Ni){let e=Ni;for(Ni=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Di;){let e=Di;for(Di=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function sm(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function rm(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),pu(s),Gv(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function yc(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(im(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function im(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===zi)||(t.globalVersion=zi,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!yc(t))))return;t.flags|=2;const e=t.dep,n=He,s=mn;He=t,mn=!0;try{sm(t);const r=t.fn(t._value);(e.version===0||Ss(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{He=n,mn=s,rm(t),t.flags&=-3}}function pu(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)pu(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Gv(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let mn=!0;const om=[];function ts(){om.push(mn),mn=!1}function ns(){const t=om.pop();mn=t===void 0?!0:t}function ad(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=He;He=void 0;try{e()}finally{He=n}}}let zi=0;class Wv{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class mu{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!He||!mn||He===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==He)n=this.activeLink=new Wv(He,this),He.deps?(n.prevDep=He.depsTail,He.depsTail.nextDep=n,He.depsTail=n):He.deps=He.depsTail=n,am(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=He.depsTail,n.nextDep=void 0,He.depsTail.nextDep=n,He.depsTail=n,He.deps===n&&(He.deps=s)}return n}trigger(e){this.version++,zi++,this.notify(e)}notify(e){du();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{fu()}}}function am(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)am(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const vc=new WeakMap,ar=Symbol(""),wc=Symbol(""),Gi=Symbol("");function kt(t,e,n){if(mn&&He){let s=vc.get(t);s||vc.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new mu),r.map=s,r.key=n),r.track()}}function Kn(t,e,n,s,r,i){const o=vc.get(t);if(!o){zi++;return}const l=c=>{c&&c.trigger()};if(du(),e==="clear")o.forEach(l);else{const c=de(t),u=c&&uu(n);if(c&&n==="length"){const d=Number(s);o.forEach((p,m)=>{(m==="length"||m===Gi||!Bs(m)&&m>=d)&&l(p)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),u&&l(o.get(Gi)),e){case"add":c?u&&l(o.get("length")):(l(o.get(ar)),Fr(t)&&l(o.get(wc)));break;case"delete":c||(l(o.get(ar)),Fr(t)&&l(o.get(wc)));break;case"set":Fr(t)&&l(o.get(ar));break}}fu()}function Cr(t){const e=xe(t);return e===t?e:(kt(e,"iterate",Gi),an(t)?e:e.map(_n))}function qa(t){return kt(t=xe(t),"iterate",Gi),t}function ys(t,e){return ss(t)?lr(t)?Kr(_n(e)):Kr(e):_n(e)}const Kv={__proto__:null,[Symbol.iterator](){return jl(this,Symbol.iterator,t=>ys(this,t))},concat(...t){return Cr(this).concat(...t.map(e=>de(e)?Cr(e):e))},entries(){return jl(this,"entries",t=>(t[1]=ys(this,t[1]),t))},every(t,e){return Hn(this,"every",t,e,void 0,arguments)},filter(t,e){return Hn(this,"filter",t,e,n=>n.map(s=>ys(this,s)),arguments)},find(t,e){return Hn(this,"find",t,e,n=>ys(this,n),arguments)},findIndex(t,e){return Hn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Hn(this,"findLast",t,e,n=>ys(this,n),arguments)},findLastIndex(t,e){return Hn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Hn(this,"forEach",t,e,void 0,arguments)},includes(...t){return Hl(this,"includes",t)},indexOf(...t){return Hl(this,"indexOf",t)},join(t){return Cr(this).join(t)},lastIndexOf(...t){return Hl(this,"lastIndexOf",t)},map(t,e){return Hn(this,"map",t,e,void 0,arguments)},pop(){return Ii(this,"pop")},push(...t){return Ii(this,"push",t)},reduce(t,...e){return ld(this,"reduce",t,e)},reduceRight(t,...e){return ld(this,"reduceRight",t,e)},shift(){return Ii(this,"shift")},some(t,e){return Hn(this,"some",t,e,void 0,arguments)},splice(...t){return Ii(this,"splice",t)},toReversed(){return Cr(this).toReversed()},toSorted(t){return Cr(this).toSorted(t)},toSpliced(...t){return Cr(this).toSpliced(...t)},unshift(...t){return Ii(this,"unshift",t)},values(){return jl(this,"values",t=>ys(this,t))}};function jl(t,e,n){const s=qa(t),r=s[e]();return s!==t&&!an(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=n(i.value)),i}),r}const Qv=Array.prototype;function Hn(t,e,n,s,r,i){const o=qa(t),l=o!==t&&!an(t),c=o[e];if(c!==Qv[e]){const p=c.apply(t,i);return l?_n(p):p}let u=n;o!==t&&(l?u=function(p,m){return n.call(this,ys(t,p),m,t)}:n.length>2&&(u=function(p,m){return n.call(this,p,m,t)}));const d=c.call(o,u,s);return l&&r?r(d):d}function ld(t,e,n,s){const r=qa(t);let i=n;return r!==t&&(an(t)?n.length>3&&(i=function(o,l,c){return n.call(this,o,l,c,t)}):i=function(o,l,c){return n.call(this,o,ys(t,l),c,t)}),r[e](i,...s)}function Hl(t,e,n){const s=xe(t);kt(s,"iterate",Gi);const r=s[e](...n);return(r===-1||r===!1)&&yu(n[0])?(n[0]=xe(n[0]),s[e](...n)):r}function Ii(t,e,n=[]){ts(),du();const s=xe(t)[e].apply(t,n);return fu(),ns(),s}const Yv=au("__proto__,__v_isRef,__isVue"),lm=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Bs));function Jv(t){Bs(t)||(t=String(t));const e=xe(this);return kt(e,"has",t),e.hasOwnProperty(t)}class cm{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?aw:fm:i?dm:hm).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=de(e);if(!r){let c;if(o&&(c=Kv[n]))return c;if(n==="hasOwnProperty")return Jv}const l=Reflect.get(e,n,Vt(e)?e:s);if((Bs(n)?lm.has(n):Yv(n))||(r||kt(e,"get",n),i))return l;if(Vt(l)){const c=o&&uu(n)?l:l.value;return r&&ze(c)?Tc(c):c}return ze(l)?r?Tc(l):za(l):l}}class um extends cm{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];const o=de(e)&&uu(n);if(!this._isShallow){const u=ss(i);if(!an(s)&&!ss(s)&&(i=xe(i),s=xe(s)),!o&&Vt(i)&&!Vt(s))return u||(i.value=s),!0}const l=o?Number(n)<e.length:Ne(e,n),c=Reflect.set(e,n,s,Vt(e)?e:r);return e===xe(r)&&(l?Ss(s,i)&&Kn(e,"set",n,s):Kn(e,"add",n,s)),c}deleteProperty(e,n){const s=Ne(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&Kn(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!Bs(n)||!lm.has(n))&&kt(e,"has",n),s}ownKeys(e){return kt(e,"iterate",de(e)?"length":ar),Reflect.ownKeys(e)}}class Xv extends cm{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Zv=new um,ew=new Xv,tw=new um(!0);const Ec=t=>t,Mo=t=>Reflect.getPrototypeOf(t);function nw(t,e,n){return function(...s){const r=this.__v_raw,i=xe(r),o=Fr(i),l=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=r[t](...s),d=n?Ec:e?Kr:_n;return!e&&kt(i,"iterate",c?wc:ar),{next(){const{value:p,done:m}=u.next();return m?{value:p,done:m}:{value:l?[d(p[0]),d(p[1])]:d(p),done:m}},[Symbol.iterator](){return this}}}}function Lo(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function sw(t,e){const n={get(r){const i=this.__v_raw,o=xe(i),l=xe(r);t||(Ss(r,l)&&kt(o,"get",r),kt(o,"get",l));const{has:c}=Mo(o),u=e?Ec:t?Kr:_n;if(c.call(o,r))return u(i.get(r));if(c.call(o,l))return u(i.get(l));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&kt(xe(r),"iterate",ar),r.size},has(r){const i=this.__v_raw,o=xe(i),l=xe(r);return t||(Ss(r,l)&&kt(o,"has",r),kt(o,"has",l)),r===l?i.has(r):i.has(r)||i.has(l)},forEach(r,i){const o=this,l=o.__v_raw,c=xe(l),u=e?Ec:t?Kr:_n;return!t&&kt(c,"iterate",ar),l.forEach((d,p)=>r.call(i,u(d),u(p),o))}};return vt(n,t?{add:Lo("add"),set:Lo("set"),delete:Lo("delete"),clear:Lo("clear")}:{add(r){!e&&!an(r)&&!ss(r)&&(r=xe(r));const i=xe(this);return Mo(i).has.call(i,r)||(i.add(r),Kn(i,"add",r,r)),this},set(r,i){!e&&!an(i)&&!ss(i)&&(i=xe(i));const o=xe(this),{has:l,get:c}=Mo(o);let u=l.call(o,r);u||(r=xe(r),u=l.call(o,r));const d=c.call(o,r);return o.set(r,i),u?Ss(i,d)&&Kn(o,"set",r,i):Kn(o,"add",r,i),this},delete(r){const i=xe(this),{has:o,get:l}=Mo(i);let c=o.call(i,r);c||(r=xe(r),c=o.call(i,r)),l&&l.call(i,r);const u=i.delete(r);return c&&Kn(i,"delete",r,void 0),u},clear(){const r=xe(this),i=r.size!==0,o=r.clear();return i&&Kn(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=nw(r,t,e)}),n}function gu(t,e){const n=sw(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(Ne(n,r)&&r in s?n:s,r,i)}const rw={get:gu(!1,!1)},iw={get:gu(!1,!0)},ow={get:gu(!0,!1)};const hm=new WeakMap,dm=new WeakMap,fm=new WeakMap,aw=new WeakMap;function lw(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function cw(t){return t.__v_skip||!Object.isExtensible(t)?0:lw(Vv(t))}function za(t){return ss(t)?t:_u(t,!1,Zv,rw,hm)}function pm(t){return _u(t,!1,tw,iw,dm)}function Tc(t){return _u(t,!0,ew,ow,fm)}function _u(t,e,n,s,r){if(!ze(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=cw(t);if(i===0)return t;const o=r.get(t);if(o)return o;const l=new Proxy(t,i===2?s:n);return r.set(t,l),l}function lr(t){return ss(t)?lr(t.__v_raw):!!(t&&t.__v_isReactive)}function ss(t){return!!(t&&t.__v_isReadonly)}function an(t){return!!(t&&t.__v_isShallow)}function yu(t){return t?!!t.__v_raw:!1}function xe(t){const e=t&&t.__v_raw;return e?xe(e):t}function uw(t){return!Ne(t,"__v_skip")&&Object.isExtensible(t)&&Yp(t,"__v_skip",!0),t}const _n=t=>ze(t)?za(t):t,Kr=t=>ze(t)?Tc(t):t;function Vt(t){return t?t.__v_isRef===!0:!1}function ye(t){return mm(t,!1)}function hw(t){return mm(t,!0)}function mm(t,e){return Vt(t)?t:new dw(t,e)}class dw{constructor(e,n){this.dep=new mu,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:xe(e),this._value=n?e:_n(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||an(e)||ss(e);e=s?e:xe(e),Ss(e,n)&&(this._rawValue=e,this._value=s?e:_n(e),this.dep.trigger())}}function Bt(t){return Vt(t)?t.value:t}const fw={get:(t,e,n)=>e==="__v_raw"?t:Bt(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return Vt(r)&&!Vt(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function gm(t){return lr(t)?t:new Proxy(t,fw)}class pw{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new mu(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=zi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&He!==this)return nm(this,!0),!0}get value(){const e=this.dep.track();return im(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function mw(t,e,n=!1){let s,r;return ge(t)?s=t:(s=t.get,r=t.set),new pw(s,r,n)}const Fo={},la=new WeakMap;let Zs;function gw(t,e=!1,n=Zs){if(n){let s=la.get(n);s||la.set(n,s=[]),s.push(t)}}function _w(t,e,n=Ue){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:l,call:c}=n,u=Q=>r?Q:an(Q)||r===!1||r===0?Qn(Q,1):Qn(Q);let d,p,m,v,O=!1,F=!1;if(Vt(t)?(p=()=>t.value,O=an(t)):lr(t)?(p=()=>u(t),O=!0):de(t)?(F=!0,O=t.some(Q=>lr(Q)||an(Q)),p=()=>t.map(Q=>{if(Vt(Q))return Q.value;if(lr(Q))return u(Q);if(ge(Q))return c?c(Q,2):Q()})):ge(t)?e?p=c?()=>c(t,2):t:p=()=>{if(m){ts();try{m()}finally{ns()}}const Q=Zs;Zs=d;try{return c?c(t,3,[v]):t(v)}finally{Zs=Q}}:p=kn,e&&r){const Q=p,B=r===!0?1/0:r;p=()=>Qn(Q(),B)}const $=zv(),K=()=>{d.stop(),$&&$.active&&cu($.effects,d)};if(i&&e){const Q=e;e=(...B)=>{Q(...B),K()}}let M=F?new Array(t.length).fill(Fo):Fo;const U=Q=>{if(!(!(d.flags&1)||!d.dirty&&!Q))if(e){const B=d.run();if(r||O||(F?B.some((j,b)=>Ss(j,M[b])):Ss(B,M))){m&&m();const j=Zs;Zs=d;try{const b=[B,M===Fo?void 0:F&&M[0]===Fo?[]:M,v];M=B,c?c(e,3,b):e(...b)}finally{Zs=j}}}else d.run()};return l&&l(U),d=new em(p),d.scheduler=o?()=>o(U,!1):U,v=Q=>gw(Q,!1,d),m=d.onStop=()=>{const Q=la.get(d);if(Q){if(c)c(Q,4);else for(const B of Q)B();la.delete(d)}},e?s?U(!0):M=d.run():o?o(U.bind(null,!0),!0):d.run(),K.pause=d.pause.bind(d),K.resume=d.resume.bind(d),K.stop=K,K}function Qn(t,e=1/0,n){if(e<=0||!ze(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,Vt(t))Qn(t.value,e,n);else if(de(t))for(let s=0;s<t.length;s++)Qn(t[s],e,n);else if(Gp(t)||Fr(t))t.forEach(s=>{Qn(s,e,n)});else if(Qp(t)){for(const s in t)Qn(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Qn(t[s],e,n)}return t}function lo(t,e,n,s){try{return s?t(...s):t()}catch(r){Ga(r,e,n)}}function yn(t,e,n,s){if(ge(t)){const r=lo(t,e,n,s);return r&&Wp(r)&&r.catch(i=>{Ga(i,e,n)}),r}if(de(t)){const r=[];for(let i=0;i<t.length;i++)r.push(yn(t[i],e,n,s));return r}}function Ga(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Ue;if(e){let l=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](t,c,u)===!1)return}l=l.parent}if(i){ts(),lo(i,null,10,[t,c,u]),ns();return}}yw(t,n,r,s,o)}function yw(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const Ut=[];let Rn=-1;const Ur=[];let vs=null,Pr=0;const _m=Promise.resolve();let ca=null;function vu(t){const e=ca||_m;return t?e.then(this?t.bind(this):t):e}function vw(t){let e=Rn+1,n=Ut.length;for(;e<n;){const s=e+n>>>1,r=Ut[s],i=Wi(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function wu(t){if(!(t.flags&1)){const e=Wi(t),n=Ut[Ut.length-1];!n||!(t.flags&2)&&e>=Wi(n)?Ut.push(t):Ut.splice(vw(e),0,t),t.flags|=1,ym()}}function ym(){ca||(ca=_m.then(wm))}function ww(t){de(t)?Ur.push(...t):vs&&t.id===-1?vs.splice(Pr+1,0,t):t.flags&1||(Ur.push(t),t.flags|=1),ym()}function cd(t,e,n=Rn+1){for(;n<Ut.length;n++){const s=Ut[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;Ut.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function vm(t){if(Ur.length){const e=[...new Set(Ur)].sort((n,s)=>Wi(n)-Wi(s));if(Ur.length=0,vs){vs.push(...e);return}for(vs=e,Pr=0;Pr<vs.length;Pr++){const n=vs[Pr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}vs=null,Pr=0}}const Wi=t=>t.id==null?t.flags&2?-1:1/0:t.id;function wm(t){try{for(Rn=0;Rn<Ut.length;Rn++){const e=Ut[Rn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),lo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Rn<Ut.length;Rn++){const e=Ut[Rn];e&&(e.flags&=-2)}Rn=-1,Ut.length=0,vm(),ca=null,(Ut.length||Ur.length)&&wm()}}let Yt=null,Em=null;function ua(t){const e=Yt;return Yt=t,Em=t&&t.type.__scopeId||null,e}function tr(t,e=Yt,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&fa(-1);const i=ua(e);let o;try{o=t(...r)}finally{ua(i),s._d&&fa(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function ql(t,e){if(Yt===null)return t;const n=Ja(Yt),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,l,c=Ue]=e[r];i&&(ge(i)&&(i={mounted:i,updated:i}),i.deep&&Qn(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:l,modifiers:c}))}return t}function Qs(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const l=r[o];i&&(l.oldValue=i[o].value);let c=l.dir[s];c&&(ts(),yn(c,n,8,[t.el,l,t,e]),ns())}}const Ew=Symbol("_vte"),Tm=t=>t.__isTeleport,Wn=Symbol("_leaveCb"),Uo=Symbol("_enterCb");function Tw(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ri(()=>{t.isMounted=!0}),km(()=>{t.isUnmounting=!0}),t}const tn=[Function,Array],Im={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:tn,onEnter:tn,onAfterEnter:tn,onEnterCancelled:tn,onBeforeLeave:tn,onLeave:tn,onAfterLeave:tn,onLeaveCancelled:tn,onBeforeAppear:tn,onAppear:tn,onAfterAppear:tn,onAppearCancelled:tn},bm=t=>{const e=t.subTree;return e.component?bm(e.component):e},Iw={name:"BaseTransition",props:Im,setup(t,{slots:e}){const n=eg(),s=Tw();return()=>{const r=e.default&&Rm(e.default(),!0);if(!r||!r.length)return;const i=Am(r),o=xe(t),{mode:l}=o;if(s.isLeaving)return zl(i);const c=ud(i);if(!c)return zl(i);let u=Ic(c,o,s,n,p=>u=p);c.type!==$t&&Ki(c,u);let d=n.subTree&&ud(n.subTree);if(d&&d.type!==$t&&!nr(d,c)&&bm(n).type!==$t){let p=Ic(d,o,s,n);if(Ki(d,p),l==="out-in"&&c.type!==$t)return s.isLeaving=!0,p.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete p.afterLeave,d=void 0},zl(i);l==="in-out"&&c.type!==$t?p.delayLeave=(m,v,O)=>{const F=Sm(s,d);F[String(d.key)]=d,m[Wn]=()=>{v(),m[Wn]=void 0,delete u.delayedLeave,d=void 0},u.delayedLeave=()=>{O(),delete u.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return i}}};function Am(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==$t){e=n;break}}return e}const bw=Iw;function Sm(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function Ic(t,e,n,s,r){const{appear:i,mode:o,persisted:l=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:d,onEnterCancelled:p,onBeforeLeave:m,onLeave:v,onAfterLeave:O,onLeaveCancelled:F,onBeforeAppear:$,onAppear:K,onAfterAppear:M,onAppearCancelled:U}=e,Q=String(t.key),B=Sm(n,t),j=(_,R)=>{_&&yn(_,s,9,R)},b=(_,R)=>{const S=R[1];j(_,R),de(_)?_.every(A=>A.length<=1)&&S():_.length<=1&&S()},y={mode:o,persisted:l,beforeEnter(_){let R=c;if(!n.isMounted)if(i)R=$||c;else return;_[Wn]&&_[Wn](!0);const S=B[Q];S&&nr(t,S)&&S.el[Wn]&&S.el[Wn](),j(R,[_])},enter(_){let R=u,S=d,A=p;if(!n.isMounted)if(i)R=K||u,S=M||d,A=U||p;else return;let w=!1;const we=_[Uo]=$e=>{w||(w=!0,$e?j(A,[_]):j(S,[_]),y.delayedLeave&&y.delayedLeave(),_[Uo]=void 0)};R?b(R,[_,we]):we()},leave(_,R){const S=String(t.key);if(_[Uo]&&_[Uo](!0),n.isUnmounting)return R();j(m,[_]);let A=!1;const w=_[Wn]=we=>{A||(A=!0,R(),we?j(F,[_]):j(O,[_]),_[Wn]=void 0,B[S]===t&&delete B[S])};B[S]=t,v?b(v,[_,w]):w()},clone(_){const R=Ic(_,e,n,s,r);return r&&r(R),R}};return y}function zl(t){if(Wa(t))return t=Ns(t),t.children=null,t}function ud(t){if(!Wa(t))return Tm(t.type)&&t.children?Am(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&ge(n.default))return n.default()}}function Ki(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ki(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Rm(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const l=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Ye?(o.patchFlag&128&&r++,s=s.concat(Rm(o.children,e,l))):(e||o.type!==$t)&&s.push(l!=null?Ns(o,{key:l}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}function Cm(t,e){return ge(t)?vt({name:t.name},e,{setup:t}):t}function Pm(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const ha=new WeakMap;function Vi(t,e,n,s,r=!1){if(de(t)){t.forEach((O,F)=>Vi(O,e&&(de(e)?e[F]:e),n,s,r));return}if(Oi(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Vi(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?Ja(s.component):s.el,o=r?null:i,{i:l,r:c}=t,u=e&&e.r,d=l.refs===Ue?l.refs={}:l.refs,p=l.setupState,m=xe(p),v=p===Ue?zp:O=>Ne(m,O);if(u!=null&&u!==c){if(hd(e),it(u))d[u]=null,v(u)&&(p[u]=null);else if(Vt(u)){u.value=null;const O=e;O.k&&(d[O.k]=null)}}if(ge(c))lo(c,l,12,[o,d]);else{const O=it(c),F=Vt(c);if(O||F){const $=()=>{if(t.f){const K=O?v(c)?p[c]:d[c]:c.value;if(r)de(K)&&cu(K,i);else if(de(K))K.includes(i)||K.push(i);else if(O)d[c]=[i],v(c)&&(p[c]=d[c]);else{const M=[i];c.value=M,t.k&&(d[t.k]=M)}}else O?(d[c]=o,v(c)&&(p[c]=o)):F&&(c.value=o,t.k&&(d[t.k]=o))};if(o){const K=()=>{$(),ha.delete(t)};K.id=-1,ha.set(t,K),Qt(K,n)}else hd(t),$()}}}function hd(t){const e=ha.get(t);e&&(e.flags|=8,ha.delete(t))}Ha().requestIdleCallback;Ha().cancelIdleCallback;const Oi=t=>!!t.type.__asyncLoader,Wa=t=>t.type.__isKeepAlive;function Aw(t,e){xm(t,"a",e)}function Sw(t,e){xm(t,"da",e)}function xm(t,e,n=Nt){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Ka(e,s,n),n){let r=n.parent;for(;r&&r.parent;)Wa(r.parent.vnode)&&Rw(s,e,n,r),r=r.parent}}function Rw(t,e,n,s){const r=Ka(e,t,s,!0);Dm(()=>{cu(s[e],r)},n)}function Ka(t,e,n=Nt,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{ts();const l=co(n),c=yn(e,n,t,o);return l(),ns(),c});return s?r.unshift(i):r.push(i),i}}const ls=t=>(e,n=Nt)=>{(!Yi||t==="sp")&&Ka(t,(...s)=>e(...s),n)},Cw=ls("bm"),ri=ls("m"),Pw=ls("bu"),xw=ls("u"),km=ls("bum"),Dm=ls("um"),kw=ls("sp"),Dw=ls("rtg"),Nw=ls("rtc");function Vw(t,e=Nt){Ka("ec",t,e)}const Ow="components";function Nm(t,e){return Lw(Ow,t,!0,e)||t}const Mw=Symbol.for("v-ndc");function Lw(t,e,n=!0,s=!1){const r=Yt||Nt;if(r){const i=r.type;{const l=b0(i,!1);if(l&&(l===e||l===cn(e)||l===ja(cn(e))))return i}const o=dd(r[t]||i[t],e)||dd(r.appContext[t],e);return!o&&s?i:o}}function dd(t,e){return t&&(t[e]||t[cn(e)]||t[ja(cn(e))])}function xn(t,e,n,s){let r;const i=n,o=de(t);if(o||it(t)){const l=o&&lr(t);let c=!1,u=!1;l&&(c=!an(t),u=ss(t),t=qa(t)),r=new Array(t.length);for(let d=0,p=t.length;d<p;d++)r[d]=e(c?u?Kr(_n(t[d])):_n(t[d]):t[d],d,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let l=0;l<t;l++)r[l]=e(l+1,l,void 0,i)}else if(ze(t))if(t[Symbol.iterator])r=Array.from(t,(l,c)=>e(l,c,void 0,i));else{const l=Object.keys(t);r=new Array(l.length);for(let c=0,u=l.length;c<u;c++){const d=l[c];r[c]=e(t[d],d,c,i)}}else r=[];return r}const bc=t=>t?tg(t)?Ja(t):bc(t.parent):null,Mi=vt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>bc(t.parent),$root:t=>bc(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Om(t),$forceUpdate:t=>t.f||(t.f=()=>{wu(t.update)}),$nextTick:t=>t.n||(t.n=vu.bind(t.proxy)),$watch:t=>Kw.bind(t)}),Gl=(t,e)=>t!==Ue&&!t.__isScriptSetup&&Ne(t,e),Fw={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:l,appContext:c}=t;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(Gl(s,e))return o[e]=1,s[e];if(r!==Ue&&Ne(r,e))return o[e]=2,r[e];if(Ne(i,e))return o[e]=3,i[e];if(n!==Ue&&Ne(n,e))return o[e]=4,n[e];Ac&&(o[e]=0)}}const u=Mi[e];let d,p;if(u)return e==="$attrs"&&kt(t.attrs,"get",""),u(t);if((d=l.__cssModules)&&(d=d[e]))return d;if(n!==Ue&&Ne(n,e))return o[e]=4,n[e];if(p=c.config.globalProperties,Ne(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return Gl(r,e)?(r[e]=n,!0):s!==Ue&&Ne(s,e)?(s[e]=n,!0):Ne(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,props:i,type:o}},l){let c;return!!(n[l]||t!==Ue&&l[0]!=="$"&&Ne(t,l)||Gl(e,l)||Ne(i,l)||Ne(s,l)||Ne(Mi,l)||Ne(r.config.globalProperties,l)||(c=o.__cssModules)&&c[l])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ne(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function fd(t){return de(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Ac=!0;function Uw(t){const e=Om(t),n=t.proxy,s=t.ctx;Ac=!1,e.beforeCreate&&pd(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:l,provide:c,inject:u,created:d,beforeMount:p,mounted:m,beforeUpdate:v,updated:O,activated:F,deactivated:$,beforeDestroy:K,beforeUnmount:M,destroyed:U,unmounted:Q,render:B,renderTracked:j,renderTriggered:b,errorCaptured:y,serverPrefetch:_,expose:R,inheritAttrs:S,components:A,directives:w,filters:we}=e;if(u&&$w(u,s,null),o)for(const Pe in o){const Te=o[Pe];ge(Te)&&(s[Pe]=Te.bind(n))}if(r){const Pe=r.call(n,n);ze(Pe)&&(t.data=za(Pe))}if(Ac=!0,i)for(const Pe in i){const Te=i[Pe],St=ge(Te)?Te.bind(n,n):ge(Te.get)?Te.get.bind(n,n):kn,zt=!ge(Te)&&ge(Te.set)?Te.set.bind(n):kn,Mt=rt({get:St,set:zt});Object.defineProperty(s,Pe,{enumerable:!0,configurable:!0,get:()=>Mt.value,set:ct=>Mt.value=ct})}if(l)for(const Pe in l)Vm(l[Pe],s,n,Pe);if(c){const Pe=ge(c)?c.call(n):c;Reflect.ownKeys(Pe).forEach(Te=>{Ko(Te,Pe[Te])})}d&&pd(d,t,"c");function Ge(Pe,Te){de(Te)?Te.forEach(St=>Pe(St.bind(n))):Te&&Pe(Te.bind(n))}if(Ge(Cw,p),Ge(ri,m),Ge(Pw,v),Ge(xw,O),Ge(Aw,F),Ge(Sw,$),Ge(Vw,y),Ge(Nw,j),Ge(Dw,b),Ge(km,M),Ge(Dm,Q),Ge(kw,_),de(R))if(R.length){const Pe=t.exposed||(t.exposed={});R.forEach(Te=>{Object.defineProperty(Pe,Te,{get:()=>n[Te],set:St=>n[Te]=St,enumerable:!0})})}else t.exposed||(t.exposed={});B&&t.render===kn&&(t.render=B),S!=null&&(t.inheritAttrs=S),A&&(t.components=A),w&&(t.directives=w),_&&Pm(t)}function $w(t,e,n=kn){de(t)&&(t=Sc(t));for(const s in t){const r=t[s];let i;ze(r)?"default"in r?i=Dn(r.from||s,r.default,!0):i=Dn(r.from||s):i=Dn(r),Vt(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function pd(t,e,n){yn(de(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function Vm(t,e,n,s){let r=s.includes(".")?Fm(n,s):()=>n[s];if(it(t)){const i=e[t];ge(i)&&Rs(r,i)}else if(ge(t))Rs(r,t.bind(n));else if(ze(t))if(de(t))t.forEach(i=>Vm(i,e,n,s));else{const i=ge(t.handler)?t.handler.bind(n):e[t.handler];ge(i)&&Rs(r,i,t)}}function Om(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,l=i.get(e);let c;return l?c=l:!r.length&&!n&&!s?c=e:(c={},r.length&&r.forEach(u=>da(c,u,o,!0)),da(c,e,o)),ze(e)&&i.set(e,c),c}function da(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&da(t,i,n,!0),r&&r.forEach(o=>da(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const l=Bw[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const Bw={data:md,props:gd,emits:gd,methods:Ri,computed:Ri,beforeCreate:Lt,created:Lt,beforeMount:Lt,mounted:Lt,beforeUpdate:Lt,updated:Lt,beforeDestroy:Lt,beforeUnmount:Lt,destroyed:Lt,unmounted:Lt,activated:Lt,deactivated:Lt,errorCaptured:Lt,serverPrefetch:Lt,components:Ri,directives:Ri,watch:Hw,provide:md,inject:jw};function md(t,e){return e?t?function(){return vt(ge(t)?t.call(this,this):t,ge(e)?e.call(this,this):e)}:e:t}function jw(t,e){return Ri(Sc(t),Sc(e))}function Sc(t){if(de(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Lt(t,e){return t?[...new Set([].concat(t,e))]:e}function Ri(t,e){return t?vt(Object.create(null),t,e):e}function gd(t,e){return t?de(t)&&de(e)?[...new Set([...t,...e])]:vt(Object.create(null),fd(t),fd(e??{})):e}function Hw(t,e){if(!t)return e;if(!e)return t;const n=vt(Object.create(null),t);for(const s in e)n[s]=Lt(t[s],e[s]);return n}function Mm(){return{app:null,config:{isNativeTag:zp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let qw=0;function zw(t,e){return function(s,r=null){ge(s)||(s=vt({},s)),r!=null&&!ze(r)&&(r=null);const i=Mm(),o=new WeakSet,l=[];let c=!1;const u=i.app={_uid:qw++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:S0,get config(){return i.config},set config(d){},use(d,...p){return o.has(d)||(d&&ge(d.install)?(o.add(d),d.install(u,...p)):ge(d)&&(o.add(d),d(u,...p))),u},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),u},component(d,p){return p?(i.components[d]=p,u):i.components[d]},directive(d,p){return p?(i.directives[d]=p,u):i.directives[d]},mount(d,p,m){if(!c){const v=u._ceVNode||Ve(s,r);return v.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),t(v,d,m),c=!0,u._container=d,d.__vue_app__=u,Ja(v.component)}},onUnmount(d){l.push(d)},unmount(){c&&(yn(l,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(d,p){return i.provides[d]=p,u},runWithContext(d){const p=$r;$r=u;try{return d()}finally{$r=p}}};return u}}let $r=null;function Ko(t,e){if(Nt){let n=Nt.provides;const s=Nt.parent&&Nt.parent.provides;s===n&&(n=Nt.provides=Object.create(s)),n[t]=e}}function Dn(t,e,n=!1){const s=eg();if(s||$r){let r=$r?$r._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&ge(e)?e.call(s&&s.proxy):e}}const Gw=Symbol.for("v-scx"),Ww=()=>Dn(Gw);function Rs(t,e,n){return Lm(t,e,n)}function Lm(t,e,n=Ue){const{immediate:s,deep:r,flush:i,once:o}=n,l=vt({},n),c=e&&s||!e&&i!=="post";let u;if(Yi){if(i==="sync"){const v=Ww();u=v.__watcherHandles||(v.__watcherHandles=[])}else if(!c){const v=()=>{};return v.stop=kn,v.resume=kn,v.pause=kn,v}}const d=Nt;l.call=(v,O,F)=>yn(v,d,O,F);let p=!1;i==="post"?l.scheduler=v=>{Qt(v,d&&d.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(v,O)=>{O?v():wu(v)}),l.augmentJob=v=>{e&&(v.flags|=4),p&&(v.flags|=2,d&&(v.id=d.uid,v.i=d))};const m=_w(t,e,l);return Yi&&(u?u.push(m):c&&m()),m}function Kw(t,e,n){const s=this.proxy,r=it(t)?t.includes(".")?Fm(s,t):()=>s[t]:t.bind(s,s);let i;ge(e)?i=e:(i=e.handler,n=e);const o=co(this),l=Lm(r,i.bind(s),n);return o(),l}function Fm(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const Qw=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${cn(e)}Modifiers`]||t[`${gr(e)}Modifiers`];function Yw(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||Ue;let r=n;const i=e.startsWith("update:"),o=i&&Qw(s,e.slice(7));o&&(o.trim&&(r=n.map(d=>it(d)?d.trim():d)),o.number&&(r=n.map(hu)));let l,c=s[l=Ul(e)]||s[l=Ul(cn(e))];!c&&i&&(c=s[l=Ul(gr(e))]),c&&yn(c,t,6,r);const u=s[l+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,yn(u,t,6,r)}}const Jw=new WeakMap;function Um(t,e,n=!1){const s=n?Jw:e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},l=!1;if(!ge(t)){const c=u=>{const d=Um(u,e,!0);d&&(l=!0,vt(o,d))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!l?(ze(t)&&s.set(t,null),null):(de(i)?i.forEach(c=>o[c]=null):vt(o,i),ze(t)&&s.set(t,o),o)}function Qa(t,e){return!t||!Ua(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ne(t,e[0].toLowerCase()+e.slice(1))||Ne(t,gr(e))||Ne(t,e))}function _d(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:l,emit:c,render:u,renderCache:d,props:p,data:m,setupState:v,ctx:O,inheritAttrs:F}=t,$=ua(t);let K,M;try{if(n.shapeFlag&4){const Q=r||s,B=Q;K=Pn(u.call(B,Q,d,p,v,m,O)),M=l}else{const Q=e;K=Pn(Q.length>1?Q(p,{attrs:l,slots:o,emit:c}):Q(p,null)),M=e.props?l:Xw(l)}}catch(Q){Li.length=0,Ga(Q,t,1),K=Ve($t)}let U=K;if(M&&F!==!1){const Q=Object.keys(M),{shapeFlag:B}=U;Q.length&&B&7&&(i&&Q.some(lu)&&(M=Zw(M,i)),U=Ns(U,M,!1,!0))}return n.dirs&&(U=Ns(U,null,!1,!0),U.dirs=U.dirs?U.dirs.concat(n.dirs):n.dirs),n.transition&&Ki(U,n.transition),K=U,ua($),K}const Xw=t=>{let e;for(const n in t)(n==="class"||n==="style"||Ua(n))&&((e||(e={}))[n]=t[n]);return e},Zw=(t,e)=>{const n={};for(const s in t)(!lu(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function e0(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:l,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?yd(s,o,u):!!o;if(c&8){const d=e.dynamicProps;for(let p=0;p<d.length;p++){const m=d[p];if(o[m]!==s[m]&&!Qa(u,m))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?yd(s,o,u):!0:!!o;return!1}function yd(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!Qa(n,i))return!0}return!1}function t0({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const $m={},Bm=()=>Object.create($m),jm=t=>Object.getPrototypeOf(t)===$m;function n0(t,e,n,s=!1){const r={},i=Bm();t.propsDefaults=Object.create(null),Hm(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:pm(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function s0(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,l=xe(r),[c]=t.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let p=0;p<d.length;p++){let m=d[p];if(Qa(t.emitsOptions,m))continue;const v=e[m];if(c)if(Ne(i,m))v!==i[m]&&(i[m]=v,u=!0);else{const O=cn(m);r[O]=Rc(c,l,O,v,t,!1)}else v!==i[m]&&(i[m]=v,u=!0)}}}else{Hm(t,e,r,i)&&(u=!0);let d;for(const p in l)(!e||!Ne(e,p)&&((d=gr(p))===p||!Ne(e,d)))&&(c?n&&(n[p]!==void 0||n[d]!==void 0)&&(r[p]=Rc(c,l,p,void 0,t,!0)):delete r[p]);if(i!==l)for(const p in i)(!e||!Ne(e,p))&&(delete i[p],u=!0)}u&&Kn(t.attrs,"set","")}function Hm(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,l;if(e)for(let c in e){if(ki(c))continue;const u=e[c];let d;r&&Ne(r,d=cn(c))?!i||!i.includes(d)?n[d]=u:(l||(l={}))[d]=u:Qa(t.emitsOptions,c)||(!(c in s)||u!==s[c])&&(s[c]=u,o=!0)}if(i){const c=xe(n),u=l||Ue;for(let d=0;d<i.length;d++){const p=i[d];n[p]=Rc(r,c,p,u[p],t,!Ne(u,p))}}return o}function Rc(t,e,n,s,r,i){const o=t[n];if(o!=null){const l=Ne(o,"default");if(l&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&ge(c)){const{propsDefaults:u}=r;if(n in u)s=u[n];else{const d=co(r);s=u[n]=c.call(null,e),d()}}else s=c;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!l?s=!1:o[1]&&(s===""||s===gr(n))&&(s=!0))}return s}const r0=new WeakMap;function qm(t,e,n=!1){const s=n?r0:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},l=[];let c=!1;if(!ge(t)){const d=p=>{c=!0;const[m,v]=qm(p,e,!0);vt(o,m),v&&l.push(...v)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!i&&!c)return ze(t)&&s.set(t,Lr),Lr;if(de(i))for(let d=0;d<i.length;d++){const p=cn(i[d]);vd(p)&&(o[p]=Ue)}else if(i)for(const d in i){const p=cn(d);if(vd(p)){const m=i[d],v=o[p]=de(m)||ge(m)?{type:m}:vt({},m),O=v.type;let F=!1,$=!0;if(de(O))for(let K=0;K<O.length;++K){const M=O[K],U=ge(M)&&M.name;if(U==="Boolean"){F=!0;break}else U==="String"&&($=!1)}else F=ge(O)&&O.name==="Boolean";v[0]=F,v[1]=$,(F||Ne(v,"default"))&&l.push(p)}}const u=[o,l];return ze(t)&&s.set(t,u),u}function vd(t){return t[0]!=="$"&&!ki(t)}const Eu=t=>t==="_"||t==="_ctx"||t==="$stable",Tu=t=>de(t)?t.map(Pn):[Pn(t)],i0=(t,e,n)=>{if(e._n)return e;const s=tr((...r)=>Tu(e(...r)),n);return s._c=!1,s},zm=(t,e,n)=>{const s=t._ctx;for(const r in t){if(Eu(r))continue;const i=t[r];if(ge(i))e[r]=i0(r,i,s);else if(i!=null){const o=Tu(i);e[r]=()=>o}}},Gm=(t,e)=>{const n=Tu(e);t.slots.default=()=>n},Wm=(t,e,n)=>{for(const s in e)(n||!Eu(s))&&(t[s]=e[s])},o0=(t,e,n)=>{const s=t.slots=Bm();if(t.vnode.shapeFlag&32){const r=e._;r?(Wm(s,e,n),n&&Yp(s,"_",r,!0)):zm(e,s)}else e&&Gm(t,e)},a0=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=Ue;if(s.shapeFlag&32){const l=e._;l?n&&l===1?i=!1:Wm(r,e,n):(i=!e.$stable,zm(e,r)),o=e}else e&&(Gm(t,e),o={default:1});if(i)for(const l in r)!Eu(l)&&o[l]==null&&delete r[l]},Qt=d0;function l0(t){return c0(t)}function c0(t,e){const n=Ha();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:l,createComment:c,setText:u,setElementText:d,parentNode:p,nextSibling:m,setScopeId:v=kn,insertStaticContent:O}=t,F=(E,C,D,q=null,G=null,x=null,P=void 0,T=null,k=!!C.dynamicChildren)=>{if(E===C)return;E&&!nr(E,C)&&(q=H(E),ct(E,G,x,!0),E=null),C.patchFlag===-2&&(k=!1,C.dynamicChildren=null);const{type:V,ref:Y,shapeFlag:J}=C;switch(V){case Ya:$(E,C,D,q);break;case $t:K(E,C,D,q);break;case Qo:E==null&&M(C,D,q,P);break;case Ye:A(E,C,D,q,G,x,P,T,k);break;default:J&1?B(E,C,D,q,G,x,P,T,k):J&6?w(E,C,D,q,G,x,P,T,k):(J&64||J&128)&&V.process(E,C,D,q,G,x,P,T,k,le)}Y!=null&&G?Vi(Y,E&&E.ref,x,C||E,!C):Y==null&&E&&E.ref!=null&&Vi(E.ref,null,x,E,!0)},$=(E,C,D,q)=>{if(E==null)s(C.el=l(C.children),D,q);else{const G=C.el=E.el;C.children!==E.children&&u(G,C.children)}},K=(E,C,D,q)=>{E==null?s(C.el=c(C.children||""),D,q):C.el=E.el},M=(E,C,D,q)=>{[E.el,E.anchor]=O(E.children,C,D,q,E.el,E.anchor)},U=({el:E,anchor:C},D,q)=>{let G;for(;E&&E!==C;)G=m(E),s(E,D,q),E=G;s(C,D,q)},Q=({el:E,anchor:C})=>{let D;for(;E&&E!==C;)D=m(E),r(E),E=D;r(C)},B=(E,C,D,q,G,x,P,T,k)=>{if(C.type==="svg"?P="svg":C.type==="math"&&(P="mathml"),E==null)j(C,D,q,G,x,P,T,k);else{const V=E.el&&E.el._isVueCE?E.el:null;try{V&&V._beginPatch(),_(E,C,G,x,P,T,k)}finally{V&&V._endPatch()}}},j=(E,C,D,q,G,x,P,T)=>{let k,V;const{props:Y,shapeFlag:J,transition:oe,dirs:ae}=E;if(k=E.el=o(E.type,x,Y&&Y.is,Y),J&8?d(k,E.children):J&16&&y(E.children,k,null,q,G,Wl(E,x),P,T),ae&&Qs(E,null,q,"created"),b(k,E,E.scopeId,P,q),Y){for(const Se in Y)Se!=="value"&&!ki(Se)&&i(k,Se,null,Y[Se],x,q);"value"in Y&&i(k,"value",null,Y.value,x),(V=Y.onVnodeBeforeMount)&&Sn(V,q,E)}ae&&Qs(E,null,q,"beforeMount");const te=u0(G,oe);te&&oe.beforeEnter(k),s(k,C,D),((V=Y&&Y.onVnodeMounted)||te||ae)&&Qt(()=>{V&&Sn(V,q,E),te&&oe.enter(k),ae&&Qs(E,null,q,"mounted")},G)},b=(E,C,D,q,G)=>{if(D&&v(E,D),q)for(let x=0;x<q.length;x++)v(E,q[x]);if(G){let x=G.subTree;if(C===x||Ym(x.type)&&(x.ssContent===C||x.ssFallback===C)){const P=G.vnode;b(E,P,P.scopeId,P.slotScopeIds,G.parent)}}},y=(E,C,D,q,G,x,P,T,k=0)=>{for(let V=k;V<E.length;V++){const Y=E[V]=T?ws(E[V]):Pn(E[V]);F(null,Y,C,D,q,G,x,P,T)}},_=(E,C,D,q,G,x,P)=>{const T=C.el=E.el;let{patchFlag:k,dynamicChildren:V,dirs:Y}=C;k|=E.patchFlag&16;const J=E.props||Ue,oe=C.props||Ue;let ae;if(D&&Ys(D,!1),(ae=oe.onVnodeBeforeUpdate)&&Sn(ae,D,C,E),Y&&Qs(C,E,D,"beforeUpdate"),D&&Ys(D,!0),(J.innerHTML&&oe.innerHTML==null||J.textContent&&oe.textContent==null)&&d(T,""),V?R(E.dynamicChildren,V,T,D,q,Wl(C,G),x):P||Te(E,C,T,null,D,q,Wl(C,G),x,!1),k>0){if(k&16)S(T,J,oe,D,G);else if(k&2&&J.class!==oe.class&&i(T,"class",null,oe.class,G),k&4&&i(T,"style",J.style,oe.style,G),k&8){const te=C.dynamicProps;for(let Se=0;Se<te.length;Se++){const me=te[Se],Ce=J[me],Xe=oe[me];(Xe!==Ce||me==="value")&&i(T,me,Ce,Xe,G,D)}}k&1&&E.children!==C.children&&d(T,C.children)}else!P&&V==null&&S(T,J,oe,D,G);((ae=oe.onVnodeUpdated)||Y)&&Qt(()=>{ae&&Sn(ae,D,C,E),Y&&Qs(C,E,D,"updated")},q)},R=(E,C,D,q,G,x,P)=>{for(let T=0;T<C.length;T++){const k=E[T],V=C[T],Y=k.el&&(k.type===Ye||!nr(k,V)||k.shapeFlag&198)?p(k.el):D;F(k,V,Y,null,q,G,x,P,!0)}},S=(E,C,D,q,G)=>{if(C!==D){if(C!==Ue)for(const x in C)!ki(x)&&!(x in D)&&i(E,x,C[x],null,G,q);for(const x in D){if(ki(x))continue;const P=D[x],T=C[x];P!==T&&x!=="value"&&i(E,x,T,P,G,q)}"value"in D&&i(E,"value",C.value,D.value,G)}},A=(E,C,D,q,G,x,P,T,k)=>{const V=C.el=E?E.el:l(""),Y=C.anchor=E?E.anchor:l("");let{patchFlag:J,dynamicChildren:oe,slotScopeIds:ae}=C;ae&&(T=T?T.concat(ae):ae),E==null?(s(V,D,q),s(Y,D,q),y(C.children||[],D,Y,G,x,P,T,k)):J>0&&J&64&&oe&&E.dynamicChildren?(R(E.dynamicChildren,oe,D,G,x,P,T),(C.key!=null||G&&C===G.subTree)&&Km(E,C,!0)):Te(E,C,D,Y,G,x,P,T,k)},w=(E,C,D,q,G,x,P,T,k)=>{C.slotScopeIds=T,E==null?C.shapeFlag&512?G.ctx.activate(C,D,q,P,k):we(C,D,q,G,x,P,k):$e(E,C,k)},we=(E,C,D,q,G,x,P)=>{const T=E.component=v0(E,q,G);if(Wa(E)&&(T.ctx.renderer=le),w0(T,!1,P),T.asyncDep){if(G&&G.registerDep(T,Ge,P),!E.el){const k=T.subTree=Ve($t);K(null,k,C,D),E.placeholder=k.el}}else Ge(T,E,C,D,G,x,P)},$e=(E,C,D)=>{const q=C.component=E.component;if(e0(E,C,D))if(q.asyncDep&&!q.asyncResolved){Pe(q,C,D);return}else q.next=C,q.update();else C.el=E.el,q.vnode=C},Ge=(E,C,D,q,G,x,P)=>{const T=()=>{if(E.isMounted){let{next:J,bu:oe,u:ae,parent:te,vnode:Se}=E;{const Be=Qm(E);if(Be){J&&(J.el=Se.el,Pe(E,J,P)),Be.asyncDep.then(()=>{E.isUnmounted||T()});return}}let me=J,Ce;Ys(E,!1),J?(J.el=Se.el,Pe(E,J,P)):J=Se,oe&&Wo(oe),(Ce=J.props&&J.props.onVnodeBeforeUpdate)&&Sn(Ce,te,J,Se),Ys(E,!0);const Xe=_d(E),Qe=E.subTree;E.subTree=Xe,F(Qe,Xe,p(Qe.el),H(Qe),E,G,x),J.el=Xe.el,me===null&&t0(E,Xe.el),ae&&Qt(ae,G),(Ce=J.props&&J.props.onVnodeUpdated)&&Qt(()=>Sn(Ce,te,J,Se),G)}else{let J;const{el:oe,props:ae}=C,{bm:te,m:Se,parent:me,root:Ce,type:Xe}=E,Qe=Oi(C);Ys(E,!1),te&&Wo(te),!Qe&&(J=ae&&ae.onVnodeBeforeMount)&&Sn(J,me,C),Ys(E,!0);{Ce.ce&&Ce.ce._def.shadowRoot!==!1&&Ce.ce._injectChildStyle(Xe);const Be=E.subTree=_d(E);F(null,Be,D,q,E,G,x),C.el=Be.el}if(Se&&Qt(Se,G),!Qe&&(J=ae&&ae.onVnodeMounted)){const Be=C;Qt(()=>Sn(J,me,Be),G)}(C.shapeFlag&256||me&&Oi(me.vnode)&&me.vnode.shapeFlag&256)&&E.a&&Qt(E.a,G),E.isMounted=!0,C=D=q=null}};E.scope.on();const k=E.effect=new em(T);E.scope.off();const V=E.update=k.run.bind(k),Y=E.job=k.runIfDirty.bind(k);Y.i=E,Y.id=E.uid,k.scheduler=()=>wu(Y),Ys(E,!0),V()},Pe=(E,C,D)=>{C.component=E;const q=E.vnode.props;E.vnode=C,E.next=null,s0(E,C.props,q,D),a0(E,C.children,D),ts(),cd(E),ns()},Te=(E,C,D,q,G,x,P,T,k=!1)=>{const V=E&&E.children,Y=E?E.shapeFlag:0,J=C.children,{patchFlag:oe,shapeFlag:ae}=C;if(oe>0){if(oe&128){zt(V,J,D,q,G,x,P,T,k);return}else if(oe&256){St(V,J,D,q,G,x,P,T,k);return}}ae&8?(Y&16&&ft(V,G,x),J!==V&&d(D,J)):Y&16?ae&16?zt(V,J,D,q,G,x,P,T,k):ft(V,G,x,!0):(Y&8&&d(D,""),ae&16&&y(J,D,q,G,x,P,T,k))},St=(E,C,D,q,G,x,P,T,k)=>{E=E||Lr,C=C||Lr;const V=E.length,Y=C.length,J=Math.min(V,Y);let oe;for(oe=0;oe<J;oe++){const ae=C[oe]=k?ws(C[oe]):Pn(C[oe]);F(E[oe],ae,D,null,G,x,P,T,k)}V>Y?ft(E,G,x,!0,!1,J):y(C,D,q,G,x,P,T,k,J)},zt=(E,C,D,q,G,x,P,T,k)=>{let V=0;const Y=C.length;let J=E.length-1,oe=Y-1;for(;V<=J&&V<=oe;){const ae=E[V],te=C[V]=k?ws(C[V]):Pn(C[V]);if(nr(ae,te))F(ae,te,D,null,G,x,P,T,k);else break;V++}for(;V<=J&&V<=oe;){const ae=E[J],te=C[oe]=k?ws(C[oe]):Pn(C[oe]);if(nr(ae,te))F(ae,te,D,null,G,x,P,T,k);else break;J--,oe--}if(V>J){if(V<=oe){const ae=oe+1,te=ae<Y?C[ae].el:q;for(;V<=oe;)F(null,C[V]=k?ws(C[V]):Pn(C[V]),D,te,G,x,P,T,k),V++}}else if(V>oe)for(;V<=J;)ct(E[V],G,x,!0),V++;else{const ae=V,te=V,Se=new Map;for(V=te;V<=oe;V++){const pt=C[V]=k?ws(C[V]):Pn(C[V]);pt.key!=null&&Se.set(pt.key,V)}let me,Ce=0;const Xe=oe-te+1;let Qe=!1,Be=0;const Rt=new Array(Xe);for(V=0;V<Xe;V++)Rt[V]=0;for(V=ae;V<=J;V++){const pt=E[V];if(Ce>=Xe){ct(pt,G,x,!0);continue}let tt;if(pt.key!=null)tt=Se.get(pt.key);else for(me=te;me<=oe;me++)if(Rt[me-te]===0&&nr(pt,C[me])){tt=me;break}tt===void 0?ct(pt,G,x,!0):(Rt[tt-te]=V+1,tt>=Be?Be=tt:Qe=!0,F(pt,C[tt],D,null,G,x,P,T,k),Ce++)}const Zt=Qe?h0(Rt):Lr;for(me=Zt.length-1,V=Xe-1;V>=0;V--){const pt=te+V,tt=C[pt],cs=C[pt+1],jn=pt+1<Y?cs.el||cs.placeholder:q;Rt[V]===0?F(null,tt,D,jn,G,x,P,T,k):Qe&&(me<0||V!==Zt[me]?Mt(tt,D,jn,2):me--)}}},Mt=(E,C,D,q,G=null)=>{const{el:x,type:P,transition:T,children:k,shapeFlag:V}=E;if(V&6){Mt(E.component.subTree,C,D,q);return}if(V&128){E.suspense.move(C,D,q);return}if(V&64){P.move(E,C,D,le);return}if(P===Ye){s(x,C,D);for(let J=0;J<k.length;J++)Mt(k[J],C,D,q);s(E.anchor,C,D);return}if(P===Qo){U(E,C,D);return}if(q!==2&&V&1&&T)if(q===0)T.beforeEnter(x),s(x,C,D),Qt(()=>T.enter(x),G);else{const{leave:J,delayLeave:oe,afterLeave:ae}=T,te=()=>{E.ctx.isUnmounted?r(x):s(x,C,D)},Se=()=>{x._isLeaving&&x[Wn](!0),J(x,()=>{te(),ae&&ae()})};oe?oe(x,te,Se):Se()}else s(x,C,D)},ct=(E,C,D,q=!1,G=!1)=>{const{type:x,props:P,ref:T,children:k,dynamicChildren:V,shapeFlag:Y,patchFlag:J,dirs:oe,cacheIndex:ae}=E;if(J===-2&&(G=!1),T!=null&&(ts(),Vi(T,null,D,E,!0),ns()),ae!=null&&(C.renderCache[ae]=void 0),Y&256){C.ctx.deactivate(E);return}const te=Y&1&&oe,Se=!Oi(E);let me;if(Se&&(me=P&&P.onVnodeBeforeUnmount)&&Sn(me,C,E),Y&6)Wt(E.component,D,q);else{if(Y&128){E.suspense.unmount(D,q);return}te&&Qs(E,null,C,"beforeUnmount"),Y&64?E.type.remove(E,C,D,le,q):V&&!V.hasOnce&&(x!==Ye||J>0&&J&64)?ft(V,C,D,!1,!0):(x===Ye&&J&384||!G&&Y&16)&&ft(k,C,D),q&&un(E)}(Se&&(me=P&&P.onVnodeUnmounted)||te)&&Qt(()=>{me&&Sn(me,C,E),te&&Qs(E,null,C,"unmounted")},D)},un=E=>{const{type:C,el:D,anchor:q,transition:G}=E;if(C===Ye){Gt(D,q);return}if(C===Qo){Q(E);return}const x=()=>{r(D),G&&!G.persisted&&G.afterLeave&&G.afterLeave()};if(E.shapeFlag&1&&G&&!G.persisted){const{leave:P,delayLeave:T}=G,k=()=>P(D,x);T?T(E.el,x,k):k()}else x()},Gt=(E,C)=>{let D;for(;E!==C;)D=m(E),r(E),E=D;r(C)},Wt=(E,C,D)=>{const{bum:q,scope:G,job:x,subTree:P,um:T,m:k,a:V}=E;wd(k),wd(V),q&&Wo(q),G.stop(),x&&(x.flags|=8,ct(P,E,C,D)),T&&Qt(T,C),Qt(()=>{E.isUnmounted=!0},C)},ft=(E,C,D,q=!1,G=!1,x=0)=>{for(let P=x;P<E.length;P++)ct(E[P],C,D,q,G)},H=E=>{if(E.shapeFlag&6)return H(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const C=m(E.anchor||E.el),D=C&&C[Ew];return D?m(D):C};let se=!1;const ee=(E,C,D)=>{E==null?C._vnode&&ct(C._vnode,null,null,!0):F(C._vnode||null,E,C,null,null,null,D),C._vnode=E,se||(se=!0,cd(),vm(),se=!1)},le={p:F,um:ct,m:Mt,r:un,mt:we,mc:y,pc:Te,pbc:R,n:H,o:t};return{render:ee,hydrate:void 0,createApp:zw(ee)}}function Wl({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ys({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function u0(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Km(t,e,n=!1){const s=t.children,r=e.children;if(de(s)&&de(r))for(let i=0;i<s.length;i++){const o=s[i];let l=r[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[i]=ws(r[i]),l.el=o.el),!n&&l.patchFlag!==-2&&Km(o,l)),l.type===Ya&&l.patchFlag!==-1&&(l.el=o.el),l.type===$t&&!l.el&&(l.el=o.el)}}function h0(t){const e=t.slice(),n=[0];let s,r,i,o,l;const c=t.length;for(s=0;s<c;s++){const u=t[s];if(u!==0){if(r=n[n.length-1],t[r]<u){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)l=i+o>>1,t[n[l]]<u?i=l+1:o=l;u<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Qm(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Qm(e)}function wd(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Ym=t=>t.__isSuspense;function d0(t,e){e&&e.pendingBranch?de(t)?e.effects.push(...t):e.effects.push(t):ww(t)}const Ye=Symbol.for("v-fgt"),Ya=Symbol.for("v-txt"),$t=Symbol.for("v-cmt"),Qo=Symbol.for("v-stc"),Li=[];let Jt=null;function Z(t=!1){Li.push(Jt=t?null:[])}function f0(){Li.pop(),Jt=Li[Li.length-1]||null}let Qi=1;function fa(t,e=!1){Qi+=t,t<0&&Jt&&e&&(Jt.hasOnce=!0)}function Jm(t){return t.dynamicChildren=Qi>0?Jt||Lr:null,f0(),Qi>0&&Jt&&Jt.push(t),t}function ne(t,e,n,s,r,i){return Jm(I(t,e,n,s,r,i,!0))}function pa(t,e,n,s,r){return Jm(Ve(t,e,n,s,r,!0))}function ma(t){return t?t.__v_isVNode===!0:!1}function nr(t,e){return t.type===e.type&&t.key===e.key}const Xm=({key:t})=>t??null,Yo=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?it(t)||Vt(t)||ge(t)?{i:Yt,r:t,k:e,f:!!n}:t:null);function I(t,e=null,n=null,s=0,r=null,i=t===Ye?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Xm(e),ref:e&&Yo(e),scopeId:Em,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Yt};return l?(Iu(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=it(n)?8:16),Qi>0&&!o&&Jt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Jt.push(c),c}const Ve=p0;function p0(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===Mw)&&(t=$t),ma(t)){const l=Ns(t,e,!0);return n&&Iu(l,n),Qi>0&&!i&&Jt&&(l.shapeFlag&6?Jt[Jt.indexOf(t)]=l:Jt.push(l)),l.patchFlag=-2,l}if(A0(t)&&(t=t.__vccOpts),e){e=m0(e);let{class:l,style:c}=e;l&&!it(l)&&(e.class=Et(l)),ze(c)&&(yu(c)&&!de(c)&&(c=vt({},c)),e.style=js(c))}const o=it(t)?1:Ym(t)?128:Tm(t)?64:ze(t)?4:ge(t)?2:0;return I(t,e,n,s,r,o,i,!0)}function m0(t){return t?yu(t)||jm(t)?vt({},t):t:null}function Ns(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:l,transition:c}=t,u=e?g0(r||{},e):r,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Xm(u),ref:e&&e.ref?n&&i?de(i)?i.concat(Yo(e)):[i,Yo(e)]:Yo(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ye?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ns(t.ssContent),ssFallback:t.ssFallback&&Ns(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&s&&Ki(d,c.clone(d)),d}function Mr(t=" ",e=0){return Ve(Ya,null,t,e)}function Zm(t,e){const n=Ve(Qo,null,t);return n.staticCount=e,n}function nt(t="",e=!1){return e?(Z(),pa($t,null,t)):Ve($t,null,t)}function Pn(t){return t==null||typeof t=="boolean"?Ve($t):de(t)?Ve(Ye,null,t.slice()):ma(t)?ws(t):Ve(Ya,null,String(t))}function ws(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ns(t)}function Iu(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(de(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),Iu(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!jm(e)?e._ctx=Yt:r===3&&Yt&&(Yt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ge(e)?(e={default:e,_ctx:Yt},n=32):(e=String(e),s&64?(n=16,e=[Mr(e)]):n=8);t.children=e,t.shapeFlag|=n}function g0(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Et([e.class,s.class]));else if(r==="style")e.style=js([e.style,s.style]);else if(Ua(r)){const i=e[r],o=s[r];o&&i!==o&&!(de(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function Sn(t,e,n,s=null){yn(t,e,7,[n,s])}const _0=Mm();let y0=0;function v0(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||_0,i={uid:y0++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new qv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:qm(s,r),emitsOptions:Um(s,r),emit:null,emitted:null,propsDefaults:Ue,inheritAttrs:s.inheritAttrs,ctx:Ue,data:Ue,props:Ue,attrs:Ue,slots:Ue,refs:Ue,setupState:Ue,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Yw.bind(null,i),t.ce&&t.ce(i),i}let Nt=null;const eg=()=>Nt||Yt;let ga,Cc;{const t=Ha(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};ga=e("__VUE_INSTANCE_SETTERS__",n=>Nt=n),Cc=e("__VUE_SSR_SETTERS__",n=>Yi=n)}const co=t=>{const e=Nt;return ga(t),t.scope.on(),()=>{t.scope.off(),ga(e)}},Ed=()=>{Nt&&Nt.scope.off(),ga(null)};function tg(t){return t.vnode.shapeFlag&4}let Yi=!1;function w0(t,e=!1,n=!1){e&&Cc(e);const{props:s,children:r}=t.vnode,i=tg(t);n0(t,s,i,e),o0(t,r,n||e);const o=i?E0(t,e):void 0;return e&&Cc(!1),o}function E0(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Fw);const{setup:s}=n;if(s){ts();const r=t.setupContext=s.length>1?I0(t):null,i=co(t),o=lo(s,t,0,[t.props,r]),l=Wp(o);if(ns(),i(),(l||t.sp)&&!Oi(t)&&Pm(t),l){if(o.then(Ed,Ed),e)return o.then(c=>{Td(t,c)}).catch(c=>{Ga(c,t,0)});t.asyncDep=o}else Td(t,o)}else ng(t)}function Td(t,e,n){ge(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ze(e)&&(t.setupState=gm(e)),ng(t)}function ng(t,e,n){const s=t.type;t.render||(t.render=s.render||kn);{const r=co(t);ts();try{Uw(t)}finally{ns(),r()}}}const T0={get(t,e){return kt(t,"get",""),t[e]}};function I0(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,T0),slots:t.slots,emit:t.emit,expose:e}}function Ja(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(gm(uw(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Mi)return Mi[n](t)},has(e,n){return n in e||n in Mi}})):t.proxy}function b0(t,e=!0){return ge(t)?t.displayName||t.name:t.name||e&&t.__name}function A0(t){return ge(t)&&"__vccOpts"in t}const rt=(t,e)=>mw(t,e,Yi);function bu(t,e,n){try{fa(-1);const s=arguments.length;return s===2?ze(e)&&!de(e)?ma(e)?Ve(t,null,[e]):Ve(t,e):Ve(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&ma(n)&&(n=[n]),Ve(t,e,n))}finally{fa(1)}}const S0="3.5.25";let Pc;const Id=typeof window<"u"&&window.trustedTypes;if(Id)try{Pc=Id.createPolicy("vue",{createHTML:t=>t})}catch{}const sg=Pc?t=>Pc.createHTML(t):t=>t,R0="http://www.w3.org/2000/svg",C0="http://www.w3.org/1998/Math/MathML",Gn=typeof document<"u"?document:null,bd=Gn&&Gn.createElement("template"),P0={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Gn.createElementNS(R0,t):e==="mathml"?Gn.createElementNS(C0,t):n?Gn.createElement(t,{is:n}):Gn.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Gn.createTextNode(t),createComment:t=>Gn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Gn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{bd.innerHTML=sg(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const l=bd.content;if(s==="svg"||s==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},ms="transition",bi="animation",Ji=Symbol("_vtc"),rg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},x0=vt({},Im,rg),k0=t=>(t.displayName="Transition",t.props=x0,t),D0=k0((t,{slots:e})=>bu(bw,N0(t),e)),Js=(t,e=[])=>{de(t)?t.forEach(n=>n(...e)):t&&t(...e)},Ad=t=>t?de(t)?t.some(e=>e.length>1):t.length>1:!1;function N0(t){const e={};for(const A in t)A in rg||(e[A]=t[A]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:u=o,appearToClass:d=l,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:v=`${n}-leave-to`}=t,O=V0(r),F=O&&O[0],$=O&&O[1],{onBeforeEnter:K,onEnter:M,onEnterCancelled:U,onLeave:Q,onLeaveCancelled:B,onBeforeAppear:j=K,onAppear:b=M,onAppearCancelled:y=U}=e,_=(A,w,we,$e)=>{A._enterCancelled=$e,Xs(A,w?d:l),Xs(A,w?u:o),we&&we()},R=(A,w)=>{A._isLeaving=!1,Xs(A,p),Xs(A,v),Xs(A,m),w&&w()},S=A=>(w,we)=>{const $e=A?b:M,Ge=()=>_(w,A,we);Js($e,[w,Ge]),Sd(()=>{Xs(w,A?c:i),qn(w,A?d:l),Ad($e)||Rd(w,s,F,Ge)})};return vt(e,{onBeforeEnter(A){Js(K,[A]),qn(A,i),qn(A,o)},onBeforeAppear(A){Js(j,[A]),qn(A,c),qn(A,u)},onEnter:S(!1),onAppear:S(!0),onLeave(A,w){A._isLeaving=!0;const we=()=>R(A,w);qn(A,p),A._enterCancelled?(qn(A,m),xd(A)):(xd(A),qn(A,m)),Sd(()=>{A._isLeaving&&(Xs(A,p),qn(A,v),Ad(Q)||Rd(A,s,$,we))}),Js(Q,[A,we])},onEnterCancelled(A){_(A,!1,void 0,!0),Js(U,[A])},onAppearCancelled(A){_(A,!0,void 0,!0),Js(y,[A])},onLeaveCancelled(A){R(A),Js(B,[A])}})}function V0(t){if(t==null)return null;if(ze(t))return[Kl(t.enter),Kl(t.leave)];{const e=Kl(t);return[e,e]}}function Kl(t){return Lv(t)}function qn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Ji]||(t[Ji]=new Set)).add(e)}function Xs(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[Ji];n&&(n.delete(e),n.size||(t[Ji]=void 0))}function Sd(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let O0=0;function Rd(t,e,n,s){const r=t._endId=++O0,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:l,propCount:c}=M0(t,e);if(!o)return s();const u=o+"end";let d=0;const p=()=>{t.removeEventListener(u,m),i()},m=v=>{v.target===t&&++d>=c&&p()};setTimeout(()=>{d<c&&p()},l+1),t.addEventListener(u,m)}function M0(t,e){const n=window.getComputedStyle(t),s=O=>(n[O]||"").split(", "),r=s(`${ms}Delay`),i=s(`${ms}Duration`),o=Cd(r,i),l=s(`${bi}Delay`),c=s(`${bi}Duration`),u=Cd(l,c);let d=null,p=0,m=0;e===ms?o>0&&(d=ms,p=o,m=i.length):e===bi?u>0&&(d=bi,p=u,m=c.length):(p=Math.max(o,u),d=p>0?o>u?ms:bi:null,m=d?d===ms?i.length:c.length:0);const v=d===ms&&/\b(?:transform|all)(?:,|$)/.test(s(`${ms}Property`).toString());return{type:d,timeout:p,propCount:m,hasTransform:v}}function Cd(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>Pd(n)+Pd(t[s])))}function Pd(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function xd(t){return(t?t.ownerDocument:document).body.offsetHeight}function L0(t,e,n){const s=t[Ji];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const kd=Symbol("_vod"),F0=Symbol("_vsh"),U0=Symbol(""),$0=/(?:^|;)\s*display\s*:/;function B0(t,e,n){const s=t.style,r=it(n);let i=!1;if(n&&!r){if(e)if(it(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&Jo(s,l,"")}else for(const o in e)n[o]==null&&Jo(s,o,"");for(const o in n)o==="display"&&(i=!0),Jo(s,o,n[o])}else if(r){if(e!==n){const o=s[U0];o&&(n+=";"+o),s.cssText=n,i=$0.test(n)}}else e&&t.removeAttribute("style");kd in t&&(t[kd]=i?s.display:"",t[F0]&&(s.display="none"))}const Dd=/\s*!important$/;function Jo(t,e,n){if(de(n))n.forEach(s=>Jo(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=j0(t,e);Dd.test(n)?t.setProperty(gr(s),n.replace(Dd,""),"important"):t[s]=n}}const Nd=["Webkit","Moz","ms"],Ql={};function j0(t,e){const n=Ql[e];if(n)return n;let s=cn(e);if(s!=="filter"&&s in t)return Ql[e]=s;s=ja(s);for(let r=0;r<Nd.length;r++){const i=Nd[r]+s;if(i in t)return Ql[e]=i}return e}const Vd="http://www.w3.org/1999/xlink";function Od(t,e,n,s,r,i=Hv(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Vd,e.slice(6,e.length)):t.setAttributeNS(Vd,e,n):n==null||i&&!Jp(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Bs(n)?String(n):n)}function Md(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?sg(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=Jp(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function xr(t,e,n,s){t.addEventListener(e,n,s)}function H0(t,e,n,s){t.removeEventListener(e,n,s)}const Ld=Symbol("_vei");function q0(t,e,n,s,r=null){const i=t[Ld]||(t[Ld]={}),o=i[e];if(s&&o)o.value=s;else{const[l,c]=z0(e);if(s){const u=i[e]=K0(s,r);xr(t,l,u,c)}else o&&(H0(t,l,o,c),i[e]=void 0)}}const Fd=/(?:Once|Passive|Capture)$/;function z0(t){let e;if(Fd.test(t)){e={};let s;for(;s=t.match(Fd);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):gr(t.slice(2)),e]}let Yl=0;const G0=Promise.resolve(),W0=()=>Yl||(G0.then(()=>Yl=0),Yl=Date.now());function K0(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;yn(Q0(s,n.value),e,5,[s])};return n.value=t,n.attached=W0(),n}function Q0(t,e){if(de(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const Ud=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Y0=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?L0(t,s,o):e==="style"?B0(t,n,s):Ua(e)?lu(e)||q0(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):J0(t,e,s,o))?(Md(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Od(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!it(s))?Md(t,cn(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Od(t,e,s,o))};function J0(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&Ud(e)&&ge(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Ud(e)&&it(n)?!1:e in t}const $d=t=>{const e=t.props["onUpdate:modelValue"]||!1;return de(e)?n=>Wo(e,n):e};function X0(t){t.target.composing=!0}function Bd(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Jl=Symbol("_assign");function jd(t,e,n){return e&&(t=t.trim()),n&&(t=hu(t)),t}const Xl={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[Jl]=$d(r);const i=s||r.props&&r.props.type==="number";xr(t,e?"change":"input",o=>{o.target.composing||t[Jl](jd(t.value,n,i))}),(n||i)&&xr(t,"change",()=>{t.value=jd(t.value,n,i)}),e||(xr(t,"compositionstart",X0),xr(t,"compositionend",Bd),xr(t,"change",Bd))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(t[Jl]=$d(o),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?hu(t.value):t.value,c=e??"";l!==c&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||r&&t.value.trim()===c)||(t.value=c))}},Z0=["ctrl","shift","alt","meta"],eE={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Z0.some(n=>t[`${n}Key`]&&!e.includes(n))},Hd=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const l=eE[e[o]];if(l&&l(r,e))return}return t(r,...i)})},tE=vt({patchProp:Y0},P0);let qd;function nE(){return qd||(qd=l0(tE))}const sE=(...t)=>{const e=nE().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=iE(s);if(!r)return;const i=e._component;!ge(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,rE(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function rE(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function iE(t){return it(t)?document.querySelector(t):t}const uo=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},oE={},aE={class:"min-h-screen w-full overflow-x-hidden"};function lE(t,e){const n=Nm("router-view");return Z(),ne("div",aE,[Ve(n)])}const cE=uo(oE,[["render",lE]]);const kr=typeof document<"u";function ig(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function uE(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&ig(t.default)}const ke=Object.assign;function Zl(t,e){const n={};for(const s in e){const r=e[s];n[s]=vn(r)?r.map(t):t(r)}return n}const Fi=()=>{},vn=Array.isArray;function zd(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}const og=/#/g,hE=/&/g,dE=/\//g,fE=/=/g,pE=/\?/g,ag=/\+/g,mE=/%5B/g,gE=/%5D/g,lg=/%5E/g,_E=/%60/g,cg=/%7B/g,yE=/%7C/g,ug=/%7D/g,vE=/%20/g;function Au(t){return t==null?"":encodeURI(""+t).replace(yE,"|").replace(mE,"[").replace(gE,"]")}function wE(t){return Au(t).replace(cg,"{").replace(ug,"}").replace(lg,"^")}function xc(t){return Au(t).replace(ag,"%2B").replace(vE,"+").replace(og,"%23").replace(hE,"%26").replace(_E,"`").replace(cg,"{").replace(ug,"}").replace(lg,"^")}function EE(t){return xc(t).replace(fE,"%3D")}function TE(t){return Au(t).replace(og,"%23").replace(pE,"%3F")}function IE(t){return TE(t).replace(dE,"%2F")}function Xi(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const bE=/\/$/,AE=t=>t.replace(bE,"");function ec(t,e,n="/"){let s,r={},i="",o="";const l=e.indexOf("#");let c=e.indexOf("?");return c=l>=0&&c>l?-1:c,c>=0&&(s=e.slice(0,c),i=e.slice(c,l>0?l:e.length),r=t(i.slice(1))),l>=0&&(s=s||e.slice(0,l),o=e.slice(l,e.length)),s=PE(s??e,n),{fullPath:s+i+o,path:s,query:r,hash:Xi(o)}}function SE(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Gd(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function RE(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&Qr(e.matched[s],n.matched[r])&&hg(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Qr(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function hg(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!CE(t[n],e[n]))return!1;return!0}function CE(t,e){return vn(t)?Wd(t,e):vn(e)?Wd(e,t):t===e}function Wd(t,e){return vn(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function PE(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,l;for(o=0;o<s.length;o++)if(l=s[o],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const gs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let kc=function(t){return t.pop="pop",t.push="push",t}({}),tc=function(t){return t.back="back",t.forward="forward",t.unknown="",t}({});function xE(t){if(!t)if(kr){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),AE(t)}const kE=/^[^#]+#/;function DE(t,e){return t.replace(kE,"#")+e}function NE(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const Xa=()=>({left:window.scrollX,top:window.scrollY});function VE(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=NE(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Kd(t,e){return(history.state?history.state.position-e:-1)+t}const Dc=new Map;function OE(t,e){Dc.set(t,e)}function ME(t){const e=Dc.get(t);return Dc.delete(t),e}function LE(t){return typeof t=="string"||t&&typeof t=="object"}function dg(t){return typeof t=="string"||typeof t=="symbol"}let et=function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t}({});const fg=Symbol("");et.MATCHER_NOT_FOUND+"",et.NAVIGATION_GUARD_REDIRECT+"",et.NAVIGATION_ABORTED+"",et.NAVIGATION_CANCELLED+"",et.NAVIGATION_DUPLICATED+"";function Yr(t,e){return ke(new Error,{type:t,[fg]:!0},e)}function zn(t,e){return t instanceof Error&&fg in t&&(e==null||!!(t.type&e))}const FE=["params","query","hash"];function UE(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of FE)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function $E(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(ag," "),i=r.indexOf("="),o=Xi(i<0?r:r.slice(0,i)),l=i<0?null:Xi(r.slice(i+1));if(o in e){let c=e[o];vn(c)||(c=e[o]=[c]),c.push(l)}else e[o]=l}return e}function Qd(t){let e="";for(let n in t){const s=t[n];if(n=EE(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(vn(s)?s.map(r=>r&&xc(r)):[s&&xc(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function BE(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=vn(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const jE=Symbol(""),Yd=Symbol(""),Za=Symbol(""),pg=Symbol(""),Nc=Symbol("");function Ai(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Es(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((l,c)=>{const u=m=>{m===!1?c(Yr(et.NAVIGATION_ABORTED,{from:n,to:e})):m instanceof Error?c(m):LE(m)?c(Yr(et.NAVIGATION_GUARD_REDIRECT,{from:e,to:m})):(o&&s.enterCallbacks[r]===o&&typeof m=="function"&&o.push(m),l())},d=i(()=>t.call(s&&s.instances[r],e,n,u));let p=Promise.resolve(d);t.length<3&&(p=p.then(u)),p.catch(m=>c(m))})}function nc(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const l in o.components){let c=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(ig(c)){const u=(c.__vccOpts||c)[e];u&&i.push(Es(u,n,s,o,l,r))}else{let u=c();i.push(()=>u.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const p=uE(d)?d.default:d;o.mods[l]=d,o.components[l]=p;const m=(p.__vccOpts||p)[e];return m&&Es(m,n,s,o,l,r)()}))}}return i}function HE(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const l=e.matched[o];l&&(t.matched.find(u=>Qr(u,l))?s.push(l):n.push(l));const c=t.matched[o];c&&(e.matched.find(u=>Qr(u,c))||r.push(c))}return[n,s,r]}let qE=()=>location.protocol+"//"+location.host;function mg(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,l=r.slice(o);return l[0]!=="/"&&(l="/"+l),Gd(l,"")}return Gd(n,t)+s+r}function zE(t,e,n,s){let r=[],i=[],o=null;const l=({state:m})=>{const v=mg(t,location),O=n.value,F=e.value;let $=0;if(m){if(n.value=v,e.value=m,o&&o===O){o=null;return}$=F?m.position-F.position:0}else s(v);r.forEach(K=>{K(n.value,O,{delta:$,type:kc.pop,direction:$?$>0?tc.forward:tc.back:tc.unknown})})};function c(){o=n.value}function u(m){r.push(m);const v=()=>{const O=r.indexOf(m);O>-1&&r.splice(O,1)};return i.push(v),v}function d(){if(document.visibilityState==="hidden"){const{history:m}=window;if(!m.state)return;m.replaceState(ke({},m.state,{scroll:Xa()}),"")}}function p(){for(const m of i)m();i=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",d),document.removeEventListener("visibilitychange",d)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",d),document.addEventListener("visibilitychange",d),{pauseListeners:c,listen:u,destroy:p}}function Jd(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?Xa():null}}function GE(t){const{history:e,location:n}=window,s={value:mg(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,u,d){const p=t.indexOf("#"),m=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+c:qE()+t+c;try{e[d?"replaceState":"pushState"](u,"",m),r.value=u}catch(v){console.error(v),n[d?"replace":"assign"](m)}}function o(c,u){i(c,ke({},e.state,Jd(r.value.back,c,r.value.forward,!0),u,{position:r.value.position}),!0),s.value=c}function l(c,u){const d=ke({},r.value,e.state,{forward:c,scroll:Xa()});i(d.current,d,!0),i(c,ke({},Jd(s.value,c,null),{position:d.position+1},u),!1),s.value=c}return{location:s,state:r,push:l,replace:o}}function WE(t){t=xE(t);const e=GE(t),n=zE(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=ke({location:"",base:t,go:s,createHref:DE.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function KE(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),WE(t)}let sr=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t}({});var ht=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t}(ht||{});const QE={type:sr.Static,value:""},YE=/[a-zA-Z0-9_]/;function JE(t){if(!t)return[[]];if(t==="/")return[[QE]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(v){throw new Error(`ERR (${n})/"${u}": ${v}`)}let n=ht.Static,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let l=0,c,u="",d="";function p(){u&&(n===ht.Static?i.push({type:sr.Static,value:u}):n===ht.Param||n===ht.ParamRegExp||n===ht.ParamRegExpEnd?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:sr.Param,value:u,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function m(){u+=c}for(;l<t.length;){if(c=t[l++],c==="\\"&&n!==ht.ParamRegExp){s=n,n=ht.EscapeNext;continue}switch(n){case ht.Static:c==="/"?(u&&p(),o()):c===":"?(p(),n=ht.Param):m();break;case ht.EscapeNext:m(),n=s;break;case ht.Param:c==="("?n=ht.ParamRegExp:YE.test(c)?m():(p(),n=ht.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case ht.ParamRegExp:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:n=ht.ParamRegExpEnd:d+=c;break;case ht.ParamRegExpEnd:p(),n=ht.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--,d="";break;default:e("Unknown state");break}}return n===ht.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),p(),o(),r}const Xd="[^/]+?",XE={sensitive:!1,strict:!1,start:!0,end:!0};var Ft=function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t}(Ft||{});const ZE=/[.+*?^${}()[\]/\\]/g;function eT(t,e){const n=ke({},XE,e),s=[];let r=n.start?"^":"";const i=[];for(const u of t){const d=u.length?[]:[Ft.Root];n.strict&&!u.length&&(r+="/");for(let p=0;p<u.length;p++){const m=u[p];let v=Ft.Segment+(n.sensitive?Ft.BonusCaseSensitive:0);if(m.type===sr.Static)p||(r+="/"),r+=m.value.replace(ZE,"\\$&"),v+=Ft.Static;else if(m.type===sr.Param){const{value:O,repeatable:F,optional:$,regexp:K}=m;i.push({name:O,repeatable:F,optional:$});const M=K||Xd;if(M!==Xd){v+=Ft.BonusCustomRegExp;try{`${M}`}catch(Q){throw new Error(`Invalid custom RegExp for param "${O}" (${M}): `+Q.message)}}let U=F?`((?:${M})(?:/(?:${M}))*)`:`(${M})`;p||(U=$&&u.length<2?`(?:/${U})`:"/"+U),$&&(U+="?"),r+=U,v+=Ft.Dynamic,$&&(v+=Ft.BonusOptional),F&&(v+=Ft.BonusRepeatable),M===".*"&&(v+=Ft.BonusWildcard)}d.push(v)}s.push(d)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=Ft.BonusStrict}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function l(u){const d=u.match(o),p={};if(!d)return null;for(let m=1;m<d.length;m++){const v=d[m]||"",O=i[m-1];p[O.name]=v&&O.repeatable?v.split("/"):v}return p}function c(u){let d="",p=!1;for(const m of t){(!p||!d.endsWith("/"))&&(d+="/"),p=!1;for(const v of m)if(v.type===sr.Static)d+=v.value;else if(v.type===sr.Param){const{value:O,repeatable:F,optional:$}=v,K=O in u?u[O]:"";if(vn(K)&&!F)throw new Error(`Provided param "${O}" is an array but it is not repeatable (* or + modifiers)`);const M=vn(K)?K.join("/"):K;if(!M)if($)m.length<2&&(d.endsWith("/")?d=d.slice(0,-1):p=!0);else throw new Error(`Missing required param "${O}"`);d+=M}}return d||"/"}return{re:o,score:s,keys:i,parse:l,stringify:c}}function tT(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===Ft.Static+Ft.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Ft.Static+Ft.Segment?1:-1:0}function gg(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=tT(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(Zd(s))return 1;if(Zd(r))return-1}return r.length-s.length}function Zd(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const nT={strict:!1,end:!0,sensitive:!1};function sT(t,e,n){const s=eT(JE(t.path),n),r=ke(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function rT(t,e){const n=[],s=new Map;e=zd(nT,e);function r(p){return s.get(p)}function i(p,m,v){const O=!v,F=tf(p);F.aliasOf=v&&v.record;const $=zd(e,p),K=[F];if("alias"in p){const Q=typeof p.alias=="string"?[p.alias]:p.alias;for(const B of Q)K.push(tf(ke({},F,{components:v?v.record.components:F.components,path:B,aliasOf:v?v.record:F})))}let M,U;for(const Q of K){const{path:B}=Q;if(m&&B[0]!=="/"){const j=m.record.path,b=j[j.length-1]==="/"?"":"/";Q.path=m.record.path+(B&&b+B)}if(M=sT(Q,m,$),v?v.alias.push(M):(U=U||M,U!==M&&U.alias.push(M),O&&p.name&&!nf(M)&&o(p.name)),_g(M)&&c(M),F.children){const j=F.children;for(let b=0;b<j.length;b++)i(j[b],M,v&&v.children[b])}v=v||M}return U?()=>{o(U)}:Fi}function o(p){if(dg(p)){const m=s.get(p);m&&(s.delete(p),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(p);m>-1&&(n.splice(m,1),p.record.name&&s.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function l(){return n}function c(p){const m=aT(p,n);n.splice(m,0,p),p.record.name&&!nf(p)&&s.set(p.record.name,p)}function u(p,m){let v,O={},F,$;if("name"in p&&p.name){if(v=s.get(p.name),!v)throw Yr(et.MATCHER_NOT_FOUND,{location:p});$=v.record.name,O=ke(ef(m.params,v.keys.filter(U=>!U.optional).concat(v.parent?v.parent.keys.filter(U=>U.optional):[]).map(U=>U.name)),p.params&&ef(p.params,v.keys.map(U=>U.name))),F=v.stringify(O)}else if(p.path!=null)F=p.path,v=n.find(U=>U.re.test(F)),v&&(O=v.parse(F),$=v.record.name);else{if(v=m.name?s.get(m.name):n.find(U=>U.re.test(m.path)),!v)throw Yr(et.MATCHER_NOT_FOUND,{location:p,currentLocation:m});$=v.record.name,O=ke({},m.params,p.params),F=v.stringify(O)}const K=[];let M=v;for(;M;)K.unshift(M.record),M=M.parent;return{name:$,path:F,params:O,matched:K,meta:oT(K)}}t.forEach(p=>i(p));function d(){n.length=0,s.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:d,getRoutes:l,getRecordMatcher:r}}function ef(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function tf(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:iT(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function iT(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function nf(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function oT(t){return t.reduce((e,n)=>ke(e,n.meta),{})}function aT(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;gg(t,e[i])<0?s=i:n=i+1}const r=lT(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function lT(t){let e=t;for(;e=e.parent;)if(_g(e)&&gg(t,e)===0)return e}function _g({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function sf(t){const e=Dn(Za),n=Dn(pg),s=rt(()=>{const c=Bt(t.to);return e.resolve(c)}),r=rt(()=>{const{matched:c}=s.value,{length:u}=c,d=c[u-1],p=n.matched;if(!d||!p.length)return-1;const m=p.findIndex(Qr.bind(null,d));if(m>-1)return m;const v=rf(c[u-2]);return u>1&&rf(d)===v&&p[p.length-1].path!==v?p.findIndex(Qr.bind(null,c[u-2])):m}),i=rt(()=>r.value>-1&&fT(n.params,s.value.params)),o=rt(()=>r.value>-1&&r.value===n.matched.length-1&&hg(n.params,s.value.params));function l(c={}){if(dT(c)){const u=e[Bt(t.replace)?"replace":"push"](Bt(t.to)).catch(Fi);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:rt(()=>s.value.href),isActive:i,isExactActive:o,navigate:l}}function cT(t){return t.length===1?t[0]:t}const uT=Cm({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:sf,setup(t,{slots:e}){const n=za(sf(t)),{options:s}=Dn(Za),r=rt(()=>({[of(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[of(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&cT(e.default(n));return t.custom?i:bu("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),hT=uT;function dT(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function fT(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!vn(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function rf(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const of=(t,e,n)=>t??e??n,pT=Cm({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=Dn(Nc),r=rt(()=>t.route||s.value),i=Dn(Yd,0),o=rt(()=>{let u=Bt(i);const{matched:d}=r.value;let p;for(;(p=d[u])&&!p.components;)u++;return u}),l=rt(()=>r.value.matched[o.value]);Ko(Yd,rt(()=>o.value+1)),Ko(jE,l),Ko(Nc,r);const c=ye();return Rs(()=>[c.value,l.value,t.name],([u,d,p],[m,v,O])=>{d&&(d.instances[p]=u,v&&v!==d&&u&&u===m&&(d.leaveGuards.size||(d.leaveGuards=v.leaveGuards),d.updateGuards.size||(d.updateGuards=v.updateGuards))),u&&d&&(!v||!Qr(d,v)||!m)&&(d.enterCallbacks[p]||[]).forEach(F=>F(u))},{flush:"post"}),()=>{const u=r.value,d=t.name,p=l.value,m=p&&p.components[d];if(!m)return af(n.default,{Component:m,route:u});const v=p.props[d],O=v?v===!0?u.params:typeof v=="function"?v(u):v:null,$=bu(m,ke({},O,e,{onVnodeUnmounted:K=>{K.component.isUnmounted&&(p.instances[d]=null)},ref:c}));return af(n.default,{Component:$,route:u})||$}}});function af(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const mT=pT;function gT(t){const e=rT(t.routes,t),n=t.parseQuery||$E,s=t.stringifyQuery||Qd,r=t.history,i=Ai(),o=Ai(),l=Ai(),c=hw(gs);let u=gs;kr&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Zl.bind(null,H=>""+H),p=Zl.bind(null,IE),m=Zl.bind(null,Xi);function v(H,se){let ee,le;return dg(H)?(ee=e.getRecordMatcher(H),le=se):le=H,e.addRoute(le,ee)}function O(H){const se=e.getRecordMatcher(H);se&&e.removeRoute(se)}function F(){return e.getRoutes().map(H=>H.record)}function $(H){return!!e.getRecordMatcher(H)}function K(H,se){if(se=ke({},se||c.value),typeof H=="string"){const D=ec(n,H,se.path),q=e.resolve({path:D.path},se),G=r.createHref(D.fullPath);return ke(D,q,{params:m(q.params),hash:Xi(D.hash),redirectedFrom:void 0,href:G})}let ee;if(H.path!=null)ee=ke({},H,{path:ec(n,H.path,se.path).path});else{const D=ke({},H.params);for(const q in D)D[q]==null&&delete D[q];ee=ke({},H,{params:p(D)}),se.params=p(se.params)}const le=e.resolve(ee,se),Ee=H.hash||"";le.params=d(m(le.params));const E=SE(s,ke({},H,{hash:wE(Ee),path:le.path})),C=r.createHref(E);return ke({fullPath:E,hash:Ee,query:s===Qd?BE(H.query):H.query||{}},le,{redirectedFrom:void 0,href:C})}function M(H){return typeof H=="string"?ec(n,H,c.value.path):ke({},H)}function U(H,se){if(u!==H)return Yr(et.NAVIGATION_CANCELLED,{from:se,to:H})}function Q(H){return b(H)}function B(H){return Q(ke(M(H),{replace:!0}))}function j(H,se){const ee=H.matched[H.matched.length-1];if(ee&&ee.redirect){const{redirect:le}=ee;let Ee=typeof le=="function"?le(H,se):le;return typeof Ee=="string"&&(Ee=Ee.includes("?")||Ee.includes("#")?Ee=M(Ee):{path:Ee},Ee.params={}),ke({query:H.query,hash:H.hash,params:Ee.path!=null?{}:H.params},Ee)}}function b(H,se){const ee=u=K(H),le=c.value,Ee=H.state,E=H.force,C=H.replace===!0,D=j(ee,le);if(D)return b(ke(M(D),{state:typeof D=="object"?ke({},Ee,D.state):Ee,force:E,replace:C}),se||ee);const q=ee;q.redirectedFrom=se;let G;return!E&&RE(s,le,ee)&&(G=Yr(et.NAVIGATION_DUPLICATED,{to:q,from:le}),Mt(le,le,!0,!1)),(G?Promise.resolve(G):R(q,le)).catch(x=>zn(x)?zn(x,et.NAVIGATION_GUARD_REDIRECT)?x:zt(x):Te(x,q,le)).then(x=>{if(x){if(zn(x,et.NAVIGATION_GUARD_REDIRECT))return b(ke({replace:C},M(x.to),{state:typeof x.to=="object"?ke({},Ee,x.to.state):Ee,force:E}),se||q)}else x=A(q,le,!0,C,Ee);return S(q,le,x),x})}function y(H,se){const ee=U(H,se);return ee?Promise.reject(ee):Promise.resolve()}function _(H){const se=Gt.values().next().value;return se&&typeof se.runWithContext=="function"?se.runWithContext(H):H()}function R(H,se){let ee;const[le,Ee,E]=HE(H,se);ee=nc(le.reverse(),"beforeRouteLeave",H,se);for(const D of le)D.leaveGuards.forEach(q=>{ee.push(Es(q,H,se))});const C=y.bind(null,H,se);return ee.push(C),ft(ee).then(()=>{ee=[];for(const D of i.list())ee.push(Es(D,H,se));return ee.push(C),ft(ee)}).then(()=>{ee=nc(Ee,"beforeRouteUpdate",H,se);for(const D of Ee)D.updateGuards.forEach(q=>{ee.push(Es(q,H,se))});return ee.push(C),ft(ee)}).then(()=>{ee=[];for(const D of E)if(D.beforeEnter)if(vn(D.beforeEnter))for(const q of D.beforeEnter)ee.push(Es(q,H,se));else ee.push(Es(D.beforeEnter,H,se));return ee.push(C),ft(ee)}).then(()=>(H.matched.forEach(D=>D.enterCallbacks={}),ee=nc(E,"beforeRouteEnter",H,se,_),ee.push(C),ft(ee))).then(()=>{ee=[];for(const D of o.list())ee.push(Es(D,H,se));return ee.push(C),ft(ee)}).catch(D=>zn(D,et.NAVIGATION_CANCELLED)?D:Promise.reject(D))}function S(H,se,ee){l.list().forEach(le=>_(()=>le(H,se,ee)))}function A(H,se,ee,le,Ee){const E=U(H,se);if(E)return E;const C=se===gs,D=kr?history.state:{};ee&&(le||C?r.replace(H.fullPath,ke({scroll:C&&D&&D.scroll},Ee)):r.push(H.fullPath,Ee)),c.value=H,Mt(H,se,ee,C),zt()}let w;function we(){w||(w=r.listen((H,se,ee)=>{if(!Wt.listening)return;const le=K(H),Ee=j(le,Wt.currentRoute.value);if(Ee){b(ke(Ee,{replace:!0,force:!0}),le).catch(Fi);return}u=le;const E=c.value;kr&&OE(Kd(E.fullPath,ee.delta),Xa()),R(le,E).catch(C=>zn(C,et.NAVIGATION_ABORTED|et.NAVIGATION_CANCELLED)?C:zn(C,et.NAVIGATION_GUARD_REDIRECT)?(b(ke(M(C.to),{force:!0}),le).then(D=>{zn(D,et.NAVIGATION_ABORTED|et.NAVIGATION_DUPLICATED)&&!ee.delta&&ee.type===kc.pop&&r.go(-1,!1)}).catch(Fi),Promise.reject()):(ee.delta&&r.go(-ee.delta,!1),Te(C,le,E))).then(C=>{C=C||A(le,E,!1),C&&(ee.delta&&!zn(C,et.NAVIGATION_CANCELLED)?r.go(-ee.delta,!1):ee.type===kc.pop&&zn(C,et.NAVIGATION_ABORTED|et.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),S(le,E,C)}).catch(Fi)}))}let $e=Ai(),Ge=Ai(),Pe;function Te(H,se,ee){zt(H);const le=Ge.list();return le.length?le.forEach(Ee=>Ee(H,se,ee)):console.error(H),Promise.reject(H)}function St(){return Pe&&c.value!==gs?Promise.resolve():new Promise((H,se)=>{$e.add([H,se])})}function zt(H){return Pe||(Pe=!H,we(),$e.list().forEach(([se,ee])=>H?ee(H):se()),$e.reset()),H}function Mt(H,se,ee,le){const{scrollBehavior:Ee}=t;if(!kr||!Ee)return Promise.resolve();const E=!ee&&ME(Kd(H.fullPath,0))||(le||!ee)&&history.state&&history.state.scroll||null;return vu().then(()=>Ee(H,se,E)).then(C=>C&&VE(C)).catch(C=>Te(C,H,se))}const ct=H=>r.go(H);let un;const Gt=new Set,Wt={currentRoute:c,listening:!0,addRoute:v,removeRoute:O,clearRoutes:e.clearRoutes,hasRoute:$,getRoutes:F,resolve:K,options:t,push:Q,replace:B,go:ct,back:()=>ct(-1),forward:()=>ct(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:Ge.add,isReady:St,install(H){H.component("RouterLink",hT),H.component("RouterView",mT),H.config.globalProperties.$router=Wt,Object.defineProperty(H.config.globalProperties,"$route",{enumerable:!0,get:()=>Bt(c)}),kr&&!un&&c.value===gs&&(un=!0,Q(r.location).catch(le=>{}));const se={};for(const le in gs)Object.defineProperty(se,le,{get:()=>c.value[le],enumerable:!0});H.provide(Za,Wt),H.provide(pg,pm(se)),H.provide(Nc,c);const ee=H.unmount;Gt.add(H),H.unmount=function(){Gt.delete(H),Gt.size<1&&(u=gs,w&&w(),w=null,c.value=gs,un=!1,Pe=!1),ee()}}};function ft(H){return H.reduce((se,ee)=>se.then(()=>_(ee)),Promise.resolve())}return Wt}function Su(){return Dn(Za)}const _T="/HTF/assets/Logo_yellow-C2dq30_U.png",yT=()=>{};var lf={};const yg=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},vT=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],l=t[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},vg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,l=o?t[r+1]:0,c=r+2<t.length,u=c?t[r+2]:0,d=i>>2,p=(i&3)<<4|l>>4;let m=(l&15)<<2|u>>6,v=u&63;c||(v=64,o||(m=64)),s.push(n[d],n[p],n[m],n[v])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yg(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const p=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||l==null||u==null||p==null)throw new wT;const m=i<<2|l>>4;if(s.push(m),u!==64){const v=l<<4&240|u>>2;if(s.push(v),p!==64){const O=u<<6&192|p;s.push(O)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class wT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ET=function(t){const e=yg(t);return vg.encodeByteArray(e,!0)},_a=function(t){return ET(t).replace(/\./g,"")},wg=function(t){try{return vg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function TT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const IT=()=>TT().__FIREBASE_DEFAULTS__,bT=()=>{if(typeof process>"u"||typeof lf>"u")return;const t=lf.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},AT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&wg(t[1]);return e&&JSON.parse(e)},el=()=>{try{return yT()||IT()||bT()||AT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Eg=t=>el()?.emulatorHosts?.[t],ST=t=>{const e=Eg(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Tg=()=>el()?.config,Ig=t=>el()?.[`_${t}`];class RT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function ii(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function bg(t){return(await fetch(t,{credentials:"include"})).ok}function CT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[_a(JSON.stringify(n)),_a(JSON.stringify(o)),""].join(".")}const Ui={};function PT(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ui))Ui[e]?t.emulator.push(e):t.prod.push(e);return t}function xT(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let cf=!1;function Ag(t,e){if(typeof window>"u"||typeof document>"u"||!ii(window.location.host)||Ui[t]===e||Ui[t]||cf)return;Ui[t]=e;function n(m){return`__firebase__banner__${m}`}const s="__firebase__banner",i=PT().prod.length>0;function o(){const m=document.getElementById(s);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,v){m.setAttribute("width","24"),m.setAttribute("id",v),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{cf=!0,o()},m}function d(m,v){m.setAttribute("id",v),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=xT(s),v=n("text"),O=document.getElementById(v)||document.createElement("span"),F=n("learnmore"),$=document.getElementById(F)||document.createElement("a"),K=n("preprendIcon"),M=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const U=m.element;l(U),d($,F);const Q=u();c(M,K),U.append(M,O,$,Q),document.body.appendChild(U)}i?(O.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())}function DT(){const t=el()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Sg(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function VT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OT(){const t=Ot();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function MT(){return!DT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Rg(){try{return typeof indexedDB=="object"}catch{return!1}}function Cg(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}function LT(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const FT="FirebaseError";class Tn extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=FT,Object.setPrototypeOf(this,Tn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_r.prototype.create)}}class _r{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?UT(i,s):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new Tn(r,l,s)}}function UT(t,e){return t.replace($T,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const $T=/\{\$([^}]+)}/g;function BT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vs(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(uf(i)&&uf(o)){if(!Vs(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function uf(t){return t!==null&&typeof t=="object"}function ho(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function jT(t,e){const n=new HT(t,e);return n.subscribe.bind(n)}class HT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");qT(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=sc),r.error===void 0&&(r.error=sc),r.complete===void 0&&(r.complete=sc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function sc(){}const zT=1e3,GT=2,WT=4*60*60*1e3,KT=.5;function hf(t,e=zT,n=GT){const s=e*Math.pow(n,t),r=Math.round(KT*s*(Math.random()-.5)*2);return Math.min(WT,s+r)}function bt(t){return t&&t._delegate?t._delegate:t}class wn{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const er="[DEFAULT]";class QT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new RT;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JT(e))try{this.getOrInitializeService({instanceIdentifier:er})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=er){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=er){return this.instances.has(e)}getOptions(e=er){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:YT(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=er){return this.component?this.component.multipleInstances?e:er:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function YT(t){return t===er?void 0:t}function JT(t){return t.instantiationMode==="EAGER"}class XT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new QT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ie||(Ie={}));const ZT={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},eI=Ie.INFO,tI={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},nI=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=tI[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tl{constructor(e){this.name=e,this._logLevel=eI,this._logHandler=nI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ZT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}}const sI=(t,e)=>e.some(n=>t instanceof n);let df,ff;function rI(){return df||(df=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iI(){return ff||(ff=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Pg=new WeakMap,Vc=new WeakMap,xg=new WeakMap,rc=new WeakMap,Ru=new WeakMap;function oI(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Cs(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Pg.set(n,t)}).catch(()=>{}),Ru.set(e,t),e}function aI(t){if(Vc.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Vc.set(t,e)}let Oc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Vc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lI(t){Oc=t(Oc)}function cI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(ic(this),e,...n);return xg.set(s,e.sort?e.sort():[e]),Cs(s)}:iI().includes(t)?function(...e){return t.apply(ic(this),e),Cs(Pg.get(this))}:function(...e){return Cs(t.apply(ic(this),e))}}function uI(t){return typeof t=="function"?cI(t):(t instanceof IDBTransaction&&aI(t),sI(t,rI())?new Proxy(t,Oc):t)}function Cs(t){if(t instanceof IDBRequest)return oI(t);if(rc.has(t))return rc.get(t);const e=uI(t);return e!==t&&(rc.set(t,e),Ru.set(e,t)),e}const ic=t=>Ru.get(t);function kg(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),l=Cs(o);return s&&o.addEventListener("upgradeneeded",c=>{s(Cs(o.result),c.oldVersion,c.newVersion,Cs(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const hI=["get","getKey","getAll","getAllKeys","count"],dI=["put","add","delete","clear"],oc=new Map;function pf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(oc.get(e))return oc.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=dI.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||hI.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,r?"readwrite":"readonly");let u=c.store;return s&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),r&&c.done]))[0]};return oc.set(e,i),i}lI(t=>({...t,get:(e,n,s)=>pf(e,n)||t.get(e,n,s),has:(e,n)=>!!pf(e,n)||t.has(e,n)}));class fI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pI(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function pI(t){return t.getComponent()?.type==="VERSION"}const Mc="@firebase/app",mf="0.14.6";const rs=new tl("@firebase/app"),mI="@firebase/app-compat",gI="@firebase/analytics-compat",_I="@firebase/analytics",yI="@firebase/app-check-compat",vI="@firebase/app-check",wI="@firebase/auth",EI="@firebase/auth-compat",TI="@firebase/database",II="@firebase/data-connect",bI="@firebase/database-compat",AI="@firebase/functions",SI="@firebase/functions-compat",RI="@firebase/installations",CI="@firebase/installations-compat",PI="@firebase/messaging",xI="@firebase/messaging-compat",kI="@firebase/performance",DI="@firebase/performance-compat",NI="@firebase/remote-config",VI="@firebase/remote-config-compat",OI="@firebase/storage",MI="@firebase/storage-compat",LI="@firebase/firestore",FI="@firebase/ai",UI="@firebase/firestore-compat",$I="firebase",BI="12.6.0";const Lc="[DEFAULT]",jI={[Mc]:"fire-core",[mI]:"fire-core-compat",[_I]:"fire-analytics",[gI]:"fire-analytics-compat",[vI]:"fire-app-check",[yI]:"fire-app-check-compat",[wI]:"fire-auth",[EI]:"fire-auth-compat",[TI]:"fire-rtdb",[II]:"fire-data-connect",[bI]:"fire-rtdb-compat",[AI]:"fire-fn",[SI]:"fire-fn-compat",[RI]:"fire-iid",[CI]:"fire-iid-compat",[PI]:"fire-fcm",[xI]:"fire-fcm-compat",[kI]:"fire-perf",[DI]:"fire-perf-compat",[NI]:"fire-rc",[VI]:"fire-rc-compat",[OI]:"fire-gcs",[MI]:"fire-gcs-compat",[LI]:"fire-fst",[UI]:"fire-fst-compat",[FI]:"fire-vertex","fire-js":"fire-js",[$I]:"fire-js-all"};const ya=new Map,HI=new Map,Fc=new Map;function gf(t,e){try{t.container.addComponent(e)}catch(n){rs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Un(t){const e=t.name;if(Fc.has(e))return rs.debug(`There were multiple attempts to register component ${e}.`),!1;Fc.set(e,t);for(const n of ya.values())gf(n,t);for(const n of HI.values())gf(n,t);return!0}function yr(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function dn(t){return t==null?!1:t.settings!==void 0}const qI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ps=new _r("app","Firebase",qI);class zI{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new wn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ps.create("app-deleted",{appName:this._name})}}const oi=BI;function Dg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:Lc,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Ps.create("bad-app-name",{appName:String(r)});if(n||(n=Tg()),!n)throw Ps.create("no-options");const i=ya.get(r);if(i){if(Vs(n,i.options)&&Vs(s,i.config))return i;throw Ps.create("duplicate-app",{appName:r})}const o=new XT(r);for(const c of Fc.values())o.addComponent(c);const l=new zI(n,s,o);return ya.set(r,l),l}function Cu(t=Lc){const e=ya.get(t);if(!e&&t===Lc&&Tg())return Dg();if(!e)throw Ps.create("no-app",{appName:t});return e}function ln(t,e,n){let s=jI[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rs.warn(o.join(" "));return}Un(new wn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const GI="firebase-heartbeat-database",WI=1,Zi="firebase-heartbeat-store";let ac=null;function Ng(){return ac||(ac=kg(GI,WI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zi)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ps.create("idb-open",{originalErrorMessage:t.message})})),ac}async function KI(t){try{const n=(await Ng()).transaction(Zi),s=await n.objectStore(Zi).get(Vg(t));return await n.done,s}catch(e){if(e instanceof Tn)rs.warn(e.message);else{const n=Ps.create("idb-get",{originalErrorMessage:e?.message});rs.warn(n.message)}}}async function _f(t,e){try{const s=(await Ng()).transaction(Zi,"readwrite");await s.objectStore(Zi).put(e,Vg(t)),await s.done}catch(n){if(n instanceof Tn)rs.warn(n.message);else{const s=Ps.create("idb-set",{originalErrorMessage:n?.message});rs.warn(s.message)}}}function Vg(t){return`${t.name}!${t.options.appId}`}const QI=1024,YI=30;class JI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ZI(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=yf();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>YI){const r=eb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){rs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=yf(),{heartbeatsToSend:n,unsentEntries:s}=XI(this._heartbeatsCache.heartbeats),r=_a(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return rs.warn(e),""}}}function yf(){return new Date().toISOString().substring(0,10)}function XI(t,e=QI){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),vf(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),vf(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class ZI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Rg()?Cg().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await KI(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return _f(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return _f(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function vf(t){return _a(JSON.stringify({version:2,heartbeats:t})).length}function eb(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}function tb(t){Un(new wn("platform-logger",e=>new fI(e),"PRIVATE")),Un(new wn("heartbeat",e=>new JI(e),"PRIVATE")),ln(Mc,mf,t),ln(Mc,mf,"esm2020"),ln("fire-js","")}tb("");var nb="firebase",sb="12.6.0";ln(nb,sb,"app");const Og="@firebase/installations",Pu="0.6.19";const Mg=1e4,Lg=`w:${Pu}`,Fg="FIS_v2",rb="https://firebaseinstallations.googleapis.com/v1",ib=60*60*1e3,ob="installations",ab="Installations";const lb={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},hr=new _r(ob,ab,lb);function Ug(t){return t instanceof Tn&&t.code.includes("request-failed")}function $g({projectId:t}){return`${rb}/projects/${t}/installations`}function Bg(t){return{token:t.token,requestStatus:2,expiresIn:ub(t.expiresIn),creationTime:Date.now()}}async function jg(t,e){const s=(await e.json()).error;return hr.create("request-failed",{requestName:t,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function Hg({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function cb(t,{refreshToken:e}){const n=Hg(t);return n.append("Authorization",hb(e)),n}async function qg(t){const e=await t();return e.status>=500&&e.status<600?t():e}function ub(t){return Number(t.replace("s","000"))}function hb(t){return`${Fg} ${t}`}async function db({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const s=$g(t),r=Hg(t),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={fid:n,authVersion:Fg,appId:t.appId,sdkVersion:Lg},l={method:"POST",headers:r,body:JSON.stringify(o)},c=await qg(()=>fetch(s,l));if(c.ok){const u=await c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:Bg(u.authToken)}}else throw await jg("Create Installation",c)}function zg(t){return new Promise(e=>{setTimeout(e,t)})}function fb(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}const pb=/^[cdef][\w-]{21}$/,Uc="";function mb(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=gb(t);return pb.test(n)?n:Uc}catch{return Uc}}function gb(t){return fb(t).substr(0,22)}function nl(t){return`${t.appName}!${t.appId}`}const Gg=new Map;function Wg(t,e){const n=nl(t);Kg(n,e),_b(n,e)}function Kg(t,e){const n=Gg.get(t);if(n)for(const s of n)s(e)}function _b(t,e){const n=yb();n&&n.postMessage({key:t,fid:e}),vb()}let rr=null;function yb(){return!rr&&"BroadcastChannel"in self&&(rr=new BroadcastChannel("[Firebase] FID Change"),rr.onmessage=t=>{Kg(t.data.key,t.data.fid)}),rr}function vb(){Gg.size===0&&rr&&(rr.close(),rr=null)}const wb="firebase-installations-database",Eb=1,dr="firebase-installations-store";let lc=null;function xu(){return lc||(lc=kg(wb,Eb,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(dr)}}})),lc}async function va(t,e){const n=nl(t),r=(await xu()).transaction(dr,"readwrite"),i=r.objectStore(dr),o=await i.get(n);return await i.put(e,n),await r.done,(!o||o.fid!==e.fid)&&Wg(t,e.fid),e}async function Qg(t){const e=nl(t),s=(await xu()).transaction(dr,"readwrite");await s.objectStore(dr).delete(e),await s.done}async function sl(t,e){const n=nl(t),r=(await xu()).transaction(dr,"readwrite"),i=r.objectStore(dr),o=await i.get(n),l=e(o);return l===void 0?await i.delete(n):await i.put(l,n),await r.done,l&&(!o||o.fid!==l.fid)&&Wg(t,l.fid),l}async function ku(t){let e;const n=await sl(t.appConfig,s=>{const r=Tb(s),i=Ib(t,r);return e=i.registrationPromise,i.installationEntry});return n.fid===Uc?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function Tb(t){const e=t||{fid:mb(),registrationStatus:0};return Yg(e)}function Ib(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(hr.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=bb(t,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Ab(t)}:{installationEntry:e}}async function bb(t,e){try{const n=await db(t,e);return va(t.appConfig,n)}catch(n){throw Ug(n)&&n.customData.serverCode===409?await Qg(t.appConfig):await va(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function Ab(t){let e=await wf(t.appConfig);for(;e.registrationStatus===1;)await zg(100),e=await wf(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await ku(t);return s||n}return e}function wf(t){return sl(t,e=>{if(!e)throw hr.create("installation-not-found");return Yg(e)})}function Yg(t){return Sb(t)?{fid:t.fid,registrationStatus:0}:t}function Sb(t){return t.registrationStatus===1&&t.registrationTime+Mg<Date.now()}async function Rb({appConfig:t,heartbeatServiceProvider:e},n){const s=Cb(t,n),r=cb(t,n),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={installation:{sdkVersion:Lg,appId:t.appId}},l={method:"POST",headers:r,body:JSON.stringify(o)},c=await qg(()=>fetch(s,l));if(c.ok){const u=await c.json();return Bg(u)}else throw await jg("Generate Auth Token",c)}function Cb(t,{fid:e}){return`${$g(t)}/${e}/authTokens:generate`}async function Du(t,e=!1){let n;const s=await sl(t.appConfig,i=>{if(!Jg(i))throw hr.create("not-registered");const o=i.authToken;if(!e&&kb(o))return i;if(o.requestStatus===1)return n=Pb(t,e),i;{if(!navigator.onLine)throw hr.create("app-offline");const l=Nb(i);return n=xb(t,l),l}});return n?await n:s.authToken}async function Pb(t,e){let n=await Ef(t.appConfig);for(;n.authToken.requestStatus===1;)await zg(100),n=await Ef(t.appConfig);const s=n.authToken;return s.requestStatus===0?Du(t,e):s}function Ef(t){return sl(t,e=>{if(!Jg(e))throw hr.create("not-registered");const n=e.authToken;return Vb(n)?{...e,authToken:{requestStatus:0}}:e})}async function xb(t,e){try{const n=await Rb(t,e),s={...e,authToken:n};return await va(t.appConfig,s),n}catch(n){if(Ug(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Qg(t.appConfig);else{const s={...e,authToken:{requestStatus:0}};await va(t.appConfig,s)}throw n}}function Jg(t){return t!==void 0&&t.registrationStatus===2}function kb(t){return t.requestStatus===2&&!Db(t)}function Db(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+ib}function Nb(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function Vb(t){return t.requestStatus===1&&t.requestTime+Mg<Date.now()}async function Ob(t){const e=t,{installationEntry:n,registrationPromise:s}=await ku(e);return s?s.catch(console.error):Du(e).catch(console.error),n.fid}async function Mb(t,e=!1){const n=t;return await Lb(n),(await Du(n,e)).token}async function Lb(t){const{registrationPromise:e}=await ku(t);e&&await e}function Fb(t){if(!t||!t.options)throw cc("App Configuration");if(!t.name)throw cc("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw cc(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function cc(t){return hr.create("missing-app-config-values",{valueName:t})}const Xg="installations",Ub="installations-internal",$b=t=>{const e=t.getProvider("app").getImmediate(),n=Fb(e),s=yr(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},Bb=t=>{const e=t.getProvider("app").getImmediate(),n=yr(e,Xg).getImmediate();return{getId:()=>Ob(n),getToken:r=>Mb(n,r)}};function jb(){Un(new wn(Xg,$b,"PUBLIC")),Un(new wn(Ub,Bb,"PRIVATE"))}jb();ln(Og,Pu);ln(Og,Pu,"esm2020");const wa="analytics",Hb="firebase_id",qb="origin",zb=60*1e3,Gb="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Nu="https://www.googletagmanager.com/gtag/js";const jt=new tl("@firebase/analytics");const Wb={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Xt=new _r("analytics","Analytics",Wb);function Kb(t){if(!t.startsWith(Nu)){const e=Xt.create("invalid-gtag-resource",{gtagURL:t});return jt.warn(e.message),""}return t}function Zg(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Qb(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function Yb(t,e){const n=Qb("firebase-js-sdk-policy",{createScriptURL:Kb}),s=document.createElement("script"),r=`${Nu}?l=${t}&id=${e}`;s.src=n?n?.createScriptURL(r):r,s.async=!0,document.head.appendChild(s)}function Jb(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Xb(t,e,n,s,r,i){const o=s[r];try{if(o)await e[o];else{const c=(await Zg(n)).find(u=>u.measurementId===r);c&&await e[c.appId]}}catch(l){jt.error(l)}t("config",r,i)}async function Zb(t,e,n,s,r){try{let i=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const l=await Zg(n);for(const c of o){const u=l.find(p=>p.measurementId===c),d=u&&e[u.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",s,r||{})}catch(i){jt.error(i)}}function eA(t,e,n,s){async function r(i,...o){try{if(i==="event"){const[l,c]=o;await Zb(t,e,n,l,c)}else if(i==="config"){const[l,c]=o;await Xb(t,e,n,s,l,c)}else if(i==="consent"){const[l,c]=o;t("consent",l,c)}else if(i==="get"){const[l,c,u]=o;t("get",l,c,u)}else if(i==="set"){const[l]=o;t("set",l)}else t(i,...o)}catch(l){jt.error(l)}}return r}function tA(t,e,n,s,r){let i=function(...o){window[s].push(arguments)};return window[r]&&typeof window[r]=="function"&&(i=window[r]),window[r]=eA(i,t,e,n),{gtagCore:i,wrappedGtag:window[r]}}function nA(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Nu)&&n.src.includes(t))return n;return null}const sA=30,rA=1e3;class iA{constructor(e={},n=rA){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const e_=new iA;function oA(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function aA(t){const{appId:e,apiKey:n}=t,s={method:"GET",headers:oA(n)},r=Gb.replace("{app-id}",e),i=await fetch(r,s);if(i.status!==200&&i.status!==304){let o="";try{const l=await i.json();l.error?.message&&(o=l.error.message)}catch{}throw Xt.create("config-fetch-failed",{httpStatus:i.status,responseMessage:o})}return i.json()}async function lA(t,e=e_,n){const{appId:s,apiKey:r,measurementId:i}=t.options;if(!s)throw Xt.create("no-app-id");if(!r){if(i)return{measurementId:i,appId:s};throw Xt.create("no-api-key")}const o=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new hA;return setTimeout(async()=>{l.abort()},zb),t_({appId:s,apiKey:r,measurementId:i},o,l,e)}async function t_(t,{throttleEndTimeMillis:e,backoffCount:n},s,r=e_){const{appId:i,measurementId:o}=t;try{await cA(s,e)}catch(l){if(o)return jt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:i,measurementId:o};throw l}try{const l=await aA(t);return r.deleteThrottleMetadata(i),l}catch(l){const c=l;if(!uA(c)){if(r.deleteThrottleMetadata(i),o)return jt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:i,measurementId:o};throw l}const u=Number(c?.customData?.httpStatus)===503?hf(n,r.intervalMillis,sA):hf(n,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return r.setThrottleMetadata(i,d),jt.debug(`Calling attemptFetch again in ${u} millis`),t_(t,d,s,r)}}function cA(t,e){return new Promise((n,s)=>{const r=Math.max(e-Date.now(),0),i=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(i),s(Xt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function uA(t){if(!(t instanceof Tn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class hA{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function dA(t,e,n,s,r){if(r&&r.global){t("event",n,s);return}else{const i=await e,o={...s,send_to:i};t("event",n,o)}}async function fA(t,e,n,s){if(s&&s.global){const r={};for(const i of Object.keys(n))r[`user_properties.${i}`]=n[i];return t("set",r),Promise.resolve()}else{const r=await e;t("config",r,{update:!0,user_properties:n})}}async function pA(){if(Rg())try{await Cg()}catch(t){return jt.warn(Xt.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return jt.warn(Xt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function mA(t,e,n,s,r,i,o){const l=lA(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&jt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>jt.error(m)),e.push(l);const c=pA().then(m=>{if(m)return s.getId()}),[u,d]=await Promise.all([l,c]);nA(i)||Yb(i,u.measurementId),r("js",new Date);const p=o?.config??{};return p[qb]="firebase",p.update=!0,d!=null&&(p[Hb]=d),r("config",u.measurementId,p),u.measurementId}class gA{constructor(e){this.app=e}_delete(){return delete Br[this.app.options.appId],Promise.resolve()}}let Br={},Tf=[];const If={};let uc="dataLayer",_A="gtag",bf,Vu,Af=!1;function yA(){const t=[];if(Sg()&&t.push("This is a browser extension environment."),LT()||t.push("Cookies are not available."),t.length>0){const e=t.map((s,r)=>`(${r+1}) ${s}`).join(" "),n=Xt.create("invalid-analytics-context",{errorInfo:e});jt.warn(n.message)}}function vA(t,e,n){yA();const s=t.options.appId;if(!s)throw Xt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)jt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Xt.create("no-api-key");if(Br[s]!=null)throw Xt.create("already-exists",{id:s});if(!Af){Jb(uc);const{wrappedGtag:i,gtagCore:o}=tA(Br,Tf,If,uc,_A);Vu=i,bf=o,Af=!0}return Br[s]=mA(t,Tf,If,e,bf,uc,n),new gA(t)}function wA(t=Cu()){t=bt(t);const e=yr(t,wa);return e.isInitialized()?e.getImmediate():EA(t)}function EA(t,e={}){const n=yr(t,wa);if(n.isInitialized()){const r=n.getImmediate();if(Vs(e,n.getOptions()))return r;throw Xt.create("already-initialized")}return n.initialize({options:e})}function TA(t,e,n){t=bt(t),fA(Vu,Br[t.app.options.appId],e,n).catch(s=>jt.error(s))}function IA(t,e,n,s){t=bt(t),dA(Vu,Br[t.app.options.appId],e,n,s).catch(r=>jt.error(r))}const Sf="@firebase/analytics",Rf="0.10.19";function bA(){Un(new wn(wa,(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return vA(s,r,n)},"PUBLIC")),Un(new wn("analytics-internal",t,"PRIVATE")),ln(Sf,Rf),ln(Sf,Rf,"esm2020");function t(e){try{const n=e.getProvider(wa).getImmediate();return{logEvent:(s,r,i)=>IA(n,s,r,i),setUserProperties:(s,r)=>TA(n,s,r)}}catch(n){throw Xt.create("interop-component-reg-failed",{reason:n})}}}bA();function n_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AA=n_,s_=new _r("auth","Firebase",n_());const Ea=new tl("@firebase/auth");function SA(t,...e){Ea.logLevel<=Ie.WARN&&Ea.warn(`Auth (${oi}): ${t}`,...e)}function Xo(t,...e){Ea.logLevel<=Ie.ERROR&&Ea.error(`Auth (${oi}): ${t}`,...e)}function $n(t,...e){throw Mu(t,...e)}function gn(t,...e){return Mu(t,...e)}function Ou(t,e,n){const s={...AA(),[e]:n};return new _r("auth","Firebase",s).create(e,{appName:t.name})}function cr(t){return Ou(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function RA(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&$n(t,"argument-error"),Ou(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Mu(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return s_.create(t,...e)}function he(t,e,...n){if(!t)throw Mu(e,...n)}function Jn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xo(e),new Error(e)}function is(t,e){t||Jn(e)}function $c(){return typeof self<"u"&&self.location?.href||""}function CA(){return Cf()==="http:"||Cf()==="https:"}function Cf(){return typeof self<"u"&&self.location?.protocol||null}function PA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CA()||Sg()||"connection"in navigator)?navigator.onLine:!0}function xA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class fo{constructor(e,n){this.shortDelay=e,this.longDelay=n,is(n>e,"Short delay should be less than long delay!"),this.isMobile=kT()||VT()}get(){return PA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Lu(t,e){is(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class r_{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const kA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const DA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],NA=new fo(3e4,6e4);function Fu(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ai(t,e,n,s,r={}){return i_(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const l=ho({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return NT()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&ii(t.emulatorConfig.host)&&(u.credentials="include"),r_.fetch()(await o_(t,t.config.apiHost,n,l),u)})}async function i_(t,e,n){t._canInitEmulator=!1;const s={...kA,...e};try{const r=new OA(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw $o(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw $o(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw $o(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw $o(t,"user-disabled",o);const d=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Ou(t,d,u);$n(t,d)}}catch(r){if(r instanceof Tn)throw r;$n(t,"network-request-failed",{message:String(r)})}}async function VA(t,e,n,s,r={}){const i=await ai(t,e,n,s,r);return"mfaPendingCredential"in i&&$n(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function o_(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?Lu(t.config,r):`${t.config.apiScheme}://${r}`;return DA.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class OA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(gn(this.auth,"network-request-failed")),NA.get())})}}function $o(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=gn(t,e,s);return r.customData._tokenResponse=n,r}async function MA(t,e){return ai(t,"POST","/v1/accounts:delete",e)}async function Ta(t,e){return ai(t,"POST","/v1/accounts:lookup",e)}function $i(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LA(t,e=!1){const n=bt(t),s=await n.getIdToken(e),r=Uu(s);he(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:$i(hc(r.auth_time)),issuedAtTime:$i(hc(r.iat)),expirationTime:$i(hc(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function hc(t){return Number(t)*1e3}function Uu(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Xo("JWT malformed, contained fewer than 3 sections"),null;try{const r=wg(n);return r?JSON.parse(r):(Xo("Failed to decode base64 JWT payload"),null)}catch(r){return Xo("Caught error parsing JWT payload as JSON",r?.toString()),null}}function Pf(t){const e=Uu(t);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function eo(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Tn&&FA(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function FA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class UA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Bc{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$i(this.lastLoginAt),this.creationTime=$i(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ia(t){const e=t.auth,n=await t.getIdToken(),s=await eo(t,Ta(e,{idToken:n}));he(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?a_(r.providerUserInfo):[],o=BA(t.providerData,i),l=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!o?.length,u=l?c:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Bc(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function $A(t){const e=bt(t);await Ia(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BA(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function a_(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function jA(t,e){const n=await i_(t,{},async()=>{const s=ho({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await o_(t,r,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:s};return t.emulatorConfig&&ii(t.emulatorConfig.host)&&(c.credentials="include"),r_.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function HA(t,e){return ai(t,"POST","/v2/accounts:revokeToken",Fu(t,e))}class jr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Pf(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){he(e.length!==0,"internal-error");const n=Pf(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await jA(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new jr;return s&&(he(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(he(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(he(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jr,this.toJSON())}_performRefresh(){return Jn("not implemented")}}function _s(t,e){he(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class fn{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new UA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Bc(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await eo(this,this.stsTokenManager.getToken(this.auth,e));return he(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return LA(this,e)}reload(){return $A(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Ia(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dn(this.auth.app))return Promise.reject(cr(this.auth));const e=await this.getIdToken();return await eo(this,MA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:v,providerData:O,stsTokenManager:F}=n;he(p&&F,e,"internal-error");const $=jr.fromJSON(this.name,F);he(typeof p=="string",e,"internal-error"),_s(s,e.name),_s(r,e.name),he(typeof m=="boolean",e,"internal-error"),he(typeof v=="boolean",e,"internal-error"),_s(i,e.name),_s(o,e.name),_s(l,e.name),_s(c,e.name),_s(u,e.name),_s(d,e.name);const K=new fn({uid:p,auth:e,email:r,emailVerified:m,displayName:s,isAnonymous:v,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:$,createdAt:u,lastLoginAt:d});return O&&Array.isArray(O)&&(K.providerData=O.map(M=>({...M}))),c&&(K._redirectEventId=c),K}static async _fromIdTokenResponse(e,n,s=!1){const r=new jr;r.updateFromServerResponse(n);const i=new fn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await Ia(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];he(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?a_(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,l=new jr;l.updateFromIdToken(s);const c=new fn({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Bc(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(c,u),c}}const xf=new Map;function Xn(t){is(t instanceof Function,"Expected a class definition");let e=xf.get(t);return e?(is(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,xf.set(t,e),e)}class l_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}l_.type="NONE";const kf=l_;function Zo(t,e,n){return`firebase:${t}:${e}:${n}`}class Hr{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=Zo(this.userKey,r.apiKey,i),this.fullPersistenceKey=Zo("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ta(this.auth,{idToken:e}).catch(()=>{});return n?fn._fromGetAccountInfoResponse(this.auth,n,e):null}return fn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Hr(Xn(kf),e,s);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||Xn(kf);const o=Zo(s,e.config.apiKey,e.name);let l=null;for(const u of n)try{const d=await u._get(o);if(d){let p;if(typeof d=="string"){const m=await Ta(e,{idToken:d}).catch(()=>{});if(!m)break;p=await fn._fromGetAccountInfoResponse(e,m,d)}else p=fn._fromJSON(e,d);u!==i&&(l=p),i=u;break}}catch{}const c=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Hr(i,e,s):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Hr(i,e,s))}}function Df(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(d_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(c_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(p_(e))return"Blackberry";if(m_(e))return"Webos";if(u_(e))return"Safari";if((e.includes("chrome/")||h_(e))&&!e.includes("edge/"))return"Chrome";if(f_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function c_(t=Ot()){return/firefox\//i.test(t)}function u_(t=Ot()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function h_(t=Ot()){return/crios\//i.test(t)}function d_(t=Ot()){return/iemobile/i.test(t)}function f_(t=Ot()){return/android/i.test(t)}function p_(t=Ot()){return/blackberry/i.test(t)}function m_(t=Ot()){return/webos/i.test(t)}function $u(t=Ot()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function qA(t=Ot()){return $u(t)&&!!window.navigator?.standalone}function zA(){return OT()&&document.documentMode===10}function g_(t=Ot()){return $u(t)||f_(t)||m_(t)||p_(t)||/windows phone/i.test(t)||d_(t)}function __(t,e=[]){let n;switch(t){case"Browser":n=Df(Ot());break;case"Worker":n=`${Df(Ot())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${oi}/${s}`}class GA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function WA(t,e={}){return ai(t,"GET","/v2/passwordPolicy",Fu(t,e))}const KA=6;class QA{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??KA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class YA{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nf(this),this.idTokenSubscription=new Nf(this),this.beforeStateQueue=new GA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=s_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xn(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Hr.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ta(this,{idToken:e}),s=await fn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(dn(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&l?.user&&(s=l.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ia(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=xA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dn(this.app))return Promise.reject(cr(this));const n=e?bt(e):null;return n&&he(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dn(this.app)?Promise.reject(cr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dn(this.app)?Promise.reject(cr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await WA(this),n=new QA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _r("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await HA(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Xn(e)||this._popupRedirectResolver;he(n,this,"argument-error"),this.redirectPersistenceManager=await Hr.create(this,[Xn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,r);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=__(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&SA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function rl(t){return bt(t)}class Nf{constructor(e){this.auth=e,this.observer=null,this.addObserver=jT(n=>this.observer=n)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Bu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function JA(t){Bu=t}function XA(t){return Bu.loadJS(t)}function ZA(){return Bu.gapiScript}function e1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function t1(t,e){const n=yr(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(Vs(i,e??{}))return r;$n(r,"already-initialized")}return n.initialize({options:e})}function n1(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Xn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function s1(t,e,n){const s=rl(t);he(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=y_(e),{host:o,port:l}=r1(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){he(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),he(Vs(u,s.config.emulator)&&Vs(d,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=d,s.settings.appVerificationDisabledForTesting=!0,ii(o)?(bg(`${i}//${o}${c}`),Ag("Auth",!0)):i1()}function y_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function r1(t){const e=y_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:Vf(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:Vf(o)}}}function Vf(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function i1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class v_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Jn("not implemented")}_getIdTokenResponse(e){return Jn("not implemented")}_linkToIdToken(e,n){return Jn("not implemented")}_getReauthenticationResolver(e){return Jn("not implemented")}}async function qr(t,e){return VA(t,"POST","/v1/accounts:signInWithIdp",Fu(t,e))}const o1="http://localhost";class fr extends v_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$n("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new fr(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return qr(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,qr(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qr(e,n)}buildRequest(){const e={requestUri:o1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ho(n)}return e}}class ju{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class po extends ju{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ts extends po{constructor(){super("facebook.com")}static credential(e){return fr._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ts.credential(e.oauthAccessToken)}catch{return null}}}Ts.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ts.PROVIDER_ID="facebook.com";class Yn extends po{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fr._fromParams({providerId:Yn.PROVIDER_ID,signInMethod:Yn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Yn.credentialFromTaggedObject(e)}static credentialFromError(e){return Yn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Yn.credential(n,s)}catch{return null}}}Yn.GOOGLE_SIGN_IN_METHOD="google.com";Yn.PROVIDER_ID="google.com";class Is extends po{constructor(){super("github.com")}static credential(e){return fr._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Is.credential(e.oauthAccessToken)}catch{return null}}}Is.GITHUB_SIGN_IN_METHOD="github.com";Is.PROVIDER_ID="github.com";class bs extends po{constructor(){super("twitter.com")}static credential(e,n){return fr._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return bs.credential(n,s)}catch{return null}}}bs.TWITTER_SIGN_IN_METHOD="twitter.com";bs.PROVIDER_ID="twitter.com";class Jr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await fn._fromIdTokenResponse(e,s,r),o=Of(s);return new Jr({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=Of(s);return new Jr({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function Of(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class ba extends Tn{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,ba.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new ba(e,n,s,r)}}function w_(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ba._fromErrorAndOperation(t,i,e,s):i})}async function a1(t,e,n=!1){const s=await eo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Jr._forOperation(t,"link",s)}async function l1(t,e,n=!1){const{auth:s}=t;if(dn(s.app))return Promise.reject(cr(s));const r="reauthenticate";try{const i=await eo(t,w_(s,r,e,t),n);he(i.idToken,s,"internal-error");const o=Uu(i.idToken);he(o,s,"internal-error");const{sub:l}=o;return he(t.uid===l,s,"user-mismatch"),Jr._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&$n(s,"user-mismatch"),i}}async function c1(t,e,n=!1){if(dn(t.app))return Promise.reject(cr(t));const s="signIn",r=await w_(t,s,e),i=await Jr._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}function u1(t,e,n,s){return bt(t).onIdTokenChanged(e,n,s)}function h1(t,e,n){return bt(t).beforeAuthStateChanged(e,n)}function il(t,e,n,s){return bt(t).onAuthStateChanged(e,n,s)}function d1(t){return bt(t).signOut()}const Aa="__sak";class E_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Aa,"1"),this.storage.removeItem(Aa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const f1=1e3,p1=10;class T_ extends E_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=g_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);zA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,p1):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},f1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}T_.type="LOCAL";const m1=T_;class I_ extends E_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}I_.type="SESSION";const b_=I_;function g1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class ol{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new ol(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await g1(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ol.receivers=[];function Hu(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}class _1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=Hu("",20);r.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(p){const m=p;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(d),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Nn(){return window}function y1(t){Nn().location.href=t}function A_(){return typeof Nn().WorkerGlobalScope<"u"&&typeof Nn().importScripts=="function"}async function v1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function w1(){return navigator?.serviceWorker?.controller||null}function E1(){return A_()?self:null}const S_="firebaseLocalStorageDb",T1=1,Sa="firebaseLocalStorage",R_="fbase_key";class mo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function al(t,e){return t.transaction([Sa],e?"readwrite":"readonly").objectStore(Sa)}function I1(){const t=indexedDB.deleteDatabase(S_);return new mo(t).toPromise()}function jc(){const t=indexedDB.open(S_,T1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Sa,{keyPath:R_})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Sa)?e(s):(s.close(),await I1(),e(await jc()))})})}async function Mf(t,e,n){const s=al(t,!0).put({[R_]:e,value:n});return new mo(s).toPromise()}async function b1(t,e){const n=al(t,!1).get(e),s=await new mo(n).toPromise();return s===void 0?null:s.value}function Lf(t,e){const n=al(t,!0).delete(e);return new mo(n).toPromise()}const A1=800,S1=3;class C_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jc(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>S1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return A_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ol._getInstance(E1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await v1(),!this.activeServiceWorker)return;this.sender=new _1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||w1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jc();return await Mf(e,Aa,"1"),await Lf(e,Aa),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Mf(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>b1(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Lf(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=al(r,!1).getAll();return new mo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),A1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}C_.type="LOCAL";const R1=C_;new fo(3e4,6e4);function P_(t,e){return e?Xn(e):(he(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class qu extends v_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function C1(t){return c1(t.auth,new qu(t),t.bypassAuthState)}function P1(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),l1(n,new qu(t),t.bypassAuthState)}async function x1(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),a1(n,new qu(t),t.bypassAuthState)}class x_{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return C1;case"linkViaPopup":case"linkViaRedirect":return x1;case"reauthViaPopup":case"reauthViaRedirect":return P1;default:$n(this.auth,"internal-error")}}resolve(e){is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const k1=new fo(2e3,1e4);async function D1(t,e,n){if(dn(t.app))return Promise.reject(gn(t,"operation-not-supported-in-this-environment"));const s=rl(t);RA(t,e,ju);const r=P_(s,n);return new ir(s,"signInViaPopup",e,r).executeNotNull()}class ir extends x_{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,ir.currentPopupAction&&ir.currentPopupAction.cancel(),ir.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){is(this.filter.length===1,"Popup operations only handle one event");const e=Hu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(gn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(gn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ir.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,k1.get())};e()}}ir.currentPopupAction=null;const N1="pendingRedirect",ea=new Map;class V1 extends x_{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=ea.get(this.auth._key());if(!e){try{const s=await O1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}ea.set(this.auth._key(),e)}return this.bypassAuthState||ea.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function O1(t,e){const n=F1(e),s=L1(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function M1(t,e){ea.set(t._key(),e)}function L1(t){return Xn(t._redirectPersistence)}function F1(t){return Zo(N1,t.config.apiKey,t.name)}async function U1(t,e,n=!1){if(dn(t.app))return Promise.reject(cr(t));const s=rl(t),r=P_(s,e),o=await new V1(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}const $1=10*60*1e3;class B1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!j1(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!k_(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(gn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$1&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ff(e))}saveEventToCache(e){this.cachedEventUids.add(Ff(e)),this.lastProcessedEventTime=Date.now()}}function Ff(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function k_({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function j1(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return k_(t);default:return!1}}async function H1(t,e={}){return ai(t,"GET","/v1/projects",e)}const q1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,z1=/^https?/;async function G1(t){if(t.config.emulator)return;const{authorizedDomains:e}=await H1(t);for(const n of e)try{if(W1(n))return}catch{}$n(t,"unauthorized-domain")}function W1(t){const e=$c(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!z1.test(n))return!1;if(q1.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}const K1=new fo(3e4,6e4);function Uf(){const t=Nn().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Q1(t){return new Promise((e,n)=>{function s(){Uf(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Uf(),n(gn(t,"network-request-failed"))},timeout:K1.get()})}if(Nn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Nn().gapi?.load)s();else{const r=e1("iframefcb");return Nn()[r]=()=>{gapi.load?s():n(gn(t,"network-request-failed"))},XA(`${ZA()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw ta=null,e})}let ta=null;function Y1(t){return ta=ta||Q1(t),ta}const J1=new fo(5e3,15e3),X1="__/auth/iframe",Z1="emulator/auth/iframe",eS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nS(t){const e=t.config;he(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Lu(e,Z1):`https://${t.config.authDomain}/${X1}`,s={apiKey:e.apiKey,appName:t.name,v:oi},r=tS.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${ho(s).slice(1)}`}async function sS(t){const e=await Y1(t),n=Nn().gapi;return he(n,t,"internal-error"),e.open({where:document.body,url:nS(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eS,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=gn(t,"network-request-failed"),l=Nn().setTimeout(()=>{i(o)},J1.get());function c(){Nn().clearTimeout(l),r(s)}s.ping(c).then(c,()=>{i(o)})}))}const rS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iS=500,oS=600,aS="_blank",lS="http://localhost";class $f{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cS(t,e,n,s=iS,r=oS){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c={...rS,width:s.toString(),height:r.toString(),top:i,left:o},u=Ot().toLowerCase();n&&(l=h_(u)?aS:n),c_(u)&&(e=e||lS,c.scrollbars="yes");const d=Object.entries(c).reduce((m,[v,O])=>`${m}${v}=${O},`,"");if(qA(u)&&l!=="_self")return uS(e||"",l),new $f(null);const p=window.open(e||"",l,d);he(p,t,"popup-blocked");try{p.focus()}catch{}return new $f(p)}function uS(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const hS="__/auth/handler",dS="emulator/auth/handler",fS=encodeURIComponent("fac");async function Bf(t,e,n,s,r,i){he(t.config.authDomain,t,"auth-domain-config-required"),he(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:oi,eventId:r};if(e instanceof ju){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",BT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))o[d]=p}if(e instanceof po){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${fS}=${encodeURIComponent(c)}`:"";return`${pS(t)}?${ho(l).slice(1)}${u}`}function pS({config:t}){return t.emulator?Lu(t,dS):`https://${t.authDomain}/${hS}`}const dc="webStorageSupport";class mS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=b_,this._completeRedirectFn=U1,this._overrideRedirectResult=M1}async _openPopup(e,n,s,r){is(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await Bf(e,n,s,$c(),r);return cS(e,i,Hu())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await Bf(e,n,s,$c(),r);return y1(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(is(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await sS(e),s=new B1(e);return n.register("authEvent",r=>(he(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(dc,{type:dc},r=>{const i=r?.[0]?.[dc];i!==void 0&&n(!!i),$n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=G1(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return g_()||u_()||$u()}}const gS=mS;var jf="@firebase/auth",Hf="1.11.1";class _S{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function yS(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vS(t){Un(new wn("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;he(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:__(t)},u=new YA(s,r,i,c);return n1(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Un(new wn("auth-internal",e=>{const n=rl(e.getProvider("auth").getImmediate());return(s=>new _S(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ln(jf,Hf,yS(t)),ln(jf,Hf,"esm2020")}const wS=5*60,ES=Ig("authIdTokenMaxAge")||wS;let qf=null;const TS=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>ES)return;const r=n?.token;qf!==r&&(qf=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function IS(t=Cu()){const e=yr(t,"auth");if(e.isInitialized())return e.getImmediate();const n=t1(t,{popupRedirectResolver:gS,persistence:[R1,m1,b_]}),s=Ig("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=TS(i.toString());h1(n,o,()=>o(n.currentUser)),u1(n,l=>o(l))}}const r=Eg("auth");return r&&s1(n,`http://${r}`),n}function bS(){return document.getElementsByTagName("head")?.[0]??document}JA({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=gn("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",bS().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vS("Browser");var zf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var xs,D_;(function(){var t;function e(b,y){function _(){}_.prototype=y.prototype,b.F=y.prototype,b.prototype=new _,b.prototype.constructor=b,b.D=function(R,S,A){for(var w=Array(arguments.length-2),we=2;we<arguments.length;we++)w[we-2]=arguments[we];return y.prototype[S].apply(R,w)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(b,y,_){_||(_=0);const R=Array(16);if(typeof y=="string")for(var S=0;S<16;++S)R[S]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(S=0;S<16;++S)R[S]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=b.g[0],_=b.g[1],S=b.g[2];let A=b.g[3],w;w=y+(A^_&(S^A))+R[0]+3614090360&4294967295,y=_+(w<<7&4294967295|w>>>25),w=A+(S^y&(_^S))+R[1]+3905402710&4294967295,A=y+(w<<12&4294967295|w>>>20),w=S+(_^A&(y^_))+R[2]+606105819&4294967295,S=A+(w<<17&4294967295|w>>>15),w=_+(y^S&(A^y))+R[3]+3250441966&4294967295,_=S+(w<<22&4294967295|w>>>10),w=y+(A^_&(S^A))+R[4]+4118548399&4294967295,y=_+(w<<7&4294967295|w>>>25),w=A+(S^y&(_^S))+R[5]+1200080426&4294967295,A=y+(w<<12&4294967295|w>>>20),w=S+(_^A&(y^_))+R[6]+2821735955&4294967295,S=A+(w<<17&4294967295|w>>>15),w=_+(y^S&(A^y))+R[7]+4249261313&4294967295,_=S+(w<<22&4294967295|w>>>10),w=y+(A^_&(S^A))+R[8]+1770035416&4294967295,y=_+(w<<7&4294967295|w>>>25),w=A+(S^y&(_^S))+R[9]+2336552879&4294967295,A=y+(w<<12&4294967295|w>>>20),w=S+(_^A&(y^_))+R[10]+4294925233&4294967295,S=A+(w<<17&4294967295|w>>>15),w=_+(y^S&(A^y))+R[11]+2304563134&4294967295,_=S+(w<<22&4294967295|w>>>10),w=y+(A^_&(S^A))+R[12]+1804603682&4294967295,y=_+(w<<7&4294967295|w>>>25),w=A+(S^y&(_^S))+R[13]+4254626195&4294967295,A=y+(w<<12&4294967295|w>>>20),w=S+(_^A&(y^_))+R[14]+2792965006&4294967295,S=A+(w<<17&4294967295|w>>>15),w=_+(y^S&(A^y))+R[15]+1236535329&4294967295,_=S+(w<<22&4294967295|w>>>10),w=y+(S^A&(_^S))+R[1]+4129170786&4294967295,y=_+(w<<5&4294967295|w>>>27),w=A+(_^S&(y^_))+R[6]+3225465664&4294967295,A=y+(w<<9&4294967295|w>>>23),w=S+(y^_&(A^y))+R[11]+643717713&4294967295,S=A+(w<<14&4294967295|w>>>18),w=_+(A^y&(S^A))+R[0]+3921069994&4294967295,_=S+(w<<20&4294967295|w>>>12),w=y+(S^A&(_^S))+R[5]+3593408605&4294967295,y=_+(w<<5&4294967295|w>>>27),w=A+(_^S&(y^_))+R[10]+38016083&4294967295,A=y+(w<<9&4294967295|w>>>23),w=S+(y^_&(A^y))+R[15]+3634488961&4294967295,S=A+(w<<14&4294967295|w>>>18),w=_+(A^y&(S^A))+R[4]+3889429448&4294967295,_=S+(w<<20&4294967295|w>>>12),w=y+(S^A&(_^S))+R[9]+568446438&4294967295,y=_+(w<<5&4294967295|w>>>27),w=A+(_^S&(y^_))+R[14]+3275163606&4294967295,A=y+(w<<9&4294967295|w>>>23),w=S+(y^_&(A^y))+R[3]+4107603335&4294967295,S=A+(w<<14&4294967295|w>>>18),w=_+(A^y&(S^A))+R[8]+1163531501&4294967295,_=S+(w<<20&4294967295|w>>>12),w=y+(S^A&(_^S))+R[13]+2850285829&4294967295,y=_+(w<<5&4294967295|w>>>27),w=A+(_^S&(y^_))+R[2]+4243563512&4294967295,A=y+(w<<9&4294967295|w>>>23),w=S+(y^_&(A^y))+R[7]+1735328473&4294967295,S=A+(w<<14&4294967295|w>>>18),w=_+(A^y&(S^A))+R[12]+2368359562&4294967295,_=S+(w<<20&4294967295|w>>>12),w=y+(_^S^A)+R[5]+4294588738&4294967295,y=_+(w<<4&4294967295|w>>>28),w=A+(y^_^S)+R[8]+2272392833&4294967295,A=y+(w<<11&4294967295|w>>>21),w=S+(A^y^_)+R[11]+1839030562&4294967295,S=A+(w<<16&4294967295|w>>>16),w=_+(S^A^y)+R[14]+4259657740&4294967295,_=S+(w<<23&4294967295|w>>>9),w=y+(_^S^A)+R[1]+2763975236&4294967295,y=_+(w<<4&4294967295|w>>>28),w=A+(y^_^S)+R[4]+1272893353&4294967295,A=y+(w<<11&4294967295|w>>>21),w=S+(A^y^_)+R[7]+4139469664&4294967295,S=A+(w<<16&4294967295|w>>>16),w=_+(S^A^y)+R[10]+3200236656&4294967295,_=S+(w<<23&4294967295|w>>>9),w=y+(_^S^A)+R[13]+681279174&4294967295,y=_+(w<<4&4294967295|w>>>28),w=A+(y^_^S)+R[0]+3936430074&4294967295,A=y+(w<<11&4294967295|w>>>21),w=S+(A^y^_)+R[3]+3572445317&4294967295,S=A+(w<<16&4294967295|w>>>16),w=_+(S^A^y)+R[6]+76029189&4294967295,_=S+(w<<23&4294967295|w>>>9),w=y+(_^S^A)+R[9]+3654602809&4294967295,y=_+(w<<4&4294967295|w>>>28),w=A+(y^_^S)+R[12]+3873151461&4294967295,A=y+(w<<11&4294967295|w>>>21),w=S+(A^y^_)+R[15]+530742520&4294967295,S=A+(w<<16&4294967295|w>>>16),w=_+(S^A^y)+R[2]+3299628645&4294967295,_=S+(w<<23&4294967295|w>>>9),w=y+(S^(_|~A))+R[0]+4096336452&4294967295,y=_+(w<<6&4294967295|w>>>26),w=A+(_^(y|~S))+R[7]+1126891415&4294967295,A=y+(w<<10&4294967295|w>>>22),w=S+(y^(A|~_))+R[14]+2878612391&4294967295,S=A+(w<<15&4294967295|w>>>17),w=_+(A^(S|~y))+R[5]+4237533241&4294967295,_=S+(w<<21&4294967295|w>>>11),w=y+(S^(_|~A))+R[12]+1700485571&4294967295,y=_+(w<<6&4294967295|w>>>26),w=A+(_^(y|~S))+R[3]+2399980690&4294967295,A=y+(w<<10&4294967295|w>>>22),w=S+(y^(A|~_))+R[10]+4293915773&4294967295,S=A+(w<<15&4294967295|w>>>17),w=_+(A^(S|~y))+R[1]+2240044497&4294967295,_=S+(w<<21&4294967295|w>>>11),w=y+(S^(_|~A))+R[8]+1873313359&4294967295,y=_+(w<<6&4294967295|w>>>26),w=A+(_^(y|~S))+R[15]+4264355552&4294967295,A=y+(w<<10&4294967295|w>>>22),w=S+(y^(A|~_))+R[6]+2734768916&4294967295,S=A+(w<<15&4294967295|w>>>17),w=_+(A^(S|~y))+R[13]+1309151649&4294967295,_=S+(w<<21&4294967295|w>>>11),w=y+(S^(_|~A))+R[4]+4149444226&4294967295,y=_+(w<<6&4294967295|w>>>26),w=A+(_^(y|~S))+R[11]+3174756917&4294967295,A=y+(w<<10&4294967295|w>>>22),w=S+(y^(A|~_))+R[2]+718787259&4294967295,S=A+(w<<15&4294967295|w>>>17),w=_+(A^(S|~y))+R[9]+3951481745&4294967295,b.g[0]=b.g[0]+y&4294967295,b.g[1]=b.g[1]+(S+(w<<21&4294967295|w>>>11))&4294967295,b.g[2]=b.g[2]+S&4294967295,b.g[3]=b.g[3]+A&4294967295}s.prototype.v=function(b,y){y===void 0&&(y=b.length);const _=y-this.blockSize,R=this.C;let S=this.h,A=0;for(;A<y;){if(S==0)for(;A<=_;)r(this,b,A),A+=this.blockSize;if(typeof b=="string"){for(;A<y;)if(R[S++]=b.charCodeAt(A++),S==this.blockSize){r(this,R),S=0;break}}else for(;A<y;)if(R[S++]=b[A++],S==this.blockSize){r(this,R),S=0;break}}this.h=S,this.o+=y},s.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var y=1;y<b.length-8;++y)b[y]=0;y=this.o*8;for(var _=b.length-8;_<b.length;++_)b[_]=y&255,y/=256;for(this.v(b),b=Array(16),y=0,_=0;_<4;++_)for(let R=0;R<32;R+=8)b[y++]=this.g[_]>>>R&255;return b};function i(b,y){var _=l;return Object.prototype.hasOwnProperty.call(_,b)?_[b]:_[b]=y(b)}function o(b,y){this.h=y;const _=[];let R=!0;for(let S=b.length-1;S>=0;S--){const A=b[S]|0;R&&A==y||(_[S]=A,R=!1)}this.g=_}var l={};function c(b){return-128<=b&&b<128?i(b,function(y){return new o([y|0],y<0?-1:0)}):new o([b|0],b<0?-1:0)}function u(b){if(isNaN(b)||!isFinite(b))return p;if(b<0)return $(u(-b));const y=[];let _=1;for(let R=0;b>=_;R++)y[R]=b/_|0,_*=4294967296;return new o(y,0)}function d(b,y){if(b.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(b.charAt(0)=="-")return $(d(b.substring(1),y));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const _=u(Math.pow(y,8));let R=p;for(let A=0;A<b.length;A+=8){var S=Math.min(8,b.length-A);const w=parseInt(b.substring(A,A+S),y);S<8?(S=u(Math.pow(y,S)),R=R.j(S).add(u(w))):(R=R.j(_),R=R.add(u(w)))}return R}var p=c(0),m=c(1),v=c(16777216);t=o.prototype,t.m=function(){if(F(this))return-$(this).m();let b=0,y=1;for(let _=0;_<this.g.length;_++){const R=this.i(_);b+=(R>=0?R:4294967296+R)*y,y*=4294967296}return b},t.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(O(this))return"0";if(F(this))return"-"+$(this).toString(b);const y=u(Math.pow(b,6));var _=this;let R="";for(;;){const S=Q(_,y).g;_=K(_,S.j(y));let A=((_.g.length>0?_.g[0]:_.h)>>>0).toString(b);if(_=S,O(_))return A+R;for(;A.length<6;)A="0"+A;R=A+R}},t.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function O(b){if(b.h!=0)return!1;for(let y=0;y<b.g.length;y++)if(b.g[y]!=0)return!1;return!0}function F(b){return b.h==-1}t.l=function(b){return b=K(this,b),F(b)?-1:O(b)?0:1};function $(b){const y=b.g.length,_=[];for(let R=0;R<y;R++)_[R]=~b.g[R];return new o(_,~b.h).add(m)}t.abs=function(){return F(this)?$(this):this},t.add=function(b){const y=Math.max(this.g.length,b.g.length),_=[];let R=0;for(let S=0;S<=y;S++){let A=R+(this.i(S)&65535)+(b.i(S)&65535),w=(A>>>16)+(this.i(S)>>>16)+(b.i(S)>>>16);R=w>>>16,A&=65535,w&=65535,_[S]=w<<16|A}return new o(_,_[_.length-1]&-2147483648?-1:0)};function K(b,y){return b.add($(y))}t.j=function(b){if(O(this)||O(b))return p;if(F(this))return F(b)?$(this).j($(b)):$($(this).j(b));if(F(b))return $(this.j($(b)));if(this.l(v)<0&&b.l(v)<0)return u(this.m()*b.m());const y=this.g.length+b.g.length,_=[];for(var R=0;R<2*y;R++)_[R]=0;for(R=0;R<this.g.length;R++)for(let S=0;S<b.g.length;S++){const A=this.i(R)>>>16,w=this.i(R)&65535,we=b.i(S)>>>16,$e=b.i(S)&65535;_[2*R+2*S]+=w*$e,M(_,2*R+2*S),_[2*R+2*S+1]+=A*$e,M(_,2*R+2*S+1),_[2*R+2*S+1]+=w*we,M(_,2*R+2*S+1),_[2*R+2*S+2]+=A*we,M(_,2*R+2*S+2)}for(b=0;b<y;b++)_[b]=_[2*b+1]<<16|_[2*b];for(b=y;b<2*y;b++)_[b]=0;return new o(_,0)};function M(b,y){for(;(b[y]&65535)!=b[y];)b[y+1]+=b[y]>>>16,b[y]&=65535,y++}function U(b,y){this.g=b,this.h=y}function Q(b,y){if(O(y))throw Error("division by zero");if(O(b))return new U(p,p);if(F(b))return y=Q($(b),y),new U($(y.g),$(y.h));if(F(y))return y=Q(b,$(y)),new U($(y.g),y.h);if(b.g.length>30){if(F(b)||F(y))throw Error("slowDivide_ only works with positive integers.");for(var _=m,R=y;R.l(b)<=0;)_=B(_),R=B(R);var S=j(_,1),A=j(R,1);for(R=j(R,2),_=j(_,2);!O(R);){var w=A.add(R);w.l(b)<=0&&(S=S.add(_),A=w),R=j(R,1),_=j(_,1)}return y=K(b,S.j(y)),new U(S,y)}for(S=p;b.l(y)>=0;){for(_=Math.max(1,Math.floor(b.m()/y.m())),R=Math.ceil(Math.log(_)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),A=u(_),w=A.j(y);F(w)||w.l(b)>0;)_-=R,A=u(_),w=A.j(y);O(A)&&(A=m),S=S.add(A),b=K(b,w)}return new U(S,b)}t.B=function(b){return Q(this,b).h},t.and=function(b){const y=Math.max(this.g.length,b.g.length),_=[];for(let R=0;R<y;R++)_[R]=this.i(R)&b.i(R);return new o(_,this.h&b.h)},t.or=function(b){const y=Math.max(this.g.length,b.g.length),_=[];for(let R=0;R<y;R++)_[R]=this.i(R)|b.i(R);return new o(_,this.h|b.h)},t.xor=function(b){const y=Math.max(this.g.length,b.g.length),_=[];for(let R=0;R<y;R++)_[R]=this.i(R)^b.i(R);return new o(_,this.h^b.h)};function B(b){const y=b.g.length+1,_=[];for(let R=0;R<y;R++)_[R]=b.i(R)<<1|b.i(R-1)>>>31;return new o(_,b.h)}function j(b,y){const _=y>>5;y%=32;const R=b.g.length-_,S=[];for(let A=0;A<R;A++)S[A]=y>0?b.i(A+_)>>>y|b.i(A+_+1)<<32-y:b.i(A+_);return new o(S,b.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,D_=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,xs=o}).apply(typeof zf<"u"?zf:typeof self<"u"?self:typeof window<"u"?window:{});var Bo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var N_,Ci,V_,na,Hc,O_,M_,L_;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bo=="object"&&Bo];for(var h=0;h<a.length;++h){var f=a[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var s=n(this);function r(a,h){if(h)e:{var f=s;a=a.split(".");for(var g=0;g<a.length-1;g++){var N=a[g];if(!(N in f))break e;f=f[N]}a=a[a.length-1],g=f[a],h=h(g),h!=g&&h!=null&&e(f,a,{configurable:!0,writable:!0,value:h})}}r("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(a){return a||function(h){var f=[],g;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&f.push([g,h[g]]);return f}});var i=i||{},o=this||self;function l(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function c(a,h,f){return a.call.apply(a.bind,arguments)}function u(a,h,f){return u=c,u.apply(null,arguments)}function d(a,h){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function p(a,h){function f(){}f.prototype=h.prototype,a.Z=h.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(g,N,L){for(var X=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)X[ve-2]=arguments[ve];return h.prototype[N].apply(g,X)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function v(a){const h=a.length;if(h>0){const f=Array(h);for(let g=0;g<h;g++)f[g]=a[g];return f}return[]}function O(a,h){for(let g=1;g<arguments.length;g++){const N=arguments[g];var f=typeof N;if(f=f!="object"?f:N?Array.isArray(N)?"array":f:"null",f=="array"||f=="object"&&typeof N.length=="number"){f=a.length||0;const L=N.length||0;a.length=f+L;for(let X=0;X<L;X++)a[f+X]=N[X]}else a.push(N)}}class F{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function $(a){o.setTimeout(()=>{throw a},0)}function K(){var a=b;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class M{constructor(){this.h=this.g=null}add(h,f){const g=U.get();g.set(h,f),this.h?this.h.next=g:this.g=g,this.h=g}}var U=new F(()=>new Q,a=>a.reset());class Q{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let B,j=!1,b=new M,y=()=>{const a=Promise.resolve(void 0);B=()=>{a.then(_)}};function _(){for(var a;a=K();){try{a.h.call(a.g)}catch(f){$(f)}var h=U;h.j(a),h.h<100&&(h.h++,a.next=h.g,h.g=a)}j=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function S(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}S.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};o.addEventListener("test",f,h),o.removeEventListener("test",f,h)}catch{}return a}();function w(a){return/^[\s\xa0]*$/.test(a)}function we(a,h){S.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,h)}p(we,S),we.prototype.init=function(a,h){const f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget,h||(f=="mouseover"?h=a.fromElement:f=="mouseout"&&(h=a.toElement)),this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&we.Z.h.call(this)},we.prototype.h=function(){we.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var $e="closure_listenable_"+(Math.random()*1e6|0),Ge=0;function Pe(a,h,f,g,N){this.listener=a,this.proxy=null,this.src=h,this.type=f,this.capture=!!g,this.ha=N,this.key=++Ge,this.da=this.fa=!1}function Te(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function St(a,h,f){for(const g in a)h.call(f,a[g],g,a)}function zt(a,h){for(const f in a)h.call(void 0,a[f],f,a)}function Mt(a){const h={};for(const f in a)h[f]=a[f];return h}const ct="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function un(a,h){let f,g;for(let N=1;N<arguments.length;N++){g=arguments[N];for(f in g)a[f]=g[f];for(let L=0;L<ct.length;L++)f=ct[L],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function Gt(a){this.src=a,this.g={},this.h=0}Gt.prototype.add=function(a,h,f,g,N){const L=a.toString();a=this.g[L],a||(a=this.g[L]=[],this.h++);const X=ft(a,h,g,N);return X>-1?(h=a[X],f||(h.fa=!1)):(h=new Pe(h,this.src,L,!!g,N),h.fa=f,a.push(h)),h};function Wt(a,h){const f=h.type;if(f in a.g){var g=a.g[f],N=Array.prototype.indexOf.call(g,h,void 0),L;(L=N>=0)&&Array.prototype.splice.call(g,N,1),L&&(Te(h),a.g[f].length==0&&(delete a.g[f],a.h--))}}function ft(a,h,f,g){for(let N=0;N<a.length;++N){const L=a[N];if(!L.da&&L.listener==h&&L.capture==!!f&&L.ha==g)return N}return-1}var H="closure_lm_"+(Math.random()*1e6|0),se={};function ee(a,h,f,g,N){if(Array.isArray(h)){for(let L=0;L<h.length;L++)ee(a,h[L],f,g,N);return null}return f=P(f),a&&a[$e]?a.J(h,f,l(g)?!!g.capture:!1,N):le(a,h,f,!1,g,N)}function le(a,h,f,g,N,L){if(!h)throw Error("Invalid event type");const X=l(N)?!!N.capture:!!N;let ve=G(a);if(ve||(a[H]=ve=new Gt(a)),f=ve.add(h,f,g,X,L),f.proxy)return f;if(g=Ee(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)A||(N=X),N===void 0&&(N=!1),a.addEventListener(h.toString(),g,N);else if(a.attachEvent)a.attachEvent(D(h.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Ee(){function a(f){return h.call(a.src,a.listener,f)}const h=q;return a}function E(a,h,f,g,N){if(Array.isArray(h))for(var L=0;L<h.length;L++)E(a,h[L],f,g,N);else g=l(g)?!!g.capture:!!g,f=P(f),a&&a[$e]?(a=a.i,L=String(h).toString(),L in a.g&&(h=a.g[L],f=ft(h,f,g,N),f>-1&&(Te(h[f]),Array.prototype.splice.call(h,f,1),h.length==0&&(delete a.g[L],a.h--)))):a&&(a=G(a))&&(h=a.g[h.toString()],a=-1,h&&(a=ft(h,f,g,N)),(f=a>-1?h[a]:null)&&C(f))}function C(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[$e])Wt(h.i,a);else{var f=a.type,g=a.proxy;h.removeEventListener?h.removeEventListener(f,g,a.capture):h.detachEvent?h.detachEvent(D(f),g):h.addListener&&h.removeListener&&h.removeListener(g),(f=G(h))?(Wt(f,a),f.h==0&&(f.src=null,h[H]=null)):Te(a)}}}function D(a){return a in se?se[a]:se[a]="on"+a}function q(a,h){if(a.da)a=!0;else{h=new we(h,this);const f=a.listener,g=a.ha||a.src;a.fa&&C(a),a=f.call(g,h)}return a}function G(a){return a=a[H],a instanceof Gt?a:null}var x="__closure_events_fn_"+(Math.random()*1e9>>>0);function P(a){return typeof a=="function"?a:(a[x]||(a[x]=function(h){return a.handleEvent(h)}),a[x])}function T(){R.call(this),this.i=new Gt(this),this.M=this,this.G=null}p(T,R),T.prototype[$e]=!0,T.prototype.removeEventListener=function(a,h,f,g){E(this,a,h,f,g)};function k(a,h){var f,g=a.G;if(g)for(f=[];g;g=g.G)f.push(g);if(a=a.M,g=h.type||h,typeof h=="string")h=new S(h,a);else if(h instanceof S)h.target=h.target||a;else{var N=h;h=new S(g,a),un(h,N)}N=!0;let L,X;if(f)for(X=f.length-1;X>=0;X--)L=h.g=f[X],N=V(L,g,!0,h)&&N;if(L=h.g=a,N=V(L,g,!0,h)&&N,N=V(L,g,!1,h)&&N,f)for(X=0;X<f.length;X++)L=h.g=f[X],N=V(L,g,!1,h)&&N}T.prototype.N=function(){if(T.Z.N.call(this),this.i){var a=this.i;for(const h in a.g){const f=a.g[h];for(let g=0;g<f.length;g++)Te(f[g]);delete a.g[h],a.h--}}this.G=null},T.prototype.J=function(a,h,f,g){return this.i.add(String(a),h,!1,f,g)},T.prototype.K=function(a,h,f,g){return this.i.add(String(a),h,!0,f,g)};function V(a,h,f,g){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();let N=!0;for(let L=0;L<h.length;++L){const X=h[L];if(X&&!X.da&&X.capture==f){const ve=X.listener,ut=X.ha||X.src;X.fa&&Wt(a.i,X),N=ve.call(ut,g)!==!1&&N}}return N&&!g.defaultPrevented}function Y(a,h){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(a,h||0)}function J(a){a.g=Y(()=>{a.g=null,a.i&&(a.i=!1,J(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class oe extends R{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:J(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ae(a){R.call(this),this.h=a,this.g={}}p(ae,R);var te=[];function Se(a){St(a.g,function(h,f){this.g.hasOwnProperty(f)&&C(h)},a),a.g={}}ae.prototype.N=function(){ae.Z.N.call(this),Se(this)},ae.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var me=o.JSON.stringify,Ce=o.JSON.parse,Xe=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Qe(){}function Be(){}var Rt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zt(){S.call(this,"d")}p(Zt,S);function pt(){S.call(this,"c")}p(pt,S);var tt={},cs=null;function jn(){return cs=cs||new T}tt.Ia="serverreachability";function Io(a){S.call(this,tt.Ia,a)}p(Io,S);function Me(a){const h=jn();k(h,new Io(h))}tt.STAT_EVENT="statevent";function wt(a,h){S.call(this,tt.STAT_EVENT,a),this.stat=h}p(wt,S);function je(a){const h=jn();k(h,new wt(h,a))}tt.Ja="timingevent";function Le(a,h){S.call(this,tt.Ja,a),this.size=h}p(Le,S);function Ct(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},h)}function mt(){this.g=!0}mt.prototype.ua=function(){this.g=!1};function Ir(a,h,f,g,N,L){a.info(function(){if(a.g)if(L){var X="",ve=L.split("&");for(let Fe=0;Fe<ve.length;Fe++){var ut=ve[Fe].split("=");if(ut.length>1){const gt=ut[0];ut=ut[1];const An=gt.split("_");X=An.length>=2&&An[1]=="type"?X+(gt+"="+ut+"&"):X+(gt+"=redacted&")}}}else X=null;else X=L;return"XMLHTTP REQ ("+g+") [attempt "+N+"]: "+h+`
`+f+`
`+X})}function Hs(a,h,f,g,N,L,X){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+N+"]: "+h+`
`+f+`
`+L+" "+X})}function en(a,h,f,g){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+bh(a,f)+(g?" "+g:"")})}function bo(a,h){a.info(function(){return"TIMEOUT: "+h})}mt.prototype.info=function(){};function bh(a,h){if(!a.g)return h;if(!h)return null;try{const L=JSON.parse(h);if(L){for(a=0;a<L.length;a++)if(Array.isArray(L[a])){var f=L[a];if(!(f.length<2)){var g=f[1];if(Array.isArray(g)&&!(g.length<1)){var N=g[0];if(N!="noop"&&N!="stop"&&N!="close")for(let X=1;X<g.length;X++)g[X]=""}}}}return me(L)}catch{return h}}var br={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},bl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},qs;function In(){}p(In,Qe),In.prototype.g=function(){return new XMLHttpRequest},qs=new In;function Ar(a){return encodeURIComponent(String(a))}function Al(a){var h=1;a=a.split(":");const f=[];for(;h>0&&a.length;)f.push(a.shift()),h--;return a.length&&f.push(a.join(":")),f}function hn(a,h,f,g){this.j=a,this.i=h,this.l=f,this.S=g||1,this.V=new ae(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ao}function Ao(){this.i=null,this.g="",this.h=!1}var So={},Sl={};function Rl(a,h,f){a.M=1,a.A=Co(bn(h)),a.u=f,a.R=!0,Ah(a,null)}function Ah(a,h){a.F=Date.now(),Ro(a),a.B=bn(a.A);var f=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),Fh(f.i,"t",g),a.C=0,f=a.j.L,a.h=new Ao,a.g=nd(a.j,f?h:null,!a.u),a.P>0&&(a.O=new oe(u(a.Y,a,a.g),a.P)),h=a.V,f=a.g,g=a.ba;var N="readystatechange";Array.isArray(N)||(N&&(te[0]=N.toString()),N=te);for(let L=0;L<N.length;L++){const X=ee(f,N[L],g||h.handleEvent,!1,h.h||h);if(!X)break;h.g[X.key]=X}h=a.J?Mt(a.J):{},a.u?(a.v||(a.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,h)):(a.v="GET",a.g.ea(a.B,a.v,null,h)),Me(),Ir(a.i,a.v,a.B,a.l,a.S,a.u)}hn.prototype.ba=function(a){a=a.target;const h=this.O;h&&ds(a)==3?h.j():this.Y(a)},hn.prototype.Y=function(a){try{if(a==this.g)e:{const ve=ds(this.g),ut=this.g.ya(),Fe=this.g.ca();if(!(ve<3)&&(ve!=3||this.g&&(this.h.h||this.g.la()||zh(this.g)))){this.K||ve!=4||ut==7||(ut==8||Fe<=0?Me(3):Me(2)),Cl(this);var h=this.g.ca();this.X=h;var f=gv(this);if(this.o=h==200,Hs(this.i,this.v,this.B,this.l,this.S,ve,h),this.o){if(this.U&&!this.L){t:{if(this.g){var g,N=this.g;if((g=N.g?N.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(g)){var L=g;break t}}L=null}if(a=L)en(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Pl(this,a);else{this.o=!1,this.m=3,je(12),zs(this),fi(this);break e}}if(this.R){a=!0;let gt;for(;!this.K&&this.C<f.length;)if(gt=_v(this,f),gt==Sl){ve==4&&(this.m=4,je(14),a=!1),en(this.i,this.l,null,"[Incomplete Response]");break}else if(gt==So){this.m=4,je(15),en(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else en(this.i,this.l,gt,null),Pl(this,gt);if(Sh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ve!=4||f.length!=0||this.h.h||(this.m=1,je(16),a=!1),this.o=this.o&&a,!a)en(this.i,this.l,f,"[Invalid Chunked Response]"),zs(this),fi(this);else if(f.length>0&&!this.W){this.W=!0;var X=this.j;X.g==this&&X.aa&&!X.P&&(X.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),Ll(X),X.P=!0,je(11))}}else en(this.i,this.l,f,null),Pl(this,f);ve==4&&zs(this),this.o&&!this.K&&(ve==4?Xh(this.j,this):(this.o=!1,Ro(this)))}else kv(this.g),h==400&&f.indexOf("Unknown SID")>0?(this.m=3,je(12)):(this.m=0,je(13)),zs(this),fi(this)}}}catch{}finally{}};function gv(a){if(!Sh(a))return a.g.la();const h=zh(a.g);if(h==="")return"";let f="";const g=h.length,N=ds(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return zs(a),fi(a),"";a.h.i=new o.TextDecoder}for(let L=0;L<g;L++)a.h.h=!0,f+=a.h.i.decode(h[L],{stream:!(N&&L==g-1)});return h.length=0,a.h.g+=f,a.C=0,a.h.g}function Sh(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function _v(a,h){var f=a.C,g=h.indexOf(`
`,f);return g==-1?Sl:(f=Number(h.substring(f,g)),isNaN(f)?So:(g+=1,g+f>h.length?Sl:(h=h.slice(g,g+f),a.C=g+f,h)))}hn.prototype.cancel=function(){this.K=!0,zs(this)};function Ro(a){a.T=Date.now()+a.H,Rh(a,a.H)}function Rh(a,h){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Ct(u(a.aa,a),h)}function Cl(a){a.D&&(o.clearTimeout(a.D),a.D=null)}hn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(bo(this.i,this.B),this.M!=2&&(Me(),je(17)),zs(this),this.m=2,fi(this)):Rh(this,this.T-a)};function fi(a){a.j.I==0||a.K||Xh(a.j,a)}function zs(a){Cl(a);var h=a.O;h&&typeof h.dispose=="function"&&h.dispose(),a.O=null,Se(a.V),a.g&&(h=a.g,a.g=null,h.abort(),h.dispose())}function Pl(a,h){try{var f=a.j;if(f.I!=0&&(f.g==a||xl(f.h,a))){if(!a.L&&xl(f.h,a)&&f.I==3){try{var g=f.Ba.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var N=g;if(N[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)No(f),ko(f);else break e;Ml(f),je(18)}}else f.xa=N[1],0<f.xa-f.K&&N[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=Ct(u(f.Va,f),6e3));xh(f.h)<=1&&f.ta&&(f.ta=void 0)}else Ws(f,11)}else if((a.L||f.g==a)&&No(f),!w(h))for(N=f.Ba.g.parse(h),h=0;h<N.length;h++){let Fe=N[h];const gt=Fe[0];if(!(gt<=f.K))if(f.K=gt,Fe=Fe[1],f.I==2)if(Fe[0]=="c"){f.M=Fe[1],f.ba=Fe[2];const An=Fe[3];An!=null&&(f.ka=An,f.j.info("VER="+f.ka));const Ks=Fe[4];Ks!=null&&(f.za=Ks,f.j.info("SVER="+f.za));const fs=Fe[5];fs!=null&&typeof fs=="number"&&fs>0&&(g=1.5*fs,f.O=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;const ps=a.g;if(ps){const Oo=ps.g?ps.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oo){var L=g.h;L.g||Oo.indexOf("spdy")==-1&&Oo.indexOf("quic")==-1&&Oo.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(kl(L,L.h),L.h=null))}if(g.G){const Fl=ps.g?ps.g.getResponseHeader("X-HTTP-Session-Id"):null;Fl&&(g.wa=Fl,We(g.J,g.G,Fl))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),g=f;var X=a;if(g.na=td(g,g.L?g.ba:null,g.W),X.L){kh(g.h,X);var ve=X,ut=g.O;ut&&(ve.H=ut),ve.D&&(Cl(ve),Ro(ve)),g.g=X}else Yh(g);f.i.length>0&&Do(f)}else Fe[0]!="stop"&&Fe[0]!="close"||Ws(f,7);else f.I==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?Ws(f,7):Ol(f):Fe[0]!="noop"&&f.l&&f.l.qa(Fe),f.A=0)}}Me(4)}catch{}}var yv=class{constructor(a,h){this.g=a,this.map=h}};function Ch(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ph(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function xh(a){return a.h?1:a.g?a.g.size:0}function xl(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function kl(a,h){a.g?a.g.add(h):a.h=h}function kh(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Ch.prototype.cancel=function(){if(this.i=Dh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Dh(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const f of a.g.values())h=h.concat(f.G);return h}return v(a.i)}var Nh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vv(a,h){if(a){a=a.split("&");for(let f=0;f<a.length;f++){const g=a[f].indexOf("=");let N,L=null;g>=0?(N=a[f].substring(0,g),L=a[f].substring(g+1)):N=a[f],h(N,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function us(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;a instanceof us?(this.l=a.l,pi(this,a.j),this.o=a.o,this.g=a.g,mi(this,a.u),this.h=a.h,Dl(this,Uh(a.i)),this.m=a.m):a&&(h=String(a).match(Nh))?(this.l=!1,pi(this,h[1]||"",!0),this.o=gi(h[2]||""),this.g=gi(h[3]||"",!0),mi(this,h[4]),this.h=gi(h[5]||"",!0),Dl(this,h[6]||"",!0),this.m=gi(h[7]||"")):(this.l=!1,this.i=new yi(null,this.l))}us.prototype.toString=function(){const a=[];var h=this.j;h&&a.push(_i(h,Vh,!0),":");var f=this.g;return(f||h=="file")&&(a.push("//"),(h=this.o)&&a.push(_i(h,Vh,!0),"@"),a.push(Ar(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(_i(f,f.charAt(0)=="/"?Tv:Ev,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",_i(f,bv)),a.join("")},us.prototype.resolve=function(a){const h=bn(this);let f=!!a.j;f?pi(h,a.j):f=!!a.o,f?h.o=a.o:f=!!a.g,f?h.g=a.g:f=a.u!=null;var g=a.h;if(f)mi(h,a.u);else if(f=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var N=h.h.lastIndexOf("/");N!=-1&&(g=h.h.slice(0,N+1)+g)}if(N=g,N==".."||N==".")g="";else if(N.indexOf("./")!=-1||N.indexOf("/.")!=-1){g=N.lastIndexOf("/",0)==0,N=N.split("/");const L=[];for(let X=0;X<N.length;){const ve=N[X++];ve=="."?g&&X==N.length&&L.push(""):ve==".."?((L.length>1||L.length==1&&L[0]!="")&&L.pop(),g&&X==N.length&&L.push("")):(L.push(ve),g=!0)}g=L.join("/")}else g=N}return f?h.h=g:f=a.i.toString()!=="",f?Dl(h,Uh(a.i)):f=!!a.m,f&&(h.m=a.m),h};function bn(a){return new us(a)}function pi(a,h,f){a.j=f?gi(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function mi(a,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);a.u=h}else a.u=null}function Dl(a,h,f){h instanceof yi?(a.i=h,Av(a.i,a.l)):(f||(h=_i(h,Iv)),a.i=new yi(h,a.l))}function We(a,h,f){a.i.set(h,f)}function Co(a){return We(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function gi(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function _i(a,h,f){return typeof a=="string"?(a=encodeURI(a).replace(h,wv),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function wv(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Vh=/[#\/\?@]/g,Ev=/[#\?:]/g,Tv=/[#\?]/g,Iv=/[#\?@]/g,bv=/#/g;function yi(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Gs(a){a.g||(a.g=new Map,a.h=0,a.i&&vv(a.i,function(h,f){a.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=yi.prototype,t.add=function(a,h){Gs(this),this.i=null,a=Sr(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(h),this.h+=1,this};function Oh(a,h){Gs(a),h=Sr(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Mh(a,h){return Gs(a),h=Sr(a,h),a.g.has(h)}t.forEach=function(a,h){Gs(this),this.g.forEach(function(f,g){f.forEach(function(N){a.call(h,N,g,this)},this)},this)};function Lh(a,h){Gs(a);let f=[];if(typeof h=="string")Mh(a,h)&&(f=f.concat(a.g.get(Sr(a,h))));else for(a=Array.from(a.g.values()),h=0;h<a.length;h++)f=f.concat(a[h]);return f}t.set=function(a,h){return Gs(this),this.i=null,a=Sr(this,a),Mh(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=Lh(this,a),a.length>0?String(a[0]):h):h};function Fh(a,h,f){Oh(a,h),f.length>0&&(a.i=null,a.g.set(Sr(a,h),v(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(let g=0;g<h.length;g++){var f=h[g];const N=Ar(f);f=Lh(this,f);for(let L=0;L<f.length;L++){let X=N;f[L]!==""&&(X+="="+Ar(f[L])),a.push(X)}}return this.i=a.join("&")};function Uh(a){const h=new yi;return h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),h}function Sr(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function Av(a,h){h&&!a.j&&(Gs(a),a.i=null,a.g.forEach(function(f,g){const N=g.toLowerCase();g!=N&&(Oh(this,g),Fh(this,N,f))},a)),a.j=h}function Sv(a,h){const f=new mt;if(o.Image){const g=new Image;g.onload=d(hs,f,"TestLoadImage: loaded",!0,h,g),g.onerror=d(hs,f,"TestLoadImage: error",!1,h,g),g.onabort=d(hs,f,"TestLoadImage: abort",!1,h,g),g.ontimeout=d(hs,f,"TestLoadImage: timeout",!1,h,g),o.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else h(!1)}function Rv(a,h){const f=new mt,g=new AbortController,N=setTimeout(()=>{g.abort(),hs(f,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:g.signal}).then(L=>{clearTimeout(N),L.ok?hs(f,"TestPingServer: ok",!0,h):hs(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(N),hs(f,"TestPingServer: error",!1,h)})}function hs(a,h,f,g,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),g(f)}catch{}}function Cv(){this.g=new Xe}function Nl(a){this.i=a.Sb||null,this.h=a.ab||!1}p(Nl,Qe),Nl.prototype.g=function(){return new Po(this.i,this.h)};function Po(a,h){T.call(this),this.H=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Po,T),t=Po.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=h,this.readyState=1,wi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(h.body=a),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vi(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,wi(this)),this.g&&(this.readyState=3,wi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;$h(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function $h(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?vi(this):wi(this),this.readyState==3&&$h(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,vi(this))},t.Na=function(a){this.g&&(this.response=a,vi(this))},t.ga=function(){this.g&&vi(this)};function vi(a){a.readyState=4,a.l=null,a.j=null,a.B=null,wi(a)}t.setRequestHeader=function(a,h){this.A.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=h.next();return a.join(`\r
`)};function wi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Po.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Bh(a){let h="";return St(a,function(f,g){h+=g,h+=":",h+=f,h+=`\r
`}),h}function Vl(a,h,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Bh(f),typeof a=="string"?f!=null&&Ar(f):We(a,h,f))}function Ze(a){T.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ze,T);var Pv=/^https?$/i,xv=["POST","PUT"];t=Ze.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,h,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():qs.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(L){jh(this,L);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var N in g)f.set(N,g[N]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const L of g.keys())f.set(L,g.get(L));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(L=>L.toLowerCase()=="content-type"),N=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(xv,h,void 0)>=0)||g||N||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,X]of f)this.g.setRequestHeader(L,X);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(L){jh(this,L)}};function jh(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.o=5,Hh(a),xo(a)}function Hh(a){a.A||(a.A=!0,k(a,"complete"),k(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,k(this,"complete"),k(this,"abort"),xo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xo(this,!0)),Ze.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?qh(this):this.Xa())},t.Xa=function(){qh(this)};function qh(a){if(a.h&&typeof i<"u"){if(a.v&&ds(a)==4)setTimeout(a.Ca.bind(a),0);else if(k(a,"readystatechange"),ds(a)==4){a.h=!1;try{const L=a.ca();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var g;if(g=L===0){let X=String(a.D).match(Nh)[1]||null;!X&&o.self&&o.self.location&&(X=o.self.location.protocol.slice(0,-1)),g=!Pv.test(X?X.toLowerCase():"")}f=g}if(f)k(a,"complete"),k(a,"success");else{a.o=6;try{var N=ds(a)>2?a.g.statusText:""}catch{N=""}a.l=N+" ["+a.ca()+"]",Hh(a)}}finally{xo(a)}}}}function xo(a,h){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const f=a.g;a.g=null,h||k(a,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ds(a){return a.g?a.g.readyState:0}t.ca=function(){try{return ds(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),Ce(h)}};function zh(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function kv(a){const h={};a=(a.g&&ds(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(w(a[g]))continue;var f=Al(a[g]);const N=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const L=h[N]||[];h[N]=L,L.push(f)}zt(h,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ei(a,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||h}function Gh(a){this.za=0,this.i=[],this.j=new mt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ei("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ei("baseRetryDelayMs",5e3,a),this.Za=Ei("retryDelaySeedMs",1e4,a),this.Ta=Ei("forwardChannelMaxRetries",2,a),this.va=Ei("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Ch(a&&a.concurrentRequestLimit),this.Ba=new Cv,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Gh.prototype,t.ka=8,t.I=1,t.connect=function(a,h,f,g){je(0),this.W=a,this.H=h||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.J=td(this,null,this.W),Do(this)};function Ol(a){if(Wh(a),a.I==3){var h=a.V++,f=bn(a.J);if(We(f,"SID",a.M),We(f,"RID",h),We(f,"TYPE","terminate"),Ti(a,f),h=new hn(a,a.j,h),h.M=2,h.A=Co(bn(f)),f=!1,o.navigator&&o.navigator.sendBeacon)try{f=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!f&&o.Image&&(new Image().src=h.A,f=!0),f||(h.g=nd(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Ro(h)}ed(a)}function ko(a){a.g&&(Ll(a),a.g.cancel(),a.g=null)}function Wh(a){ko(a),a.v&&(o.clearTimeout(a.v),a.v=null),No(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Do(a){if(!Ph(a.h)&&!a.m){a.m=!0;var h=a.Ea;B||y(),j||(B(),j=!0),b.add(h,a),a.D=0}}function Dv(a,h){return xh(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=h.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Ct(u(a.Ea,a,h),Zh(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const N=new hn(this,this.j,a);let L=this.o;if(this.U&&(L?(L=Mt(L),un(L,this.U)):L=this.U),this.u!==null||this.R||(N.J=L,L=null),this.S)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,h>4096){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=Qh(this,N,h),f=bn(this.J),We(f,"RID",a),We(f,"CVER",22),this.G&&We(f,"X-HTTP-Session-Id",this.G),Ti(this,f),L&&(this.R?h="headers="+Ar(Bh(L))+"&"+h:this.u&&Vl(f,this.u,L)),kl(this.h,N),this.Ra&&We(f,"TYPE","init"),this.S?(We(f,"$req",h),We(f,"SID","null"),N.U=!0,Rl(N,f,null)):Rl(N,f,h),this.I=2}}else this.I==3&&(a?Kh(this,a):this.i.length==0||Ph(this.h)||Kh(this))};function Kh(a,h){var f;h?f=h.l:f=a.V++;const g=bn(a.J);We(g,"SID",a.M),We(g,"RID",f),We(g,"AID",a.K),Ti(a,g),a.u&&a.o&&Vl(g,a.u,a.o),f=new hn(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),h&&(a.i=h.G.concat(a.i)),h=Qh(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),kl(a.h,f),Rl(f,g,h)}function Ti(a,h){a.H&&St(a.H,function(f,g){We(h,g,f)}),a.l&&St({},function(f,g){We(h,g,f)})}function Qh(a,h,f){f=Math.min(a.i.length,f);const g=a.l?u(a.l.Ka,a.l,a):null;e:{var N=a.i;let ve=-1;for(;;){const ut=["count="+f];ve==-1?f>0?(ve=N[0].g,ut.push("ofs="+ve)):ve=0:ut.push("ofs="+ve);let Fe=!0;for(let gt=0;gt<f;gt++){var L=N[gt].g;const An=N[gt].map;if(L-=ve,L<0)ve=Math.max(0,N[gt].g-100),Fe=!1;else try{L="req"+L+"_"||"";try{var X=An instanceof Map?An:Object.entries(An);for(const[Ks,fs]of X){let ps=fs;l(fs)&&(ps=me(fs)),ut.push(L+Ks+"="+encodeURIComponent(ps))}}catch(Ks){throw ut.push(L+"type="+encodeURIComponent("_badmap")),Ks}}catch{g&&g(An)}}if(Fe){X=ut.join("&");break e}}X=void 0}return a=a.i.splice(0,f),h.G=a,X}function Yh(a){if(!a.g&&!a.v){a.Y=1;var h=a.Da;B||y(),j||(B(),j=!0),b.add(h,a),a.A=0}}function Ml(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Ct(u(a.Da,a),Zh(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Jh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Ct(u(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,je(10),ko(this),Jh(this))};function Ll(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Jh(a){a.g=new hn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var h=bn(a.na);We(h,"RID","rpc"),We(h,"SID",a.M),We(h,"AID",a.K),We(h,"CI",a.F?"0":"1"),!a.F&&a.ia&&We(h,"TO",a.ia),We(h,"TYPE","xmlhttp"),Ti(a,h),a.u&&a.o&&Vl(h,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=Co(bn(h)),f.u=null,f.R=!0,Ah(f,a)}t.Va=function(){this.C!=null&&(this.C=null,ko(this),Ml(this),je(19))};function No(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Xh(a,h){var f=null;if(a.g==h){No(a),Ll(a),a.g=null;var g=2}else if(xl(a.h,h))f=h.G,kh(a.h,h),g=1;else return;if(a.I!=0){if(h.o)if(g==1){f=h.u?h.u.length:0,h=Date.now()-h.F;var N=a.D;g=jn(),k(g,new Le(g,f)),Do(a)}else Yh(a);else if(N=h.m,N==3||N==0&&h.X>0||!(g==1&&Dv(a,h)||g==2&&Ml(a)))switch(f&&f.length>0&&(h=a.h,h.i=h.i.concat(f)),N){case 1:Ws(a,5);break;case 4:Ws(a,10);break;case 3:Ws(a,6);break;default:Ws(a,2)}}}function Zh(a,h){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*h}function Ws(a,h){if(a.j.info("Error code "+h),h==2){var f=u(a.bb,a),g=a.Ua;const N=!g;g=new us(g||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||pi(g,"https"),Co(g),N?Sv(g.toString(),f):Rv(g.toString(),f)}else je(2);a.I=0,a.l&&a.l.pa(h),ed(a),Wh(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),je(2)):(this.j.info("Failed to ping google.com"),je(1))};function ed(a){if(a.I=0,a.ja=[],a.l){const h=Dh(a.h);(h.length!=0||a.i.length!=0)&&(O(a.ja,h),O(a.ja,a.i),a.h.i.length=0,v(a.i),a.i.length=0),a.l.oa()}}function td(a,h,f){var g=f instanceof us?bn(f):new us(f);if(g.g!="")h&&(g.g=h+"."+g.g),mi(g,g.u);else{var N=o.location;g=N.protocol,h=h?h+"."+N.hostname:N.hostname,N=+N.port;const L=new us(null);g&&pi(L,g),h&&(L.g=h),N&&mi(L,N),f&&(L.h=f),g=L}return f=a.G,h=a.wa,f&&h&&We(g,f,h),We(g,"VER",a.ka),Ti(a,g),g}function nd(a,h,f){if(h&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Aa&&!a.ma?new Ze(new Nl({ab:f})):new Ze(a.ma),h.Fa(a.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function sd(){}t=sd.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Vo(){}Vo.prototype.g=function(a,h){return new Kt(a,h)};function Kt(a,h){T.call(this),this.g=new Gh(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(a?a["X-WebChannel-Client-Profile"]=h.sa:a={"X-WebChannel-Client-Profile":h.sa}),this.g.U=a,(a=h&&h.Qb)&&!w(a)&&(this.g.u=a),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!w(h)&&(this.g.G=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Rr(this)}p(Kt,T),Kt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){Ol(this.g)},Kt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=me(a),a=f);h.i.push(new yv(h.Ya++,a)),h.I==3&&Do(h)},Kt.prototype.N=function(){this.g.l=null,delete this.j,Ol(this.g),delete this.g,Kt.Z.N.call(this)};function rd(a){Zt.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const f in h){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}p(rd,Zt);function id(){pt.call(this),this.status=1}p(id,pt);function Rr(a){this.g=a}p(Rr,sd),Rr.prototype.ra=function(){k(this.g,"a")},Rr.prototype.qa=function(a){k(this.g,new rd(a))},Rr.prototype.pa=function(a){k(this.g,new id)},Rr.prototype.oa=function(){k(this.g,"b")},Vo.prototype.createWebChannel=Vo.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,L_=function(){return new Vo},M_=function(){return jn()},O_=tt,Hc={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},br.NO_ERROR=0,br.TIMEOUT=8,br.HTTP_ERROR=6,na=br,bl.COMPLETE="complete",V_=bl,Be.EventType=Rt,Rt.OPEN="a",Rt.CLOSE="b",Rt.ERROR="c",Rt.MESSAGE="d",T.prototype.listen=T.prototype.J,Ci=Be,Ze.prototype.listenOnce=Ze.prototype.K,Ze.prototype.getLastError=Ze.prototype.Ha,Ze.prototype.getLastErrorCode=Ze.prototype.ya,Ze.prototype.getStatus=Ze.prototype.ca,Ze.prototype.getResponseJson=Ze.prototype.La,Ze.prototype.getResponseText=Ze.prototype.la,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Fa,N_=Ze}).apply(typeof Bo<"u"?Bo:typeof self<"u"?self:typeof window<"u"?window:{});const Gf="@firebase/firestore",Wf="4.9.2";class xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");let li="12.3.0";const pr=new tl("@firebase/firestore");function Dr(){return pr.logLevel}function re(t,...e){if(pr.logLevel<=Ie.DEBUG){const n=e.map(zu);pr.debug(`Firestore (${li}): ${t}`,...n)}}function os(t,...e){if(pr.logLevel<=Ie.ERROR){const n=e.map(zu);pr.error(`Firestore (${li}): ${t}`,...n)}}function Xr(t,...e){if(pr.logLevel<=Ie.WARN){const n=e.map(zu);pr.warn(`Firestore (${li}): ${t}`,...n)}}function zu(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function ue(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,F_(t,s,n)}function F_(t,e,n){let s=`FIRESTORE (${li}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw os(s),new Error(s)}function Oe(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||F_(e,r,s)}function _e(t,e){return t}const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends Tn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ks{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class U_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(xt.UNAUTHENTICATED))}shutdown(){}}class SS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class RS{constructor(e){this.t=e,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Oe(this.o===void 0,42304);let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new ks;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ks,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},l=c=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ks)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Oe(typeof s.accessToken=="string",31837,{l:s}),new U_(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string",2055,{h:e}),new xt(e)}}class CS{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class PS{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new CS(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Kf{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xS{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Oe(this.o===void 0,3512);const s=i=>{i.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Kf(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Oe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Kf(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function kS(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}class Gu{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=kS(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function be(t,e){return t<e?-1:t>e?1:0}function qc(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return fc(r)===fc(i)?be(r,i):fc(r)?1:-1}return be(t.length,e.length)}const DS=55296,NS=57343;function fc(t){const e=t.charCodeAt(0);return e>=DS&&e<=NS}function Zr(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}const Qf="__name__";class Cn{constructor(e,n,s){n===void 0?n=0:n>e.length&&ue(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&ue(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Cn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Cn?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=Cn.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return be(e.length,n.length)}static compareSegments(e,n){const s=Cn.isNumericId(e),r=Cn.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?Cn.extractNumericId(e).compare(Cn.extractNumericId(n)):qc(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xs.fromString(e.substring(4,e.length-2))}}class qe extends Cn{construct(e,n,s){return new qe(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ie(z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new qe(n)}static emptyPath(){return new qe([])}}const VS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class It extends Cn{construct(e,n,s){return new It(e,n,s)}static isValidIdentifier(e){return VS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),It.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Qf}static keyField(){return new It([Qf])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new ie(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new ie(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ie(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(s+=l,r++):(i(),r++)}if(i(),o)throw new ie(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new It(n)}static emptyPath(){return new It([])}}class ce{constructor(e){this.path=e}static fromPath(e){return new ce(qe.fromString(e))}static fromName(e){return new ce(qe.fromString(e).popFirst(5))}static empty(){return new ce(qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new qe(e.slice()))}}function $_(t,e,n){if(!n)throw new ie(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function OS(t,e,n,s){if(e===!0&&s===!0)throw new ie(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Yf(t){if(!ce.isDocumentKey(t))throw new ie(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Jf(t){if(ce.isDocumentKey(t))throw new ie(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function B_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ll(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue(12329,{type:typeof t})}function to(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ll(t);throw new ie(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function lt(t,e){const n={typeString:t};return e&&(n.value=e),n}function go(t,e){if(!B_(t))throw new ie(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new ie(z.INVALID_ARGUMENT,n);return!0}const Xf=-62135596800,Zf=1e6;class Ke{static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Zf);return new Ke(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Xf)throw new ie(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Zf}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(go(e,Ke._jsonSchema))return new Ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Xf;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ke._jsonSchemaVersion="firestore/timestamp/1.0",Ke._jsonSchema={type:lt("string",Ke._jsonSchemaVersion),seconds:lt("number"),nanoseconds:lt("number")};class pe{static fromTimestamp(e){return new pe(e)}static min(){return new pe(new Ke(0,0))}static max(){return new pe(new Ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const no=-1;function MS(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=pe.fromTimestamp(s===1e9?new Ke(n+1,0):new Ke(n,s));return new Os(r,ce.empty(),e)}function LS(t){return new Os(t.readTime,t.key,no)}class Os{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Os(pe.min(),ce.empty(),no)}static max(){return new Os(pe.max(),ce.empty(),no)}}function FS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ce.comparator(t.documentKey,e.documentKey),n!==0?n:be(t.largestBatchId,e.largestBatchId))}const US="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $S{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function ci(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==US)throw t;re("LocalStore","Unexpectedly lost primary lease")}class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):W.reject(n)}static resolve(e){return new W((n,s)=>{n(e)})}static reject(e){return new W((n,s)=>{s(e)})}static waitFor(e){return new W((n,s)=>{let r=0,i=0,o=!1;e.forEach(l=>{++r,l.next(()=>{++i,o&&i===r&&n()},c=>s(c))}),o=!0,i===r&&n()})}static or(e){let n=W.resolve(!1);for(const s of e)n=n.next(r=>r?W.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new W((s,r)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(d=>{o[u]=d,++l,l===i&&s(o)},d=>r(d))}})}static doWhile(e,n){return new W((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function BS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ui(t){return t.name==="IndexedDbTransactionError"}class cl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}cl.ce=-1;const Wu=-1;function ul(t){return t==null}function Ra(t){return t===0&&1/t==-1/0}function jS(t){return typeof t=="number"&&Number.isInteger(t)&&!Ra(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const j_="";function HS(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ep(e)),e=qS(t.get(n),e);return ep(e)}function qS(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case j_:n+="";break;default:n+=i}}return n}function ep(t){return t+j_+""}function tp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function vr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function H_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Je{constructor(e,n){this.comparator=e,this.root=n||Tt.EMPTY}insert(e,n){return new Je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tt.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jo(this.root,e,this.comparator,!1)}getReverseIterator(){return new jo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jo(this.root,e,this.comparator,!0)}}class jo{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tt{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??Tt.RED,this.left=r??Tt.EMPTY,this.right=i??Tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Tt(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Tt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ue(27949);return e+(this.isRed()?0:1)}}Tt.EMPTY=null,Tt.RED=!0,Tt.BLACK=!1;Tt.EMPTY=new class{constructor(){this.size=0}get key(){throw ue(57766)}get value(){throw ue(16141)}get color(){throw ue(16727)}get left(){throw ue(29726)}get right(){throw ue(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new Tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class dt{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new np(this.data.getIterator())}getIteratorFrom(e){return new np(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new dt(this.comparator);return n.data=e,n}}class np{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class pn{constructor(e){this.fields=e,e.sort(It.comparator)}static empty(){return new pn([])}unionWith(e){let n=new dt(It.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new pn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zr(this.fields,e.fields,(n,s)=>n.isEqual(s))}}class q_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class At{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new q_("Invalid base64 string: "+i):i}}(e);return new At(n)}static fromUint8Array(e){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new At(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}At.EMPTY_BYTE_STRING=new At("");const zS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ms(t){if(Oe(!!t,39018),typeof t=="string"){let e=0;const n=zS.exec(t);if(Oe(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:st(t.seconds),nanos:st(t.nanos)}}function st(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ls(t){return typeof t=="string"?At.fromBase64String(t):At.fromUint8Array(t)}const z_="server_timestamp",G_="__type__",W_="__previous_value__",K_="__local_write_time__";function Ku(t){return(t?.mapValue?.fields||{})[G_]?.stringValue===z_}function hl(t){const e=t.mapValue.fields[W_];return Ku(e)?hl(e):e}function so(t){const e=Ms(t.mapValue.fields[K_].timestampValue);return new Ke(e.seconds,e.nanos)}class GS{constructor(e,n,s,r,i,o,l,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const Ca="(default)";class ro{constructor(e,n){this.projectId=e,this.database=n||Ca}static empty(){return new ro("","")}get isDefaultDatabase(){return this.database===Ca}isEqual(e){return e instanceof ro&&e.projectId===this.projectId&&e.database===this.database}}const Q_="__type__",WS="__max__",Ho={mapValue:{}},Y_="__vector__",Pa="value";function Fs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ku(t)?4:QS(t)?9007199254740991:KS(t)?10:11:ue(28295,{value:t})}function Bn(t,e){if(t===e)return!0;const n=Fs(t);if(n!==Fs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return so(t).isEqual(so(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Ms(r.timestampValue),l=Ms(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Ls(r.bytesValue).isEqual(Ls(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return st(r.geoPointValue.latitude)===st(i.geoPointValue.latitude)&&st(r.geoPointValue.longitude)===st(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return st(r.integerValue)===st(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=st(r.doubleValue),l=st(i.doubleValue);return o===l?Ra(o)===Ra(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Zr(t.arrayValue.values||[],e.arrayValue.values||[],Bn);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(tp(o)!==tp(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Bn(o[c],l[c])))return!1;return!0}(t,e);default:return ue(52216,{left:t})}}function io(t,e){return(t.values||[]).find(n=>Bn(n,e))!==void 0}function ei(t,e){if(t===e)return 0;const n=Fs(t),s=Fs(e);if(n!==s)return be(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return be(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=st(i.integerValue||i.doubleValue),c=st(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return sp(t.timestampValue,e.timestampValue);case 4:return sp(so(t),so(e));case 5:return qc(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Ls(i),c=Ls(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=be(l[u],c[u]);if(d!==0)return d}return be(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=be(st(i.latitude),st(o.latitude));return l!==0?l:be(st(i.longitude),st(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return rp(t.arrayValue,e.arrayValue);case 10:return function(i,o){const l=i.fields||{},c=o.fields||{},u=l[Pa]?.arrayValue,d=c[Pa]?.arrayValue,p=be(u?.values?.length||0,d?.values?.length||0);return p!==0?p:rp(u,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ho.mapValue&&o===Ho.mapValue)return 0;if(i===Ho.mapValue)return 1;if(o===Ho.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){const m=qc(c[p],d[p]);if(m!==0)return m;const v=ei(l[c[p]],u[d[p]]);if(v!==0)return v}return be(c.length,d.length)}(t.mapValue,e.mapValue);default:throw ue(23264,{he:n})}}function sp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return be(t,e);const n=Ms(t),s=Ms(e),r=be(n.seconds,s.seconds);return r!==0?r:be(n.nanos,s.nanos)}function rp(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=ei(n[r],s[r]);if(i)return i}return be(n.length,s.length)}function ti(t){return zc(t)}function zc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=Ms(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ls(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=zc(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${zc(n.fields[o])}`;return r+"}"}(t.mapValue):ue(61005,{value:t})}function sa(t){switch(Fs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=hl(t);return e?16+sa(e):16;case 5:return 2*t.stringValue.length;case 6:return Ls(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+sa(i),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return vr(s.fields,(i,o)=>{r+=i.length+sa(o)}),r}(t.mapValue);default:throw ue(13486,{value:t})}}function ip(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Gc(t){return!!t&&"integerValue"in t}function Qu(t){return!!t&&"arrayValue"in t}function op(t){return!!t&&"nullValue"in t}function ap(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ra(t){return!!t&&"mapValue"in t}function KS(t){return(t?.mapValue?.fields||{})[Q_]?.stringValue===Y_}function Bi(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return vr(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Bi(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bi(t.arrayValue.values[n]);return e}return{...t}}function QS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===WS}class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!ra(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bi(n)}setAll(e){let n=It.emptyPath(),s={},r=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=l.popLast()}o?s[l.lastSegment()]=Bi(o):r.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());ra(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];ra(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){vr(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new rn(Bi(this.value))}}function J_(t){const e=[];return vr(t.fields,(n,s)=>{const r=new It([n]);if(ra(s)){const i=J_(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new pn(e)}class Dt{constructor(e,n,s,r,i,o,l){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Dt(e,0,pe.min(),pe.min(),pe.min(),rn.empty(),0)}static newFoundDocument(e,n,s,r){return new Dt(e,1,n,pe.min(),s,r,0)}static newNoDocument(e,n){return new Dt(e,2,n,pe.min(),pe.min(),rn.empty(),0)}static newUnknownDocument(e,n){return new Dt(e,3,n,pe.min(),pe.min(),rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class xa{constructor(e,n){this.position=e,this.inclusive=n}}function lp(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=ce.comparator(ce.fromName(o.referenceValue),n.key):s=ei(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function cp(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bn(t.position[n],e.position[n]))return!1;return!0}class ka{constructor(e,n="asc"){this.field=e,this.dir=n}}function YS(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class X_{}class at extends X_{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new XS(e,n,s):n==="array-contains"?new tR(e,s):n==="in"?new nR(e,s):n==="not-in"?new sR(e,s):n==="array-contains-any"?new rR(e,s):new at(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new ZS(e,s):new eR(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ei(n,this.value)):n!==null&&Fs(this.value)===Fs(n)&&this.matchesComparison(ei(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class En extends X_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new En(e,n)}matches(e){return Z_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Z_(t){return t.op==="and"}function ey(t){return JS(t)&&Z_(t)}function JS(t){for(const e of t.filters)if(e instanceof En)return!1;return!0}function Wc(t){if(t instanceof at)return t.field.canonicalString()+t.op.toString()+ti(t.value);if(ey(t))return t.filters.map(e=>Wc(e)).join(",");{const e=t.filters.map(n=>Wc(n)).join(",");return`${t.op}(${e})`}}function ty(t,e){return t instanceof at?function(s,r){return r instanceof at&&s.op===r.op&&s.field.isEqual(r.field)&&Bn(s.value,r.value)}(t,e):t instanceof En?function(s,r){return r instanceof En&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,l)=>i&&ty(o,r.filters[l]),!0):!1}(t,e):void ue(19439)}function ny(t){return t instanceof at?function(n){return`${n.field.canonicalString()} ${n.op} ${ti(n.value)}`}(t):t instanceof En?function(n){return n.op.toString()+" {"+n.getFilters().map(ny).join(" ,")+"}"}(t):"Filter"}class XS extends at{constructor(e,n,s){super(e,n,s),this.key=ce.fromName(s.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class ZS extends at{constructor(e,n){super(e,"in",n),this.keys=sy("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class eR extends at{constructor(e,n){super(e,"not-in",n),this.keys=sy("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function sy(t,e){return(e.arrayValue?.values||[]).map(n=>ce.fromName(n.referenceValue))}class tR extends at{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Qu(n)&&io(n.arrayValue,this.value)}}class nR extends at{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&io(this.value.arrayValue,n)}}class sR extends at{constructor(e,n){super(e,"not-in",n)}matches(e){if(io(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!io(this.value.arrayValue,n)}}class rR extends at{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Qu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>io(this.value.arrayValue,s))}}class iR{constructor(e,n=null,s=[],r=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function up(t,e=null,n=[],s=[],r=null,i=null,o=null){return new iR(t,e,n,s,r,i,o)}function Yu(t){const e=_e(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Wc(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),ul(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>ti(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>ti(s)).join(",")),e.Te=n}return e.Te}function Ju(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!YS(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ty(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!cp(t.startAt,e.startAt)&&cp(t.endAt,e.endAt)}function Kc(t){return ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class _o{constructor(e,n=null,s=[],r=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function oR(t,e,n,s,r,i,o,l){return new _o(t,e,n,s,r,i,o,l)}function ry(t){return new _o(t)}function hp(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function iy(t){return t.collectionGroup!==null}function ji(t){const e=_e(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new dt(It.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new ka(i,s))}),n.has(It.keyField().canonicalString())||e.Ie.push(new ka(It.keyField(),s))}return e.Ie}function Vn(t){const e=_e(t);return e.Ee||(e.Ee=aR(e,ji(t))),e.Ee}function aR(t,e){if(t.limitType==="F")return up(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new ka(r.field,i)});const n=t.endAt?new xa(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new xa(t.startAt.position,t.startAt.inclusive):null;return up(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Qc(t,e){const n=t.filters.concat([e]);return new _o(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Yc(t,e,n){return new _o(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dl(t,e){return Ju(Vn(t),Vn(e))&&t.limitType===e.limitType}function oy(t){return`${Yu(Vn(t))}|lt:${t.limitType}`}function Nr(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>ny(r)).join(", ")}]`),ul(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>ti(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>ti(r)).join(",")),`Target(${s})`}(Vn(t))}; limitType=${t.limitType})`}function fl(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):ce.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of ji(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(o,l,c){const u=lp(o,l,c);return o.inclusive?u<=0:u<0}(s.startAt,ji(s),r)||s.endAt&&!function(o,l,c){const u=lp(o,l,c);return o.inclusive?u>=0:u>0}(s.endAt,ji(s),r))}(t,e)}function lR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ay(t){return(e,n)=>{let s=!1;for(const r of ji(t)){const i=cR(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function cR(t,e,n){const s=t.field.isKeyField()?ce.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?ei(c,u):ue(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return ue(19790,{direction:t.dir})}}class wr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){vr(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return H_(this.inner)}size(){return this.innerSize}}const uR=new Je(ce.comparator);function as(){return uR}const ly=new Je(ce.comparator);function Pi(...t){let e=ly;for(const n of t)e=e.insert(n.key,n);return e}function cy(t){let e=ly;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function or(){return Hi()}function uy(){return Hi()}function Hi(){return new wr(t=>t.toString(),(t,e)=>t.isEqual(e))}const hR=new Je(ce.comparator),dR=new dt(ce.comparator);function Ae(...t){let e=dR;for(const n of t)e=e.add(n);return e}const fR=new dt(be);function pR(){return fR}function Xu(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ra(e)?"-0":e}}function hy(t){return{integerValue:""+t}}function mR(t,e){return jS(e)?hy(e):Xu(t,e)}class pl{constructor(){this._=void 0}}function gR(t,e,n){return t instanceof Da?function(r,i){const o={fields:{[G_]:{stringValue:z_},[K_]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Ku(i)&&(i=hl(i)),i&&(o.fields[W_]=i),{mapValue:o}}(n,e):t instanceof oo?fy(t,e):t instanceof ao?py(t,e):function(r,i){const o=dy(r,i),l=dp(o)+dp(r.Ae);return Gc(o)&&Gc(r.Ae)?hy(l):Xu(r.serializer,l)}(t,e)}function _R(t,e,n){return t instanceof oo?fy(t,e):t instanceof ao?py(t,e):n}function dy(t,e){return t instanceof Na?function(s){return Gc(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class Da extends pl{}class oo extends pl{constructor(e){super(),this.elements=e}}function fy(t,e){const n=my(e);for(const s of t.elements)n.some(r=>Bn(r,s))||n.push(s);return{arrayValue:{values:n}}}class ao extends pl{constructor(e){super(),this.elements=e}}function py(t,e){let n=my(e);for(const s of t.elements)n=n.filter(r=>!Bn(r,s));return{arrayValue:{values:n}}}class Na extends pl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function dp(t){return st(t.integerValue||t.doubleValue)}function my(t){return Qu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function yR(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof oo&&r instanceof oo||s instanceof ao&&r instanceof ao?Zr(s.elements,r.elements,Bn):s instanceof Na&&r instanceof Na?Bn(s.Ae,r.Ae):s instanceof Da&&r instanceof Da}(t.transform,e.transform)}class vR{constructor(e,n){this.version=e,this.transformResults=n}}class On{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new On}static exists(e){return new On(void 0,e)}static updateTime(e){return new On(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ia(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ml{}function gy(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Zu(t.key,On.none()):new yo(t.key,t.data,On.none());{const n=t.data,s=rn.empty();let r=new dt(It.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Er(t.key,s,new pn(r.toArray()),On.none())}}function wR(t,e,n){t instanceof yo?function(r,i,o){const l=r.value.clone(),c=pp(r.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Er?function(r,i,o){if(!ia(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=pp(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(_y(r)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function qi(t,e,n,s){return t instanceof yo?function(i,o,l,c){if(!ia(i.precondition,o))return l;const u=i.value.clone(),d=mp(i.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,s):t instanceof Er?function(i,o,l,c){if(!ia(i.precondition,o))return l;const u=mp(i.fieldTransforms,c,o),d=o.data;return d.setAll(_y(i)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,s):function(i,o,l){return ia(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function ER(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=dy(s.transform,r||null);i!=null&&(n===null&&(n=rn.empty()),n.set(s.field,i))}return n||null}function fp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Zr(s,r,(i,o)=>yR(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class yo extends ml{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Er extends ml{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function _y(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function pp(t,e,n){const s=new Map;Oe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,l=e.data.field(i.field);s.set(i.field,_R(o,l,n[r]))}return s}function mp(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,gR(i,o,e))}return s}class Zu extends ml{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TR extends ml{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class IR{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&wR(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=qi(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=qi(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=uy();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(r.key)?null:l;const c=gy(o,l);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(pe.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&Zr(this.mutations,e.mutations,(n,s)=>fp(n,s))&&Zr(this.baseMutations,e.baseMutations,(n,s)=>fp(n,s))}}class eh{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){Oe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=function(){return hR}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new eh(e,n,s,r)}}class bR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class AR{constructor(e,n){this.count=e,this.unchangedNames=n}}var ot,Re;function SR(t){switch(t){case z.OK:return ue(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return ue(15467,{code:t})}}function yy(t){if(t===void 0)return os("GRPC error has no .code"),z.UNKNOWN;switch(t){case ot.OK:return z.OK;case ot.CANCELLED:return z.CANCELLED;case ot.UNKNOWN:return z.UNKNOWN;case ot.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case ot.INTERNAL:return z.INTERNAL;case ot.UNAVAILABLE:return z.UNAVAILABLE;case ot.UNAUTHENTICATED:return z.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case ot.NOT_FOUND:return z.NOT_FOUND;case ot.ALREADY_EXISTS:return z.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return z.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case ot.ABORTED:return z.ABORTED;case ot.OUT_OF_RANGE:return z.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return z.UNIMPLEMENTED;case ot.DATA_LOSS:return z.DATA_LOSS;default:return ue(39323,{code:t})}}(Re=ot||(ot={}))[Re.OK=0]="OK",Re[Re.CANCELLED=1]="CANCELLED",Re[Re.UNKNOWN=2]="UNKNOWN",Re[Re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Re[Re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Re[Re.NOT_FOUND=5]="NOT_FOUND",Re[Re.ALREADY_EXISTS=6]="ALREADY_EXISTS",Re[Re.PERMISSION_DENIED=7]="PERMISSION_DENIED",Re[Re.UNAUTHENTICATED=16]="UNAUTHENTICATED",Re[Re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Re[Re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Re[Re.ABORTED=10]="ABORTED",Re[Re.OUT_OF_RANGE=11]="OUT_OF_RANGE",Re[Re.UNIMPLEMENTED=12]="UNIMPLEMENTED",Re[Re.INTERNAL=13]="INTERNAL",Re[Re.UNAVAILABLE=14]="UNAVAILABLE",Re[Re.DATA_LOSS=15]="DATA_LOSS";function RR(){return new TextEncoder}const CR=new xs([4294967295,4294967295],0);function gp(t){const e=RR().encode(t),n=new D_;return n.update(e),new Uint8Array(n.digest())}function _p(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new xs([n,s],0),new xs([r,i],0)]}class th{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new xi(`Invalid padding: ${n}`);if(s<0)throw new xi(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new xi(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new xi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=xs.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(xs.fromNumber(s)));return r.compare(CR)===1&&(r=new xs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=gp(e),[s,r]=_p(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new th(i,r,n);return s.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=gp(e),[s,r]=_p(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class xi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class gl{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,vo.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new gl(pe.min(),r,new Je(be),as(),Ae())}}class vo{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new vo(s,n,Ae(),Ae(),Ae())}}class oa{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class vy{constructor(e,n){this.targetId=e,this.Ce=n}}class wy{constructor(e,n,s=At.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class yp{constructor(){this.ve=0,this.Fe=vp(),this.Me=At.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ae(),n=Ae(),s=Ae();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:ue(38017,{changeType:i})}}),new vo(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=vp()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Oe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class PR{constructor(e){this.Ge=e,this.ze=new Map,this.je=as(),this.Je=qo(),this.He=qo(),this.Ye=new Je(be)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:ue(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(Kc(i))if(s===0){const o=new ce(i.path);this.et(n,o,Dt.newNoDocument(o,pe.min()))}else Oe(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,l;try{o=Ls(s).toUint8Array()}catch(c){if(c instanceof q_)return Xr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new th(o,r,i)}catch(c){return Xr(c instanceof xi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Kc(l.target)){const c=new ce(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Dt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let s=Ae();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const r=new gl(e,n,this.Ye,this.je,s);return this.je=as(),this.Je=qo(),this.He=qo(),this.Ye=new Je(be),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new yp,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new dt(be),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new dt(be),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new yp),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function qo(){return new Je(ce.comparator)}function vp(){return new Je(ce.comparator)}const xR={asc:"ASCENDING",desc:"DESCENDING"},kR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DR={and:"AND",or:"OR"};class NR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Jc(t,e){return t.useProto3Json||ul(e)?e:{value:e}}function Va(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ey(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function VR(t,e){return Va(t,e.toTimestamp())}function Mn(t){return Oe(!!t,49232),pe.fromTimestamp(function(n){const s=Ms(n);return new Ke(s.seconds,s.nanos)}(t))}function nh(t,e){return Xc(t,e).canonicalString()}function Xc(t,e){const n=function(r){return new qe(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Ty(t){const e=qe.fromString(t);return Oe(Ry(e),10190,{key:e.toString()}),e}function Zc(t,e){return nh(t.databaseId,e.path)}function pc(t,e){const n=Ty(e);if(n.get(1)!==t.databaseId.projectId)throw new ie(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ie(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(by(n))}function Iy(t,e){return nh(t.databaseId,e)}function OR(t){const e=Ty(t);return e.length===4?qe.emptyPath():by(e)}function eu(t){return new qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function by(t){return Oe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function wp(t,e,n){return{name:Zc(t,e),fields:n.value.mapValue.fields}}function MR(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ue(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(u,d){return u.useProto3Json?(Oe(d===void 0||typeof d=="string",58123),At.fromBase64String(d||"")):(Oe(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),At.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?z.UNKNOWN:yy(u.code);return new ie(d,u.message||"")}(o);n=new wy(s,r,i,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=pc(t,s.document.name),i=Mn(s.document.updateTime),o=s.document.createTime?Mn(s.document.createTime):pe.min(),l=new rn({mapValue:{fields:s.document.fields}}),c=Dt.newFoundDocument(r,i,o,l),u=s.targetIds||[],d=s.removedTargetIds||[];n=new oa(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=pc(t,s.document),i=s.readTime?Mn(s.readTime):pe.min(),o=Dt.newNoDocument(r,i),l=s.removedTargetIds||[];n=new oa([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=pc(t,s.document),i=s.removedTargetIds||[];n=new oa([],i,r,null)}else{if(!("filter"in e))return ue(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new AR(r,i),l=s.targetId;n=new vy(l,o)}}return n}function LR(t,e){let n;if(e instanceof yo)n={update:wp(t,e.key,e.value)};else if(e instanceof Zu)n={delete:Zc(t,e.key)};else if(e instanceof Er)n={update:wp(t,e.key,e.data),updateMask:GR(e.fieldMask)};else{if(!(e instanceof TR))return ue(16599,{Vt:e.type});n={verify:Zc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const l=o.transform;if(l instanceof Da)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof oo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ao)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Na)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw ue(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:VR(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ue(27497)}(t,e.precondition)),n}function FR(t,e){return t&&t.length>0?(Oe(e!==void 0,14353),t.map(n=>function(r,i){let o=r.updateTime?Mn(r.updateTime):Mn(i);return o.isEqual(pe.min())&&(o=Mn(i)),new vR(o,r.transformResults||[])}(n,e))):[]}function UR(t,e){return{documents:[Iy(t,e.path)]}}function $R(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Iy(t,r);const i=function(u){if(u.length!==0)return Sy(En.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:Vr(m.field),direction:HR(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Jc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:r}}function BR(t){let e=OR(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Oe(s===1,65062);const d=n.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(p){const m=Ay(p);return m instanceof En&&ey(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(O){return new ka(Or(O.field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,ul(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(p){const m=!!p.before,v=p.values||[];return new xa(v,m)}(n.startAt));let u=null;return n.endAt&&(u=function(p){const m=!p.before,v=p.values||[];return new xa(v,m)}(n.endAt)),oR(e,r,o,i,l,"F",c,u)}function jR(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ay(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Or(n.unaryFilter.field);return at.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=Or(n.unaryFilter.field);return at.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Or(n.unaryFilter.field);return at.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Or(n.unaryFilter.field);return at.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ue(61313);default:return ue(60726)}}(t):t.fieldFilter!==void 0?function(n){return at.create(Or(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ue(58110);default:return ue(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return En.create(n.compositeFilter.filters.map(s=>Ay(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ue(1026)}}(n.compositeFilter.op))}(t):ue(30097,{filter:t})}function HR(t){return xR[t]}function qR(t){return kR[t]}function zR(t){return DR[t]}function Vr(t){return{fieldPath:t.canonicalString()}}function Or(t){return It.fromServerFormat(t.fieldPath)}function Sy(t){return t instanceof at?function(n){if(n.op==="=="){if(ap(n.value))return{unaryFilter:{field:Vr(n.field),op:"IS_NAN"}};if(op(n.value))return{unaryFilter:{field:Vr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ap(n.value))return{unaryFilter:{field:Vr(n.field),op:"IS_NOT_NAN"}};if(op(n.value))return{unaryFilter:{field:Vr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vr(n.field),op:qR(n.op),value:n.value}}}(t):t instanceof En?function(n){const s=n.getFilters().map(r=>Sy(r));return s.length===1?s[0]:{compositeFilter:{op:zR(n.op),filters:s}}}(t):ue(54877,{filter:t})}function GR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Ry(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class As{constructor(e,n,s,r,i=pe.min(),o=pe.min(),l=At.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new As(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class WR{constructor(e){this.yt=e}}function KR(t){const e=BR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yc(e,e.limit,"L"):e}class QR{constructor(){this.Cn=new YR}addToCollectionParentIndex(e,n){return this.Cn.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(Os.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(Os.min())}updateCollectionGroup(e,n,s){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class YR{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new dt(qe.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new dt(qe.comparator)).toArray()}}const Ep={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Cy=41943040;class qt{static withCacheSize(e){return new qt(e,qt.DEFAULT_COLLECTION_PERCENTILE,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}qt.DEFAULT_COLLECTION_PERCENTILE=10,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qt.DEFAULT=new qt(Cy,qt.DEFAULT_COLLECTION_PERCENTILE,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qt.DISABLED=new qt(-1,0,0);class ni{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ni(0)}static cr(){return new ni(-1)}}const Tp="LruGarbageCollector",JR=1048576;function Ip([t,e],[n,s]){const r=be(t,n);return r===0?be(e,s):r}class XR{constructor(e){this.Ir=e,this.buffer=new dt(Ip),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Ip(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ZR{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){re(Tp,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ui(n)?re(Tp,"Ignoring IndexedDB error during garbage collection: ",n):await ci(n)}await this.Vr(3e5)})}}class eC{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return W.resolve(cl.ce);const s=new XR(n);return this.mr.forEachTarget(e,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(Ep)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ep):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,o=Date.now(),this.nthSequenceNumber(e,r))).next(p=>(s=p,l=Date.now(),this.removeTargets(e,s,n))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,s))).next(p=>(u=Date.now(),Dr()<=Ie.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${r} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:p})))}}function tC(t,e){return new eC(t,e)}class nC{constructor(){this.changes=new wr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?W.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class sC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class rC{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&qi(s.mutation,r,pn.empty(),Ke.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Ae()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Ae()){const r=or();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=Pi();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=or();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Ae()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,s,r){let i=as();const o=Hi(),l=function(){return Hi()}();return n.forEach((c,u)=>{const d=s.get(u.key);r.has(u.key)&&(d===void 0||d.mutation instanceof Er)?i=i.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),qi(d.mutation,u,d.mutation.getFieldMask(),Ke.now())):o.set(u.key,pn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>l.set(u,new sC(d,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const s=Hi();let r=new Je((o,l)=>o-l),i=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=s.get(c)||pn.empty();d=l.applyToLocalView(u,d),s.set(c,d);const p=(r.get(l.batchId)||Ae()).add(c);r=r.insert(l.batchId,p)})}).next(()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,p=uy();d.forEach(m=>{if(!i.has(m)){const v=gy(n.get(m),s.get(m));v!==null&&p.set(m,v),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return W.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(o){return ce.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):iy(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):W.resolve(or());let l=no,c=i;return o.next(u=>W.forEach(u,(d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(d)?W.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,Ae())).next(d=>({batchId:l,changes:cy(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(s=>{let r=Pi();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=Pi();return this.indexManager.getCollectionParents(e,i).next(l=>W.forEach(l,c=>{const u=function(p,m){return new _o(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,r).next(d=>{d.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Dt.newInvalidDocument(d)))});let l=Pi();return o.forEach((c,u)=>{const d=i.get(c);d!==void 0&&qi(d.mutation,u,pn.empty(),Ke.now()),fl(n,u)&&(l=l.insert(c,u))}),l})}}class iC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return W.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Mn(r.createTime)}}(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:KR(r.bundledQuery),readTime:Mn(r.readTime)}}(n)),W.resolve()}}class oC{constructor(){this.overlays=new Je(ce.comparator),this.qr=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const s=or();return W.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),W.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),W.resolve()}getOverlaysForCollection(e,n,s){const r=or(),i=n.length+1,o=new ce(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return W.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Je((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let d=i.get(u.largestBatchId);d===null&&(d=or(),i=i.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=or(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=r)););return W.resolve(l)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new bR(n,s));let i=this.qr.get(n);i===void 0&&(i=Ae(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}class aC{constructor(){this.sessionToken=At.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}class sh{constructor(){this.Qr=new dt(_t.$r),this.Ur=new dt(_t.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new _t(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new _t(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new ce(new qe([])),s=new _t(n,e),r=new _t(n,e+1),i=[];return this.Ur.forEachInRange([s,r],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ce(new qe([])),s=new _t(n,e),r=new _t(n,e+1);let i=Ae();return this.Ur.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new _t(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class _t{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ce.comparator(e.key,n.key)||be(e.Yr,n.Yr)}static Kr(e,n){return be(e.Yr,n.Yr)||ce.comparator(e.key,n.key)}}class lC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new dt(_t.$r)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new IR(i,n,s,r);this.mutationQueue.push(o);for(const l of r)this.Zr=this.Zr.add(new _t(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,n){return W.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return W.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?Wu:this.tr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new _t(n,0),r=new _t(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],o=>{const l=this.Xr(o.Yr);i.push(l)}),W.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new dt(be);return n.forEach(r=>{const i=new _t(r,0),o=new _t(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{s=s.add(l.Yr)})}),W.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;ce.isDocumentKey(i)||(i=i.child(""));const o=new _t(new ce(i),0);let l=new dt(be);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(l=l.add(c.Yr)),!0)},o),W.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(s=>{const r=this.Xr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Oe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return W.forEach(n.mutations,r=>{const i=new _t(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new _t(n,0),r=this.Zr.firstAfterOrEqual(s);return W.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class cC{constructor(e){this.ri=e,this.docs=function(){return new Je(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return W.resolve(s?s.document.mutableCopy():Dt.newInvalidDocument(n))}getEntries(e,n){let s=as();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Dt.newInvalidDocument(r))}),W.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=as();const o=n.path,l=new ce(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||FS(LS(d),s)<=0||(r.has(d.key)||fl(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return W.resolve(i)}getAllFromCollectionGroup(e,n,s,r){ue(9500)}ii(e,n){return W.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new uC(this)}getSize(e){return W.resolve(this.size)}}class uC extends nC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)}),W.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class hC{constructor(e){this.persistence=e,this.si=new wr(n=>Yu(n),Ju),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.oi=0,this._i=new sh,this.targetCount=0,this.ai=ni.ur()}forEachTarget(e,n){return this.si.forEach((s,r)=>n(r)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),W.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ni(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Pr(n),W.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),W.waitFor(i).next(()=>r)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return W.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),W.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),W.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return W.resolve(s)}containsKey(e,n){return W.resolve(this._i.containsKey(n))}}class Py{constructor(e,n){this.ui={},this.overlays={},this.ci=new cl(0),this.li=!1,this.li=!0,this.hi=new aC,this.referenceDelegate=e(this),this.Pi=new hC(this),this.indexManager=new QR,this.remoteDocumentCache=function(r){return new cC(r)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new WR(n),this.Ii=new iC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new oC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new lC(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){re("MemoryPersistence","Starting transaction:",e);const r=new dC(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(e,n){return W.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class dC extends $S{constructor(e){super(),this.currentSequenceNumber=e}}class rh{constructor(e){this.persistence=e,this.Ri=new sh,this.Vi=null}static mi(e){return new rh(e)}get fi(){if(this.Vi)return this.Vi;throw ue(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),W.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),W.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.fi,s=>{const r=ce.fromPath(s);return this.gi(e,r).next(i=>{i||n.removeEntry(r,pe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return W.or([()=>W.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Oa{constructor(e,n){this.persistence=e,this.pi=new wr(s=>HS(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=tC(this,n)}static mi(e,n){return new Oa(e,n)}Ei(){}di(e){return W.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return W.forEach(this.pi,(s,r)=>this.br(e,s,r).next(i=>i?W.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,o=>this.br(e,o,n).next(l=>{l||(s++,i.removeEntry(o,pe.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),W.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=sa(e.data.value)),n}br(e,n,s){return W.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return W.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ih{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=Ae(),r=Ae();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new ih(e,n.fromCache,s,r)}}class fC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class pC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return MT()?8:BS(Ot())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new fC;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,s,r){return s.documentReadCount<this.fs?(Dr()<=Ie.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Nr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),W.resolve()):(Dr()<=Ie.DEBUG&&re("QueryEngine","Query:",Nr(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(Dr()<=Ie.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Nr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vn(n))):W.resolve())}ys(e,n){if(hp(n))return W.resolve(null);let s=Vn(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Yc(n,null,"F"),s=Vn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=Ae(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,s).next(c=>{const u=this.Ds(n,l);return this.Cs(n,u,o,c.readTime)?this.ys(e,Yc(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,s,r){return hp(n)||r.isEqual(pe.min())?W.resolve(null):this.ps.getDocuments(e,s).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?W.resolve(null):(Dr()<=Ie.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Nr(n)),this.vs(e,o,n,MS(r,no)).next(l=>l))})}Ds(e,n){let s=new dt(ay(e));return n.forEach((r,i)=>{fl(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return Dr()<=Ie.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Nr(n)),this.ps.getDocumentsMatchingQuery(e,n,Os.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}const oh="LocalStore",mC=3e8;class gC{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Je(be),this.xs=new wr(i=>Yu(i),Ju),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function _C(t,e,n,s){return new gC(t,e,n,s)}async function xy(t,e){const n=_e(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],l=[];let c=Ae();for(const u of r){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of i){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(s,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function yC(t,e){const n=_e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const p=u.batch,m=p.keys();let v=W.resolve();return m.forEach(O=>{v=v.next(()=>d.getEntry(c,O)).next(F=>{const $=u.docVersions.get(O);Oe($!==null,48541),F.version.compareTo($)<0&&(p.applyToRemoteDocument(F,u),F.isValidDocument()&&(F.setReadTime(u.commitVersion),d.addEntry(F)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let c=Ae();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function ky(t){const e=_e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function vC(t,e){const n=_e(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];e.targetChanges.forEach((d,p)=>{const m=r.get(p);if(!m)return;l.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,p)));let v=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(At.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,s)),r=r.insert(p,v),function(F,$,K){return F.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=mC?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0}(m,v,d)&&l.push(n.Pi.updateTargetData(i,v))});let c=as(),u=Ae();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(wC(i,o,e.documentUpdates).next(d=>{c=d.ks,u=d.qs})),!s.isEqual(pe.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));l.push(d)}return W.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ms=r,i))}function wC(t,e,n){let s=Ae(),r=Ae();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=as();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(pe.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):re(oh,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:r}})}function EC(t,e){const n=_e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Wu),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function TC(t,e){const n=_e(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Pi.getTargetData(s,e).next(i=>i?(r=i,W.resolve(r)):n.Pi.allocateTargetId(s).next(o=>(r=new As(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function tu(t,e,n){const s=_e(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!ui(o))throw o;re(oh,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function bp(t,e,n){const s=_e(t);let r=pe.min(),i=Ae();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const p=_e(c),m=p.xs.get(d);return m!==void 0?W.resolve(p.Ms.get(m)):p.Pi.getTargetData(u,d)}(s,o,Vn(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:pe.min(),n?i:Ae())).next(l=>(IC(s,lR(e),l),{documents:l,Qs:i})))}function IC(t,e,n){let s=t.Os.get(e)||pe.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Os.set(e,s)}class Ap{constructor(){this.activeTargetIds=pR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bC{constructor(){this.Mo=new Ap,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ap,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class AC{Oo(e){}shutdown(){}}const Sp="ConnectivityMonitor";class Rp{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){re(Sp,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){re(Sp,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let zo=null;function nu(){return zo===null?zo=function(){return 268435456+Math.round(2147483648*Math.random())}():zo++,"0x"+zo.toString(16)}const mc="RestConnection",SC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class RC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===Ca?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=nu(),l=this.zo(e,n.toUriEncodedString());re(mc,`Sending RPC '${e}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,i);const{host:u}=new URL(l),d=ii(u);return this.Jo(e,l,c,s,d).then(p=>(re(mc,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Xr(mc,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",s),p})}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+li}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}zo(e,n){const s=SC[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class CC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Pt="WebChannelConnection";class PC extends RC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=nu();return new Promise((l,c)=>{const u=new N_;u.setWithCredentials(!0),u.listenOnce(V_.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case na.NO_ERROR:const p=u.getResponseJson();re(Pt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case na.TIMEOUT:re(Pt,`RPC '${e}' ${o} timed out`),c(new ie(z.DEADLINE_EXCEEDED,"Request time out"));break;case na.HTTP_ERROR:const m=u.getStatus();if(re(Pt,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const O=v?.error;if(O&&O.status&&O.message){const F=function(K){const M=K.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(M)>=0?M:z.UNKNOWN}(O.status);c(new ie(F,O.message))}else c(new ie(z.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ie(z.UNAVAILABLE,"Connection failed."));break;default:ue(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{re(Pt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(r);re(Pt,`RPC '${e}' ${o} sending request:`,r),u.send(n,"POST",d,s,15)})}T_(e,n,s){const r=nu(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=L_(),l=M_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const d=i.join("");re(Pt,`Creating RPC '${e}' stream ${r}: ${d}`,c);const p=o.createWebChannel(d,c);this.I_(p);let m=!1,v=!1;const O=new CC({Yo:$=>{v?re(Pt,`Not sending because RPC '${e}' stream ${r} is closed:`,$):(m||(re(Pt,`Opening RPC '${e}' stream ${r} transport.`),p.open(),m=!0),re(Pt,`RPC '${e}' stream ${r} sending:`,$),p.send($))},Zo:()=>p.close()}),F=($,K,M)=>{$.listen(K,U=>{try{M(U)}catch(Q){setTimeout(()=>{throw Q},0)}})};return F(p,Ci.EventType.OPEN,()=>{v||(re(Pt,`RPC '${e}' stream ${r} transport opened.`),O.o_())}),F(p,Ci.EventType.CLOSE,()=>{v||(v=!0,re(Pt,`RPC '${e}' stream ${r} transport closed`),O.a_(),this.E_(p))}),F(p,Ci.EventType.ERROR,$=>{v||(v=!0,Xr(Pt,`RPC '${e}' stream ${r} transport errored. Name:`,$.name,"Message:",$.message),O.a_(new ie(z.UNAVAILABLE,"The operation could not be completed")))}),F(p,Ci.EventType.MESSAGE,$=>{if(!v){const K=$.data[0];Oe(!!K,16349);const M=K,U=M?.error||M[0]?.error;if(U){re(Pt,`RPC '${e}' stream ${r} received error:`,U);const Q=U.status;let B=function(y){const _=ot[y];if(_!==void 0)return yy(_)}(Q),j=U.message;B===void 0&&(B=z.INTERNAL,j="Unknown error status: "+Q+" with message "+U.message),v=!0,O.a_(new ie(B,j)),p.close()}else re(Pt,`RPC '${e}' stream ${r} received:`,K),O.u_(K)}}),F(l,O_.STAT_EVENT,$=>{$.stat===Hc.PROXY?re(Pt,`RPC '${e}' stream ${r} detected buffering proxy`):$.stat===Hc.NOPROXY&&re(Pt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{O.__()},0),O}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function gc(){return typeof document<"u"?document:null}function _l(t){return new NR(t,!0)}class Dy{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&re("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Cp="PersistentStream";class Ny{constructor(e,n,s,r,i,o,l,c){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Dy(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(os(n.toString()),os("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===n&&this.G_(s,r)},s=>{e(()=>{const r=new ie(z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return re(Cp,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(re(Cp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xC extends Ny{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=MR(this.serializer,e),s=function(i){if(!("targetChange"in i))return pe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?pe.min():o.readTime?Mn(o.readTime):pe.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=eu(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Kc(c)?{documents:UR(i,c)}:{query:$R(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Ey(i,o.resumeToken);const u=Jc(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(pe.min())>0){l.readTime=Va(i,o.snapshotVersion.toTimestamp());const u=Jc(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const s=jR(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=eu(this.serializer),n.removeTarget=e,this.q_(n)}}class kC extends Ny{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=FR(e.writeResults,e.commitTime),s=Mn(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=eu(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>LR(this.serializer,s))};this.q_(n)}}class DC{}class NC extends DC{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ie(z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Xc(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ie(z.UNKNOWN,i.toString())})}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,Xc(n,s),r,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ie(z.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class VC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(os(n),this.aa=!1):re("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const mr="RemoteStore";class OC{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{Tr(this)&&(re(mr,"Restarting streams for network reachability change."),await async function(c){const u=_e(c);u.Ea.add(4),await wo(u),u.Ra.set("Unknown"),u.Ea.delete(4),await yl(u)}(this))})}),this.Ra=new VC(s,r)}}async function yl(t){if(Tr(t))for(const e of t.da)await e(!0)}async function wo(t){for(const e of t.da)await e(!1)}function Vy(t,e){const n=_e(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),uh(n)?ch(n):hi(n).O_()&&lh(n,e))}function ah(t,e){const n=_e(t),s=hi(n);n.Ia.delete(e),s.O_()&&Oy(n,e),n.Ia.size===0&&(s.O_()?s.L_():Tr(n)&&n.Ra.set("Unknown"))}function lh(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}hi(t).Y_(e)}function Oy(t,e){t.Va.Ue(e),hi(t).Z_(e)}function ch(t){t.Va=new PR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),hi(t).start(),t.Ra.ua()}function uh(t){return Tr(t)&&!hi(t).x_()&&t.Ia.size>0}function Tr(t){return _e(t).Ea.size===0}function My(t){t.Va=void 0}async function MC(t){t.Ra.set("Online")}async function LC(t){t.Ia.forEach((e,n)=>{lh(t,e)})}async function FC(t,e){My(t),uh(t)?(t.Ra.ha(e),ch(t)):t.Ra.set("Unknown")}async function UC(t,e,n){if(t.Ra.set("Online"),e instanceof wy&&e.state===2&&e.cause)try{await async function(r,i){const o=i.cause;for(const l of i.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.Ia.delete(l),r.Va.removeTarget(l))}(t,e)}catch(s){re(mr,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Ma(t,s)}else if(e instanceof oa?t.Va.Ze(e):e instanceof vy?t.Va.st(e):t.Va.tt(e),!n.isEqual(pe.min()))try{const s=await ky(t.localStore);n.compareTo(s)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.Ia.get(u);d&&i.Ia.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=i.Ia.get(c);if(!d)return;i.Ia.set(c,d.withResumeToken(At.EMPTY_BYTE_STRING,d.snapshotVersion)),Oy(i,c);const p=new As(d.target,c,u,d.sequenceNumber);lh(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(s){re(mr,"Failed to raise snapshot:",s),await Ma(t,s)}}async function Ma(t,e,n){if(!ui(e))throw e;t.Ea.add(1),await wo(t),t.Ra.set("Offline"),n||(n=()=>ky(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re(mr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await yl(t)})}function Ly(t,e){return e().catch(n=>Ma(t,n,e))}async function vl(t){const e=_e(t),n=Us(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Wu;for(;$C(e);)try{const r=await EC(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,BC(e,r)}catch(r){await Ma(e,r)}Fy(e)&&Uy(e)}function $C(t){return Tr(t)&&t.Ta.length<10}function BC(t,e){t.Ta.push(e);const n=Us(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Fy(t){return Tr(t)&&!Us(t).x_()&&t.Ta.length>0}function Uy(t){Us(t).start()}async function jC(t){Us(t).ra()}async function HC(t){const e=Us(t);for(const n of t.Ta)e.ea(n.mutations)}async function qC(t,e,n){const s=t.Ta.shift(),r=eh.from(s,e,n);await Ly(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await vl(t)}async function zC(t,e){e&&Us(t).X_&&await async function(s,r){if(function(o){return SR(o)&&o!==z.ABORTED}(r.code)){const i=s.Ta.shift();Us(s).B_(),await Ly(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await vl(s)}}(t,e),Fy(t)&&Uy(t)}async function Pp(t,e){const n=_e(t);n.asyncQueue.verifyOperationInProgress(),re(mr,"RemoteStore received new credentials");const s=Tr(n);n.Ea.add(3),await wo(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await yl(n)}async function GC(t,e){const n=_e(t);e?(n.Ea.delete(2),await yl(n)):e||(n.Ea.add(2),await wo(n),n.Ra.set("Unknown"))}function hi(t){return t.ma||(t.ma=function(n,s,r){const i=_e(n);return i.sa(),new xC(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:MC.bind(null,t),t_:LC.bind(null,t),r_:FC.bind(null,t),H_:UC.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),uh(t)?ch(t):t.Ra.set("Unknown")):(await t.ma.stop(),My(t))})),t.ma}function Us(t){return t.fa||(t.fa=function(n,s,r){const i=_e(n);return i.sa(),new kC(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:jC.bind(null,t),r_:zC.bind(null,t),ta:HC.bind(null,t),na:qC.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await vl(t)):(await t.fa.stop(),t.Ta.length>0&&(re(mr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}class hh{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,l=new hh(e,n,o,r,i);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dh(t,e){if(os("AsyncQueue",`${e}: ${t}`),ui(t))return new ie(z.UNAVAILABLE,`${e}: ${t}`);throw t}class zr{static emptySet(e){return new zr(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ce.comparator(n.key,s.key):(n,s)=>ce.comparator(n.key,s.key),this.keyedMap=Pi(),this.sortedSet=new Je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof zr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new zr;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class xp{constructor(){this.ga=new Je(ce.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ue(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class si{constructor(e,n,s,r,i,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new si(e,n,zr.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}class WC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class KC{constructor(){this.queries=kp(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=_e(n),i=r.queries;r.queries=kp(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(s)})})(this,new ie(z.ABORTED,"Firestore shutting down"))}}function kp(){return new wr(t=>oy(t),dl)}async function QC(t,e){const n=_e(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new WC,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const l=dh(o,`Initialization of query '${Nr(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&fh(n)}async function YC(t,e){const n=_e(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function JC(t,e){const n=_e(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(r)&&(s=!0);o.wa=r}}s&&fh(n)}function XC(t,e,n){const s=_e(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function fh(t){t.Ca.forEach(e=>{e.next()})}var su,Dp;(Dp=su||(su={})).Ma="default",Dp.Cache="cache";class ZC{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new si(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=si.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==su.Cache}}class $y{constructor(e){this.key=e}}class By{constructor(e){this.key=e}}class eP{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ae(),this.mutatedKeys=Ae(),this.eu=ay(e),this.tu=new zr(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new xp,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((d,p)=>{const m=r.get(d),v=fl(this.query,p)?p:null,O=!!m&&this.mutatedKeys.has(m.key),F=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let $=!1;m&&v?m.data.isEqual(v.data)?O!==F&&(s.track({type:3,doc:v}),$=!0):this.su(m,v)||(s.track({type:2,doc:v}),$=!0,(c&&this.eu(v,c)>0||u&&this.eu(v,u)<0)&&(l=!0)):!m&&v?(s.track({type:0,doc:v}),$=!0):m&&!v&&(s.track({type:1,doc:m}),$=!0,(c||u)&&(l=!0)),$&&(v?(o=o.add(v),i=F?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),s.track({type:1,doc:d})}return{tu:o,iu:s,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,p)=>function(v,O){const F=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue(20277,{Rt:$})}};return F(v)-F(O)}(d.type,p.type)||this.eu(d.doc,p.doc)),this.ou(s),r=r??!1;const l=n&&!r?this._u():[],c=this.Xa.size===0&&this.current&&!r?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new si(this.query,e.tu,i,o,e.mutatedKeys,c===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new xp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ae(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new By(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new $y(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ae();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return si.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ph="SyncEngine";class tP{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class nP{constructor(e){this.key=e,this.hu=!1}}class sP{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new wr(l=>oy(l),dl),this.Iu=new Map,this.Eu=new Set,this.du=new Je(ce.comparator),this.Au=new Map,this.Ru=new sh,this.Vu={},this.mu=new Map,this.fu=ni.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rP(t,e,n=!0){const s=Wy(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await jy(s,e,n,!0),r}async function iP(t,e){const n=Wy(t);await jy(n,e,!0,!1)}async function jy(t,e,n,s){const r=await TC(t.localStore,Vn(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return s&&(l=await oP(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&Vy(t.remoteStore,r),l}async function oP(t,e,n,s,r){t.pu=(p,m,v)=>async function(F,$,K,M){let U=$.view.ru(K);U.Cs&&(U=await bp(F.localStore,$.query,!1).then(({documents:b})=>$.view.ru(b,U)));const Q=M&&M.targetChanges.get($.targetId),B=M&&M.targetMismatches.get($.targetId)!=null,j=$.view.applyChanges(U,F.isPrimaryClient,Q,B);return Vp(F,$.targetId,j.au),j.snapshot}(t,p,m,v);const i=await bp(t.localStore,e,!0),o=new eP(e,i.Qs),l=o.ru(i.documents),c=vo.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=o.applyChanges(l,t.isPrimaryClient,c);Vp(t,n,u.au);const d=new tP(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function aP(t,e,n){const s=_e(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(o=>!dl(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await tu(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&ah(s.remoteStore,r.targetId),ru(s,r.targetId)}).catch(ci)):(ru(s,r.targetId),await tu(s.localStore,r.targetId,!0))}async function lP(t,e){const n=_e(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),ah(n.remoteStore,s.targetId))}async function cP(t,e,n){const s=gP(t);try{const r=await function(o,l){const c=_e(o),u=Ke.now(),d=l.reduce((v,O)=>v.add(O.key),Ae());let p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let O=as(),F=Ae();return c.Ns.getEntries(v,d).next($=>{O=$,O.forEach((K,M)=>{M.isValidDocument()||(F=F.add(K))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,O)).next($=>{p=$;const K=[];for(const M of l){const U=ER(M,p.get(M.key).overlayedDocument);U!=null&&K.push(new Er(M.key,U,J_(U.value.mapValue),On.exists(!0)))}return c.mutationQueue.addMutationBatch(v,u,K,l)}).next($=>{m=$;const K=$.applyToLocalDocumentSet(p,F);return c.documentOverlayCache.saveOverlays(v,$.batchId,K)})}).then(()=>({batchId:m.batchId,changes:cy(p)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new Je(be)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(s,r.batchId,n),await Eo(s,r.changes),await vl(s.remoteStore)}catch(r){const i=dh(r,"Failed to persist write");n.reject(i)}}async function Hy(t,e){const n=_e(t);try{const s=await vC(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Au.get(i);o&&(Oe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?Oe(o.hu,14607):r.removedDocuments.size>0&&(Oe(o.hu,42227),o.hu=!1))}),await Eo(n,s,e)}catch(s){await ci(s)}}function Np(t,e,n){const s=_e(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&r.push(l.snapshot)}),function(o,l){const c=_e(o);c.onlineState=l;let u=!1;c.queries.forEach((d,p)=>{for(const m of p.Sa)m.va(l)&&(u=!0)}),u&&fh(c)}(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function uP(t,e,n){const s=_e(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new Je(ce.comparator);o=o.insert(i,Dt.newNoDocument(i,pe.min()));const l=Ae().add(i),c=new gl(pe.min(),new Map,new Je(be),o,l);await Hy(s,c),s.du=s.du.remove(i),s.Au.delete(e),mh(s)}else await tu(s.localStore,e,!1).then(()=>ru(s,e,n)).catch(ci)}async function hP(t,e){const n=_e(t),s=e.batch.batchId;try{const r=await yC(n.localStore,e);zy(n,s,null),qy(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Eo(n,r)}catch(r){await ci(r)}}async function dP(t,e,n){const s=_e(t);try{const r=await function(o,l){const c=_e(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(p=>(Oe(p!==null,37113),d=p.keys(),c.mutationQueue.removeMutationBatch(u,p))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(s.localStore,e);zy(s,e,n),qy(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Eo(s,r)}catch(r){await ci(r)}}function qy(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function zy(t,e,n){const s=_e(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function ru(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||Gy(t,s)})}function Gy(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(ah(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),mh(t))}function Vp(t,e,n){for(const s of n)s instanceof $y?(t.Ru.addReference(s.key,e),fP(t,s)):s instanceof By?(re(ph,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||Gy(t,s.key)):ue(19791,{wu:s})}function fP(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(re(ph,"New document in limbo: "+n),t.Eu.add(s),mh(t))}function mh(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ce(qe.fromString(e)),s=t.fu.next();t.Au.set(s,new nP(n)),t.du=t.du.insert(n,s),Vy(t.remoteStore,new As(Vn(ry(n.path)),s,"TargetPurposeLimboResolution",cl.ce))}}async function Eo(t,e,n){const s=_e(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((l,c)=>{o.push(s.pu(c,e,n).then(u=>{if((u||n)&&s.isPrimaryClient){const d=u?!u.fromCache:n?.targetChanges.get(c.targetId)?.current;s.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(u){r.push(u);const d=ih.As(c.targetId,u);i.push(d)}}))}),await Promise.all(o),s.Pu.H_(r),await async function(c,u){const d=_e(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>W.forEach(u,m=>W.forEach(m.Es,v=>d.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>W.forEach(m.ds,v=>d.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!ui(p))throw p;re(oh,"Failed to update sequence numbers: "+p)}for(const p of u){const m=p.targetId;if(!p.fromCache){const v=d.Ms.get(m),O=v.snapshotVersion,F=v.withLastLimboFreeSnapshotVersion(O);d.Ms=d.Ms.insert(m,F)}}}(s.localStore,i))}async function pP(t,e){const n=_e(t);if(!n.currentUser.isEqual(e)){re(ph,"User change. New user:",e.toKey());const s=await xy(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new ie(z.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Eo(n,s.Ls)}}function mP(t,e){const n=_e(t),s=n.Au.get(e);if(s&&s.hu)return Ae().add(s.key);{let r=Ae();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const l=n.Tu.get(o);r=r.unionWith(l.view.nu)}return r}}function Wy(t){const e=_e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Hy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uP.bind(null,e),e.Pu.H_=JC.bind(null,e.eventManager),e.Pu.yu=XC.bind(null,e.eventManager),e}function gP(t){const e=_e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dP.bind(null,e),e}class La{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_l(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return _C(this.persistence,new pC,e.initialUser,this.serializer)}Cu(e){return new Py(rh.mi,this.serializer)}Du(e){return new bC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}La.provider={build:()=>new La};class _P extends La{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Oe(this.persistence.referenceDelegate instanceof Oa,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new ZR(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?qt.withCacheSize(this.cacheSizeBytes):qt.DEFAULT;return new Py(s=>Oa.mi(s,n),this.serializer)}}class iu{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Np(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=pP.bind(null,this.syncEngine),await GC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new KC}()}createDatastore(e){const n=_l(e.databaseInfo.databaseId),s=function(i){return new PC(i)}(e.databaseInfo);return function(i,o,l,c){return new NC(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,o,l){return new OC(s,r,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Np(this.syncEngine,n,0),function(){return Rp.v()?new Rp:new AC}())}createSyncEngine(e,n){return function(r,i,o,l,c,u,d){const p=new sP(r,i,o,l,c,u);return d&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const s=_e(n);re(mr,"RemoteStore shutting down."),s.Ea.add(5),await wo(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}iu.provider={build:()=>new iu};class yP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):os("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}const $s="FirestoreClient";class vP{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=xt.UNAUTHENTICATED,this.clientId=Gu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{re($s,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(re($s,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=dh(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function _c(t,e){t.asyncQueue.verifyOperationInProgress(),re($s,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await xy(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Op(t,e){t.asyncQueue.verifyOperationInProgress();const n=await wP(t);re($s,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>Pp(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>Pp(e.remoteStore,r)),t._onlineComponents=e}async function wP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re($s,"Using user provided OfflineComponentProvider");try{await _c(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===z.FAILED_PRECONDITION||r.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Xr("Error using user provided cache. Falling back to memory cache: "+n),await _c(t,new La)}}else re($s,"Using default OfflineComponentProvider"),await _c(t,new _P(void 0));return t._offlineComponents}async function Ky(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re($s,"Using user provided OnlineComponentProvider"),await Op(t,t._uninitializedComponentsProvider._online)):(re($s,"Using default OnlineComponentProvider"),await Op(t,new iu))),t._onlineComponents}function EP(t){return Ky(t).then(e=>e.syncEngine)}async function TP(t){const e=await Ky(t),n=e.eventManager;return n.onListen=rP.bind(null,e.syncEngine),n.onUnlisten=aP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=iP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=lP.bind(null,e.syncEngine),n}function IP(t,e,n={}){const s=new ks;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const d=new yP({next:m=>{d.Nu(),o.enqueueAndForget(()=>YC(i,p)),m.fromCache&&c.source==="server"?u.reject(new ie(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new ZC(l,d,{includeMetadataChanges:!0,qa:!0});return QC(i,p)}(await TP(t),t.asyncQueue,e,n,s)),s.promise}function Qy(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const Mp=new Map;const Yy="firestore.googleapis.com",Lp=!0;class Fp{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ie(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Yy,this.ssl=Lp}else this.host=e.host,this.ssl=e.ssl??Lp;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Cy;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<JR)throw new ie(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}OS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Qy(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ie(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ie(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ie(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wl{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new AS;switch(s.type){case"firstParty":return new PS(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ie(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Mp.get(n);s&&(re("ComponentProvider","Removing Datastore"),Mp.delete(n),s.terminate())}(this),Promise.resolve()}}function bP(t,e,n,s={}){t=to(t,wl);const r=ii(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;r&&(bg(`https://${l}`),Ag("Firestore",!0)),i.host!==Yy&&i.host!==l&&Xr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:r,emulatorOptions:s};if(!Vs(c,o)&&(t._setSettings(c),s.mockUserToken)){let u,d;if(typeof s.mockUserToken=="string")u=s.mockUserToken,d=xt.MOCK_USER;else{u=CT(s.mockUserToken,t._app?.options.projectId);const p=s.mockUserToken.sub||s.mockUserToken.user_id;if(!p)throw new ie(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new xt(p)}t._authCredentials=new SS(new U_(u,d))}}class di{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new di(this.firestore,e,this._query)}}class yt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ds(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yt(this.firestore,e,this._key)}toJSON(){return{type:yt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(go(n,yt._jsonSchema))return new yt(e,s||null,new ce(qe.fromString(n.referencePath)))}}yt._jsonSchemaVersion="firestore/documentReference/1.0",yt._jsonSchema={type:lt("string",yt._jsonSchemaVersion),referencePath:lt("string")};class Ds extends di{constructor(e,n,s){super(e,n,ry(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yt(this.firestore,null,new ce(e))}withConverter(e){return new Ds(this.firestore,e,this._path)}}function nn(t,e,...n){if(t=bt(t),$_("collection","path",e),t instanceof wl){const s=qe.fromString(e,...n);return Jf(s),new Ds(t,null,s)}{if(!(t instanceof yt||t instanceof Ds))throw new ie(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(qe.fromString(e,...n));return Jf(s),new Ds(t.firestore,null,s)}}function AP(t,e,...n){if(t=bt(t),arguments.length===1&&(e=Gu.newId()),$_("doc","path",e),t instanceof wl){const s=qe.fromString(e,...n);return Yf(s),new yt(t,null,new ce(s))}{if(!(t instanceof yt||t instanceof Ds))throw new ie(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(qe.fromString(e,...n));return Yf(s),new yt(t.firestore,t instanceof Ds?t.converter:null,new ce(s))}}const Up="AsyncQueue";class $p{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Dy(this,"async_queue_retry"),this._c=()=>{const s=gc();s&&re(Up,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=gc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=gc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ks;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ui(e))throw e;re(Up,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,os("INTERNAL UNHANDLED ERROR: ",Bp(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=hh.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&ue(47125,{Pc:Bp(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Bp(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class El extends wl{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new $p,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $p(e),this._firestoreClient=void 0,await e}}}function SP(t,e){const n=typeof t=="object"?t:Cu(),s=typeof t=="string"?t:Ca,r=yr(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=ST("firestore");i&&bP(r,...i)}return r}function Jy(t){if(t._terminated)throw new ie(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||RP(t),t._firestoreClient}function RP(t){const e=t._freezeSettings(),n=function(r,i,o,l){return new GS(r,i,o,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,Qy(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new vP(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(r){const i=r?._online.build();return{_offline:r?._offline.build(i),_online:i}}(t._componentsProvider))}class on{constructor(e){this._byteString=e}static fromBase64String(e){try{return new on(At.fromBase64String(e))}catch(n){throw new ie(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new on(At.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:on._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(go(e,on._jsonSchema))return on.fromBase64String(e.bytes)}}on._jsonSchemaVersion="firestore/bytes/1.0",on._jsonSchema={type:lt("string",on._jsonSchemaVersion),bytes:lt("string")};class gh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ie(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new It(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Xy{constructor(e){this._methodName=e}}class Ln{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ln._jsonSchemaVersion}}static fromJSON(e){if(go(e,Ln._jsonSchema))return new Ln(e.latitude,e.longitude)}}Ln._jsonSchemaVersion="firestore/geoPoint/1.0",Ln._jsonSchema={type:lt("string",Ln._jsonSchemaVersion),latitude:lt("number"),longitude:lt("number")};class Fn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Fn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(go(e,Fn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Fn(e.vectorValues);throw new ie(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fn._jsonSchemaVersion="firestore/vectorValue/1.0",Fn._jsonSchema={type:lt("string",Fn._jsonSchemaVersion),vectorValues:lt("object")};const CP=/^__.*__$/;class PP{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Er(e,this.data,this.fieldMask,n,this.fieldTransforms):new yo(e,this.data,n,this.fieldTransforms)}}function Zy(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue(40011,{Ac:t})}}class _h{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new _h({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Fa(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Zy(this.Ac)&&CP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class xP{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||_l(e)}Cc(e,n,s,r=!1){return new _h({Ac:e,methodName:n,Dc:s,path:It.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ev(t){const e=t._freezeSettings(),n=_l(t._databaseId);return new xP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function kP(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);sv("Data must be an object, but it was:",o,s);const l=tv(s,o);let c,u;if(i.merge)c=new pn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const p of i.mergeFields){const m=NP(e,p,n);if(!o.contains(m))throw new ie(z.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);OP(d,m)||d.push(m)}c=new pn(d),u=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,u=o.fieldTransforms;return new PP(new rn(l),c,u)}function DP(t,e,n,s=!1){return yh(n,t.Cc(s?4:3,e))}function yh(t,e){if(nv(t=bt(t)))return sv("Unsupported field value:",e,t),tv(t,e);if(t instanceof Xy)return function(s,r){if(!Zy(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const l of s){let c=yh(l,r.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=bt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return mR(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Ke.fromDate(s);return{timestampValue:Va(r.serializer,i)}}if(s instanceof Ke){const i=new Ke(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Va(r.serializer,i)}}if(s instanceof Ln)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof on)return{bytesValue:Ey(r.serializer,s._byteString)};if(s instanceof yt){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:nh(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Fn)return function(o,l){return{mapValue:{fields:{[Q_]:{stringValue:Y_},[Pa]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return Xu(l.serializer,u)})}}}}}}(s,r);throw r.Sc(`Unsupported field value: ${ll(s)}`)}(t,e)}function tv(t,e){const n={};return H_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vr(t,(s,r)=>{const i=yh(r,e.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function nv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof Ln||t instanceof on||t instanceof yt||t instanceof Xy||t instanceof Fn)}function sv(t,e,n){if(!nv(n)||!B_(n)){const s=ll(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function NP(t,e,n){if((e=bt(e))instanceof gh)return e._internalPath;if(typeof e=="string")return rv(t,e);throw Fa("Field path arguments must be of type string or ",t,!1,void 0,n)}const VP=new RegExp("[~\\*/\\[\\]]");function rv(t,e,n){if(e.search(VP)>=0)throw Fa(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gh(...e.split("."))._internalPath}catch{throw Fa(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Fa(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new ie(z.INVALID_ARGUMENT,l+t+c)}function OP(t,e){return t.some(n=>n.isEqual(e))}class iv{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class MP extends iv{data(){return super.data()}}function vh(t,e){return typeof e=="string"?rv(t,e):e instanceof gh?e._internalPath:e._delegate._internalPath}function LP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ie(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wh{}class FP extends wh{}function Zn(t,e,...n){let s=[];e instanceof wh&&s.push(e),s=s.concat(n),function(i){const o=i.filter(c=>c instanceof Eh).length,l=i.filter(c=>c instanceof Tl).length;if(o>1||o>0&&l>0)throw new ie(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)t=r._apply(t);return t}class Tl extends FP{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Tl(e,n,s)}_apply(e){const n=this._parse(e);return ov(e._query,n),new di(e.firestore,e.converter,Qc(e._query,n))}_parse(e){const n=ev(e.firestore);return function(i,o,l,c,u,d,p){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ie(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Hp(p,d);const O=[];for(const F of p)O.push(jp(c,i,F));m={arrayValue:{values:O}}}else m=jp(c,i,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Hp(p,d),m=DP(l,o,p,d==="in"||d==="not-in");return at.create(u,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ur(t,e,n){const s=e,r=vh("where",t);return Tl._create(r,s,n)}class Eh extends wh{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Eh(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:En.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let o=r;const l=i.getFlattenedFilters();for(const c of l)ov(o,c),o=Qc(o,c)}(e._query,n),new di(e.firestore,e.converter,Qc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function jp(t,e,n){if(typeof(n=bt(n))=="string"){if(n==="")throw new ie(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iy(e)&&n.indexOf("/")!==-1)throw new ie(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(qe.fromString(n));if(!ce.isDocumentKey(s))throw new ie(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return ip(t,new ce(s))}if(n instanceof yt)return ip(t,n._key);throw new ie(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ll(n)}.`)}function Hp(t,e){if(!Array.isArray(t)||t.length===0)throw new ie(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ov(t,e){const n=function(r,i){for(const o of r)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ie(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class UP{convertValue(e,n="none"){switch(Fs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return st(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ue(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return vr(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){const n=e.fields?.[Pa].arrayValue?.values?.map(s=>st(s.doubleValue));return new Fn(n)}convertGeoPoint(e){return new Ln(st(e.latitude),st(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=hl(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(so(e));default:return null}}convertTimestamp(e){const n=Ms(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=qe.fromString(e);Oe(Ry(s),9688,{name:e});const r=new ro(s.get(1),s.get(3)),i=new ce(s.popFirst(5));return r.isEqual(n)||os(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function $P(t,e,n){let s;return s=t?t.toFirestore(e):e,s}class Go{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gr extends iv{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new aa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(vh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Gr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Gr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Gr._jsonSchema={type:lt("string",Gr._jsonSchemaVersion),bundleSource:lt("string","DocumentSnapshot"),bundleName:lt("string"),bundle:lt("string")};class aa extends Gr{data(e={}){return super.data(e)}}class Wr{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Go(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new aa(this._firestore,this._userDataWriter,s.key,s,new Go(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>{const c=new aa(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Go(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new aa(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Go(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:BP(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Wr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function BP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue(61501,{type:t})}}Wr._jsonSchemaVersion="firestore/querySnapshot/1.0",Wr._jsonSchema={type:lt("string",Wr._jsonSchemaVersion),bundleSource:lt("string","QuerySnapshot"),bundleName:lt("string"),bundle:lt("string")};class jP extends UP{constructor(e){super(),this.firestore=e}convertBytes(e){return new on(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new yt(this.firestore,null,n)}}function es(t){t=to(t,di);const e=to(t.firestore,El),n=Jy(e),s=new jP(e);return LP(t._query),IP(n,t._query).then(r=>new Wr(e,s,t,r))}function HP(t){return av(to(t.firestore,El),[new Zu(t._key,On.none())])}function ou(t,e){const n=to(t.firestore,El),s=AP(t),r=$P(t.converter,e);return av(n,[kP(ev(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,On.exists(!1))]).then(()=>s)}function av(t,e){return function(s,r){const i=new ks;return s.asyncQueue.enqueueAndForget(async()=>cP(await EP(s),r,i)),i.promise}(Jy(t),e)}(function(e,n=!0){(function(r){li=r})(oi),Un(new wn("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),l=new El(new RS(s.getProvider("auth-internal")),new xS(o,s.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ie(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ro(u.options.projectId,d)}(o,r),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),ln(Gf,Wf,e),ln(Gf,Wf,"esm2020")})();const qP={apiKey:"AIzaSyBREo7YpHmycRgjyftoxkiFMLwMVePqeKc",authDomain:"happy-tri-friends.firebaseapp.com",databaseURL:"https://happy-tri-friends-default-rtdb.europe-west1.firebasedatabase.app",projectId:"happy-tri-friends",storageBucket:"happy-tri-friends.firebasestorage.app",messagingSenderId:"442257914194",appId:"1:442257914194:web:bf5e1c5cb21cac78e5e28b",measurementId:"G-RV9XDZH7J9"},Th=Dg(qP);wA(Th);const De=IS(Th),lv=new Yn;lv.setCustomParameters({prompt:"select_account"});const sn=SP(Th),zP={class:"flex flex-col items-center md:flex-row md:justify-between text-white p-4"},GP={class:"flex flex-wrap justify-center space-x-4 text-sm md:text-base"},WP={class:"flex flex-col gap-2 items-end"},KP={key:1,class:"flex items-center gap-3"},QP={__name:"htfHeader",setup(t){const e=Su(),n=ye(!1),s=ye(""),r=["kulikalovdenis@gmail.com","bugary20@gmail.com"],i=rt(()=>n.value&&r.includes(s.value||"")),o=rt(()=>i.value?"/admin":"/user");ri(()=>{il(De,u=>{u?(n.value=!0,s.value=u.email):(n.value=!1,s.value="")})});function l(){alert("Welcome to Happy TRI Friends!")}async function c(){try{await d1(De),e.push("/")}catch(u){console.error(" :",u)}}return(u,d)=>{const p=Nm("router-link");return Z(),ne("header",zP,[Ve(p,{to:"/"},{default:tr(()=>[...d[0]||(d[0]=[I("img",{src:_T,alt:"Logo",class:"w-20 h-auto mb-4 md:mb-0 cursor-pointer hover:opacity-80 transition"},null,-1)])]),_:1}),I("ul",GP,[d[3]||(d[3]=I("li",null,[I("a",{href:"#",class:"menu-link font-bold hover:text-yellow-400"}," ")],-1)),d[4]||(d[4]=I("li",null,[I("a",{href:"#",class:"menu-link font-bold hover:text-yellow-400"},"")],-1)),d[5]||(d[5]=I("li",null,[I("a",{href:"#",class:"menu-link font-bold hover:text-yellow-400"}," ")],-1)),I("li",null,[Ve(p,{to:"/schedule",class:"menu-link font-bold hover:text-yellow-400"},{default:tr(()=>[...d[1]||(d[1]=[Mr("",-1)])]),_:1})]),d[6]||(d[6]=Zm('<li data-v-d817f29a><a href="#" class="menu-link font-bold hover:text-yellow-400" data-v-d817f29a> </a></li><li data-v-d817f29a><a href="#" class="menu-link font-bold hover:text-yellow-400" data-v-d817f29a></a></li><li data-v-d817f29a><a href="#" class="menu-link font-bold hover:text-yellow-400" data-v-d817f29a> </a></li><li data-v-d817f29a><a href="#" class="menu-link font-bold hover:text-yellow-400" data-v-d817f29a> </a></li><li data-v-d817f29a><a href="#" class="menu-link font-bold hover:text-yellow-400" data-v-d817f29a> </a></li>',5)),I("li",null,[n.value?nt("",!0):(Z(),pa(p,{key:0,to:"/login",class:"menu-link font-bold hover:text-yellow-400"},{default:tr(()=>[...d[2]||(d[2]=[Mr("",-1)])]),_:1}))])]),I("div",WP,[I("button",{type:"button",onClick:l,class:"bg-yellow-400 text-black font-bold py-2 px-6 rounded-full hover:bg-yellow-500 transition"},"  "),n.value?(Z(),ne("div",KP,[Ve(p,{to:o.value,class:"flex items-center gap-2 bg-transparent border-2 border-white text-white font-semibold py-1.5 px-4 rounded-lg hover:bg-white hover:text-black transition"},{default:tr(()=>[...d[8]||(d[8]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"})],-1),Mr("  ",-1)])]),_:1},8,["to"]),I("button",{onClick:c,title:"",class:"p-2 bg-transparent border-2 border-white text-white rounded-lg hover:bg-red-500 hover:border-red-500 transition"},[...d[9]||(d[9]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z","clip-rule":"evenodd"})],-1)])])])):(Z(),pa(p,{key:0,to:"/login",class:"flex items-center gap-2 bg-transparent border-2 border-white text-white font-semibold py-1.5 px-4 rounded-lg hover:bg-white hover:text-black transition"},{default:tr(()=>[...d[7]||(d[7]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 011 1v12a1 1 0 11-2 0V4a1 1 0 011-1zm7.707 3.293a1 1 0 010 1.414L9.414 9H17a1 1 0 110 2H9.414l1.293 1.293a1 1 0 01-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),Mr("    ",-1)])]),_:1}))])])}}},To=uo(QP,[["__scopeId","data-v-d817f29a"]]),YP={},JP={class:"home text-center text-white px-2 sm:px-4 py-4"};function XP(t,e){return Z(),ne("div",JP,[...e[0]||(e[0]=[I("div",{class:"uppercase text-xs sm:text-sm tracking-widest font-light mb-6 sm:mb-10"},"triathlon club",-1),I("div",{class:"text-3xl sm:text-6xl font-bold mb-6 sm:mb-10"},"Happy TRI Friends",-1),I("div",{class:"text-base sm:text-lg text-white"},"Swimmius. Bikeus. Runius",-1)])])}const ZP=uo(YP,[["render",XP]]),Il="/HTF/assets/background-CxF9_idu.png",ex="/HTF/assets/founders_HTF-D-k_59ix.png",tx="/HTF/assets/Kulikalov-c-KDy7Jn.png",nx={class:"relative z-10"},sx={class:"text-center p-4 sm:p-6 md:p-10 lg:p-40"},rx={class:"flex flex-col md:flex-row items-center justify-center md:justify-between h-auto md:h-150 bg-gray-100 text-black p-8 sm:p-10 md:p-16 gap-4 md:gap-0 overflow-hidden"},ix=["src"],ox={class:"flex flex-col md:flex-row-reverse items-center justify-center md:justify-between h-auto md:h-150 bg-white text-black p-8 sm:p-10 md:p-16 gap-4 md:gap-0 overflow-hidden"},ax=["src"],lx={__name:"MainPage",setup(t){Su();function e(){window.scrollBy({top:window.innerHeight,behavior:"smooth"})}return(n,s)=>(Z(),ne(Ye,null,[I("div",{class:"relative min-h-screen bg-cover bg-center bg-fixed",style:js({backgroundImage:`url(${Bt(Il)})`})},[s[0]||(s[0]=I("div",{class:"absolute inset-0 bg-black opacity-50"},null,-1)),I("div",nx,[Ve(To),I("main",sx,[Ve(ZP)])]),I("button",{onClick:e,class:"fixed sm:absolute bottom-5 left-1/2 transform -translate-x-1/2 bg-yellow-400 text-black font-bold py-2 px-4 sm:px-6 md:px-8 rounded-full hover:bg-yellow-500 transition text-base sm:text-lg"},"   ")],4),s[3]||(s[3]=I("div",{class:"flex flex-col items-center justify-center h-auto bg-white text-black p-4 sm:p-6 md:h-80"},[I("h1",{class:"text-xl sm:text-2xl md:text-4xl font-bold mb-4 md:mb-10"},"  "),I("p",{class:"text-sm sm:text-base md:text-lg mb-4 md:mb-0"},"  ,        !")],-1)),I("div",rx,[I("img",{src:Bt(ex),alt:"Founders",class:"w-2/3 sm:w-1/2 md:w-1/3 h-auto mb-4 md:mb-0 ml-0 md:ml-20 object-contain max-h-full"},null,8,ix),s[1]||(s[1]=I("div",{class:"w-full md:w-1/2 text-center md:text-left px-6 md:px-12 lg:px-16"},[I("h2",{class:"text-lg sm:text-xl md:text-2xl font-bold mb-2 md:mb-4"}," HTF"),I("p",{class:"text-sm sm:text-base md:text-lg"},"  '  .   HTF,       ,        .       !")],-1))]),I("div",ox,[I("img",{src:Bt(tx),alt:"Kulikalov",class:"w-2/3 sm:w-1/2 md:w-1/3 h-auto mb-4 md:mb-0 mr-0 md:mr-20 object-contain max-h-full"},null,8,ax),s[2]||(s[2]=I("div",{class:"w-full md:w-1/2 text-center md:text-left px-6 md:px-12 lg:px-16"},[I("h2",{class:"text-lg sm:text-xl md:text-2xl font-bold mb-2 md:mb-4"},"  "),I("p",{class:"text-sm sm:text-base md:text-lg"},"       .     ,             .")],-1))])],64))}},cx="/HTF/HTF.png",ux={class:"relative z-10"},hx={__name:"LoginView",setup(t){const e=Su(),n=["kulikalovdenis@gmail.com","bugary20@gmail.com"];async function s(){try{const i=(await D1(De,lv)).user;n.includes(i.email)?e.push("/admin"):e.push("/user")}catch(r){r.code&&r.code!=="auth/popup-closed-by-user"&&r.code!=="auth/cancelled-popup-request"&&console.error(" :",r.code,r.message)}}return(r,i)=>(Z(),ne("div",{class:"relative min-h-screen bg-cover bg-center bg-fixed",style:js({backgroundImage:`url(${Bt(Il)})`})},[i[5]||(i[5]=I("div",{class:"absolute inset-0 bg-black opacity-50"},null,-1)),I("div",ux,[Ve(To),I("div",{class:"flex flex-col items-center justify-center min-h-[calc(100vh-100px)] p-2 sm:p-4"},[I("div",{class:"bg-gradient-to-br from-blue-50 via-white to-blue-50 p-4 sm:p-6 md:p-10 rounded-2xl shadow-2xl max-w-xs sm:max-w-md w-full border border-blue-100"},[i[1]||(i[1]=I("div",{class:"flex justify-center mb-6"},[I("img",{src:cx,alt:"HTF Logo",class:"w-20 h-20 sm:w-24 sm:h-24 rounded-full shadow-lg border-4 border-blue-500"})],-1)),i[2]||(i[2]=I("h1",{class:"text-2xl sm:text-3xl font-bold mb-3 text-center text-gray-800"},"!",-1)),i[3]||(i[3]=I("p",{class:"text-center text-gray-600 mb-6 sm:mb-8"},"Happy TRI Friends",-1)),I("button",{onClick:s,class:"w-full flex items-center justify-center gap-3 bg-white hover:bg-gray-50 text-gray-800 font-semibold px-4 py-3 sm:px-6 sm:py-4 rounded-xl transition shadow-md border border-gray-200 hover:shadow-lg text-base sm:text-lg"},[...i[0]||(i[0]=[Zm('<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"></path><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"></path><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"></path><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"></path></svg>   Google ',2)])]),i[4]||(i[4]=I("p",{class:"text-center text-xs sm:text-sm text-gray-500 mt-4 sm:mt-6"},"      ",-1))])])])],4))}},cv="/HTF/assets/icon-swimming-BaKitOA7.png",uv="/HTF/assets/icon-running-CXWM86tb.png",hv="/HTF/assets/icon-cycling-BWF-ICF6.png",dv="/HTF/assets/icon-other-CNe9co9v.png",dx={swimming:[" "," "," "],running:[""," ","  "," "],cycling:["","Indoor Zwift"],other:[" "," "]},fx=["",""," ",""],px=t=>dx[t]||fx,mx={swimming:[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}],running:[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}],cycling:[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}],other:[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}]},gx=[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}],qp=t=>mx[t]||gx,_x=[" , . .  36","  , . , 10"," , 61"," , .  5","",""," "," "],yx="",vx="",wx="",Ex="",fv=[{value:"swimming",label:"",icon:yx,iconImg:cv,name:""},{value:"running",label:"",icon:vx,iconImg:uv,name:""},{value:"cycling",label:"",icon:wx,iconImg:hv,name:""},{value:"other",label:"",icon:Ex,iconImg:dv,name:""}],Ih=t=>{const e=fv.find(n=>n.value===t||n.name===t);return e?e.icon:""},Tx={class:"relative z-10 h-full flex flex-col"},Ix={class:"bg-gray-800"},bx={class:"flex flex-col lg:flex-row gap-2 lg:gap-4 p-2 sm:p-4 flex-1 min-h-0 overflow-y-auto"},Ax={class:"w-80 bg-white bg-opacity-90 rounded-2xl shadow-lg p-4 flex-shrink-0 overflow-y-auto flex flex-col"},Sx={class:"flex flex-col items-center mb-6 pb-6 border-b border-gray-200"},Rx={key:0,class:"w-20 h-20 rounded-full mb-3 shadow-md overflow-hidden bg-gray-200"},Cx=["src","alt"],Px={key:1,class:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-bold text-2xl mb-3 shadow-md"},xx={class:"flex items-center justify-center gap-2 w-full"},kx={class:"font-semibold text-gray-800 text-center"},Dx={class:"text-sm text-gray-500 text-center break-all"},Nx={class:"flex-1"},Vx={key:0,class:"bg-white bg-opacity-90 rounded-2xl shadow-lg p-6"},Ox={key:0,class:"text-center py-12"},Mx={key:1,class:"text-center py-12"},Lx={key:2,class:"space-y-6"},Fx={class:"bg-gradient-to-r from-blue-600 to-blue-800 text-white px-6 py-4"},Ux={class:"text-2xl font-bold"},$x={class:"text-sm text-blue-100"},Bx={class:"p-6 space-y-4 bg-gray-50"},jx={class:"flex-1"},Hx={class:"flex items-center gap-3 mb-2"},qx={class:"text-2xl"},zx={class:"text-xl font-bold text-gray-800"},Gx={key:0,class:"px-3 py-1 rounded-full text-sm font-semibold bg-yellow-100 text-yellow-800"},Wx={class:"flex items-center gap-6 text-gray-600"},Kx={class:"flex items-center gap-2"},Qx={class:"font-semibold"},Yx={class:"flex items-center gap-2"},Jx={class:"flex items-center gap-2"},Xx={class:"ml-6 flex flex-col gap-2"},Zx={key:0,disabled:"",class:"px-6 py-3 rounded-lg font-semibold bg-gray-400 text-white cursor-not-allowed shadow-lg opacity-60"},e2=["onClick"],t2=["onClick"],n2={key:3,class:"fixed bottom-8 right-8 bg-green-500 text-white px-6 py-4 rounded-lg shadow-2xl animate-bounce"},s2={class:"font-semibold"},r2={__name:"UserView",setup(t){const e=ye(""),n=ye(""),s=ye(""),r=ye("registration"),i=ye(!1),o=ye(null),l=ye([]),c=ye(""),u=()=>{const B=new Date,j=B.getDay(),b=j===0?-6:1-j,y=new Date(B);y.setDate(B.getDate()+b),y.setHours(0,0,0,0);const _=new Date(y);return _.setDate(y.getDate()+6),_.setHours(23,59,59,999),{monday:y,sunday:_}},d=B=>new Date(B).toLocaleDateString("uk-UA",{day:"2-digit",month:"long"}),p=rt(()=>{if(!o.value||!o.value.trainings)return{};const B={};o.value.trainings.forEach(y=>{const _=y.dayName;B[_]||(B[_]=[]),B[_].push(y)});const j=["","","","","'","",""],b={};return j.forEach(y=>{B[y]&&(b[y]=B[y].sort((_,R)=>_.time.localeCompare(R.time)))}),b}),m=B=>Ih(B),v=B=>({:"bg-green-100 text-green-800",:"bg-yellow-100 text-yellow-800",:"bg-red-100 text-red-800"})[B]||"bg-gray-100 text-gray-800",O=async()=>{try{i.value=!0;const{monday:B,sunday:j}=u(),b=B.toISOString().split("T")[0],y=j.toISOString().split("T")[0],_=Zn(nn(sn,"schedules")),R=await es(_),S=[];R.forEach(A=>{const w=A.data(),we=w.weekStart,$e=w.weekEnd;we>=b&&$e<=y&&S.push({id:A.id,...w})}),S.length>0?(S.sort((A,w)=>{const we=new Date(A.createdAt||0);return new Date(w.createdAt||0)-we}),o.value=S[0],await F()):o.value=null}catch(B){console.error("  :",B)}finally{i.value=!1}},F=async()=>{if(De.currentUser)try{const B=Zn(nn(sn,"registrations"),ur("userId","==",De.currentUser.uid)),j=await es(B);l.value=j.docs.map(b=>b.data().trainingId)}catch{}},$=B=>{const j=`${o.value.id}_${B.date}_${B.time}`;return l.value.includes(j)},K=B=>{const j=new Date(`${B.date}T${B.time}:00`),b=new Date,y=2*60,_=b.getTimezoneOffset(),R=new Date(b.getTime()+(y+_)*6e4);return j<R},M=async B=>{if(!De.currentUser){alert(" ,     ");return}try{const j=`${o.value.id}_${B.date}_${B.time}`;if($(B))return;await ou(nn(sn,"registrations"),{userId:De.currentUser.uid,userEmail:De.currentUser.email,userName:De.currentUser.displayName||De.currentUser.email,userPhoto:De.currentUser.photoURL||null,trainingId:j,scheduleId:o.value.id,trainingDate:B.date,trainingTime:B.time,trainingName:B.name,trainingType:B.type,registeredAt:new Date().toISOString()}),l.value.push(j),c.value=`   ${B.name}`,"Notification"in window&&Notification.permission==="granted"&&new Notification("HTF -  ",{body:`${B.dayName}, ${B.time} - ${B.name}`,icon:"/HTF.png"}),setTimeout(()=>{c.value=""},3e3)}catch(j){alert(" : "+j.message)}},U=async B=>{if(De.currentUser)try{const j=`${o.value.id}_${B.date}_${B.time}`,b=Zn(nn(sn,"registrations"),ur("userId","==",De.currentUser.uid),ur("trainingId","==",j)),y=await es(b);if(!y.empty){const _=y.docs[0];await deleteDoc(_.ref);const R=l.value.indexOf(j);R>-1&&l.value.splice(R,1),c.value=`  ${B.name} `,"Notification"in window&&Notification.permission==="granted"&&new Notification("HTF -  ",{body:`${B.dayName}, ${B.time} - ${B.name}`,icon:"/HTF.png"}),setTimeout(()=>{c.value=""},3e3)}}catch(j){alert(" : "+j.message)}};ri(()=>{il(De,B=>{B&&(e.value=B.displayName||"",n.value=B.email||"",s.value=B.photoURL||"",r.value==="registration"&&O())})}),Rs(r,B=>{B==="registration"&&O()});async function Q(){await De.signOut(),window.location.href="/HTF/"}return(B,j)=>(Z(),ne("div",{class:"relative h-screen bg-cover bg-center bg-fixed overflow-hidden",style:js({backgroundImage:`url(${Bt(Il)})`})},[j[10]||(j[10]=I("div",{class:"absolute inset-0 bg-black opacity-40"},null,-1)),I("div",Tx,[I("div",Ix,[Ve(To)]),I("div",bx,[I("aside",Ax,[I("div",Sx,[s.value?(Z(),ne("div",Rx,[I("img",{src:s.value,alt:e.value,class:"w-full h-full object-cover",referrerpolicy:"no-referrer"},null,8,Cx)])):(Z(),ne("div",Px,fe(e.value?e.value.charAt(0).toUpperCase():"U"),1)),I("div",xx,[I("p",kx,fe(e.value||""),1),I("button",{onClick:Q,class:"bg-red-500 hover:bg-red-600 text-white p-1.5 rounded transition flex-shrink-0",title:""},[...j[1]||(j[1]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z","clip-rule":"evenodd"})],-1)])])]),I("p",Dx,fe(n.value),1)]),I("div",null,[j[2]||(j[2]=I("h3",{class:"text-sm font-semibold text-gray-500 uppercase mb-3"},"",-1)),I("button",{onClick:j[0]||(j[0]=b=>r.value="registration"),class:Et(["w-full text-left px-4 py-3 rounded-lg mb-2 transition",r.value==="registration"?"bg-blue-500 text-white":"hover:bg-gray-100 text-gray-700"])},"     ",2)])]),I("main",Nx,[r.value==="registration"?(Z(),ne("div",Vx,[j[9]||(j[9]=I("h1",{class:"text-3xl font-bold mb-6"},"   ",-1)),i.value?(Z(),ne("div",Ox,[...j[3]||(j[3]=[I("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"},null,-1),I("p",{class:"text-gray-600"}," ...",-1)])])):!o.value||!o.value.trainings||o.value.trainings.length===0?(Z(),ne("div",Mx,[...j[4]||(j[4]=[I("p",{class:"text-gray-600 text-xl mb-4"},"       ",-1),I("p",{class:"text-gray-500"},"   ",-1)])])):(Z(),ne("div",Lx,[(Z(!0),ne(Ye,null,xn(p.value,(b,y)=>(Z(),ne("div",{key:y,class:"border border-gray-200 rounded-xl overflow-hidden"},[I("div",Fx,[I("h2",Ux,fe(y),1),I("p",$x,fe(d(b[0].date)),1)]),I("div",Bx,[(Z(!0),ne(Ye,null,xn(b,(_,R)=>(Z(),ne("div",{key:R,class:"flex items-center justify-between p-4 bg-white rounded-lg hover:shadow-md transition-shadow border border-gray-200"},[I("div",jx,[I("div",Hx,[I("span",qx,fe(m(_.type)),1),I("h3",zx,fe(_.name),1),I("span",{class:Et(["px-3 py-1 rounded-full text-sm font-semibold",v(_.difficulty)])},fe(_.difficulty),3),_.isPaid?(Z(),ne("span",Gx,"   ")):nt("",!0)]),I("div",Wx,[I("div",Kx,[j[5]||(j[5]=I("span",null,"",-1)),I("span",Qx,fe(_.time),1)]),I("div",Yx,[j[6]||(j[6]=I("span",null,"",-1)),I("span",null,fe(_.address),1)]),I("div",Jx,[j[7]||(j[7]=I("span",null,"",-1)),I("span",null,fe(_.type),1)])])]),I("div",Xx,[K(_)&&!$(_)?(Z(),ne("button",Zx,"    ")):$(_)?(Z(),ne(Ye,{key:2},[j[8]||(j[8]=I("button",{class:"px-6 py-3 rounded-lg font-semibold bg-green-500 text-white cursor-default shadow-lg"},"   ",-1)),K(_)?nt("",!0):(Z(),ne("button",{key:0,onClick:S=>U(_),class:"px-6 py-2 rounded-lg font-semibold transition-all transform hover:scale-105 bg-red-500 text-white hover:bg-red-600 shadow-lg hover:shadow-xl"},"   ",8,t2))],64)):(Z(),ne("button",{key:1,onClick:S=>M(_),class:"px-6 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 bg-blue-600 text-white hover:bg-blue-700 shadow-lg hover:shadow-xl"},"   ",8,e2))])]))),128))])]))),128))])),c.value?(Z(),ne("div",n2,[I("p",s2," "+fe(c.value),1)])):nt("",!0)])):nt("",!0)])])])],4))}},i2={class:"relative w-full"},o2=["value","placeholder"],a2={key:0,class:"absolute left-0 right-0 z-20 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-auto mt-1"},l2=["onMousedown"],c2={__name:"CustomDropdown",props:{modelValue:String,options:Array,placeholder:String,hasError:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,s=rt(()=>n.options.length>0&&typeof n.options[0]=="object"),r=p=>typeof p=="string"?p:p.label||p.value,i=p=>typeof p=="string"?p:p.value,o=rt(()=>{if(n.modelValue===void 0||n.modelValue===null)return"";if(!s.value)return n.modelValue;const p=n.options.find(m=>m.value===n.modelValue);return p?p.label:n.modelValue}),l=ye(!1);function c(){setTimeout(()=>{l.value=!1},150)}function u(p){const m=i(p);d("update:modelValue",m),l.value=!1}const d=e;return(p,m)=>(Z(),ne("div",i2,[I("input",{value:o.value,onClick:m[0]||(m[0]=v=>l.value=!0),onFocus:m[1]||(m[1]=v=>l.value=!0),onBlur:c,placeholder:t.placeholder,class:Et(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white appearance-none cursor-pointer placeholder-gray-400 text-gray-900",t.hasError?"border-red-500":"border-gray-300"]),autocomplete:"off",readonly:""},null,42,o2),I("button",{type:"button",onMousedown:m[2]||(m[2]=Hd(v=>l.value=!0,["prevent"])),class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 pointer-events-none"},[...m[3]||(m[3]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])],32),l.value?(Z(),ne("ul",a2,[(Z(!0),ne(Ye,null,xn(t.options,(v,O)=>(Z(),ne("li",{key:O,onMousedown:Hd(F=>u(v),["prevent"]),class:Et(["px-3 py-2 cursor-pointer transition",i(v)===t.modelValue?"bg-green-500 text-white font-semibold":"hover:bg-gray-100"])},fe(r(v)),43,l2))),128))])):nt("",!0)]))}},Si=uo(c2,[["__scopeId","data-v-34e57781"]]),u2={class:"flex-shrink-0 text-2xl"},h2={class:"flex-1"},d2={key:0,class:"font-bold text-lg mb-1"},f2={class:"text-sm"},p2={__name:"Notification",props:{type:{type:String,default:"success",validator:t=>["success","warning","error"].includes(t)},message:{type:String,required:!0},title:{type:String,default:""},duration:{type:Number,default:3e3},show:{type:Boolean,default:!1}},emits:["close"],setup(t,{emit:e}){const n=t,s=e,r=ye(n.show);let i=null;const o=rt(()=>({success:"bg-green-50 border-l-4 border-green-500 text-green-800",warning:"bg-yellow-50 border-l-4 border-yellow-500 text-yellow-800",error:"bg-red-50 border-l-4 border-red-500 text-red-800"})[n.type]),l=rt(()=>({success:"",warning:"",error:""})[n.type]),c=()=>{r.value=!1,s("close"),i&&clearTimeout(i)};return Rs(()=>n.show,u=>{r.value=u,u&&n.duration>0&&(i&&clearTimeout(i),i=setTimeout(()=>{c()},n.duration))}),n.show&&n.duration>0&&(i=setTimeout(()=>{c()},n.duration)),(u,d)=>(Z(),pa(D0,{name:"slide-fade"},{default:tr(()=>[r.value?(Z(),ne("div",{key:0,class:Et(["fixed top-20 left-1/2 -translate-x-1/2 z-50 max-w-md rounded-lg shadow-2xl p-4 flex items-start gap-3","transition-all duration-300",o.value])},[I("div",u2,fe(l.value),1),I("div",h2,[t.title?(Z(),ne("h4",d2,fe(t.title),1)):nt("",!0),I("p",f2,fe(t.message),1)]),I("button",{onClick:c,class:"flex-shrink-0 text-2xl opacity-60 hover:opacity-100 transition-opacity"},"  ")],2)):nt("",!0)]),_:1}))}},m2=uo(p2,[["__scopeId","data-v-21362ac3"]]),g2={class:"relative z-10 h-full flex flex-col"},_2={class:"bg-gray-800"},y2={class:"flex flex-col lg:flex-row gap-2 lg:gap-4 p-2 sm:p-4 flex-1 min-h-0 overflow-y-auto"},v2={class:"w-full lg:w-80 bg-white bg-opacity-90 rounded-2xl shadow-lg p-2 sm:p-4 flex-shrink-0 overflow-y-auto flex flex-col mb-2 lg:mb-0"},w2={class:"flex flex-col items-center mb-6 pb-6 border-b border-gray-200"},E2={key:0,class:"w-20 h-20 rounded-full mb-3 shadow-md overflow-hidden bg-gray-200"},T2=["src","alt"],I2={key:1,class:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-bold text-2xl mb-3 shadow-md"},b2={class:"flex items-center justify-center gap-2 w-full"},A2={class:"font-semibold text-gray-800 text-center"},S2={class:"text-sm text-gray-500 text-center break-all"},R2={class:"mb-6"},C2={class:"flex-1 w-full"},P2={key:0,class:"bg-white bg-opacity-90 rounded-2xl shadow-lg p-2 sm:p-4"},x2={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4"},k2={key:0,class:"flex items-center gap-2"},D2=["disabled"],N2=["disabled"],V2={key:1,class:"text-gray-500 text-sm"},O2={key:2,class:"text-gray-400 text-sm"},M2={class:"mb-4 sm:mb-6 p-2 sm:p-4 bg-blue-50 rounded-lg border border-blue-200"},L2={class:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4"},F2={key:0,class:"text-red-600 text-sm mt-2"},U2={class:"space-y-4 sm:space-y-6"},$2={class:"text-lg sm:text-xl font-semibold mb-2 sm:mb-4 text-gray-800"},B2={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-4"},j2={class:"flex gap-2"},H2=["onUpdate:modelValue"],q2={class:"md:col-span-2"},z2={class:"flex gap-2"},G2=["onClick"],W2=["onClick"],K2={key:0,class:"mt-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg"},Q2={key:1,class:"mt-4 p-4 bg-green-100 border-2 border-green-500 text-green-800 rounded-lg shadow-lg animate-pulse"},Y2={key:2,class:"mt-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg"},J2={key:3,class:"mt-8 p-4 bg-gray-50 rounded-xl"},X2={class:"flex flex-col items-center gap-4"},Z2={key:1,class:"bg-white bg-opacity-90 rounded-2xl shadow-lg p-6"},ek={key:0,class:"text-center py-12"},tk={key:1,class:"text-center py-12"},nk={key:2,class:"space-y-6"},sk={class:"bg-gradient-to-r from-blue-600 to-blue-800 text-white px-6 py-4"},rk={class:"text-2xl font-bold"},ik={class:"text-sm text-blue-100"},ok={class:"p-6 space-y-4 bg-gray-50"},ak={class:"flex-1"},lk={class:"flex items-center gap-3 mb-2"},ck={class:"text-2xl"},uk={class:"text-xl font-bold text-gray-800"},hk={key:0,class:"px-3 py-1 rounded-full text-sm font-semibold bg-yellow-100 text-yellow-800"},dk={class:"flex items-center gap-6 text-gray-600"},fk={class:"flex items-center gap-2"},pk={class:"font-semibold"},mk={class:"flex items-center gap-2"},gk={class:"flex items-center gap-2"},_k={class:"ml-6 flex flex-col gap-2"},yk={key:0,disabled:"",class:"px-6 py-3 rounded-lg font-semibold bg-gray-400 text-white cursor-not-allowed shadow-lg opacity-60"},vk=["onClick"],wk=["onClick"],Ek={key:3,class:"fixed bottom-8 right-8 bg-green-500 text-white px-6 py-4 rounded-lg shadow-2xl animate-bounce"},Tk={class:"font-semibold"},Ik={__name:"AdminView",setup(t){const e=ye(""),n=ye(""),s=ye(""),r=ye("schedule"),i=ye(null),o=ye(!1),l=ye(!1),c=ye(!1),u=ye(""),d=ye(""),p=ye(!1),m=ye([]),v=ye(0),O=ye(!1),F=ye(!1),$=ye(null),K=ye([]),M=ye(""),U=ye(!1),Q=ye(""),B=ye(0),j=ye({show:!1,type:"success",title:"",message:""});function b(x,P,T=""){j.value={show:!0,type:x,title:T,message:P}}function y(){j.value.show=!1}const _=ye([{id:"monday",name:"",trainings:[]},{id:"tuesday",name:"",trainings:[]},{id:"wednesday",name:"",trainings:[]},{id:"thursday",name:"",trainings:[]},{id:"friday",name:"'",trainings:[]},{id:"saturday",name:"",trainings:[]},{id:"sunday",name:"",trainings:[]}]),R=ye(_x);ri(()=>{il(De,x=>{x&&(e.value=x.displayName||"",n.value=x.email||"",s.value=x.photoURL||"")}),S()});async function S(){try{O.value=!0;const x=Zn(nn(sn,"schedules")),P=await es(x),T=[];P.forEach(k=>{T.push({id:k.id,...k.data()})}),m.value=T.sort((k,V)=>new Date(V.weekStart)-new Date(k.weekStart)),m.value.length>0&&(v.value=0)}catch(x){console.error("  :",x)}finally{O.value=!1}}const A=rt(()=>m.value.length===0?null:m.value[v.value]);function w(x,P){const T=new Date(x),k=new Date(P),V=Y=>{const J=String(Y.getDate()).padStart(2,"0"),oe=String(Y.getMonth()+1).padStart(2,"0");return`${J}.${oe}`};return`${V(T)} - ${V(k)}`}function we(){v.value<m.value.length-1&&v.value++}function $e(){v.value>0&&v.value--}function Ge(){const x=A.value;x&&(u.value=x.weekStart,d.value=x.weekEnd,_.value.forEach(P=>{P.trainings=[]}),x.trainings&&Array.isArray(x.trainings)&&x.trainings.forEach(P=>{const T=Pe(P.dayName),k=_.value.find(V=>V.id===T);k&&k.trainings.push({name:P.name,time:P.time,type:P.type,difficulty:P.difficulty,address:P.address,isPaid:P.isPaid||!1})}),b("success","   !      .",""))}function Pe(x){return{:"monday",:"tuesday",:"wednesday",:"thursday","'":"friday",:"saturday",:"sunday"}[x]||"monday"}Rs(r,x=>{x==="registration"&&Ee()}),ye([]);async function Te(){await De.signOut(),window.location.href="/HTF/"}function St(x){const P=_.value.find(T=>T.id===x);P&&P.trainings.push({type:"swimming",name:"",difficulty:"ELEMENTARY",time:"07:00",isPaid:"",address:"",error:!1})}function zt(x){const P=x.target;if(P&&typeof P.showPicker=="function")try{P.showPicker()}catch{}}Rs(()=>_.value.map(x=>x.trainings.map(P=>P.type)),(x,P)=>{_.value.forEach((T,k)=>{T.trainings.forEach((V,Y)=>{const J=P[k]?.[Y],oe=x[k]?.[Y];if(J&&oe&&J!==oe){const ae=qp(V.type);ae.length>0&&(V.difficulty=ae[0].value),V.name=""}})})},{deep:!0});function Mt(x,P){const T=_.value.find(k=>k.id===x);T&&T.trainings.splice(P,1)}async function ct(){l.value=!1,c.value=!1;let x=!1;if((!u.value||!d.value)&&(c.value=!0,x=!0),_.value.forEach(me=>{me.trainings.forEach(Ce=>{Ce.error=!1,(!Ce.name||!Ce.type||!Ce.difficulty||!Ce.time||!Ce.address)&&(Ce.error=!0,x=!0)})}),x){l.value=!0,B.value++,await vu(),b("error"," ,   '  (  *)"," ");return}o.value=!0,await new Promise(me=>setTimeout(me,100)),await document.fonts.ready;const P=i.value;if(!P){console.error("Canvas not found");return}const T=P.getContext("2d");P.width=1080,P.height=1920,T.fillStyle="#2C3E5F",T.fillRect(0,0,P.width,P.height),T.fillStyle="#FFD700",T.font="bold 70px Montserrat",T.textAlign="center",T.fillText("  HTF",P.width/2,120),T.font="bold 26px Montserrat";const k=T.measureText("($) - ").width;T.font="26px Montserrat";const V=T.measureText(" ").width,Y=k+V,J=P.width-60-Y;T.fillStyle="#FFD700",T.font="bold 26px Montserrat",T.textAlign="left",T.fillText("($) - ",J,150),T.fillStyle="#ffffff",T.font="26px Montserrat",T.fillText(" ",J+k,150),T.fillStyle="#ffffff",T.font="26px Montserrat",T.textAlign="right",T.fillText(" ",P.width-60,180);const oe={},ae=[{type:"swimming",src:cv},{type:"running",src:uv},{type:"cycling",src:hv},{type:"other",src:dv}].map(({type:me,src:Ce})=>new Promise(Xe=>{const Qe=new Image;Qe.onload=()=>{oe[me]=Qe,Xe()},Qe.onerror=()=>Xe(),Qe.src=Ce}));await Promise.all(ae);let te=220;const Se={:"",:"",:"",:"","'":"",:"",:""};_.value.forEach(me=>{if(me.trainings.length>0){const Ce=[];me.trainings.forEach(Le=>{const Ct=Ce.find(mt=>mt.type===Le.type&&mt.isPaid===Le.isPaid&&mt.address===Le.address&&mt.name===Le.name);if(Ct){const mt=Ct.difficultyTimes.find(Ir=>Ir.difficulty===Le.difficulty);mt?mt.times.push(Le.time):Ct.difficultyTimes.push({difficulty:Le.difficulty,times:[Le.time]})}else Ce.push({type:Le.type,name:Le.name,isPaid:Le.isPaid,address:Le.address,difficultyTimes:[{difficulty:Le.difficulty,times:[Le.time]}]})});const Xe=[];let Qe=15;Ce.forEach((Le,Ct)=>{const Ir=28+(Le.difficultyTimes.length-1)*35,en=Math.max(Ir,60)+30;Xe.push(en),Qe+=en,Ct<Ce.length-1&&(Qe+=15)}),Qe+=15;const Be=Qe,Rt=45,Zt=Be;T.fillStyle="#FFD700",T.beginPath(),T.moveTo(55,te),T.lineTo(40+Rt,te),T.lineTo(40+Rt,te+Zt),T.lineTo(55,te+Zt),T.arcTo(40,te+Zt,40,te+Zt-15,15),T.lineTo(40,te+15),T.arcTo(40,te,55,te,15),T.closePath(),T.fill(),T.fillStyle="#000000",T.font="32px Montserrat",T.textAlign="center";const tt=(Se[me.name]||me.name.substring(0,2)).toUpperCase().split(""),cs=38,jn=tt.length*cs,Io=te+(Zt-jn)/2+30;tt.forEach((Le,Ct)=>{T.fillText(Le,40+Rt/2,Io+Ct*cs)});const Me=40+Rt,wt=P.width-Me-50;T.fillStyle="#2C3E5F",T.beginPath(),T.moveTo(Me,te),T.lineTo(Me+wt-15,te),T.arcTo(Me+wt,te,Me+wt,te+15,15),T.lineTo(Me+wt,te+Be-15),T.arcTo(Me+wt,te+Be,Me+wt-15,te+Be,15),T.lineTo(Me,te+Be),T.closePath(),T.fill(),T.strokeStyle="#FFD700",T.lineWidth=4,T.beginPath(),T.moveTo(55,te),T.lineTo(Me+wt-15,te),T.arcTo(Me+wt,te,Me+wt,te+15,15),T.lineTo(Me+wt,te+Be-15),T.arcTo(Me+wt,te+Be,Me+wt-15,te+Be,15),T.lineTo(55,te+Be),T.arcTo(40,te+Be,40,te+Be-15,15),T.lineTo(40,te+15),T.arcTo(40,te,55,te,15),T.closePath(),T.stroke();let je=te+15;Ce.forEach((Le,Ct)=>{const mt=Xe[Ct],Hs=(mt-55)/2,en=oe[Le.type];if(en&&T.drawImage(en,Me+20,je+Hs,50,50),T.fillStyle="#ffffff",T.font="semi-bold 34px Montserrat",T.textAlign="left",T.fillText(Le.name,Me+85,je+Hs+25),Le.isPaid){const In=T.measureText(Le.name).width;T.fillStyle="#FFD700",T.fillText(" ($)",Me+85+In,je+Hs+25)}T.fillStyle="#D1D5DB",T.font="22px Montserrat",T.fillText(Le.address,Me+85,je+Hs+55);const bo=Me+500,br=28+(Le.difficultyTimes.length-1)*35;let qs=je+(mt-br)/2;Le.difficultyTimes.forEach((In,Ar)=>{T.font="20px Montserrat",T.textAlign="left";const Al=T.measureText(In.difficulty).width,hn=15,Ao=Al+hn*2;T.strokeStyle="#FFD700",T.lineWidth=2,T.strokeRect(bo,qs,Ao,28),T.fillStyle="#FFD700",T.fillText(In.difficulty,bo+hn,qs+20),T.fillStyle="#ffffff",T.font="22px Montserrat",T.textAlign="right";const So=In.times.join(" | ");T.fillText(So,Me+wt-30,qs+18),qs+=35}),je+=mt,Ct<Ce.length-1&&(je+=7.5,T.strokeStyle="#FFD700",T.lineWidth=1,T.beginPath(),T.moveTo(Me+20,je),T.lineTo(Me+wt-20,je),T.stroke(),je+=7.5)}),te+=Be+25}})}function un(){const x=i.value;if(!x)return;const P=document.createElement("a");P.download="htf-schedule.png",P.href=x.toDataURL("image/png"),P.click()}function Gt(x){const P=new Date(u.value),k={monday:0,tuesday:1,wednesday:2,thursday:3,friday:4,saturday:5,sunday:6}[x],V=new Date(P);return V.setDate(P.getDate()+k),V.toISOString().split("T")[0]}async function Wt(){if(p.value=!1,U.value=!1,Q.value="",l.value=!1,c.value=!1,!u.value||!d.value){c.value=!0,U.value=!0,Q.value="      ";return}let x=!1;if(_.value.forEach(P=>{P.trainings.forEach(T=>{T.error=!1,(!T.name||!T.type||!T.difficulty||!T.time||!T.address)&&(T.error=!0,x=!0)})}),x){l.value=!0,U.value=!0,Q.value="  '  ";return}try{const P=[];_.value.forEach(k=>{if(k.trainings.length>0){const V=Gt(k.id);k.trainings.forEach(Y=>{P.push({date:V,dayName:k.name,type:Y.type,name:Y.name,difficulty:Y.difficulty,time:Y.time,isPaid:Y.isPaid==="paid",address:Y.address,createdAt:new Date().toISOString(),createdBy:De.currentUser?.email||"unknown"})})}});const T=await ou(nn(sn,"schedules"),{weekStart:u.value,weekEnd:d.value,trainings:P,createdAt:new Date().toISOString(),createdBy:De.currentUser?.email||"unknown"});if(T&&T.id)p.value=!0,"Notification"in window&&Notification.permission==="granted"?new Notification("HTF -  ",{body:`  ${P.length} `,icon:"/HTF.png"}):"Notification"in window&&Notification.permission!=="denied"&&Notification.requestPermission().then(k=>{k==="granted"&&new Notification("HTF -  ",{body:`  ${P.length} `,icon:"/HTF.png"})}),setTimeout(()=>{p.value=!1},5e3);else throw new Error("   ID  ")}catch(P){console.error("  :",P),U.value=!0,Q.value=P.message||"   "}}const ft=()=>{const x=new Date,P=x.getDay(),T=P===0?-6:1-P,k=new Date(x);k.setDate(x.getDate()+T),k.setHours(0,0,0,0);const V=new Date(k);return V.setDate(k.getDate()+6),V.setHours(23,59,59,999),{monday:k,sunday:V}},H=x=>new Date(x).toLocaleDateString("uk-UA",{day:"2-digit",month:"long"}),se=rt(()=>{if(!$.value||!$.value.trainings)return{};const x={};$.value.trainings.forEach(k=>{const V=k.dayName;x[V]||(x[V]=[]),x[V].push(k)});const P=["","","","","'","",""],T={};return P.forEach(k=>{x[k]&&(T[k]=x[k].sort((V,Y)=>V.time.localeCompare(Y.time)))}),T}),ee=x=>Ih(x),le=x=>({:"bg-green-100 text-green-800",:"bg-yellow-100 text-yellow-800",:"bg-red-100 text-red-800"})[x]||"bg-gray-100 text-gray-800",Ee=async()=>{if(r.value==="registration")try{F.value=!0;const{monday:x,sunday:P}=ft(),T=x.toISOString().split("T")[0],k=P.toISOString().split("T")[0],V=Zn(nn(sn,"schedules")),Y=await es(V),J=[];Y.forEach(oe=>{const ae=oe.data(),te=ae.weekStart,Se=ae.weekEnd;te>=T&&Se<=k&&J.push({id:oe.id,...ae})}),J.length>0?(J.sort((oe,ae)=>{const te=new Date(oe.createdAt||0);return new Date(ae.createdAt||0)-te}),$.value=J[0],await E()):$.value=null}catch(x){console.error("  :",x)}finally{F.value=!1}},E=async()=>{if(De.currentUser)try{const x=Zn(nn(sn,"registrations"),ur("userId","==",De.currentUser.uid)),P=await es(x);K.value=P.docs.map(T=>T.data().trainingId)}catch{}},C=x=>{const P=`${$.value.id}_${x.date}_${x.time}`;return K.value.includes(P)},D=x=>{const P=new Date(`${x.date}T${x.time}:00`),T=new Date,k=2*60,V=T.getTimezoneOffset(),Y=new Date(T.getTime()+(k+V)*6e4);return P<Y},q=async x=>{if(!De.currentUser){b("warning"," ,     "," ");return}try{const P=`${$.value.id}_${x.date}_${x.time}`;if(C(x))return;await ou(nn(sn,"registrations"),{userId:De.currentUser.uid,userEmail:De.currentUser.email,userName:De.currentUser.displayName||De.currentUser.email,userPhoto:De.currentUser.photoURL||null,trainingId:P,scheduleId:$.value.id,trainingDate:x.date,trainingTime:x.time,trainingName:x.name,trainingType:x.type,registeredAt:new Date().toISOString()}),K.value.push(P),M.value=`   ${x.name}`,"Notification"in window&&Notification.permission==="granted"&&new Notification("HTF -  ",{body:`${x.dayName}, ${x.time} - ${x.name}`,icon:"/HTF.png"}),setTimeout(()=>{M.value=""},3e3)}catch(P){b("error",P.message," ")}},G=async x=>{if(De.currentUser)try{const P=`${$.value.id}_${x.date}_${x.time}`,T=Zn(nn(sn,"registrations"),ur("userId","==",De.currentUser.uid),ur("trainingId","==",P)),k=await es(T);if(!k.empty){const V=k.docs[0];await HP(V.ref);const Y=K.value.indexOf(P);Y>-1&&K.value.splice(Y,1),M.value=`  ${x.name} `,"Notification"in window&&Notification.permission==="granted"&&new Notification("HTF -  ",{body:`${x.dayName}, ${x.time} - ${x.name}`,icon:"/HTF.png"}),setTimeout(()=>{M.value=""},3e3)}}catch(P){b("error",P.message," ")}};return(x,P)=>(Z(),ne("div",{class:"relative h-screen bg-cover bg-center bg-fixed overflow-hidden",style:js({backgroundImage:`url(${Bt(Il)})`})},[P[28]||(P[28]=I("div",{class:"absolute inset-0 bg-black opacity-40"},null,-1)),Ve(m2,{show:j.value.show,type:j.value.type,title:j.value.title,message:j.value.message,onClose:y},null,8,["show","type","title","message"]),I("div",g2,[I("div",_2,[Ve(To)]),I("div",y2,[I("aside",v2,[I("div",w2,[s.value?(Z(),ne("div",E2,[I("img",{src:s.value,alt:e.value,class:"w-full h-full object-cover",referrerpolicy:"no-referrer"},null,8,T2)])):(Z(),ne("div",I2,fe(e.value?e.value.charAt(0).toUpperCase():"A"),1)),I("div",b2,[I("p",A2,fe(e.value||""),1),I("button",{onClick:Te,class:"bg-red-500 hover:bg-red-600 text-white p-1.5 rounded transition flex-shrink-0",title:""},[...P[6]||(P[6]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z","clip-rule":"evenodd"})],-1)])])]),I("p",S2,fe(n.value),1)]),I("div",R2,[P[7]||(P[7]=I("h3",{class:"text-sm font-semibold text-gray-500 uppercase mb-3"},"",-1)),I("button",{onClick:P[0]||(P[0]=T=>r.value="schedule"),class:Et(["w-full text-left px-4 py-3 rounded-lg mb-2 transition",r.value==="schedule"?"bg-blue-500 text-white":"hover:bg-gray-100 text-gray-700"])},"    ",2)]),I("div",null,[P[8]||(P[8]=I("h3",{class:"text-sm font-semibold text-gray-500 uppercase mb-3"},"",-1)),I("button",{onClick:P[1]||(P[1]=T=>r.value="registration"),class:Et(["w-full text-left px-4 py-3 rounded-lg mb-2 transition",r.value==="registration"?"bg-blue-500 text-white":"hover:bg-gray-100 text-gray-700"])},"     ",2)])]),I("main",C2,[r.value==="schedule"?(Z(),ne("div",P2,[I("div",x2,[P[9]||(P[9]=I("h1",{class:"text-3xl font-bold"}," ",-1)),m.value.length>0?(Z(),ne("div",k2,[I("button",{onClick:we,disabled:v.value===m.value.length-1,class:Et(["px-3 py-2 rounded-lg font-bold transition-colors",v.value===m.value.length-1?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"]),title:" "}," < ",10,D2),I("button",{onClick:Ge,class:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold transition-colors",title:"   "},fe(A.value?`${v.value+1}: ${w(A.value.weekStart,A.value.weekEnd)}`:" "),1),I("button",{onClick:$e,disabled:v.value===0,class:Et(["px-3 py-2 rounded-lg font-bold transition-colors",v.value===0?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"]),title:" "}," > ",10,N2)])):O.value?(Z(),ne("div",V2,"  ... ")):(Z(),ne("div",O2,"    "))]),I("div",M2,[I("div",L2,[I("div",null,[P[10]||(P[10]=I("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"   *",-1)),ql(I("input",{ref:"startDateInput","onUpdate:modelValue":P[2]||(P[2]=T=>u.value=T),type:"date",onClick:P[3]||(P[3]=T=>zt(T)),class:Et(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-pointer",c.value&&!u.value?"border-red-500":"border-gray-300"])},null,2),[[Xl,u.value]])]),I("div",null,[P[11]||(P[11]=I("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"   *",-1)),ql(I("input",{ref:"endDateInput","onUpdate:modelValue":P[4]||(P[4]=T=>d.value=T),type:"date",onClick:P[5]||(P[5]=T=>zt(T)),class:Et(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-pointer",c.value&&!d.value?"border-red-500":"border-gray-300"])},null,2),[[Xl,d.value]])])]),c.value?(Z(),ne("p",F2," '      ")):nt("",!0)]),I("div",U2,[(Z(!0),ne(Ye,null,xn(_.value,T=>(Z(),ne("div",{key:T.id,class:"border border-gray-200 rounded-xl p-2 sm:p-4 bg-gray-50"},[I("h3",$2,fe(T.name),1),(Z(!0),ne(Ye,null,xn(T.trainings,(k,V)=>(Z(),ne("div",{key:`${T.id}-${V}-${B.value}`,class:"mb-2 sm:mb-4 p-2 sm:p-4 bg-white rounded-lg shadow-sm border border-gray-100"},[I("div",B2,[I("div",null,[P[12]||(P[12]=I("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"  *",-1)),I("div",j2,[Ve(Si,{modelValue:k.type,"onUpdate:modelValue":Y=>k.type=Y,options:Bt(fv),placeholder:"  *",hasError:!!(k.error&&!k.type)},null,8,["modelValue","onUpdate:modelValue","options","hasError"]),Ve(Si,{modelValue:k.name,"onUpdate:modelValue":Y=>k.name=Y,options:Bt(px)(k.type),placeholder:"  *",hasError:!!(k.error&&!k.name)},null,8,["modelValue","onUpdate:modelValue","options","hasError"])])]),I("div",null,[P[13]||(P[13]=I("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," *",-1)),Ve(Si,{modelValue:k.difficulty,"onUpdate:modelValue":Y=>k.difficulty=Y,options:Bt(qp)(k.type),placeholder:" *",hasError:!!(k.error&&!k.difficulty)},null,8,["modelValue","onUpdate:modelValue","options","hasError"])]),I("div",null,[P[14]||(P[14]=I("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"  *",-1)),ql(I("input",{"onUpdate:modelValue":Y=>k.time=Y,type:"time",class:Et(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",k.error&&!k.time?"border-red-500":"border-gray-300"])},null,10,H2),[[Xl,k.time]])]),I("div",null,[P[15]||(P[15]=I("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," ",-1)),Ve(Si,{modelValue:k.isPaid,"onUpdate:modelValue":Y=>k.isPaid=Y,options:[{value:"",label:""},{value:"paid",label:" "}],placeholder:""},null,8,["modelValue","onUpdate:modelValue"])]),I("div",q2,[P[16]||(P[16]=I("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," *",-1)),I("div",z2,[Ve(Si,{modelValue:k.address,"onUpdate:modelValue":Y=>k.address=Y,options:R.value,placeholder:"  *",hasError:k.error&&!k.address},null,8,["modelValue","onUpdate:modelValue","options","hasError"]),I("button",{onClick:Y=>Mt(T.id,V),class:"px-3 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition"},"  ",8,G2)])])])]))),128)),I("button",{onClick:k=>St(T.id),class:"w-full mt-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition"},"    ",8,W2)]))),128))]),l.value?(Z(),ne("div",K2,[...P[17]||(P[17]=[I("p",{class:"font-semibold"},"  ",-1),I("p",null," ,   '  (  *)",-1)])])):nt("",!0),I("div",{class:"mt-8 flex gap-4"},[I("button",{onClick:ct,class:"flex-1 px-6 py-3 bg-green-500 hover:bg-green-600 text-white font-semibold rounded-lg transition text-lg"},"    "),I("button",{onClick:Wt,class:"flex-1 px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white font-semibold rounded-lg transition text-lg"},"      ")]),p.value?(Z(),ne("div",Q2,[...P[18]||(P[18]=[I("p",{class:"font-bold text-lg"},"  !",-1),I("p",null,"      Firebase",-1)])])):nt("",!0),U.value?(Z(),ne("div",Y2,[P[19]||(P[19]=I("p",{class:"font-semibold"},"  ",-1)),I("p",null,fe(Q.value),1)])):nt("",!0),o.value?(Z(),ne("div",J2,[P[20]||(P[20]=I("h3",{class:"text-xl font-semibold mb-4"}," ",-1)),I("div",X2,[I("canvas",{ref_key:"scheduleCanvas",ref:i,class:"border border-gray-300 rounded-lg shadow-lg max-w-full"},null,512),I("button",{onClick:un,class:"px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white font-semibold rounded-lg transition"},"    ")])])):nt("",!0)])):nt("",!0),r.value==="registration"?(Z(),ne("div",Z2,[P[27]||(P[27]=I("h1",{class:"text-3xl font-bold mb-6"},"   ",-1)),F.value?(Z(),ne("div",ek,[...P[21]||(P[21]=[I("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"},null,-1),I("p",{class:"text-gray-600"}," ...",-1)])])):!$.value||!$.value.trainings||$.value.trainings.length===0?(Z(),ne("div",tk,[...P[22]||(P[22]=[I("p",{class:"text-gray-600 text-xl mb-4"},"       ",-1),I("p",{class:"text-gray-500"},'     " "',-1)])])):(Z(),ne("div",nk,[(Z(!0),ne(Ye,null,xn(se.value,(T,k)=>(Z(),ne("div",{key:k,class:"border border-gray-200 rounded-xl overflow-hidden"},[I("div",sk,[I("h2",rk,fe(k),1),I("p",ik,fe(H(T[0].date)),1)]),I("div",ok,[(Z(!0),ne(Ye,null,xn(T,(V,Y)=>(Z(),ne("div",{key:Y,class:"flex items-center justify-between p-4 bg-white rounded-lg hover:shadow-md transition-shadow border border-gray-200"},[I("div",ak,[I("div",lk,[I("span",ck,fe(ee(V.type)),1),I("h3",uk,fe(V.name),1),I("span",{class:Et(["px-3 py-1 rounded-full text-sm font-semibold",le(V.difficulty)])},fe(V.difficulty),3),V.isPaid?(Z(),ne("span",hk,"   ")):nt("",!0)]),I("div",dk,[I("div",fk,[P[23]||(P[23]=I("span",null,"",-1)),I("span",pk,fe(V.time),1)]),I("div",mk,[P[24]||(P[24]=I("span",null,"",-1)),I("span",null,fe(V.address),1)]),I("div",gk,[P[25]||(P[25]=I("span",null,"",-1)),I("span",null,fe(V.type),1)])])]),I("div",_k,[D(V)&&!C(V)?(Z(),ne("button",yk,"    ")):C(V)?(Z(),ne(Ye,{key:2},[P[26]||(P[26]=I("button",{class:"px-6 py-3 rounded-lg font-semibold bg-green-500 text-white cursor-default shadow-lg"},"   ",-1)),D(V)?nt("",!0):(Z(),ne("button",{key:0,onClick:J=>G(V),class:"px-6 py-2 rounded-lg font-semibold transition-all transform hover:scale-105 bg-red-500 text-white hover:bg-red-600 shadow-lg hover:shadow-xl"},"   ",8,wk))],64)):(Z(),ne("button",{key:1,onClick:J=>q(V),class:"px-6 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 bg-blue-600 text-white hover:bg-blue-700 shadow-lg hover:shadow-xl"},"   ",8,vk))])]))),128))])]))),128))])),M.value?(Z(),ne("div",Ek,[I("p",Tk," "+fe(M.value),1)])):nt("",!0)])):nt("",!0)])])])],4))}},bk={class:"relative z-10 min-h-screen flex flex-col"},Ak={class:"bg-gray-800"},Sk={class:"flex-1 p-2 sm:p-4 md:p-8"},Rk={class:"max-w-6xl mx-auto"},Ck={class:"bg-white bg-opacity-95 rounded-2xl shadow-2xl p-2 sm:p-4 md:p-8 mb-4 sm:mb-6"},Pk={key:0,class:"text-center text-gray-600"},xk={key:0,class:"bg-white bg-opacity-95 rounded-2xl shadow-2xl p-4 sm:p-8 md:p-12 text-center"},kk={key:1,class:"bg-white bg-opacity-95 rounded-2xl shadow-2xl p-4 sm:p-8 md:p-12 text-center"},Dk={key:2,class:"space-y-2 sm:space-y-4"},Nk={class:"w-full sm:w-32 flex-shrink-0"},Vk={class:"bg-gradient-to-br from-blue-600 to-blue-800 rounded-lg p-2 sm:p-4 text-center sticky top-4"},Ok={class:"text-base sm:text-lg font-bold text-white"},Mk={class:"flex-1 space-y-3"},Lk={class:"p-4"},Fk={class:"flex items-start justify-between gap-4"},Uk={class:"flex-1"},$k={class:"flex items-center gap-2 mb-2"},Bk={class:"text-2xl"},jk={class:"text-lg font-bold text-gray-800"},Hk={key:0,class:"px-2 py-0.5 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800"},qk={class:"flex items-center gap-4 text-sm text-gray-600"},zk={class:"flex items-center gap-1"},Gk={class:"font-semibold"},Wk={class:"flex items-center gap-1"},Kk={class:"text-xs"},Qk={class:"text-xs"},Yk={class:"flex-shrink-0"},Jk=["onClick"],Xk={class:"font-semibold text-gray-800"},Zk={class:"text-gray-500 text-xs"},eD={key:0,class:"mt-3 pt-3 border-t border-gray-200"},tD={key:0,class:"text-center text-gray-400 text-sm py-2"},nD={key:1,class:"space-y-1"},sD={class:"font-medium"},rD={class:"text-xs text-gray-500"},iD="/HTF/bg.jpg",oD={__name:"ScheduleView",setup(t){const e=ye(!0),n=ye(null),s=ye([]),r=ye(new Set),i=()=>{const M=new Date,U=M.getDay(),Q=U===0?-6:1-U,B=new Date(M);B.setDate(M.getDate()+Q),B.setHours(0,0,0,0);const j=new Date(B);return j.setDate(B.getDate()+6),j.setHours(23,59,59,999),{monday:B,sunday:j}},o=M=>new Date(M).toLocaleDateString("uk-UA",{day:"2-digit",month:"long"}),l=M=>new Date(M).toLocaleString("uk-UA",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),c=rt(()=>{if(!n.value||!n.value.trainings)return{};const M={};n.value.trainings.forEach(B=>{const j=B.dayName;M[j]||(M[j]=[]),M[j].push(B)});const U=["","","","","'","",""],Q={};return U.forEach(B=>{M[B]&&(Q[B]=M[B].sort((j,b)=>j.time.localeCompare(b.time)))}),Q}),u=M=>Ih(M),d=M=>({:"bg-green-100 text-green-800",:"bg-yellow-100 text-yellow-800",:"bg-red-100 text-red-800"})[M]||"bg-gray-100 text-gray-800",p=M=>n.value.id+"_"+M.date+"_"+M.time,m=M=>{const U=p(M);return s.value.filter(Q=>Q.trainingId===U).length},v=M=>{const U=p(M);return s.value.filter(Q=>Q.trainingId===U)},O=M=>{const U=p(M);r.value.has(U)?r.value.delete(U):r.value.add(U)},F=M=>{const U=p(M);return r.value.has(U)},$=async()=>{try{e.value=!0;const{monday:M,sunday:U}=i(),Q=M.toISOString().split("T")[0],B=U.toISOString().split("T")[0],j=Zn(nn(sn,"schedules")),b=await es(j),y=[];b.forEach(_=>{const R=_.data(),S=R.weekStart,A=R.weekEnd;S>=Q&&A<=B&&y.push({id:_.id,...R})}),y.length>0?(y.sort((_,R)=>{const S=new Date(_.createdAt||0);return new Date(R.createdAt||0).getTime()-S.getTime()}),n.value=y[0],await K(n.value.id)):n.value=null}catch(M){console.error("  :",M)}finally{e.value=!1}},K=async M=>{try{const U=Zn(nn(sn,"registrations"),ur("scheduleId","==",M)),Q=await es(U);s.value=Q.docs.map(B=>({id:B.id,...B.data()}))}catch(U){console.error("  :",U)}};return ri(()=>{$()}),(M,U)=>(Z(),ne("div",{class:"relative min-h-screen bg-cover bg-center bg-fixed overflow-y-auto",style:js({backgroundImage:`url(${iD})`})},[U[7]||(U[7]=I("div",{class:"absolute inset-0 bg-black opacity-40"},null,-1)),I("div",bk,[I("div",Ak,[Ve(To)]),I("div",Sk,[I("div",Rk,[I("div",Ck,[U[0]||(U[0]=I("h1",{class:"text-4xl font-bold text-gray-800 text-center mb-2 flex items-center justify-center gap-3"},[I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"})]),Mr("   ")],-1)),n.value?(Z(),ne("p",Pk,fe(o(n.value.weekStart))+" - "+fe(o(n.value.weekEnd)),1)):nt("",!0)]),e.value?(Z(),ne("div",xk,[...U[1]||(U[1]=[I("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"},null,-1),I("p",{class:"text-gray-600"}," ...",-1)])])):!n.value||!n.value.trainings||n.value.trainings.length===0?(Z(),ne("div",kk,[...U[2]||(U[2]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 mx-auto mb-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1),I("p",{class:"text-gray-600 text-xl mb-4"},"      ",-1),I("p",{class:"text-gray-500"},"   ",-1)])])):(Z(),ne("div",Dk,[(Z(!0),ne(Ye,null,xn(c.value,(Q,B)=>(Z(),ne("div",{key:B,class:"flex flex-col sm:flex-row gap-2 sm:gap-4"},[I("div",Nk,[I("div",Vk,[I("h2",Ok,fe(B),1)])]),I("div",Mk,[(Z(!0),ne(Ye,null,xn(Q,(j,b)=>(Z(),ne("div",{key:b,class:"bg-white bg-opacity-95 rounded-lg shadow-md border border-gray-200"},[I("div",Lk,[I("div",Fk,[I("div",Uk,[I("div",$k,[I("span",Bk,fe(u(j.type)),1),I("h3",jk,fe(j.name),1),I("span",{class:Et(["px-2 py-0.5 rounded-full text-xs font-semibold",d(j.difficulty)])},fe(j.difficulty),3),j.isPaid?(Z(),ne("span",Hk,"  ")):nt("",!0)]),I("div",qk,[I("div",zk,[U[3]||(U[3]=I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),I("span",Gk,fe(j.time),1)]),I("div",Wk,[U[4]||(U[4]=I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)),I("span",Kk,fe(j.address),1)]),I("span",Qk,fe(j.type),1)])]),I("div",Yk,[I("button",{onClick:y=>O(j),class:"flex items-center gap-2 px-3 py-2 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors text-sm"},[U[5]||(U[5]=I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-blue-600",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"})],-1)),I("span",Xk,fe(m(j)),1),I("span",Zk,fe(F(j)?"":""),1)],8,Jk)])]),F(j)?(Z(),ne("div",eD,[v(j).length===0?(Z(),ne("div",tD,"   ")):(Z(),ne("div",nD,[(Z(!0),ne(Ye,null,xn(v(j),(y,_)=>(Z(),ne("div",{key:_,class:"text-sm text-gray-700 py-1"},[I("span",sD,fe(y.userName),1),U[6]||(U[6]=I("span",{class:"text-gray-400 mx-1"},"",-1)),I("span",rD,fe(l(y.registeredAt)),1)]))),128))]))])):nt("",!0)])]))),128))])]))),128))]))])])])],4))}},pv=gT({history:KE("/HTF/"),routes:[{path:"/",name:"home",component:lx},{path:"/login",name:"login",component:hx},{path:"/schedule",name:"schedule",component:oD},{path:"/user",name:"user",component:r2,meta:{requiresAuth:!0}},{path:"/admin",name:"admin",component:Ik,meta:{requiresAuth:!0,requiresAdmin:!0}}]}),aD=["kulikalovdenis@gmail.com","bugary20@gmail.com"],lD=()=>new Promise((t,e)=>{const n=il(De,s=>{n(),t(s)},e)});pv.beforeEach(async(t,e,n)=>{const s=t.matched.some(i=>i.meta.requiresAuth),r=t.matched.some(i=>i.meta.requiresAdmin);if(s||r){const i=await lD();s&&!i?n("/login"):r&&i?aD.includes(i.email||"")?n():n("/user"):n()}else n()});const mv=sE(cE);mv.use(pv);mv.mount("#app");
