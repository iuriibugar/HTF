(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function qc(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const $e={},Ir=[],En=()=>{},Ap=()=>!1,Ia=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),zc=t=>t.startsWith("onUpdate:"),kt=Object.assign,Gc=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},uv=Object.prototype.hasOwnProperty,Me=(t,e)=>uv.call(t,e),_e=Array.isArray,br=t=>Ki(t)==="[object Map]",ba=t=>Ki(t)==="[object Set]",zh=t=>Ki(t)==="[object Date]",be=t=>typeof t=="function",it=t=>typeof t=="string",Pn=t=>typeof t=="symbol",Be=t=>t!==null&&typeof t=="object",Rp=t=>(Be(t)||be(t))&&be(t.then)&&be(t.catch),Sp=Object.prototype.toString,Ki=t=>Sp.call(t),hv=t=>Ki(t).slice(8,-1),Cp=t=>Ki(t)==="[object Object]",Wc=t=>it(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,vi=qc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Aa=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},fv=/-\w/g,tn=Aa(t=>t.replace(fv,e=>e.slice(1).toUpperCase())),dv=/\B([A-Z])/g,sr=Aa(t=>t.replace(dv,"-$1").toLowerCase()),Ra=Aa(t=>t.charAt(0).toUpperCase()+t.slice(1)),Al=Aa(t=>t?`on${Ra(t)}`:""),ds=(t,e)=>!Object.is(t,e),xo=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Pp=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},Sa=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Gh;const Ca=()=>Gh||(Gh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ps(t){if(_e(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=it(s)?_v(s):Ps(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(it(t)||Be(t))return t}const pv=/;(?![^(]*\))/g,mv=/:([^]+)/,gv=/\/\*[^]*?\*\//g;function _v(t){const e={};return t.replace(gv,"").split(pv).forEach(n=>{if(n){const s=n.split(mv);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Mt(t){let e="";if(it(t))e=t;else if(_e(t))for(let n=0;n<t.length;n++){const s=Mt(t[n]);s&&(e+=s+" ")}else if(Be(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const yv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",vv=qc(yv);function xp(t){return!!t||t===""}function wv(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=Pa(t[s],e[s]);return n}function Pa(t,e){if(t===e)return!0;let n=zh(t),s=zh(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=Pn(t),s=Pn(e),n||s)return t===e;if(n=_e(t),s=_e(e),n||s)return n&&s?wv(t,e):!1;if(n=Be(t),s=Be(e),n||s){if(!n||!s)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const l=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(l&&!c||!l&&c||!Pa(t[o],e[o]))return!1}}return String(t)===String(e)}function Ev(t,e){return t.findIndex(n=>Pa(n,e))}const kp=t=>!!(t&&t.__v_isRef===!0),Ie=t=>it(t)?t:t==null?"":_e(t)||Be(t)&&(t.toString===Sp||!be(t.toString))?kp(t)?Ie(t.value):JSON.stringify(t,Dp,2):String(t),Dp=(t,e)=>kp(e)?Dp(t,e.value):br(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[Rl(s,i)+" =>"]=r,n),{})}:ba(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Rl(n))}:Pn(e)?Rl(e):Be(e)&&!_e(e)&&!Cp(e)?String(e):e,Rl=(t,e="")=>{var n;return Pn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let Ut;class Tv{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ut,!e&&Ut&&(this.index=(Ut.scopes||(Ut.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Ut;try{return Ut=this,e()}finally{Ut=n}}}on(){++this._on===1&&(this.prevScope=Ut,Ut=this)}off(){this._on>0&&--this._on===0&&(Ut=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Iv(){return Ut}let qe;const Sl=new WeakSet;class Np{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ut&&Ut.active&&Ut.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Sl.has(this)&&(Sl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Op(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Wh(this),Mp(this);const e=qe,n=ln;qe=this,ln=!0;try{return this.fn()}finally{Lp(this),qe=e,ln=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Yc(e);this.deps=this.depsTail=void 0,Wh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Sl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){tc(this)&&this.run()}get dirty(){return tc(this)}}let Vp=0,wi,Ei;function Op(t,e=!1){if(t.flags|=8,e){t.next=Ei,Ei=t;return}t.next=wi,wi=t}function Kc(){Vp++}function Qc(){if(--Vp>0)return;if(Ei){let e=Ei;for(Ei=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;wi;){let e=wi;for(wi=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function Mp(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Lp(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),Yc(s),bv(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function tc(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Fp(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Fp(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ni)||(t.globalVersion=Ni,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!tc(t))))return;t.flags|=2;const e=t.dep,n=qe,s=ln;qe=t,ln=!0;try{Mp(t);const r=t.fn(t._value);(e.version===0||ds(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{qe=n,ln=s,Lp(t),t.flags&=-3}}function Yc(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Yc(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function bv(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let ln=!0;const Up=[];function jn(){Up.push(ln),ln=!1}function Hn(){const t=Up.pop();ln=t===void 0?!0:t}function Wh(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=qe;qe=void 0;try{e()}finally{qe=n}}}let Ni=0;class Av{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Jc{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!qe||!ln||qe===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==qe)n=this.activeLink=new Av(qe,this),qe.deps?(n.prevDep=qe.depsTail,qe.depsTail.nextDep=n,qe.depsTail=n):qe.deps=qe.depsTail=n,$p(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=qe.depsTail,n.nextDep=void 0,qe.depsTail.nextDep=n,qe.depsTail=n,qe.deps===n&&(qe.deps=s)}return n}trigger(e){this.version++,Ni++,this.notify(e)}notify(e){Kc();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Qc()}}}function $p(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)$p(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const nc=new WeakMap,Ws=Symbol(""),sc=Symbol(""),Vi=Symbol("");function Rt(t,e,n){if(ln&&qe){let s=nc.get(t);s||nc.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new Jc),r.map=s,r.key=n),r.track()}}function Ln(t,e,n,s,r,i){const o=nc.get(t);if(!o){Ni++;return}const l=c=>{c&&c.trigger()};if(Kc(),e==="clear")o.forEach(l);else{const c=_e(t),h=c&&Wc(n);if(c&&n==="length"){const f=Number(s);o.forEach((p,m)=>{(m==="length"||m===Vi||!Pn(m)&&m>=f)&&l(p)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),h&&l(o.get(Vi)),e){case"add":c?h&&l(o.get("length")):(l(o.get(Ws)),br(t)&&l(o.get(sc)));break;case"delete":c||(l(o.get(Ws)),br(t)&&l(o.get(sc)));break;case"set":br(t)&&l(o.get(Ws));break}}Qc()}function dr(t){const e=Ve(t);return e===t?e:(Rt(e,"iterate",Vi),Zt(t)?e:e.map(un))}function xa(t){return Rt(t=Ve(t),"iterate",Vi),t}function is(t,e){return qn(t)?Ks(t)?Or(un(e)):Or(e):un(e)}const Rv={__proto__:null,[Symbol.iterator](){return Cl(this,Symbol.iterator,t=>is(this,t))},concat(...t){return dr(this).concat(...t.map(e=>_e(e)?dr(e):e))},entries(){return Cl(this,"entries",t=>(t[1]=is(this,t[1]),t))},every(t,e){return Vn(this,"every",t,e,void 0,arguments)},filter(t,e){return Vn(this,"filter",t,e,n=>n.map(s=>is(this,s)),arguments)},find(t,e){return Vn(this,"find",t,e,n=>is(this,n),arguments)},findIndex(t,e){return Vn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Vn(this,"findLast",t,e,n=>is(this,n),arguments)},findLastIndex(t,e){return Vn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Vn(this,"forEach",t,e,void 0,arguments)},includes(...t){return Pl(this,"includes",t)},indexOf(...t){return Pl(this,"indexOf",t)},join(t){return dr(this).join(t)},lastIndexOf(...t){return Pl(this,"lastIndexOf",t)},map(t,e){return Vn(this,"map",t,e,void 0,arguments)},pop(){return fi(this,"pop")},push(...t){return fi(this,"push",t)},reduce(t,...e){return Kh(this,"reduce",t,e)},reduceRight(t,...e){return Kh(this,"reduceRight",t,e)},shift(){return fi(this,"shift")},some(t,e){return Vn(this,"some",t,e,void 0,arguments)},splice(...t){return fi(this,"splice",t)},toReversed(){return dr(this).toReversed()},toSorted(t){return dr(this).toSorted(t)},toSpliced(...t){return dr(this).toSpliced(...t)},unshift(...t){return fi(this,"unshift",t)},values(){return Cl(this,"values",t=>is(this,t))}};function Cl(t,e,n){const s=xa(t),r=s[e]();return s!==t&&!Zt(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=n(i.value)),i}),r}const Sv=Array.prototype;function Vn(t,e,n,s,r,i){const o=xa(t),l=o!==t&&!Zt(t),c=o[e];if(c!==Sv[e]){const p=c.apply(t,i);return l?un(p):p}let h=n;o!==t&&(l?h=function(p,m){return n.call(this,is(t,p),m,t)}:n.length>2&&(h=function(p,m){return n.call(this,p,m,t)}));const f=c.call(o,h,s);return l&&r?r(f):f}function Kh(t,e,n,s){const r=xa(t);let i=n;return r!==t&&(Zt(t)?n.length>3&&(i=function(o,l,c){return n.call(this,o,l,c,t)}):i=function(o,l,c){return n.call(this,o,is(t,l),c,t)}),r[e](i,...s)}function Pl(t,e,n){const s=Ve(t);Rt(s,"iterate",Vi);const r=s[e](...n);return(r===-1||r===!1)&&eu(n[0])?(n[0]=Ve(n[0]),s[e](...n)):r}function fi(t,e,n=[]){jn(),Kc();const s=Ve(t)[e].apply(t,n);return Qc(),Hn(),s}const Cv=qc("__proto__,__v_isRef,__isVue"),Bp=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Pn));function Pv(t){Pn(t)||(t=String(t));const e=Ve(this);return Rt(e,"has",t),e.hasOwnProperty(t)}class jp{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?Uv:Gp:i?zp:qp).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=_e(e);if(!r){let c;if(o&&(c=Rv[n]))return c;if(n==="hasOwnProperty")return Pv}const l=Reflect.get(e,n,xt(e)?e:s);if((Pn(n)?Bp.has(n):Cv(n))||(r||Rt(e,"get",n),i))return l;if(xt(l)){const c=o&&Wc(n)?l:l.value;return r&&Be(c)?ic(c):c}return Be(l)?r?ic(l):ka(l):l}}class Hp extends jp{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];const o=_e(e)&&Wc(n);if(!this._isShallow){const h=qn(i);if(!Zt(s)&&!qn(s)&&(i=Ve(i),s=Ve(s)),!o&&xt(i)&&!xt(s))return h||(i.value=s),!0}const l=o?Number(n)<e.length:Me(e,n),c=Reflect.set(e,n,s,xt(e)?e:r);return e===Ve(r)&&(l?ds(s,i)&&Ln(e,"set",n,s):Ln(e,"add",n,s)),c}deleteProperty(e,n){const s=Me(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&Ln(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!Pn(n)||!Bp.has(n))&&Rt(e,"has",n),s}ownKeys(e){return Rt(e,"iterate",_e(e)?"length":Ws),Reflect.ownKeys(e)}}class xv extends jp{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const kv=new Hp,Dv=new xv,Nv=new Hp(!0);const rc=t=>t,wo=t=>Reflect.getPrototypeOf(t);function Vv(t,e,n){return function(...s){const r=this.__v_raw,i=Ve(r),o=br(i),l=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,h=r[t](...s),f=n?rc:e?Or:un;return!e&&Rt(i,"iterate",c?sc:Ws),{next(){const{value:p,done:m}=h.next();return m?{value:p,done:m}:{value:l?[f(p[0]),f(p[1])]:f(p),done:m}},[Symbol.iterator](){return this}}}}function Eo(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Ov(t,e){const n={get(r){const i=this.__v_raw,o=Ve(i),l=Ve(r);t||(ds(r,l)&&Rt(o,"get",r),Rt(o,"get",l));const{has:c}=wo(o),h=e?rc:t?Or:un;if(c.call(o,r))return h(i.get(r));if(c.call(o,l))return h(i.get(l));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&Rt(Ve(r),"iterate",Ws),r.size},has(r){const i=this.__v_raw,o=Ve(i),l=Ve(r);return t||(ds(r,l)&&Rt(o,"has",r),Rt(o,"has",l)),r===l?i.has(r):i.has(r)||i.has(l)},forEach(r,i){const o=this,l=o.__v_raw,c=Ve(l),h=e?rc:t?Or:un;return!t&&Rt(c,"iterate",Ws),l.forEach((f,p)=>r.call(i,h(f),h(p),o))}};return kt(n,t?{add:Eo("add"),set:Eo("set"),delete:Eo("delete"),clear:Eo("clear")}:{add(r){!e&&!Zt(r)&&!qn(r)&&(r=Ve(r));const i=Ve(this);return wo(i).has.call(i,r)||(i.add(r),Ln(i,"add",r,r)),this},set(r,i){!e&&!Zt(i)&&!qn(i)&&(i=Ve(i));const o=Ve(this),{has:l,get:c}=wo(o);let h=l.call(o,r);h||(r=Ve(r),h=l.call(o,r));const f=c.call(o,r);return o.set(r,i),h?ds(i,f)&&Ln(o,"set",r,i):Ln(o,"add",r,i),this},delete(r){const i=Ve(this),{has:o,get:l}=wo(i);let c=o.call(i,r);c||(r=Ve(r),c=o.call(i,r)),l&&l.call(i,r);const h=i.delete(r);return c&&Ln(i,"delete",r,void 0),h},clear(){const r=Ve(this),i=r.size!==0,o=r.clear();return i&&Ln(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=Vv(r,t,e)}),n}function Xc(t,e){const n=Ov(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(Me(n,r)&&r in s?n:s,r,i)}const Mv={get:Xc(!1,!1)},Lv={get:Xc(!1,!0)},Fv={get:Xc(!0,!1)};const qp=new WeakMap,zp=new WeakMap,Gp=new WeakMap,Uv=new WeakMap;function $v(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Bv(t){return t.__v_skip||!Object.isExtensible(t)?0:$v(hv(t))}function ka(t){return qn(t)?t:Zc(t,!1,kv,Mv,qp)}function Wp(t){return Zc(t,!1,Nv,Lv,zp)}function ic(t){return Zc(t,!0,Dv,Fv,Gp)}function Zc(t,e,n,s,r){if(!Be(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Bv(t);if(i===0)return t;const o=r.get(t);if(o)return o;const l=new Proxy(t,i===2?s:n);return r.set(t,l),l}function Ks(t){return qn(t)?Ks(t.__v_raw):!!(t&&t.__v_isReactive)}function qn(t){return!!(t&&t.__v_isReadonly)}function Zt(t){return!!(t&&t.__v_isShallow)}function eu(t){return t?!!t.__v_raw:!1}function Ve(t){const e=t&&t.__v_raw;return e?Ve(e):t}function jv(t){return!Me(t,"__v_skip")&&Object.isExtensible(t)&&Pp(t,"__v_skip",!0),t}const un=t=>Be(t)?ka(t):t,Or=t=>Be(t)?ic(t):t;function xt(t){return t?t.__v_isRef===!0:!1}function Se(t){return Kp(t,!1)}function Hv(t){return Kp(t,!0)}function Kp(t,e){return xt(t)?t:new qv(t,e)}class qv{constructor(e,n){this.dep=new Jc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Ve(e),this._value=n?e:un(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||Zt(e)||qn(e);e=s?e:Ve(e),ds(e,n)&&(this._rawValue=e,this._value=s?e:un(e),this.dep.trigger())}}function Bt(t){return xt(t)?t.value:t}const zv={get:(t,e,n)=>e==="__v_raw"?t:Bt(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return xt(r)&&!xt(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function Qp(t){return Ks(t)?t:new Proxy(t,zv)}class Gv{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Jc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ni-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&qe!==this)return Op(this,!0),!0}get value(){const e=this.dep.track();return Fp(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Wv(t,e,n=!1){let s,r;return be(t)?s=t:(s=t.get,r=t.set),new Gv(s,r,n)}const To={},zo=new WeakMap;let $s;function Kv(t,e=!1,n=$s){if(n){let s=zo.get(n);s||zo.set(n,s=[]),s.push(t)}}function Qv(t,e,n=$e){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:l,call:c}=n,h=J=>r?J:Zt(J)||r===!1||r===0?Fn(J,1):Fn(J);let f,p,m,w,N=!1,M=!1;if(xt(t)?(p=()=>t.value,N=Zt(t)):Ks(t)?(p=()=>h(t),N=!0):_e(t)?(M=!0,N=t.some(J=>Ks(J)||Zt(J)),p=()=>t.map(J=>{if(xt(J))return J.value;if(Ks(J))return h(J);if(be(J))return c?c(J,2):J()})):be(t)?e?p=c?()=>c(t,2):t:p=()=>{if(m){jn();try{m()}finally{Hn()}}const J=$s;$s=f;try{return c?c(t,3,[w]):t(w)}finally{$s=J}}:p=En,e&&r){const J=p,B=r===!0?1/0:r;p=()=>Fn(J(),B)}const $=Iv(),Q=()=>{f.stop(),$&&$.active&&Gc($.effects,f)};if(i&&e){const J=e;e=(...B)=>{J(...B),Q()}}let V=M?new Array(t.length).fill(To):To;const U=J=>{if(!(!(f.flags&1)||!f.dirty&&!J))if(e){const B=f.run();if(r||N||(M?B.some((H,I)=>ds(H,V[I])):ds(B,V))){m&&m();const H=$s;$s=f;try{const I=[B,V===To?void 0:M&&V[0]===To?[]:V,w];V=B,c?c(e,3,I):e(...I)}finally{$s=H}}}else f.run()};return l&&l(U),f=new Np(p),f.scheduler=o?()=>o(U,!1):U,w=J=>Kv(J,!1,f),m=f.onStop=()=>{const J=zo.get(f);if(J){if(c)c(J,4);else for(const B of J)B();zo.delete(f)}},e?s?U(!0):V=f.run():o?o(U.bind(null,!0),!0):f.run(),Q.pause=f.pause.bind(f),Q.resume=f.resume.bind(f),Q.stop=Q,Q}function Fn(t,e=1/0,n){if(e<=0||!Be(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,xt(t))Fn(t.value,e,n);else if(_e(t))for(let s=0;s<t.length;s++)Fn(t[s],e,n);else if(ba(t)||br(t))t.forEach(s=>{Fn(s,e,n)});else if(Cp(t)){for(const s in t)Fn(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Fn(t[s],e,n)}return t}function Qi(t,e,n,s){try{return s?t(...s):t()}catch(r){Da(r,e,n)}}function xn(t,e,n,s){if(be(t)){const r=Qi(t,e,n,s);return r&&Rp(r)&&r.catch(i=>{Da(i,e,n)}),r}if(_e(t)){const r=[];for(let i=0;i<t.length;i++)r.push(xn(t[i],e,n,s));return r}}function Da(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||$e;if(e){let l=e.parent;const c=e.proxy,h=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const f=l.ec;if(f){for(let p=0;p<f.length;p++)if(f[p](t,c,h)===!1)return}l=l.parent}if(i){jn(),Qi(i,null,10,[t,c,h]),Hn();return}}Yv(t,n,r,s,o)}function Yv(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const Lt=[];let yn=-1;const Ar=[];let os=null,mr=0;const Yp=Promise.resolve();let Go=null;function tu(t){const e=Go||Yp;return t?e.then(this?t.bind(this):t):e}function Jv(t){let e=yn+1,n=Lt.length;for(;e<n;){const s=e+n>>>1,r=Lt[s],i=Oi(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function nu(t){if(!(t.flags&1)){const e=Oi(t),n=Lt[Lt.length-1];!n||!(t.flags&2)&&e>=Oi(n)?Lt.push(t):Lt.splice(Jv(e),0,t),t.flags|=1,Jp()}}function Jp(){Go||(Go=Yp.then(Zp))}function Xv(t){_e(t)?Ar.push(...t):os&&t.id===-1?os.splice(mr+1,0,t):t.flags&1||(Ar.push(t),t.flags|=1),Jp()}function Qh(t,e,n=yn+1){for(;n<Lt.length;n++){const s=Lt[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;Lt.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Xp(t){if(Ar.length){const e=[...new Set(Ar)].sort((n,s)=>Oi(n)-Oi(s));if(Ar.length=0,os){os.push(...e);return}for(os=e,mr=0;mr<os.length;mr++){const n=os[mr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}os=null,mr=0}}const Oi=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Zp(t){try{for(yn=0;yn<Lt.length;yn++){const e=Lt[yn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Qi(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;yn<Lt.length;yn++){const e=Lt[yn];e&&(e.flags&=-2)}yn=-1,Lt.length=0,Xp(),Go=null,(Lt.length||Ar.length)&&Zp()}}let zt=null,em=null;function Wo(t){const e=zt;return zt=t,em=t&&t.type.__scopeId||null,e}function gr(t,e=zt,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&Yo(-1);const i=Wo(e);let o;try{o=t(...r)}finally{Wo(i),s._d&&Yo(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function pr(t,e){if(zt===null)return t;const n=Ma(zt),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,l,c=$e]=e[r];i&&(be(i)&&(i={mounted:i,updated:i}),i.deep&&Fn(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:l,modifiers:c}))}return t}function Fs(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const l=r[o];i&&(l.oldValue=i[o].value);let c=l.dir[s];c&&(jn(),xn(c,n,8,[t.el,l,t,e]),Hn())}}const Zv=Symbol("_vte"),ew=t=>t.__isTeleport,tw=Symbol("_leaveCb");function su(t,e){t.shapeFlag&6&&t.component?(t.transition=e,su(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function tm(t,e){return be(t)?kt({name:t.name},e,{setup:t}):t}function nm(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Ko=new WeakMap;function Ti(t,e,n,s,r=!1){if(_e(t)){t.forEach((N,M)=>Ti(N,e&&(_e(e)?e[M]:e),n,s,r));return}if(Ii(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Ti(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?Ma(s.component):s.el,o=r?null:i,{i:l,r:c}=t,h=e&&e.r,f=l.refs===$e?l.refs={}:l.refs,p=l.setupState,m=Ve(p),w=p===$e?Ap:N=>Me(m,N);if(h!=null&&h!==c){if(Yh(e),it(h))f[h]=null,w(h)&&(p[h]=null);else if(xt(h)){h.value=null;const N=e;N.k&&(f[N.k]=null)}}if(be(c))Qi(c,l,12,[o,f]);else{const N=it(c),M=xt(c);if(N||M){const $=()=>{if(t.f){const Q=N?w(c)?p[c]:f[c]:c.value;if(r)_e(Q)&&Gc(Q,i);else if(_e(Q))Q.includes(i)||Q.push(i);else if(N)f[c]=[i],w(c)&&(p[c]=f[c]);else{const V=[i];c.value=V,t.k&&(f[t.k]=V)}}else N?(f[c]=o,w(c)&&(p[c]=o)):M&&(c.value=o,t.k&&(f[t.k]=o))};if(o){const Q=()=>{$(),Ko.delete(t)};Q.id=-1,Ko.set(t,Q),qt(Q,n)}else Yh(t),$()}}}function Yh(t){const e=Ko.get(t);e&&(e.flags|=8,Ko.delete(t))}Ca().requestIdleCallback;Ca().cancelIdleCallback;const Ii=t=>!!t.type.__asyncLoader,sm=t=>t.type.__isKeepAlive;function nw(t,e){rm(t,"a",e)}function sw(t,e){rm(t,"da",e)}function rm(t,e,n=Ct){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Na(e,s,n),n){let r=n.parent;for(;r&&r.parent;)sm(r.parent.vnode)&&rw(s,e,n,r),r=r.parent}}function rw(t,e,n,s){const r=Na(e,t,s,!0);im(()=>{Gc(s[e],r)},n)}function Na(t,e,n=Ct,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{jn();const l=Ji(n),c=xn(e,n,t,o);return l(),Hn(),c});return s?r.unshift(i):r.push(i),i}}const Qn=t=>(e,n=Ct)=>{(!Li||t==="sp")&&Na(t,(...s)=>e(...s),n)},iw=Qn("bm"),Yi=Qn("m"),ow=Qn("bu"),aw=Qn("u"),lw=Qn("bum"),im=Qn("um"),cw=Qn("sp"),uw=Qn("rtg"),hw=Qn("rtc");function fw(t,e=Ct){Na("ec",t,e)}const dw="components";function om(t,e){return mw(dw,t,!0,e)||t}const pw=Symbol.for("v-ndc");function mw(t,e,n=!0,s=!1){const r=zt||Ct;if(r){const i=r.type;{const l=s0(i,!1);if(l&&(l===e||l===tn(e)||l===Ra(tn(e))))return i}const o=Jh(r[t]||i[t],e)||Jh(r.appContext[t],e);return!o&&s?i:o}}function Jh(t,e){return t&&(t[e]||t[tn(e)]||t[Ra(tn(e))])}function Yt(t,e,n,s){let r;const i=n,o=_e(t);if(o||it(t)){const l=o&&Ks(t);let c=!1,h=!1;l&&(c=!Zt(t),h=qn(t),t=xa(t)),r=new Array(t.length);for(let f=0,p=t.length;f<p;f++)r[f]=e(c?h?Or(un(t[f])):un(t[f]):t[f],f,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let l=0;l<t;l++)r[l]=e(l+1,l,void 0,i)}else if(Be(t))if(t[Symbol.iterator])r=Array.from(t,(l,c)=>e(l,c,void 0,i));else{const l=Object.keys(t);r=new Array(l.length);for(let c=0,h=l.length;c<h;c++){const f=l[c];r[c]=e(t[f],f,c,i)}}else r=[];return r}const oc=t=>t?Sm(t)?Ma(t):oc(t.parent):null,bi=kt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>oc(t.parent),$root:t=>oc(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>lm(t),$forceUpdate:t=>t.f||(t.f=()=>{nu(t.update)}),$nextTick:t=>t.n||(t.n=tu.bind(t.proxy)),$watch:t=>Rw.bind(t)}),xl=(t,e)=>t!==$e&&!t.__isScriptSetup&&Me(t,e),gw={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:l,appContext:c}=t;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(xl(s,e))return o[e]=1,s[e];if(r!==$e&&Me(r,e))return o[e]=2,r[e];if(Me(i,e))return o[e]=3,i[e];if(n!==$e&&Me(n,e))return o[e]=4,n[e];ac&&(o[e]=0)}}const h=bi[e];let f,p;if(h)return e==="$attrs"&&Rt(t.attrs,"get",""),h(t);if((f=l.__cssModules)&&(f=f[e]))return f;if(n!==$e&&Me(n,e))return o[e]=4,n[e];if(p=c.config.globalProperties,Me(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return xl(r,e)?(r[e]=n,!0):s!==$e&&Me(s,e)?(s[e]=n,!0):Me(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,props:i,type:o}},l){let c;return!!(n[l]||t!==$e&&l[0]!=="$"&&Me(t,l)||xl(e,l)||Me(i,l)||Me(s,l)||Me(bi,l)||Me(r.config.globalProperties,l)||(c=o.__cssModules)&&c[l])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Me(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Xh(t){return _e(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let ac=!0;function _w(t){const e=lm(t),n=t.proxy,s=t.ctx;ac=!1,e.beforeCreate&&Zh(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:l,provide:c,inject:h,created:f,beforeMount:p,mounted:m,beforeUpdate:w,updated:N,activated:M,deactivated:$,beforeDestroy:Q,beforeUnmount:V,destroyed:U,unmounted:J,render:B,renderTracked:H,renderTriggered:I,errorCaptured:y,serverPrefetch:v,expose:R,inheritAttrs:A,components:C,directives:E,filters:je}=e;if(h&&yw(h,s,null),o)for(const De in o){const Re=o[De];be(Re)&&(s[De]=Re.bind(n))}if(r){const De=r.call(n,n);Be(De)&&(t.data=ka(De))}if(ac=!0,i)for(const De in i){const Re=i[De],dt=be(Re)?Re.bind(n,n):be(Re.get)?Re.get.bind(n,n):En,jt=!be(Re)&&be(Re.set)?Re.set.bind(n):En,Nt=Pt({get:dt,set:jt});Object.defineProperty(s,De,{enumerable:!0,configurable:!0,get:()=>Nt.value,set:at=>Nt.value=at})}if(l)for(const De in l)am(l[De],s,n,De);if(c){const De=be(c)?c.call(n):c;Reflect.ownKeys(De).forEach(Re=>{ko(Re,De[Re])})}f&&Zh(f,t,"c");function Je(De,Re){_e(Re)?Re.forEach(dt=>De(dt.bind(n))):Re&&De(Re.bind(n))}if(Je(iw,p),Je(Yi,m),Je(ow,w),Je(aw,N),Je(nw,M),Je(sw,$),Je(fw,y),Je(hw,H),Je(uw,I),Je(lw,V),Je(im,J),Je(cw,v),_e(R))if(R.length){const De=t.exposed||(t.exposed={});R.forEach(Re=>{Object.defineProperty(De,Re,{get:()=>n[Re],set:dt=>n[Re]=dt,enumerable:!0})})}else t.exposed||(t.exposed={});B&&t.render===En&&(t.render=B),A!=null&&(t.inheritAttrs=A),C&&(t.components=C),E&&(t.directives=E),v&&nm(t)}function yw(t,e,n=En){_e(t)&&(t=lc(t));for(const s in t){const r=t[s];let i;Be(r)?"default"in r?i=Tn(r.from||s,r.default,!0):i=Tn(r.from||s):i=Tn(r),xt(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function Zh(t,e,n){xn(_e(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function am(t,e,n,s){let r=s.includes(".")?hm(n,s):()=>n[s];if(it(t)){const i=e[t];be(i)&&Qs(r,i)}else if(be(t))Qs(r,t.bind(n));else if(Be(t))if(_e(t))t.forEach(i=>am(i,e,n,s));else{const i=be(t.handler)?t.handler.bind(n):e[t.handler];be(i)&&Qs(r,i,t)}}function lm(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,l=i.get(e);let c;return l?c=l:!r.length&&!n&&!s?c=e:(c={},r.length&&r.forEach(h=>Qo(c,h,o,!0)),Qo(c,e,o)),Be(e)&&i.set(e,c),c}function Qo(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&Qo(t,i,n,!0),r&&r.forEach(o=>Qo(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const l=vw[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const vw={data:ef,props:tf,emits:tf,methods:mi,computed:mi,beforeCreate:Vt,created:Vt,beforeMount:Vt,mounted:Vt,beforeUpdate:Vt,updated:Vt,beforeDestroy:Vt,beforeUnmount:Vt,destroyed:Vt,unmounted:Vt,activated:Vt,deactivated:Vt,errorCaptured:Vt,serverPrefetch:Vt,components:mi,directives:mi,watch:Ew,provide:ef,inject:ww};function ef(t,e){return e?t?function(){return kt(be(t)?t.call(this,this):t,be(e)?e.call(this,this):e)}:e:t}function ww(t,e){return mi(lc(t),lc(e))}function lc(t){if(_e(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Vt(t,e){return t?[...new Set([].concat(t,e))]:e}function mi(t,e){return t?kt(Object.create(null),t,e):e}function tf(t,e){return t?_e(t)&&_e(e)?[...new Set([...t,...e])]:kt(Object.create(null),Xh(t),Xh(e??{})):e}function Ew(t,e){if(!t)return e;if(!e)return t;const n=kt(Object.create(null),t);for(const s in e)n[s]=Vt(t[s],e[s]);return n}function cm(){return{app:null,config:{isNativeTag:Ap,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Tw=0;function Iw(t,e){return function(s,r=null){be(s)||(s=kt({},s)),r!=null&&!Be(r)&&(r=null);const i=cm(),o=new WeakSet,l=[];let c=!1;const h=i.app={_uid:Tw++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:i0,get config(){return i.config},set config(f){},use(f,...p){return o.has(f)||(f&&be(f.install)?(o.add(f),f.install(h,...p)):be(f)&&(o.add(f),f(h,...p))),h},mixin(f){return i.mixins.includes(f)||i.mixins.push(f),h},component(f,p){return p?(i.components[f]=p,h):i.components[f]},directive(f,p){return p?(i.directives[f]=p,h):i.directives[f]},mount(f,p,m){if(!c){const w=h._ceVNode||Ge(s,r);return w.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),t(w,f,m),c=!0,h._container=f,f.__vue_app__=h,Ma(w.component)}},onUnmount(f){l.push(f)},unmount(){c&&(xn(l,h._instance,16),t(null,h._container),delete h._container.__vue_app__)},provide(f,p){return i.provides[f]=p,h},runWithContext(f){const p=Rr;Rr=h;try{return f()}finally{Rr=p}}};return h}}let Rr=null;function ko(t,e){if(Ct){let n=Ct.provides;const s=Ct.parent&&Ct.parent.provides;s===n&&(n=Ct.provides=Object.create(s)),n[t]=e}}function Tn(t,e,n=!1){const s=Xw();if(s||Rr){let r=Rr?Rr._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&be(e)?e.call(s&&s.proxy):e}}const bw=Symbol.for("v-scx"),Aw=()=>Tn(bw);function Qs(t,e,n){return um(t,e,n)}function um(t,e,n=$e){const{immediate:s,deep:r,flush:i,once:o}=n,l=kt({},n),c=e&&s||!e&&i!=="post";let h;if(Li){if(i==="sync"){const w=Aw();h=w.__watcherHandles||(w.__watcherHandles=[])}else if(!c){const w=()=>{};return w.stop=En,w.resume=En,w.pause=En,w}}const f=Ct;l.call=(w,N,M)=>xn(w,f,N,M);let p=!1;i==="post"?l.scheduler=w=>{qt(w,f&&f.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(w,N)=>{N?w():nu(w)}),l.augmentJob=w=>{e&&(w.flags|=4),p&&(w.flags|=2,f&&(w.id=f.uid,w.i=f))};const m=Qv(t,e,l);return Li&&(h?h.push(m):c&&m()),m}function Rw(t,e,n){const s=this.proxy,r=it(t)?t.includes(".")?hm(s,t):()=>s[t]:t.bind(s,s);let i;be(e)?i=e:(i=e.handler,n=e);const o=Ji(this),l=um(r,i.bind(s),n);return o(),l}function hm(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const Sw=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${tn(e)}Modifiers`]||t[`${sr(e)}Modifiers`];function Cw(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||$e;let r=n;const i=e.startsWith("update:"),o=i&&Sw(s,e.slice(7));o&&(o.trim&&(r=n.map(f=>it(f)?f.trim():f)),o.number&&(r=n.map(Sa)));let l,c=s[l=Al(e)]||s[l=Al(tn(e))];!c&&i&&(c=s[l=Al(sr(e))]),c&&xn(c,t,6,r);const h=s[l+"Once"];if(h){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,xn(h,t,6,r)}}const Pw=new WeakMap;function fm(t,e,n=!1){const s=n?Pw:e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},l=!1;if(!be(t)){const c=h=>{const f=fm(h,e,!0);f&&(l=!0,kt(o,f))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!l?(Be(t)&&s.set(t,null),null):(_e(i)?i.forEach(c=>o[c]=null):kt(o,i),Be(t)&&s.set(t,o),o)}function Va(t,e){return!t||!Ia(e)?!1:(e=e.slice(2).replace(/Once$/,""),Me(t,e[0].toLowerCase()+e.slice(1))||Me(t,sr(e))||Me(t,e))}function nf(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:l,emit:c,render:h,renderCache:f,props:p,data:m,setupState:w,ctx:N,inheritAttrs:M}=t,$=Wo(t);let Q,V;try{if(n.shapeFlag&4){const J=r||s,B=J;Q=wn(h.call(B,J,f,p,w,m,N)),V=l}else{const J=e;Q=wn(J.length>1?J(p,{attrs:l,slots:o,emit:c}):J(p,null)),V=e.props?l:xw(l)}}catch(J){Ai.length=0,Da(J,t,1),Q=Ge(Es)}let U=Q;if(V&&M!==!1){const J=Object.keys(V),{shapeFlag:B}=U;J.length&&B&7&&(i&&J.some(zc)&&(V=kw(V,i)),U=Mr(U,V,!1,!0))}return n.dirs&&(U=Mr(U,null,!1,!0),U.dirs=U.dirs?U.dirs.concat(n.dirs):n.dirs),n.transition&&su(U,n.transition),Q=U,Wo($),Q}const xw=t=>{let e;for(const n in t)(n==="class"||n==="style"||Ia(n))&&((e||(e={}))[n]=t[n]);return e},kw=(t,e)=>{const n={};for(const s in t)(!zc(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function Dw(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:l,patchFlag:c}=e,h=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?sf(s,o,h):!!o;if(c&8){const f=e.dynamicProps;for(let p=0;p<f.length;p++){const m=f[p];if(o[m]!==s[m]&&!Va(h,m))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?sf(s,o,h):!0:!!o;return!1}function sf(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!Va(n,i))return!0}return!1}function Nw({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const dm={},pm=()=>Object.create(dm),mm=t=>Object.getPrototypeOf(t)===dm;function Vw(t,e,n,s=!1){const r={},i=pm();t.propsDefaults=Object.create(null),gm(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:Wp(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function Ow(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,l=Ve(r),[c]=t.propsOptions;let h=!1;if((s||o>0)&&!(o&16)){if(o&8){const f=t.vnode.dynamicProps;for(let p=0;p<f.length;p++){let m=f[p];if(Va(t.emitsOptions,m))continue;const w=e[m];if(c)if(Me(i,m))w!==i[m]&&(i[m]=w,h=!0);else{const N=tn(m);r[N]=cc(c,l,N,w,t,!1)}else w!==i[m]&&(i[m]=w,h=!0)}}}else{gm(t,e,r,i)&&(h=!0);let f;for(const p in l)(!e||!Me(e,p)&&((f=sr(p))===p||!Me(e,f)))&&(c?n&&(n[p]!==void 0||n[f]!==void 0)&&(r[p]=cc(c,l,p,void 0,t,!0)):delete r[p]);if(i!==l)for(const p in i)(!e||!Me(e,p))&&(delete i[p],h=!0)}h&&Ln(t.attrs,"set","")}function gm(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,l;if(e)for(let c in e){if(vi(c))continue;const h=e[c];let f;r&&Me(r,f=tn(c))?!i||!i.includes(f)?n[f]=h:(l||(l={}))[f]=h:Va(t.emitsOptions,c)||(!(c in s)||h!==s[c])&&(s[c]=h,o=!0)}if(i){const c=Ve(n),h=l||$e;for(let f=0;f<i.length;f++){const p=i[f];n[p]=cc(r,c,p,h[p],t,!Me(h,p))}}return o}function cc(t,e,n,s,r,i){const o=t[n];if(o!=null){const l=Me(o,"default");if(l&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&be(c)){const{propsDefaults:h}=r;if(n in h)s=h[n];else{const f=Ji(r);s=h[n]=c.call(null,e),f()}}else s=c;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!l?s=!1:o[1]&&(s===""||s===sr(n))&&(s=!0))}return s}const Mw=new WeakMap;function _m(t,e,n=!1){const s=n?Mw:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},l=[];let c=!1;if(!be(t)){const f=p=>{c=!0;const[m,w]=_m(p,e,!0);kt(o,m),w&&l.push(...w)};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!i&&!c)return Be(t)&&s.set(t,Ir),Ir;if(_e(i))for(let f=0;f<i.length;f++){const p=tn(i[f]);rf(p)&&(o[p]=$e)}else if(i)for(const f in i){const p=tn(f);if(rf(p)){const m=i[f],w=o[p]=_e(m)||be(m)?{type:m}:kt({},m),N=w.type;let M=!1,$=!0;if(_e(N))for(let Q=0;Q<N.length;++Q){const V=N[Q],U=be(V)&&V.name;if(U==="Boolean"){M=!0;break}else U==="String"&&($=!1)}else M=be(N)&&N.name==="Boolean";w[0]=M,w[1]=$,(M||Me(w,"default"))&&l.push(p)}}const h=[o,l];return Be(t)&&s.set(t,h),h}function rf(t){return t[0]!=="$"&&!vi(t)}const ru=t=>t==="_"||t==="_ctx"||t==="$stable",iu=t=>_e(t)?t.map(wn):[wn(t)],Lw=(t,e,n)=>{if(e._n)return e;const s=gr((...r)=>iu(e(...r)),n);return s._c=!1,s},ym=(t,e,n)=>{const s=t._ctx;for(const r in t){if(ru(r))continue;const i=t[r];if(be(i))e[r]=Lw(r,i,s);else if(i!=null){const o=iu(i);e[r]=()=>o}}},vm=(t,e)=>{const n=iu(e);t.slots.default=()=>n},wm=(t,e,n)=>{for(const s in e)(n||!ru(s))&&(t[s]=e[s])},Fw=(t,e,n)=>{const s=t.slots=pm();if(t.vnode.shapeFlag&32){const r=e._;r?(wm(s,e,n),n&&Pp(s,"_",r,!0)):ym(e,s)}else e&&vm(t,e)},Uw=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=$e;if(s.shapeFlag&32){const l=e._;l?n&&l===1?i=!1:wm(r,e,n):(i=!e.$stable,ym(e,r)),o=e}else e&&(vm(t,e),o={default:1});if(i)for(const l in r)!ru(l)&&o[l]==null&&delete r[l]},qt=qw;function $w(t){return Bw(t)}function Bw(t,e){const n=Ca();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:l,createComment:c,setText:h,setElementText:f,parentNode:p,nextSibling:m,setScopeId:w=En,insertStaticContent:N}=t,M=(_,b,S,L=null,j=null,F=null,X=void 0,Y=null,W=!!b.dynamicChildren)=>{if(_===b)return;_&&!di(_,b)&&(L=x(_),at(_,j,F,!0),_=null),b.patchFlag===-2&&(W=!1,b.dynamicChildren=null);const{type:K,ref:he,shapeFlag:re}=b;switch(K){case Oa:$(_,b,S,L);break;case Es:Q(_,b,S,L);break;case Do:_==null&&V(b,S,L,X);break;case Qe:C(_,b,S,L,j,F,X,Y,W);break;default:re&1?B(_,b,S,L,j,F,X,Y,W):re&6?E(_,b,S,L,j,F,X,Y,W):(re&64||re&128)&&K.process(_,b,S,L,j,F,X,Y,W,le)}he!=null&&j?Ti(he,_&&_.ref,F,b||_,!b):he==null&&_&&_.ref!=null&&Ti(_.ref,null,F,_,!0)},$=(_,b,S,L)=>{if(_==null)s(b.el=l(b.children),S,L);else{const j=b.el=_.el;b.children!==_.children&&h(j,b.children)}},Q=(_,b,S,L)=>{_==null?s(b.el=c(b.children||""),S,L):b.el=_.el},V=(_,b,S,L)=>{[_.el,_.anchor]=N(_.children,b,S,L,_.el,_.anchor)},U=({el:_,anchor:b},S,L)=>{let j;for(;_&&_!==b;)j=m(_),s(_,S,L),_=j;s(b,S,L)},J=({el:_,anchor:b})=>{let S;for(;_&&_!==b;)S=m(_),r(_),_=S;r(b)},B=(_,b,S,L,j,F,X,Y,W)=>{if(b.type==="svg"?X="svg":b.type==="math"&&(X="mathml"),_==null)H(b,S,L,j,F,X,Y,W);else{const K=_.el&&_.el._isVueCE?_.el:null;try{K&&K._beginPatch(),v(_,b,j,F,X,Y,W)}finally{K&&K._endPatch()}}},H=(_,b,S,L,j,F,X,Y)=>{let W,K;const{props:he,shapeFlag:re,transition:ue,dirs:de}=_;if(W=_.el=o(_.type,F,he&&he.is,he),re&8?f(W,_.children):re&16&&y(_.children,W,null,L,j,kl(_,F),X,Y),de&&Fs(_,null,L,"created"),I(W,_,_.scopeId,X,L),he){for(const ve in he)ve!=="value"&&!vi(ve)&&i(W,ve,null,he[ve],F,L);"value"in he&&i(W,"value",null,he.value,F),(K=he.onVnodeBeforeMount)&&_n(K,L,_)}de&&Fs(_,null,L,"beforeMount");const ce=jw(j,ue);ce&&ue.beforeEnter(W),s(W,b,S),((K=he&&he.onVnodeMounted)||ce||de)&&qt(()=>{K&&_n(K,L,_),ce&&ue.enter(W),de&&Fs(_,null,L,"mounted")},j)},I=(_,b,S,L,j)=>{if(S&&w(_,S),L)for(let F=0;F<L.length;F++)w(_,L[F]);if(j){let F=j.subTree;if(b===F||Im(F.type)&&(F.ssContent===b||F.ssFallback===b)){const X=j.vnode;I(_,X,X.scopeId,X.slotScopeIds,j.parent)}}},y=(_,b,S,L,j,F,X,Y,W=0)=>{for(let K=W;K<_.length;K++){const he=_[K]=Y?as(_[K]):wn(_[K]);M(null,he,b,S,L,j,F,X,Y)}},v=(_,b,S,L,j,F,X)=>{const Y=b.el=_.el;let{patchFlag:W,dynamicChildren:K,dirs:he}=b;W|=_.patchFlag&16;const re=_.props||$e,ue=b.props||$e;let de;if(S&&Us(S,!1),(de=ue.onVnodeBeforeUpdate)&&_n(de,S,b,_),he&&Fs(b,_,S,"beforeUpdate"),S&&Us(S,!0),(re.innerHTML&&ue.innerHTML==null||re.textContent&&ue.textContent==null)&&f(Y,""),K?R(_.dynamicChildren,K,Y,S,L,kl(b,j),F):X||Re(_,b,Y,null,S,L,kl(b,j),F,!1),W>0){if(W&16)A(Y,re,ue,S,j);else if(W&2&&re.class!==ue.class&&i(Y,"class",null,ue.class,j),W&4&&i(Y,"style",re.style,ue.style,j),W&8){const ce=b.dynamicProps;for(let ve=0;ve<ce.length;ve++){const we=ce[ve],Te=re[we],Fe=ue[we];(Fe!==Te||we==="value")&&i(Y,we,Te,Fe,j,S)}}W&1&&_.children!==b.children&&f(Y,b.children)}else!X&&K==null&&A(Y,re,ue,S,j);((de=ue.onVnodeUpdated)||he)&&qt(()=>{de&&_n(de,S,b,_),he&&Fs(b,_,S,"updated")},L)},R=(_,b,S,L,j,F,X)=>{for(let Y=0;Y<b.length;Y++){const W=_[Y],K=b[Y],he=W.el&&(W.type===Qe||!di(W,K)||W.shapeFlag&198)?p(W.el):S;M(W,K,he,null,L,j,F,X,!0)}},A=(_,b,S,L,j)=>{if(b!==S){if(b!==$e)for(const F in b)!vi(F)&&!(F in S)&&i(_,F,b[F],null,j,L);for(const F in S){if(vi(F))continue;const X=S[F],Y=b[F];X!==Y&&F!=="value"&&i(_,F,Y,X,j,L)}"value"in S&&i(_,"value",b.value,S.value,j)}},C=(_,b,S,L,j,F,X,Y,W)=>{const K=b.el=_?_.el:l(""),he=b.anchor=_?_.anchor:l("");let{patchFlag:re,dynamicChildren:ue,slotScopeIds:de}=b;de&&(Y=Y?Y.concat(de):de),_==null?(s(K,S,L),s(he,S,L),y(b.children||[],S,he,j,F,X,Y,W)):re>0&&re&64&&ue&&_.dynamicChildren?(R(_.dynamicChildren,ue,S,j,F,X,Y),(b.key!=null||j&&b===j.subTree)&&Em(_,b,!0)):Re(_,b,S,he,j,F,X,Y,W)},E=(_,b,S,L,j,F,X,Y,W)=>{b.slotScopeIds=Y,_==null?b.shapeFlag&512?j.ctx.activate(b,S,L,X,W):je(b,S,L,j,F,X,W):ot(_,b,W)},je=(_,b,S,L,j,F,X)=>{const Y=_.component=Jw(_,L,j);if(sm(_)&&(Y.ctx.renderer=le),Zw(Y,!1,X),Y.asyncDep){if(j&&j.registerDep(Y,Je,X),!_.el){const W=Y.subTree=Ge(Es);Q(null,W,b,S),_.placeholder=W.el}}else Je(Y,_,b,S,j,F,X)},ot=(_,b,S)=>{const L=b.component=_.component;if(Dw(_,b,S))if(L.asyncDep&&!L.asyncResolved){De(L,b,S);return}else L.next=b,L.update();else b.el=_.el,L.vnode=b},Je=(_,b,S,L,j,F,X)=>{const Y=()=>{if(_.isMounted){let{next:re,bu:ue,u:de,parent:ce,vnode:ve}=_;{const pt=Tm(_);if(pt){re&&(re.el=ve.el,De(_,re,X)),pt.asyncDep.then(()=>{_.isUnmounted||Y()});return}}let we=re,Te;Us(_,!1),re?(re.el=ve.el,De(_,re,X)):re=ve,ue&&xo(ue),(Te=re.props&&re.props.onVnodeBeforeUpdate)&&_n(Te,ce,re,ve),Us(_,!0);const Fe=nf(_),He=_.subTree;_.subTree=Fe,M(He,Fe,p(He.el),x(He),_,j,F),re.el=Fe.el,we===null&&Nw(_,Fe.el),de&&qt(de,j),(Te=re.props&&re.props.onVnodeUpdated)&&qt(()=>_n(Te,ce,re,ve),j)}else{let re;const{el:ue,props:de}=b,{bm:ce,m:ve,parent:we,root:Te,type:Fe}=_,He=Ii(b);Us(_,!1),ce&&xo(ce),!He&&(re=de&&de.onVnodeBeforeMount)&&_n(re,we,b),Us(_,!0);{Te.ce&&Te.ce._def.shadowRoot!==!1&&Te.ce._injectChildStyle(Fe);const pt=_.subTree=nf(_);M(null,pt,S,L,_,j,F),b.el=pt.el}if(ve&&qt(ve,j),!He&&(re=de&&de.onVnodeMounted)){const pt=b;qt(()=>_n(re,we,pt),j)}(b.shapeFlag&256||we&&Ii(we.vnode)&&we.vnode.shapeFlag&256)&&_.a&&qt(_.a,j),_.isMounted=!0,b=S=L=null}};_.scope.on();const W=_.effect=new Np(Y);_.scope.off();const K=_.update=W.run.bind(W),he=_.job=W.runIfDirty.bind(W);he.i=_,he.id=_.uid,W.scheduler=()=>nu(he),Us(_,!0),K()},De=(_,b,S)=>{b.component=_;const L=_.vnode.props;_.vnode=b,_.next=null,Ow(_,b.props,L,S),Uw(_,b.children,S),jn(),Qh(_),Hn()},Re=(_,b,S,L,j,F,X,Y,W=!1)=>{const K=_&&_.children,he=_?_.shapeFlag:0,re=b.children,{patchFlag:ue,shapeFlag:de}=b;if(ue>0){if(ue&128){jt(K,re,S,L,j,F,X,Y,W);return}else if(ue&256){dt(K,re,S,L,j,F,X,Y,W);return}}de&8?(he&16&&ne(K,j,F),re!==K&&f(S,re)):he&16?de&16?jt(K,re,S,L,j,F,X,Y,W):ne(K,j,F,!0):(he&8&&f(S,""),de&16&&y(re,S,L,j,F,X,Y,W))},dt=(_,b,S,L,j,F,X,Y,W)=>{_=_||Ir,b=b||Ir;const K=_.length,he=b.length,re=Math.min(K,he);let ue;for(ue=0;ue<re;ue++){const de=b[ue]=W?as(b[ue]):wn(b[ue]);M(_[ue],de,S,null,j,F,X,Y,W)}K>he?ne(_,j,F,!0,!1,re):y(b,S,L,j,F,X,Y,W,re)},jt=(_,b,S,L,j,F,X,Y,W)=>{let K=0;const he=b.length;let re=_.length-1,ue=he-1;for(;K<=re&&K<=ue;){const de=_[K],ce=b[K]=W?as(b[K]):wn(b[K]);if(di(de,ce))M(de,ce,S,null,j,F,X,Y,W);else break;K++}for(;K<=re&&K<=ue;){const de=_[re],ce=b[ue]=W?as(b[ue]):wn(b[ue]);if(di(de,ce))M(de,ce,S,null,j,F,X,Y,W);else break;re--,ue--}if(K>re){if(K<=ue){const de=ue+1,ce=de<he?b[de].el:L;for(;K<=ue;)M(null,b[K]=W?as(b[K]):wn(b[K]),S,ce,j,F,X,Y,W),K++}}else if(K>ue)for(;K<=re;)at(_[K],j,F,!0),K++;else{const de=K,ce=K,ve=new Map;for(K=ce;K<=ue;K++){const tt=b[K]=W?as(b[K]):wn(b[K]);tt.key!=null&&ve.set(tt.key,K)}let we,Te=0;const Fe=ue-ce+1;let He=!1,pt=0;const yt=new Array(Fe);for(K=0;K<Fe;K++)yt[K]=0;for(K=de;K<=re;K++){const tt=_[K];if(Te>=Fe){at(tt,j,F,!0);continue}let lt;if(tt.key!=null)lt=ve.get(tt.key);else for(we=ce;we<=ue;we++)if(yt[we-ce]===0&&di(tt,b[we])){lt=we;break}lt===void 0?at(tt,j,F,!0):(yt[lt-ce]=K+1,lt>=pt?pt=lt:He=!0,M(tt,b[lt],S,null,j,F,X,Y,W),Te++)}const Kt=He?Hw(yt):Ir;for(we=Kt.length-1,K=Fe-1;K>=0;K--){const tt=ce+K,lt=b[tt],xs=b[tt+1],Yn=tt+1<he?xs.el||xs.placeholder:L;yt[K]===0?M(null,lt,S,Yn,j,F,X,Y,W):He&&(we<0||K!==Kt[we]?Nt(lt,S,Yn,2):we--)}}},Nt=(_,b,S,L,j=null)=>{const{el:F,type:X,transition:Y,children:W,shapeFlag:K}=_;if(K&6){Nt(_.component.subTree,b,S,L);return}if(K&128){_.suspense.move(b,S,L);return}if(K&64){X.move(_,b,S,le);return}if(X===Qe){s(F,b,S);for(let re=0;re<W.length;re++)Nt(W[re],b,S,L);s(_.anchor,b,S);return}if(X===Do){U(_,b,S);return}if(L!==2&&K&1&&Y)if(L===0)Y.beforeEnter(F),s(F,b,S),qt(()=>Y.enter(F),j);else{const{leave:re,delayLeave:ue,afterLeave:de}=Y,ce=()=>{_.ctx.isUnmounted?r(F):s(F,b,S)},ve=()=>{F._isLeaving&&F[tw](!0),re(F,()=>{ce(),de&&de()})};ue?ue(F,ce,ve):ve()}else s(F,b,S)},at=(_,b,S,L=!1,j=!1)=>{const{type:F,props:X,ref:Y,children:W,dynamicChildren:K,shapeFlag:he,patchFlag:re,dirs:ue,cacheIndex:de}=_;if(re===-2&&(j=!1),Y!=null&&(jn(),Ti(Y,null,S,_,!0),Hn()),de!=null&&(b.renderCache[de]=void 0),he&256){b.ctx.deactivate(_);return}const ce=he&1&&ue,ve=!Ii(_);let we;if(ve&&(we=X&&X.onVnodeBeforeUnmount)&&_n(we,b,_),he&6)k(_.component,S,L);else{if(he&128){_.suspense.unmount(S,L);return}ce&&Fs(_,null,b,"beforeUnmount"),he&64?_.type.remove(_,b,S,le,L):K&&!K.hasOnce&&(F!==Qe||re>0&&re&64)?ne(K,b,S,!1,!0):(F===Qe&&re&384||!j&&he&16)&&ne(W,b,S),L&&ee(_)}(ve&&(we=X&&X.onVnodeUnmounted)||ce)&&qt(()=>{we&&_n(we,b,_),ce&&Fs(_,null,b,"unmounted")},S)},ee=_=>{const{type:b,el:S,anchor:L,transition:j}=_;if(b===Qe){O(S,L);return}if(b===Do){J(_);return}const F=()=>{r(S),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(_.shapeFlag&1&&j&&!j.persisted){const{leave:X,delayLeave:Y}=j,W=()=>X(S,F);Y?Y(_.el,F,W):W()}else F()},O=(_,b)=>{let S;for(;_!==b;)S=m(_),r(_),_=S;r(b)},k=(_,b,S)=>{const{bum:L,scope:j,job:F,subTree:X,um:Y,m:W,a:K}=_;of(W),of(K),L&&xo(L),j.stop(),F&&(F.flags|=8,at(X,_,b,S)),Y&&qt(Y,b),qt(()=>{_.isUnmounted=!0},b)},ne=(_,b,S,L=!1,j=!1,F=0)=>{for(let X=F;X<_.length;X++)at(_[X],b,S,L,j)},x=_=>{if(_.shapeFlag&6)return x(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const b=m(_.anchor||_.el),S=b&&b[Zv];return S?m(S):b};let q=!1;const Z=(_,b,S)=>{_==null?b._vnode&&at(b._vnode,null,null,!0):M(b._vnode||null,_,b,null,null,null,S),b._vnode=_,q||(q=!0,Qh(),Xp(),q=!1)},le={p:M,um:at,m:Nt,r:ee,mt:je,mc:y,pc:Re,pbc:R,n:x,o:t};return{render:Z,hydrate:void 0,createApp:Iw(Z)}}function kl({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Us({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function jw(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Em(t,e,n=!1){const s=t.children,r=e.children;if(_e(s)&&_e(r))for(let i=0;i<s.length;i++){const o=s[i];let l=r[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[i]=as(r[i]),l.el=o.el),!n&&l.patchFlag!==-2&&Em(o,l)),l.type===Oa&&l.patchFlag!==-1&&(l.el=o.el),l.type===Es&&!l.el&&(l.el=o.el)}}function Hw(t){const e=t.slice(),n=[0];let s,r,i,o,l;const c=t.length;for(s=0;s<c;s++){const h=t[s];if(h!==0){if(r=n[n.length-1],t[r]<h){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)l=i+o>>1,t[n[l]]<h?i=l+1:o=l;h<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Tm(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Tm(e)}function of(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Im=t=>t.__isSuspense;function qw(t,e){e&&e.pendingBranch?_e(t)?e.effects.push(...t):e.effects.push(t):Xv(t)}const Qe=Symbol.for("v-fgt"),Oa=Symbol.for("v-txt"),Es=Symbol.for("v-cmt"),Do=Symbol.for("v-stc"),Ai=[];let Gt=null;function se(t=!1){Ai.push(Gt=t?null:[])}function zw(){Ai.pop(),Gt=Ai[Ai.length-1]||null}let Mi=1;function Yo(t,e=!1){Mi+=t,t<0&&Gt&&e&&(Gt.hasOnce=!0)}function bm(t){return t.dynamicChildren=Mi>0?Gt||Ir:null,zw(),Mi>0&&Gt&&Gt.push(t),t}function ie(t,e,n,s,r,i){return bm(T(t,e,n,s,r,i,!0))}function uc(t,e,n,s,r){return bm(Ge(t,e,n,s,r,!0))}function Jo(t){return t?t.__v_isVNode===!0:!1}function di(t,e){return t.type===e.type&&t.key===e.key}const Am=({key:t})=>t??null,No=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?it(t)||xt(t)||be(t)?{i:zt,r:t,k:e,f:!!n}:t:null);function T(t,e=null,n=null,s=0,r=null,i=t===Qe?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Am(e),ref:e&&No(e),scopeId:em,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:zt};return l?(ou(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=it(n)?8:16),Mi>0&&!o&&Gt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Gt.push(c),c}const Ge=Gw;function Gw(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===pw)&&(t=Es),Jo(t)){const l=Mr(t,e,!0);return n&&ou(l,n),Mi>0&&!i&&Gt&&(l.shapeFlag&6?Gt[Gt.indexOf(t)]=l:Gt.push(l)),l.patchFlag=-2,l}if(r0(t)&&(t=t.__vccOpts),e){e=Ww(e);let{class:l,style:c}=e;l&&!it(l)&&(e.class=Mt(l)),Be(c)&&(eu(c)&&!_e(c)&&(c=kt({},c)),e.style=Ps(c))}const o=it(t)?1:Im(t)?128:ew(t)?64:Be(t)?4:be(t)?2:0;return T(t,e,n,s,r,o,i,!0)}function Ww(t){return t?eu(t)||mm(t)?kt({},t):t:null}function Mr(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:l,transition:c}=t,h=e?Kw(r||{},e):r,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:h,key:h&&Am(h),ref:e&&e.ref?n&&i?_e(i)?i.concat(No(e)):[i,No(e)]:No(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Qe?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Mr(t.ssContent),ssFallback:t.ssFallback&&Mr(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&s&&su(f,c.clone(f)),f}function Tr(t=" ",e=0){return Ge(Oa,null,t,e)}function Rm(t,e){const n=Ge(Do,null,t);return n.staticCount=e,n}function ht(t="",e=!1){return e?(se(),uc(Es,null,t)):Ge(Es,null,t)}function wn(t){return t==null||typeof t=="boolean"?Ge(Es):_e(t)?Ge(Qe,null,t.slice()):Jo(t)?as(t):Ge(Oa,null,String(t))}function as(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Mr(t)}function ou(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(_e(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),ou(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!mm(e)?e._ctx=zt:r===3&&zt&&(zt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else be(e)?(e={default:e,_ctx:zt},n=32):(e=String(e),s&64?(n=16,e=[Tr(e)]):n=8);t.children=e,t.shapeFlag|=n}function Kw(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Mt([e.class,s.class]));else if(r==="style")e.style=Ps([e.style,s.style]);else if(Ia(r)){const i=e[r],o=s[r];o&&i!==o&&!(_e(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function _n(t,e,n,s=null){xn(t,e,7,[n,s])}const Qw=cm();let Yw=0;function Jw(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||Qw,i={uid:Yw++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Tv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:_m(s,r),emitsOptions:fm(s,r),emit:null,emitted:null,propsDefaults:$e,inheritAttrs:s.inheritAttrs,ctx:$e,data:$e,props:$e,attrs:$e,slots:$e,refs:$e,setupState:$e,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Cw.bind(null,i),t.ce&&t.ce(i),i}let Ct=null;const Xw=()=>Ct||zt;let Xo,hc;{const t=Ca(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};Xo=e("__VUE_INSTANCE_SETTERS__",n=>Ct=n),hc=e("__VUE_SSR_SETTERS__",n=>Li=n)}const Ji=t=>{const e=Ct;return Xo(t),t.scope.on(),()=>{t.scope.off(),Xo(e)}},af=()=>{Ct&&Ct.scope.off(),Xo(null)};function Sm(t){return t.vnode.shapeFlag&4}let Li=!1;function Zw(t,e=!1,n=!1){e&&hc(e);const{props:s,children:r}=t.vnode,i=Sm(t);Vw(t,s,i,e),Fw(t,r,n||e);const o=i?e0(t,e):void 0;return e&&hc(!1),o}function e0(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,gw);const{setup:s}=n;if(s){jn();const r=t.setupContext=s.length>1?n0(t):null,i=Ji(t),o=Qi(s,t,0,[t.props,r]),l=Rp(o);if(Hn(),i(),(l||t.sp)&&!Ii(t)&&nm(t),l){if(o.then(af,af),e)return o.then(c=>{lf(t,c)}).catch(c=>{Da(c,t,0)});t.asyncDep=o}else lf(t,o)}else Cm(t)}function lf(t,e,n){be(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Be(e)&&(t.setupState=Qp(e)),Cm(t)}function Cm(t,e,n){const s=t.type;t.render||(t.render=s.render||En);{const r=Ji(t);jn();try{_w(t)}finally{Hn(),r()}}}const t0={get(t,e){return Rt(t,"get",""),t[e]}};function n0(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,t0),slots:t.slots,emit:t.emit,expose:e}}function Ma(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Qp(jv(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in bi)return bi[n](t)},has(e,n){return n in e||n in bi}})):t.proxy}function s0(t,e=!0){return be(t)?t.displayName||t.name:t.name||e&&t.__name}function r0(t){return be(t)&&"__vccOpts"in t}const Pt=(t,e)=>Wv(t,e,Li);function Pm(t,e,n){try{Yo(-1);const s=arguments.length;return s===2?Be(e)&&!_e(e)?Jo(e)?Ge(t,null,[e]):Ge(t,e):Ge(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Jo(n)&&(n=[n]),Ge(t,e,n))}finally{Yo(1)}}const i0="3.5.25";let fc;const cf=typeof window<"u"&&window.trustedTypes;if(cf)try{fc=cf.createPolicy("vue",{createHTML:t=>t})}catch{}const xm=fc?t=>fc.createHTML(t):t=>t,o0="http://www.w3.org/2000/svg",a0="http://www.w3.org/1998/Math/MathML",Mn=typeof document<"u"?document:null,uf=Mn&&Mn.createElement("template"),l0={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Mn.createElementNS(o0,t):e==="mathml"?Mn.createElementNS(a0,t):n?Mn.createElement(t,{is:n}):Mn.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Mn.createTextNode(t),createComment:t=>Mn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Mn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{uf.innerHTML=xm(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const l=uf.content;if(s==="svg"||s==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},c0=Symbol("_vtc");function u0(t,e,n){const s=t[c0];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const hf=Symbol("_vod"),h0=Symbol("_vsh"),f0=Symbol(""),d0=/(?:^|;)\s*display\s*:/;function p0(t,e,n){const s=t.style,r=it(n);let i=!1;if(n&&!r){if(e)if(it(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&Vo(s,l,"")}else for(const o in e)n[o]==null&&Vo(s,o,"");for(const o in n)o==="display"&&(i=!0),Vo(s,o,n[o])}else if(r){if(e!==n){const o=s[f0];o&&(n+=";"+o),s.cssText=n,i=d0.test(n)}}else e&&t.removeAttribute("style");hf in t&&(t[hf]=i?s.display:"",t[h0]&&(s.display="none"))}const ff=/\s*!important$/;function Vo(t,e,n){if(_e(n))n.forEach(s=>Vo(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=m0(t,e);ff.test(n)?t.setProperty(sr(s),n.replace(ff,""),"important"):t[s]=n}}const df=["Webkit","Moz","ms"],Dl={};function m0(t,e){const n=Dl[e];if(n)return n;let s=tn(e);if(s!=="filter"&&s in t)return Dl[e]=s;s=Ra(s);for(let r=0;r<df.length;r++){const i=df[r]+s;if(i in t)return Dl[e]=i}return e}const pf="http://www.w3.org/1999/xlink";function mf(t,e,n,s,r,i=vv(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(pf,e.slice(6,e.length)):t.setAttributeNS(pf,e,n):n==null||i&&!xp(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Pn(n)?String(n):n)}function gf(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?xm(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=xp(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function js(t,e,n,s){t.addEventListener(e,n,s)}function g0(t,e,n,s){t.removeEventListener(e,n,s)}const _f=Symbol("_vei");function _0(t,e,n,s,r=null){const i=t[_f]||(t[_f]={}),o=i[e];if(s&&o)o.value=s;else{const[l,c]=y0(e);if(s){const h=i[e]=E0(s,r);js(t,l,h,c)}else o&&(g0(t,l,o,c),i[e]=void 0)}}const yf=/(?:Once|Passive|Capture)$/;function y0(t){let e;if(yf.test(t)){e={};let s;for(;s=t.match(yf);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):sr(t.slice(2)),e]}let Nl=0;const v0=Promise.resolve(),w0=()=>Nl||(v0.then(()=>Nl=0),Nl=Date.now());function E0(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;xn(T0(s,n.value),e,5,[s])};return n.value=t,n.attached=w0(),n}function T0(t,e){if(_e(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const vf=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,I0=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?u0(t,s,o):e==="style"?p0(t,n,s):Ia(e)?zc(e)||_0(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):b0(t,e,s,o))?(gf(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&mf(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!it(s))?gf(t,tn(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),mf(t,e,s,o))};function b0(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&vf(e)&&be(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return vf(e)&&it(n)?!1:e in t}const Zo=t=>{const e=t.props["onUpdate:modelValue"]||!1;return _e(e)?n=>xo(e,n):e};function A0(t){t.target.composing=!0}function wf(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Sr=Symbol("_assign");function Ef(t,e,n){return e&&(t=t.trim()),n&&(t=Sa(t)),t}const Vl={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[Sr]=Zo(r);const i=s||r.props&&r.props.type==="number";js(t,e?"change":"input",o=>{o.target.composing||t[Sr](Ef(t.value,n,i))}),(n||i)&&js(t,"change",()=>{t.value=Ef(t.value,n,i)}),e||(js(t,"compositionstart",A0),js(t,"compositionend",wf),js(t,"change",wf))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(t[Sr]=Zo(o),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?Sa(t.value):t.value,c=e??"";l!==c&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||r&&t.value.trim()===c)||(t.value=c))}},Ol={deep:!0,created(t,{value:e,modifiers:{number:n}},s){const r=ba(e);js(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Sa(ea(o)):ea(o));t[Sr](t.multiple?r?new Set(i):i:i[0]),t._assigning=!0,tu(()=>{t._assigning=!1})}),t[Sr]=Zo(s)},mounted(t,{value:e}){Tf(t,e)},beforeUpdate(t,e,n){t[Sr]=Zo(n)},updated(t,{value:e}){t._assigning||Tf(t,e)}};function Tf(t,e){const n=t.multiple,s=_e(e);if(!(n&&!s&&!ba(e))){for(let r=0,i=t.options.length;r<i;r++){const o=t.options[r],l=ea(o);if(n)if(s){const c=typeof l;c==="string"||c==="number"?o.selected=e.some(h=>String(h)===String(l)):o.selected=Ev(e,l)>-1}else o.selected=e.has(l);else if(Pa(ea(o),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function ea(t){return"_value"in t?t._value:t.value}const R0=["ctrl","shift","alt","meta"],S0={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>R0.some(n=>t[`${n}Key`]&&!e.includes(n))},If=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const l=S0[e[o]];if(l&&l(r,e))return}return t(r,...i)})},C0=kt({patchProp:I0},l0);let bf;function P0(){return bf||(bf=$w(C0))}const x0=(...t)=>{const e=P0().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=D0(s);if(!r)return;const i=e._component;!be(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,k0(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function k0(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function D0(t){return it(t)?document.querySelector(t):t}const La=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},N0={},V0={class:"min-h-screen w-full overflow-x-hidden"};function O0(t,e){const n=om("router-view");return se(),ie("div",V0,[Ge(n)])}const M0=La(N0,[["render",O0]]);const _r=typeof document<"u";function km(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function L0(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&km(t.default)}const Ne=Object.assign;function Ml(t,e){const n={};for(const s in e){const r=e[s];n[s]=hn(r)?r.map(t):t(r)}return n}const Ri=()=>{},hn=Array.isArray;function Af(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}const Dm=/#/g,F0=/&/g,U0=/\//g,$0=/=/g,B0=/\?/g,Nm=/\+/g,j0=/%5B/g,H0=/%5D/g,Vm=/%5E/g,q0=/%60/g,Om=/%7B/g,z0=/%7C/g,Mm=/%7D/g,G0=/%20/g;function au(t){return t==null?"":encodeURI(""+t).replace(z0,"|").replace(j0,"[").replace(H0,"]")}function W0(t){return au(t).replace(Om,"{").replace(Mm,"}").replace(Vm,"^")}function dc(t){return au(t).replace(Nm,"%2B").replace(G0,"+").replace(Dm,"%23").replace(F0,"%26").replace(q0,"`").replace(Om,"{").replace(Mm,"}").replace(Vm,"^")}function K0(t){return dc(t).replace($0,"%3D")}function Q0(t){return au(t).replace(Dm,"%23").replace(B0,"%3F")}function Y0(t){return Q0(t).replace(U0,"%2F")}function Fi(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const J0=/\/$/,X0=t=>t.replace(J0,"");function Ll(t,e,n="/"){let s,r={},i="",o="";const l=e.indexOf("#");let c=e.indexOf("?");return c=l>=0&&c>l?-1:c,c>=0&&(s=e.slice(0,c),i=e.slice(c,l>0?l:e.length),r=t(i.slice(1))),l>=0&&(s=s||e.slice(0,l),o=e.slice(l,e.length)),s=nE(s??e,n),{fullPath:s+i+o,path:s,query:r,hash:Fi(o)}}function Z0(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Rf(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function eE(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&Lr(e.matched[s],n.matched[r])&&Lm(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Lr(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Lm(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!tE(t[n],e[n]))return!1;return!0}function tE(t,e){return hn(t)?Sf(t,e):hn(e)?Sf(e,t):t===e}function Sf(t,e){return hn(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function nE(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,l;for(o=0;o<s.length;o++)if(l=s[o],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const ss={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let pc=function(t){return t.pop="pop",t.push="push",t}({}),Fl=function(t){return t.back="back",t.forward="forward",t.unknown="",t}({});function sE(t){if(!t)if(_r){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),X0(t)}const rE=/^[^#]+#/;function iE(t,e){return t.replace(rE,"#")+e}function oE(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const Fa=()=>({left:window.scrollX,top:window.scrollY});function aE(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=oE(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Cf(t,e){return(history.state?history.state.position-e:-1)+t}const mc=new Map;function lE(t,e){mc.set(t,e)}function cE(t){const e=mc.get(t);return mc.delete(t),e}function uE(t){return typeof t=="string"||t&&typeof t=="object"}function Fm(t){return typeof t=="string"||typeof t=="symbol"}let Ze=function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t}({});const Um=Symbol("");Ze.MATCHER_NOT_FOUND+"",Ze.NAVIGATION_GUARD_REDIRECT+"",Ze.NAVIGATION_ABORTED+"",Ze.NAVIGATION_CANCELLED+"",Ze.NAVIGATION_DUPLICATED+"";function Fr(t,e){return Ne(new Error,{type:t,[Um]:!0},e)}function On(t,e){return t instanceof Error&&Um in t&&(e==null||!!(t.type&e))}const hE=["params","query","hash"];function fE(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of hE)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function dE(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(Nm," "),i=r.indexOf("="),o=Fi(i<0?r:r.slice(0,i)),l=i<0?null:Fi(r.slice(i+1));if(o in e){let c=e[o];hn(c)||(c=e[o]=[c]),c.push(l)}else e[o]=l}return e}function Pf(t){let e="";for(let n in t){const s=t[n];if(n=K0(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(hn(s)?s.map(r=>r&&dc(r)):[s&&dc(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function pE(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=hn(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const mE=Symbol(""),xf=Symbol(""),Ua=Symbol(""),$m=Symbol(""),gc=Symbol("");function pi(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function ls(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((l,c)=>{const h=m=>{m===!1?c(Fr(Ze.NAVIGATION_ABORTED,{from:n,to:e})):m instanceof Error?c(m):uE(m)?c(Fr(Ze.NAVIGATION_GUARD_REDIRECT,{from:e,to:m})):(o&&s.enterCallbacks[r]===o&&typeof m=="function"&&o.push(m),l())},f=i(()=>t.call(s&&s.instances[r],e,n,h));let p=Promise.resolve(f);t.length<3&&(p=p.then(h)),p.catch(m=>c(m))})}function Ul(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const l in o.components){let c=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(km(c)){const h=(c.__vccOpts||c)[e];h&&i.push(ls(h,n,s,o,l,r))}else{let h=c();i.push(()=>h.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const p=L0(f)?f.default:f;o.mods[l]=f,o.components[l]=p;const m=(p.__vccOpts||p)[e];return m&&ls(m,n,s,o,l,r)()}))}}return i}function gE(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const l=e.matched[o];l&&(t.matched.find(h=>Lr(h,l))?s.push(l):n.push(l));const c=t.matched[o];c&&(e.matched.find(h=>Lr(h,c))||r.push(c))}return[n,s,r]}let _E=()=>location.protocol+"//"+location.host;function Bm(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,l=r.slice(o);return l[0]!=="/"&&(l="/"+l),Rf(l,"")}return Rf(n,t)+s+r}function yE(t,e,n,s){let r=[],i=[],o=null;const l=({state:m})=>{const w=Bm(t,location),N=n.value,M=e.value;let $=0;if(m){if(n.value=w,e.value=m,o&&o===N){o=null;return}$=M?m.position-M.position:0}else s(w);r.forEach(Q=>{Q(n.value,N,{delta:$,type:pc.pop,direction:$?$>0?Fl.forward:Fl.back:Fl.unknown})})};function c(){o=n.value}function h(m){r.push(m);const w=()=>{const N=r.indexOf(m);N>-1&&r.splice(N,1)};return i.push(w),w}function f(){if(document.visibilityState==="hidden"){const{history:m}=window;if(!m.state)return;m.replaceState(Ne({},m.state,{scroll:Fa()}),"")}}function p(){for(const m of i)m();i=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:c,listen:h,destroy:p}}function kf(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?Fa():null}}function vE(t){const{history:e,location:n}=window,s={value:Bm(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,h,f){const p=t.indexOf("#"),m=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+c:_E()+t+c;try{e[f?"replaceState":"pushState"](h,"",m),r.value=h}catch(w){console.error(w),n[f?"replace":"assign"](m)}}function o(c,h){i(c,Ne({},e.state,kf(r.value.back,c,r.value.forward,!0),h,{position:r.value.position}),!0),s.value=c}function l(c,h){const f=Ne({},r.value,e.state,{forward:c,scroll:Fa()});i(f.current,f,!0),i(c,Ne({},kf(s.value,c,null),{position:f.position+1},h),!1),s.value=c}return{location:s,state:r,push:l,replace:o}}function wE(t){t=sE(t);const e=vE(t),n=yE(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=Ne({location:"",base:t,go:s,createHref:iE.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function EE(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),wE(t)}let Hs=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t}({});var ut=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t}(ut||{});const TE={type:Hs.Static,value:""},IE=/[a-zA-Z0-9_]/;function bE(t){if(!t)return[[]];if(t==="/")return[[TE]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(w){throw new Error(`ERR (${n})/"${h}": ${w}`)}let n=ut.Static,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let l=0,c,h="",f="";function p(){h&&(n===ut.Static?i.push({type:Hs.Static,value:h}):n===ut.Param||n===ut.ParamRegExp||n===ut.ParamRegExpEnd?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Hs.Param,value:h,regexp:f,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),h="")}function m(){h+=c}for(;l<t.length;){if(c=t[l++],c==="\\"&&n!==ut.ParamRegExp){s=n,n=ut.EscapeNext;continue}switch(n){case ut.Static:c==="/"?(h&&p(),o()):c===":"?(p(),n=ut.Param):m();break;case ut.EscapeNext:m(),n=s;break;case ut.Param:c==="("?n=ut.ParamRegExp:IE.test(c)?m():(p(),n=ut.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case ut.ParamRegExp:c===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+c:n=ut.ParamRegExpEnd:f+=c;break;case ut.ParamRegExpEnd:p(),n=ut.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--,f="";break;default:e("Unknown state");break}}return n===ut.ParamRegExp&&e(`Unfinished custom RegExp for param "${h}"`),p(),o(),r}const Df="[^/]+?",AE={sensitive:!1,strict:!1,start:!0,end:!0};var Ot=function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t}(Ot||{});const RE=/[.+*?^${}()[\]/\\]/g;function SE(t,e){const n=Ne({},AE,e),s=[];let r=n.start?"^":"";const i=[];for(const h of t){const f=h.length?[]:[Ot.Root];n.strict&&!h.length&&(r+="/");for(let p=0;p<h.length;p++){const m=h[p];let w=Ot.Segment+(n.sensitive?Ot.BonusCaseSensitive:0);if(m.type===Hs.Static)p||(r+="/"),r+=m.value.replace(RE,"\\$&"),w+=Ot.Static;else if(m.type===Hs.Param){const{value:N,repeatable:M,optional:$,regexp:Q}=m;i.push({name:N,repeatable:M,optional:$});const V=Q||Df;if(V!==Df){w+=Ot.BonusCustomRegExp;try{`${V}`}catch(J){throw new Error(`Invalid custom RegExp for param "${N}" (${V}): `+J.message)}}let U=M?`((?:${V})(?:/(?:${V}))*)`:`(${V})`;p||(U=$&&h.length<2?`(?:/${U})`:"/"+U),$&&(U+="?"),r+=U,w+=Ot.Dynamic,$&&(w+=Ot.BonusOptional),M&&(w+=Ot.BonusRepeatable),V===".*"&&(w+=Ot.BonusWildcard)}f.push(w)}s.push(f)}if(n.strict&&n.end){const h=s.length-1;s[h][s[h].length-1]+=Ot.BonusStrict}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function l(h){const f=h.match(o),p={};if(!f)return null;for(let m=1;m<f.length;m++){const w=f[m]||"",N=i[m-1];p[N.name]=w&&N.repeatable?w.split("/"):w}return p}function c(h){let f="",p=!1;for(const m of t){(!p||!f.endsWith("/"))&&(f+="/"),p=!1;for(const w of m)if(w.type===Hs.Static)f+=w.value;else if(w.type===Hs.Param){const{value:N,repeatable:M,optional:$}=w,Q=N in h?h[N]:"";if(hn(Q)&&!M)throw new Error(`Provided param "${N}" is an array but it is not repeatable (* or + modifiers)`);const V=hn(Q)?Q.join("/"):Q;if(!V)if($)m.length<2&&(f.endsWith("/")?f=f.slice(0,-1):p=!0);else throw new Error(`Missing required param "${N}"`);f+=V}}return f||"/"}return{re:o,score:s,keys:i,parse:l,stringify:c}}function CE(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===Ot.Static+Ot.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Ot.Static+Ot.Segment?1:-1:0}function jm(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=CE(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(Nf(s))return 1;if(Nf(r))return-1}return r.length-s.length}function Nf(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const PE={strict:!1,end:!0,sensitive:!1};function xE(t,e,n){const s=SE(bE(t.path),n),r=Ne(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function kE(t,e){const n=[],s=new Map;e=Af(PE,e);function r(p){return s.get(p)}function i(p,m,w){const N=!w,M=Of(p);M.aliasOf=w&&w.record;const $=Af(e,p),Q=[M];if("alias"in p){const J=typeof p.alias=="string"?[p.alias]:p.alias;for(const B of J)Q.push(Of(Ne({},M,{components:w?w.record.components:M.components,path:B,aliasOf:w?w.record:M})))}let V,U;for(const J of Q){const{path:B}=J;if(m&&B[0]!=="/"){const H=m.record.path,I=H[H.length-1]==="/"?"":"/";J.path=m.record.path+(B&&I+B)}if(V=xE(J,m,$),w?w.alias.push(V):(U=U||V,U!==V&&U.alias.push(V),N&&p.name&&!Mf(V)&&o(p.name)),Hm(V)&&c(V),M.children){const H=M.children;for(let I=0;I<H.length;I++)i(H[I],V,w&&w.children[I])}w=w||V}return U?()=>{o(U)}:Ri}function o(p){if(Fm(p)){const m=s.get(p);m&&(s.delete(p),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(p);m>-1&&(n.splice(m,1),p.record.name&&s.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function l(){return n}function c(p){const m=VE(p,n);n.splice(m,0,p),p.record.name&&!Mf(p)&&s.set(p.record.name,p)}function h(p,m){let w,N={},M,$;if("name"in p&&p.name){if(w=s.get(p.name),!w)throw Fr(Ze.MATCHER_NOT_FOUND,{location:p});$=w.record.name,N=Ne(Vf(m.params,w.keys.filter(U=>!U.optional).concat(w.parent?w.parent.keys.filter(U=>U.optional):[]).map(U=>U.name)),p.params&&Vf(p.params,w.keys.map(U=>U.name))),M=w.stringify(N)}else if(p.path!=null)M=p.path,w=n.find(U=>U.re.test(M)),w&&(N=w.parse(M),$=w.record.name);else{if(w=m.name?s.get(m.name):n.find(U=>U.re.test(m.path)),!w)throw Fr(Ze.MATCHER_NOT_FOUND,{location:p,currentLocation:m});$=w.record.name,N=Ne({},m.params,p.params),M=w.stringify(N)}const Q=[];let V=w;for(;V;)Q.unshift(V.record),V=V.parent;return{name:$,path:M,params:N,matched:Q,meta:NE(Q)}}t.forEach(p=>i(p));function f(){n.length=0,s.clear()}return{addRoute:i,resolve:h,removeRoute:o,clearRoutes:f,getRoutes:l,getRecordMatcher:r}}function Vf(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function Of(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:DE(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function DE(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function Mf(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function NE(t){return t.reduce((e,n)=>Ne(e,n.meta),{})}function VE(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;jm(t,e[i])<0?s=i:n=i+1}const r=OE(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function OE(t){let e=t;for(;e=e.parent;)if(Hm(e)&&jm(t,e)===0)return e}function Hm({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Lf(t){const e=Tn(Ua),n=Tn($m),s=Pt(()=>{const c=Bt(t.to);return e.resolve(c)}),r=Pt(()=>{const{matched:c}=s.value,{length:h}=c,f=c[h-1],p=n.matched;if(!f||!p.length)return-1;const m=p.findIndex(Lr.bind(null,f));if(m>-1)return m;const w=Ff(c[h-2]);return h>1&&Ff(f)===w&&p[p.length-1].path!==w?p.findIndex(Lr.bind(null,c[h-2])):m}),i=Pt(()=>r.value>-1&&$E(n.params,s.value.params)),o=Pt(()=>r.value>-1&&r.value===n.matched.length-1&&Lm(n.params,s.value.params));function l(c={}){if(UE(c)){const h=e[Bt(t.replace)?"replace":"push"](Bt(t.to)).catch(Ri);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:s,href:Pt(()=>s.value.href),isActive:i,isExactActive:o,navigate:l}}function ME(t){return t.length===1?t[0]:t}const LE=tm({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Lf,setup(t,{slots:e}){const n=ka(Lf(t)),{options:s}=Tn(Ua),r=Pt(()=>({[Uf(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Uf(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&ME(e.default(n));return t.custom?i:Pm("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),FE=LE;function UE(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function $E(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!hn(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function Ff(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Uf=(t,e,n)=>t??e??n,BE=tm({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=Tn(gc),r=Pt(()=>t.route||s.value),i=Tn(xf,0),o=Pt(()=>{let h=Bt(i);const{matched:f}=r.value;let p;for(;(p=f[h])&&!p.components;)h++;return h}),l=Pt(()=>r.value.matched[o.value]);ko(xf,Pt(()=>o.value+1)),ko(mE,l),ko(gc,r);const c=Se();return Qs(()=>[c.value,l.value,t.name],([h,f,p],[m,w,N])=>{f&&(f.instances[p]=h,w&&w!==f&&h&&h===m&&(f.leaveGuards.size||(f.leaveGuards=w.leaveGuards),f.updateGuards.size||(f.updateGuards=w.updateGuards))),h&&f&&(!w||!Lr(f,w)||!m)&&(f.enterCallbacks[p]||[]).forEach(M=>M(h))},{flush:"post"}),()=>{const h=r.value,f=t.name,p=l.value,m=p&&p.components[f];if(!m)return $f(n.default,{Component:m,route:h});const w=p.props[f],N=w?w===!0?h.params:typeof w=="function"?w(h):w:null,$=Pm(m,Ne({},N,e,{onVnodeUnmounted:Q=>{Q.component.isUnmounted&&(p.instances[f]=null)},ref:c}));return $f(n.default,{Component:$,route:h})||$}}});function $f(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const jE=BE;function HE(t){const e=kE(t.routes,t),n=t.parseQuery||dE,s=t.stringifyQuery||Pf,r=t.history,i=pi(),o=pi(),l=pi(),c=Hv(ss);let h=ss;_r&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Ml.bind(null,x=>""+x),p=Ml.bind(null,Y0),m=Ml.bind(null,Fi);function w(x,q){let Z,le;return Fm(x)?(Z=e.getRecordMatcher(x),le=q):le=x,e.addRoute(le,Z)}function N(x){const q=e.getRecordMatcher(x);q&&e.removeRoute(q)}function M(){return e.getRoutes().map(x=>x.record)}function $(x){return!!e.getRecordMatcher(x)}function Q(x,q){if(q=Ne({},q||c.value),typeof x=="string"){const S=Ll(n,x,q.path),L=e.resolve({path:S.path},q),j=r.createHref(S.fullPath);return Ne(S,L,{params:m(L.params),hash:Fi(S.hash),redirectedFrom:void 0,href:j})}let Z;if(x.path!=null)Z=Ne({},x,{path:Ll(n,x.path,q.path).path});else{const S=Ne({},x.params);for(const L in S)S[L]==null&&delete S[L];Z=Ne({},x,{params:p(S)}),q.params=p(q.params)}const le=e.resolve(Z,q),me=x.hash||"";le.params=f(m(le.params));const _=Z0(s,Ne({},x,{hash:W0(me),path:le.path})),b=r.createHref(_);return Ne({fullPath:_,hash:me,query:s===Pf?pE(x.query):x.query||{}},le,{redirectedFrom:void 0,href:b})}function V(x){return typeof x=="string"?Ll(n,x,c.value.path):Ne({},x)}function U(x,q){if(h!==x)return Fr(Ze.NAVIGATION_CANCELLED,{from:q,to:x})}function J(x){return I(x)}function B(x){return J(Ne(V(x),{replace:!0}))}function H(x,q){const Z=x.matched[x.matched.length-1];if(Z&&Z.redirect){const{redirect:le}=Z;let me=typeof le=="function"?le(x,q):le;return typeof me=="string"&&(me=me.includes("?")||me.includes("#")?me=V(me):{path:me},me.params={}),Ne({query:x.query,hash:x.hash,params:me.path!=null?{}:x.params},me)}}function I(x,q){const Z=h=Q(x),le=c.value,me=x.state,_=x.force,b=x.replace===!0,S=H(Z,le);if(S)return I(Ne(V(S),{state:typeof S=="object"?Ne({},me,S.state):me,force:_,replace:b}),q||Z);const L=Z;L.redirectedFrom=q;let j;return!_&&eE(s,le,Z)&&(j=Fr(Ze.NAVIGATION_DUPLICATED,{to:L,from:le}),Nt(le,le,!0,!1)),(j?Promise.resolve(j):R(L,le)).catch(F=>On(F)?On(F,Ze.NAVIGATION_GUARD_REDIRECT)?F:jt(F):Re(F,L,le)).then(F=>{if(F){if(On(F,Ze.NAVIGATION_GUARD_REDIRECT))return I(Ne({replace:b},V(F.to),{state:typeof F.to=="object"?Ne({},me,F.to.state):me,force:_}),q||L)}else F=C(L,le,!0,b,me);return A(L,le,F),F})}function y(x,q){const Z=U(x,q);return Z?Promise.reject(Z):Promise.resolve()}function v(x){const q=O.values().next().value;return q&&typeof q.runWithContext=="function"?q.runWithContext(x):x()}function R(x,q){let Z;const[le,me,_]=gE(x,q);Z=Ul(le.reverse(),"beforeRouteLeave",x,q);for(const S of le)S.leaveGuards.forEach(L=>{Z.push(ls(L,x,q))});const b=y.bind(null,x,q);return Z.push(b),ne(Z).then(()=>{Z=[];for(const S of i.list())Z.push(ls(S,x,q));return Z.push(b),ne(Z)}).then(()=>{Z=Ul(me,"beforeRouteUpdate",x,q);for(const S of me)S.updateGuards.forEach(L=>{Z.push(ls(L,x,q))});return Z.push(b),ne(Z)}).then(()=>{Z=[];for(const S of _)if(S.beforeEnter)if(hn(S.beforeEnter))for(const L of S.beforeEnter)Z.push(ls(L,x,q));else Z.push(ls(S.beforeEnter,x,q));return Z.push(b),ne(Z)}).then(()=>(x.matched.forEach(S=>S.enterCallbacks={}),Z=Ul(_,"beforeRouteEnter",x,q,v),Z.push(b),ne(Z))).then(()=>{Z=[];for(const S of o.list())Z.push(ls(S,x,q));return Z.push(b),ne(Z)}).catch(S=>On(S,Ze.NAVIGATION_CANCELLED)?S:Promise.reject(S))}function A(x,q,Z){l.list().forEach(le=>v(()=>le(x,q,Z)))}function C(x,q,Z,le,me){const _=U(x,q);if(_)return _;const b=q===ss,S=_r?history.state:{};Z&&(le||b?r.replace(x.fullPath,Ne({scroll:b&&S&&S.scroll},me)):r.push(x.fullPath,me)),c.value=x,Nt(x,q,Z,b),jt()}let E;function je(){E||(E=r.listen((x,q,Z)=>{if(!k.listening)return;const le=Q(x),me=H(le,k.currentRoute.value);if(me){I(Ne(me,{replace:!0,force:!0}),le).catch(Ri);return}h=le;const _=c.value;_r&&lE(Cf(_.fullPath,Z.delta),Fa()),R(le,_).catch(b=>On(b,Ze.NAVIGATION_ABORTED|Ze.NAVIGATION_CANCELLED)?b:On(b,Ze.NAVIGATION_GUARD_REDIRECT)?(I(Ne(V(b.to),{force:!0}),le).then(S=>{On(S,Ze.NAVIGATION_ABORTED|Ze.NAVIGATION_DUPLICATED)&&!Z.delta&&Z.type===pc.pop&&r.go(-1,!1)}).catch(Ri),Promise.reject()):(Z.delta&&r.go(-Z.delta,!1),Re(b,le,_))).then(b=>{b=b||C(le,_,!1),b&&(Z.delta&&!On(b,Ze.NAVIGATION_CANCELLED)?r.go(-Z.delta,!1):Z.type===pc.pop&&On(b,Ze.NAVIGATION_ABORTED|Ze.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),A(le,_,b)}).catch(Ri)}))}let ot=pi(),Je=pi(),De;function Re(x,q,Z){jt(x);const le=Je.list();return le.length?le.forEach(me=>me(x,q,Z)):console.error(x),Promise.reject(x)}function dt(){return De&&c.value!==ss?Promise.resolve():new Promise((x,q)=>{ot.add([x,q])})}function jt(x){return De||(De=!x,je(),ot.list().forEach(([q,Z])=>x?Z(x):q()),ot.reset()),x}function Nt(x,q,Z,le){const{scrollBehavior:me}=t;if(!_r||!me)return Promise.resolve();const _=!Z&&cE(Cf(x.fullPath,0))||(le||!Z)&&history.state&&history.state.scroll||null;return tu().then(()=>me(x,q,_)).then(b=>b&&aE(b)).catch(b=>Re(b,x,q))}const at=x=>r.go(x);let ee;const O=new Set,k={currentRoute:c,listening:!0,addRoute:w,removeRoute:N,clearRoutes:e.clearRoutes,hasRoute:$,getRoutes:M,resolve:Q,options:t,push:J,replace:B,go:at,back:()=>at(-1),forward:()=>at(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:Je.add,isReady:dt,install(x){x.component("RouterLink",FE),x.component("RouterView",jE),x.config.globalProperties.$router=k,Object.defineProperty(x.config.globalProperties,"$route",{enumerable:!0,get:()=>Bt(c)}),_r&&!ee&&c.value===ss&&(ee=!0,J(r.location).catch(le=>{}));const q={};for(const le in ss)Object.defineProperty(q,le,{get:()=>c.value[le],enumerable:!0});x.provide(Ua,k),x.provide($m,Wp(q)),x.provide(gc,c);const Z=x.unmount;O.add(x),x.unmount=function(){O.delete(x),O.size<1&&(h=ss,E&&E(),E=null,c.value=ss,ee=!1,De=!1),Z()}}};function ne(x){return x.reduce((q,Z)=>q.then(()=>v(Z)),Promise.resolve())}return k}function lu(){return Tn(Ua)}const qE="/HTF/assets/Logo_yellow-C2dq30_U.png",zE=()=>{};var Bf={};const qm=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},GE=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],l=t[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},zm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,l=o?t[r+1]:0,c=r+2<t.length,h=c?t[r+2]:0,f=i>>2,p=(i&3)<<4|l>>4;let m=(l&15)<<2|h>>6,w=h&63;c||(w=64,o||(m=64)),s.push(n[f],n[p],n[m],n[w])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(qm(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):GE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const h=r<t.length?n[t.charAt(r)]:64;++r;const p=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||l==null||h==null||p==null)throw new WE;const m=i<<2|l>>4;if(s.push(m),h!==64){const w=l<<4&240|h>>2;if(s.push(w),p!==64){const N=h<<6&192|p;s.push(N)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class WE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KE=function(t){const e=qm(t);return zm.encodeByteArray(e,!0)},ta=function(t){return KE(t).replace(/\./g,"")},Gm=function(t){try{return zm.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function QE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const YE=()=>QE().__FIREBASE_DEFAULTS__,JE=()=>{if(typeof process>"u"||typeof Bf>"u")return;const t=Bf.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},XE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Gm(t[1]);return e&&JSON.parse(e)},$a=()=>{try{return zE()||YE()||JE()||XE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Wm=t=>$a()?.emulatorHosts?.[t],ZE=t=>{const e=Wm(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Km=()=>$a()?.config,Qm=t=>$a()?.[`_${t}`];class eT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Gr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ym(t){return(await fetch(t,{credentials:"include"})).ok}function tT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ta(JSON.stringify(n)),ta(JSON.stringify(o)),""].join(".")}const Si={};function nT(){const t={prod:[],emulator:[]};for(const e of Object.keys(Si))Si[e]?t.emulator.push(e):t.prod.push(e);return t}function sT(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let jf=!1;function Jm(t,e){if(typeof window>"u"||typeof document>"u"||!Gr(window.location.host)||Si[t]===e||Si[t]||jf)return;Si[t]=e;function n(m){return`__firebase__banner__${m}`}const s="__firebase__banner",i=nT().prod.length>0;function o(){const m=document.getElementById(s);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,w){m.setAttribute("width","24"),m.setAttribute("id",w),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{jf=!0,o()},m}function f(m,w){m.setAttribute("id",w),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=sT(s),w=n("text"),N=document.getElementById(w)||document.createElement("span"),M=n("learnmore"),$=document.getElementById(M)||document.createElement("a"),Q=n("preprendIcon"),V=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const U=m.element;l(U),f($,M);const J=h();c(V,Q),U.append(V,N,$,J),document.body.appendChild(U)}i?(N.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function iT(){const t=$a()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Xm(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function aT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lT(){const t=Dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cT(){return!iT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Zm(){try{return typeof indexedDB=="object"}catch{return!1}}function eg(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}function uT(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const hT="FirebaseError";class pn extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=hT,Object.setPrototypeOf(this,pn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rr.prototype.create)}}class rr{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?fT(i,s):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new pn(r,l,s)}}function fT(t,e){return t.replace(dT,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const dT=/\{\$([^}]+)}/g;function pT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ts(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(Hf(i)&&Hf(o)){if(!Ts(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Hf(t){return t!==null&&typeof t=="object"}function Xi(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function mT(t,e){const n=new gT(t,e);return n.subscribe.bind(n)}class gT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");_T(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=$l),r.error===void 0&&(r.error=$l),r.complete===void 0&&(r.complete=$l);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _T(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function $l(){}const yT=1e3,vT=2,wT=4*60*60*1e3,ET=.5;function qf(t,e=yT,n=vT){const s=e*Math.pow(n,t),r=Math.round(ET*s*(Math.random()-.5)*2);return Math.min(wT,s+r)}function Tt(t){return t&&t._delegate?t._delegate:t}class fn{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Bs="[DEFAULT]";class TT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new eT;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bT(e))try{this.getOrInitializeService({instanceIdentifier:Bs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Bs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bs){return this.instances.has(e)}getOptions(e=Bs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:IT(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Bs){return this.component?this.component.multipleInstances?e:Bs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IT(t){return t===Bs?void 0:t}function bT(t){return t.instantiationMode==="EAGER"}class AT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new TT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const RT={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},ST=Ce.INFO,CT={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},PT=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=CT[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ba{constructor(e){this.name=e,this._logLevel=ST,this._logHandler=PT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const xT=(t,e)=>e.some(n=>t instanceof n);let zf,Gf;function kT(){return zf||(zf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DT(){return Gf||(Gf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tg=new WeakMap,_c=new WeakMap,ng=new WeakMap,Bl=new WeakMap,cu=new WeakMap;function NT(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ps(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&tg.set(n,t)}).catch(()=>{}),cu.set(e,t),e}function VT(t){if(_c.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});_c.set(t,e)}let yc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return _c.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ng.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ps(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function OT(t){yc=t(yc)}function MT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(jl(this),e,...n);return ng.set(s,e.sort?e.sort():[e]),ps(s)}:DT().includes(t)?function(...e){return t.apply(jl(this),e),ps(tg.get(this))}:function(...e){return ps(t.apply(jl(this),e))}}function LT(t){return typeof t=="function"?MT(t):(t instanceof IDBTransaction&&VT(t),xT(t,kT())?new Proxy(t,yc):t)}function ps(t){if(t instanceof IDBRequest)return NT(t);if(Bl.has(t))return Bl.get(t);const e=LT(t);return e!==t&&(Bl.set(t,e),cu.set(e,t)),e}const jl=t=>cu.get(t);function sg(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),l=ps(o);return s&&o.addEventListener("upgradeneeded",c=>{s(ps(o.result),c.oldVersion,c.newVersion,ps(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const FT=["get","getKey","getAll","getAllKeys","count"],UT=["put","add","delete","clear"],Hl=new Map;function Wf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hl.get(e))return Hl.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=UT.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||FT.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,r?"readwrite":"readonly");let h=c.store;return s&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&c.done]))[0]};return Hl.set(e,i),i}OT(t=>({...t,get:(e,n,s)=>Wf(e,n)||t.get(e,n,s),has:(e,n)=>!!Wf(e,n)||t.has(e,n)}));class $T{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(BT(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function BT(t){return t.getComponent()?.type==="VERSION"}const vc="@firebase/app",Kf="0.14.6";const zn=new Ba("@firebase/app"),jT="@firebase/app-compat",HT="@firebase/analytics-compat",qT="@firebase/analytics",zT="@firebase/app-check-compat",GT="@firebase/app-check",WT="@firebase/auth",KT="@firebase/auth-compat",QT="@firebase/database",YT="@firebase/data-connect",JT="@firebase/database-compat",XT="@firebase/functions",ZT="@firebase/functions-compat",eI="@firebase/installations",tI="@firebase/installations-compat",nI="@firebase/messaging",sI="@firebase/messaging-compat",rI="@firebase/performance",iI="@firebase/performance-compat",oI="@firebase/remote-config",aI="@firebase/remote-config-compat",lI="@firebase/storage",cI="@firebase/storage-compat",uI="@firebase/firestore",hI="@firebase/ai",fI="@firebase/firestore-compat",dI="firebase",pI="12.6.0";const wc="[DEFAULT]",mI={[vc]:"fire-core",[jT]:"fire-core-compat",[qT]:"fire-analytics",[HT]:"fire-analytics-compat",[GT]:"fire-app-check",[zT]:"fire-app-check-compat",[WT]:"fire-auth",[KT]:"fire-auth-compat",[QT]:"fire-rtdb",[YT]:"fire-data-connect",[JT]:"fire-rtdb-compat",[XT]:"fire-fn",[ZT]:"fire-fn-compat",[eI]:"fire-iid",[tI]:"fire-iid-compat",[nI]:"fire-fcm",[sI]:"fire-fcm-compat",[rI]:"fire-perf",[iI]:"fire-perf-compat",[oI]:"fire-rc",[aI]:"fire-rc-compat",[lI]:"fire-gcs",[cI]:"fire-gcs-compat",[uI]:"fire-fst",[fI]:"fire-fst-compat",[hI]:"fire-vertex","fire-js":"fire-js",[dI]:"fire-js-all"};const na=new Map,gI=new Map,Ec=new Map;function Qf(t,e){try{t.container.addComponent(e)}catch(n){zn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function kn(t){const e=t.name;if(Ec.has(e))return zn.debug(`There were multiple attempts to register component ${e}.`),!1;Ec.set(e,t);for(const n of na.values())Qf(n,t);for(const n of gI.values())Qf(n,t);return!0}function ir(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function nn(t){return t==null?!1:t.settings!==void 0}const _I={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ms=new rr("app","Firebase",_I);class yI{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new fn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ms.create("app-deleted",{appName:this._name})}}const Wr=pI;function rg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:wc,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw ms.create("bad-app-name",{appName:String(r)});if(n||(n=Km()),!n)throw ms.create("no-options");const i=na.get(r);if(i){if(Ts(n,i.options)&&Ts(s,i.config))return i;throw ms.create("duplicate-app",{appName:r})}const o=new AT(r);for(const c of Ec.values())o.addComponent(c);const l=new yI(n,s,o);return na.set(r,l),l}function uu(t=wc){const e=na.get(t);if(!e&&t===wc&&Km())return rg();if(!e)throw ms.create("no-app",{appName:t});return e}function en(t,e,n){let s=mI[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zn.warn(o.join(" "));return}kn(new fn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const vI="firebase-heartbeat-database",wI=1,Ui="firebase-heartbeat-store";let ql=null;function ig(){return ql||(ql=sg(vI,wI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ui)}catch(n){console.warn(n)}}}}).catch(t=>{throw ms.create("idb-open",{originalErrorMessage:t.message})})),ql}async function EI(t){try{const n=(await ig()).transaction(Ui),s=await n.objectStore(Ui).get(og(t));return await n.done,s}catch(e){if(e instanceof pn)zn.warn(e.message);else{const n=ms.create("idb-get",{originalErrorMessage:e?.message});zn.warn(n.message)}}}async function Yf(t,e){try{const s=(await ig()).transaction(Ui,"readwrite");await s.objectStore(Ui).put(e,og(t)),await s.done}catch(n){if(n instanceof pn)zn.warn(n.message);else{const s=ms.create("idb-set",{originalErrorMessage:n?.message});zn.warn(s.message)}}}function og(t){return`${t.name}!${t.options.appId}`}const TI=1024,II=30;class bI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new RI(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Jf();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>II){const r=SI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){zn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Jf(),{heartbeatsToSend:n,unsentEntries:s}=AI(this._heartbeatsCache.heartbeats),r=ta(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return zn.warn(e),""}}}function Jf(){return new Date().toISOString().substring(0,10)}function AI(t,e=TI){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),Xf(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Xf(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class RI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Zm()?eg().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await EI(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Yf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Yf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Xf(t){return ta(JSON.stringify({version:2,heartbeats:t})).length}function SI(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}function CI(t){kn(new fn("platform-logger",e=>new $T(e),"PRIVATE")),kn(new fn("heartbeat",e=>new bI(e),"PRIVATE")),en(vc,Kf,t),en(vc,Kf,"esm2020"),en("fire-js","")}CI("");var PI="firebase",xI="12.6.0";en(PI,xI,"app");const ag="@firebase/installations",hu="0.6.19";const lg=1e4,cg=`w:${hu}`,ug="FIS_v2",kI="https://firebaseinstallations.googleapis.com/v1",DI=60*60*1e3,NI="installations",VI="Installations";const OI={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Xs=new rr(NI,VI,OI);function hg(t){return t instanceof pn&&t.code.includes("request-failed")}function fg({projectId:t}){return`${kI}/projects/${t}/installations`}function dg(t){return{token:t.token,requestStatus:2,expiresIn:LI(t.expiresIn),creationTime:Date.now()}}async function pg(t,e){const s=(await e.json()).error;return Xs.create("request-failed",{requestName:t,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function mg({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function MI(t,{refreshToken:e}){const n=mg(t);return n.append("Authorization",FI(e)),n}async function gg(t){const e=await t();return e.status>=500&&e.status<600?t():e}function LI(t){return Number(t.replace("s","000"))}function FI(t){return`${ug} ${t}`}async function UI({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const s=fg(t),r=mg(t),i=e.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&r.append("x-firebase-client",h)}const o={fid:n,authVersion:ug,appId:t.appId,sdkVersion:cg},l={method:"POST",headers:r,body:JSON.stringify(o)},c=await gg(()=>fetch(s,l));if(c.ok){const h=await c.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:dg(h.authToken)}}else throw await pg("Create Installation",c)}function _g(t){return new Promise(e=>{setTimeout(e,t)})}function $I(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}const BI=/^[cdef][\w-]{21}$/,Tc="";function jI(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=HI(t);return BI.test(n)?n:Tc}catch{return Tc}}function HI(t){return $I(t).substr(0,22)}function ja(t){return`${t.appName}!${t.appId}`}const yg=new Map;function vg(t,e){const n=ja(t);wg(n,e),qI(n,e)}function wg(t,e){const n=yg.get(t);if(n)for(const s of n)s(e)}function qI(t,e){const n=zI();n&&n.postMessage({key:t,fid:e}),GI()}let qs=null;function zI(){return!qs&&"BroadcastChannel"in self&&(qs=new BroadcastChannel("[Firebase] FID Change"),qs.onmessage=t=>{wg(t.data.key,t.data.fid)}),qs}function GI(){yg.size===0&&qs&&(qs.close(),qs=null)}const WI="firebase-installations-database",KI=1,Zs="firebase-installations-store";let zl=null;function fu(){return zl||(zl=sg(WI,KI,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Zs)}}})),zl}async function sa(t,e){const n=ja(t),r=(await fu()).transaction(Zs,"readwrite"),i=r.objectStore(Zs),o=await i.get(n);return await i.put(e,n),await r.done,(!o||o.fid!==e.fid)&&vg(t,e.fid),e}async function Eg(t){const e=ja(t),s=(await fu()).transaction(Zs,"readwrite");await s.objectStore(Zs).delete(e),await s.done}async function Ha(t,e){const n=ja(t),r=(await fu()).transaction(Zs,"readwrite"),i=r.objectStore(Zs),o=await i.get(n),l=e(o);return l===void 0?await i.delete(n):await i.put(l,n),await r.done,l&&(!o||o.fid!==l.fid)&&vg(t,l.fid),l}async function du(t){let e;const n=await Ha(t.appConfig,s=>{const r=QI(s),i=YI(t,r);return e=i.registrationPromise,i.installationEntry});return n.fid===Tc?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function QI(t){const e=t||{fid:jI(),registrationStatus:0};return Tg(e)}function YI(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Xs.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=JI(t,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:XI(t)}:{installationEntry:e}}async function JI(t,e){try{const n=await UI(t,e);return sa(t.appConfig,n)}catch(n){throw hg(n)&&n.customData.serverCode===409?await Eg(t.appConfig):await sa(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function XI(t){let e=await Zf(t.appConfig);for(;e.registrationStatus===1;)await _g(100),e=await Zf(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await du(t);return s||n}return e}function Zf(t){return Ha(t,e=>{if(!e)throw Xs.create("installation-not-found");return Tg(e)})}function Tg(t){return ZI(t)?{fid:t.fid,registrationStatus:0}:t}function ZI(t){return t.registrationStatus===1&&t.registrationTime+lg<Date.now()}async function eb({appConfig:t,heartbeatServiceProvider:e},n){const s=tb(t,n),r=MI(t,n),i=e.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&r.append("x-firebase-client",h)}const o={installation:{sdkVersion:cg,appId:t.appId}},l={method:"POST",headers:r,body:JSON.stringify(o)},c=await gg(()=>fetch(s,l));if(c.ok){const h=await c.json();return dg(h)}else throw await pg("Generate Auth Token",c)}function tb(t,{fid:e}){return`${fg(t)}/${e}/authTokens:generate`}async function pu(t,e=!1){let n;const s=await Ha(t.appConfig,i=>{if(!Ig(i))throw Xs.create("not-registered");const o=i.authToken;if(!e&&rb(o))return i;if(o.requestStatus===1)return n=nb(t,e),i;{if(!navigator.onLine)throw Xs.create("app-offline");const l=ob(i);return n=sb(t,l),l}});return n?await n:s.authToken}async function nb(t,e){let n=await ed(t.appConfig);for(;n.authToken.requestStatus===1;)await _g(100),n=await ed(t.appConfig);const s=n.authToken;return s.requestStatus===0?pu(t,e):s}function ed(t){return Ha(t,e=>{if(!Ig(e))throw Xs.create("not-registered");const n=e.authToken;return ab(n)?{...e,authToken:{requestStatus:0}}:e})}async function sb(t,e){try{const n=await eb(t,e),s={...e,authToken:n};return await sa(t.appConfig,s),n}catch(n){if(hg(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Eg(t.appConfig);else{const s={...e,authToken:{requestStatus:0}};await sa(t.appConfig,s)}throw n}}function Ig(t){return t!==void 0&&t.registrationStatus===2}function rb(t){return t.requestStatus===2&&!ib(t)}function ib(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+DI}function ob(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function ab(t){return t.requestStatus===1&&t.requestTime+lg<Date.now()}async function lb(t){const e=t,{installationEntry:n,registrationPromise:s}=await du(e);return s?s.catch(console.error):pu(e).catch(console.error),n.fid}async function cb(t,e=!1){const n=t;return await ub(n),(await pu(n,e)).token}async function ub(t){const{registrationPromise:e}=await du(t);e&&await e}function hb(t){if(!t||!t.options)throw Gl("App Configuration");if(!t.name)throw Gl("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Gl(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Gl(t){return Xs.create("missing-app-config-values",{valueName:t})}const bg="installations",fb="installations-internal",db=t=>{const e=t.getProvider("app").getImmediate(),n=hb(e),s=ir(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},pb=t=>{const e=t.getProvider("app").getImmediate(),n=ir(e,bg).getImmediate();return{getId:()=>lb(n),getToken:r=>cb(n,r)}};function mb(){kn(new fn(bg,db,"PUBLIC")),kn(new fn(fb,pb,"PRIVATE"))}mb();en(ag,hu);en(ag,hu,"esm2020");const ra="analytics",gb="firebase_id",_b="origin",yb=60*1e3,vb="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",mu="https://www.googletagmanager.com/gtag/js";const Ft=new Ba("@firebase/analytics");const wb={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Wt=new rr("analytics","Analytics",wb);function Eb(t){if(!t.startsWith(mu)){const e=Wt.create("invalid-gtag-resource",{gtagURL:t});return Ft.warn(e.message),""}return t}function Ag(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Tb(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function Ib(t,e){const n=Tb("firebase-js-sdk-policy",{createScriptURL:Eb}),s=document.createElement("script"),r=`${mu}?l=${t}&id=${e}`;s.src=n?n?.createScriptURL(r):r,s.async=!0,document.head.appendChild(s)}function bb(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Ab(t,e,n,s,r,i){const o=s[r];try{if(o)await e[o];else{const c=(await Ag(n)).find(h=>h.measurementId===r);c&&await e[c.appId]}}catch(l){Ft.error(l)}t("config",r,i)}async function Rb(t,e,n,s,r){try{let i=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const l=await Ag(n);for(const c of o){const h=l.find(p=>p.measurementId===c),f=h&&e[h.appId];if(f)i.push(f);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",s,r||{})}catch(i){Ft.error(i)}}function Sb(t,e,n,s){async function r(i,...o){try{if(i==="event"){const[l,c]=o;await Rb(t,e,n,l,c)}else if(i==="config"){const[l,c]=o;await Ab(t,e,n,s,l,c)}else if(i==="consent"){const[l,c]=o;t("consent",l,c)}else if(i==="get"){const[l,c,h]=o;t("get",l,c,h)}else if(i==="set"){const[l]=o;t("set",l)}else t(i,...o)}catch(l){Ft.error(l)}}return r}function Cb(t,e,n,s,r){let i=function(...o){window[s].push(arguments)};return window[r]&&typeof window[r]=="function"&&(i=window[r]),window[r]=Sb(i,t,e,n),{gtagCore:i,wrappedGtag:window[r]}}function Pb(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(mu)&&n.src.includes(t))return n;return null}const xb=30,kb=1e3;class Db{constructor(e={},n=kb){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Rg=new Db;function Nb(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Vb(t){const{appId:e,apiKey:n}=t,s={method:"GET",headers:Nb(n)},r=vb.replace("{app-id}",e),i=await fetch(r,s);if(i.status!==200&&i.status!==304){let o="";try{const l=await i.json();l.error?.message&&(o=l.error.message)}catch{}throw Wt.create("config-fetch-failed",{httpStatus:i.status,responseMessage:o})}return i.json()}async function Ob(t,e=Rg,n){const{appId:s,apiKey:r,measurementId:i}=t.options;if(!s)throw Wt.create("no-app-id");if(!r){if(i)return{measurementId:i,appId:s};throw Wt.create("no-api-key")}const o=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new Fb;return setTimeout(async()=>{l.abort()},yb),Sg({appId:s,apiKey:r,measurementId:i},o,l,e)}async function Sg(t,{throttleEndTimeMillis:e,backoffCount:n},s,r=Rg){const{appId:i,measurementId:o}=t;try{await Mb(s,e)}catch(l){if(o)return Ft.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:i,measurementId:o};throw l}try{const l=await Vb(t);return r.deleteThrottleMetadata(i),l}catch(l){const c=l;if(!Lb(c)){if(r.deleteThrottleMetadata(i),o)return Ft.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:i,measurementId:o};throw l}const h=Number(c?.customData?.httpStatus)===503?qf(n,r.intervalMillis,xb):qf(n,r.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return r.setThrottleMetadata(i,f),Ft.debug(`Calling attemptFetch again in ${h} millis`),Sg(t,f,s,r)}}function Mb(t,e){return new Promise((n,s)=>{const r=Math.max(e-Date.now(),0),i=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(i),s(Wt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Lb(t){if(!(t instanceof pn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class Fb{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Ub(t,e,n,s,r){if(r&&r.global){t("event",n,s);return}else{const i=await e,o={...s,send_to:i};t("event",n,o)}}async function $b(t,e,n,s){if(s&&s.global){const r={};for(const i of Object.keys(n))r[`user_properties.${i}`]=n[i];return t("set",r),Promise.resolve()}else{const r=await e;t("config",r,{update:!0,user_properties:n})}}async function Bb(){if(Zm())try{await eg()}catch(t){return Ft.warn(Wt.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return Ft.warn(Wt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function jb(t,e,n,s,r,i,o){const l=Ob(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Ft.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Ft.error(m)),e.push(l);const c=Bb().then(m=>{if(m)return s.getId()}),[h,f]=await Promise.all([l,c]);Pb(i)||Ib(i,h.measurementId),r("js",new Date);const p=o?.config??{};return p[_b]="firebase",p.update=!0,f!=null&&(p[gb]=f),r("config",h.measurementId,p),h.measurementId}class Hb{constructor(e){this.app=e}_delete(){return delete Cr[this.app.options.appId],Promise.resolve()}}let Cr={},td=[];const nd={};let Wl="dataLayer",qb="gtag",sd,gu,rd=!1;function zb(){const t=[];if(Xm()&&t.push("This is a browser extension environment."),uT()||t.push("Cookies are not available."),t.length>0){const e=t.map((s,r)=>`(${r+1}) ${s}`).join(" "),n=Wt.create("invalid-analytics-context",{errorInfo:e});Ft.warn(n.message)}}function Gb(t,e,n){zb();const s=t.options.appId;if(!s)throw Wt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ft.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Wt.create("no-api-key");if(Cr[s]!=null)throw Wt.create("already-exists",{id:s});if(!rd){bb(Wl);const{wrappedGtag:i,gtagCore:o}=Cb(Cr,td,nd,Wl,qb);gu=i,sd=o,rd=!0}return Cr[s]=jb(t,td,nd,e,sd,Wl,n),new Hb(t)}function Wb(t=uu()){t=Tt(t);const e=ir(t,ra);return e.isInitialized()?e.getImmediate():Kb(t)}function Kb(t,e={}){const n=ir(t,ra);if(n.isInitialized()){const r=n.getImmediate();if(Ts(e,n.getOptions()))return r;throw Wt.create("already-initialized")}return n.initialize({options:e})}function Qb(t,e,n){t=Tt(t),$b(gu,Cr[t.app.options.appId],e,n).catch(s=>Ft.error(s))}function Yb(t,e,n,s){t=Tt(t),Ub(gu,Cr[t.app.options.appId],e,n,s).catch(r=>Ft.error(r))}const id="@firebase/analytics",od="0.10.19";function Jb(){kn(new fn(ra,(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return Gb(s,r,n)},"PUBLIC")),kn(new fn("analytics-internal",t,"PRIVATE")),en(id,od),en(id,od,"esm2020");function t(e){try{const n=e.getProvider(ra).getImmediate();return{logEvent:(s,r,i)=>Yb(n,s,r,i),setUserProperties:(s,r)=>Qb(n,s,r)}}catch(n){throw Wt.create("interop-component-reg-failed",{reason:n})}}}Jb();function Cg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Xb=Cg,Pg=new rr("auth","Firebase",Cg());const ia=new Ba("@firebase/auth");function Zb(t,...e){ia.logLevel<=Ce.WARN&&ia.warn(`Auth (${Wr}): ${t}`,...e)}function Oo(t,...e){ia.logLevel<=Ce.ERROR&&ia.error(`Auth (${Wr}): ${t}`,...e)}function Dn(t,...e){throw yu(t,...e)}function cn(t,...e){return yu(t,...e)}function _u(t,e,n){const s={...Xb(),[e]:n};return new rr("auth","Firebase",s).create(e,{appName:t.name})}function Ys(t){return _u(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function eA(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Dn(t,"argument-error"),_u(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function yu(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return Pg.create(t,...e)}function ge(t,e,...n){if(!t)throw yu(e,...n)}function $n(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Oo(e),new Error(e)}function Gn(t,e){t||$n(e)}function Ic(){return typeof self<"u"&&self.location?.href||""}function tA(){return ad()==="http:"||ad()==="https:"}function ad(){return typeof self<"u"&&self.location?.protocol||null}function nA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tA()||Xm()||"connection"in navigator)?navigator.onLine:!0}function sA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Zi{constructor(e,n){this.shortDelay=e,this.longDelay=n,Gn(n>e,"Short delay should be less than long delay!"),this.isMobile=rT()||aT()}get(){return nA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function vu(t,e){Gn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class xg{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$n("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$n("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$n("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const iA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oA=new Zi(3e4,6e4);function wu(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Kr(t,e,n,s,r={}){return kg(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const l=Xi({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:c,...i};return oT()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Gr(t.emulatorConfig.host)&&(h.credentials="include"),xg.fetch()(await Dg(t,t.config.apiHost,n,l),h)})}async function kg(t,e,n){t._canInitEmulator=!1;const s={...rA,...e};try{const r=new lA(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Io(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Io(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Io(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Io(t,"user-disabled",o);const f=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw _u(t,f,h);Dn(t,f)}}catch(r){if(r instanceof pn)throw r;Dn(t,"network-request-failed",{message:String(r)})}}async function aA(t,e,n,s,r={}){const i=await Kr(t,e,n,s,r);return"mfaPendingCredential"in i&&Dn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Dg(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?vu(t.config,r):`${t.config.apiScheme}://${r}`;return iA.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class lA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(cn(this.auth,"network-request-failed")),oA.get())})}}function Io(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=cn(t,e,s);return r.customData._tokenResponse=n,r}async function cA(t,e){return Kr(t,"POST","/v1/accounts:delete",e)}async function oa(t,e){return Kr(t,"POST","/v1/accounts:lookup",e)}function Ci(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uA(t,e=!1){const n=Tt(t),s=await n.getIdToken(e),r=Eu(s);ge(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:Ci(Kl(r.auth_time)),issuedAtTime:Ci(Kl(r.iat)),expirationTime:Ci(Kl(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function Kl(t){return Number(t)*1e3}function Eu(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Oo("JWT malformed, contained fewer than 3 sections"),null;try{const r=Gm(n);return r?JSON.parse(r):(Oo("Failed to decode base64 JWT payload"),null)}catch(r){return Oo("Caught error parsing JWT payload as JSON",r?.toString()),null}}function ld(t){const e=Eu(t);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function $i(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof pn&&hA(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function hA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class fA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class bc{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ci(this.lastLoginAt),this.creationTime=Ci(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function aa(t){const e=t.auth,n=await t.getIdToken(),s=await $i(t,oa(e,{idToken:n}));ge(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?Ng(r.providerUserInfo):[],o=pA(t.providerData,i),l=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!o?.length,h=l?c:!1,f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new bc(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function dA(t){const e=Tt(t);await aa(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pA(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function Ng(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function mA(t,e){const n=await kg(t,{},async()=>{const s=Xi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await Dg(t,r,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:s};return t.emulatorConfig&&Gr(t.emulatorConfig.host)&&(c.credentials="include"),xg.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function gA(t,e){return Kr(t,"POST","/v2/accounts:revokeToken",wu(t,e))}class Pr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ld(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const n=ld(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await mA(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new Pr;return s&&(ge(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(ge(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(ge(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Pr,this.toJSON())}_performRefresh(){return $n("not implemented")}}function rs(t,e){ge(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class on{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new fA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new bc(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await $i(this,this.stsTokenManager.getToken(this.auth,e));return ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return uA(this,e)}reload(){return dA(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new on({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await aa(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nn(this.auth.app))return Promise.reject(Ys(this.auth));const e=await this.getIdToken();return await $i(this,cA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,h=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:w,providerData:N,stsTokenManager:M}=n;ge(p&&M,e,"internal-error");const $=Pr.fromJSON(this.name,M);ge(typeof p=="string",e,"internal-error"),rs(s,e.name),rs(r,e.name),ge(typeof m=="boolean",e,"internal-error"),ge(typeof w=="boolean",e,"internal-error"),rs(i,e.name),rs(o,e.name),rs(l,e.name),rs(c,e.name),rs(h,e.name),rs(f,e.name);const Q=new on({uid:p,auth:e,email:r,emailVerified:m,displayName:s,isAnonymous:w,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:$,createdAt:h,lastLoginAt:f});return N&&Array.isArray(N)&&(Q.providerData=N.map(V=>({...V}))),c&&(Q._redirectEventId=c),Q}static async _fromIdTokenResponse(e,n,s=!1){const r=new Pr;r.updateFromServerResponse(n);const i=new on({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await aa(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];ge(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?Ng(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,l=new Pr;l.updateFromIdToken(s);const c=new on({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new bc(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(c,h),c}}const cd=new Map;function Bn(t){Gn(t instanceof Function,"Expected a class definition");let e=cd.get(t);return e?(Gn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,cd.set(t,e),e)}class Vg{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Vg.type="NONE";const ud=Vg;function Mo(t,e,n){return`firebase:${t}:${e}:${n}`}class xr{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=Mo(this.userKey,r.apiKey,i),this.fullPersistenceKey=Mo("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await oa(this.auth,{idToken:e}).catch(()=>{});return n?on._fromGetAccountInfoResponse(this.auth,n,e):null}return on._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new xr(Bn(ud),e,s);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=r[0]||Bn(ud);const o=Mo(s,e.config.apiKey,e.name);let l=null;for(const h of n)try{const f=await h._get(o);if(f){let p;if(typeof f=="string"){const m=await oa(e,{idToken:f}).catch(()=>{});if(!m)break;p=await on._fromGetAccountInfoResponse(e,m,f)}else p=on._fromJSON(e,f);h!==i&&(l=p),i=h;break}}catch{}const c=r.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new xr(i,e,s):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new xr(i,e,s))}}function hd(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Fg(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Og(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($g(e))return"Blackberry";if(Bg(e))return"Webos";if(Mg(e))return"Safari";if((e.includes("chrome/")||Lg(e))&&!e.includes("edge/"))return"Chrome";if(Ug(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function Og(t=Dt()){return/firefox\//i.test(t)}function Mg(t=Dt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Lg(t=Dt()){return/crios\//i.test(t)}function Fg(t=Dt()){return/iemobile/i.test(t)}function Ug(t=Dt()){return/android/i.test(t)}function $g(t=Dt()){return/blackberry/i.test(t)}function Bg(t=Dt()){return/webos/i.test(t)}function Tu(t=Dt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _A(t=Dt()){return Tu(t)&&!!window.navigator?.standalone}function yA(){return lT()&&document.documentMode===10}function jg(t=Dt()){return Tu(t)||Ug(t)||Bg(t)||$g(t)||/windows phone/i.test(t)||Fg(t)}function Hg(t,e=[]){let n;switch(t){case"Browser":n=hd(Dt());break;case"Worker":n=`${hd(Dt())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wr}/${s}`}class vA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function wA(t,e={}){return Kr(t,"GET","/v2/passwordPolicy",wu(t,e))}const EA=6;class TA{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??EA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class IA{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fd(this),this.idTokenSubscription=new fd(this),this.beforeStateQueue=new vA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Bn(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await xr.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await oa(this,{idToken:e}),s=await on._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(nn(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&l?.user&&(s=l.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await aa(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nn(this.app))return Promise.reject(Ys(this));const n=e?Tt(e):null;return n&&ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nn(this.app)?Promise.reject(Ys(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nn(this.app)?Promise.reject(Ys(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wA(this),n=new TA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new rr("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await gA(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Bn(e)||this._popupRedirectResolver;ge(n,this,"argument-error"),this.redirectPersistenceManager=await xr.create(this,[Bn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,r);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Hg(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Zb(`Error while retrieving App Check token: ${e.error}`),e?.token}}function qa(t){return Tt(t)}class fd{constructor(e){this.auth=e,this.observer=null,this.addObserver=mT(n=>this.observer=n)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Iu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bA(t){Iu=t}function AA(t){return Iu.loadJS(t)}function RA(){return Iu.gapiScript}function SA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function CA(t,e){const n=ir(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(Ts(i,e??{}))return r;Dn(r,"already-initialized")}return n.initialize({options:e})}function PA(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Bn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function xA(t,e,n){const s=qa(t);ge(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=qg(e),{host:o,port:l}=kA(e),c=l===null?"":`:${l}`,h={url:`${i}//${o}${c}/`},f=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){ge(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ge(Ts(h,s.config.emulator)&&Ts(f,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=h,s.emulatorConfig=f,s.settings.appVerificationDisabledForTesting=!0,Gr(o)?(Ym(`${i}//${o}${c}`),Jm("Auth",!0)):DA()}function qg(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function kA(t){const e=qg(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:dd(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:dd(o)}}}function dd(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function DA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class zg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return $n("not implemented")}_getIdTokenResponse(e){return $n("not implemented")}_linkToIdToken(e,n){return $n("not implemented")}_getReauthenticationResolver(e){return $n("not implemented")}}async function kr(t,e){return aA(t,"POST","/v1/accounts:signInWithIdp",wu(t,e))}const NA="http://localhost";class er extends zg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new er(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Dn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new er(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return kr(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,kr(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,kr(e,n)}buildRequest(){const e={requestUri:NA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xi(n)}return e}}class bu{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class eo extends bu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class cs extends eo{constructor(){super("facebook.com")}static credential(e){return er._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.FACEBOOK_SIGN_IN_METHOD="facebook.com";cs.PROVIDER_ID="facebook.com";class Un extends eo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return er._fromParams({providerId:Un.PROVIDER_ID,signInMethod:Un.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Un.credentialFromTaggedObject(e)}static credentialFromError(e){return Un.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Un.credential(n,s)}catch{return null}}}Un.GOOGLE_SIGN_IN_METHOD="google.com";Un.PROVIDER_ID="google.com";class us extends eo{constructor(){super("github.com")}static credential(e){return er._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return us.credential(e.oauthAccessToken)}catch{return null}}}us.GITHUB_SIGN_IN_METHOD="github.com";us.PROVIDER_ID="github.com";class hs extends eo{constructor(){super("twitter.com")}static credential(e,n){return er._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return hs.credential(n,s)}catch{return null}}}hs.TWITTER_SIGN_IN_METHOD="twitter.com";hs.PROVIDER_ID="twitter.com";class Ur{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await on._fromIdTokenResponse(e,s,r),o=pd(s);return new Ur({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=pd(s);return new Ur({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function pd(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class la extends pn{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,la.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new la(e,n,s,r)}}function Gg(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?la._fromErrorAndOperation(t,i,e,s):i})}async function VA(t,e,n=!1){const s=await $i(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ur._forOperation(t,"link",s)}async function OA(t,e,n=!1){const{auth:s}=t;if(nn(s.app))return Promise.reject(Ys(s));const r="reauthenticate";try{const i=await $i(t,Gg(s,r,e,t),n);ge(i.idToken,s,"internal-error");const o=Eu(i.idToken);ge(o,s,"internal-error");const{sub:l}=o;return ge(t.uid===l,s,"user-mismatch"),Ur._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&Dn(s,"user-mismatch"),i}}async function MA(t,e,n=!1){if(nn(t.app))return Promise.reject(Ys(t));const s="signIn",r=await Gg(t,s,e),i=await Ur._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}function LA(t,e,n,s){return Tt(t).onIdTokenChanged(e,n,s)}function FA(t,e,n){return Tt(t).beforeAuthStateChanged(e,n)}function za(t,e,n,s){return Tt(t).onAuthStateChanged(e,n,s)}function UA(t){return Tt(t).signOut()}const ca="__sak";class Wg{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ca,"1"),this.storage.removeItem(ca),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const $A=1e3,BA=10;class Kg extends Wg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jg(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);yA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,BA):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},$A)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Kg.type="LOCAL";const jA=Kg;class Qg extends Wg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Qg.type="SESSION";const Yg=Qg;function HA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Ga{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new Ga(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const l=Array.from(o).map(async h=>h(n.origin,i)),c=await HA(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ga.receivers=[];function Au(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}class qA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const h=Au("",20);r.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(p){const m=p;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function In(){return window}function zA(t){In().location.href=t}function Jg(){return typeof In().WorkerGlobalScope<"u"&&typeof In().importScripts=="function"}async function GA(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function WA(){return navigator?.serviceWorker?.controller||null}function KA(){return Jg()?self:null}const Xg="firebaseLocalStorageDb",QA=1,ua="firebaseLocalStorage",Zg="fbase_key";class to{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Wa(t,e){return t.transaction([ua],e?"readwrite":"readonly").objectStore(ua)}function YA(){const t=indexedDB.deleteDatabase(Xg);return new to(t).toPromise()}function Ac(){const t=indexedDB.open(Xg,QA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(ua,{keyPath:Zg})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(ua)?e(s):(s.close(),await YA(),e(await Ac()))})})}async function md(t,e,n){const s=Wa(t,!0).put({[Zg]:e,value:n});return new to(s).toPromise()}async function JA(t,e){const n=Wa(t,!1).get(e),s=await new to(n).toPromise();return s===void 0?null:s.value}function gd(t,e){const n=Wa(t,!0).delete(e);return new to(n).toPromise()}const XA=800,ZA=3;class e_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ac(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>ZA)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Jg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ga._getInstance(KA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await GA(),!this.activeServiceWorker)return;this.sender=new qA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||WA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ac();return await md(e,ca,"1"),await gd(e,ca),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>md(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>JA(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>gd(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=Wa(r,!1).getAll();return new to(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}e_.type="LOCAL";const e1=e_;new Zi(3e4,6e4);function t_(t,e){return e?Bn(e):(ge(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Ru extends zg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return kr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return kr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return kr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function t1(t){return MA(t.auth,new Ru(t),t.bypassAuthState)}function n1(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),OA(n,new Ru(t),t.bypassAuthState)}async function s1(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),VA(n,new Ru(t),t.bypassAuthState)}class n_{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return t1;case"linkViaPopup":case"linkViaRedirect":return s1;case"reauthViaPopup":case"reauthViaRedirect":return n1;default:Dn(this.auth,"internal-error")}}resolve(e){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const r1=new Zi(2e3,1e4);async function i1(t,e,n){if(nn(t.app))return Promise.reject(cn(t,"operation-not-supported-in-this-environment"));const s=qa(t);eA(t,e,bu);const r=t_(s,n);return new zs(s,"signInViaPopup",e,r).executeNotNull()}class zs extends n_{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,zs.currentPopupAction&&zs.currentPopupAction.cancel(),zs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ge(e,this.auth,"internal-error"),e}async onExecution(){Gn(this.filter.length===1,"Popup operations only handle one event");const e=Au();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(cn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zs.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,r1.get())};e()}}zs.currentPopupAction=null;const o1="pendingRedirect",Lo=new Map;class a1 extends n_{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Lo.get(this.auth._key());if(!e){try{const s=await l1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Lo.set(this.auth._key(),e)}return this.bypassAuthState||Lo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function l1(t,e){const n=h1(e),s=u1(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function c1(t,e){Lo.set(t._key(),e)}function u1(t){return Bn(t._redirectPersistence)}function h1(t){return Mo(o1,t.config.apiKey,t.name)}async function f1(t,e,n=!1){if(nn(t.app))return Promise.reject(Ys(t));const s=qa(t),r=t_(s,e),o=await new a1(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}const d1=10*60*1e3;class p1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!m1(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!s_(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(cn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=d1&&this.cachedEventUids.clear(),this.cachedEventUids.has(_d(e))}saveEventToCache(e){this.cachedEventUids.add(_d(e)),this.lastProcessedEventTime=Date.now()}}function _d(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function s_({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function m1(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return s_(t);default:return!1}}async function g1(t,e={}){return Kr(t,"GET","/v1/projects",e)}const _1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,y1=/^https?/;async function v1(t){if(t.config.emulator)return;const{authorizedDomains:e}=await g1(t);for(const n of e)try{if(w1(n))return}catch{}Dn(t,"unauthorized-domain")}function w1(t){const e=Ic(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!y1.test(n))return!1;if(_1.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}const E1=new Zi(3e4,6e4);function yd(){const t=In().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function T1(t){return new Promise((e,n)=>{function s(){yd(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yd(),n(cn(t,"network-request-failed"))},timeout:E1.get()})}if(In().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(In().gapi?.load)s();else{const r=SA("iframefcb");return In()[r]=()=>{gapi.load?s():n(cn(t,"network-request-failed"))},AA(`${RA()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw Fo=null,e})}let Fo=null;function I1(t){return Fo=Fo||T1(t),Fo}const b1=new Zi(5e3,15e3),A1="__/auth/iframe",R1="emulator/auth/iframe",S1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},C1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function P1(t){const e=t.config;ge(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?vu(e,R1):`https://${t.config.authDomain}/${A1}`,s={apiKey:e.apiKey,appName:t.name,v:Wr},r=C1.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${Xi(s).slice(1)}`}async function x1(t){const e=await I1(t),n=In().gapi;return ge(n,t,"internal-error"),e.open({where:document.body,url:P1(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:S1,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=cn(t,"network-request-failed"),l=In().setTimeout(()=>{i(o)},b1.get());function c(){In().clearTimeout(l),r(s)}s.ping(c).then(c,()=>{i(o)})}))}const k1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},D1=500,N1=600,V1="_blank",O1="http://localhost";class vd{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function M1(t,e,n,s=D1,r=N1){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c={...k1,width:s.toString(),height:r.toString(),top:i,left:o},h=Dt().toLowerCase();n&&(l=Lg(h)?V1:n),Og(h)&&(e=e||O1,c.scrollbars="yes");const f=Object.entries(c).reduce((m,[w,N])=>`${m}${w}=${N},`,"");if(_A(h)&&l!=="_self")return L1(e||"",l),new vd(null);const p=window.open(e||"",l,f);ge(p,t,"popup-blocked");try{p.focus()}catch{}return new vd(p)}function L1(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const F1="__/auth/handler",U1="emulator/auth/handler",$1=encodeURIComponent("fac");async function wd(t,e,n,s,r,i){ge(t.config.authDomain,t,"auth-domain-config-required"),ge(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Wr,eventId:r};if(e instanceof bu){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",pT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof eo){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const c=await t._getAppCheckToken(),h=c?`#${$1}=${encodeURIComponent(c)}`:"";return`${B1(t)}?${Xi(l).slice(1)}${h}`}function B1({config:t}){return t.emulator?vu(t,U1):`https://${t.authDomain}/${F1}`}const Ql="webStorageSupport";class j1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yg,this._completeRedirectFn=f1,this._overrideRedirectResult=c1}async _openPopup(e,n,s,r){Gn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await wd(e,n,s,Ic(),r);return M1(e,i,Au())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await wd(e,n,s,Ic(),r);return zA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(Gn(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await x1(e),s=new p1(e);return n.register("authEvent",r=>(ge(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ql,{type:Ql},r=>{const i=r?.[0]?.[Ql];i!==void 0&&n(!!i),Dn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=v1(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return jg()||Mg()||Tu()}}const H1=j1;var Ed="@firebase/auth",Td="1.11.1";class q1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function z1(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function G1(t){kn(new fn("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;ge(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hg(t)},h=new IA(s,r,i,c);return PA(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),kn(new fn("auth-internal",e=>{const n=qa(e.getProvider("auth").getImmediate());return(s=>new q1(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),en(Ed,Td,z1(t)),en(Ed,Td,"esm2020")}const W1=5*60,K1=Qm("authIdTokenMaxAge")||W1;let Id=null;const Q1=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>K1)return;const r=n?.token;Id!==r&&(Id=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Y1(t=uu()){const e=ir(t,"auth");if(e.isInitialized())return e.getImmediate();const n=CA(t,{popupRedirectResolver:H1,persistence:[e1,jA,Yg]}),s=Qm("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=Q1(i.toString());FA(n,o,()=>o(n.currentUser)),LA(n,l=>o(l))}}const r=Wm("auth");return r&&xA(n,`http://${r}`),n}function J1(){return document.getElementsByTagName("head")?.[0]??document}bA({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=cn("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",J1().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});G1("Browser");var bd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var gs,r_;(function(){var t;function e(I,y){function v(){}v.prototype=y.prototype,I.F=y.prototype,I.prototype=new v,I.prototype.constructor=I,I.D=function(R,A,C){for(var E=Array(arguments.length-2),je=2;je<arguments.length;je++)E[je-2]=arguments[je];return y.prototype[A].apply(R,E)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,y,v){v||(v=0);const R=Array(16);if(typeof y=="string")for(var A=0;A<16;++A)R[A]=y.charCodeAt(v++)|y.charCodeAt(v++)<<8|y.charCodeAt(v++)<<16|y.charCodeAt(v++)<<24;else for(A=0;A<16;++A)R[A]=y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24;y=I.g[0],v=I.g[1],A=I.g[2];let C=I.g[3],E;E=y+(C^v&(A^C))+R[0]+3614090360&4294967295,y=v+(E<<7&4294967295|E>>>25),E=C+(A^y&(v^A))+R[1]+3905402710&4294967295,C=y+(E<<12&4294967295|E>>>20),E=A+(v^C&(y^v))+R[2]+606105819&4294967295,A=C+(E<<17&4294967295|E>>>15),E=v+(y^A&(C^y))+R[3]+3250441966&4294967295,v=A+(E<<22&4294967295|E>>>10),E=y+(C^v&(A^C))+R[4]+4118548399&4294967295,y=v+(E<<7&4294967295|E>>>25),E=C+(A^y&(v^A))+R[5]+1200080426&4294967295,C=y+(E<<12&4294967295|E>>>20),E=A+(v^C&(y^v))+R[6]+2821735955&4294967295,A=C+(E<<17&4294967295|E>>>15),E=v+(y^A&(C^y))+R[7]+4249261313&4294967295,v=A+(E<<22&4294967295|E>>>10),E=y+(C^v&(A^C))+R[8]+1770035416&4294967295,y=v+(E<<7&4294967295|E>>>25),E=C+(A^y&(v^A))+R[9]+2336552879&4294967295,C=y+(E<<12&4294967295|E>>>20),E=A+(v^C&(y^v))+R[10]+4294925233&4294967295,A=C+(E<<17&4294967295|E>>>15),E=v+(y^A&(C^y))+R[11]+2304563134&4294967295,v=A+(E<<22&4294967295|E>>>10),E=y+(C^v&(A^C))+R[12]+1804603682&4294967295,y=v+(E<<7&4294967295|E>>>25),E=C+(A^y&(v^A))+R[13]+4254626195&4294967295,C=y+(E<<12&4294967295|E>>>20),E=A+(v^C&(y^v))+R[14]+2792965006&4294967295,A=C+(E<<17&4294967295|E>>>15),E=v+(y^A&(C^y))+R[15]+1236535329&4294967295,v=A+(E<<22&4294967295|E>>>10),E=y+(A^C&(v^A))+R[1]+4129170786&4294967295,y=v+(E<<5&4294967295|E>>>27),E=C+(v^A&(y^v))+R[6]+3225465664&4294967295,C=y+(E<<9&4294967295|E>>>23),E=A+(y^v&(C^y))+R[11]+643717713&4294967295,A=C+(E<<14&4294967295|E>>>18),E=v+(C^y&(A^C))+R[0]+3921069994&4294967295,v=A+(E<<20&4294967295|E>>>12),E=y+(A^C&(v^A))+R[5]+3593408605&4294967295,y=v+(E<<5&4294967295|E>>>27),E=C+(v^A&(y^v))+R[10]+38016083&4294967295,C=y+(E<<9&4294967295|E>>>23),E=A+(y^v&(C^y))+R[15]+3634488961&4294967295,A=C+(E<<14&4294967295|E>>>18),E=v+(C^y&(A^C))+R[4]+3889429448&4294967295,v=A+(E<<20&4294967295|E>>>12),E=y+(A^C&(v^A))+R[9]+568446438&4294967295,y=v+(E<<5&4294967295|E>>>27),E=C+(v^A&(y^v))+R[14]+3275163606&4294967295,C=y+(E<<9&4294967295|E>>>23),E=A+(y^v&(C^y))+R[3]+4107603335&4294967295,A=C+(E<<14&4294967295|E>>>18),E=v+(C^y&(A^C))+R[8]+1163531501&4294967295,v=A+(E<<20&4294967295|E>>>12),E=y+(A^C&(v^A))+R[13]+2850285829&4294967295,y=v+(E<<5&4294967295|E>>>27),E=C+(v^A&(y^v))+R[2]+4243563512&4294967295,C=y+(E<<9&4294967295|E>>>23),E=A+(y^v&(C^y))+R[7]+1735328473&4294967295,A=C+(E<<14&4294967295|E>>>18),E=v+(C^y&(A^C))+R[12]+2368359562&4294967295,v=A+(E<<20&4294967295|E>>>12),E=y+(v^A^C)+R[5]+4294588738&4294967295,y=v+(E<<4&4294967295|E>>>28),E=C+(y^v^A)+R[8]+2272392833&4294967295,C=y+(E<<11&4294967295|E>>>21),E=A+(C^y^v)+R[11]+1839030562&4294967295,A=C+(E<<16&4294967295|E>>>16),E=v+(A^C^y)+R[14]+4259657740&4294967295,v=A+(E<<23&4294967295|E>>>9),E=y+(v^A^C)+R[1]+2763975236&4294967295,y=v+(E<<4&4294967295|E>>>28),E=C+(y^v^A)+R[4]+1272893353&4294967295,C=y+(E<<11&4294967295|E>>>21),E=A+(C^y^v)+R[7]+4139469664&4294967295,A=C+(E<<16&4294967295|E>>>16),E=v+(A^C^y)+R[10]+3200236656&4294967295,v=A+(E<<23&4294967295|E>>>9),E=y+(v^A^C)+R[13]+681279174&4294967295,y=v+(E<<4&4294967295|E>>>28),E=C+(y^v^A)+R[0]+3936430074&4294967295,C=y+(E<<11&4294967295|E>>>21),E=A+(C^y^v)+R[3]+3572445317&4294967295,A=C+(E<<16&4294967295|E>>>16),E=v+(A^C^y)+R[6]+76029189&4294967295,v=A+(E<<23&4294967295|E>>>9),E=y+(v^A^C)+R[9]+3654602809&4294967295,y=v+(E<<4&4294967295|E>>>28),E=C+(y^v^A)+R[12]+3873151461&4294967295,C=y+(E<<11&4294967295|E>>>21),E=A+(C^y^v)+R[15]+530742520&4294967295,A=C+(E<<16&4294967295|E>>>16),E=v+(A^C^y)+R[2]+3299628645&4294967295,v=A+(E<<23&4294967295|E>>>9),E=y+(A^(v|~C))+R[0]+4096336452&4294967295,y=v+(E<<6&4294967295|E>>>26),E=C+(v^(y|~A))+R[7]+1126891415&4294967295,C=y+(E<<10&4294967295|E>>>22),E=A+(y^(C|~v))+R[14]+2878612391&4294967295,A=C+(E<<15&4294967295|E>>>17),E=v+(C^(A|~y))+R[5]+4237533241&4294967295,v=A+(E<<21&4294967295|E>>>11),E=y+(A^(v|~C))+R[12]+1700485571&4294967295,y=v+(E<<6&4294967295|E>>>26),E=C+(v^(y|~A))+R[3]+2399980690&4294967295,C=y+(E<<10&4294967295|E>>>22),E=A+(y^(C|~v))+R[10]+4293915773&4294967295,A=C+(E<<15&4294967295|E>>>17),E=v+(C^(A|~y))+R[1]+2240044497&4294967295,v=A+(E<<21&4294967295|E>>>11),E=y+(A^(v|~C))+R[8]+1873313359&4294967295,y=v+(E<<6&4294967295|E>>>26),E=C+(v^(y|~A))+R[15]+4264355552&4294967295,C=y+(E<<10&4294967295|E>>>22),E=A+(y^(C|~v))+R[6]+2734768916&4294967295,A=C+(E<<15&4294967295|E>>>17),E=v+(C^(A|~y))+R[13]+1309151649&4294967295,v=A+(E<<21&4294967295|E>>>11),E=y+(A^(v|~C))+R[4]+4149444226&4294967295,y=v+(E<<6&4294967295|E>>>26),E=C+(v^(y|~A))+R[11]+3174756917&4294967295,C=y+(E<<10&4294967295|E>>>22),E=A+(y^(C|~v))+R[2]+718787259&4294967295,A=C+(E<<15&4294967295|E>>>17),E=v+(C^(A|~y))+R[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(A+(E<<21&4294967295|E>>>11))&4294967295,I.g[2]=I.g[2]+A&4294967295,I.g[3]=I.g[3]+C&4294967295}s.prototype.v=function(I,y){y===void 0&&(y=I.length);const v=y-this.blockSize,R=this.C;let A=this.h,C=0;for(;C<y;){if(A==0)for(;C<=v;)r(this,I,C),C+=this.blockSize;if(typeof I=="string"){for(;C<y;)if(R[A++]=I.charCodeAt(C++),A==this.blockSize){r(this,R),A=0;break}}else for(;C<y;)if(R[A++]=I[C++],A==this.blockSize){r(this,R),A=0;break}}this.h=A,this.o+=y},s.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;y=this.o*8;for(var v=I.length-8;v<I.length;++v)I[v]=y&255,y/=256;for(this.v(I),I=Array(16),y=0,v=0;v<4;++v)for(let R=0;R<32;R+=8)I[y++]=this.g[v]>>>R&255;return I};function i(I,y){var v=l;return Object.prototype.hasOwnProperty.call(v,I)?v[I]:v[I]=y(I)}function o(I,y){this.h=y;const v=[];let R=!0;for(let A=I.length-1;A>=0;A--){const C=I[A]|0;R&&C==y||(v[A]=C,R=!1)}this.g=v}var l={};function c(I){return-128<=I&&I<128?i(I,function(y){return new o([y|0],y<0?-1:0)}):new o([I|0],I<0?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return p;if(I<0)return $(h(-I));const y=[];let v=1;for(let R=0;I>=v;R++)y[R]=I/v|0,v*=4294967296;return new o(y,0)}function f(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return $(f(I.substring(1),y));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const v=h(Math.pow(y,8));let R=p;for(let C=0;C<I.length;C+=8){var A=Math.min(8,I.length-C);const E=parseInt(I.substring(C,C+A),y);A<8?(A=h(Math.pow(y,A)),R=R.j(A).add(h(E))):(R=R.j(v),R=R.add(h(E)))}return R}var p=c(0),m=c(1),w=c(16777216);t=o.prototype,t.m=function(){if(M(this))return-$(this).m();let I=0,y=1;for(let v=0;v<this.g.length;v++){const R=this.i(v);I+=(R>=0?R:4294967296+R)*y,y*=4294967296}return I},t.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(N(this))return"0";if(M(this))return"-"+$(this).toString(I);const y=h(Math.pow(I,6));var v=this;let R="";for(;;){const A=J(v,y).g;v=Q(v,A.j(y));let C=((v.g.length>0?v.g[0]:v.h)>>>0).toString(I);if(v=A,N(v))return C+R;for(;C.length<6;)C="0"+C;R=C+R}},t.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function N(I){if(I.h!=0)return!1;for(let y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function M(I){return I.h==-1}t.l=function(I){return I=Q(this,I),M(I)?-1:N(I)?0:1};function $(I){const y=I.g.length,v=[];for(let R=0;R<y;R++)v[R]=~I.g[R];return new o(v,~I.h).add(m)}t.abs=function(){return M(this)?$(this):this},t.add=function(I){const y=Math.max(this.g.length,I.g.length),v=[];let R=0;for(let A=0;A<=y;A++){let C=R+(this.i(A)&65535)+(I.i(A)&65535),E=(C>>>16)+(this.i(A)>>>16)+(I.i(A)>>>16);R=E>>>16,C&=65535,E&=65535,v[A]=E<<16|C}return new o(v,v[v.length-1]&-2147483648?-1:0)};function Q(I,y){return I.add($(y))}t.j=function(I){if(N(this)||N(I))return p;if(M(this))return M(I)?$(this).j($(I)):$($(this).j(I));if(M(I))return $(this.j($(I)));if(this.l(w)<0&&I.l(w)<0)return h(this.m()*I.m());const y=this.g.length+I.g.length,v=[];for(var R=0;R<2*y;R++)v[R]=0;for(R=0;R<this.g.length;R++)for(let A=0;A<I.g.length;A++){const C=this.i(R)>>>16,E=this.i(R)&65535,je=I.i(A)>>>16,ot=I.i(A)&65535;v[2*R+2*A]+=E*ot,V(v,2*R+2*A),v[2*R+2*A+1]+=C*ot,V(v,2*R+2*A+1),v[2*R+2*A+1]+=E*je,V(v,2*R+2*A+1),v[2*R+2*A+2]+=C*je,V(v,2*R+2*A+2)}for(I=0;I<y;I++)v[I]=v[2*I+1]<<16|v[2*I];for(I=y;I<2*y;I++)v[I]=0;return new o(v,0)};function V(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function U(I,y){this.g=I,this.h=y}function J(I,y){if(N(y))throw Error("division by zero");if(N(I))return new U(p,p);if(M(I))return y=J($(I),y),new U($(y.g),$(y.h));if(M(y))return y=J(I,$(y)),new U($(y.g),y.h);if(I.g.length>30){if(M(I)||M(y))throw Error("slowDivide_ only works with positive integers.");for(var v=m,R=y;R.l(I)<=0;)v=B(v),R=B(R);var A=H(v,1),C=H(R,1);for(R=H(R,2),v=H(v,2);!N(R);){var E=C.add(R);E.l(I)<=0&&(A=A.add(v),C=E),R=H(R,1),v=H(v,1)}return y=Q(I,A.j(y)),new U(A,y)}for(A=p;I.l(y)>=0;){for(v=Math.max(1,Math.floor(I.m()/y.m())),R=Math.ceil(Math.log(v)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),C=h(v),E=C.j(y);M(E)||E.l(I)>0;)v-=R,C=h(v),E=C.j(y);N(C)&&(C=m),A=A.add(C),I=Q(I,E)}return new U(A,I)}t.B=function(I){return J(this,I).h},t.and=function(I){const y=Math.max(this.g.length,I.g.length),v=[];for(let R=0;R<y;R++)v[R]=this.i(R)&I.i(R);return new o(v,this.h&I.h)},t.or=function(I){const y=Math.max(this.g.length,I.g.length),v=[];for(let R=0;R<y;R++)v[R]=this.i(R)|I.i(R);return new o(v,this.h|I.h)},t.xor=function(I){const y=Math.max(this.g.length,I.g.length),v=[];for(let R=0;R<y;R++)v[R]=this.i(R)^I.i(R);return new o(v,this.h^I.h)};function B(I){const y=I.g.length+1,v=[];for(let R=0;R<y;R++)v[R]=I.i(R)<<1|I.i(R-1)>>>31;return new o(v,I.h)}function H(I,y){const v=y>>5;y%=32;const R=I.g.length-v,A=[];for(let C=0;C<R;C++)A[C]=y>0?I.i(C+v)>>>y|I.i(C+v+1)<<32-y:I.i(C+v);return new o(A,I.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,r_=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,gs=o}).apply(typeof bd<"u"?bd:typeof self<"u"?self:typeof window<"u"?window:{});var bo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var i_,gi,o_,Uo,Rc,a_,l_,c_;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof bo=="object"&&bo];for(var u=0;u<a.length;++u){var d=a[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var s=n(this);function r(a,u){if(u)e:{var d=s;a=a.split(".");for(var g=0;g<a.length-1;g++){var P=a[g];if(!(P in d))break e;d=d[P]}a=a[a.length-1],g=d[a],u=u(g),u!=g&&u!=null&&e(d,a,{configurable:!0,writable:!0,value:u})}}r("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(a){return a||function(u){var d=[],g;for(g in u)Object.prototype.hasOwnProperty.call(u,g)&&d.push([g,u[g]]);return d}});var i=i||{},o=this||self;function l(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function c(a,u,d){return a.call.apply(a.bind,arguments)}function h(a,u,d){return h=c,h.apply(null,arguments)}function f(a,u){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function p(a,u){function d(){}d.prototype=u.prototype,a.Z=u.prototype,a.prototype=new d,a.prototype.constructor=a,a.Ob=function(g,P,D){for(var te=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)te[Ae-2]=arguments[Ae];return u.prototype[P].apply(g,te)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function w(a){const u=a.length;if(u>0){const d=Array(u);for(let g=0;g<u;g++)d[g]=a[g];return d}return[]}function N(a,u){for(let g=1;g<arguments.length;g++){const P=arguments[g];var d=typeof P;if(d=d!="object"?d:P?Array.isArray(P)?"array":d:"null",d=="array"||d=="object"&&typeof P.length=="number"){d=a.length||0;const D=P.length||0;a.length=d+D;for(let te=0;te<D;te++)a[d+te]=P[te]}else a.push(P)}}class M{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return this.h>0?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function $(a){o.setTimeout(()=>{throw a},0)}function Q(){var a=I;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class V{constructor(){this.h=this.g=null}add(u,d){const g=U.get();g.set(u,d),this.h?this.h.next=g:this.g=g,this.h=g}}var U=new M(()=>new J,a=>a.reset());class J{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let B,H=!1,I=new V,y=()=>{const a=Promise.resolve(void 0);B=()=>{a.then(v)}};function v(){for(var a;a=Q();){try{a.h.call(a.g)}catch(d){$(d)}var u=U;u.j(a),u.h<100&&(u.h++,a.next=u.g,u.g=a)}H=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var C=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};o.addEventListener("test",d,u),o.removeEventListener("test",d,u)}catch{}return a}();function E(a){return/^[\s\xa0]*$/.test(a)}function je(a,u){A.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,u)}p(je,A),je.prototype.init=function(a,u){const d=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget,u||(d=="mouseover"?u=a.fromElement:d=="mouseout"&&(u=a.toElement)),this.relatedTarget=u,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&je.Z.h.call(this)},je.prototype.h=function(){je.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ot="closure_listenable_"+(Math.random()*1e6|0),Je=0;function De(a,u,d,g,P){this.listener=a,this.proxy=null,this.src=u,this.type=d,this.capture=!!g,this.ha=P,this.key=++Je,this.da=this.fa=!1}function Re(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function dt(a,u,d){for(const g in a)u.call(d,a[g],g,a)}function jt(a,u){for(const d in a)u.call(void 0,a[d],d,a)}function Nt(a){const u={};for(const d in a)u[d]=a[d];return u}const at="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(a,u){let d,g;for(let P=1;P<arguments.length;P++){g=arguments[P];for(d in g)a[d]=g[d];for(let D=0;D<at.length;D++)d=at[D],Object.prototype.hasOwnProperty.call(g,d)&&(a[d]=g[d])}}function O(a){this.src=a,this.g={},this.h=0}O.prototype.add=function(a,u,d,g,P){const D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);const te=ne(a,u,g,P);return te>-1?(u=a[te],d||(u.fa=!1)):(u=new De(u,this.src,D,!!g,P),u.fa=d,a.push(u)),u};function k(a,u){const d=u.type;if(d in a.g){var g=a.g[d],P=Array.prototype.indexOf.call(g,u,void 0),D;(D=P>=0)&&Array.prototype.splice.call(g,P,1),D&&(Re(u),a.g[d].length==0&&(delete a.g[d],a.h--))}}function ne(a,u,d,g){for(let P=0;P<a.length;++P){const D=a[P];if(!D.da&&D.listener==u&&D.capture==!!d&&D.ha==g)return P}return-1}var x="closure_lm_"+(Math.random()*1e6|0),q={};function Z(a,u,d,g,P){if(Array.isArray(u)){for(let D=0;D<u.length;D++)Z(a,u[D],d,g,P);return null}return d=X(d),a&&a[ot]?a.J(u,d,l(g)?!!g.capture:!1,P):le(a,u,d,!1,g,P)}function le(a,u,d,g,P,D){if(!u)throw Error("Invalid event type");const te=l(P)?!!P.capture:!!P;let Ae=j(a);if(Ae||(a[x]=Ae=new O(a)),d=Ae.add(u,d,g,te,D),d.proxy)return d;if(g=me(),d.proxy=g,g.src=a,g.listener=d,a.addEventListener)C||(P=te),P===void 0&&(P=!1),a.addEventListener(u.toString(),g,P);else if(a.attachEvent)a.attachEvent(S(u.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return d}function me(){function a(d){return u.call(a.src,a.listener,d)}const u=L;return a}function _(a,u,d,g,P){if(Array.isArray(u))for(var D=0;D<u.length;D++)_(a,u[D],d,g,P);else g=l(g)?!!g.capture:!!g,d=X(d),a&&a[ot]?(a=a.i,D=String(u).toString(),D in a.g&&(u=a.g[D],d=ne(u,d,g,P),d>-1&&(Re(u[d]),Array.prototype.splice.call(u,d,1),u.length==0&&(delete a.g[D],a.h--)))):a&&(a=j(a))&&(u=a.g[u.toString()],a=-1,u&&(a=ne(u,d,g,P)),(d=a>-1?u[a]:null)&&b(d))}function b(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[ot])k(u.i,a);else{var d=a.type,g=a.proxy;u.removeEventListener?u.removeEventListener(d,g,a.capture):u.detachEvent?u.detachEvent(S(d),g):u.addListener&&u.removeListener&&u.removeListener(g),(d=j(u))?(k(d,a),d.h==0&&(d.src=null,u[x]=null)):Re(a)}}}function S(a){return a in q?q[a]:q[a]="on"+a}function L(a,u){if(a.da)a=!0;else{u=new je(u,this);const d=a.listener,g=a.ha||a.src;a.fa&&b(a),a=d.call(g,u)}return a}function j(a){return a=a[x],a instanceof O?a:null}var F="__closure_events_fn_"+(Math.random()*1e9>>>0);function X(a){return typeof a=="function"?a:(a[F]||(a[F]=function(u){return a.handleEvent(u)}),a[F])}function Y(){R.call(this),this.i=new O(this),this.M=this,this.G=null}p(Y,R),Y.prototype[ot]=!0,Y.prototype.removeEventListener=function(a,u,d,g){_(this,a,u,d,g)};function W(a,u){var d,g=a.G;if(g)for(d=[];g;g=g.G)d.push(g);if(a=a.M,g=u.type||u,typeof u=="string")u=new A(u,a);else if(u instanceof A)u.target=u.target||a;else{var P=u;u=new A(g,a),ee(u,P)}P=!0;let D,te;if(d)for(te=d.length-1;te>=0;te--)D=u.g=d[te],P=K(D,g,!0,u)&&P;if(D=u.g=a,P=K(D,g,!0,u)&&P,P=K(D,g,!1,u)&&P,d)for(te=0;te<d.length;te++)D=u.g=d[te],P=K(D,g,!1,u)&&P}Y.prototype.N=function(){if(Y.Z.N.call(this),this.i){var a=this.i;for(const u in a.g){const d=a.g[u];for(let g=0;g<d.length;g++)Re(d[g]);delete a.g[u],a.h--}}this.G=null},Y.prototype.J=function(a,u,d,g){return this.i.add(String(a),u,!1,d,g)},Y.prototype.K=function(a,u,d,g){return this.i.add(String(a),u,!0,d,g)};function K(a,u,d,g){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();let P=!0;for(let D=0;D<u.length;++D){const te=u[D];if(te&&!te.da&&te.capture==d){const Ae=te.listener,ct=te.ha||te.src;te.fa&&k(a.i,te),P=Ae.call(ct,g)!==!1&&P}}return P&&!g.defaultPrevented}function he(a,u){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(u)>2147483647?-1:o.setTimeout(a,u||0)}function re(a){a.g=he(()=>{a.g=null,a.i&&(a.i=!1,re(a))},a.l);const u=a.h;a.h=null,a.m.apply(null,u)}class ue extends R{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:re(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function de(a){R.call(this),this.h=a,this.g={}}p(de,R);var ce=[];function ve(a){dt(a.g,function(u,d){this.g.hasOwnProperty(d)&&b(u)},a),a.g={}}de.prototype.N=function(){de.Z.N.call(this),ve(this)},de.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var we=o.JSON.stringify,Te=o.JSON.parse,Fe=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function He(){}function pt(){}var yt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kt(){A.call(this,"d")}p(Kt,A);function tt(){A.call(this,"c")}p(tt,A);var lt={},xs=null;function Yn(){return xs=xs||new Y}lt.Ia="serverreachability";function ks(a){A.call(this,lt.Ia,a)}p(ks,A);function Qt(a){const u=Yn();W(u,new ks(u))}lt.STAT_EVENT="statevent";function ul(a,u){A.call(this,lt.STAT_EVENT,a),this.stat=u}p(ul,A);function vt(a){const u=Yn();W(u,new ul(u,a))}lt.Ja="timingevent";function ei(a,u){A.call(this,lt.Ja,a),this.size=u}p(ei,A);function Ds(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},u)}function Ns(){this.g=!0}Ns.prototype.ua=function(){this.g=!1};function jy(a,u,d,g,P,D){a.info(function(){if(a.g)if(D){var te="",Ae=D.split("&");for(let Ue=0;Ue<Ae.length;Ue++){var ct=Ae[Ue].split("=");if(ct.length>1){const mt=ct[0];ct=ct[1];const gn=mt.split("_");te=gn.length>=2&&gn[1]=="type"?te+(mt+"="+ct+"&"):te+(mt+"=redacted&")}}}else te=null;else te=D;return"XMLHTTP REQ ("+g+") [attempt "+P+"]: "+u+`
`+d+`
`+te})}function Hy(a,u,d,g,P,D,te){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+P+"]: "+u+`
`+d+`
`+D+" "+te})}function ur(a,u,d,g){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+zy(a,d)+(g?" "+g:"")})}function qy(a,u){a.info(function(){return"TIMEOUT: "+u})}Ns.prototype.info=function(){};function zy(a,u){if(!a.g)return u;if(!u)return null;try{const D=JSON.parse(u);if(D){for(a=0;a<D.length;a++)if(Array.isArray(D[a])){var d=D[a];if(!(d.length<2)){var g=d[1];if(Array.isArray(g)&&!(g.length<1)){var P=g[0];if(P!="noop"&&P!="stop"&&P!="close")for(let te=1;te<g.length;te++)g[te]=""}}}}return we(D)}catch{return u}}var co={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},oh={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ah;function hl(){}p(hl,He),hl.prototype.g=function(){return new XMLHttpRequest},ah=new hl;function ti(a){return encodeURIComponent(String(a))}function Gy(a){var u=1;a=a.split(":");const d=[];for(;u>0&&a.length;)d.push(a.shift()),u--;return a.length&&d.push(a.join(":")),d}function Jn(a,u,d,g){this.j=a,this.i=u,this.l=d,this.S=g||1,this.V=new de(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new lh}function lh(){this.i=null,this.g="",this.h=!1}var ch={},fl={};function dl(a,u,d){a.M=1,a.A=ho(mn(u)),a.u=d,a.R=!0,uh(a,null)}function uh(a,u){a.F=Date.now(),uo(a),a.B=mn(a.A);var d=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),Ih(d.i,"t",g),a.C=0,d=a.j.L,a.h=new lh,a.g=Bh(a.j,d?u:null,!a.u),a.P>0&&(a.O=new ue(h(a.Y,a,a.g),a.P)),u=a.V,d=a.g,g=a.ba;var P="readystatechange";Array.isArray(P)||(P&&(ce[0]=P.toString()),P=ce);for(let D=0;D<P.length;D++){const te=Z(d,P[D],g||u.handleEvent,!1,u.h||u);if(!te)break;u.g[te.key]=te}u=a.J?Nt(a.J):{},a.u?(a.v||(a.v="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,u)):(a.v="GET",a.g.ea(a.B,a.v,null,u)),Qt(),jy(a.i,a.v,a.B,a.l,a.S,a.u)}Jn.prototype.ba=function(a){a=a.target;const u=this.O;u&&es(a)==3?u.j():this.Y(a)},Jn.prototype.Y=function(a){try{if(a==this.g)e:{const Ae=es(this.g),ct=this.g.ya(),Ue=this.g.ca();if(!(Ae<3)&&(Ae!=3||this.g&&(this.h.h||this.g.la()||xh(this.g)))){this.K||Ae!=4||ct==7||(ct==8||Ue<=0?Qt(3):Qt(2)),pl(this);var u=this.g.ca();this.X=u;var d=Wy(this);if(this.o=u==200,Hy(this.i,this.v,this.B,this.l,this.S,Ae,u),this.o){if(this.U&&!this.L){t:{if(this.g){var g,P=this.g;if((g=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(g)){var D=g;break t}}D=null}if(a=D)ur(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ml(this,a);else{this.o=!1,this.m=3,vt(12),Vs(this),ni(this);break e}}if(this.R){a=!0;let mt;for(;!this.K&&this.C<d.length;)if(mt=Ky(this,d),mt==fl){Ae==4&&(this.m=4,vt(14),a=!1),ur(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==ch){this.m=4,vt(15),ur(this.i,this.l,d,"[Invalid Chunk]"),a=!1;break}else ur(this.i,this.l,mt,null),ml(this,mt);if(hh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ae!=4||d.length!=0||this.h.h||(this.m=1,vt(16),a=!1),this.o=this.o&&a,!a)ur(this.i,this.l,d,"[Invalid Chunked Response]"),Vs(this),ni(this);else if(d.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),Il(te),te.P=!0,vt(11))}}else ur(this.i,this.l,d,null),ml(this,d);Ae==4&&Vs(this),this.o&&!this.K&&(Ae==4?Lh(this.j,this):(this.o=!1,uo(this)))}else lv(this.g),u==400&&d.indexOf("Unknown SID")>0?(this.m=3,vt(12)):(this.m=0,vt(13)),Vs(this),ni(this)}}}catch{}finally{}};function Wy(a){if(!hh(a))return a.g.la();const u=xh(a.g);if(u==="")return"";let d="";const g=u.length,P=es(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Vs(a),ni(a),"";a.h.i=new o.TextDecoder}for(let D=0;D<g;D++)a.h.h=!0,d+=a.h.i.decode(u[D],{stream:!(P&&D==g-1)});return u.length=0,a.h.g+=d,a.C=0,a.h.g}function hh(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function Ky(a,u){var d=a.C,g=u.indexOf(`
`,d);return g==-1?fl:(d=Number(u.substring(d,g)),isNaN(d)?ch:(g+=1,g+d>u.length?fl:(u=u.slice(g,g+d),a.C=g+d,u)))}Jn.prototype.cancel=function(){this.K=!0,Vs(this)};function uo(a){a.T=Date.now()+a.H,fh(a,a.H)}function fh(a,u){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Ds(h(a.aa,a),u)}function pl(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Jn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(qy(this.i,this.B),this.M!=2&&(Qt(),vt(17)),Vs(this),this.m=2,ni(this)):fh(this,this.T-a)};function ni(a){a.j.I==0||a.K||Lh(a.j,a)}function Vs(a){pl(a);var u=a.O;u&&typeof u.dispose=="function"&&u.dispose(),a.O=null,ve(a.V),a.g&&(u=a.g,a.g=null,u.abort(),u.dispose())}function ml(a,u){try{var d=a.j;if(d.I!=0&&(d.g==a||gl(d.h,a))){if(!a.L&&gl(d.h,a)&&d.I==3){try{var g=d.Ba.g.parse(u)}catch{g=null}if(Array.isArray(g)&&g.length==3){var P=g;if(P[0]==0){e:if(!d.v){if(d.g)if(d.g.F+3e3<a.F)_o(d),mo(d);else break e;Tl(d),vt(18)}}else d.xa=P[1],0<d.xa-d.K&&P[2]<37500&&d.F&&d.A==0&&!d.C&&(d.C=Ds(h(d.Va,d),6e3));mh(d.h)<=1&&d.ta&&(d.ta=void 0)}else Ms(d,11)}else if((a.L||d.g==a)&&_o(d),!E(u))for(P=d.Ba.g.parse(u),u=0;u<P.length;u++){let Ue=P[u];const mt=Ue[0];if(!(mt<=d.K))if(d.K=mt,Ue=Ue[1],d.I==2)if(Ue[0]=="c"){d.M=Ue[1],d.ba=Ue[2];const gn=Ue[3];gn!=null&&(d.ka=gn,d.j.info("VER="+d.ka));const Ls=Ue[4];Ls!=null&&(d.za=Ls,d.j.info("SVER="+d.za));const ts=Ue[5];ts!=null&&typeof ts=="number"&&ts>0&&(g=1.5*ts,d.O=g,d.j.info("backChannelRequestTimeoutMs_="+g)),g=d;const ns=a.g;if(ns){const vo=ns.g?ns.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vo){var D=g.h;D.g||vo.indexOf("spdy")==-1&&vo.indexOf("quic")==-1&&vo.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(_l(D,D.h),D.h=null))}if(g.G){const bl=ns.g?ns.g.getResponseHeader("X-HTTP-Session-Id"):null;bl&&(g.wa=bl,We(g.J,g.G,bl))}}d.I=3,d.l&&d.l.ra(),d.aa&&(d.T=Date.now()-a.F,d.j.info("Handshake RTT: "+d.T+"ms")),g=d;var te=a;if(g.na=$h(g,g.L?g.ba:null,g.W),te.L){gh(g.h,te);var Ae=te,ct=g.O;ct&&(Ae.H=ct),Ae.D&&(pl(Ae),uo(Ae)),g.g=te}else Oh(g);d.i.length>0&&go(d)}else Ue[0]!="stop"&&Ue[0]!="close"||Ms(d,7);else d.I==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?Ms(d,7):El(d):Ue[0]!="noop"&&d.l&&d.l.qa(Ue),d.A=0)}}Qt(4)}catch{}}var Qy=class{constructor(a,u){this.g=a,this.map=u}};function dh(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ph(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function mh(a){return a.h?1:a.g?a.g.size:0}function gl(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function _l(a,u){a.g?a.g.add(u):a.h=u}function gh(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}dh.prototype.cancel=function(){if(this.i=_h(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function _h(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let u=a.i;for(const d of a.g.values())u=u.concat(d.G);return u}return w(a.i)}var yh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yy(a,u){if(a){a=a.split("&");for(let d=0;d<a.length;d++){const g=a[d].indexOf("=");let P,D=null;g>=0?(P=a[d].substring(0,g),D=a[d].substring(g+1)):P=a[d],u(P,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Xn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let u;a instanceof Xn?(this.l=a.l,si(this,a.j),this.o=a.o,this.g=a.g,ri(this,a.u),this.h=a.h,yl(this,bh(a.i)),this.m=a.m):a&&(u=String(a).match(yh))?(this.l=!1,si(this,u[1]||"",!0),this.o=ii(u[2]||""),this.g=ii(u[3]||"",!0),ri(this,u[4]),this.h=ii(u[5]||"",!0),yl(this,u[6]||"",!0),this.m=ii(u[7]||"")):(this.l=!1,this.i=new ai(null,this.l))}Xn.prototype.toString=function(){const a=[];var u=this.j;u&&a.push(oi(u,vh,!0),":");var d=this.g;return(d||u=="file")&&(a.push("//"),(u=this.o)&&a.push(oi(u,vh,!0),"@"),a.push(ti(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,d!=null&&a.push(":",String(d))),(d=this.h)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(oi(d,d.charAt(0)=="/"?Zy:Xy,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",oi(d,tv)),a.join("")},Xn.prototype.resolve=function(a){const u=mn(this);let d=!!a.j;d?si(u,a.j):d=!!a.o,d?u.o=a.o:d=!!a.g,d?u.g=a.g:d=a.u!=null;var g=a.h;if(d)ri(u,a.u);else if(d=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var P=u.h.lastIndexOf("/");P!=-1&&(g=u.h.slice(0,P+1)+g)}if(P=g,P==".."||P==".")g="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){g=P.lastIndexOf("/",0)==0,P=P.split("/");const D=[];for(let te=0;te<P.length;){const Ae=P[te++];Ae=="."?g&&te==P.length&&D.push(""):Ae==".."?((D.length>1||D.length==1&&D[0]!="")&&D.pop(),g&&te==P.length&&D.push("")):(D.push(Ae),g=!0)}g=D.join("/")}else g=P}return d?u.h=g:d=a.i.toString()!=="",d?yl(u,bh(a.i)):d=!!a.m,d&&(u.m=a.m),u};function mn(a){return new Xn(a)}function si(a,u,d){a.j=d?ii(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function ri(a,u){if(u){if(u=Number(u),isNaN(u)||u<0)throw Error("Bad port number "+u);a.u=u}else a.u=null}function yl(a,u,d){u instanceof ai?(a.i=u,nv(a.i,a.l)):(d||(u=oi(u,ev)),a.i=new ai(u,a.l))}function We(a,u,d){a.i.set(u,d)}function ho(a){return We(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function ii(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function oi(a,u,d){return typeof a=="string"?(a=encodeURI(a).replace(u,Jy),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Jy(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var vh=/[#\/\?@]/g,Xy=/[#\?:]/g,Zy=/[#\?]/g,ev=/[#\?@]/g,tv=/#/g;function ai(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function Os(a){a.g||(a.g=new Map,a.h=0,a.i&&Yy(a.i,function(u,d){a.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}t=ai.prototype,t.add=function(a,u){Os(this),this.i=null,a=hr(this,a);let d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(u),this.h+=1,this};function wh(a,u){Os(a),u=hr(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function Eh(a,u){return Os(a),u=hr(a,u),a.g.has(u)}t.forEach=function(a,u){Os(this),this.g.forEach(function(d,g){d.forEach(function(P){a.call(u,P,g,this)},this)},this)};function Th(a,u){Os(a);let d=[];if(typeof u=="string")Eh(a,u)&&(d=d.concat(a.g.get(hr(a,u))));else for(a=Array.from(a.g.values()),u=0;u<a.length;u++)d=d.concat(a[u]);return d}t.set=function(a,u){return Os(this),this.i=null,a=hr(this,a),Eh(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},t.get=function(a,u){return a?(a=Th(this,a),a.length>0?String(a[0]):u):u};function Ih(a,u,d){wh(a,u),d.length>0&&(a.i=null,a.g.set(hr(a,u),w(d)),a.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],u=Array.from(this.g.keys());for(let g=0;g<u.length;g++){var d=u[g];const P=ti(d);d=Th(this,d);for(let D=0;D<d.length;D++){let te=P;d[D]!==""&&(te+="="+ti(d[D])),a.push(te)}}return this.i=a.join("&")};function bh(a){const u=new ai;return u.i=a.i,a.g&&(u.g=new Map(a.g),u.h=a.h),u}function hr(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function nv(a,u){u&&!a.j&&(Os(a),a.i=null,a.g.forEach(function(d,g){const P=g.toLowerCase();g!=P&&(wh(this,g),Ih(this,P,d))},a)),a.j=u}function sv(a,u){const d=new Ns;if(o.Image){const g=new Image;g.onload=f(Zn,d,"TestLoadImage: loaded",!0,u,g),g.onerror=f(Zn,d,"TestLoadImage: error",!1,u,g),g.onabort=f(Zn,d,"TestLoadImage: abort",!1,u,g),g.ontimeout=f(Zn,d,"TestLoadImage: timeout",!1,u,g),o.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else u(!1)}function rv(a,u){const d=new Ns,g=new AbortController,P=setTimeout(()=>{g.abort(),Zn(d,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:g.signal}).then(D=>{clearTimeout(P),D.ok?Zn(d,"TestPingServer: ok",!0,u):Zn(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(P),Zn(d,"TestPingServer: error",!1,u)})}function Zn(a,u,d,g,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),g(d)}catch{}}function iv(){this.g=new Fe}function vl(a){this.i=a.Sb||null,this.h=a.ab||!1}p(vl,He),vl.prototype.g=function(){return new fo(this.i,this.h)};function fo(a,u){Y.call(this),this.H=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(fo,Y),t=fo.prototype,t.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=u,this.readyState=1,ci(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const u={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(u.body=a),(this.H||o).fetch(new Request(this.D,u)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,li(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ci(this)),this.g&&(this.readyState=3,ci(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ah(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ah(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.B.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?li(this):ci(this),this.readyState==3&&Ah(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,li(this))},t.Na=function(a){this.g&&(this.response=a,li(this))},t.ga=function(){this.g&&li(this)};function li(a){a.readyState=4,a.l=null,a.j=null,a.B=null,ci(a)}t.setRequestHeader=function(a,u){this.A.append(a,u)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=u.next();return a.join(`\r
`)};function ci(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(fo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Rh(a){let u="";return dt(a,function(d,g){u+=g,u+=":",u+=d,u+=`\r
`}),u}function wl(a,u,d){e:{for(g in d){var g=!1;break e}g=!0}g||(d=Rh(d),typeof a=="string"?d!=null&&ti(d):We(a,u,d))}function Xe(a){Y.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Xe,Y);var ov=/^https?$/i,av=["POST","PUT"];t=Xe.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,u,d,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ah.g(),this.g.onreadystatechange=m(h(this.Ca,this));try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(D){Sh(this,D);return}if(a=d||"",d=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var P in g)d.set(P,g[P]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const D of g.keys())d.set(D,g.get(D));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(d.keys()).find(D=>D.toLowerCase()=="content-type"),P=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(av,u,void 0)>=0)||g||P||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,te]of d)this.g.setRequestHeader(D,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(D){Sh(this,D)}};function Sh(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.o=5,Ch(a),po(a)}function Ch(a){a.A||(a.A=!0,W(a,"complete"),W(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,W(this,"complete"),W(this,"abort"),po(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),po(this,!0)),Xe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ph(this):this.Xa())},t.Xa=function(){Ph(this)};function Ph(a){if(a.h&&typeof i<"u"){if(a.v&&es(a)==4)setTimeout(a.Ca.bind(a),0);else if(W(a,"readystatechange"),es(a)==4){a.h=!1;try{const D=a.ca();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var d;if(!(d=u)){var g;if(g=D===0){let te=String(a.D).match(yh)[1]||null;!te&&o.self&&o.self.location&&(te=o.self.location.protocol.slice(0,-1)),g=!ov.test(te?te.toLowerCase():"")}d=g}if(d)W(a,"complete"),W(a,"success");else{a.o=6;try{var P=es(a)>2?a.g.statusText:""}catch{P=""}a.l=P+" ["+a.ca()+"]",Ch(a)}}finally{po(a)}}}}function po(a,u){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const d=a.g;a.g=null,u||W(a,"ready");try{d.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function es(a){return a.g?a.g.readyState:0}t.ca=function(){try{return es(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),Te(u)}};function xh(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function lv(a){const u={};a=(a.g&&es(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(E(a[g]))continue;var d=Gy(a[g]);const P=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const D=u[P]||[];u[P]=D,D.push(d)}jt(u,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ui(a,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||u}function kh(a){this.za=0,this.i=[],this.j=new Ns,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ui("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ui("baseRetryDelayMs",5e3,a),this.Za=ui("retryDelaySeedMs",1e4,a),this.Ta=ui("forwardChannelMaxRetries",2,a),this.va=ui("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new dh(a&&a.concurrentRequestLimit),this.Ba=new iv,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=kh.prototype,t.ka=8,t.I=1,t.connect=function(a,u,d,g){vt(0),this.W=a,this.H=u||{},d&&g!==void 0&&(this.H.OSID=d,this.H.OAID=g),this.F=this.X,this.J=$h(this,null,this.W),go(this)};function El(a){if(Dh(a),a.I==3){var u=a.V++,d=mn(a.J);if(We(d,"SID",a.M),We(d,"RID",u),We(d,"TYPE","terminate"),hi(a,d),u=new Jn(a,a.j,u),u.M=2,u.A=ho(mn(d)),d=!1,o.navigator&&o.navigator.sendBeacon)try{d=o.navigator.sendBeacon(u.A.toString(),"")}catch{}!d&&o.Image&&(new Image().src=u.A,d=!0),d||(u.g=Bh(u.j,null),u.g.ea(u.A)),u.F=Date.now(),uo(u)}Uh(a)}function mo(a){a.g&&(Il(a),a.g.cancel(),a.g=null)}function Dh(a){mo(a),a.v&&(o.clearTimeout(a.v),a.v=null),_o(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function go(a){if(!ph(a.h)&&!a.m){a.m=!0;var u=a.Ea;B||y(),H||(B(),H=!0),I.add(u,a),a.D=0}}function cv(a,u){return mh(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=u.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Ds(h(a.Ea,a,u),Fh(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const P=new Jn(this,this.j,a);let D=this.o;if(this.U&&(D?(D=Nt(D),ee(D,this.U)):D=this.U),this.u!==null||this.R||(P.J=D,D=null),this.S)e:{for(var u=0,d=0;d<this.i.length;d++){t:{var g=this.i[d];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(u+=g,u>4096){u=d;break e}if(u===4096||d===this.i.length-1){u=d+1;break e}}u=1e3}else u=1e3;u=Vh(this,P,u),d=mn(this.J),We(d,"RID",a),We(d,"CVER",22),this.G&&We(d,"X-HTTP-Session-Id",this.G),hi(this,d),D&&(this.R?u="headers="+ti(Rh(D))+"&"+u:this.u&&wl(d,this.u,D)),_l(this.h,P),this.Ra&&We(d,"TYPE","init"),this.S?(We(d,"$req",u),We(d,"SID","null"),P.U=!0,dl(P,d,null)):dl(P,d,u),this.I=2}}else this.I==3&&(a?Nh(this,a):this.i.length==0||ph(this.h)||Nh(this))};function Nh(a,u){var d;u?d=u.l:d=a.V++;const g=mn(a.J);We(g,"SID",a.M),We(g,"RID",d),We(g,"AID",a.K),hi(a,g),a.u&&a.o&&wl(g,a.u,a.o),d=new Jn(a,a.j,d,a.D+1),a.u===null&&(d.J=a.o),u&&(a.i=u.G.concat(a.i)),u=Vh(a,d,1e3),d.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),_l(a.h,d),dl(d,g,u)}function hi(a,u){a.H&&dt(a.H,function(d,g){We(u,g,d)}),a.l&&dt({},function(d,g){We(u,g,d)})}function Vh(a,u,d){d=Math.min(a.i.length,d);const g=a.l?h(a.l.Ka,a.l,a):null;e:{var P=a.i;let Ae=-1;for(;;){const ct=["count="+d];Ae==-1?d>0?(Ae=P[0].g,ct.push("ofs="+Ae)):Ae=0:ct.push("ofs="+Ae);let Ue=!0;for(let mt=0;mt<d;mt++){var D=P[mt].g;const gn=P[mt].map;if(D-=Ae,D<0)Ae=Math.max(0,P[mt].g-100),Ue=!1;else try{D="req"+D+"_"||"";try{var te=gn instanceof Map?gn:Object.entries(gn);for(const[Ls,ts]of te){let ns=ts;l(ts)&&(ns=we(ts)),ct.push(D+Ls+"="+encodeURIComponent(ns))}}catch(Ls){throw ct.push(D+"type="+encodeURIComponent("_badmap")),Ls}}catch{g&&g(gn)}}if(Ue){te=ct.join("&");break e}}te=void 0}return a=a.i.splice(0,d),u.G=a,te}function Oh(a){if(!a.g&&!a.v){a.Y=1;var u=a.Da;B||y(),H||(B(),H=!0),I.add(u,a),a.A=0}}function Tl(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Ds(h(a.Da,a),Fh(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Mh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Ds(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,vt(10),mo(this),Mh(this))};function Il(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Mh(a){a.g=new Jn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var u=mn(a.na);We(u,"RID","rpc"),We(u,"SID",a.M),We(u,"AID",a.K),We(u,"CI",a.F?"0":"1"),!a.F&&a.ia&&We(u,"TO",a.ia),We(u,"TYPE","xmlhttp"),hi(a,u),a.u&&a.o&&wl(u,a.u,a.o),a.O&&(a.g.H=a.O);var d=a.g;a=a.ba,d.M=1,d.A=ho(mn(u)),d.u=null,d.R=!0,uh(d,a)}t.Va=function(){this.C!=null&&(this.C=null,mo(this),Tl(this),vt(19))};function _o(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Lh(a,u){var d=null;if(a.g==u){_o(a),Il(a),a.g=null;var g=2}else if(gl(a.h,u))d=u.G,gh(a.h,u),g=1;else return;if(a.I!=0){if(u.o)if(g==1){d=u.u?u.u.length:0,u=Date.now()-u.F;var P=a.D;g=Yn(),W(g,new ei(g,d)),go(a)}else Oh(a);else if(P=u.m,P==3||P==0&&u.X>0||!(g==1&&cv(a,u)||g==2&&Tl(a)))switch(d&&d.length>0&&(u=a.h,u.i=u.i.concat(d)),P){case 1:Ms(a,5);break;case 4:Ms(a,10);break;case 3:Ms(a,6);break;default:Ms(a,2)}}}function Fh(a,u){let d=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(d*=2),d*u}function Ms(a,u){if(a.j.info("Error code "+u),u==2){var d=h(a.bb,a),g=a.Ua;const P=!g;g=new Xn(g||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||si(g,"https"),ho(g),P?sv(g.toString(),d):rv(g.toString(),d)}else vt(2);a.I=0,a.l&&a.l.pa(u),Uh(a),Dh(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function Uh(a){if(a.I=0,a.ja=[],a.l){const u=_h(a.h);(u.length!=0||a.i.length!=0)&&(N(a.ja,u),N(a.ja,a.i),a.h.i.length=0,w(a.i),a.i.length=0),a.l.oa()}}function $h(a,u,d){var g=d instanceof Xn?mn(d):new Xn(d);if(g.g!="")u&&(g.g=u+"."+g.g),ri(g,g.u);else{var P=o.location;g=P.protocol,u=u?u+"."+P.hostname:P.hostname,P=+P.port;const D=new Xn(null);g&&si(D,g),u&&(D.g=u),P&&ri(D,P),d&&(D.h=d),g=D}return d=a.G,u=a.wa,d&&u&&We(g,d,u),We(g,"VER",a.ka),hi(a,g),g}function Bh(a,u,d){if(u&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Aa&&!a.ma?new Xe(new vl({ab:d})):new Xe(a.ma),u.Fa(a.L),u}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function jh(){}t=jh.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function yo(){}yo.prototype.g=function(a,u){return new Ht(a,u)};function Ht(a,u){Y.call(this),this.g=new kh(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.sa&&(a?a["X-WebChannel-Client-Profile"]=u.sa:a={"X-WebChannel-Client-Profile":u.sa}),this.g.U=a,(a=u&&u.Qb)&&!E(a)&&(this.g.u=a),this.A=u&&u.supportsCrossDomainXhr||!1,this.v=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!E(u)&&(this.g.G=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new fr(this)}p(Ht,Y),Ht.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){El(this.g)},Ht.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.v&&(d={},d.__data__=we(a),a=d);u.i.push(new Qy(u.Ya++,a)),u.I==3&&go(u)},Ht.prototype.N=function(){this.g.l=null,delete this.j,El(this.g),delete this.g,Ht.Z.N.call(this)};function Hh(a){Kt.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){e:{for(const d in u){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}p(Hh,Kt);function qh(){tt.call(this),this.status=1}p(qh,tt);function fr(a){this.g=a}p(fr,jh),fr.prototype.ra=function(){W(this.g,"a")},fr.prototype.qa=function(a){W(this.g,new Hh(a))},fr.prototype.pa=function(a){W(this.g,new qh)},fr.prototype.oa=function(){W(this.g,"b")},yo.prototype.createWebChannel=yo.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,c_=function(){return new yo},l_=function(){return Yn()},a_=lt,Rc={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},co.NO_ERROR=0,co.TIMEOUT=8,co.HTTP_ERROR=6,Uo=co,oh.COMPLETE="complete",o_=oh,pt.EventType=yt,yt.OPEN="a",yt.CLOSE="b",yt.ERROR="c",yt.MESSAGE="d",Y.prototype.listen=Y.prototype.J,gi=pt,Xe.prototype.listenOnce=Xe.prototype.K,Xe.prototype.getLastError=Xe.prototype.Ha,Xe.prototype.getLastErrorCode=Xe.prototype.ya,Xe.prototype.getStatus=Xe.prototype.ca,Xe.prototype.getResponseJson=Xe.prototype.La,Xe.prototype.getResponseText=Xe.prototype.la,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Fa,i_=Xe}).apply(typeof bo<"u"?bo:typeof self<"u"?self:typeof window<"u"?window:{});const Ad="@firebase/firestore",Rd="4.9.2";class At{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}At.UNAUTHENTICATED=new At(null),At.GOOGLE_CREDENTIALS=new At("google-credentials-uid"),At.FIRST_PARTY=new At("first-party-uid"),At.MOCK_USER=new At("mock-user");let Qr="12.3.0";const tr=new Ba("@firebase/firestore");function yr(){return tr.logLevel}function oe(t,...e){if(tr.logLevel<=Ce.DEBUG){const n=e.map(Su);tr.debug(`Firestore (${Qr}): ${t}`,...n)}}function Wn(t,...e){if(tr.logLevel<=Ce.ERROR){const n=e.map(Su);tr.error(`Firestore (${Qr}): ${t}`,...n)}}function $r(t,...e){if(tr.logLevel<=Ce.WARN){const n=e.map(Su);tr.warn(`Firestore (${Qr}): ${t}`,...n)}}function Su(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function pe(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,u_(t,s,n)}function u_(t,e,n){let s=`FIRESTORE (${Qr}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Wn(s),new Error(s)}function Le(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||u_(e,r,s)}function Ee(t,e){return t}const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends pn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class _s{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class h_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class X1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(At.UNAUTHENTICATED))}shutdown(){}}class Z1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class eR{constructor(e){this.t=e,this.currentUser=At.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Le(this.o===void 0,42304);let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new _s;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new _s,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},l=c=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new _s)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Le(typeof s.accessToken=="string",31837,{l:s}),new h_(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string",2055,{h:e}),new At(e)}}class tR{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=At.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class nR{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new tR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(At.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Sd{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Le(this.o===void 0,3512);const s=i=>{i.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,oe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Sd(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Le(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Sd(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function rR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}class Cu{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=rR(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Pe(t,e){return t<e?-1:t>e?1:0}function Sc(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return Yl(r)===Yl(i)?Pe(r,i):Yl(r)?1:-1}return Pe(t.length,e.length)}const iR=55296,oR=57343;function Yl(t){const e=t.charCodeAt(0);return e>=iR&&e<=oR}function Br(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}const Cd="__name__";class vn{constructor(e,n,s){n===void 0?n=0:n>e.length&&pe(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&pe(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return vn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof vn?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=vn.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Pe(e.length,n.length)}static compareSegments(e,n){const s=vn.isNumericId(e),r=vn.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?vn.extractNumericId(e).compare(vn.extractNumericId(n)):Sc(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gs.fromString(e.substring(4,e.length-2))}}class ze extends vn{construct(e,n,s){return new ze(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ae(z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new ze(n)}static emptyPath(){return new ze([])}}const aR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Et extends vn{construct(e,n,s){return new Et(e,n,s)}static isValidIdentifier(e){return aR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Cd}static keyField(){return new Et([Cd])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new ae(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new ae(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ae(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(s+=l,r++):(i(),r++)}if(i(),o)throw new ae(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Et(n)}static emptyPath(){return new Et([])}}class fe{constructor(e){this.path=e}static fromPath(e){return new fe(ze.fromString(e))}static fromName(e){return new fe(ze.fromString(e).popFirst(5))}static empty(){return new fe(ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new ze(e.slice()))}}function f_(t,e,n){if(!n)throw new ae(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function lR(t,e,n,s){if(e===!0&&s===!0)throw new ae(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Pd(t){if(!fe.isDocumentKey(t))throw new ae(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function xd(t){if(fe.isDocumentKey(t))throw new ae(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function d_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ka(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pe(12329,{type:typeof t})}function Bi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ae(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ka(t);throw new ae(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function rt(t,e){const n={typeString:t};return e&&(n.value=e),n}function no(t,e){if(!d_(t))throw new ae(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new ae(z.INVALID_ARGUMENT,n);return!0}const kd=-62135596800,Dd=1e6;class Ke{static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Dd);return new Ke(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ae(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ae(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<kd)throw new ae(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Dd}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(no(e,Ke._jsonSchema))return new Ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-kd;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ke._jsonSchemaVersion="firestore/timestamp/1.0",Ke._jsonSchema={type:rt("string",Ke._jsonSchemaVersion),seconds:rt("number"),nanoseconds:rt("number")};class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new Ke(0,0))}static max(){return new ye(new Ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ji=-1;function cR(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=ye.fromTimestamp(s===1e9?new Ke(n+1,0):new Ke(n,s));return new Is(r,fe.empty(),e)}function uR(t){return new Is(t.readTime,t.key,ji)}class Is{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Is(ye.min(),fe.empty(),ji)}static max(){return new Is(ye.max(),fe.empty(),ji)}}function hR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=fe.comparator(t.documentKey,e.documentKey),n!==0?n:Pe(t.largestBatchId,e.largestBatchId))}const fR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Yr(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==fR)throw t;oe("LocalStore","Unexpectedly lost primary lease")}class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,s)=>{n(e)})}static reject(e){return new G((n,s)=>{s(e)})}static waitFor(e){return new G((n,s)=>{let r=0,i=0,o=!1;e.forEach(l=>{++r,l.next(()=>{++i,o&&i===r&&n()},c=>s(c))}),o=!0,i===r&&n()})}static or(e){let n=G.resolve(!1);for(const s of e)n=n.next(r=>r?G.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new G((s,r)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next(f=>{o[h]=f,++l,l===i&&s(o)},f=>r(f))}})}static doWhile(e,n){return new G((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function pR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Jr(t){return t.name==="IndexedDbTransactionError"}class Qa{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Qa.ce=-1;const Pu=-1;function Ya(t){return t==null}function ha(t){return t===0&&1/t==-1/0}function mR(t){return typeof t=="number"&&Number.isInteger(t)&&!ha(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const p_="";function gR(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Nd(e)),e=_R(t.get(n),e);return Nd(e)}function _R(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case p_:n+="";break;default:n+=i}}return n}function Nd(t){return t+p_+""}function Vd(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function or(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function m_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Ye{constructor(e,n){this.comparator=e,this.root=n||wt.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ao(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ao(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ao(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ao(this.root,e,this.comparator,!0)}}class Ao{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wt{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??wt.RED,this.left=r??wt.EMPTY,this.right=i??wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new wt(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return wt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pe(27949);return e+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1;wt.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ft{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Od(this.data.getIterator())}getIteratorFrom(e){return new Od(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ft(this.comparator);return n.data=e,n}}class Od{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class an{constructor(e){this.fields=e,e.sort(Et.comparator)}static empty(){return new an([])}unionWith(e){let n=new ft(Et.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new an(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Br(this.fields,e.fields,(n,s)=>n.isEqual(s))}}class g_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class It{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new g_("Invalid base64 string: "+i):i}}(e);return new It(n)}static fromUint8Array(e){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new It(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}It.EMPTY_BYTE_STRING=new It("");const yR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(t){if(Le(!!t,39018),typeof t=="string"){let e=0;const n=yR.exec(t);if(Le(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:et(t.seconds),nanos:et(t.nanos)}}function et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function As(t){return typeof t=="string"?It.fromBase64String(t):It.fromUint8Array(t)}const __="server_timestamp",y_="__type__",v_="__previous_value__",w_="__local_write_time__";function xu(t){return(t?.mapValue?.fields||{})[y_]?.stringValue===__}function Ja(t){const e=t.mapValue.fields[v_];return xu(e)?Ja(e):e}function Hi(t){const e=bs(t.mapValue.fields[w_].timestampValue);return new Ke(e.seconds,e.nanos)}class vR{constructor(e,n,s,r,i,o,l,c,h,f){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=f}}const fa="(default)";class qi{constructor(e,n){this.projectId=e,this.database=n||fa}static empty(){return new qi("","")}get isDefaultDatabase(){return this.database===fa}isEqual(e){return e instanceof qi&&e.projectId===this.projectId&&e.database===this.database}}const E_="__type__",wR="__max__",Ro={mapValue:{}},T_="__vector__",da="value";function Rs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?xu(t)?4:TR(t)?9007199254740991:ER(t)?10:11:pe(28295,{value:t})}function Nn(t,e){if(t===e)return!0;const n=Rs(t);if(n!==Rs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Hi(t).isEqual(Hi(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=bs(r.timestampValue),l=bs(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return As(r.bytesValue).isEqual(As(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return et(r.geoPointValue.latitude)===et(i.geoPointValue.latitude)&&et(r.geoPointValue.longitude)===et(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return et(r.integerValue)===et(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=et(r.doubleValue),l=et(i.doubleValue);return o===l?ha(o)===ha(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Br(t.arrayValue.values||[],e.arrayValue.values||[],Nn);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Vd(o)!==Vd(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Nn(o[c],l[c])))return!1;return!0}(t,e);default:return pe(52216,{left:t})}}function zi(t,e){return(t.values||[]).find(n=>Nn(n,e))!==void 0}function jr(t,e){if(t===e)return 0;const n=Rs(t),s=Rs(e);if(n!==s)return Pe(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=et(i.integerValue||i.doubleValue),c=et(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Md(t.timestampValue,e.timestampValue);case 4:return Md(Hi(t),Hi(e));case 5:return Sc(t.stringValue,e.stringValue);case 6:return function(i,o){const l=As(i),c=As(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let h=0;h<l.length&&h<c.length;h++){const f=Pe(l[h],c[h]);if(f!==0)return f}return Pe(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Pe(et(i.latitude),et(o.latitude));return l!==0?l:Pe(et(i.longitude),et(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ld(t.arrayValue,e.arrayValue);case 10:return function(i,o){const l=i.fields||{},c=o.fields||{},h=l[da]?.arrayValue,f=c[da]?.arrayValue,p=Pe(h?.values?.length||0,f?.values?.length||0);return p!==0?p:Ld(h,f)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ro.mapValue&&o===Ro.mapValue)return 0;if(i===Ro.mapValue)return 1;if(o===Ro.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),h=o.fields||{},f=Object.keys(h);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const m=Sc(c[p],f[p]);if(m!==0)return m;const w=jr(l[c[p]],h[f[p]]);if(w!==0)return w}return Pe(c.length,f.length)}(t.mapValue,e.mapValue);default:throw pe(23264,{he:n})}}function Md(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Pe(t,e);const n=bs(t),s=bs(e),r=Pe(n.seconds,s.seconds);return r!==0?r:Pe(n.nanos,s.nanos)}function Ld(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=jr(n[r],s[r]);if(i)return i}return Pe(n.length,s.length)}function Hr(t){return Cc(t)}function Cc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=bs(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return As(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return fe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=Cc(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${Cc(n.fields[o])}`;return r+"}"}(t.mapValue):pe(61005,{value:t})}function $o(t){switch(Rs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ja(t);return e?16+$o(e):16;case 5:return 2*t.stringValue.length;case 6:return As(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+$o(i),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return or(s.fields,(i,o)=>{r+=i.length+$o(o)}),r}(t.mapValue);default:throw pe(13486,{value:t})}}function Fd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Pc(t){return!!t&&"integerValue"in t}function ku(t){return!!t&&"arrayValue"in t}function Ud(t){return!!t&&"nullValue"in t}function $d(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bo(t){return!!t&&"mapValue"in t}function ER(t){return(t?.mapValue?.fields||{})[E_]?.stringValue===T_}function Pi(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return or(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Pi(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Pi(t.arrayValue.values[n]);return e}return{...t}}function TR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===wR}class Jt{constructor(e){this.value=e}static empty(){return new Jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Bo(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pi(n)}setAll(e){let n=Et.emptyPath(),s={},r=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=l.popLast()}o?s[l.lastSegment()]=Pi(o):r.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());Bo(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Nn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];Bo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){or(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Jt(Pi(this.value))}}function I_(t){const e=[];return or(t.fields,(n,s)=>{const r=new Et([n]);if(Bo(s)){const i=I_(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new an(e)}class St{constructor(e,n,s,r,i,o,l){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new St(e,0,ye.min(),ye.min(),ye.min(),Jt.empty(),0)}static newFoundDocument(e,n,s,r){return new St(e,1,n,ye.min(),s,r,0)}static newNoDocument(e,n){return new St(e,2,n,ye.min(),ye.min(),Jt.empty(),0)}static newUnknownDocument(e,n){return new St(e,3,n,ye.min(),ye.min(),Jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof St&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new St(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class pa{constructor(e,n){this.position=e,this.inclusive=n}}function Bd(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=fe.comparator(fe.fromName(o.referenceValue),n.key):s=jr(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function jd(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Nn(t.position[n],e.position[n]))return!1;return!0}class ma{constructor(e,n="asc"){this.field=e,this.dir=n}}function IR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class b_{}class st extends b_{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new AR(e,n,s):n==="array-contains"?new CR(e,s):n==="in"?new PR(e,s):n==="not-in"?new xR(e,s):n==="array-contains-any"?new kR(e,s):new st(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new RR(e,s):new SR(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(jr(n,this.value)):n!==null&&Rs(this.value)===Rs(n)&&this.matchesComparison(jr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dn extends b_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new dn(e,n)}matches(e){return A_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function A_(t){return t.op==="and"}function R_(t){return bR(t)&&A_(t)}function bR(t){for(const e of t.filters)if(e instanceof dn)return!1;return!0}function xc(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+Hr(t.value);if(R_(t))return t.filters.map(e=>xc(e)).join(",");{const e=t.filters.map(n=>xc(n)).join(",");return`${t.op}(${e})`}}function S_(t,e){return t instanceof st?function(s,r){return r instanceof st&&s.op===r.op&&s.field.isEqual(r.field)&&Nn(s.value,r.value)}(t,e):t instanceof dn?function(s,r){return r instanceof dn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,l)=>i&&S_(o,r.filters[l]),!0):!1}(t,e):void pe(19439)}function C_(t){return t instanceof st?function(n){return`${n.field.canonicalString()} ${n.op} ${Hr(n.value)}`}(t):t instanceof dn?function(n){return n.op.toString()+" {"+n.getFilters().map(C_).join(" ,")+"}"}(t):"Filter"}class AR extends st{constructor(e,n,s){super(e,n,s),this.key=fe.fromName(s.referenceValue)}matches(e){const n=fe.comparator(e.key,this.key);return this.matchesComparison(n)}}class RR extends st{constructor(e,n){super(e,"in",n),this.keys=P_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class SR extends st{constructor(e,n){super(e,"not-in",n),this.keys=P_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function P_(t,e){return(e.arrayValue?.values||[]).map(n=>fe.fromName(n.referenceValue))}class CR extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ku(n)&&zi(n.arrayValue,this.value)}}class PR extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&zi(this.value.arrayValue,n)}}class xR extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(zi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!zi(this.value.arrayValue,n)}}class kR extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ku(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>zi(this.value.arrayValue,s))}}class DR{constructor(e,n=null,s=[],r=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function Hd(t,e=null,n=[],s=[],r=null,i=null,o=null){return new DR(t,e,n,s,r,i,o)}function Du(t){const e=Ee(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>xc(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),Ya(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Hr(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Hr(s)).join(",")),e.Te=n}return e.Te}function Nu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!IR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!S_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!jd(t.startAt,e.startAt)&&jd(t.endAt,e.endAt)}function kc(t){return fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class so{constructor(e,n=null,s=[],r=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function NR(t,e,n,s,r,i,o,l){return new so(t,e,n,s,r,i,o,l)}function x_(t){return new so(t)}function qd(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function k_(t){return t.collectionGroup!==null}function xi(t){const e=Ee(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ft(Et.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new ma(i,s))}),n.has(Et.keyField().canonicalString())||e.Ie.push(new ma(Et.keyField(),s))}return e.Ie}function bn(t){const e=Ee(t);return e.Ee||(e.Ee=VR(e,xi(t))),e.Ee}function VR(t,e){if(t.limitType==="F")return Hd(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new ma(r.field,i)});const n=t.endAt?new pa(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new pa(t.startAt.position,t.startAt.inclusive):null;return Hd(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Dc(t,e){const n=t.filters.concat([e]);return new so(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Nc(t,e,n){return new so(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Xa(t,e){return Nu(bn(t),bn(e))&&t.limitType===e.limitType}function D_(t){return`${Du(bn(t))}|lt:${t.limitType}`}function vr(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>C_(r)).join(", ")}]`),Ya(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>Hr(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>Hr(r)).join(",")),`Target(${s})`}(bn(t))}; limitType=${t.limitType})`}function Za(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):fe.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of xi(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(o,l,c){const h=Bd(o,l,c);return o.inclusive?h<=0:h<0}(s.startAt,xi(s),r)||s.endAt&&!function(o,l,c){const h=Bd(o,l,c);return o.inclusive?h>=0:h>0}(s.endAt,xi(s),r))}(t,e)}function OR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function N_(t){return(e,n)=>{let s=!1;for(const r of xi(t)){const i=MR(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function MR(t,e,n){const s=t.field.isKeyField()?fe.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),h=l.data.field(i);return c!==null&&h!==null?jr(c,h):pe(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return pe(19790,{direction:t.dir})}}class ar{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){or(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return m_(this.inner)}size(){return this.innerSize}}const LR=new Ye(fe.comparator);function Kn(){return LR}const V_=new Ye(fe.comparator);function _i(...t){let e=V_;for(const n of t)e=e.insert(n.key,n);return e}function O_(t){let e=V_;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Gs(){return ki()}function M_(){return ki()}function ki(){return new ar(t=>t.toString(),(t,e)=>t.isEqual(e))}const FR=new Ye(fe.comparator),UR=new ft(fe.comparator);function xe(...t){let e=UR;for(const n of t)e=e.add(n);return e}const $R=new ft(Pe);function BR(){return $R}function Vu(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ha(e)?"-0":e}}function L_(t){return{integerValue:""+t}}function jR(t,e){return mR(e)?L_(e):Vu(t,e)}class el{constructor(){this._=void 0}}function HR(t,e,n){return t instanceof ga?function(r,i){const o={fields:{[y_]:{stringValue:__},[w_]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&xu(i)&&(i=Ja(i)),i&&(o.fields[v_]=i),{mapValue:o}}(n,e):t instanceof Gi?U_(t,e):t instanceof Wi?$_(t,e):function(r,i){const o=F_(r,i),l=zd(o)+zd(r.Ae);return Pc(o)&&Pc(r.Ae)?L_(l):Vu(r.serializer,l)}(t,e)}function qR(t,e,n){return t instanceof Gi?U_(t,e):t instanceof Wi?$_(t,e):n}function F_(t,e){return t instanceof _a?function(s){return Pc(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class ga extends el{}class Gi extends el{constructor(e){super(),this.elements=e}}function U_(t,e){const n=B_(e);for(const s of t.elements)n.some(r=>Nn(r,s))||n.push(s);return{arrayValue:{values:n}}}class Wi extends el{constructor(e){super(),this.elements=e}}function $_(t,e){let n=B_(e);for(const s of t.elements)n=n.filter(r=>!Nn(r,s));return{arrayValue:{values:n}}}class _a extends el{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function zd(t){return et(t.integerValue||t.doubleValue)}function B_(t){return ku(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function zR(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof Gi&&r instanceof Gi||s instanceof Wi&&r instanceof Wi?Br(s.elements,r.elements,Nn):s instanceof _a&&r instanceof _a?Nn(s.Ae,r.Ae):s instanceof ga&&r instanceof ga}(t.transform,e.transform)}class GR{constructor(e,n){this.version=e,this.transformResults=n}}class An{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new An}static exists(e){return new An(void 0,e)}static updateTime(e){return new An(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jo(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class tl{}function j_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ou(t.key,An.none()):new ro(t.key,t.data,An.none());{const n=t.data,s=Jt.empty();let r=new ft(Et.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new lr(t.key,s,new an(r.toArray()),An.none())}}function WR(t,e,n){t instanceof ro?function(r,i,o){const l=r.value.clone(),c=Wd(r.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof lr?function(r,i,o){if(!jo(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Wd(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(H_(r)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Di(t,e,n,s){return t instanceof ro?function(i,o,l,c){if(!jo(i.precondition,o))return l;const h=i.value.clone(),f=Kd(i.fieldTransforms,c,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,s):t instanceof lr?function(i,o,l,c){if(!jo(i.precondition,o))return l;const h=Kd(i.fieldTransforms,c,o),f=o.data;return f.setAll(H_(i)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,s):function(i,o,l){return jo(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function KR(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=F_(s.transform,r||null);i!=null&&(n===null&&(n=Jt.empty()),n.set(s.field,i))}return n||null}function Gd(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Br(s,r,(i,o)=>zR(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ro extends tl{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class lr extends tl{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function H_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function Wd(t,e,n){const s=new Map;Le(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,l=e.data.field(i.field);s.set(i.field,qR(o,l,n[r]))}return s}function Kd(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,HR(i,o,e))}return s}class Ou extends tl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QR extends tl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class YR{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&WR(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Di(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Di(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=M_();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(r.key)?null:l;const c=j_(o,l);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(ye.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),xe())}isEqual(e){return this.batchId===e.batchId&&Br(this.mutations,e.mutations,(n,s)=>Gd(n,s))&&Br(this.baseMutations,e.baseMutations,(n,s)=>Gd(n,s))}}class Mu{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){Le(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=function(){return FR}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Mu(e,n,s,r)}}class JR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class XR{constructor(e,n){this.count=e,this.unchangedNames=n}}var nt,ke;function ZR(t){switch(t){case z.OK:return pe(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return pe(15467,{code:t})}}function q_(t){if(t===void 0)return Wn("GRPC error has no .code"),z.UNKNOWN;switch(t){case nt.OK:return z.OK;case nt.CANCELLED:return z.CANCELLED;case nt.UNKNOWN:return z.UNKNOWN;case nt.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case nt.INTERNAL:return z.INTERNAL;case nt.UNAVAILABLE:return z.UNAVAILABLE;case nt.UNAUTHENTICATED:return z.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case nt.NOT_FOUND:return z.NOT_FOUND;case nt.ALREADY_EXISTS:return z.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return z.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case nt.ABORTED:return z.ABORTED;case nt.OUT_OF_RANGE:return z.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return z.UNIMPLEMENTED;case nt.DATA_LOSS:return z.DATA_LOSS;default:return pe(39323,{code:t})}}(ke=nt||(nt={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";function eS(){return new TextEncoder}const tS=new gs([4294967295,4294967295],0);function Qd(t){const e=eS().encode(t),n=new r_;return n.update(e),new Uint8Array(n.digest())}function Yd(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new gs([n,s],0),new gs([r,i],0)]}class Lu{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new yi(`Invalid padding: ${n}`);if(s<0)throw new yi(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new yi(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new yi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=gs.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(gs.fromNumber(s)));return r.compare(tS)===1&&(r=new gs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Qd(e),[s,r]=Yd(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Lu(i,r,n);return s.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=Qd(e),[s,r]=Yd(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class yi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class nl{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,io.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new nl(ye.min(),r,new Ye(Pe),Kn(),xe())}}class io{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new io(s,n,xe(),xe(),xe())}}class Ho{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class z_{constructor(e,n){this.targetId=e,this.Ce=n}}class G_{constructor(e,n,s=It.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Jd{constructor(){this.ve=0,this.Fe=Xd(),this.Me=It.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=xe(),n=xe(),s=xe();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:pe(38017,{changeType:i})}}),new io(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Xd()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Le(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class nS{constructor(e){this.Ge=e,this.ze=new Map,this.je=Kn(),this.Je=So(),this.He=So(),this.Ye=new Ye(Pe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:pe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(kc(i))if(s===0){const o=new fe(i.path);this.et(n,o,St.newNoDocument(o,ye.min()))}else Le(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,l;try{o=As(s).toUint8Array()}catch(c){if(c instanceof g_)return $r("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Lu(o,r,i)}catch(c){return $r(c instanceof yi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&kc(l.target)){const c=new fe(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,St.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let s=xe();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const h=this.ot(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const r=new nl(e,n,this.Ye,this.je,s);return this.je=Kn(),this.Je=So(),this.He=So(),this.Ye=new Ye(Pe),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Jd,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ft(Pe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ft(Pe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Jd),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function So(){return new Ye(fe.comparator)}function Xd(){return new Ye(fe.comparator)}const sS={asc:"ASCENDING",desc:"DESCENDING"},rS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iS={and:"AND",or:"OR"};class oS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vc(t,e){return t.useProto3Json||Ya(e)?e:{value:e}}function ya(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function W_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function aS(t,e){return ya(t,e.toTimestamp())}function Rn(t){return Le(!!t,49232),ye.fromTimestamp(function(n){const s=bs(n);return new Ke(s.seconds,s.nanos)}(t))}function Fu(t,e){return Oc(t,e).canonicalString()}function Oc(t,e){const n=function(r){return new ze(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function K_(t){const e=ze.fromString(t);return Le(Z_(e),10190,{key:e.toString()}),e}function Mc(t,e){return Fu(t.databaseId,e.path)}function Jl(t,e){const n=K_(e);if(n.get(1)!==t.databaseId.projectId)throw new ae(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ae(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new fe(Y_(n))}function Q_(t,e){return Fu(t.databaseId,e)}function lS(t){const e=K_(t);return e.length===4?ze.emptyPath():Y_(e)}function Lc(t){return new ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Y_(t){return Le(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Zd(t,e,n){return{name:Mc(t,e),fields:n.value.mapValue.fields}}function cS(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:pe(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(h,f){return h.useProto3Json?(Le(f===void 0||typeof f=="string",58123),It.fromBase64String(f||"")):(Le(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),It.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const f=h.code===void 0?z.UNKNOWN:q_(h.code);return new ae(f,h.message||"")}(o);n=new G_(s,r,i,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Jl(t,s.document.name),i=Rn(s.document.updateTime),o=s.document.createTime?Rn(s.document.createTime):ye.min(),l=new Jt({mapValue:{fields:s.document.fields}}),c=St.newFoundDocument(r,i,o,l),h=s.targetIds||[],f=s.removedTargetIds||[];n=new Ho(h,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Jl(t,s.document),i=s.readTime?Rn(s.readTime):ye.min(),o=St.newNoDocument(r,i),l=s.removedTargetIds||[];n=new Ho([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Jl(t,s.document),i=s.removedTargetIds||[];n=new Ho([],i,r,null)}else{if(!("filter"in e))return pe(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new XR(r,i),l=s.targetId;n=new z_(l,o)}}return n}function uS(t,e){let n;if(e instanceof ro)n={update:Zd(t,e.key,e.value)};else if(e instanceof Ou)n={delete:Mc(t,e.key)};else if(e instanceof lr)n={update:Zd(t,e.key,e.data),updateMask:vS(e.fieldMask)};else{if(!(e instanceof QR))return pe(16599,{Vt:e.type});n={verify:Mc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const l=o.transform;if(l instanceof ga)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Gi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Wi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof _a)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw pe(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:aS(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:pe(27497)}(t,e.precondition)),n}function hS(t,e){return t&&t.length>0?(Le(e!==void 0,14353),t.map(n=>function(r,i){let o=r.updateTime?Rn(r.updateTime):Rn(i);return o.isEqual(ye.min())&&(o=Rn(i)),new GR(o,r.transformResults||[])}(n,e))):[]}function fS(t,e){return{documents:[Q_(t,e.path)]}}function dS(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Q_(t,r);const i=function(h){if(h.length!==0)return X_(dn.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(f=>function(m){return{field:wr(m.field),direction:gS(m.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Vc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:r}}function pS(t){let e=lS(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Le(s===1,65062);const f=n.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(p){const m=J_(p);return m instanceof dn&&R_(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(N){return new ma(Er(N.field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,Ya(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(p){const m=!!p.before,w=p.values||[];return new pa(w,m)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const m=!p.before,w=p.values||[];return new pa(w,m)}(n.endAt)),NR(e,r,o,i,l,"F",c,h)}function mS(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function J_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Er(n.unaryFilter.field);return st.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=Er(n.unaryFilter.field);return st.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Er(n.unaryFilter.field);return st.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Er(n.unaryFilter.field);return st.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}}(t):t.fieldFilter!==void 0?function(n){return st.create(Er(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return dn.create(n.compositeFilter.filters.map(s=>J_(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return pe(1026)}}(n.compositeFilter.op))}(t):pe(30097,{filter:t})}function gS(t){return sS[t]}function _S(t){return rS[t]}function yS(t){return iS[t]}function wr(t){return{fieldPath:t.canonicalString()}}function Er(t){return Et.fromServerFormat(t.fieldPath)}function X_(t){return t instanceof st?function(n){if(n.op==="=="){if($d(n.value))return{unaryFilter:{field:wr(n.field),op:"IS_NAN"}};if(Ud(n.value))return{unaryFilter:{field:wr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($d(n.value))return{unaryFilter:{field:wr(n.field),op:"IS_NOT_NAN"}};if(Ud(n.value))return{unaryFilter:{field:wr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wr(n.field),op:_S(n.op),value:n.value}}}(t):t instanceof dn?function(n){const s=n.getFilters().map(r=>X_(r));return s.length===1?s[0]:{compositeFilter:{op:yS(n.op),filters:s}}}(t):pe(54877,{filter:t})}function vS(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Z_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class fs{constructor(e,n,s,r,i=ye.min(),o=ye.min(),l=It.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class wS{constructor(e){this.yt=e}}function ES(t){const e=pS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Nc(e,e.limit,"L"):e}class TS{constructor(){this.Cn=new IS}addToCollectionParentIndex(e,n){return this.Cn.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(Is.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(Is.min())}updateCollectionGroup(e,n,s){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class IS{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new ft(ze.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new ft(ze.comparator)).toArray()}}const ep={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ey=41943040;class $t{static withCacheSize(e){return new $t(e,$t.DEFAULT_COLLECTION_PERCENTILE,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}$t.DEFAULT_COLLECTION_PERCENTILE=10,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$t.DEFAULT=new $t(ey,$t.DEFAULT_COLLECTION_PERCENTILE,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$t.DISABLED=new $t(-1,0,0);class qr{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new qr(0)}static cr(){return new qr(-1)}}const tp="LruGarbageCollector",bS=1048576;function np([t,e],[n,s]){const r=Pe(t,n);return r===0?Pe(e,s):r}class AS{constructor(e){this.Ir=e,this.buffer=new ft(np),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();np(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class RS{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(tp,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Jr(n)?oe(tp,"Ignoring IndexedDB error during garbage collection: ",n):await Yr(n)}await this.Vr(3e5)})}}class SS{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return G.resolve(Qa.ce);const s=new AS(n);return this.mr.forEachTarget(e,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(ep)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ep):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,l,c,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,o=Date.now(),this.nthSequenceNumber(e,r))).next(p=>(s=p,l=Date.now(),this.removeTargets(e,s,n))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,s))).next(p=>(h=Date.now(),yr()<=Ce.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${r} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(h-c)+`ms
Total Duration: ${h-f}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:p})))}}function CS(t,e){return new SS(t,e)}class PS{constructor(){this.changes=new ar(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,St.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?G.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class xS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class kS{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&Di(s.mutation,r,an.empty(),Ke.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,xe()).next(()=>s))}getLocalViewOfDocuments(e,n,s=xe()){const r=Gs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=_i();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=Gs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,xe()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,s,r){let i=Kn();const o=ki(),l=function(){return ki()}();return n.forEach((c,h)=>{const f=s.get(h.key);r.has(h.key)&&(f===void 0||f.mutation instanceof lr)?i=i.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),Di(f.mutation,h,f.mutation.getFieldMask(),Ke.now())):o.set(h.key,an.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((h,f)=>o.set(h,f)),n.forEach((h,f)=>l.set(h,new xS(f,o.get(h)??null))),l))}recalculateAndSaveOverlays(e,n){const s=ki();let r=new Ye((o,l)=>o-l),i=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let f=s.get(c)||an.empty();f=l.applyToLocalView(h,f),s.set(c,f);const p=(r.get(l.batchId)||xe()).add(c);r=r.insert(l.batchId,p)})}).next(()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,f=c.value,p=M_();f.forEach(m=>{if(!i.has(m)){const w=j_(n.get(m),s.get(m));w!==null&&p.set(m,w),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return G.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(o){return fe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):k_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):G.resolve(Gs());let l=ji,c=i;return o.next(h=>G.forEach(h,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(f)?G.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{c=c.insert(f,m)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,c,h,xe())).next(f=>({batchId:l,changes:O_(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new fe(n)).next(s=>{let r=_i();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=_i();return this.indexManager.getCollectionParents(e,i).next(l=>G.forEach(l,c=>{const h=function(p,m){return new so(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,s,r).next(f=>{f.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((c,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,St.newInvalidDocument(f)))});let l=_i();return o.forEach((c,h)=>{const f=i.get(c);f!==void 0&&Di(f.mutation,h,an.empty(),Ke.now()),Za(n,h)&&(l=l.insert(c,h))}),l})}}class DS{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return G.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Rn(r.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:ES(r.bundledQuery),readTime:Rn(r.readTime)}}(n)),G.resolve()}}class NS{constructor(){this.overlays=new Ye(fe.comparator),this.qr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Gs();return G.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),G.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),G.resolve()}getOverlaysForCollection(e,n,s){const r=Gs(),i=n.length+1,o=new fe(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return G.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Ye((h,f)=>h-f);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>s){let f=i.get(h.largestBatchId);f===null&&(f=Gs(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=Gs(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=r)););return G.resolve(l)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new JR(n,s));let i=this.qr.get(n);i===void 0&&(i=xe(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}class VS{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}class Uu{constructor(){this.Qr=new ft(gt.$r),this.Ur=new ft(gt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new gt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new gt(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new fe(new ze([])),s=new gt(n,e),r=new gt(n,e+1),i=[];return this.Ur.forEachInRange([s,r],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new fe(new ze([])),s=new gt(n,e),r=new gt(n,e+1);let i=xe();return this.Ur.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new gt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class gt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return fe.comparator(e.key,n.key)||Pe(e.Yr,n.Yr)}static Kr(e,n){return Pe(e.Yr,n.Yr)||fe.comparator(e.key,n.key)}}class OS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ft(gt.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new YR(i,n,s,r);this.mutationQueue.push(o);for(const l of r)this.Zr=this.Zr.add(new gt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,n){return G.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return G.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?Pu:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new gt(n,0),r=new gt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],o=>{const l=this.Xr(o.Yr);i.push(l)}),G.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new ft(Pe);return n.forEach(r=>{const i=new gt(r,0),o=new gt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{s=s.add(l.Yr)})}),G.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;fe.isDocumentKey(i)||(i=i.child(""));const o=new gt(new fe(i),0);let l=new ft(Pe);return this.Zr.forEachWhile(c=>{const h=c.key.path;return!!s.isPrefixOf(h)&&(h.length===r&&(l=l.add(c.Yr)),!0)},o),G.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(s=>{const r=this.Xr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Le(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return G.forEach(n.mutations,r=>{const i=new gt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new gt(n,0),r=this.Zr.firstAfterOrEqual(s);return G.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class MS{constructor(e){this.ri=e,this.docs=function(){return new Ye(fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return G.resolve(s?s.document.mutableCopy():St.newInvalidDocument(n))}getEntries(e,n){let s=Kn();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():St.newInvalidDocument(r))}),G.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=Kn();const o=n.path,l=new fe(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:f}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||hR(uR(f),s)<=0||(r.has(f.key)||Za(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return G.resolve(i)}getAllFromCollectionGroup(e,n,s,r){pe(9500)}ii(e,n){return G.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new LS(this)}getSize(e){return G.resolve(this.size)}}class LS extends PS{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)}),G.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class FS{constructor(e){this.persistence=e,this.si=new ar(n=>Du(n),Nu),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.oi=0,this._i=new Uu,this.targetCount=0,this.ai=qr.ur()}forEachTarget(e,n){return this.si.forEach((s,r)=>n(r)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),G.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new qr(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Pr(n),G.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),G.waitFor(i).next(()=>r)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return G.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),G.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),G.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return G.resolve(s)}containsKey(e,n){return G.resolve(this._i.containsKey(n))}}class ty{constructor(e,n){this.ui={},this.overlays={},this.ci=new Qa(0),this.li=!1,this.li=!0,this.hi=new VS,this.referenceDelegate=e(this),this.Pi=new FS(this),this.indexManager=new TS,this.remoteDocumentCache=function(r){return new MS(r)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new wS(n),this.Ii=new DS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new NS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new OS(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){oe("MemoryPersistence","Starting transaction:",e);const r=new US(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(e,n){return G.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class US extends dR{constructor(e){super(),this.currentSequenceNumber=e}}class $u{constructor(e){this.persistence=e,this.Ri=new Uu,this.Vi=null}static mi(e){return new $u(e)}get fi(){if(this.Vi)return this.Vi;throw pe(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),G.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),G.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,s=>{const r=fe.fromPath(s);return this.gi(e,r).next(i=>{i||n.removeEntry(r,ye.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return G.or([()=>G.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class va{constructor(e,n){this.persistence=e,this.pi=new ar(s=>gR(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=CS(this,n)}static mi(e,n){return new va(e,n)}Ei(){}di(e){return G.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return G.forEach(this.pi,(s,r)=>this.br(e,s,r).next(i=>i?G.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,o=>this.br(e,o,n).next(l=>{l||(s++,i.removeEntry(o,ye.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),G.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=$o(e.data.value)),n}br(e,n,s){return G.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return G.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Bu{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=xe(),r=xe();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Bu(e,n.fromCache,s,r)}}class $S{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class BS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return cT()?8:pR(Dt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new $S;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,s,r){return s.documentReadCount<this.fs?(yr()<=Ce.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",vr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(yr()<=Ce.DEBUG&&oe("QueryEngine","Query:",vr(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(yr()<=Ce.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",vr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bn(n))):G.resolve())}ys(e,n){if(qd(n))return G.resolve(null);let s=bn(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Nc(n,null,"F"),s=bn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=xe(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,s).next(c=>{const h=this.Ds(n,l);return this.Cs(n,h,o,c.readTime)?this.ys(e,Nc(n,null,"F")):this.vs(e,h,n,c)}))})))}ws(e,n,s,r){return qd(n)||r.isEqual(ye.min())?G.resolve(null):this.ps.getDocuments(e,s).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?G.resolve(null):(yr()<=Ce.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),vr(n)),this.vs(e,o,n,cR(r,ji)).next(l=>l))})}Ds(e,n){let s=new ft(N_(e));return n.forEach((r,i)=>{Za(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return yr()<=Ce.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",vr(n)),this.ps.getDocumentsMatchingQuery(e,n,Is.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}const ju="LocalStore",jS=3e8;class HS{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Ye(Pe),this.xs=new ar(i=>Du(i),Nu),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function qS(t,e,n,s){return new HS(t,e,n,s)}async function ny(t,e){const n=Ee(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],l=[];let c=xe();for(const h of r){o.push(h.batchId);for(const f of h.mutations)c=c.add(f.key)}for(const h of i){l.push(h.batchId);for(const f of h.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(s,c).next(h=>({Ls:h,removedBatchIds:o,addedBatchIds:l}))})})}function zS(t,e){const n=Ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,h,f){const p=h.batch,m=p.keys();let w=G.resolve();return m.forEach(N=>{w=w.next(()=>f.getEntry(c,N)).next(M=>{const $=h.docVersions.get(N);Le($!==null,48541),M.version.compareTo($)<0&&(p.applyToRemoteDocument(M,h),M.isValidDocument()&&(M.setReadTime(h.commitVersion),f.addEntry(M)))})}),w.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let c=xe();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function sy(t){const e=Ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function GS(t,e){const n=Ee(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];e.targetChanges.forEach((f,p)=>{const m=r.get(p);if(!m)return;l.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(i,f.addedDocuments,p)));let w=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(It.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,s)),r=r.insert(p,w),function(M,$,Q){return M.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=jS?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0}(m,w,f)&&l.push(n.Pi.updateTargetData(i,w))});let c=Kn(),h=xe();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(WS(i,o,e.documentUpdates).next(f=>{c=f.ks,h=f.qs})),!s.isEqual(ye.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next(p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));l.push(f)}return G.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(n.Ms=r,i))}function WS(t,e,n){let s=xe(),r=xe();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=Kn();return n.forEach((l,c)=>{const h=i.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(ye.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):oe(ju,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)}),{ks:o,qs:r}})}function KS(t,e){const n=Ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Pu),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function QS(t,e){const n=Ee(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Pi.getTargetData(s,e).next(i=>i?(r=i,G.resolve(r)):n.Pi.allocateTargetId(s).next(o=>(r=new fs(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function Fc(t,e,n){const s=Ee(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Jr(o))throw o;oe(ju,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function sp(t,e,n){const s=Ee(t);let r=ye.min(),i=xe();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,f){const p=Ee(c),m=p.xs.get(f);return m!==void 0?G.resolve(p.Ms.get(m)):p.Pi.getTargetData(h,f)}(s,o,bn(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:ye.min(),n?i:xe())).next(l=>(YS(s,OR(e),l),{documents:l,Qs:i})))}function YS(t,e,n){let s=t.Os.get(e)||ye.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Os.set(e,s)}class rp{constructor(){this.activeTargetIds=BR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JS{constructor(){this.Mo=new rp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new rp,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class XS{Oo(e){}shutdown(){}}const ip="ConnectivityMonitor";class op{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(ip,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oe(ip,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Co=null;function Uc(){return Co===null?Co=function(){return 268435456+Math.round(2147483648*Math.random())}():Co++,"0x"+Co.toString(16)}const Xl="RestConnection",ZS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===fa?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=Uc(),l=this.zo(e,n.toUriEncodedString());oe(Xl,`Sending RPC '${e}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,i);const{host:h}=new URL(l),f=Gr(h);return this.Jo(e,l,c,s,f).then(p=>(oe(Xl,`Received RPC '${e}' ${o}: `,p),p),p=>{throw $r(Xl,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",s),p})}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qr}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}zo(e,n){const s=ZS[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class tC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const bt="WebChannelConnection";class nC extends eC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=Uc();return new Promise((l,c)=>{const h=new i_;h.setWithCredentials(!0),h.listenOnce(o_.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Uo.NO_ERROR:const p=h.getResponseJson();oe(bt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case Uo.TIMEOUT:oe(bt,`RPC '${e}' ${o} timed out`),c(new ae(z.DEADLINE_EXCEEDED,"Request time out"));break;case Uo.HTTP_ERROR:const m=h.getStatus();if(oe(bt,`RPC '${e}' ${o} failed with status:`,m,"response text:",h.getResponseText()),m>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const N=w?.error;if(N&&N.status&&N.message){const M=function(Q){const V=Q.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(V)>=0?V:z.UNKNOWN}(N.status);c(new ae(M,N.message))}else c(new ae(z.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new ae(z.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{oe(bt,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(r);oe(bt,`RPC '${e}' ${o} sending request:`,r),h.send(n,"POST",f,s,15)})}T_(e,n,s){const r=Uc(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=c_(),l=l_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const f=i.join("");oe(bt,`Creating RPC '${e}' stream ${r}: ${f}`,c);const p=o.createWebChannel(f,c);this.I_(p);let m=!1,w=!1;const N=new tC({Yo:$=>{w?oe(bt,`Not sending because RPC '${e}' stream ${r} is closed:`,$):(m||(oe(bt,`Opening RPC '${e}' stream ${r} transport.`),p.open(),m=!0),oe(bt,`RPC '${e}' stream ${r} sending:`,$),p.send($))},Zo:()=>p.close()}),M=($,Q,V)=>{$.listen(Q,U=>{try{V(U)}catch(J){setTimeout(()=>{throw J},0)}})};return M(p,gi.EventType.OPEN,()=>{w||(oe(bt,`RPC '${e}' stream ${r} transport opened.`),N.o_())}),M(p,gi.EventType.CLOSE,()=>{w||(w=!0,oe(bt,`RPC '${e}' stream ${r} transport closed`),N.a_(),this.E_(p))}),M(p,gi.EventType.ERROR,$=>{w||(w=!0,$r(bt,`RPC '${e}' stream ${r} transport errored. Name:`,$.name,"Message:",$.message),N.a_(new ae(z.UNAVAILABLE,"The operation could not be completed")))}),M(p,gi.EventType.MESSAGE,$=>{if(!w){const Q=$.data[0];Le(!!Q,16349);const V=Q,U=V?.error||V[0]?.error;if(U){oe(bt,`RPC '${e}' stream ${r} received error:`,U);const J=U.status;let B=function(y){const v=nt[y];if(v!==void 0)return q_(v)}(J),H=U.message;B===void 0&&(B=z.INTERNAL,H="Unknown error status: "+J+" with message "+U.message),w=!0,N.a_(new ae(B,H)),p.close()}else oe(bt,`RPC '${e}' stream ${r} received:`,Q),N.u_(Q)}}),M(l,a_.STAT_EVENT,$=>{$.stat===Rc.PROXY?oe(bt,`RPC '${e}' stream ${r} detected buffering proxy`):$.stat===Rc.NOPROXY&&oe(bt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Zl(){return typeof document<"u"?document:null}function sl(t){return new oS(t,!0)}class ry{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&oe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ap="PersistentStream";class iy{constructor(e,n,s,r,i,o,l,c){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ry(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Wn(n.toString()),Wn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===n&&this.G_(s,r)},s=>{e(()=>{const r=new ae(z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return oe(ap,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(oe(ap,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sC extends iy{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=cS(this.serializer,e),s=function(i){if(!("targetChange"in i))return ye.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ye.min():o.readTime?Rn(o.readTime):ye.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Lc(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=kc(c)?{documents:fS(i,c)}:{query:dS(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=W_(i,o.resumeToken);const h=Vc(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(ye.min())>0){l.readTime=ya(i,o.snapshotVersion.toTimestamp());const h=Vc(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const s=mS(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Lc(this.serializer),n.removeTarget=e,this.q_(n)}}class rC extends iy{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Le(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Le(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Le(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=hS(e.writeResults,e.commitTime),s=Rn(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Lc(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>uS(this.serializer,s))};this.q_(n)}}class iC{}class oC extends iC{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ae(z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Oc(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ae(z.UNKNOWN,i.toString())})}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,Oc(n,s),r,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ae(z.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class aC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Wn(n),this.aa=!1):oe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const nr="RemoteStore";class lC{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{cr(this)&&(oe(nr,"Restarting streams for network reachability change."),await async function(c){const h=Ee(c);h.Ea.add(4),await oo(h),h.Ra.set("Unknown"),h.Ea.delete(4),await rl(h)}(this))})}),this.Ra=new aC(s,r)}}async function rl(t){if(cr(t))for(const e of t.da)await e(!0)}async function oo(t){for(const e of t.da)await e(!1)}function oy(t,e){const n=Ee(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Gu(n)?zu(n):Xr(n).O_()&&qu(n,e))}function Hu(t,e){const n=Ee(t),s=Xr(n);n.Ia.delete(e),s.O_()&&ay(n,e),n.Ia.size===0&&(s.O_()?s.L_():cr(n)&&n.Ra.set("Unknown"))}function qu(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xr(t).Y_(e)}function ay(t,e){t.Va.Ue(e),Xr(t).Z_(e)}function zu(t){t.Va=new nS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Xr(t).start(),t.Ra.ua()}function Gu(t){return cr(t)&&!Xr(t).x_()&&t.Ia.size>0}function cr(t){return Ee(t).Ea.size===0}function ly(t){t.Va=void 0}async function cC(t){t.Ra.set("Online")}async function uC(t){t.Ia.forEach((e,n)=>{qu(t,e)})}async function hC(t,e){ly(t),Gu(t)?(t.Ra.ha(e),zu(t)):t.Ra.set("Unknown")}async function fC(t,e,n){if(t.Ra.set("Online"),e instanceof G_&&e.state===2&&e.cause)try{await async function(r,i){const o=i.cause;for(const l of i.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.Ia.delete(l),r.Va.removeTarget(l))}(t,e)}catch(s){oe(nr,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await wa(t,s)}else if(e instanceof Ho?t.Va.Ze(e):e instanceof z_?t.Va.st(e):t.Va.tt(e),!n.isEqual(ye.min()))try{const s=await sy(t.localStore);n.compareTo(s)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.Ia.get(h);f&&i.Ia.set(h,f.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,h)=>{const f=i.Ia.get(c);if(!f)return;i.Ia.set(c,f.withResumeToken(It.EMPTY_BYTE_STRING,f.snapshotVersion)),ay(i,c);const p=new fs(f.target,c,h,f.sequenceNumber);qu(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(s){oe(nr,"Failed to raise snapshot:",s),await wa(t,s)}}async function wa(t,e,n){if(!Jr(e))throw e;t.Ea.add(1),await oo(t),t.Ra.set("Offline"),n||(n=()=>sy(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{oe(nr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await rl(t)})}function cy(t,e){return e().catch(n=>wa(t,n,e))}async function il(t){const e=Ee(t),n=Ss(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Pu;for(;dC(e);)try{const r=await KS(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,pC(e,r)}catch(r){await wa(e,r)}uy(e)&&hy(e)}function dC(t){return cr(t)&&t.Ta.length<10}function pC(t,e){t.Ta.push(e);const n=Ss(t);n.O_()&&n.X_&&n.ea(e.mutations)}function uy(t){return cr(t)&&!Ss(t).x_()&&t.Ta.length>0}function hy(t){Ss(t).start()}async function mC(t){Ss(t).ra()}async function gC(t){const e=Ss(t);for(const n of t.Ta)e.ea(n.mutations)}async function _C(t,e,n){const s=t.Ta.shift(),r=Mu.from(s,e,n);await cy(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await il(t)}async function yC(t,e){e&&Ss(t).X_&&await async function(s,r){if(function(o){return ZR(o)&&o!==z.ABORTED}(r.code)){const i=s.Ta.shift();Ss(s).B_(),await cy(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await il(s)}}(t,e),uy(t)&&hy(t)}async function lp(t,e){const n=Ee(t);n.asyncQueue.verifyOperationInProgress(),oe(nr,"RemoteStore received new credentials");const s=cr(n);n.Ea.add(3),await oo(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await rl(n)}async function vC(t,e){const n=Ee(t);e?(n.Ea.delete(2),await rl(n)):e||(n.Ea.add(2),await oo(n),n.Ra.set("Unknown"))}function Xr(t){return t.ma||(t.ma=function(n,s,r){const i=Ee(n);return i.sa(),new sC(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:cC.bind(null,t),t_:uC.bind(null,t),r_:hC.bind(null,t),H_:fC.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Gu(t)?zu(t):t.Ra.set("Unknown")):(await t.ma.stop(),ly(t))})),t.ma}function Ss(t){return t.fa||(t.fa=function(n,s,r){const i=Ee(n);return i.sa(),new rC(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:mC.bind(null,t),r_:yC.bind(null,t),ta:gC.bind(null,t),na:_C.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await il(t)):(await t.fa.stop(),t.Ta.length>0&&(oe(nr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}class Wu{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new _s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,l=new Wu(e,n,o,r,i);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ku(t,e){if(Wn("AsyncQueue",`${e}: ${t}`),Jr(t))return new ae(z.UNAVAILABLE,`${e}: ${t}`);throw t}class Dr{static emptySet(e){return new Dr(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||fe.comparator(n.key,s.key):(n,s)=>fe.comparator(n.key,s.key),this.keyedMap=_i(),this.sortedSet=new Ye(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Dr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Dr;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class cp{constructor(){this.ga=new Ye(fe.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):pe(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class zr{constructor(e,n,s,r,i,o,l,c,h){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new zr(e,n,Dr.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xa(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}class wC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class EC{constructor(){this.queries=up(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=Ee(n),i=r.queries;r.queries=up(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(s)})})(this,new ae(z.ABORTED,"Firestore shutting down"))}}function up(){return new ar(t=>D_(t),Xa)}async function TC(t,e){const n=Ee(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new wC,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const l=Ku(o,`Initialization of query '${vr(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Qu(n)}async function IC(t,e){const n=Ee(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function bC(t,e){const n=Ee(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(r)&&(s=!0);o.wa=r}}s&&Qu(n)}function AC(t,e,n){const s=Ee(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function Qu(t){t.Ca.forEach(e=>{e.next()})}var $c,hp;(hp=$c||($c={})).Ma="default",hp.Cache="cache";class RC{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new zr(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=zr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==$c.Cache}}class fy{constructor(e){this.key=e}}class dy{constructor(e){this.key=e}}class SC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=xe(),this.mutatedKeys=xe(),this.eu=N_(e),this.tu=new Dr(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new cp,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((f,p)=>{const m=r.get(f),w=Za(this.query,p)?p:null,N=!!m&&this.mutatedKeys.has(m.key),M=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let $=!1;m&&w?m.data.isEqual(w.data)?N!==M&&(s.track({type:3,doc:w}),$=!0):this.su(m,w)||(s.track({type:2,doc:w}),$=!0,(c&&this.eu(w,c)>0||h&&this.eu(w,h)<0)&&(l=!0)):!m&&w?(s.track({type:0,doc:w}),$=!0):m&&!w&&(s.track({type:1,doc:m}),$=!0,(c||h)&&(l=!0)),$&&(w?(o=o.add(w),i=M?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),s.track({type:1,doc:f})}return{tu:o,iu:s,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((f,p)=>function(w,N){const M=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{Rt:$})}};return M(w)-M(N)}(f.type,p.type)||this.eu(f.doc,p.doc)),this.ou(s),r=r??!1;const l=n&&!r?this._u():[],c=this.Xa.size===0&&this.current&&!r?1:0,h=c!==this.Za;return this.Za=c,o.length!==0||h?{snapshot:new zr(this.query,e.tu,i,o,e.mutatedKeys,c===0,h,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new cp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=xe(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new dy(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new fy(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=xe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return zr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Yu="SyncEngine";class CC{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class PC{constructor(e){this.key=e,this.hu=!1}}class xC{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ar(l=>D_(l),Xa),this.Iu=new Map,this.Eu=new Set,this.du=new Ye(fe.comparator),this.Au=new Map,this.Ru=new Uu,this.Vu={},this.mu=new Map,this.fu=qr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function kC(t,e,n=!0){const s=vy(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await py(s,e,n,!0),r}async function DC(t,e){const n=vy(t);await py(n,e,!0,!1)}async function py(t,e,n,s){const r=await QS(t.localStore,bn(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return s&&(l=await NC(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&oy(t.remoteStore,r),l}async function NC(t,e,n,s,r){t.pu=(p,m,w)=>async function(M,$,Q,V){let U=$.view.ru(Q);U.Cs&&(U=await sp(M.localStore,$.query,!1).then(({documents:I})=>$.view.ru(I,U)));const J=V&&V.targetChanges.get($.targetId),B=V&&V.targetMismatches.get($.targetId)!=null,H=$.view.applyChanges(U,M.isPrimaryClient,J,B);return dp(M,$.targetId,H.au),H.snapshot}(t,p,m,w);const i=await sp(t.localStore,e,!0),o=new SC(e,i.Qs),l=o.ru(i.documents),c=io.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),h=o.applyChanges(l,t.isPrimaryClient,c);dp(t,n,h.au);const f=new CC(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function VC(t,e,n){const s=Ee(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(o=>!Xa(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Fc(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&Hu(s.remoteStore,r.targetId),Bc(s,r.targetId)}).catch(Yr)):(Bc(s,r.targetId),await Fc(s.localStore,r.targetId,!0))}async function OC(t,e){const n=Ee(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Hu(n.remoteStore,s.targetId))}async function MC(t,e,n){const s=HC(t);try{const r=await function(o,l){const c=Ee(o),h=Ke.now(),f=l.reduce((w,N)=>w.add(N.key),xe());let p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",w=>{let N=Kn(),M=xe();return c.Ns.getEntries(w,f).next($=>{N=$,N.forEach((Q,V)=>{V.isValidDocument()||(M=M.add(Q))})}).next(()=>c.localDocuments.getOverlayedDocuments(w,N)).next($=>{p=$;const Q=[];for(const V of l){const U=KR(V,p.get(V.key).overlayedDocument);U!=null&&Q.push(new lr(V.key,U,I_(U.value.mapValue),An.exists(!0)))}return c.mutationQueue.addMutationBatch(w,h,Q,l)}).next($=>{m=$;const Q=$.applyToLocalDocumentSet(p,M);return c.documentOverlayCache.saveOverlays(w,$.batchId,Q)})}).then(()=>({batchId:m.batchId,changes:O_(p)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(o,l,c){let h=o.Vu[o.currentUser.toKey()];h||(h=new Ye(Pe)),h=h.insert(l,c),o.Vu[o.currentUser.toKey()]=h}(s,r.batchId,n),await ao(s,r.changes),await il(s.remoteStore)}catch(r){const i=Ku(r,"Failed to persist write");n.reject(i)}}async function my(t,e){const n=Ee(t);try{const s=await GS(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Au.get(i);o&&(Le(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?Le(o.hu,14607):r.removedDocuments.size>0&&(Le(o.hu,42227),o.hu=!1))}),await ao(n,s,e)}catch(s){await Yr(s)}}function fp(t,e,n){const s=Ee(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&r.push(l.snapshot)}),function(o,l){const c=Ee(o);c.onlineState=l;let h=!1;c.queries.forEach((f,p)=>{for(const m of p.Sa)m.va(l)&&(h=!0)}),h&&Qu(c)}(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function LC(t,e,n){const s=Ee(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new Ye(fe.comparator);o=o.insert(i,St.newNoDocument(i,ye.min()));const l=xe().add(i),c=new nl(ye.min(),new Map,new Ye(Pe),o,l);await my(s,c),s.du=s.du.remove(i),s.Au.delete(e),Ju(s)}else await Fc(s.localStore,e,!1).then(()=>Bc(s,e,n)).catch(Yr)}async function FC(t,e){const n=Ee(t),s=e.batch.batchId;try{const r=await zS(n.localStore,e);_y(n,s,null),gy(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await ao(n,r)}catch(r){await Yr(r)}}async function UC(t,e,n){const s=Ee(t);try{const r=await function(o,l){const c=Ee(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return c.mutationQueue.lookupMutationBatch(h,l).next(p=>(Le(p!==null,37113),f=p.keys(),c.mutationQueue.removeMutationBatch(h,p))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>c.localDocuments.getDocuments(h,f))})}(s.localStore,e);_y(s,e,n),gy(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await ao(s,r)}catch(r){await Yr(r)}}function gy(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function _y(t,e,n){const s=Ee(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function Bc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||yy(t,s)})}function yy(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Hu(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Ju(t))}function dp(t,e,n){for(const s of n)s instanceof fy?(t.Ru.addReference(s.key,e),$C(t,s)):s instanceof dy?(oe(Yu,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||yy(t,s.key)):pe(19791,{wu:s})}function $C(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(oe(Yu,"New document in limbo: "+n),t.Eu.add(s),Ju(t))}function Ju(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new fe(ze.fromString(e)),s=t.fu.next();t.Au.set(s,new PC(n)),t.du=t.du.insert(n,s),oy(t.remoteStore,new fs(bn(x_(n.path)),s,"TargetPurposeLimboResolution",Qa.ce))}}async function ao(t,e,n){const s=Ee(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((l,c)=>{o.push(s.pu(c,e,n).then(h=>{if((h||n)&&s.isPrimaryClient){const f=h?!h.fromCache:n?.targetChanges.get(c.targetId)?.current;s.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(h){r.push(h);const f=Bu.As(c.targetId,h);i.push(f)}}))}),await Promise.all(o),s.Pu.H_(r),await async function(c,h){const f=Ee(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>G.forEach(h,m=>G.forEach(m.Es,w=>f.persistence.referenceDelegate.addReference(p,m.targetId,w)).next(()=>G.forEach(m.ds,w=>f.persistence.referenceDelegate.removeReference(p,m.targetId,w)))))}catch(p){if(!Jr(p))throw p;oe(ju,"Failed to update sequence numbers: "+p)}for(const p of h){const m=p.targetId;if(!p.fromCache){const w=f.Ms.get(m),N=w.snapshotVersion,M=w.withLastLimboFreeSnapshotVersion(N);f.Ms=f.Ms.insert(m,M)}}}(s.localStore,i))}async function BC(t,e){const n=Ee(t);if(!n.currentUser.isEqual(e)){oe(Yu,"User change. New user:",e.toKey());const s=await ny(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new ae(z.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ao(n,s.Ls)}}function jC(t,e){const n=Ee(t),s=n.Au.get(e);if(s&&s.hu)return xe().add(s.key);{let r=xe();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const l=n.Tu.get(o);r=r.unionWith(l.view.nu)}return r}}function vy(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=my.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LC.bind(null,e),e.Pu.H_=bC.bind(null,e.eventManager),e.Pu.yu=AC.bind(null,e.eventManager),e}function HC(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UC.bind(null,e),e}class Ea{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return qS(this.persistence,new BS,e.initialUser,this.serializer)}Cu(e){return new ty($u.mi,this.serializer)}Du(e){return new JS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ea.provider={build:()=>new Ea};class qC extends Ea{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Le(this.persistence.referenceDelegate instanceof va,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new RS(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?$t.withCacheSize(this.cacheSizeBytes):$t.DEFAULT;return new ty(s=>va.mi(s,n),this.serializer)}}class jc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>fp(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=BC.bind(null,this.syncEngine),await vC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new EC}()}createDatastore(e){const n=sl(e.databaseInfo.databaseId),s=function(i){return new nC(i)}(e.databaseInfo);return function(i,o,l,c){return new oC(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,o,l){return new lC(s,r,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>fp(this.syncEngine,n,0),function(){return op.v()?new op:new XS}())}createSyncEngine(e,n){return function(r,i,o,l,c,h,f){const p=new xC(r,i,o,l,c,h);return f&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const s=Ee(n);oe(nr,"RemoteStore shutting down."),s.Ea.add(5),await oo(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}jc.provider={build:()=>new jc};class zC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Wn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}const Cs="FirestoreClient";class GC{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=At.UNAUTHENTICATED,this.clientId=Cu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{oe(Cs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(oe(Cs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Ku(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function ec(t,e){t.asyncQueue.verifyOperationInProgress(),oe(Cs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await ny(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function pp(t,e){t.asyncQueue.verifyOperationInProgress();const n=await WC(t);oe(Cs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>lp(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>lp(e.remoteStore,r)),t._onlineComponents=e}async function WC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){oe(Cs,"Using user provided OfflineComponentProvider");try{await ec(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===z.FAILED_PRECONDITION||r.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;$r("Error using user provided cache. Falling back to memory cache: "+n),await ec(t,new Ea)}}else oe(Cs,"Using default OfflineComponentProvider"),await ec(t,new qC(void 0));return t._offlineComponents}async function wy(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(oe(Cs,"Using user provided OnlineComponentProvider"),await pp(t,t._uninitializedComponentsProvider._online)):(oe(Cs,"Using default OnlineComponentProvider"),await pp(t,new jc))),t._onlineComponents}function KC(t){return wy(t).then(e=>e.syncEngine)}async function QC(t){const e=await wy(t),n=e.eventManager;return n.onListen=kC.bind(null,e.syncEngine),n.onUnlisten=VC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=DC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=OC.bind(null,e.syncEngine),n}function YC(t,e,n={}){const s=new _s;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,h){const f=new zC({next:m=>{f.Nu(),o.enqueueAndForget(()=>IC(i,p)),m.fromCache&&c.source==="server"?h.reject(new ae(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new RC(l,f,{includeMetadataChanges:!0,qa:!0});return TC(i,p)}(await QC(t),t.asyncQueue,e,n,s)),s.promise}function Ey(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const mp=new Map;const Ty="firestore.googleapis.com",gp=!0;class _p{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ae(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ty,this.ssl=gp}else this.host=e.host,this.ssl=e.ssl??gp;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ey;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bS)throw new ae(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ey(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ae(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ae(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ae(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ol{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _p({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _p(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new X1;switch(s.type){case"firstParty":return new nR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ae(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=mp.get(n);s&&(oe("ComponentProvider","Removing Datastore"),mp.delete(n),s.terminate())}(this),Promise.resolve()}}function JC(t,e,n,s={}){t=Bi(t,ol);const r=Gr(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;r&&(Ym(`https://${l}`),Jm("Firestore",!0)),i.host!==Ty&&i.host!==l&&$r("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:r,emulatorOptions:s};if(!Ts(c,o)&&(t._setSettings(c),s.mockUserToken)){let h,f;if(typeof s.mockUserToken=="string")h=s.mockUserToken,f=At.MOCK_USER;else{h=tT(s.mockUserToken,t._app?.options.projectId);const p=s.mockUserToken.sub||s.mockUserToken.user_id;if(!p)throw new ae(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new At(p)}t._authCredentials=new Z1(new h_(h,f))}}class Zr{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Zr(this.firestore,e,this._query)}}class _t{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ys(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}toJSON(){return{type:_t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(no(n,_t._jsonSchema))return new _t(e,s||null,new fe(ze.fromString(n.referencePath)))}}_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:rt("string",_t._jsonSchemaVersion),referencePath:rt("string")};class ys extends Zr{constructor(e,n,s){super(e,n,x_(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new fe(e))}withConverter(e){return new ys(this.firestore,e,this._path)}}function sn(t,e,...n){if(t=Tt(t),f_("collection","path",e),t instanceof ol){const s=ze.fromString(e,...n);return xd(s),new ys(t,null,s)}{if(!(t instanceof _t||t instanceof ys))throw new ae(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ze.fromString(e,...n));return xd(s),new ys(t.firestore,null,s)}}function XC(t,e,...n){if(t=Tt(t),arguments.length===1&&(e=Cu.newId()),f_("doc","path",e),t instanceof ol){const s=ze.fromString(e,...n);return Pd(s),new _t(t,null,new fe(s))}{if(!(t instanceof _t||t instanceof ys))throw new ae(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ze.fromString(e,...n));return Pd(s),new _t(t.firestore,t instanceof ys?t.converter:null,new fe(s))}}const yp="AsyncQueue";class vp{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ry(this,"async_queue_retry"),this._c=()=>{const s=Zl();s&&oe(yp,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Zl();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Zl();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new _s;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Jr(e))throw e;oe(yp,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,Wn("INTERNAL UNHANDLED ERROR: ",wp(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=Wu.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&pe(47125,{Pc:wp(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function wp(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class al extends ol{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new vp,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vp(e),this._firestoreClient=void 0,await e}}}function ZC(t,e){const n=typeof t=="object"?t:uu(),s=typeof t=="string"?t:fa,r=ir(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=ZE("firestore");i&&JC(r,...i)}return r}function Iy(t){if(t._terminated)throw new ae(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||eP(t),t._firestoreClient}function eP(t){const e=t._freezeSettings(),n=function(r,i,o,l){return new vR(r,i,o,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,Ey(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new GC(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(r){const i=r?._online.build();return{_offline:r?._offline.build(i),_online:i}}(t._componentsProvider))}class Xt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xt(It.fromBase64String(e))}catch(n){throw new ae(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Xt(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(no(e,Xt._jsonSchema))return Xt.fromBase64String(e.bytes)}}Xt._jsonSchemaVersion="firestore/bytes/1.0",Xt._jsonSchema={type:rt("string",Xt._jsonSchemaVersion),bytes:rt("string")};class Xu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ae(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class by{constructor(e){this._methodName=e}}class Sn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ae(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ae(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Sn._jsonSchemaVersion}}static fromJSON(e){if(no(e,Sn._jsonSchema))return new Sn(e.latitude,e.longitude)}}Sn._jsonSchemaVersion="firestore/geoPoint/1.0",Sn._jsonSchema={type:rt("string",Sn._jsonSchemaVersion),latitude:rt("number"),longitude:rt("number")};class Cn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Cn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(no(e,Cn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Cn(e.vectorValues);throw new ae(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Cn._jsonSchemaVersion="firestore/vectorValue/1.0",Cn._jsonSchema={type:rt("string",Cn._jsonSchemaVersion),vectorValues:rt("object")};const tP=/^__.*__$/;class nP{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new lr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ro(e,this.data,n,this.fieldTransforms)}}function Ay(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{Ac:t})}}class Zu{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Zu({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ta(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Ay(this.Ac)&&tP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class sP{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||sl(e)}Cc(e,n,s,r=!1){return new Zu({Ac:e,methodName:n,Dc:s,path:Et.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ry(t){const e=t._freezeSettings(),n=sl(t._databaseId);return new sP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function rP(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);Py("Data must be an object, but it was:",o,s);const l=Sy(s,o);let c,h;if(i.merge)c=new an(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const m=oP(e,p,n);if(!o.contains(m))throw new ae(z.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);lP(f,m)||f.push(m)}c=new an(f),h=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,h=o.fieldTransforms;return new nP(new Jt(l),c,h)}function iP(t,e,n,s=!1){return eh(n,t.Cc(s?4:3,e))}function eh(t,e){if(Cy(t=Tt(t)))return Py("Unsupported field value:",e,t),Sy(t,e);if(t instanceof by)return function(s,r){if(!Ay(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const l of s){let c=eh(l,r.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=Tt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return jR(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Ke.fromDate(s);return{timestampValue:ya(r.serializer,i)}}if(s instanceof Ke){const i=new Ke(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ya(r.serializer,i)}}if(s instanceof Sn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Xt)return{bytesValue:W_(r.serializer,s._byteString)};if(s instanceof _t){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Fu(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Cn)return function(o,l){return{mapValue:{fields:{[E_]:{stringValue:T_},[da]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return Vu(l.serializer,h)})}}}}}}(s,r);throw r.Sc(`Unsupported field value: ${Ka(s)}`)}(t,e)}function Sy(t,e){const n={};return m_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):or(t,(s,r)=>{const i=eh(r,e.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function Cy(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof Sn||t instanceof Xt||t instanceof _t||t instanceof by||t instanceof Cn)}function Py(t,e,n){if(!Cy(n)||!d_(n)){const s=Ka(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function oP(t,e,n){if((e=Tt(e))instanceof Xu)return e._internalPath;if(typeof e=="string")return xy(t,e);throw Ta("Field path arguments must be of type string or ",t,!1,void 0,n)}const aP=new RegExp("[~\\*/\\[\\]]");function xy(t,e,n){if(e.search(aP)>=0)throw Ta(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xu(...e.split("."))._internalPath}catch{throw Ta(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ta(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new ae(z.INVALID_ARGUMENT,l+t+c)}function lP(t,e){return t.some(n=>n.isEqual(e))}class ky{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(th("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class cP extends ky{data(){return super.data()}}function th(t,e){return typeof e=="string"?xy(t,e):e instanceof Xu?e._internalPath:e._delegate._internalPath}function uP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ae(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nh{}class hP extends nh{}function vs(t,e,...n){let s=[];e instanceof nh&&s.push(e),s=s.concat(n),function(i){const o=i.filter(c=>c instanceof sh).length,l=i.filter(c=>c instanceof ll).length;if(o>1||o>0&&l>0)throw new ae(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)t=r._apply(t);return t}class ll extends hP{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new ll(e,n,s)}_apply(e){const n=this._parse(e);return Dy(e._query,n),new Zr(e.firestore,e.converter,Dc(e._query,n))}_parse(e){const n=Ry(e.firestore);return function(i,o,l,c,h,f,p){let m;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new ae(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Tp(p,f);const N=[];for(const M of p)N.push(Ep(c,i,M));m={arrayValue:{values:N}}}else m=Ep(c,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Tp(p,f),m=iP(l,o,p,f==="in"||f==="not-in");return st.create(h,f,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Js(t,e,n){const s=e,r=th("where",t);return ll._create(r,s,n)}class sh extends nh{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new sh(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:dn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let o=r;const l=i.getFlattenedFilters();for(const c of l)Dy(o,c),o=Dc(o,c)}(e._query,n),new Zr(e.firestore,e.converter,Dc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Ep(t,e,n){if(typeof(n=Tt(n))=="string"){if(n==="")throw new ae(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!k_(e)&&n.indexOf("/")!==-1)throw new ae(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(ze.fromString(n));if(!fe.isDocumentKey(s))throw new ae(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Fd(t,new fe(s))}if(n instanceof _t)return Fd(t,n._key);throw new ae(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ka(n)}.`)}function Tp(t,e){if(!Array.isArray(t)||t.length===0)throw new ae(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Dy(t,e){const n=function(r,i){for(const o of r)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ae(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class fP{convertValue(e,n="none"){switch(Rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(As(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return or(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){const n=e.fields?.[da].arrayValue?.values?.map(s=>et(s.doubleValue));return new Cn(n)}convertGeoPoint(e){return new Sn(et(e.latitude),et(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Ja(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Hi(e));default:return null}}convertTimestamp(e){const n=bs(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ze.fromString(e);Le(Z_(s),9688,{name:e});const r=new qi(s.get(1),s.get(3)),i=new fe(s.popFirst(5));return r.isEqual(n)||Wn(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function dP(t,e,n){let s;return s=t?t.toFirestore(e):e,s}class Po{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Nr extends ky{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(th("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Nr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Nr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Nr._jsonSchema={type:rt("string",Nr._jsonSchemaVersion),bundleSource:rt("string","DocumentSnapshot"),bundleName:rt("string"),bundle:rt("string")};class qo extends Nr{data(e={}){return super.data(e)}}class Vr{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Po(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new qo(this._firestore,this._userDataWriter,s.key,s,new Po(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ae(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>{const c=new qo(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Po(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new qo(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Po(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,f=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:pP(l.type),doc:c,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function pP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:t})}}Vr._jsonSchemaVersion="firestore/querySnapshot/1.0",Vr._jsonSchema={type:rt("string",Vr._jsonSchemaVersion),bundleSource:rt("string","QuerySnapshot"),bundleName:rt("string"),bundle:rt("string")};class mP extends fP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,n)}}function ws(t){t=Bi(t,Zr);const e=Bi(t.firestore,al),n=Iy(e),s=new mP(e);return uP(t._query),YC(n,t._query).then(r=>new Vr(e,s,t,r))}function gP(t){return Ny(Bi(t.firestore,al),[new Ou(t._key,An.none())])}function Hc(t,e){const n=Bi(t.firestore,al),s=XC(t),r=dP(t.converter,e);return Ny(n,[rP(Ry(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,An.exists(!1))]).then(()=>s)}function Ny(t,e){return function(s,r){const i=new _s;return s.asyncQueue.enqueueAndForget(async()=>MC(await KC(s),r,i)),i.promise}(Iy(t),e)}(function(e,n=!0){(function(r){Qr=r})(Wr),kn(new fn("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),l=new al(new eR(s.getProvider("auth-internal")),new sR(o,s.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ae(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qi(h.options.projectId,f)}(o,r),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),en(Ad,Rd,e),en(Ad,Rd,"esm2020")})();const _P={apiKey:"AIzaSyBREo7YpHmycRgjyftoxkiFMLwMVePqeKc",authDomain:"happy-tri-friends.firebaseapp.com",databaseURL:"https://happy-tri-friends-default-rtdb.europe-west1.firebasedatabase.app",projectId:"happy-tri-friends",storageBucket:"happy-tri-friends.firebasestorage.app",messagingSenderId:"442257914194",appId:"1:442257914194:web:bf5e1c5cb21cac78e5e28b",measurementId:"G-RV9XDZH7J9"},rh=rg(_P);Wb(rh);const Oe=Y1(rh),Vy=new Un;Vy.setCustomParameters({prompt:"select_account"});const rn=ZC(rh),yP={class:"flex flex-col items-center md:flex-row md:justify-between text-white p-4"},vP={class:"flex flex-wrap justify-center space-x-4 text-sm md:text-base"},wP={class:"flex flex-col gap-2 items-end"},EP={key:1,class:"flex items-center gap-3"},TP={__name:"htfHeader",setup(t){const e=lu(),n=Se(!1),s=Se(""),r=["kulikalovdenis@gmail.com","bugary20@gmail.com"],i=Pt(()=>n.value&&r.includes(s.value||"")),o=Pt(()=>i.value?"/admin":"/user");Yi(()=>{za(Oe,h=>{h?(n.value=!0,s.value=h.email):(n.value=!1,s.value="")})});function l(){alert("Welcome to Happy TRI Friends!")}async function c(){try{await UA(Oe),e.push("/")}catch(h){console.error(" :",h)}}return(h,f)=>{const p=om("router-link");return se(),ie("header",yP,[Ge(p,{to:"/"},{default:gr(()=>[...f[0]||(f[0]=[T("img",{src:qE,alt:"Logo",class:"w-20 h-auto mb-4 md:mb-0 cursor-pointer hover:opacity-80 transition"},null,-1)])]),_:1}),T("ul",vP,[f[3]||(f[3]=T("li",null,[T("a",{href:"#",class:"menu-link font-bold hover:text-yellow-400"}," ")],-1)),f[4]||(f[4]=T("li",null,[T("a",{href:"#",class:"menu-link font-bold hover:text-yellow-400"},"")],-1)),f[5]||(f[5]=T("li",null,[T("a",{href:"#",class:"menu-link font-bold hover:text-yellow-400"}," ")],-1)),T("li",null,[Ge(p,{to:"/schedule",class:"menu-link font-bold hover:text-yellow-400"},{default:gr(()=>[...f[1]||(f[1]=[Tr("",-1)])]),_:1})]),f[6]||(f[6]=Rm('<li data-v-d817f29a><a href="#" class="menu-link font-bold hover:text-yellow-400" data-v-d817f29a> </a></li><li data-v-d817f29a><a href="#" class="menu-link font-bold hover:text-yellow-400" data-v-d817f29a></a></li><li data-v-d817f29a><a href="#" class="menu-link font-bold hover:text-yellow-400" data-v-d817f29a> </a></li><li data-v-d817f29a><a href="#" class="menu-link font-bold hover:text-yellow-400" data-v-d817f29a> </a></li><li data-v-d817f29a><a href="#" class="menu-link font-bold hover:text-yellow-400" data-v-d817f29a> </a></li>',5)),T("li",null,[n.value?ht("",!0):(se(),uc(p,{key:0,to:"/login",class:"menu-link font-bold hover:text-yellow-400"},{default:gr(()=>[...f[2]||(f[2]=[Tr("",-1)])]),_:1}))])]),T("div",wP,[T("button",{type:"button",onClick:l,class:"bg-yellow-400 text-black font-bold py-2 px-6 rounded-full hover:bg-yellow-500 transition"},"  "),n.value?(se(),ie("div",EP,[Ge(p,{to:o.value,class:"flex items-center gap-2 bg-transparent border-2 border-white text-white font-semibold py-1.5 px-4 rounded-lg hover:bg-white hover:text-black transition"},{default:gr(()=>[...f[8]||(f[8]=[T("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[T("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"})],-1),Tr("  ",-1)])]),_:1},8,["to"]),T("button",{onClick:c,title:"",class:"p-2 bg-transparent border-2 border-white text-white rounded-lg hover:bg-red-500 hover:border-red-500 transition"},[...f[9]||(f[9]=[T("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[T("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z","clip-rule":"evenodd"})],-1)])])])):(se(),uc(p,{key:0,to:"/login",class:"flex items-center gap-2 bg-transparent border-2 border-white text-white font-semibold py-1.5 px-4 rounded-lg hover:bg-white hover:text-black transition"},{default:gr(()=>[...f[7]||(f[7]=[T("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[T("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 011 1v12a1 1 0 11-2 0V4a1 1 0 011-1zm7.707 3.293a1 1 0 010 1.414L9.414 9H17a1 1 0 110 2H9.414l1.293 1.293a1 1 0 01-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),Tr("    ",-1)])]),_:1}))])])}}},lo=La(TP,[["__scopeId","data-v-d817f29a"]]),IP={},bP={class:"home text-center text-white px-2 sm:px-4 py-4"};function AP(t,e){return se(),ie("div",bP,[...e[0]||(e[0]=[T("div",{class:"uppercase text-xs sm:text-sm tracking-widest font-light mb-6 sm:mb-10"},"triathlon club",-1),T("div",{class:"text-3xl sm:text-6xl font-bold mb-6 sm:mb-10"},"Happy TRI Friends",-1),T("div",{class:"text-base sm:text-lg text-white"},"Swimmius. Bikeus. Runius",-1)])])}const RP=La(IP,[["render",AP]]),cl="/HTF/assets/background-CxF9_idu.png",SP="/HTF/assets/timur-CmFIxDiN.png",CP={class:"relative z-10"},PP={class:"text-center p-4 sm:p-6 md:p-10 lg:p-40"},xP={class:"flex flex-col md:flex-row items-center justify-center md:justify-between h-auto md:h-150 bg-gray-100 text-black p-4 sm:p-6 gap-4 md:gap-0"},kP=["src"],DP={__name:"MainPage",setup(t){lu();function e(){window.scrollBy({top:window.innerHeight,behavior:"smooth"})}return(n,s)=>(se(),ie(Qe,null,[T("div",{class:"relative min-h-screen bg-cover bg-center bg-fixed",style:Ps({backgroundImage:`url(${Bt(cl)})`})},[s[0]||(s[0]=T("div",{class:"absolute inset-0 bg-black opacity-50"},null,-1)),T("div",CP,[Ge(lo),T("main",PP,[Ge(RP)])]),T("button",{onClick:e,class:"fixed sm:absolute bottom-5 left-1/2 transform -translate-x-1/2 bg-yellow-400 text-black font-bold py-2 px-4 sm:px-6 md:px-8 rounded-full hover:bg-yellow-500 transition text-base sm:text-lg"},"   ")],4),s[2]||(s[2]=T("div",{class:"flex flex-col items-center justify-center h-auto bg-white text-black p-4 sm:p-6 md:h-80"},[T("h1",{class:"text-xl sm:text-2xl md:text-4xl font-bold mb-4 md:mb-10"},"   ,   !"),T("p",{class:"text-sm sm:text-base md:text-lg mb-4 md:mb-0"},"     .        ,   .")],-1)),T("div",xP,[T("img",{src:Bt(SP),alt:"Timur",class:"w-2/3 sm:w-1/2 md:w-1/3 h-auto mb-4 md:mb-0 ml-0 md:ml-20"},null,8,kP),s[1]||(s[1]=T("div",{class:"w-full md:w-1/2 text-center md:text-left"},[T("h2",{class:"text-lg sm:text-xl md:text-2xl font-bold mb-2 md:mb-4"},""),T("p",{class:"text-sm sm:text-base md:text-lg"},"  ")],-1))])],64))}},NP="/HTF/HTF.png",VP={class:"relative z-10"},OP={__name:"LoginView",setup(t){const e=lu(),n=["kulikalovdenis@gmail.com","bugary20@gmail.com"];async function s(){try{const i=(await i1(Oe,Vy)).user;n.includes(i.email)?e.push("/admin"):e.push("/user")}catch(r){r.code&&r.code!=="auth/popup-closed-by-user"&&r.code!=="auth/cancelled-popup-request"&&console.error(" :",r.code,r.message)}}return(r,i)=>(se(),ie("div",{class:"relative min-h-screen bg-cover bg-center bg-fixed",style:Ps({backgroundImage:`url(${Bt(cl)})`})},[i[5]||(i[5]=T("div",{class:"absolute inset-0 bg-black opacity-50"},null,-1)),T("div",VP,[Ge(lo),T("div",{class:"flex flex-col items-center justify-center min-h-[calc(100vh-100px)] p-2 sm:p-4"},[T("div",{class:"bg-gradient-to-br from-blue-50 via-white to-blue-50 p-4 sm:p-6 md:p-10 rounded-2xl shadow-2xl max-w-xs sm:max-w-md w-full border border-blue-100"},[i[1]||(i[1]=T("div",{class:"flex justify-center mb-6"},[T("img",{src:NP,alt:"HTF Logo",class:"w-20 h-20 sm:w-24 sm:h-24 rounded-full shadow-lg border-4 border-blue-500"})],-1)),i[2]||(i[2]=T("h1",{class:"text-2xl sm:text-3xl font-bold mb-3 text-center text-gray-800"},"!",-1)),i[3]||(i[3]=T("p",{class:"text-center text-gray-600 mb-6 sm:mb-8"},"Happy TRI Friends",-1)),T("button",{onClick:s,class:"w-full flex items-center justify-center gap-3 bg-white hover:bg-gray-50 text-gray-800 font-semibold px-4 py-3 sm:px-6 sm:py-4 rounded-xl transition shadow-md border border-gray-200 hover:shadow-lg text-base sm:text-lg"},[...i[0]||(i[0]=[Rm('<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"></path><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"></path><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"></path><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"></path></svg>   Google ',2)])]),i[4]||(i[4]=T("p",{class:"text-center text-xs sm:text-sm text-gray-500 mt-4 sm:mt-6"},"      ",-1))])])])],4))}},Oy="/HTF/assets/icon-swimming-BaKitOA7.png",My="/HTF/assets/icon-running-CXWM86tb.png",Ly="/HTF/assets/icon-cycling-BWF-ICF6.png",Fy="/HTF/assets/icon-other-CNe9co9v.png",MP={swimming:[" "," "],running:[""," "],cycling:[""],other:[" "," ",""]},LP=["",""," ",""],FP=t=>MP[t]||LP,UP={swimming:[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}],running:[{value:"RUN_LIGHT",label:"LIGHT"},{value:"RUN_LONG",label:"LONG"},{value:"RUN_TECHNIQUE",label:""}],cycling:[{value:"BIKE_FAST_TUESDAY",label:" "},{value:"BIKE_LONG",label:" "},{value:"BIKE_TECHNIQUE",label:""},{value:"BIKE_COFFEE_RIDE",label:"Coffee Ride"}],other:[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}]},$P=[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}],Ip=t=>UP[t]||$P,BP=[" , . .  36"," , 61"," , .  5","",""," "," "],jP="",HP="",qP="",zP="",Uy=[{value:"swimming",label:"",icon:jP,iconImg:Oy,name:""},{value:"running",label:"",icon:HP,iconImg:My,name:""},{value:"cycling",label:"",icon:qP,iconImg:Ly,name:""},{value:"other",label:"",icon:zP,iconImg:Fy,name:""}],ih=t=>{const e=Uy.find(n=>n.value===t||n.name===t);return e?e.icon:""},GP={class:"relative z-10 h-full flex flex-col"},WP={class:"bg-gray-800"},KP={class:"flex flex-col lg:flex-row gap-2 lg:gap-4 p-2 sm:p-4 flex-1 min-h-0 overflow-y-auto"},QP={class:"w-80 bg-white bg-opacity-90 rounded-2xl shadow-lg p-4 flex-shrink-0 overflow-y-auto flex flex-col"},YP={class:"flex flex-col items-center mb-6 pb-6 border-b border-gray-200"},JP={key:0,class:"w-20 h-20 rounded-full mb-3 shadow-md overflow-hidden bg-gray-200"},XP=["src","alt"],ZP={key:1,class:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-bold text-2xl mb-3 shadow-md"},ex={class:"flex items-center justify-center gap-2 w-full"},tx={class:"font-semibold text-gray-800 text-center"},nx={class:"text-sm text-gray-500 text-center break-all"},sx={class:"flex-1"},rx={key:0,class:"bg-white bg-opacity-90 rounded-2xl shadow-lg p-6"},ix={key:0,class:"text-center py-12"},ox={key:1,class:"text-center py-12"},ax={key:2,class:"space-y-6"},lx={class:"bg-gradient-to-r from-blue-600 to-blue-800 text-white px-6 py-4"},cx={class:"text-2xl font-bold"},ux={class:"text-sm text-blue-100"},hx={class:"p-6 space-y-4 bg-gray-50"},fx={class:"flex-1"},dx={class:"flex items-center gap-3 mb-2"},px={class:"text-2xl"},mx={class:"text-xl font-bold text-gray-800"},gx={key:0,class:"px-3 py-1 rounded-full text-sm font-semibold bg-yellow-100 text-yellow-800"},_x={class:"flex items-center gap-6 text-gray-600"},yx={class:"flex items-center gap-2"},vx={class:"font-semibold"},wx={class:"flex items-center gap-2"},Ex={class:"flex items-center gap-2"},Tx={class:"ml-6 flex flex-col gap-2"},Ix={key:0,disabled:"",class:"px-6 py-3 rounded-lg font-semibold bg-gray-400 text-white cursor-not-allowed shadow-lg opacity-60"},bx=["onClick"],Ax=["onClick"],Rx={key:3,class:"fixed bottom-8 right-8 bg-green-500 text-white px-6 py-4 rounded-lg shadow-2xl animate-bounce"},Sx={class:"font-semibold"},Cx={__name:"UserView",setup(t){const e=Se(""),n=Se(""),s=Se(""),r=Se("registration"),i=Se(!1),o=Se(null),l=Se([]),c=Se(""),h=()=>{const B=new Date,H=B.getDay(),I=H===0?-6:1-H,y=new Date(B);y.setDate(B.getDate()+I),y.setHours(0,0,0,0);const v=new Date(y);return v.setDate(y.getDate()+6),v.setHours(23,59,59,999),{monday:y,sunday:v}},f=B=>new Date(B).toLocaleDateString("uk-UA",{day:"2-digit",month:"long"}),p=Pt(()=>{if(!o.value||!o.value.trainings)return{};const B={};o.value.trainings.forEach(y=>{const v=y.dayName;B[v]||(B[v]=[]),B[v].push(y)});const H=["","","","","'","",""],I={};return H.forEach(y=>{B[y]&&(I[y]=B[y].sort((v,R)=>v.time.localeCompare(R.time)))}),I}),m=B=>ih(B),w=B=>({:"bg-green-100 text-green-800",:"bg-yellow-100 text-yellow-800",:"bg-red-100 text-red-800"})[B]||"bg-gray-100 text-gray-800",N=async()=>{try{i.value=!0;const{monday:B,sunday:H}=h(),I=B.toISOString().split("T")[0],y=H.toISOString().split("T")[0],v=vs(sn(rn,"schedules")),R=await ws(v),A=[];R.forEach(C=>{const E=C.data(),je=E.weekStart,ot=E.weekEnd;je>=I&&ot<=y&&A.push({id:C.id,...E})}),A.length>0?(A.sort((C,E)=>{const je=new Date(C.createdAt||0);return new Date(E.createdAt||0)-je}),o.value=A[0],await M()):o.value=null}catch(B){console.error("  :",B)}finally{i.value=!1}},M=async()=>{if(Oe.currentUser)try{const B=vs(sn(rn,"registrations"),Js("userId","==",Oe.currentUser.uid)),H=await ws(B);l.value=H.docs.map(I=>I.data().trainingId)}catch{}},$=B=>{const H=`${o.value.id}_${B.date}_${B.time}`;return l.value.includes(H)},Q=B=>{const H=new Date(`${B.date}T${B.time}:00`),I=new Date,y=2*60,v=I.getTimezoneOffset(),R=new Date(I.getTime()+(y+v)*6e4);return H<R},V=async B=>{if(!Oe.currentUser){alert(" ,     ");return}try{const H=`${o.value.id}_${B.date}_${B.time}`;if($(B))return;await Hc(sn(rn,"registrations"),{userId:Oe.currentUser.uid,userEmail:Oe.currentUser.email,userName:Oe.currentUser.displayName||Oe.currentUser.email,userPhoto:Oe.currentUser.photoURL||null,trainingId:H,scheduleId:o.value.id,trainingDate:B.date,trainingTime:B.time,trainingName:B.name,trainingType:B.type,registeredAt:new Date().toISOString()}),l.value.push(H),c.value=`   ${B.name}`,"Notification"in window&&Notification.permission==="granted"&&new Notification("HTF -  ",{body:`${B.dayName}, ${B.time} - ${B.name}`,icon:"/HTF.png"}),setTimeout(()=>{c.value=""},3e3)}catch(H){alert(" : "+H.message)}},U=async B=>{if(Oe.currentUser)try{const H=`${o.value.id}_${B.date}_${B.time}`,I=vs(sn(rn,"registrations"),Js("userId","==",Oe.currentUser.uid),Js("trainingId","==",H)),y=await ws(I);if(!y.empty){const v=y.docs[0];await deleteDoc(v.ref);const R=l.value.indexOf(H);R>-1&&l.value.splice(R,1),c.value=`  ${B.name} `,"Notification"in window&&Notification.permission==="granted"&&new Notification("HTF -  ",{body:`${B.dayName}, ${B.time} - ${B.name}`,icon:"/HTF.png"}),setTimeout(()=>{c.value=""},3e3)}}catch(H){alert(" : "+H.message)}};Yi(()=>{za(Oe,B=>{B&&(e.value=B.displayName||"",n.value=B.email||"",s.value=B.photoURL||"",r.value==="registration"&&N())})}),Qs(r,B=>{B==="registration"&&N()});async function J(){await Oe.signOut(),window.location.href="/HTF/"}return(B,H)=>(se(),ie("div",{class:"relative h-screen bg-cover bg-center bg-fixed overflow-hidden",style:Ps({backgroundImage:`url(${Bt(cl)})`})},[H[10]||(H[10]=T("div",{class:"absolute inset-0 bg-black opacity-40"},null,-1)),T("div",GP,[T("div",WP,[Ge(lo)]),T("div",KP,[T("aside",QP,[T("div",YP,[s.value?(se(),ie("div",JP,[T("img",{src:s.value,alt:e.value,class:"w-full h-full object-cover",referrerpolicy:"no-referrer"},null,8,XP)])):(se(),ie("div",ZP,Ie(e.value?e.value.charAt(0).toUpperCase():"U"),1)),T("div",ex,[T("p",tx,Ie(e.value||""),1),T("button",{onClick:J,class:"bg-red-500 hover:bg-red-600 text-white p-1.5 rounded transition flex-shrink-0",title:""},[...H[1]||(H[1]=[T("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[T("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z","clip-rule":"evenodd"})],-1)])])]),T("p",nx,Ie(n.value),1)]),T("div",null,[H[2]||(H[2]=T("h3",{class:"text-sm font-semibold text-gray-500 uppercase mb-3"},"",-1)),T("button",{onClick:H[0]||(H[0]=I=>r.value="registration"),class:Mt(["w-full text-left px-4 py-3 rounded-lg mb-2 transition",r.value==="registration"?"bg-blue-500 text-white":"hover:bg-gray-100 text-gray-700"])},"     ",2)])]),T("main",sx,[r.value==="registration"?(se(),ie("div",rx,[H[9]||(H[9]=T("h1",{class:"text-3xl font-bold mb-6"},"   ",-1)),i.value?(se(),ie("div",ix,[...H[3]||(H[3]=[T("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"},null,-1),T("p",{class:"text-gray-600"}," ...",-1)])])):!o.value||!o.value.trainings||o.value.trainings.length===0?(se(),ie("div",ox,[...H[4]||(H[4]=[T("p",{class:"text-gray-600 text-xl mb-4"},"       ",-1),T("p",{class:"text-gray-500"},"   ",-1)])])):(se(),ie("div",ax,[(se(!0),ie(Qe,null,Yt(p.value,(I,y)=>(se(),ie("div",{key:y,class:"border border-gray-200 rounded-xl overflow-hidden"},[T("div",lx,[T("h2",cx,Ie(y),1),T("p",ux,Ie(f(I[0].date)),1)]),T("div",hx,[(se(!0),ie(Qe,null,Yt(I,(v,R)=>(se(),ie("div",{key:R,class:"flex items-center justify-between p-4 bg-white rounded-lg hover:shadow-md transition-shadow border border-gray-200"},[T("div",fx,[T("div",dx,[T("span",px,Ie(m(v.type)),1),T("h3",mx,Ie(v.name),1),T("span",{class:Mt(["px-3 py-1 rounded-full text-sm font-semibold",w(v.difficulty)])},Ie(v.difficulty),3),v.isPaid?(se(),ie("span",gx,"   ")):ht("",!0)]),T("div",_x,[T("div",yx,[H[5]||(H[5]=T("span",null,"",-1)),T("span",vx,Ie(v.time),1)]),T("div",wx,[H[6]||(H[6]=T("span",null,"",-1)),T("span",null,Ie(v.address),1)]),T("div",Ex,[H[7]||(H[7]=T("span",null,"",-1)),T("span",null,Ie(v.type),1)])])]),T("div",Tx,[Q(v)&&!$(v)?(se(),ie("button",Ix,"    ")):$(v)?(se(),ie(Qe,{key:2},[H[8]||(H[8]=T("button",{class:"px-6 py-3 rounded-lg font-semibold bg-green-500 text-white cursor-default shadow-lg"},"   ",-1)),Q(v)?ht("",!0):(se(),ie("button",{key:0,onClick:A=>U(v),class:"px-6 py-2 rounded-lg font-semibold transition-all transform hover:scale-105 bg-red-500 text-white hover:bg-red-600 shadow-lg hover:shadow-xl"},"   ",8,Ax))],64)):(se(),ie("button",{key:1,onClick:A=>V(v),class:"px-6 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 bg-blue-600 text-white hover:bg-blue-700 shadow-lg hover:shadow-xl"},"   ",8,bx))])]))),128))])]))),128))])),c.value?(se(),ie("div",Rx,[T("p",Sx," "+Ie(c.value),1)])):ht("",!0)])):ht("",!0)])])])],4))}},Px={class:"relative w-full"},xx=["value","placeholder"],kx={key:0,class:"absolute left-0 right-0 z-10 bg-white border rounded-lg shadow-lg max-h-48 overflow-auto mt-1"},Dx=["onMousedown"],Nx={__name:"CustomDropdown",props:{modelValue:String,options:Array,placeholder:String},setup(t){const e=Se(!1);function n(){setTimeout(()=>{e.value=!1},150)}return(s,r)=>(se(),ie("div",Px,[T("input",{value:t.modelValue,onInput:r[0]||(r[0]=i=>s.$emit("update:modelValue",i.target.value)),onFocus:r[1]||(r[1]=i=>e.value=!0),onBlur:n,placeholder:t.placeholder,class:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",autocomplete:"off"},null,40,xx),T("button",{type:"button",onMousedown:r[2]||(r[2]=If(i=>e.value=!0,["prevent"])),class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-blue-500"},[...r[3]||(r[3]=[T("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[T("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])],32),e.value?(se(),ie("ul",kx,[(se(!0),ie(Qe,null,Yt(t.options,i=>(se(),ie("li",{key:i,onMousedown:If(o=>{s.$emit("update:modelValue",i),e.value=!1},["prevent"]),class:Mt(["px-3 py-2 cursor-pointer transition",i===t.modelValue?"bg-blue-600 text-white font-semibold":"","hover:bg-blue-100"])},Ie(i),43,Dx))),128))])):ht("",!0)]))}},bp=La(Nx,[["__scopeId","data-v-77e0df9e"]]),Vx={class:"relative z-10 h-full flex flex-col"},Ox={class:"bg-gray-800"},Mx={class:"flex flex-col lg:flex-row gap-2 lg:gap-4 p-2 sm:p-4 flex-1 min-h-0 overflow-y-auto"},Lx={class:"w-full lg:w-80 bg-white bg-opacity-90 rounded-2xl shadow-lg p-2 sm:p-4 flex-shrink-0 overflow-y-auto flex flex-col mb-2 lg:mb-0"},Fx={class:"flex flex-col items-center mb-6 pb-6 border-b border-gray-200"},Ux={key:0,class:"w-20 h-20 rounded-full mb-3 shadow-md overflow-hidden bg-gray-200"},$x=["src","alt"],Bx={key:1,class:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-bold text-2xl mb-3 shadow-md"},jx={class:"flex items-center justify-center gap-2 w-full"},Hx={class:"font-semibold text-gray-800 text-center"},qx={class:"text-sm text-gray-500 text-center break-all"},zx={class:"mb-6"},Gx={class:"flex-1 w-full"},Wx={key:0,class:"bg-white bg-opacity-90 rounded-2xl shadow-lg p-2 sm:p-4"},Kx={class:"mb-4 sm:mb-6 p-2 sm:p-4 bg-blue-50 rounded-lg border border-blue-200"},Qx={class:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4"},Yx={key:0,class:"text-red-600 text-sm mt-2"},Jx={class:"space-y-4 sm:space-y-6"},Xx={class:"text-lg sm:text-xl font-semibold mb-2 sm:mb-4 text-gray-800"},Zx={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-4"},e2={class:"flex gap-2"},t2=["onUpdate:modelValue"],n2=["value"],s2=["onUpdate:modelValue"],r2=["value"],i2=["onUpdate:modelValue"],o2=["onUpdate:modelValue"],a2={class:"md:col-span-2"},l2={class:"flex gap-2"},c2=["onClick"],u2=["onClick"],h2={key:0,class:"mt-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg"},f2={key:1,class:"mt-4 p-4 bg-green-100 border-2 border-green-500 text-green-800 rounded-lg shadow-lg animate-pulse"},d2={key:2,class:"mt-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg"},p2={key:3,class:"mt-8 p-4 bg-gray-50 rounded-xl"},m2={class:"flex flex-col items-center gap-4"},g2={key:1,class:"bg-white bg-opacity-90 rounded-2xl shadow-lg p-6"},_2={key:0,class:"text-center py-12"},y2={key:1,class:"text-center py-12"},v2={key:2,class:"space-y-6"},w2={class:"bg-gradient-to-r from-blue-600 to-blue-800 text-white px-6 py-4"},E2={class:"text-2xl font-bold"},T2={class:"text-sm text-blue-100"},I2={class:"p-6 space-y-4 bg-gray-50"},b2={class:"flex-1"},A2={class:"flex items-center gap-3 mb-2"},R2={class:"text-2xl"},S2={class:"text-xl font-bold text-gray-800"},C2={key:0,class:"px-3 py-1 rounded-full text-sm font-semibold bg-yellow-100 text-yellow-800"},P2={class:"flex items-center gap-6 text-gray-600"},x2={class:"flex items-center gap-2"},k2={class:"font-semibold"},D2={class:"flex items-center gap-2"},N2={class:"flex items-center gap-2"},V2={class:"ml-6 flex flex-col gap-2"},O2={key:0,disabled:"",class:"px-6 py-3 rounded-lg font-semibold bg-gray-400 text-white cursor-not-allowed shadow-lg opacity-60"},M2=["onClick"],L2=["onClick"],F2={key:3,class:"fixed bottom-8 right-8 bg-green-500 text-white px-6 py-4 rounded-lg shadow-2xl animate-bounce"},U2={class:"font-semibold"},$2={__name:"AdminView",setup(t){const e=Se(""),n=Se(""),s=Se(""),r=Se("schedule"),i=Se(null),o=Se(!1),l=Se(!1),c=Se(!1),h=Se(""),f=Se(""),p=Se(!1),m=Se(!1),w=Se(null),N=Se([]),M=Se(""),$=Se(!1),Q=Se(""),V=Se([{id:"monday",name:"",trainings:[]},{id:"tuesday",name:"",trainings:[]},{id:"wednesday",name:"",trainings:[]},{id:"thursday",name:"",trainings:[]},{id:"friday",name:"'",trainings:[]},{id:"saturday",name:"",trainings:[]},{id:"sunday",name:"",trainings:[]}]),U=Se(BP);Yi(()=>{za(Oe,ee=>{ee&&(e.value=ee.displayName||"",n.value=ee.email||"",s.value=ee.photoURL||"")})}),Qs(r,ee=>{ee==="registration"&&De()}),Se([]);async function J(){await Oe.signOut(),window.location.href="/HTF/"}function B(ee){const O=V.value.find(k=>k.id===ee);O&&O.trainings.push({type:"swimming",name:"",difficulty:"ELEMENTARY",time:"07:00",isPaid:"",address:"",error:!1})}function H(ee){const O=ee.target;if(O&&typeof O.showPicker=="function")try{O.showPicker()}catch{}}Qs(()=>V.value.map(ee=>ee.trainings.map(O=>O.type)),(ee,O)=>{V.value.forEach((k,ne)=>{k.trainings.forEach((x,q)=>{const Z=O[ne]?.[q],le=ee[ne]?.[q];if(Z&&le&&Z!==le){const me=Ip(x.type);me.length>0&&(x.difficulty=me[0].value),x.name=""}})})},{deep:!0});function I(ee,O){const k=V.value.find(ne=>ne.id===ee);k&&k.trainings.splice(O,1)}async function y(){if(l.value=!1,c.value=!1,!h.value||!f.value){c.value=!0;return}let ee=!1;if(V.value.forEach(S=>{S.trainings.forEach(L=>{L.error=!1,(!L.name||!L.type||!L.difficulty||!L.time||!L.address)&&(L.error=!0,ee=!0)})}),ee){l.value=!0;return}o.value=!0,await new Promise(S=>setTimeout(S,100)),await document.fonts.ready;const O=i.value;if(!O){console.error("Canvas not found");return}const k=O.getContext("2d");O.width=1080,O.height=1920,k.fillStyle="#2C3E5F",k.fillRect(0,0,O.width,O.height),k.fillStyle="#FFD700",k.font="bold 70px Montserrat",k.textAlign="center",k.fillText("  HTF",O.width/2,120),k.font="bold 26px Montserrat";const ne=k.measureText("($) - ").width;k.font="26px Montserrat";const x=k.measureText(" ").width,q=ne+x,Z=O.width-60-q;k.fillStyle="#FFD700",k.font="bold 26px Montserrat",k.textAlign="left",k.fillText("($) - ",Z,150),k.fillStyle="#ffffff",k.font="26px Montserrat",k.fillText(" ",Z+ne,150),k.fillStyle="#ffffff",k.font="26px Montserrat",k.textAlign="right",k.fillText(" ",O.width-60,180);const le={},me=[{type:"swimming",src:Oy},{type:"running",src:My},{type:"cycling",src:Ly},{type:"other",src:Fy}].map(({type:S,src:L})=>new Promise(j=>{const F=new Image;F.onload=()=>{le[S]=F,j()},F.onerror=()=>j(),F.src=L}));await Promise.all(me);let _=220;const b={:"",:"",:"",:"","'":"",:"",:""};V.value.forEach(S=>{if(S.trainings.length>0){const L=[];S.trainings.forEach(Te=>{const Fe=L.find(He=>He.type===Te.type&&He.isPaid===Te.isPaid&&He.address===Te.address&&He.name===Te.name);if(Fe){const He=Fe.difficultyTimes.find(pt=>pt.difficulty===Te.difficulty);He?He.times.push(Te.time):Fe.difficultyTimes.push({difficulty:Te.difficulty,times:[Te.time]})}else L.push({type:Te.type,name:Te.name,isPaid:Te.isPaid,address:Te.address,difficultyTimes:[{difficulty:Te.difficulty,times:[Te.time]}]})});const j=[];let F=15;L.forEach((Te,Fe)=>{const pt=28+(Te.difficultyTimes.length-1)*35,Kt=Math.max(pt,60)+30;j.push(Kt),F+=Kt,Fe<L.length-1&&(F+=15)}),F+=15;const X=F,Y=45,W=X;k.fillStyle="#FFD700",k.beginPath(),k.moveTo(55,_),k.lineTo(40+Y,_),k.lineTo(40+Y,_+W),k.lineTo(55,_+W),k.arcTo(40,_+W,40,_+W-15,15),k.lineTo(40,_+15),k.arcTo(40,_,55,_,15),k.closePath(),k.fill(),k.fillStyle="#000000",k.font="32px Montserrat",k.textAlign="center";const he=(b[S.name]||S.name.substring(0,2)).toUpperCase().split(""),re=38,ue=he.length*re,de=_+(W-ue)/2+30;he.forEach((Te,Fe)=>{k.fillText(Te,40+Y/2,de+Fe*re)});const ce=40+Y,ve=O.width-ce-50;k.fillStyle="#2C3E5F",k.beginPath(),k.moveTo(ce,_),k.lineTo(ce+ve-15,_),k.arcTo(ce+ve,_,ce+ve,_+15,15),k.lineTo(ce+ve,_+X-15),k.arcTo(ce+ve,_+X,ce+ve-15,_+X,15),k.lineTo(ce,_+X),k.closePath(),k.fill(),k.strokeStyle="#FFD700",k.lineWidth=4,k.beginPath(),k.moveTo(55,_),k.lineTo(ce+ve-15,_),k.arcTo(ce+ve,_,ce+ve,_+15,15),k.lineTo(ce+ve,_+X-15),k.arcTo(ce+ve,_+X,ce+ve-15,_+X,15),k.lineTo(55,_+X),k.arcTo(40,_+X,40,_+X-15,15),k.lineTo(40,_+15),k.arcTo(40,_,55,_,15),k.closePath(),k.stroke();let we=_+15;L.forEach((Te,Fe)=>{const He=j[Fe],yt=(He-55)/2,Kt=le[Te.type];if(Kt&&k.drawImage(Kt,ce+20,we+yt,50,50),k.fillStyle="#ffffff",k.font="semi-bold 34px Montserrat",k.textAlign="left",k.fillText(Te.name,ce+85,we+yt+25),Te.isPaid){const Qt=k.measureText(Te.name).width;k.fillStyle="#FFD700",k.fillText(" ($)",ce+85+Qt,we+yt+25)}k.fillStyle="#D1D5DB",k.font="22px Montserrat",k.fillText(Te.address,ce+85,we+yt+55);const tt=ce+500,xs=28+(Te.difficultyTimes.length-1)*35;let ks=we+(He-xs)/2;Te.difficultyTimes.forEach((Qt,ul)=>{k.font="20px Montserrat",k.textAlign="left";const vt=k.measureText(Qt.difficulty).width,ei=15,Ds=vt+ei*2;k.strokeStyle="#FFD700",k.lineWidth=2,k.strokeRect(tt,ks,Ds,28),k.fillStyle="#FFD700",k.fillText(Qt.difficulty,tt+ei,ks+20),k.fillStyle="#ffffff",k.font="22px Montserrat",k.textAlign="right";const Ns=Qt.times.join(" | ");k.fillText(Ns,ce+ve-30,ks+18),ks+=35}),we+=He,Fe<L.length-1&&(we+=7.5,k.strokeStyle="#FFD700",k.lineWidth=1,k.beginPath(),k.moveTo(ce+20,we),k.lineTo(ce+ve-20,we),k.stroke(),we+=7.5)}),_+=X+25}})}function v(){const ee=i.value;if(!ee)return;const O=document.createElement("a");O.download="htf-schedule.png",O.href=ee.toDataURL("image/png"),O.click()}function R(ee){const O=new Date(h.value),ne={monday:0,tuesday:1,wednesday:2,thursday:3,friday:4,saturday:5,sunday:6}[ee],x=new Date(O);return x.setDate(O.getDate()+ne),x.toISOString().split("T")[0]}async function A(){if(p.value=!1,$.value=!1,Q.value="",l.value=!1,c.value=!1,!h.value||!f.value){c.value=!0,$.value=!0,Q.value="      ";return}let ee=!1;if(V.value.forEach(O=>{O.trainings.forEach(k=>{k.error=!1,(!k.name||!k.type||!k.difficulty||!k.time||!k.address)&&(k.error=!0,ee=!0)})}),ee){l.value=!0,$.value=!0,Q.value="  '  ";return}try{const O=[];V.value.forEach(ne=>{if(ne.trainings.length>0){const x=R(ne.id);ne.trainings.forEach(q=>{O.push({date:x,dayName:ne.name,type:q.type,name:q.name,difficulty:q.difficulty,time:q.time,isPaid:q.isPaid==="paid",address:q.address,createdAt:new Date().toISOString(),createdBy:Oe.currentUser?.email||"unknown"})})}});const k=await Hc(sn(rn,"schedules"),{weekStart:h.value,weekEnd:f.value,trainings:O,createdAt:new Date().toISOString(),createdBy:Oe.currentUser?.email||"unknown"});if(k&&k.id)p.value=!0,"Notification"in window&&Notification.permission==="granted"?new Notification("HTF -  ",{body:`  ${O.length} `,icon:"/HTF.png"}):"Notification"in window&&Notification.permission!=="denied"&&Notification.requestPermission().then(ne=>{ne==="granted"&&new Notification("HTF -  ",{body:`  ${O.length} `,icon:"/HTF.png"})}),setTimeout(()=>{p.value=!1},5e3);else throw new Error("   ID  ")}catch(O){console.error("  :",O),$.value=!0,Q.value=O.message||"   "}}const C=()=>{const ee=new Date,O=ee.getDay(),k=O===0?-6:1-O,ne=new Date(ee);ne.setDate(ee.getDate()+k),ne.setHours(0,0,0,0);const x=new Date(ne);return x.setDate(ne.getDate()+6),x.setHours(23,59,59,999),{monday:ne,sunday:x}},E=ee=>new Date(ee).toLocaleDateString("uk-UA",{day:"2-digit",month:"long"}),je=Pt(()=>{if(!w.value||!w.value.trainings)return{};const ee={};w.value.trainings.forEach(ne=>{const x=ne.dayName;ee[x]||(ee[x]=[]),ee[x].push(ne)});const O=["","","","","'","",""],k={};return O.forEach(ne=>{ee[ne]&&(k[ne]=ee[ne].sort((x,q)=>x.time.localeCompare(q.time)))}),k}),ot=ee=>ih(ee),Je=ee=>({:"bg-green-100 text-green-800",:"bg-yellow-100 text-yellow-800",:"bg-red-100 text-red-800"})[ee]||"bg-gray-100 text-gray-800",De=async()=>{if(r.value==="registration")try{m.value=!0;const{monday:ee,sunday:O}=C(),k=ee.toISOString().split("T")[0],ne=O.toISOString().split("T")[0],x=vs(sn(rn,"schedules")),q=await ws(x),Z=[];q.forEach(le=>{const me=le.data(),_=me.weekStart,b=me.weekEnd;_>=k&&b<=ne&&Z.push({id:le.id,...me})}),Z.length>0?(Z.sort((le,me)=>{const _=new Date(le.createdAt||0);return new Date(me.createdAt||0)-_}),w.value=Z[0],await Re()):w.value=null}catch(ee){console.error("  :",ee)}finally{m.value=!1}},Re=async()=>{if(Oe.currentUser)try{const ee=vs(sn(rn,"registrations"),Js("userId","==",Oe.currentUser.uid)),O=await ws(ee);N.value=O.docs.map(k=>k.data().trainingId)}catch{}},dt=ee=>{const O=`${w.value.id}_${ee.date}_${ee.time}`;return N.value.includes(O)},jt=ee=>{const O=new Date(`${ee.date}T${ee.time}:00`),k=new Date,ne=2*60,x=k.getTimezoneOffset(),q=new Date(k.getTime()+(ne+x)*6e4);return O<q},Nt=async ee=>{if(!Oe.currentUser){alert(" ,     ");return}try{const O=`${w.value.id}_${ee.date}_${ee.time}`;if(dt(ee))return;await Hc(sn(rn,"registrations"),{userId:Oe.currentUser.uid,userEmail:Oe.currentUser.email,userName:Oe.currentUser.displayName||Oe.currentUser.email,userPhoto:Oe.currentUser.photoURL||null,trainingId:O,scheduleId:w.value.id,trainingDate:ee.date,trainingTime:ee.time,trainingName:ee.name,trainingType:ee.type,registeredAt:new Date().toISOString()}),N.value.push(O),M.value=`   ${ee.name}`,"Notification"in window&&Notification.permission==="granted"&&new Notification("HTF -  ",{body:`${ee.dayName}, ${ee.time} - ${ee.name}`,icon:"/HTF.png"}),setTimeout(()=>{M.value=""},3e3)}catch(O){alert(" : "+O.message)}},at=async ee=>{if(Oe.currentUser)try{const O=`${w.value.id}_${ee.date}_${ee.time}`,k=vs(sn(rn,"registrations"),Js("userId","==",Oe.currentUser.uid),Js("trainingId","==",O)),ne=await ws(k);if(!ne.empty){const x=ne.docs[0];await gP(x.ref);const q=N.value.indexOf(O);q>-1&&N.value.splice(q,1),M.value=`  ${ee.name} `,"Notification"in window&&Notification.permission==="granted"&&new Notification("HTF -  ",{body:`${ee.dayName}, ${ee.time} - ${ee.name}`,icon:"/HTF.png"}),setTimeout(()=>{M.value=""},3e3)}}catch(O){alert(" : "+O.message)}};return(ee,O)=>(se(),ie("div",{class:"relative h-screen bg-cover bg-center bg-fixed overflow-hidden",style:Ps({backgroundImage:`url(${Bt(cl)})`})},[O[29]||(O[29]=T("div",{class:"absolute inset-0 bg-black opacity-40"},null,-1)),T("div",Vx,[T("div",Ox,[Ge(lo)]),T("div",Mx,[T("aside",Lx,[T("div",Fx,[s.value?(se(),ie("div",Ux,[T("img",{src:s.value,alt:e.value,class:"w-full h-full object-cover",referrerpolicy:"no-referrer"},null,8,$x)])):(se(),ie("div",Bx,Ie(e.value?e.value.charAt(0).toUpperCase():"A"),1)),T("div",jx,[T("p",Hx,Ie(e.value||""),1),T("button",{onClick:J,class:"bg-red-500 hover:bg-red-600 text-white p-1.5 rounded transition flex-shrink-0",title:""},[...O[6]||(O[6]=[T("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[T("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z","clip-rule":"evenodd"})],-1)])])]),T("p",qx,Ie(n.value),1)]),T("div",zx,[O[7]||(O[7]=T("h3",{class:"text-sm font-semibold text-gray-500 uppercase mb-3"},"",-1)),T("button",{onClick:O[0]||(O[0]=k=>r.value="schedule"),class:Mt(["w-full text-left px-4 py-3 rounded-lg mb-2 transition",r.value==="schedule"?"bg-blue-500 text-white":"hover:bg-gray-100 text-gray-700"])},"    ",2)]),T("div",null,[O[8]||(O[8]=T("h3",{class:"text-sm font-semibold text-gray-500 uppercase mb-3"},"",-1)),T("button",{onClick:O[1]||(O[1]=k=>r.value="registration"),class:Mt(["w-full text-left px-4 py-3 rounded-lg mb-2 transition",r.value==="registration"?"bg-blue-500 text-white":"hover:bg-gray-100 text-gray-700"])},"     ",2)])]),T("main",Gx,[r.value==="schedule"?(se(),ie("div",Wx,[O[21]||(O[21]=T("h1",{class:"text-3xl font-bold mb-6"}," ",-1)),T("div",Kx,[T("div",Qx,[T("div",null,[O[9]||(O[9]=T("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"   *",-1)),pr(T("input",{ref:"startDateInput","onUpdate:modelValue":O[2]||(O[2]=k=>h.value=k),type:"date",onClick:O[3]||(O[3]=k=>H(k)),class:Mt(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-pointer",c.value&&!h.value?"border-red-500":"border-gray-300"])},null,2),[[Vl,h.value]])]),T("div",null,[O[10]||(O[10]=T("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"   *",-1)),pr(T("input",{ref:"endDateInput","onUpdate:modelValue":O[4]||(O[4]=k=>f.value=k),type:"date",onClick:O[5]||(O[5]=k=>H(k)),class:Mt(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-pointer",c.value&&!f.value?"border-red-500":"border-gray-300"])},null,2),[[Vl,f.value]])])]),c.value?(se(),ie("p",Yx," '      ")):ht("",!0)]),T("div",Jx,[(se(!0),ie(Qe,null,Yt(V.value,k=>(se(),ie("div",{key:k.id,class:"border border-gray-200 rounded-xl p-2 sm:p-4 bg-gray-50"},[T("h3",Xx,Ie(k.name),1),(se(!0),ie(Qe,null,Yt(k.trainings,(ne,x)=>(se(),ie("div",{key:x,class:"mb-2 sm:mb-4 p-2 sm:p-4 bg-white rounded-lg shadow-sm border border-gray-100"},[T("div",Zx,[T("div",null,[O[11]||(O[11]=T("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"  *",-1)),T("div",e2,[pr(T("select",{"onUpdate:modelValue":q=>ne.type=q,class:Mt(["px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",ne.error&&!ne.type?"border-red-500":"border-gray-300"])},[(se(!0),ie(Qe,null,Yt(Bt(Uy),q=>(se(),ie("option",{key:q.value,value:q.value},Ie(q.label),9,n2))),128))],10,t2),[[Ol,ne.type]]),Ge(bp,{modelValue:ne.name,"onUpdate:modelValue":q=>ne.name=q,options:Bt(FP)(ne.type),placeholder:"  *"},null,8,["modelValue","onUpdate:modelValue","options"])])]),T("div",null,[O[12]||(O[12]=T("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," *",-1)),pr(T("select",{"onUpdate:modelValue":q=>ne.difficulty=q,class:Mt(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",ne.error&&!ne.difficulty?"border-red-500":"border-gray-300"])},[(se(!0),ie(Qe,null,Yt(Bt(Ip)(ne.type),q=>(se(),ie("option",{key:q.value,value:q.value},Ie(q.label),9,r2))),128))],10,s2),[[Ol,ne.difficulty]])]),T("div",null,[O[13]||(O[13]=T("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"  *",-1)),pr(T("input",{"onUpdate:modelValue":q=>ne.time=q,type:"time",class:Mt(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",ne.error&&!ne.time?"border-red-500":"border-gray-300"])},null,10,i2),[[Vl,ne.time]])]),T("div",null,[O[15]||(O[15]=T("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," ",-1)),pr(T("select",{"onUpdate:modelValue":q=>ne.isPaid=q,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...O[14]||(O[14]=[T("option",{value:""},"",-1),T("option",{value:"paid"}," ",-1)])],8,o2),[[Ol,ne.isPaid]])]),T("div",a2,[O[16]||(O[16]=T("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," *",-1)),T("div",l2,[Ge(bp,{modelValue:ne.address,"onUpdate:modelValue":q=>ne.address=q,options:U.value,placeholder:"  *"},null,8,["modelValue","onUpdate:modelValue","options"]),T("button",{onClick:q=>I(k.id,x),class:"px-3 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition"},"  ",8,c2)])])])]))),128)),T("button",{onClick:ne=>B(k.id),class:"w-full mt-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition"},"    ",8,u2)]))),128))]),l.value?(se(),ie("div",h2,[...O[17]||(O[17]=[T("p",{class:"font-semibold"},"  ",-1),T("p",null," ,   '  (  *)",-1)])])):ht("",!0),T("div",{class:"mt-8 flex gap-4"},[T("button",{onClick:y,class:"flex-1 px-6 py-3 bg-green-500 hover:bg-green-600 text-white font-semibold rounded-lg transition text-lg"},"    "),T("button",{onClick:A,class:"flex-1 px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white font-semibold rounded-lg transition text-lg"},"      ")]),p.value?(se(),ie("div",f2,[...O[18]||(O[18]=[T("p",{class:"font-bold text-lg"},"  !",-1),T("p",null,"      Firebase",-1)])])):ht("",!0),$.value?(se(),ie("div",d2,[O[19]||(O[19]=T("p",{class:"font-semibold"},"  ",-1)),T("p",null,Ie(Q.value),1)])):ht("",!0),o.value?(se(),ie("div",p2,[O[20]||(O[20]=T("h3",{class:"text-xl font-semibold mb-4"}," ",-1)),T("div",m2,[T("canvas",{ref_key:"scheduleCanvas",ref:i,class:"border border-gray-300 rounded-lg shadow-lg max-w-full"},null,512),T("button",{onClick:v,class:"px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white font-semibold rounded-lg transition"},"    ")])])):ht("",!0)])):ht("",!0),r.value==="registration"?(se(),ie("div",g2,[O[28]||(O[28]=T("h1",{class:"text-3xl font-bold mb-6"},"   ",-1)),m.value?(se(),ie("div",_2,[...O[22]||(O[22]=[T("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"},null,-1),T("p",{class:"text-gray-600"}," ...",-1)])])):!w.value||!w.value.trainings||w.value.trainings.length===0?(se(),ie("div",y2,[...O[23]||(O[23]=[T("p",{class:"text-gray-600 text-xl mb-4"},"       ",-1),T("p",{class:"text-gray-500"},'     " "',-1)])])):(se(),ie("div",v2,[(se(!0),ie(Qe,null,Yt(je.value,(k,ne)=>(se(),ie("div",{key:ne,class:"border border-gray-200 rounded-xl overflow-hidden"},[T("div",w2,[T("h2",E2,Ie(ne),1),T("p",T2,Ie(E(k[0].date)),1)]),T("div",I2,[(se(!0),ie(Qe,null,Yt(k,(x,q)=>(se(),ie("div",{key:q,class:"flex items-center justify-between p-4 bg-white rounded-lg hover:shadow-md transition-shadow border border-gray-200"},[T("div",b2,[T("div",A2,[T("span",R2,Ie(ot(x.type)),1),T("h3",S2,Ie(x.name),1),T("span",{class:Mt(["px-3 py-1 rounded-full text-sm font-semibold",Je(x.difficulty)])},Ie(x.difficulty),3),x.isPaid?(se(),ie("span",C2,"   ")):ht("",!0)]),T("div",P2,[T("div",x2,[O[24]||(O[24]=T("span",null,"",-1)),T("span",k2,Ie(x.time),1)]),T("div",D2,[O[25]||(O[25]=T("span",null,"",-1)),T("span",null,Ie(x.address),1)]),T("div",N2,[O[26]||(O[26]=T("span",null,"",-1)),T("span",null,Ie(x.type),1)])])]),T("div",V2,[jt(x)&&!dt(x)?(se(),ie("button",O2,"    ")):dt(x)?(se(),ie(Qe,{key:2},[O[27]||(O[27]=T("button",{class:"px-6 py-3 rounded-lg font-semibold bg-green-500 text-white cursor-default shadow-lg"},"   ",-1)),jt(x)?ht("",!0):(se(),ie("button",{key:0,onClick:Z=>at(x),class:"px-6 py-2 rounded-lg font-semibold transition-all transform hover:scale-105 bg-red-500 text-white hover:bg-red-600 shadow-lg hover:shadow-xl"},"   ",8,L2))],64)):(se(),ie("button",{key:1,onClick:Z=>Nt(x),class:"px-6 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 bg-blue-600 text-white hover:bg-blue-700 shadow-lg hover:shadow-xl"},"   ",8,M2))])]))),128))])]))),128))])),M.value?(se(),ie("div",F2,[T("p",U2," "+Ie(M.value),1)])):ht("",!0)])):ht("",!0)])])])],4))}},B2={class:"relative z-10 min-h-screen flex flex-col"},j2={class:"bg-gray-800"},H2={class:"flex-1 p-2 sm:p-4 md:p-8"},q2={class:"max-w-6xl mx-auto"},z2={class:"bg-white bg-opacity-95 rounded-2xl shadow-2xl p-2 sm:p-4 md:p-8 mb-4 sm:mb-6"},G2={key:0,class:"text-center text-gray-600"},W2={key:0,class:"bg-white bg-opacity-95 rounded-2xl shadow-2xl p-4 sm:p-8 md:p-12 text-center"},K2={key:1,class:"bg-white bg-opacity-95 rounded-2xl shadow-2xl p-4 sm:p-8 md:p-12 text-center"},Q2={key:2,class:"space-y-2 sm:space-y-4"},Y2={class:"w-full sm:w-32 flex-shrink-0"},J2={class:"bg-gradient-to-br from-blue-600 to-blue-800 rounded-lg p-2 sm:p-4 text-center sticky top-4"},X2={class:"text-base sm:text-lg font-bold text-white"},Z2={class:"flex-1 space-y-3"},ek={class:"p-4"},tk={class:"flex items-start justify-between gap-4"},nk={class:"flex-1"},sk={class:"flex items-center gap-2 mb-2"},rk={class:"text-2xl"},ik={class:"text-lg font-bold text-gray-800"},ok={key:0,class:"px-2 py-0.5 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800"},ak={class:"flex items-center gap-4 text-sm text-gray-600"},lk={class:"flex items-center gap-1"},ck={class:"font-semibold"},uk={class:"flex items-center gap-1"},hk={class:"text-xs"},fk={class:"text-xs"},dk={class:"flex-shrink-0"},pk=["onClick"],mk={class:"font-semibold text-gray-800"},gk={class:"text-gray-500 text-xs"},_k={key:0,class:"mt-3 pt-3 border-t border-gray-200"},yk={key:0,class:"text-center text-gray-400 text-sm py-2"},vk={key:1,class:"space-y-1"},wk={class:"font-medium"},Ek={class:"text-xs text-gray-500"},Tk="/HTF/bg.jpg",Ik={__name:"ScheduleView",setup(t){const e=Se(!0),n=Se(null),s=Se([]),r=Se(new Set),i=()=>{const V=new Date,U=V.getDay(),J=U===0?-6:1-U,B=new Date(V);B.setDate(V.getDate()+J),B.setHours(0,0,0,0);const H=new Date(B);return H.setDate(B.getDate()+6),H.setHours(23,59,59,999),{monday:B,sunday:H}},o=V=>new Date(V).toLocaleDateString("uk-UA",{day:"2-digit",month:"long"}),l=V=>new Date(V).toLocaleString("uk-UA",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),c=Pt(()=>{if(!n.value||!n.value.trainings)return{};const V={};n.value.trainings.forEach(B=>{const H=B.dayName;V[H]||(V[H]=[]),V[H].push(B)});const U=["","","","","'","",""],J={};return U.forEach(B=>{V[B]&&(J[B]=V[B].sort((H,I)=>H.time.localeCompare(I.time)))}),J}),h=V=>ih(V),f=V=>({:"bg-green-100 text-green-800",:"bg-yellow-100 text-yellow-800",:"bg-red-100 text-red-800"})[V]||"bg-gray-100 text-gray-800",p=V=>n.value.id+"_"+V.date+"_"+V.time,m=V=>{const U=p(V);return s.value.filter(J=>J.trainingId===U).length},w=V=>{const U=p(V);return s.value.filter(J=>J.trainingId===U)},N=V=>{const U=p(V);r.value.has(U)?r.value.delete(U):r.value.add(U)},M=V=>{const U=p(V);return r.value.has(U)},$=async()=>{try{e.value=!0;const{monday:V,sunday:U}=i(),J=V.toISOString().split("T")[0],B=U.toISOString().split("T")[0],H=vs(sn(rn,"schedules")),I=await ws(H),y=[];I.forEach(v=>{const R=v.data(),A=R.weekStart,C=R.weekEnd;A>=J&&C<=B&&y.push({id:v.id,...R})}),y.length>0?(y.sort((v,R)=>{const A=new Date(v.createdAt||0);return new Date(R.createdAt||0).getTime()-A.getTime()}),n.value=y[0],await Q(n.value.id)):n.value=null}catch(V){console.error("  :",V)}finally{e.value=!1}},Q=async V=>{try{const U=vs(sn(rn,"registrations"),Js("scheduleId","==",V)),J=await ws(U);s.value=J.docs.map(B=>({id:B.id,...B.data()}))}catch(U){console.error("  :",U)}};return Yi(()=>{$()}),(V,U)=>(se(),ie("div",{class:"relative min-h-screen bg-cover bg-center bg-fixed overflow-y-auto",style:Ps({backgroundImage:`url(${Tk})`})},[U[7]||(U[7]=T("div",{class:"absolute inset-0 bg-black opacity-40"},null,-1)),T("div",B2,[T("div",j2,[Ge(lo)]),T("div",H2,[T("div",q2,[T("div",z2,[U[0]||(U[0]=T("h1",{class:"text-4xl font-bold text-gray-800 text-center mb-2 flex items-center justify-center gap-3"},[T("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10",viewBox:"0 0 20 20",fill:"currentColor"},[T("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"})]),Tr("   ")],-1)),n.value?(se(),ie("p",G2,Ie(o(n.value.weekStart))+" - "+Ie(o(n.value.weekEnd)),1)):ht("",!0)]),e.value?(se(),ie("div",W2,[...U[1]||(U[1]=[T("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"},null,-1),T("p",{class:"text-gray-600"}," ...",-1)])])):!n.value||!n.value.trainings||n.value.trainings.length===0?(se(),ie("div",K2,[...U[2]||(U[2]=[T("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 mx-auto mb-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[T("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1),T("p",{class:"text-gray-600 text-xl mb-4"},"      ",-1),T("p",{class:"text-gray-500"},"   ",-1)])])):(se(),ie("div",Q2,[(se(!0),ie(Qe,null,Yt(c.value,(J,B)=>(se(),ie("div",{key:B,class:"flex flex-col sm:flex-row gap-2 sm:gap-4"},[T("div",Y2,[T("div",J2,[T("h2",X2,Ie(B),1)])]),T("div",Z2,[(se(!0),ie(Qe,null,Yt(J,(H,I)=>(se(),ie("div",{key:I,class:"bg-white bg-opacity-95 rounded-lg shadow-md border border-gray-200"},[T("div",ek,[T("div",tk,[T("div",nk,[T("div",sk,[T("span",rk,Ie(h(H.type)),1),T("h3",ik,Ie(H.name),1),T("span",{class:Mt(["px-2 py-0.5 rounded-full text-xs font-semibold",f(H.difficulty)])},Ie(H.difficulty),3),H.isPaid?(se(),ie("span",ok,"  ")):ht("",!0)]),T("div",ak,[T("div",lk,[U[3]||(U[3]=T("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[T("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),T("span",ck,Ie(H.time),1)]),T("div",uk,[U[4]||(U[4]=T("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[T("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)),T("span",hk,Ie(H.address),1)]),T("span",fk,Ie(H.type),1)])]),T("div",dk,[T("button",{onClick:y=>N(H),class:"flex items-center gap-2 px-3 py-2 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors text-sm"},[U[5]||(U[5]=T("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-blue-600",viewBox:"0 0 20 20",fill:"currentColor"},[T("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"})],-1)),T("span",mk,Ie(m(H)),1),T("span",gk,Ie(M(H)?"":""),1)],8,pk)])]),M(H)?(se(),ie("div",_k,[w(H).length===0?(se(),ie("div",yk,"   ")):(se(),ie("div",vk,[(se(!0),ie(Qe,null,Yt(w(H),(y,v)=>(se(),ie("div",{key:v,class:"text-sm text-gray-700 py-1"},[T("span",wk,Ie(y.userName),1),U[6]||(U[6]=T("span",{class:"text-gray-400 mx-1"},"",-1)),T("span",Ek,Ie(l(y.registeredAt)),1)]))),128))]))])):ht("",!0)])]))),128))])]))),128))]))])])])],4))}},$y=HE({history:EE("/HTF/"),routes:[{path:"/",name:"home",component:DP},{path:"/login",name:"login",component:OP},{path:"/schedule",name:"schedule",component:Ik},{path:"/user",name:"user",component:Cx,meta:{requiresAuth:!0}},{path:"/admin",name:"admin",component:$2,meta:{requiresAuth:!0,requiresAdmin:!0}}]}),bk=["kulikalovdenis@gmail.com","bugary20@gmail.com"],Ak=()=>new Promise((t,e)=>{const n=za(Oe,s=>{n(),t(s)},e)});$y.beforeEach(async(t,e,n)=>{const s=t.matched.some(i=>i.meta.requiresAuth),r=t.matched.some(i=>i.meta.requiresAdmin);if(s||r){const i=await Ak();s&&!i?n("/login"):r&&i?bk.includes(i.email||"")?n():n("/user"):n()}else n()});const By=x0(M0);By.use($y);By.mount("#app");
