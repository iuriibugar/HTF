(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Bc(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Le={},yr=[],vn=()=>{},Ap=()=>!1,Ia=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),jc=t=>t.startsWith("onUpdate:"),Ct=Object.assign,Hc=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},iv=Object.prototype.hasOwnProperty,Ne=(t,e)=>iv.call(t,e),pe=Array.isArray,vr=t=>Wi(t)==="[object Map]",ba=t=>Wi(t)==="[object Set]",Gh=t=>Wi(t)==="[object Date]",ye=t=>typeof t=="function",et=t=>typeof t=="string",Sn=t=>typeof t=="symbol",Fe=t=>t!==null&&typeof t=="object",Rp=t=>(Fe(t)||ye(t))&&ye(t.then)&&ye(t.catch),Sp=Object.prototype.toString,Wi=t=>Sp.call(t),ov=t=>Wi(t).slice(8,-1),Cp=t=>Wi(t)==="[object Object]",qc=t=>et(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,yi=Bc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Aa=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},av=/-\w/g,Jt=Aa(t=>t.replace(av,e=>e.slice(1).toUpperCase())),lv=/\B([A-Z])/g,Xs=Aa(t=>t.replace(lv,"-$1").toLowerCase()),Ra=Aa(t=>t.charAt(0).toUpperCase()+t.slice(1)),Il=Aa(t=>t?`on${Ra(t)}`:""),hs=(t,e)=>!Object.is(t,e),Po=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Pp=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},Sa=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Wh;const Ca=()=>Wh||(Wh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ss(t){if(pe(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=et(s)?fv(s):Ss(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(et(t)||Fe(t))return t}const cv=/;(?![^(]*\))/g,uv=/:([^]+)/,hv=/\/\*[^]*?\*\//g;function fv(t){const e={};return t.replace(hv,"").split(cv).forEach(n=>{if(n){const s=n.split(uv);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Et(t){let e="";if(et(t))e=t;else if(pe(t))for(let n=0;n<t.length;n++){const s=Et(t[n]);s&&(e+=s+" ")}else if(Fe(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const dv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",pv=Bc(dv);function xp(t){return!!t||t===""}function gv(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=Pa(t[s],e[s]);return n}function Pa(t,e){if(t===e)return!0;let n=Gh(t),s=Gh(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=Sn(t),s=Sn(e),n||s)return t===e;if(n=pe(t),s=pe(e),n||s)return n&&s?gv(t,e):!1;if(n=Fe(t),s=Fe(e),n||s){if(!n||!s)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const l=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(l&&!c||!l&&c||!Pa(t[o],e[o]))return!1}}return String(t)===String(e)}function mv(t,e){return t.findIndex(n=>Pa(n,e))}const kp=t=>!!(t&&t.__v_isRef===!0),ve=t=>et(t)?t:t==null?"":pe(t)||Fe(t)&&(t.toString===Sp||!ye(t.toString))?kp(t)?ve(t.value):JSON.stringify(t,Dp,2):String(t),Dp=(t,e)=>kp(e)?Dp(t,e.value):vr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[bl(s,i)+" =>"]=r,n),{})}:ba(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>bl(n))}:Sn(e)?bl(e):Fe(e)&&!pe(e)&&!Cp(e)?String(e):e,bl=(t,e="")=>{var n;return Sn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let Mt;class _v{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Mt,!e&&Mt&&(this.index=(Mt.scopes||(Mt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Mt;try{return Mt=this,e()}finally{Mt=n}}}on(){++this._on===1&&(this.prevScope=Mt,Mt=this)}off(){this._on>0&&--this._on===0&&(Mt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function yv(){return Mt}let $e;const Al=new WeakSet;class Np{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Mt&&Mt.active&&Mt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Al.has(this)&&(Al.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Op(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Kh(this),Mp(this);const e=$e,n=on;$e=this,on=!0;try{return this.fn()}finally{Lp(this),$e=e,on=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Wc(e);this.deps=this.depsTail=void 0,Kh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Al.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Xl(this)&&this.run()}get dirty(){return Xl(this)}}let Vp=0,vi,wi;function Op(t,e=!1){if(t.flags|=8,e){t.next=wi,wi=t;return}t.next=vi,vi=t}function zc(){Vp++}function Gc(){if(--Vp>0)return;if(wi){let e=wi;for(wi=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;vi;){let e=vi;for(vi=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function Mp(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Lp(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),Wc(s),vv(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function Xl(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Fp(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Fp(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Di)||(t.globalVersion=Di,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Xl(t))))return;t.flags|=2;const e=t.dep,n=$e,s=on;$e=t,on=!0;try{Mp(t);const r=t.fn(t._value);(e.version===0||hs(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{$e=n,on=s,Lp(t),t.flags&=-3}}function Wc(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Wc(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function vv(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let on=!0;const Up=[];function $n(){Up.push(on),on=!1}function Bn(){const t=Up.pop();on=t===void 0?!0:t}function Kh(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=$e;$e=void 0;try{e()}finally{$e=n}}}let Di=0;class wv{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Kc{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!$e||!on||$e===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==$e)n=this.activeLink=new wv($e,this),$e.deps?(n.prevDep=$e.depsTail,$e.depsTail.nextDep=n,$e.depsTail=n):$e.deps=$e.depsTail=n,$p(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=$e.depsTail,n.nextDep=void 0,$e.depsTail.nextDep=n,$e.depsTail=n,$e.deps===n&&($e.deps=s)}return n}trigger(e){this.version++,Di++,this.notify(e)}notify(e){zc();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Gc()}}}function $p(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)$p(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Zl=new WeakMap,js=Symbol(""),ec=Symbol(""),Ni=Symbol("");function It(t,e,n){if(on&&$e){let s=Zl.get(t);s||Zl.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new Kc),r.map=s,r.key=n),r.track()}}function On(t,e,n,s,r,i){const o=Zl.get(t);if(!o){Di++;return}const l=c=>{c&&c.trigger()};if(zc(),e==="clear")o.forEach(l);else{const c=pe(t),h=c&&qc(n);if(c&&n==="length"){const f=Number(s);o.forEach((p,g)=>{(g==="length"||g===Ni||!Sn(g)&&g>=f)&&l(p)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),h&&l(o.get(Ni)),e){case"add":c?h&&l(o.get("length")):(l(o.get(js)),vr(t)&&l(o.get(ec)));break;case"delete":c||(l(o.get(js)),vr(t)&&l(o.get(ec)));break;case"set":vr(t)&&l(o.get(js));break}}Gc()}function cr(t){const e=ke(t);return e===t?e:(It(e,"iterate",Ni),Qt(t)?e:e.map(ln))}function xa(t){return It(t=ke(t),"iterate",Ni),t}function ss(t,e){return jn(t)?Hs(t)?xr(ln(e)):xr(e):ln(e)}const Ev={__proto__:null,[Symbol.iterator](){return Rl(this,Symbol.iterator,t=>ss(this,t))},concat(...t){return cr(this).concat(...t.map(e=>pe(e)?cr(e):e))},entries(){return Rl(this,"entries",t=>(t[1]=ss(this,t[1]),t))},every(t,e){return Dn(this,"every",t,e,void 0,arguments)},filter(t,e){return Dn(this,"filter",t,e,n=>n.map(s=>ss(this,s)),arguments)},find(t,e){return Dn(this,"find",t,e,n=>ss(this,n),arguments)},findIndex(t,e){return Dn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Dn(this,"findLast",t,e,n=>ss(this,n),arguments)},findLastIndex(t,e){return Dn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Dn(this,"forEach",t,e,void 0,arguments)},includes(...t){return Sl(this,"includes",t)},indexOf(...t){return Sl(this,"indexOf",t)},join(t){return cr(this).join(t)},lastIndexOf(...t){return Sl(this,"lastIndexOf",t)},map(t,e){return Dn(this,"map",t,e,void 0,arguments)},pop(){return ui(this,"pop")},push(...t){return ui(this,"push",t)},reduce(t,...e){return Qh(this,"reduce",t,e)},reduceRight(t,...e){return Qh(this,"reduceRight",t,e)},shift(){return ui(this,"shift")},some(t,e){return Dn(this,"some",t,e,void 0,arguments)},splice(...t){return ui(this,"splice",t)},toReversed(){return cr(this).toReversed()},toSorted(t){return cr(this).toSorted(t)},toSpliced(...t){return cr(this).toSpliced(...t)},unshift(...t){return ui(this,"unshift",t)},values(){return Rl(this,"values",t=>ss(this,t))}};function Rl(t,e,n){const s=xa(t),r=s[e]();return s!==t&&!Qt(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=n(i.value)),i}),r}const Tv=Array.prototype;function Dn(t,e,n,s,r,i){const o=xa(t),l=o!==t&&!Qt(t),c=o[e];if(c!==Tv[e]){const p=c.apply(t,i);return l?ln(p):p}let h=n;o!==t&&(l?h=function(p,g){return n.call(this,ss(t,p),g,t)}:n.length>2&&(h=function(p,g){return n.call(this,p,g,t)}));const f=c.call(o,h,s);return l&&r?r(f):f}function Qh(t,e,n,s){const r=xa(t);let i=n;return r!==t&&(Qt(t)?n.length>3&&(i=function(o,l,c){return n.call(this,o,l,c,t)}):i=function(o,l,c){return n.call(this,o,ss(t,l),c,t)}),r[e](i,...s)}function Sl(t,e,n){const s=ke(t);It(s,"iterate",Ni);const r=s[e](...n);return(r===-1||r===!1)&&Jc(n[0])?(n[0]=ke(n[0]),s[e](...n)):r}function ui(t,e,n=[]){$n(),zc();const s=ke(t)[e].apply(t,n);return Gc(),Bn(),s}const Iv=Bc("__proto__,__v_isRef,__isVue"),Bp=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Sn));function bv(t){Sn(t)||(t=String(t));const e=ke(this);return It(e,"has",t),e.hasOwnProperty(t)}class jp{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?Vv:Gp:i?zp:qp).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=pe(e);if(!r){let c;if(o&&(c=Ev[n]))return c;if(n==="hasOwnProperty")return bv}const l=Reflect.get(e,n,St(e)?e:s);if((Sn(n)?Bp.has(n):Iv(n))||(r||It(e,"get",n),i))return l;if(St(l)){const c=o&&qc(n)?l:l.value;return r&&Fe(c)?nc(c):c}return Fe(l)?r?nc(l):ka(l):l}}class Hp extends jp{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];const o=pe(e)&&qc(n);if(!this._isShallow){const h=jn(i);if(!Qt(s)&&!jn(s)&&(i=ke(i),s=ke(s)),!o&&St(i)&&!St(s))return h||(i.value=s),!0}const l=o?Number(n)<e.length:Ne(e,n),c=Reflect.set(e,n,s,St(e)?e:r);return e===ke(r)&&(l?hs(s,i)&&On(e,"set",n,s):On(e,"add",n,s)),c}deleteProperty(e,n){const s=Ne(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&On(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!Sn(n)||!Bp.has(n))&&It(e,"has",n),s}ownKeys(e){return It(e,"iterate",pe(e)?"length":js),Reflect.ownKeys(e)}}class Av extends jp{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Rv=new Hp,Sv=new Av,Cv=new Hp(!0);const tc=t=>t,vo=t=>Reflect.getPrototypeOf(t);function Pv(t,e,n){return function(...s){const r=this.__v_raw,i=ke(r),o=vr(i),l=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,h=r[t](...s),f=n?tc:e?xr:ln;return!e&&It(i,"iterate",c?ec:js),{next(){const{value:p,done:g}=h.next();return g?{value:p,done:g}:{value:l?[f(p[0]),f(p[1])]:f(p),done:g}},[Symbol.iterator](){return this}}}}function wo(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function xv(t,e){const n={get(r){const i=this.__v_raw,o=ke(i),l=ke(r);t||(hs(r,l)&&It(o,"get",r),It(o,"get",l));const{has:c}=vo(o),h=e?tc:t?xr:ln;if(c.call(o,r))return h(i.get(r));if(c.call(o,l))return h(i.get(l));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&It(ke(r),"iterate",js),r.size},has(r){const i=this.__v_raw,o=ke(i),l=ke(r);return t||(hs(r,l)&&It(o,"has",r),It(o,"has",l)),r===l?i.has(r):i.has(r)||i.has(l)},forEach(r,i){const o=this,l=o.__v_raw,c=ke(l),h=e?tc:t?xr:ln;return!t&&It(c,"iterate",js),l.forEach((f,p)=>r.call(i,h(f),h(p),o))}};return Ct(n,t?{add:wo("add"),set:wo("set"),delete:wo("delete"),clear:wo("clear")}:{add(r){!e&&!Qt(r)&&!jn(r)&&(r=ke(r));const i=ke(this);return vo(i).has.call(i,r)||(i.add(r),On(i,"add",r,r)),this},set(r,i){!e&&!Qt(i)&&!jn(i)&&(i=ke(i));const o=ke(this),{has:l,get:c}=vo(o);let h=l.call(o,r);h||(r=ke(r),h=l.call(o,r));const f=c.call(o,r);return o.set(r,i),h?hs(i,f)&&On(o,"set",r,i):On(o,"add",r,i),this},delete(r){const i=ke(this),{has:o,get:l}=vo(i);let c=o.call(i,r);c||(r=ke(r),c=o.call(i,r)),l&&l.call(i,r);const h=i.delete(r);return c&&On(i,"delete",r,void 0),h},clear(){const r=ke(this),i=r.size!==0,o=r.clear();return i&&On(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=Pv(r,t,e)}),n}function Qc(t,e){const n=xv(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(Ne(n,r)&&r in s?n:s,r,i)}const kv={get:Qc(!1,!1)},Dv={get:Qc(!1,!0)},Nv={get:Qc(!0,!1)};const qp=new WeakMap,zp=new WeakMap,Gp=new WeakMap,Vv=new WeakMap;function Ov(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Mv(t){return t.__v_skip||!Object.isExtensible(t)?0:Ov(ov(t))}function ka(t){return jn(t)?t:Yc(t,!1,Rv,kv,qp)}function Wp(t){return Yc(t,!1,Cv,Dv,zp)}function nc(t){return Yc(t,!0,Sv,Nv,Gp)}function Yc(t,e,n,s,r){if(!Fe(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Mv(t);if(i===0)return t;const o=r.get(t);if(o)return o;const l=new Proxy(t,i===2?s:n);return r.set(t,l),l}function Hs(t){return jn(t)?Hs(t.__v_raw):!!(t&&t.__v_isReactive)}function jn(t){return!!(t&&t.__v_isReadonly)}function Qt(t){return!!(t&&t.__v_isShallow)}function Jc(t){return t?!!t.__v_raw:!1}function ke(t){const e=t&&t.__v_raw;return e?ke(e):t}function Lv(t){return!Ne(t,"__v_skip")&&Object.isExtensible(t)&&Pp(t,"__v_skip",!0),t}const ln=t=>Fe(t)?ka(t):t,xr=t=>Fe(t)?nc(t):t;function St(t){return t?t.__v_isRef===!0:!1}function Re(t){return Kp(t,!1)}function Fv(t){return Kp(t,!0)}function Kp(t,e){return St(t)?t:new Uv(t,e)}class Uv{constructor(e,n){this.dep=new Kc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:ke(e),this._value=n?e:ln(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||Qt(e)||jn(e);e=s?e:ke(e),hs(e,n)&&(this._rawValue=e,this._value=s?e:ln(e),this.dep.trigger())}}function Ft(t){return St(t)?t.value:t}const $v={get:(t,e,n)=>e==="__v_raw"?t:Ft(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return St(r)&&!St(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function Qp(t){return Hs(t)?t:new Proxy(t,$v)}class Bv{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Kc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Di-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&$e!==this)return Op(this,!0),!0}get value(){const e=this.dep.track();return Fp(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function jv(t,e,n=!1){let s,r;return ye(t)?s=t:(s=t.get,r=t.set),new Bv(s,r,n)}const Eo={},qo=new WeakMap;let Os;function Hv(t,e=!1,n=Os){if(n){let s=qo.get(n);s||qo.set(n,s=[]),s.push(t)}}function qv(t,e,n=Le){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:l,call:c}=n,h=Y=>r?Y:Qt(Y)||r===!1||r===0?Mn(Y,1):Mn(Y);let f,p,g,w,D=!1,O=!1;if(St(t)?(p=()=>t.value,D=Qt(t)):Hs(t)?(p=()=>h(t),D=!0):pe(t)?(O=!0,D=t.some(Y=>Hs(Y)||Qt(Y)),p=()=>t.map(Y=>{if(St(Y))return Y.value;if(Hs(Y))return h(Y);if(ye(Y))return c?c(Y,2):Y()})):ye(t)?e?p=c?()=>c(t,2):t:p=()=>{if(g){$n();try{g()}finally{Bn()}}const Y=Os;Os=f;try{return c?c(t,3,[w]):t(w)}finally{Os=Y}}:p=vn,e&&r){const Y=p,$=r===!0?1/0:r;p=()=>Mn(Y(),$)}const F=yv(),Q=()=>{f.stop(),F&&F.active&&Hc(F.effects,f)};if(i&&e){const Y=e;e=(...$)=>{Y(...$),Q()}}let V=O?new Array(t.length).fill(Eo):Eo;const M=Y=>{if(!(!(f.flags&1)||!f.dirty&&!Y))if(e){const $=f.run();if(r||D||(O?$.some((H,b)=>hs(H,V[b])):hs($,V))){g&&g();const H=Os;Os=f;try{const b=[$,V===Eo?void 0:O&&V[0]===Eo?[]:V,w];V=$,c?c(e,3,b):e(...b)}finally{Os=H}}}else f.run()};return l&&l(M),f=new Np(p),f.scheduler=o?()=>o(M,!1):M,w=Y=>Hv(Y,!1,f),g=f.onStop=()=>{const Y=qo.get(f);if(Y){if(c)c(Y,4);else for(const $ of Y)$();qo.delete(f)}},e?s?M(!0):V=f.run():o?o(M.bind(null,!0),!0):f.run(),Q.pause=f.pause.bind(f),Q.resume=f.resume.bind(f),Q.stop=Q,Q}function Mn(t,e=1/0,n){if(e<=0||!Fe(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,St(t))Mn(t.value,e,n);else if(pe(t))for(let s=0;s<t.length;s++)Mn(t[s],e,n);else if(ba(t)||vr(t))t.forEach(s=>{Mn(s,e,n)});else if(Cp(t)){for(const s in t)Mn(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Mn(t[s],e,n)}return t}function Ki(t,e,n,s){try{return s?t(...s):t()}catch(r){Da(r,e,n)}}function Cn(t,e,n,s){if(ye(t)){const r=Ki(t,e,n,s);return r&&Rp(r)&&r.catch(i=>{Da(i,e,n)}),r}if(pe(t)){const r=[];for(let i=0;i<t.length;i++)r.push(Cn(t[i],e,n,s));return r}}function Da(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Le;if(e){let l=e.parent;const c=e.proxy,h=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const f=l.ec;if(f){for(let p=0;p<f.length;p++)if(f[p](t,c,h)===!1)return}l=l.parent}if(i){$n(),Ki(i,null,10,[t,c,h]),Bn();return}}zv(t,n,r,s,o)}function zv(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const Nt=[];let mn=-1;const wr=[];let rs=null,ur=0;const Yp=Promise.resolve();let zo=null;function Xc(t){const e=zo||Yp;return t?e.then(this?t.bind(this):t):e}function Gv(t){let e=mn+1,n=Nt.length;for(;e<n;){const s=e+n>>>1,r=Nt[s],i=Vi(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function Zc(t){if(!(t.flags&1)){const e=Vi(t),n=Nt[Nt.length-1];!n||!(t.flags&2)&&e>=Vi(n)?Nt.push(t):Nt.splice(Gv(e),0,t),t.flags|=1,Jp()}}function Jp(){zo||(zo=Yp.then(Zp))}function Wv(t){pe(t)?wr.push(...t):rs&&t.id===-1?rs.splice(ur+1,0,t):t.flags&1||(wr.push(t),t.flags|=1),Jp()}function Yh(t,e,n=mn+1){for(;n<Nt.length;n++){const s=Nt[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;Nt.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Xp(t){if(wr.length){const e=[...new Set(wr)].sort((n,s)=>Vi(n)-Vi(s));if(wr.length=0,rs){rs.push(...e);return}for(rs=e,ur=0;ur<rs.length;ur++){const n=rs[ur];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}rs=null,ur=0}}const Vi=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Zp(t){try{for(mn=0;mn<Nt.length;mn++){const e=Nt[mn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Ki(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;mn<Nt.length;mn++){const e=Nt[mn];e&&(e.flags&=-2)}mn=-1,Nt.length=0,Xp(),zo=null,(Nt.length||wr.length)&&Zp()}}let qt=null,eg=null;function Go(t){const e=qt;return qt=t,eg=t&&t.type.__scopeId||null,e}function hr(t,e=qt,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&Qo(-1);const i=Go(e);let o;try{o=t(...r)}finally{Go(i),s._d&&Qo(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function es(t,e){if(qt===null)return t;const n=Ma(qt),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,l,c=Le]=e[r];i&&(ye(i)&&(i={mounted:i,updated:i}),i.deep&&Mn(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:l,modifiers:c}))}return t}function Ns(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const l=r[o];i&&(l.oldValue=i[o].value);let c=l.dir[s];c&&($n(),Cn(c,n,8,[t.el,l,t,e]),Bn())}}const Kv=Symbol("_vte"),Qv=t=>t.__isTeleport,Yv=Symbol("_leaveCb");function eu(t,e){t.shapeFlag&6&&t.component?(t.transition=e,eu(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function tg(t,e){return ye(t)?Ct({name:t.name},e,{setup:t}):t}function ng(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Wo=new WeakMap;function Ei(t,e,n,s,r=!1){if(pe(t)){t.forEach((D,O)=>Ei(D,e&&(pe(e)?e[O]:e),n,s,r));return}if(Ti(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Ei(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?Ma(s.component):s.el,o=r?null:i,{i:l,r:c}=t,h=e&&e.r,f=l.refs===Le?l.refs={}:l.refs,p=l.setupState,g=ke(p),w=p===Le?Ap:D=>Ne(g,D);if(h!=null&&h!==c){if(Jh(e),et(h))f[h]=null,w(h)&&(p[h]=null);else if(St(h)){h.value=null;const D=e;D.k&&(f[D.k]=null)}}if(ye(c))Ki(c,l,12,[o,f]);else{const D=et(c),O=St(c);if(D||O){const F=()=>{if(t.f){const Q=D?w(c)?p[c]:f[c]:c.value;if(r)pe(Q)&&Hc(Q,i);else if(pe(Q))Q.includes(i)||Q.push(i);else if(D)f[c]=[i],w(c)&&(p[c]=f[c]);else{const V=[i];c.value=V,t.k&&(f[t.k]=V)}}else D?(f[c]=o,w(c)&&(p[c]=o)):O&&(c.value=o,t.k&&(f[t.k]=o))};if(o){const Q=()=>{F(),Wo.delete(t)};Q.id=-1,Wo.set(t,Q),jt(Q,n)}else Jh(t),F()}}}function Jh(t){const e=Wo.get(t);e&&(e.flags|=8,Wo.delete(t))}Ca().requestIdleCallback;Ca().cancelIdleCallback;const Ti=t=>!!t.type.__asyncLoader,sg=t=>t.type.__isKeepAlive;function Jv(t,e){rg(t,"a",e)}function Xv(t,e){rg(t,"da",e)}function rg(t,e,n=At){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Na(e,s,n),n){let r=n.parent;for(;r&&r.parent;)sg(r.parent.vnode)&&Zv(s,e,n,r),r=r.parent}}function Zv(t,e,n,s){const r=Na(e,t,s,!0);ig(()=>{Hc(s[e],r)},n)}function Na(t,e,n=At,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{$n();const l=Yi(n),c=Cn(e,n,t,o);return l(),Bn(),c});return s?r.unshift(i):r.push(i),i}}const Wn=t=>(e,n=At)=>{(!Mi||t==="sp")&&Na(t,(...s)=>e(...s),n)},ew=Wn("bm"),Qi=Wn("m"),tw=Wn("bu"),nw=Wn("u"),sw=Wn("bum"),ig=Wn("um"),rw=Wn("sp"),iw=Wn("rtg"),ow=Wn("rtc");function aw(t,e=At){Na("ec",t,e)}const lw="components";function og(t,e){return uw(lw,t,!0,e)||t}const cw=Symbol.for("v-ndc");function uw(t,e,n=!0,s=!1){const r=qt||At;if(r){const i=r.type;{const l=Xw(i,!1);if(l&&(l===e||l===Jt(e)||l===Ra(Jt(e))))return i}const o=Xh(r[t]||i[t],e)||Xh(r.appContext[t],e);return!o&&s?i:o}}function Xh(t,e){return t&&(t[e]||t[Jt(e)]||t[Ra(Jt(e))])}function Ht(t,e,n,s){let r;const i=n,o=pe(t);if(o||et(t)){const l=o&&Hs(t);let c=!1,h=!1;l&&(c=!Qt(t),h=jn(t),t=xa(t)),r=new Array(t.length);for(let f=0,p=t.length;f<p;f++)r[f]=e(c?h?xr(ln(t[f])):ln(t[f]):t[f],f,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let l=0;l<t;l++)r[l]=e(l+1,l,void 0,i)}else if(Fe(t))if(t[Symbol.iterator])r=Array.from(t,(l,c)=>e(l,c,void 0,i));else{const l=Object.keys(t);r=new Array(l.length);for(let c=0,h=l.length;c<h;c++){const f=l[c];r[c]=e(t[f],f,c,i)}}else r=[];return r}const sc=t=>t?Sg(t)?Ma(t):sc(t.parent):null,Ii=Ct(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>sc(t.parent),$root:t=>sc(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>lg(t),$forceUpdate:t=>t.f||(t.f=()=>{Zc(t.update)}),$nextTick:t=>t.n||(t.n=Xc.bind(t.proxy)),$watch:t=>Ew.bind(t)}),Cl=(t,e)=>t!==Le&&!t.__isScriptSetup&&Ne(t,e),hw={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:l,appContext:c}=t;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(Cl(s,e))return o[e]=1,s[e];if(r!==Le&&Ne(r,e))return o[e]=2,r[e];if(Ne(i,e))return o[e]=3,i[e];if(n!==Le&&Ne(n,e))return o[e]=4,n[e];rc&&(o[e]=0)}}const h=Ii[e];let f,p;if(h)return e==="$attrs"&&It(t.attrs,"get",""),h(t);if((f=l.__cssModules)&&(f=f[e]))return f;if(n!==Le&&Ne(n,e))return o[e]=4,n[e];if(p=c.config.globalProperties,Ne(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return Cl(r,e)?(r[e]=n,!0):s!==Le&&Ne(s,e)?(s[e]=n,!0):Ne(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,props:i,type:o}},l){let c;return!!(n[l]||t!==Le&&l[0]!=="$"&&Ne(t,l)||Cl(e,l)||Ne(i,l)||Ne(s,l)||Ne(Ii,l)||Ne(r.config.globalProperties,l)||(c=o.__cssModules)&&c[l])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ne(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Zh(t){return pe(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let rc=!0;function fw(t){const e=lg(t),n=t.proxy,s=t.ctx;rc=!1,e.beforeCreate&&ef(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:l,provide:c,inject:h,created:f,beforeMount:p,mounted:g,beforeUpdate:w,updated:D,activated:O,deactivated:F,beforeDestroy:Q,beforeUnmount:V,destroyed:M,unmounted:Y,render:$,renderTracked:H,renderTriggered:b,errorCaptured:_,serverPrefetch:v,expose:R,inheritAttrs:A,components:C,directives:E,filters:Ue}=e;if(h&&dw(h,s,null),o)for(const Pe in o){const Ee=o[Pe];ye(Ee)&&(s[Pe]=Ee.bind(n))}if(r){const Pe=r.call(n,n);Fe(Pe)&&(t.data=ka(Pe))}if(rc=!0,i)for(const Pe in i){const Ee=i[Pe],mt=ye(Ee)?Ee.bind(n,n):ye(Ee.get)?Ee.get.bind(n,n):vn,Ot=!ye(Ee)&&ye(Ee.set)?Ee.set.bind(n):vn,_t=Rt({get:mt,set:Ot});Object.defineProperty(s,Pe,{enumerable:!0,configurable:!0,get:()=>_t.value,set:nt=>_t.value=nt})}if(l)for(const Pe in l)ag(l[Pe],s,n,Pe);if(c){const Pe=ye(c)?c.call(n):c;Reflect.ownKeys(Pe).forEach(Ee=>{xo(Ee,Pe[Ee])})}f&&ef(f,t,"c");function We(Pe,Ee){pe(Ee)?Ee.forEach(mt=>Pe(mt.bind(n))):Ee&&Pe(Ee.bind(n))}if(We(ew,p),We(Qi,g),We(tw,w),We(nw,D),We(Jv,O),We(Xv,F),We(aw,_),We(ow,H),We(iw,b),We(sw,V),We(ig,Y),We(rw,v),pe(R))if(R.length){const Pe=t.exposed||(t.exposed={});R.forEach(Ee=>{Object.defineProperty(Pe,Ee,{get:()=>n[Ee],set:mt=>n[Ee]=mt,enumerable:!0})})}else t.exposed||(t.exposed={});$&&t.render===vn&&(t.render=$),A!=null&&(t.inheritAttrs=A),C&&(t.components=C),E&&(t.directives=E),v&&ng(t)}function dw(t,e,n=vn){pe(t)&&(t=ic(t));for(const s in t){const r=t[s];let i;Fe(r)?"default"in r?i=wn(r.from||s,r.default,!0):i=wn(r.from||s):i=wn(r),St(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function ef(t,e,n){Cn(pe(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function ag(t,e,n,s){let r=s.includes(".")?hg(n,s):()=>n[s];if(et(t)){const i=e[t];ye(i)&&qs(r,i)}else if(ye(t))qs(r,t.bind(n));else if(Fe(t))if(pe(t))t.forEach(i=>ag(i,e,n,s));else{const i=ye(t.handler)?t.handler.bind(n):e[t.handler];ye(i)&&qs(r,i,t)}}function lg(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,l=i.get(e);let c;return l?c=l:!r.length&&!n&&!s?c=e:(c={},r.length&&r.forEach(h=>Ko(c,h,o,!0)),Ko(c,e,o)),Fe(e)&&i.set(e,c),c}function Ko(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&Ko(t,i,n,!0),r&&r.forEach(o=>Ko(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const l=pw[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const pw={data:tf,props:nf,emits:nf,methods:pi,computed:pi,beforeCreate:kt,created:kt,beforeMount:kt,mounted:kt,beforeUpdate:kt,updated:kt,beforeDestroy:kt,beforeUnmount:kt,destroyed:kt,unmounted:kt,activated:kt,deactivated:kt,errorCaptured:kt,serverPrefetch:kt,components:pi,directives:pi,watch:mw,provide:tf,inject:gw};function tf(t,e){return e?t?function(){return Ct(ye(t)?t.call(this,this):t,ye(e)?e.call(this,this):e)}:e:t}function gw(t,e){return pi(ic(t),ic(e))}function ic(t){if(pe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function kt(t,e){return t?[...new Set([].concat(t,e))]:e}function pi(t,e){return t?Ct(Object.create(null),t,e):e}function nf(t,e){return t?pe(t)&&pe(e)?[...new Set([...t,...e])]:Ct(Object.create(null),Zh(t),Zh(e??{})):e}function mw(t,e){if(!t)return e;if(!e)return t;const n=Ct(Object.create(null),t);for(const s in e)n[s]=kt(t[s],e[s]);return n}function cg(){return{app:null,config:{isNativeTag:Ap,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let _w=0;function yw(t,e){return function(s,r=null){ye(s)||(s=Ct({},s)),r!=null&&!Fe(r)&&(r=null);const i=cg(),o=new WeakSet,l=[];let c=!1;const h=i.app={_uid:_w++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:e0,get config(){return i.config},set config(f){},use(f,...p){return o.has(f)||(f&&ye(f.install)?(o.add(f),f.install(h,...p)):ye(f)&&(o.add(f),f(h,...p))),h},mixin(f){return i.mixins.includes(f)||i.mixins.push(f),h},component(f,p){return p?(i.components[f]=p,h):i.components[f]},directive(f,p){return p?(i.directives[f]=p,h):i.directives[f]},mount(f,p,g){if(!c){const w=h._ceVNode||ze(s,r);return w.appContext=i,g===!0?g="svg":g===!1&&(g=void 0),t(w,f,g),c=!0,h._container=f,f.__vue_app__=h,Ma(w.component)}},onUnmount(f){l.push(f)},unmount(){c&&(Cn(l,h._instance,16),t(null,h._container),delete h._container.__vue_app__)},provide(f,p){return i.provides[f]=p,h},runWithContext(f){const p=Er;Er=h;try{return f()}finally{Er=p}}};return h}}let Er=null;function xo(t,e){if(At){let n=At.provides;const s=At.parent&&At.parent.provides;s===n&&(n=At.provides=Object.create(s)),n[t]=e}}function wn(t,e,n=!1){const s=Ww();if(s||Er){let r=Er?Er._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&ye(e)?e.call(s&&s.proxy):e}}const vw=Symbol.for("v-scx"),ww=()=>wn(vw);function qs(t,e,n){return ug(t,e,n)}function ug(t,e,n=Le){const{immediate:s,deep:r,flush:i,once:o}=n,l=Ct({},n),c=e&&s||!e&&i!=="post";let h;if(Mi){if(i==="sync"){const w=ww();h=w.__watcherHandles||(w.__watcherHandles=[])}else if(!c){const w=()=>{};return w.stop=vn,w.resume=vn,w.pause=vn,w}}const f=At;l.call=(w,D,O)=>Cn(w,f,D,O);let p=!1;i==="post"?l.scheduler=w=>{jt(w,f&&f.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(w,D)=>{D?w():Zc(w)}),l.augmentJob=w=>{e&&(w.flags|=4),p&&(w.flags|=2,f&&(w.id=f.uid,w.i=f))};const g=qv(t,e,l);return Mi&&(h?h.push(g):c&&g()),g}function Ew(t,e,n){const s=this.proxy,r=et(t)?t.includes(".")?hg(s,t):()=>s[t]:t.bind(s,s);let i;ye(e)?i=e:(i=e.handler,n=e);const o=Yi(this),l=ug(r,i.bind(s),n);return o(),l}function hg(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const Tw=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Jt(e)}Modifiers`]||t[`${Xs(e)}Modifiers`];function Iw(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||Le;let r=n;const i=e.startsWith("update:"),o=i&&Tw(s,e.slice(7));o&&(o.trim&&(r=n.map(f=>et(f)?f.trim():f)),o.number&&(r=n.map(Sa)));let l,c=s[l=Il(e)]||s[l=Il(Jt(e))];!c&&i&&(c=s[l=Il(Xs(e))]),c&&Cn(c,t,6,r);const h=s[l+"Once"];if(h){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Cn(h,t,6,r)}}const bw=new WeakMap;function fg(t,e,n=!1){const s=n?bw:e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},l=!1;if(!ye(t)){const c=h=>{const f=fg(h,e,!0);f&&(l=!0,Ct(o,f))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!l?(Fe(t)&&s.set(t,null),null):(pe(i)?i.forEach(c=>o[c]=null):Ct(o,i),Fe(t)&&s.set(t,o),o)}function Va(t,e){return!t||!Ia(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ne(t,e[0].toLowerCase()+e.slice(1))||Ne(t,Xs(e))||Ne(t,e))}function sf(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:l,emit:c,render:h,renderCache:f,props:p,data:g,setupState:w,ctx:D,inheritAttrs:O}=t,F=Go(t);let Q,V;try{if(n.shapeFlag&4){const Y=r||s,$=Y;Q=yn(h.call($,Y,f,p,w,g,D)),V=l}else{const Y=e;Q=yn(Y.length>1?Y(p,{attrs:l,slots:o,emit:c}):Y(p,null)),V=e.props?l:Aw(l)}}catch(Y){bi.length=0,Da(Y,t,1),Q=ze(vs)}let M=Q;if(V&&O!==!1){const Y=Object.keys(V),{shapeFlag:$}=M;Y.length&&$&7&&(i&&Y.some(jc)&&(V=Rw(V,i)),M=kr(M,V,!1,!0))}return n.dirs&&(M=kr(M,null,!1,!0),M.dirs=M.dirs?M.dirs.concat(n.dirs):n.dirs),n.transition&&eu(M,n.transition),Q=M,Go(F),Q}const Aw=t=>{let e;for(const n in t)(n==="class"||n==="style"||Ia(n))&&((e||(e={}))[n]=t[n]);return e},Rw=(t,e)=>{const n={};for(const s in t)(!jc(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function Sw(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:l,patchFlag:c}=e,h=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?rf(s,o,h):!!o;if(c&8){const f=e.dynamicProps;for(let p=0;p<f.length;p++){const g=f[p];if(o[g]!==s[g]&&!Va(h,g))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?rf(s,o,h):!0:!!o;return!1}function rf(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!Va(n,i))return!0}return!1}function Cw({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const dg={},pg=()=>Object.create(dg),gg=t=>Object.getPrototypeOf(t)===dg;function Pw(t,e,n,s=!1){const r={},i=pg();t.propsDefaults=Object.create(null),mg(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:Wp(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function xw(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,l=ke(r),[c]=t.propsOptions;let h=!1;if((s||o>0)&&!(o&16)){if(o&8){const f=t.vnode.dynamicProps;for(let p=0;p<f.length;p++){let g=f[p];if(Va(t.emitsOptions,g))continue;const w=e[g];if(c)if(Ne(i,g))w!==i[g]&&(i[g]=w,h=!0);else{const D=Jt(g);r[D]=oc(c,l,D,w,t,!1)}else w!==i[g]&&(i[g]=w,h=!0)}}}else{mg(t,e,r,i)&&(h=!0);let f;for(const p in l)(!e||!Ne(e,p)&&((f=Xs(p))===p||!Ne(e,f)))&&(c?n&&(n[p]!==void 0||n[f]!==void 0)&&(r[p]=oc(c,l,p,void 0,t,!0)):delete r[p]);if(i!==l)for(const p in i)(!e||!Ne(e,p))&&(delete i[p],h=!0)}h&&On(t.attrs,"set","")}function mg(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,l;if(e)for(let c in e){if(yi(c))continue;const h=e[c];let f;r&&Ne(r,f=Jt(c))?!i||!i.includes(f)?n[f]=h:(l||(l={}))[f]=h:Va(t.emitsOptions,c)||(!(c in s)||h!==s[c])&&(s[c]=h,o=!0)}if(i){const c=ke(n),h=l||Le;for(let f=0;f<i.length;f++){const p=i[f];n[p]=oc(r,c,p,h[p],t,!Ne(h,p))}}return o}function oc(t,e,n,s,r,i){const o=t[n];if(o!=null){const l=Ne(o,"default");if(l&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&ye(c)){const{propsDefaults:h}=r;if(n in h)s=h[n];else{const f=Yi(r);s=h[n]=c.call(null,e),f()}}else s=c;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!l?s=!1:o[1]&&(s===""||s===Xs(n))&&(s=!0))}return s}const kw=new WeakMap;function _g(t,e,n=!1){const s=n?kw:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},l=[];let c=!1;if(!ye(t)){const f=p=>{c=!0;const[g,w]=_g(p,e,!0);Ct(o,g),w&&l.push(...w)};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!i&&!c)return Fe(t)&&s.set(t,yr),yr;if(pe(i))for(let f=0;f<i.length;f++){const p=Jt(i[f]);of(p)&&(o[p]=Le)}else if(i)for(const f in i){const p=Jt(f);if(of(p)){const g=i[f],w=o[p]=pe(g)||ye(g)?{type:g}:Ct({},g),D=w.type;let O=!1,F=!0;if(pe(D))for(let Q=0;Q<D.length;++Q){const V=D[Q],M=ye(V)&&V.name;if(M==="Boolean"){O=!0;break}else M==="String"&&(F=!1)}else O=ye(D)&&D.name==="Boolean";w[0]=O,w[1]=F,(O||Ne(w,"default"))&&l.push(p)}}const h=[o,l];return Fe(t)&&s.set(t,h),h}function of(t){return t[0]!=="$"&&!yi(t)}const tu=t=>t==="_"||t==="_ctx"||t==="$stable",nu=t=>pe(t)?t.map(yn):[yn(t)],Dw=(t,e,n)=>{if(e._n)return e;const s=hr((...r)=>nu(e(...r)),n);return s._c=!1,s},yg=(t,e,n)=>{const s=t._ctx;for(const r in t){if(tu(r))continue;const i=t[r];if(ye(i))e[r]=Dw(r,i,s);else if(i!=null){const o=nu(i);e[r]=()=>o}}},vg=(t,e)=>{const n=nu(e);t.slots.default=()=>n},wg=(t,e,n)=>{for(const s in e)(n||!tu(s))&&(t[s]=e[s])},Nw=(t,e,n)=>{const s=t.slots=pg();if(t.vnode.shapeFlag&32){const r=e._;r?(wg(s,e,n),n&&Pp(s,"_",r,!0)):yg(e,s)}else e&&vg(t,e)},Vw=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=Le;if(s.shapeFlag&32){const l=e._;l?n&&l===1?i=!1:wg(r,e,n):(i=!e.$stable,yg(e,r)),o=e}else e&&(vg(t,e),o={default:1});if(i)for(const l in r)!tu(l)&&o[l]==null&&delete r[l]},jt=Uw;function Ow(t){return Mw(t)}function Mw(t,e){const n=Ca();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:l,createComment:c,setText:h,setElementText:f,parentNode:p,nextSibling:g,setScopeId:w=vn,insertStaticContent:D}=t,O=(y,T,P,B=null,j=null,L=null,te=void 0,X=null,J=!!T.dynamicChildren)=>{if(y===T)return;y&&!hi(y,T)&&(B=S(y),nt(y,j,L,!0),y=null),T.patchFlag===-2&&(J=!1,T.dynamicChildren=null);const{type:K,ref:ce,shapeFlag:se}=T;switch(K){case Oa:F(y,T,P,B);break;case vs:Q(y,T,P,B);break;case ko:y==null&&V(T,P,B,te);break;case He:C(y,T,P,B,j,L,te,X,J);break;default:se&1?$(y,T,P,B,j,L,te,X,J):se&6?E(y,T,P,B,j,L,te,X,J):(se&64||se&128)&&K.process(y,T,P,B,j,L,te,X,J,ie)}ce!=null&&j?Ei(ce,y&&y.ref,L,T||y,!T):ce==null&&y&&y.ref!=null&&Ei(y.ref,null,L,y,!0)},F=(y,T,P,B)=>{if(y==null)s(T.el=l(T.children),P,B);else{const j=T.el=y.el;T.children!==y.children&&h(j,T.children)}},Q=(y,T,P,B)=>{y==null?s(T.el=c(T.children||""),P,B):T.el=y.el},V=(y,T,P,B)=>{[y.el,y.anchor]=D(y.children,T,P,B,y.el,y.anchor)},M=({el:y,anchor:T},P,B)=>{let j;for(;y&&y!==T;)j=g(y),s(y,P,B),y=j;s(T,P,B)},Y=({el:y,anchor:T})=>{let P;for(;y&&y!==T;)P=g(y),r(y),y=P;r(T)},$=(y,T,P,B,j,L,te,X,J)=>{if(T.type==="svg"?te="svg":T.type==="math"&&(te="mathml"),y==null)H(T,P,B,j,L,te,X,J);else{const K=y.el&&y.el._isVueCE?y.el:null;try{K&&K._beginPatch(),v(y,T,j,L,te,X,J)}finally{K&&K._endPatch()}}},H=(y,T,P,B,j,L,te,X)=>{let J,K;const{props:ce,shapeFlag:se,transition:ue,dirs:he}=y;if(J=y.el=o(y.type,L,ce&&ce.is,ce),se&8?f(J,y.children):se&16&&_(y.children,J,null,B,j,Pl(y,L),te,X),he&&Ns(y,null,B,"created"),b(J,y,y.scopeId,te,B),ce){for(const Oe in ce)Oe!=="value"&&!yi(Oe)&&i(J,Oe,null,ce[Oe],L,B);"value"in ce&&i(J,"value",null,ce.value,L),(K=ce.onVnodeBeforeMount)&&gn(K,B,y)}he&&Ns(y,null,B,"beforeMount");const Te=Lw(j,ue);Te&&ue.beforeEnter(J),s(J,T,P),((K=ce&&ce.onVnodeMounted)||Te||he)&&jt(()=>{K&&gn(K,B,y),Te&&ue.enter(J),he&&Ns(y,null,B,"mounted")},j)},b=(y,T,P,B,j)=>{if(P&&w(y,P),B)for(let L=0;L<B.length;L++)w(y,B[L]);if(j){let L=j.subTree;if(T===L||Ig(L.type)&&(L.ssContent===T||L.ssFallback===T)){const te=j.vnode;b(y,te,te.scopeId,te.slotScopeIds,j.parent)}}},_=(y,T,P,B,j,L,te,X,J=0)=>{for(let K=J;K<y.length;K++){const ce=y[K]=X?is(y[K]):yn(y[K]);O(null,ce,T,P,B,j,L,te,X)}},v=(y,T,P,B,j,L,te)=>{const X=T.el=y.el;let{patchFlag:J,dynamicChildren:K,dirs:ce}=T;J|=y.patchFlag&16;const se=y.props||Le,ue=T.props||Le;let he;if(P&&Vs(P,!1),(he=ue.onVnodeBeforeUpdate)&&gn(he,P,T,y),ce&&Ns(T,y,P,"beforeUpdate"),P&&Vs(P,!0),(se.innerHTML&&ue.innerHTML==null||se.textContent&&ue.textContent==null)&&f(X,""),K?R(y.dynamicChildren,K,X,P,B,Pl(T,j),L):te||Ee(y,T,X,null,P,B,Pl(T,j),L,!1),J>0){if(J&16)A(X,se,ue,P,j);else if(J&2&&se.class!==ue.class&&i(X,"class",null,ue.class,j),J&4&&i(X,"style",se.style,ue.style,j),J&8){const Te=T.dynamicProps;for(let Oe=0;Oe<Te.length;Oe++){const Ce=Te[Oe],yt=se[Ce],vt=ue[Ce];(vt!==yt||Ce==="value")&&i(X,Ce,yt,vt,j,P)}}J&1&&y.children!==T.children&&f(X,T.children)}else!te&&K==null&&A(X,se,ue,P,j);((he=ue.onVnodeUpdated)||ce)&&jt(()=>{he&&gn(he,P,T,y),ce&&Ns(T,y,P,"updated")},B)},R=(y,T,P,B,j,L,te)=>{for(let X=0;X<T.length;X++){const J=y[X],K=T[X],ce=J.el&&(J.type===He||!hi(J,K)||J.shapeFlag&198)?p(J.el):P;O(J,K,ce,null,B,j,L,te,!0)}},A=(y,T,P,B,j)=>{if(T!==P){if(T!==Le)for(const L in T)!yi(L)&&!(L in P)&&i(y,L,T[L],null,j,B);for(const L in P){if(yi(L))continue;const te=P[L],X=T[L];te!==X&&L!=="value"&&i(y,L,X,te,j,B)}"value"in P&&i(y,"value",T.value,P.value,j)}},C=(y,T,P,B,j,L,te,X,J)=>{const K=T.el=y?y.el:l(""),ce=T.anchor=y?y.anchor:l("");let{patchFlag:se,dynamicChildren:ue,slotScopeIds:he}=T;he&&(X=X?X.concat(he):he),y==null?(s(K,P,B),s(ce,P,B),_(T.children||[],P,ce,j,L,te,X,J)):se>0&&se&64&&ue&&y.dynamicChildren?(R(y.dynamicChildren,ue,P,j,L,te,X),(T.key!=null||j&&T===j.subTree)&&Eg(y,T,!0)):Ee(y,T,P,ce,j,L,te,X,J)},E=(y,T,P,B,j,L,te,X,J)=>{T.slotScopeIds=X,y==null?T.shapeFlag&512?j.ctx.activate(T,P,B,te,J):Ue(T,P,B,j,L,te,J):tt(y,T,J)},Ue=(y,T,P,B,j,L,te)=>{const X=y.component=Gw(y,B,j);if(sg(y)&&(X.ctx.renderer=ie),Kw(X,!1,te),X.asyncDep){if(j&&j.registerDep(X,We,te),!y.el){const J=X.subTree=ze(vs);Q(null,J,T,P),y.placeholder=J.el}}else We(X,y,T,P,j,L,te)},tt=(y,T,P)=>{const B=T.component=y.component;if(Sw(y,T,P))if(B.asyncDep&&!B.asyncResolved){Pe(B,T,P);return}else B.next=T,B.update();else T.el=y.el,B.vnode=T},We=(y,T,P,B,j,L,te)=>{const X=()=>{if(y.isMounted){let{next:se,bu:ue,u:he,parent:Te,vnode:Oe}=y;{const $t=Tg(y);if($t){se&&(se.el=Oe.el,Pe(y,se,te)),$t.asyncDep.then(()=>{y.isUnmounted||X()});return}}let Ce=se,yt;Vs(y,!1),se?(se.el=Oe.el,Pe(y,se,te)):se=Oe,ue&&Po(ue),(yt=se.props&&se.props.onVnodeBeforeUpdate)&&gn(yt,Te,se,Oe),Vs(y,!0);const vt=sf(y),Ut=y.subTree;y.subTree=vt,O(Ut,vt,p(Ut.el),S(Ut),y,j,L),se.el=vt.el,Ce===null&&Cw(y,vt.el),he&&jt(he,j),(yt=se.props&&se.props.onVnodeUpdated)&&jt(()=>gn(yt,Te,se,Oe),j)}else{let se;const{el:ue,props:he}=T,{bm:Te,m:Oe,parent:Ce,root:yt,type:vt}=y,Ut=Ti(T);Vs(y,!1),Te&&Po(Te),!Ut&&(se=he&&he.onVnodeBeforeMount)&&gn(se,Ce,T),Vs(y,!0);{yt.ce&&yt.ce._def.shadowRoot!==!1&&yt.ce._injectChildStyle(vt);const $t=y.subTree=sf(y);O(null,$t,P,B,y,j,L),T.el=$t.el}if(Oe&&jt(Oe,j),!Ut&&(se=he&&he.onVnodeMounted)){const $t=T;jt(()=>gn(se,Ce,$t),j)}(T.shapeFlag&256||Ce&&Ti(Ce.vnode)&&Ce.vnode.shapeFlag&256)&&y.a&&jt(y.a,j),y.isMounted=!0,T=P=B=null}};y.scope.on();const J=y.effect=new Np(X);y.scope.off();const K=y.update=J.run.bind(J),ce=y.job=J.runIfDirty.bind(J);ce.i=y,ce.id=y.uid,J.scheduler=()=>Zc(ce),Vs(y,!0),K()},Pe=(y,T,P)=>{T.component=y;const B=y.vnode.props;y.vnode=T,y.next=null,xw(y,T.props,B,P),Vw(y,T.children,P),$n(),Yh(y),Bn()},Ee=(y,T,P,B,j,L,te,X,J=!1)=>{const K=y&&y.children,ce=y?y.shapeFlag:0,se=T.children,{patchFlag:ue,shapeFlag:he}=T;if(ue>0){if(ue&128){Ot(K,se,P,B,j,L,te,X,J);return}else if(ue&256){mt(K,se,P,B,j,L,te,X,J);return}}he&8?(ce&16&&W(K,j,L),se!==K&&f(P,se)):ce&16?he&16?Ot(K,se,P,B,j,L,te,X,J):W(K,j,L,!0):(ce&8&&f(P,""),he&16&&_(se,P,B,j,L,te,X,J))},mt=(y,T,P,B,j,L,te,X,J)=>{y=y||yr,T=T||yr;const K=y.length,ce=T.length,se=Math.min(K,ce);let ue;for(ue=0;ue<se;ue++){const he=T[ue]=J?is(T[ue]):yn(T[ue]);O(y[ue],he,P,null,j,L,te,X,J)}K>ce?W(y,j,L,!0,!1,se):_(T,P,B,j,L,te,X,J,se)},Ot=(y,T,P,B,j,L,te,X,J)=>{let K=0;const ce=T.length;let se=y.length-1,ue=ce-1;for(;K<=se&&K<=ue;){const he=y[K],Te=T[K]=J?is(T[K]):yn(T[K]);if(hi(he,Te))O(he,Te,P,null,j,L,te,X,J);else break;K++}for(;K<=se&&K<=ue;){const he=y[se],Te=T[ue]=J?is(T[ue]):yn(T[ue]);if(hi(he,Te))O(he,Te,P,null,j,L,te,X,J);else break;se--,ue--}if(K>se){if(K<=ue){const he=ue+1,Te=he<ce?T[he].el:B;for(;K<=ue;)O(null,T[K]=J?is(T[K]):yn(T[K]),P,Te,j,L,te,X,J),K++}}else if(K>ue)for(;K<=se;)nt(y[K],j,L,!0),K++;else{const he=K,Te=K,Oe=new Map;for(K=Te;K<=ue;K++){const ht=T[K]=J?is(T[K]):yn(T[K]);ht.key!=null&&Oe.set(ht.key,K)}let Ce,yt=0;const vt=ue-Te+1;let Ut=!1,$t=0;const Zt=new Array(vt);for(K=0;K<vt;K++)Zt[K]=0;for(K=he;K<=se;K++){const ht=y[K];if(yt>=vt){nt(ht,j,L,!0);continue}let ot;if(ht.key!=null)ot=Oe.get(ht.key);else for(Ce=Te;Ce<=ue;Ce++)if(Zt[Ce-Te]===0&&hi(ht,T[Ce])){ot=Ce;break}ot===void 0?nt(ht,j,L,!0):(Zt[ot-Te]=K+1,ot>=$t?$t=ot:Ut=!0,O(ht,T[ot],P,null,j,L,te,X,J),yt++)}const ir=Ut?Fw(Zt):yr;for(Ce=ir.length-1,K=vt-1;K>=0;K--){const ht=Te+K,ot=T[ht],Qr=T[ht+1],Cs=ht+1<ce?Qr.el||Qr.placeholder:B;Zt[K]===0?O(null,ot,P,Cs,j,L,te,X,J):Ut&&(Ce<0||K!==ir[Ce]?_t(ot,P,Cs,2):Ce--)}}},_t=(y,T,P,B,j=null)=>{const{el:L,type:te,transition:X,children:J,shapeFlag:K}=y;if(K&6){_t(y.component.subTree,T,P,B);return}if(K&128){y.suspense.move(T,P,B);return}if(K&64){te.move(y,T,P,ie);return}if(te===He){s(L,T,P);for(let se=0;se<J.length;se++)_t(J[se],T,P,B);s(y.anchor,T,P);return}if(te===ko){M(y,T,P);return}if(B!==2&&K&1&&X)if(B===0)X.beforeEnter(L),s(L,T,P),jt(()=>X.enter(L),j);else{const{leave:se,delayLeave:ue,afterLeave:he}=X,Te=()=>{y.ctx.isUnmounted?r(L):s(L,T,P)},Oe=()=>{L._isLeaving&&L[Yv](!0),se(L,()=>{Te(),he&&he()})};ue?ue(L,Te,Oe):Oe()}else s(L,T,P)},nt=(y,T,P,B=!1,j=!1)=>{const{type:L,props:te,ref:X,children:J,dynamicChildren:K,shapeFlag:ce,patchFlag:se,dirs:ue,cacheIndex:he}=y;if(se===-2&&(j=!1),X!=null&&($n(),Ei(X,null,P,y,!0),Bn()),he!=null&&(T.renderCache[he]=void 0),ce&256){T.ctx.deactivate(y);return}const Te=ce&1&&ue,Oe=!Ti(y);let Ce;if(Oe&&(Ce=te&&te.onVnodeBeforeUnmount)&&gn(Ce,T,y),ce&6)N(y.component,P,B);else{if(ce&128){y.suspense.unmount(P,B);return}Te&&Ns(y,null,T,"beforeUnmount"),ce&64?y.type.remove(y,T,P,ie,B):K&&!K.hasOnce&&(L!==He||se>0&&se&64)?W(K,T,P,!1,!0):(L===He&&se&384||!j&&ce&16)&&W(J,T,P),B&&Xt(y)}(Oe&&(Ce=te&&te.onVnodeUnmounted)||Te)&&jt(()=>{Ce&&gn(Ce,T,y),Te&&Ns(y,null,T,"unmounted")},P)},Xt=y=>{const{type:T,el:P,anchor:B,transition:j}=y;if(T===He){Z(P,B);return}if(T===ko){Y(y);return}const L=()=>{r(P),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(y.shapeFlag&1&&j&&!j.persisted){const{leave:te,delayLeave:X}=j,J=()=>te(P,L);X?X(y.el,L,J):J()}else L()},Z=(y,T)=>{let P;for(;y!==T;)P=g(y),r(y),y=P;r(T)},N=(y,T,P)=>{const{bum:B,scope:j,job:L,subTree:te,um:X,m:J,a:K}=y;af(J),af(K),B&&Po(B),j.stop(),L&&(L.flags|=8,nt(te,y,T,P)),X&&jt(X,T),jt(()=>{y.isUnmounted=!0},T)},W=(y,T,P,B=!1,j=!1,L=0)=>{for(let te=L;te<y.length;te++)nt(y[te],T,P,B,j)},S=y=>{if(y.shapeFlag&6)return S(y.component.subTree);if(y.shapeFlag&128)return y.suspense.next();const T=g(y.anchor||y.el),P=T&&T[Kv];return P?g(P):T};let q=!1;const U=(y,T,P)=>{y==null?T._vnode&&nt(T._vnode,null,null,!0):O(T._vnode||null,y,T,null,null,null,P),T._vnode=y,q||(q=!0,Yh(),Xp(),q=!1)},ie={p:O,um:nt,m:_t,r:Xt,mt:Ue,mc:_,pc:Ee,pbc:R,n:S,o:t};return{render:U,hydrate:void 0,createApp:yw(U)}}function Pl({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Vs({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Lw(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Eg(t,e,n=!1){const s=t.children,r=e.children;if(pe(s)&&pe(r))for(let i=0;i<s.length;i++){const o=s[i];let l=r[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[i]=is(r[i]),l.el=o.el),!n&&l.patchFlag!==-2&&Eg(o,l)),l.type===Oa&&l.patchFlag!==-1&&(l.el=o.el),l.type===vs&&!l.el&&(l.el=o.el)}}function Fw(t){const e=t.slice(),n=[0];let s,r,i,o,l;const c=t.length;for(s=0;s<c;s++){const h=t[s];if(h!==0){if(r=n[n.length-1],t[r]<h){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)l=i+o>>1,t[n[l]]<h?i=l+1:o=l;h<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Tg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Tg(e)}function af(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Ig=t=>t.__isSuspense;function Uw(t,e){e&&e.pendingBranch?pe(t)?e.effects.push(...t):e.effects.push(t):Wv(t)}const He=Symbol.for("v-fgt"),Oa=Symbol.for("v-txt"),vs=Symbol.for("v-cmt"),ko=Symbol.for("v-stc"),bi=[];let zt=null;function ne(t=!1){bi.push(zt=t?null:[])}function $w(){bi.pop(),zt=bi[bi.length-1]||null}let Oi=1;function Qo(t,e=!1){Oi+=t,t<0&&zt&&e&&(zt.hasOnce=!0)}function bg(t){return t.dynamicChildren=Oi>0?zt||yr:null,$w(),Oi>0&&zt&&zt.push(t),t}function re(t,e,n,s,r,i){return bg(I(t,e,n,s,r,i,!0))}function Yo(t,e,n,s,r){return bg(ze(t,e,n,s,r,!0))}function Jo(t){return t?t.__v_isVNode===!0:!1}function hi(t,e){return t.type===e.type&&t.key===e.key}const Ag=({key:t})=>t??null,Do=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?et(t)||St(t)||ye(t)?{i:qt,r:t,k:e,f:!!n}:t:null);function I(t,e=null,n=null,s=0,r=null,i=t===He?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ag(e),ref:e&&Do(e),scopeId:eg,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:qt};return l?(su(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=et(n)?8:16),Oi>0&&!o&&zt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&zt.push(c),c}const ze=Bw;function Bw(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===cw)&&(t=vs),Jo(t)){const l=kr(t,e,!0);return n&&su(l,n),Oi>0&&!i&&zt&&(l.shapeFlag&6?zt[zt.indexOf(t)]=l:zt.push(l)),l.patchFlag=-2,l}if(Zw(t)&&(t=t.__vccOpts),e){e=jw(e);let{class:l,style:c}=e;l&&!et(l)&&(e.class=Et(l)),Fe(c)&&(Jc(c)&&!pe(c)&&(c=Ct({},c)),e.style=Ss(c))}const o=et(t)?1:Ig(t)?128:Qv(t)?64:Fe(t)?4:ye(t)?2:0;return I(t,e,n,s,r,o,i,!0)}function jw(t){return t?Jc(t)||gg(t)?Ct({},t):t:null}function kr(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:l,transition:c}=t,h=e?Hw(r||{},e):r,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:h,key:h&&Ag(h),ref:e&&e.ref?n&&i?pe(i)?i.concat(Do(e)):[i,Do(e)]:Do(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==He?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&kr(t.ssContent),ssFallback:t.ssFallback&&kr(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&s&&eu(f,c.clone(f)),f}function _r(t=" ",e=0){return ze(Oa,null,t,e)}function Rg(t,e){const n=ze(ko,null,t);return n.staticCount=e,n}function lt(t="",e=!1){return e?(ne(),Yo(vs,null,t)):ze(vs,null,t)}function yn(t){return t==null||typeof t=="boolean"?ze(vs):pe(t)?ze(He,null,t.slice()):Jo(t)?is(t):ze(Oa,null,String(t))}function is(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:kr(t)}function su(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(pe(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),su(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!gg(e)?e._ctx=qt:r===3&&qt&&(qt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ye(e)?(e={default:e,_ctx:qt},n=32):(e=String(e),s&64?(n=16,e=[_r(e)]):n=8);t.children=e,t.shapeFlag|=n}function Hw(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Et([e.class,s.class]));else if(r==="style")e.style=Ss([e.style,s.style]);else if(Ia(r)){const i=e[r],o=s[r];o&&i!==o&&!(pe(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function gn(t,e,n,s=null){Cn(t,e,7,[n,s])}const qw=cg();let zw=0;function Gw(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||qw,i={uid:zw++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new _v(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:_g(s,r),emitsOptions:fg(s,r),emit:null,emitted:null,propsDefaults:Le,inheritAttrs:s.inheritAttrs,ctx:Le,data:Le,props:Le,attrs:Le,slots:Le,refs:Le,setupState:Le,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Iw.bind(null,i),t.ce&&t.ce(i),i}let At=null;const Ww=()=>At||qt;let Xo,ac;{const t=Ca(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};Xo=e("__VUE_INSTANCE_SETTERS__",n=>At=n),ac=e("__VUE_SSR_SETTERS__",n=>Mi=n)}const Yi=t=>{const e=At;return Xo(t),t.scope.on(),()=>{t.scope.off(),Xo(e)}},lf=()=>{At&&At.scope.off(),Xo(null)};function Sg(t){return t.vnode.shapeFlag&4}let Mi=!1;function Kw(t,e=!1,n=!1){e&&ac(e);const{props:s,children:r}=t.vnode,i=Sg(t);Pw(t,s,i,e),Nw(t,r,n||e);const o=i?Qw(t,e):void 0;return e&&ac(!1),o}function Qw(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,hw);const{setup:s}=n;if(s){$n();const r=t.setupContext=s.length>1?Jw(t):null,i=Yi(t),o=Ki(s,t,0,[t.props,r]),l=Rp(o);if(Bn(),i(),(l||t.sp)&&!Ti(t)&&ng(t),l){if(o.then(lf,lf),e)return o.then(c=>{cf(t,c)}).catch(c=>{Da(c,t,0)});t.asyncDep=o}else cf(t,o)}else Cg(t)}function cf(t,e,n){ye(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Fe(e)&&(t.setupState=Qp(e)),Cg(t)}function Cg(t,e,n){const s=t.type;t.render||(t.render=s.render||vn);{const r=Yi(t);$n();try{fw(t)}finally{Bn(),r()}}}const Yw={get(t,e){return It(t,"get",""),t[e]}};function Jw(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Yw),slots:t.slots,emit:t.emit,expose:e}}function Ma(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Qp(Lv(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ii)return Ii[n](t)},has(e,n){return n in e||n in Ii}})):t.proxy}function Xw(t,e=!0){return ye(t)?t.displayName||t.name:t.name||e&&t.__name}function Zw(t){return ye(t)&&"__vccOpts"in t}const Rt=(t,e)=>jv(t,e,Mi);function Pg(t,e,n){try{Qo(-1);const s=arguments.length;return s===2?Fe(e)&&!pe(e)?Jo(e)?ze(t,null,[e]):ze(t,e):ze(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Jo(n)&&(n=[n]),ze(t,e,n))}finally{Qo(1)}}const e0="3.5.25";let lc;const uf=typeof window<"u"&&window.trustedTypes;if(uf)try{lc=uf.createPolicy("vue",{createHTML:t=>t})}catch{}const xg=lc?t=>lc.createHTML(t):t=>t,t0="http://www.w3.org/2000/svg",n0="http://www.w3.org/1998/Math/MathML",Vn=typeof document<"u"?document:null,hf=Vn&&Vn.createElement("template"),s0={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Vn.createElementNS(t0,t):e==="mathml"?Vn.createElementNS(n0,t):n?Vn.createElement(t,{is:n}):Vn.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Vn.createTextNode(t),createComment:t=>Vn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Vn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{hf.innerHTML=xg(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const l=hf.content;if(s==="svg"||s==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},r0=Symbol("_vtc");function i0(t,e,n){const s=t[r0];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const ff=Symbol("_vod"),o0=Symbol("_vsh"),a0=Symbol(""),l0=/(?:^|;)\s*display\s*:/;function c0(t,e,n){const s=t.style,r=et(n);let i=!1;if(n&&!r){if(e)if(et(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&No(s,l,"")}else for(const o in e)n[o]==null&&No(s,o,"");for(const o in n)o==="display"&&(i=!0),No(s,o,n[o])}else if(r){if(e!==n){const o=s[a0];o&&(n+=";"+o),s.cssText=n,i=l0.test(n)}}else e&&t.removeAttribute("style");ff in t&&(t[ff]=i?s.display:"",t[o0]&&(s.display="none"))}const df=/\s*!important$/;function No(t,e,n){if(pe(n))n.forEach(s=>No(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=u0(t,e);df.test(n)?t.setProperty(Xs(s),n.replace(df,""),"important"):t[s]=n}}const pf=["Webkit","Moz","ms"],xl={};function u0(t,e){const n=xl[e];if(n)return n;let s=Jt(e);if(s!=="filter"&&s in t)return xl[e]=s;s=Ra(s);for(let r=0;r<pf.length;r++){const i=pf[r]+s;if(i in t)return xl[e]=i}return e}const gf="http://www.w3.org/1999/xlink";function mf(t,e,n,s,r,i=pv(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(gf,e.slice(6,e.length)):t.setAttributeNS(gf,e,n):n==null||i&&!xp(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Sn(n)?String(n):n)}function _f(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?xg(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=xp(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function Ls(t,e,n,s){t.addEventListener(e,n,s)}function h0(t,e,n,s){t.removeEventListener(e,n,s)}const yf=Symbol("_vei");function f0(t,e,n,s,r=null){const i=t[yf]||(t[yf]={}),o=i[e];if(s&&o)o.value=s;else{const[l,c]=d0(e);if(s){const h=i[e]=m0(s,r);Ls(t,l,h,c)}else o&&(h0(t,l,o,c),i[e]=void 0)}}const vf=/(?:Once|Passive|Capture)$/;function d0(t){let e;if(vf.test(t)){e={};let s;for(;s=t.match(vf);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Xs(t.slice(2)),e]}let kl=0;const p0=Promise.resolve(),g0=()=>kl||(p0.then(()=>kl=0),kl=Date.now());function m0(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Cn(_0(s,n.value),e,5,[s])};return n.value=t,n.attached=g0(),n}function _0(t,e){if(pe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const wf=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,y0=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?i0(t,s,o):e==="style"?c0(t,n,s):Ia(e)?jc(e)||f0(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):v0(t,e,s,o))?(_f(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&mf(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!et(s))?_f(t,Jt(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),mf(t,e,s,o))};function v0(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&wf(e)&&ye(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return wf(e)&&et(n)?!1:e in t}const Zo=t=>{const e=t.props["onUpdate:modelValue"]||!1;return pe(e)?n=>Po(e,n):e};function w0(t){t.target.composing=!0}function Ef(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Tr=Symbol("_assign");function Tf(t,e,n){return e&&(t=t.trim()),n&&(t=Sa(t)),t}const fi={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[Tr]=Zo(r);const i=s||r.props&&r.props.type==="number";Ls(t,e?"change":"input",o=>{o.target.composing||t[Tr](Tf(t.value,n,i))}),(n||i)&&Ls(t,"change",()=>{t.value=Tf(t.value,n,i)}),e||(Ls(t,"compositionstart",w0),Ls(t,"compositionend",Ef),Ls(t,"change",Ef))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(t[Tr]=Zo(o),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?Sa(t.value):t.value,c=e??"";l!==c&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||r&&t.value.trim()===c)||(t.value=c))}},Dl={deep:!0,created(t,{value:e,modifiers:{number:n}},s){const r=ba(e);Ls(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Sa(ea(o)):ea(o));t[Tr](t.multiple?r?new Set(i):i:i[0]),t._assigning=!0,Xc(()=>{t._assigning=!1})}),t[Tr]=Zo(s)},mounted(t,{value:e}){If(t,e)},beforeUpdate(t,e,n){t[Tr]=Zo(n)},updated(t,{value:e}){t._assigning||If(t,e)}};function If(t,e){const n=t.multiple,s=pe(e);if(!(n&&!s&&!ba(e))){for(let r=0,i=t.options.length;r<i;r++){const o=t.options[r],l=ea(o);if(n)if(s){const c=typeof l;c==="string"||c==="number"?o.selected=e.some(h=>String(h)===String(l)):o.selected=mv(e,l)>-1}else o.selected=e.has(l);else if(Pa(ea(o),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function ea(t){return"_value"in t?t._value:t.value}const E0=Ct({patchProp:y0},s0);let bf;function T0(){return bf||(bf=Ow(E0))}const I0=(...t)=>{const e=T0().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=A0(s);if(!r)return;const i=e._component;!ye(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,b0(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function b0(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function A0(t){return et(t)?document.querySelector(t):t}const ru=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},R0={};function S0(t,e){const n=og("router-view");return ne(),Yo(n)}const C0=ru(R0,[["render",S0]]);const fr=typeof document<"u";function kg(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function P0(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&kg(t.default)}const xe=Object.assign;function Nl(t,e){const n={};for(const s in e){const r=e[s];n[s]=cn(r)?r.map(t):t(r)}return n}const Ai=()=>{},cn=Array.isArray;function Af(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}const Dg=/#/g,x0=/&/g,k0=/\//g,D0=/=/g,N0=/\?/g,Ng=/\+/g,V0=/%5B/g,O0=/%5D/g,Vg=/%5E/g,M0=/%60/g,Og=/%7B/g,L0=/%7C/g,Mg=/%7D/g,F0=/%20/g;function iu(t){return t==null?"":encodeURI(""+t).replace(L0,"|").replace(V0,"[").replace(O0,"]")}function U0(t){return iu(t).replace(Og,"{").replace(Mg,"}").replace(Vg,"^")}function cc(t){return iu(t).replace(Ng,"%2B").replace(F0,"+").replace(Dg,"%23").replace(x0,"%26").replace(M0,"`").replace(Og,"{").replace(Mg,"}").replace(Vg,"^")}function $0(t){return cc(t).replace(D0,"%3D")}function B0(t){return iu(t).replace(Dg,"%23").replace(N0,"%3F")}function j0(t){return B0(t).replace(k0,"%2F")}function Li(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const H0=/\/$/,q0=t=>t.replace(H0,"");function Vl(t,e,n="/"){let s,r={},i="",o="";const l=e.indexOf("#");let c=e.indexOf("?");return c=l>=0&&c>l?-1:c,c>=0&&(s=e.slice(0,c),i=e.slice(c,l>0?l:e.length),r=t(i.slice(1))),l>=0&&(s=s||e.slice(0,l),o=e.slice(l,e.length)),s=K0(s??e,n),{fullPath:s+i+o,path:s,query:r,hash:Li(o)}}function z0(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Rf(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function G0(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&Dr(e.matched[s],n.matched[r])&&Lg(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Dr(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Lg(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!W0(t[n],e[n]))return!1;return!0}function W0(t,e){return cn(t)?Sf(t,e):cn(e)?Sf(e,t):t===e}function Sf(t,e){return cn(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function K0(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,l;for(o=0;o<s.length;o++)if(l=s[o],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const ts={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let uc=function(t){return t.pop="pop",t.push="push",t}({}),Ol=function(t){return t.back="back",t.forward="forward",t.unknown="",t}({});function Q0(t){if(!t)if(fr){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),q0(t)}const Y0=/^[^#]+#/;function J0(t,e){return t.replace(Y0,"#")+e}function X0(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const La=()=>({left:window.scrollX,top:window.scrollY});function Z0(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=X0(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Cf(t,e){return(history.state?history.state.position-e:-1)+t}const hc=new Map;function eE(t,e){hc.set(t,e)}function tE(t){const e=hc.get(t);return hc.delete(t),e}function nE(t){return typeof t=="string"||t&&typeof t=="object"}function Fg(t){return typeof t=="string"||typeof t=="symbol"}let Qe=function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t}({});const Ug=Symbol("");Qe.MATCHER_NOT_FOUND+"",Qe.NAVIGATION_GUARD_REDIRECT+"",Qe.NAVIGATION_ABORTED+"",Qe.NAVIGATION_CANCELLED+"",Qe.NAVIGATION_DUPLICATED+"";function Nr(t,e){return xe(new Error,{type:t,[Ug]:!0},e)}function Nn(t,e){return t instanceof Error&&Ug in t&&(e==null||!!(t.type&e))}const sE=["params","query","hash"];function rE(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of sE)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function iE(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(Ng," "),i=r.indexOf("="),o=Li(i<0?r:r.slice(0,i)),l=i<0?null:Li(r.slice(i+1));if(o in e){let c=e[o];cn(c)||(c=e[o]=[c]),c.push(l)}else e[o]=l}return e}function Pf(t){let e="";for(let n in t){const s=t[n];if(n=$0(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(cn(s)?s.map(r=>r&&cc(r)):[s&&cc(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function oE(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=cn(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const aE=Symbol(""),xf=Symbol(""),Fa=Symbol(""),$g=Symbol(""),fc=Symbol("");function di(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function os(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((l,c)=>{const h=g=>{g===!1?c(Nr(Qe.NAVIGATION_ABORTED,{from:n,to:e})):g instanceof Error?c(g):nE(g)?c(Nr(Qe.NAVIGATION_GUARD_REDIRECT,{from:e,to:g})):(o&&s.enterCallbacks[r]===o&&typeof g=="function"&&o.push(g),l())},f=i(()=>t.call(s&&s.instances[r],e,n,h));let p=Promise.resolve(f);t.length<3&&(p=p.then(h)),p.catch(g=>c(g))})}function Ml(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const l in o.components){let c=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(kg(c)){const h=(c.__vccOpts||c)[e];h&&i.push(os(h,n,s,o,l,r))}else{let h=c();i.push(()=>h.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const p=P0(f)?f.default:f;o.mods[l]=f,o.components[l]=p;const g=(p.__vccOpts||p)[e];return g&&os(g,n,s,o,l,r)()}))}}return i}function lE(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const l=e.matched[o];l&&(t.matched.find(h=>Dr(h,l))?s.push(l):n.push(l));const c=t.matched[o];c&&(e.matched.find(h=>Dr(h,c))||r.push(c))}return[n,s,r]}let cE=()=>location.protocol+"//"+location.host;function Bg(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,l=r.slice(o);return l[0]!=="/"&&(l="/"+l),Rf(l,"")}return Rf(n,t)+s+r}function uE(t,e,n,s){let r=[],i=[],o=null;const l=({state:g})=>{const w=Bg(t,location),D=n.value,O=e.value;let F=0;if(g){if(n.value=w,e.value=g,o&&o===D){o=null;return}F=O?g.position-O.position:0}else s(w);r.forEach(Q=>{Q(n.value,D,{delta:F,type:uc.pop,direction:F?F>0?Ol.forward:Ol.back:Ol.unknown})})};function c(){o=n.value}function h(g){r.push(g);const w=()=>{const D=r.indexOf(g);D>-1&&r.splice(D,1)};return i.push(w),w}function f(){if(document.visibilityState==="hidden"){const{history:g}=window;if(!g.state)return;g.replaceState(xe({},g.state,{scroll:La()}),"")}}function p(){for(const g of i)g();i=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:c,listen:h,destroy:p}}function kf(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?La():null}}function hE(t){const{history:e,location:n}=window,s={value:Bg(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,h,f){const p=t.indexOf("#"),g=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+c:cE()+t+c;try{e[f?"replaceState":"pushState"](h,"",g),r.value=h}catch(w){console.error(w),n[f?"replace":"assign"](g)}}function o(c,h){i(c,xe({},e.state,kf(r.value.back,c,r.value.forward,!0),h,{position:r.value.position}),!0),s.value=c}function l(c,h){const f=xe({},r.value,e.state,{forward:c,scroll:La()});i(f.current,f,!0),i(c,xe({},kf(s.value,c,null),{position:f.position+1},h),!1),s.value=c}return{location:s,state:r,push:l,replace:o}}function fE(t){t=Q0(t);const e=hE(t),n=uE(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=xe({location:"",base:t,go:s,createHref:J0.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function dE(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),fE(t)}let Fs=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t}({});var rt=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t}(rt||{});const pE={type:Fs.Static,value:""},gE=/[a-zA-Z0-9_]/;function mE(t){if(!t)return[[]];if(t==="/")return[[pE]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(w){throw new Error(`ERR (${n})/"${h}": ${w}`)}let n=rt.Static,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let l=0,c,h="",f="";function p(){h&&(n===rt.Static?i.push({type:Fs.Static,value:h}):n===rt.Param||n===rt.ParamRegExp||n===rt.ParamRegExpEnd?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Fs.Param,value:h,regexp:f,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),h="")}function g(){h+=c}for(;l<t.length;){if(c=t[l++],c==="\\"&&n!==rt.ParamRegExp){s=n,n=rt.EscapeNext;continue}switch(n){case rt.Static:c==="/"?(h&&p(),o()):c===":"?(p(),n=rt.Param):g();break;case rt.EscapeNext:g(),n=s;break;case rt.Param:c==="("?n=rt.ParamRegExp:gE.test(c)?g():(p(),n=rt.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case rt.ParamRegExp:c===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+c:n=rt.ParamRegExpEnd:f+=c;break;case rt.ParamRegExpEnd:p(),n=rt.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--,f="";break;default:e("Unknown state");break}}return n===rt.ParamRegExp&&e(`Unfinished custom RegExp for param "${h}"`),p(),o(),r}const Df="[^/]+?",_E={sensitive:!1,strict:!1,start:!0,end:!0};var Dt=function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t}(Dt||{});const yE=/[.+*?^${}()[\]/\\]/g;function vE(t,e){const n=xe({},_E,e),s=[];let r=n.start?"^":"";const i=[];for(const h of t){const f=h.length?[]:[Dt.Root];n.strict&&!h.length&&(r+="/");for(let p=0;p<h.length;p++){const g=h[p];let w=Dt.Segment+(n.sensitive?Dt.BonusCaseSensitive:0);if(g.type===Fs.Static)p||(r+="/"),r+=g.value.replace(yE,"\\$&"),w+=Dt.Static;else if(g.type===Fs.Param){const{value:D,repeatable:O,optional:F,regexp:Q}=g;i.push({name:D,repeatable:O,optional:F});const V=Q||Df;if(V!==Df){w+=Dt.BonusCustomRegExp;try{`${V}`}catch(Y){throw new Error(`Invalid custom RegExp for param "${D}" (${V}): `+Y.message)}}let M=O?`((?:${V})(?:/(?:${V}))*)`:`(${V})`;p||(M=F&&h.length<2?`(?:/${M})`:"/"+M),F&&(M+="?"),r+=M,w+=Dt.Dynamic,F&&(w+=Dt.BonusOptional),O&&(w+=Dt.BonusRepeatable),V===".*"&&(w+=Dt.BonusWildcard)}f.push(w)}s.push(f)}if(n.strict&&n.end){const h=s.length-1;s[h][s[h].length-1]+=Dt.BonusStrict}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function l(h){const f=h.match(o),p={};if(!f)return null;for(let g=1;g<f.length;g++){const w=f[g]||"",D=i[g-1];p[D.name]=w&&D.repeatable?w.split("/"):w}return p}function c(h){let f="",p=!1;for(const g of t){(!p||!f.endsWith("/"))&&(f+="/"),p=!1;for(const w of g)if(w.type===Fs.Static)f+=w.value;else if(w.type===Fs.Param){const{value:D,repeatable:O,optional:F}=w,Q=D in h?h[D]:"";if(cn(Q)&&!O)throw new Error(`Provided param "${D}" is an array but it is not repeatable (* or + modifiers)`);const V=cn(Q)?Q.join("/"):Q;if(!V)if(F)g.length<2&&(f.endsWith("/")?f=f.slice(0,-1):p=!0);else throw new Error(`Missing required param "${D}"`);f+=V}}return f||"/"}return{re:o,score:s,keys:i,parse:l,stringify:c}}function wE(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===Dt.Static+Dt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Dt.Static+Dt.Segment?1:-1:0}function jg(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=wE(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(Nf(s))return 1;if(Nf(r))return-1}return r.length-s.length}function Nf(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const EE={strict:!1,end:!0,sensitive:!1};function TE(t,e,n){const s=vE(mE(t.path),n),r=xe(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function IE(t,e){const n=[],s=new Map;e=Af(EE,e);function r(p){return s.get(p)}function i(p,g,w){const D=!w,O=Of(p);O.aliasOf=w&&w.record;const F=Af(e,p),Q=[O];if("alias"in p){const Y=typeof p.alias=="string"?[p.alias]:p.alias;for(const $ of Y)Q.push(Of(xe({},O,{components:w?w.record.components:O.components,path:$,aliasOf:w?w.record:O})))}let V,M;for(const Y of Q){const{path:$}=Y;if(g&&$[0]!=="/"){const H=g.record.path,b=H[H.length-1]==="/"?"":"/";Y.path=g.record.path+($&&b+$)}if(V=TE(Y,g,F),w?w.alias.push(V):(M=M||V,M!==V&&M.alias.push(V),D&&p.name&&!Mf(V)&&o(p.name)),Hg(V)&&c(V),O.children){const H=O.children;for(let b=0;b<H.length;b++)i(H[b],V,w&&w.children[b])}w=w||V}return M?()=>{o(M)}:Ai}function o(p){if(Fg(p)){const g=s.get(p);g&&(s.delete(p),n.splice(n.indexOf(g),1),g.children.forEach(o),g.alias.forEach(o))}else{const g=n.indexOf(p);g>-1&&(n.splice(g,1),p.record.name&&s.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function l(){return n}function c(p){const g=RE(p,n);n.splice(g,0,p),p.record.name&&!Mf(p)&&s.set(p.record.name,p)}function h(p,g){let w,D={},O,F;if("name"in p&&p.name){if(w=s.get(p.name),!w)throw Nr(Qe.MATCHER_NOT_FOUND,{location:p});F=w.record.name,D=xe(Vf(g.params,w.keys.filter(M=>!M.optional).concat(w.parent?w.parent.keys.filter(M=>M.optional):[]).map(M=>M.name)),p.params&&Vf(p.params,w.keys.map(M=>M.name))),O=w.stringify(D)}else if(p.path!=null)O=p.path,w=n.find(M=>M.re.test(O)),w&&(D=w.parse(O),F=w.record.name);else{if(w=g.name?s.get(g.name):n.find(M=>M.re.test(g.path)),!w)throw Nr(Qe.MATCHER_NOT_FOUND,{location:p,currentLocation:g});F=w.record.name,D=xe({},g.params,p.params),O=w.stringify(D)}const Q=[];let V=w;for(;V;)Q.unshift(V.record),V=V.parent;return{name:F,path:O,params:D,matched:Q,meta:AE(Q)}}t.forEach(p=>i(p));function f(){n.length=0,s.clear()}return{addRoute:i,resolve:h,removeRoute:o,clearRoutes:f,getRoutes:l,getRecordMatcher:r}}function Vf(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function Of(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:bE(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function bE(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function Mf(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function AE(t){return t.reduce((e,n)=>xe(e,n.meta),{})}function RE(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;jg(t,e[i])<0?s=i:n=i+1}const r=SE(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function SE(t){let e=t;for(;e=e.parent;)if(Hg(e)&&jg(t,e)===0)return e}function Hg({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Lf(t){const e=wn(Fa),n=wn($g),s=Rt(()=>{const c=Ft(t.to);return e.resolve(c)}),r=Rt(()=>{const{matched:c}=s.value,{length:h}=c,f=c[h-1],p=n.matched;if(!f||!p.length)return-1;const g=p.findIndex(Dr.bind(null,f));if(g>-1)return g;const w=Ff(c[h-2]);return h>1&&Ff(f)===w&&p[p.length-1].path!==w?p.findIndex(Dr.bind(null,c[h-2])):g}),i=Rt(()=>r.value>-1&&DE(n.params,s.value.params)),o=Rt(()=>r.value>-1&&r.value===n.matched.length-1&&Lg(n.params,s.value.params));function l(c={}){if(kE(c)){const h=e[Ft(t.replace)?"replace":"push"](Ft(t.to)).catch(Ai);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:s,href:Rt(()=>s.value.href),isActive:i,isExactActive:o,navigate:l}}function CE(t){return t.length===1?t[0]:t}const PE=tg({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Lf,setup(t,{slots:e}){const n=ka(Lf(t)),{options:s}=wn(Fa),r=Rt(()=>({[Uf(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Uf(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&CE(e.default(n));return t.custom?i:Pg("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),xE=PE;function kE(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function DE(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!cn(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function Ff(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Uf=(t,e,n)=>t??e??n,NE=tg({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=wn(fc),r=Rt(()=>t.route||s.value),i=wn(xf,0),o=Rt(()=>{let h=Ft(i);const{matched:f}=r.value;let p;for(;(p=f[h])&&!p.components;)h++;return h}),l=Rt(()=>r.value.matched[o.value]);xo(xf,Rt(()=>o.value+1)),xo(aE,l),xo(fc,r);const c=Re();return qs(()=>[c.value,l.value,t.name],([h,f,p],[g,w,D])=>{f&&(f.instances[p]=h,w&&w!==f&&h&&h===g&&(f.leaveGuards.size||(f.leaveGuards=w.leaveGuards),f.updateGuards.size||(f.updateGuards=w.updateGuards))),h&&f&&(!w||!Dr(f,w)||!g)&&(f.enterCallbacks[p]||[]).forEach(O=>O(h))},{flush:"post"}),()=>{const h=r.value,f=t.name,p=l.value,g=p&&p.components[f];if(!g)return $f(n.default,{Component:g,route:h});const w=p.props[f],D=w?w===!0?h.params:typeof w=="function"?w(h):w:null,F=Pg(g,xe({},D,e,{onVnodeUnmounted:Q=>{Q.component.isUnmounted&&(p.instances[f]=null)},ref:c}));return $f(n.default,{Component:F,route:h})||F}}});function $f(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const VE=NE;function OE(t){const e=IE(t.routes,t),n=t.parseQuery||iE,s=t.stringifyQuery||Pf,r=t.history,i=di(),o=di(),l=di(),c=Fv(ts);let h=ts;fr&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Nl.bind(null,S=>""+S),p=Nl.bind(null,j0),g=Nl.bind(null,Li);function w(S,q){let U,ie;return Fg(S)?(U=e.getRecordMatcher(S),ie=q):ie=S,e.addRoute(ie,U)}function D(S){const q=e.getRecordMatcher(S);q&&e.removeRoute(q)}function O(){return e.getRoutes().map(S=>S.record)}function F(S){return!!e.getRecordMatcher(S)}function Q(S,q){if(q=xe({},q||c.value),typeof S=="string"){const P=Vl(n,S,q.path),B=e.resolve({path:P.path},q),j=r.createHref(P.fullPath);return xe(P,B,{params:g(B.params),hash:Li(P.hash),redirectedFrom:void 0,href:j})}let U;if(S.path!=null)U=xe({},S,{path:Vl(n,S.path,q.path).path});else{const P=xe({},S.params);for(const B in P)P[B]==null&&delete P[B];U=xe({},S,{params:p(P)}),q.params=p(q.params)}const ie=e.resolve(U,q),_e=S.hash||"";ie.params=f(g(ie.params));const y=z0(s,xe({},S,{hash:U0(_e),path:ie.path})),T=r.createHref(y);return xe({fullPath:y,hash:_e,query:s===Pf?oE(S.query):S.query||{}},ie,{redirectedFrom:void 0,href:T})}function V(S){return typeof S=="string"?Vl(n,S,c.value.path):xe({},S)}function M(S,q){if(h!==S)return Nr(Qe.NAVIGATION_CANCELLED,{from:q,to:S})}function Y(S){return b(S)}function $(S){return Y(xe(V(S),{replace:!0}))}function H(S,q){const U=S.matched[S.matched.length-1];if(U&&U.redirect){const{redirect:ie}=U;let _e=typeof ie=="function"?ie(S,q):ie;return typeof _e=="string"&&(_e=_e.includes("?")||_e.includes("#")?_e=V(_e):{path:_e},_e.params={}),xe({query:S.query,hash:S.hash,params:_e.path!=null?{}:S.params},_e)}}function b(S,q){const U=h=Q(S),ie=c.value,_e=S.state,y=S.force,T=S.replace===!0,P=H(U,ie);if(P)return b(xe(V(P),{state:typeof P=="object"?xe({},_e,P.state):_e,force:y,replace:T}),q||U);const B=U;B.redirectedFrom=q;let j;return!y&&G0(s,ie,U)&&(j=Nr(Qe.NAVIGATION_DUPLICATED,{to:B,from:ie}),_t(ie,ie,!0,!1)),(j?Promise.resolve(j):R(B,ie)).catch(L=>Nn(L)?Nn(L,Qe.NAVIGATION_GUARD_REDIRECT)?L:Ot(L):Ee(L,B,ie)).then(L=>{if(L){if(Nn(L,Qe.NAVIGATION_GUARD_REDIRECT))return b(xe({replace:T},V(L.to),{state:typeof L.to=="object"?xe({},_e,L.to.state):_e,force:y}),q||B)}else L=C(B,ie,!0,T,_e);return A(B,ie,L),L})}function _(S,q){const U=M(S,q);return U?Promise.reject(U):Promise.resolve()}function v(S){const q=Z.values().next().value;return q&&typeof q.runWithContext=="function"?q.runWithContext(S):S()}function R(S,q){let U;const[ie,_e,y]=lE(S,q);U=Ml(ie.reverse(),"beforeRouteLeave",S,q);for(const P of ie)P.leaveGuards.forEach(B=>{U.push(os(B,S,q))});const T=_.bind(null,S,q);return U.push(T),W(U).then(()=>{U=[];for(const P of i.list())U.push(os(P,S,q));return U.push(T),W(U)}).then(()=>{U=Ml(_e,"beforeRouteUpdate",S,q);for(const P of _e)P.updateGuards.forEach(B=>{U.push(os(B,S,q))});return U.push(T),W(U)}).then(()=>{U=[];for(const P of y)if(P.beforeEnter)if(cn(P.beforeEnter))for(const B of P.beforeEnter)U.push(os(B,S,q));else U.push(os(P.beforeEnter,S,q));return U.push(T),W(U)}).then(()=>(S.matched.forEach(P=>P.enterCallbacks={}),U=Ml(y,"beforeRouteEnter",S,q,v),U.push(T),W(U))).then(()=>{U=[];for(const P of o.list())U.push(os(P,S,q));return U.push(T),W(U)}).catch(P=>Nn(P,Qe.NAVIGATION_CANCELLED)?P:Promise.reject(P))}function A(S,q,U){l.list().forEach(ie=>v(()=>ie(S,q,U)))}function C(S,q,U,ie,_e){const y=M(S,q);if(y)return y;const T=q===ts,P=fr?history.state:{};U&&(ie||T?r.replace(S.fullPath,xe({scroll:T&&P&&P.scroll},_e)):r.push(S.fullPath,_e)),c.value=S,_t(S,q,U,T),Ot()}let E;function Ue(){E||(E=r.listen((S,q,U)=>{if(!N.listening)return;const ie=Q(S),_e=H(ie,N.currentRoute.value);if(_e){b(xe(_e,{replace:!0,force:!0}),ie).catch(Ai);return}h=ie;const y=c.value;fr&&eE(Cf(y.fullPath,U.delta),La()),R(ie,y).catch(T=>Nn(T,Qe.NAVIGATION_ABORTED|Qe.NAVIGATION_CANCELLED)?T:Nn(T,Qe.NAVIGATION_GUARD_REDIRECT)?(b(xe(V(T.to),{force:!0}),ie).then(P=>{Nn(P,Qe.NAVIGATION_ABORTED|Qe.NAVIGATION_DUPLICATED)&&!U.delta&&U.type===uc.pop&&r.go(-1,!1)}).catch(Ai),Promise.reject()):(U.delta&&r.go(-U.delta,!1),Ee(T,ie,y))).then(T=>{T=T||C(ie,y,!1),T&&(U.delta&&!Nn(T,Qe.NAVIGATION_CANCELLED)?r.go(-U.delta,!1):U.type===uc.pop&&Nn(T,Qe.NAVIGATION_ABORTED|Qe.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),A(ie,y,T)}).catch(Ai)}))}let tt=di(),We=di(),Pe;function Ee(S,q,U){Ot(S);const ie=We.list();return ie.length?ie.forEach(_e=>_e(S,q,U)):console.error(S),Promise.reject(S)}function mt(){return Pe&&c.value!==ts?Promise.resolve():new Promise((S,q)=>{tt.add([S,q])})}function Ot(S){return Pe||(Pe=!S,Ue(),tt.list().forEach(([q,U])=>S?U(S):q()),tt.reset()),S}function _t(S,q,U,ie){const{scrollBehavior:_e}=t;if(!fr||!_e)return Promise.resolve();const y=!U&&tE(Cf(S.fullPath,0))||(ie||!U)&&history.state&&history.state.scroll||null;return Xc().then(()=>_e(S,q,y)).then(T=>T&&Z0(T)).catch(T=>Ee(T,S,q))}const nt=S=>r.go(S);let Xt;const Z=new Set,N={currentRoute:c,listening:!0,addRoute:w,removeRoute:D,clearRoutes:e.clearRoutes,hasRoute:F,getRoutes:O,resolve:Q,options:t,push:Y,replace:$,go:nt,back:()=>nt(-1),forward:()=>nt(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:We.add,isReady:mt,install(S){S.component("RouterLink",xE),S.component("RouterView",VE),S.config.globalProperties.$router=N,Object.defineProperty(S.config.globalProperties,"$route",{enumerable:!0,get:()=>Ft(c)}),fr&&!Xt&&c.value===ts&&(Xt=!0,Y(r.location).catch(ie=>{}));const q={};for(const ie in ts)Object.defineProperty(q,ie,{get:()=>c.value[ie],enumerable:!0});S.provide(Fa,N),S.provide($g,Wp(q)),S.provide(fc,c);const U=S.unmount;Z.add(S),S.unmount=function(){Z.delete(S),Z.size<1&&(h=ts,E&&E(),E=null,c.value=ts,Xt=!1,Pe=!1),U()}}};function W(S){return S.reduce((q,U)=>q.then(()=>v(U)),Promise.resolve())}return N}function ou(){return wn(Fa)}const ME="/HTF/assets/Logo_yellow-C2dq30_U.png",LE=()=>{};var Bf={};const qg=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},FE=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],l=t[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},zg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,l=o?t[r+1]:0,c=r+2<t.length,h=c?t[r+2]:0,f=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|h>>6,w=h&63;c||(w=64,o||(g=64)),s.push(n[f],n[p],n[g],n[w])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(qg(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):FE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const h=r<t.length?n[t.charAt(r)]:64;++r;const p=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||l==null||h==null||p==null)throw new UE;const g=i<<2|l>>4;if(s.push(g),h!==64){const w=l<<4&240|h>>2;if(s.push(w),p!==64){const D=h<<6&192|p;s.push(D)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class UE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $E=function(t){const e=qg(t);return zg.encodeByteArray(e,!0)},ta=function(t){return $E(t).replace(/\./g,"")},Gg=function(t){try{return zg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function BE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const jE=()=>BE().__FIREBASE_DEFAULTS__,HE=()=>{if(typeof process>"u"||typeof Bf>"u")return;const t=Bf.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Gg(t[1]);return e&&JSON.parse(e)},Ua=()=>{try{return LE()||jE()||HE()||qE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Wg=t=>Ua()?.emulatorHosts?.[t],zE=t=>{const e=Wg(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Kg=()=>Ua()?.config,Qg=t=>Ua()?.[`_${t}`];class GE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Br(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Yg(t){return(await fetch(t,{credentials:"include"})).ok}function WE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ta(JSON.stringify(n)),ta(JSON.stringify(o)),""].join(".")}const Ri={};function KE(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ri))Ri[e]?t.emulator.push(e):t.prod.push(e);return t}function QE(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let jf=!1;function Jg(t,e){if(typeof window>"u"||typeof document>"u"||!Br(window.location.host)||Ri[t]===e||Ri[t]||jf)return;Ri[t]=e;function n(g){return`__firebase__banner__${g}`}const s="__firebase__banner",i=KE().prod.length>0;function o(){const g=document.getElementById(s);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,w){g.setAttribute("width","24"),g.setAttribute("id",w),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{jf=!0,o()},g}function f(g,w){g.setAttribute("id",w),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=QE(s),w=n("text"),D=document.getElementById(w)||document.createElement("span"),O=n("learnmore"),F=document.getElementById(O)||document.createElement("a"),Q=n("preprendIcon"),V=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const M=g.element;l(M),f(F,O);const Y=h();c(V,Q),M.append(V,D,F,Y),document.body.appendChild(M)}i?(D.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pt())}function JE(){const t=Ua()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Xg(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ZE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eT(){const t=Pt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function tT(){return!JE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Zg(){try{return typeof indexedDB=="object"}catch{return!1}}function em(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}function nT(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const sT="FirebaseError";class fn extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=sT,Object.setPrototypeOf(this,fn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zs.prototype.create)}}class Zs{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?rT(i,s):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new fn(r,l,s)}}function rT(t,e){return t.replace(iT,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const iT=/\{\$([^}]+)}/g;function oT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ws(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(Hf(i)&&Hf(o)){if(!ws(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Hf(t){return t!==null&&typeof t=="object"}function Ji(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function aT(t,e){const n=new lT(t,e);return n.subscribe.bind(n)}class lT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");cT(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=Ll),r.error===void 0&&(r.error=Ll),r.complete===void 0&&(r.complete=Ll);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ll(){}const uT=1e3,hT=2,fT=4*60*60*1e3,dT=.5;function qf(t,e=uT,n=hT){const s=e*Math.pow(n,t),r=Math.round(dT*s*(Math.random()-.5)*2);return Math.min(fT,s+r)}function pt(t){return t&&t._delegate?t._delegate:t}class un{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ms="[DEFAULT]";class pT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new GE;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mT(e))try{this.getOrInitializeService({instanceIdentifier:Ms})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Ms){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ms){return this.instances.has(e)}getOptions(e=Ms){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:gT(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ms){return this.component?this.component.multipleInstances?e:Ms:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gT(t){return t===Ms?void 0:t}function mT(t){return t.instantiationMode==="EAGER"}class _T{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new pT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ie||(Ie={}));const yT={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},vT=Ie.INFO,wT={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},ET=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=wT[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $a{constructor(e){this.name=e,this._logLevel=vT,this._logHandler=ET,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}}const TT=(t,e)=>e.some(n=>t instanceof n);let zf,Gf;function IT(){return zf||(zf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bT(){return Gf||(Gf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tm=new WeakMap,dc=new WeakMap,nm=new WeakMap,Fl=new WeakMap,au=new WeakMap;function AT(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(fs(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&tm.set(n,t)}).catch(()=>{}),au.set(e,t),e}function RT(t){if(dc.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});dc.set(t,e)}let pc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return dc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||nm.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ST(t){pc=t(pc)}function CT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Ul(this),e,...n);return nm.set(s,e.sort?e.sort():[e]),fs(s)}:bT().includes(t)?function(...e){return t.apply(Ul(this),e),fs(tm.get(this))}:function(...e){return fs(t.apply(Ul(this),e))}}function PT(t){return typeof t=="function"?CT(t):(t instanceof IDBTransaction&&RT(t),TT(t,IT())?new Proxy(t,pc):t)}function fs(t){if(t instanceof IDBRequest)return AT(t);if(Fl.has(t))return Fl.get(t);const e=PT(t);return e!==t&&(Fl.set(t,e),au.set(e,t)),e}const Ul=t=>au.get(t);function sm(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),l=fs(o);return s&&o.addEventListener("upgradeneeded",c=>{s(fs(o.result),c.oldVersion,c.newVersion,fs(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const xT=["get","getKey","getAll","getAllKeys","count"],kT=["put","add","delete","clear"],$l=new Map;function Wf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($l.get(e))return $l.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=kT.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||xT.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,r?"readwrite":"readonly");let h=c.store;return s&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&c.done]))[0]};return $l.set(e,i),i}ST(t=>({...t,get:(e,n,s)=>Wf(e,n)||t.get(e,n,s),has:(e,n)=>!!Wf(e,n)||t.has(e,n)}));class DT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(NT(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function NT(t){return t.getComponent()?.type==="VERSION"}const gc="@firebase/app",Kf="0.14.6";const Hn=new $a("@firebase/app"),VT="@firebase/app-compat",OT="@firebase/analytics-compat",MT="@firebase/analytics",LT="@firebase/app-check-compat",FT="@firebase/app-check",UT="@firebase/auth",$T="@firebase/auth-compat",BT="@firebase/database",jT="@firebase/data-connect",HT="@firebase/database-compat",qT="@firebase/functions",zT="@firebase/functions-compat",GT="@firebase/installations",WT="@firebase/installations-compat",KT="@firebase/messaging",QT="@firebase/messaging-compat",YT="@firebase/performance",JT="@firebase/performance-compat",XT="@firebase/remote-config",ZT="@firebase/remote-config-compat",eI="@firebase/storage",tI="@firebase/storage-compat",nI="@firebase/firestore",sI="@firebase/ai",rI="@firebase/firestore-compat",iI="firebase",oI="12.6.0";const mc="[DEFAULT]",aI={[gc]:"fire-core",[VT]:"fire-core-compat",[MT]:"fire-analytics",[OT]:"fire-analytics-compat",[FT]:"fire-app-check",[LT]:"fire-app-check-compat",[UT]:"fire-auth",[$T]:"fire-auth-compat",[BT]:"fire-rtdb",[jT]:"fire-data-connect",[HT]:"fire-rtdb-compat",[qT]:"fire-fn",[zT]:"fire-fn-compat",[GT]:"fire-iid",[WT]:"fire-iid-compat",[KT]:"fire-fcm",[QT]:"fire-fcm-compat",[YT]:"fire-perf",[JT]:"fire-perf-compat",[XT]:"fire-rc",[ZT]:"fire-rc-compat",[eI]:"fire-gcs",[tI]:"fire-gcs-compat",[nI]:"fire-fst",[rI]:"fire-fst-compat",[sI]:"fire-vertex","fire-js":"fire-js",[iI]:"fire-js-all"};const na=new Map,lI=new Map,_c=new Map;function Qf(t,e){try{t.container.addComponent(e)}catch(n){Hn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Pn(t){const e=t.name;if(_c.has(e))return Hn.debug(`There were multiple attempts to register component ${e}.`),!1;_c.set(e,t);for(const n of na.values())Qf(n,t);for(const n of lI.values())Qf(n,t);return!0}function er(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function en(t){return t==null?!1:t.settings!==void 0}const cI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ds=new Zs("app","Firebase",cI);class uI{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new un("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ds.create("app-deleted",{appName:this._name})}}const jr=oI;function rm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:mc,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw ds.create("bad-app-name",{appName:String(r)});if(n||(n=Kg()),!n)throw ds.create("no-options");const i=na.get(r);if(i){if(ws(n,i.options)&&ws(s,i.config))return i;throw ds.create("duplicate-app",{appName:r})}const o=new _T(r);for(const c of _c.values())o.addComponent(c);const l=new uI(n,s,o);return na.set(r,l),l}function lu(t=mc){const e=na.get(t);if(!e&&t===mc&&Kg())return rm();if(!e)throw ds.create("no-app",{appName:t});return e}function Yt(t,e,n){let s=aI[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hn.warn(o.join(" "));return}Pn(new un(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const hI="firebase-heartbeat-database",fI=1,Fi="firebase-heartbeat-store";let Bl=null;function im(){return Bl||(Bl=sm(hI,fI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fi)}catch(n){console.warn(n)}}}}).catch(t=>{throw ds.create("idb-open",{originalErrorMessage:t.message})})),Bl}async function dI(t){try{const n=(await im()).transaction(Fi),s=await n.objectStore(Fi).get(om(t));return await n.done,s}catch(e){if(e instanceof fn)Hn.warn(e.message);else{const n=ds.create("idb-get",{originalErrorMessage:e?.message});Hn.warn(n.message)}}}async function Yf(t,e){try{const s=(await im()).transaction(Fi,"readwrite");await s.objectStore(Fi).put(e,om(t)),await s.done}catch(n){if(n instanceof fn)Hn.warn(n.message);else{const s=ds.create("idb-set",{originalErrorMessage:n?.message});Hn.warn(s.message)}}}function om(t){return`${t.name}!${t.options.appId}`}const pI=1024,gI=30;class mI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new yI(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Jf();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>gI){const r=vI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Hn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Jf(),{heartbeatsToSend:n,unsentEntries:s}=_I(this._heartbeatsCache.heartbeats),r=ta(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Hn.warn(e),""}}}function Jf(){return new Date().toISOString().substring(0,10)}function _I(t,e=pI){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),Xf(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Xf(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class yI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Zg()?em().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await dI(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Yf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Yf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Xf(t){return ta(JSON.stringify({version:2,heartbeats:t})).length}function vI(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}function wI(t){Pn(new un("platform-logger",e=>new DT(e),"PRIVATE")),Pn(new un("heartbeat",e=>new mI(e),"PRIVATE")),Yt(gc,Kf,t),Yt(gc,Kf,"esm2020"),Yt("fire-js","")}wI("");var EI="firebase",TI="12.6.0";Yt(EI,TI,"app");const am="@firebase/installations",cu="0.6.19";const lm=1e4,cm=`w:${cu}`,um="FIS_v2",II="https://firebaseinstallations.googleapis.com/v1",bI=60*60*1e3,AI="installations",RI="Installations";const SI={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ws=new Zs(AI,RI,SI);function hm(t){return t instanceof fn&&t.code.includes("request-failed")}function fm({projectId:t}){return`${II}/projects/${t}/installations`}function dm(t){return{token:t.token,requestStatus:2,expiresIn:PI(t.expiresIn),creationTime:Date.now()}}async function pm(t,e){const s=(await e.json()).error;return Ws.create("request-failed",{requestName:t,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function gm({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function CI(t,{refreshToken:e}){const n=gm(t);return n.append("Authorization",xI(e)),n}async function mm(t){const e=await t();return e.status>=500&&e.status<600?t():e}function PI(t){return Number(t.replace("s","000"))}function xI(t){return`${um} ${t}`}async function kI({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const s=fm(t),r=gm(t),i=e.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&r.append("x-firebase-client",h)}const o={fid:n,authVersion:um,appId:t.appId,sdkVersion:cm},l={method:"POST",headers:r,body:JSON.stringify(o)},c=await mm(()=>fetch(s,l));if(c.ok){const h=await c.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:dm(h.authToken)}}else throw await pm("Create Installation",c)}function _m(t){return new Promise(e=>{setTimeout(e,t)})}function DI(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}const NI=/^[cdef][\w-]{21}$/,yc="";function VI(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=OI(t);return NI.test(n)?n:yc}catch{return yc}}function OI(t){return DI(t).substr(0,22)}function Ba(t){return`${t.appName}!${t.appId}`}const ym=new Map;function vm(t,e){const n=Ba(t);wm(n,e),MI(n,e)}function wm(t,e){const n=ym.get(t);if(n)for(const s of n)s(e)}function MI(t,e){const n=LI();n&&n.postMessage({key:t,fid:e}),FI()}let Us=null;function LI(){return!Us&&"BroadcastChannel"in self&&(Us=new BroadcastChannel("[Firebase] FID Change"),Us.onmessage=t=>{wm(t.data.key,t.data.fid)}),Us}function FI(){ym.size===0&&Us&&(Us.close(),Us=null)}const UI="firebase-installations-database",$I=1,Ks="firebase-installations-store";let jl=null;function uu(){return jl||(jl=sm(UI,$I,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ks)}}})),jl}async function sa(t,e){const n=Ba(t),r=(await uu()).transaction(Ks,"readwrite"),i=r.objectStore(Ks),o=await i.get(n);return await i.put(e,n),await r.done,(!o||o.fid!==e.fid)&&vm(t,e.fid),e}async function Em(t){const e=Ba(t),s=(await uu()).transaction(Ks,"readwrite");await s.objectStore(Ks).delete(e),await s.done}async function ja(t,e){const n=Ba(t),r=(await uu()).transaction(Ks,"readwrite"),i=r.objectStore(Ks),o=await i.get(n),l=e(o);return l===void 0?await i.delete(n):await i.put(l,n),await r.done,l&&(!o||o.fid!==l.fid)&&vm(t,l.fid),l}async function hu(t){let e;const n=await ja(t.appConfig,s=>{const r=BI(s),i=jI(t,r);return e=i.registrationPromise,i.installationEntry});return n.fid===yc?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function BI(t){const e=t||{fid:VI(),registrationStatus:0};return Tm(e)}function jI(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Ws.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=HI(t,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:qI(t)}:{installationEntry:e}}async function HI(t,e){try{const n=await kI(t,e);return sa(t.appConfig,n)}catch(n){throw hm(n)&&n.customData.serverCode===409?await Em(t.appConfig):await sa(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function qI(t){let e=await Zf(t.appConfig);for(;e.registrationStatus===1;)await _m(100),e=await Zf(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await hu(t);return s||n}return e}function Zf(t){return ja(t,e=>{if(!e)throw Ws.create("installation-not-found");return Tm(e)})}function Tm(t){return zI(t)?{fid:t.fid,registrationStatus:0}:t}function zI(t){return t.registrationStatus===1&&t.registrationTime+lm<Date.now()}async function GI({appConfig:t,heartbeatServiceProvider:e},n){const s=WI(t,n),r=CI(t,n),i=e.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&r.append("x-firebase-client",h)}const o={installation:{sdkVersion:cm,appId:t.appId}},l={method:"POST",headers:r,body:JSON.stringify(o)},c=await mm(()=>fetch(s,l));if(c.ok){const h=await c.json();return dm(h)}else throw await pm("Generate Auth Token",c)}function WI(t,{fid:e}){return`${fm(t)}/${e}/authTokens:generate`}async function fu(t,e=!1){let n;const s=await ja(t.appConfig,i=>{if(!Im(i))throw Ws.create("not-registered");const o=i.authToken;if(!e&&YI(o))return i;if(o.requestStatus===1)return n=KI(t,e),i;{if(!navigator.onLine)throw Ws.create("app-offline");const l=XI(i);return n=QI(t,l),l}});return n?await n:s.authToken}async function KI(t,e){let n=await ed(t.appConfig);for(;n.authToken.requestStatus===1;)await _m(100),n=await ed(t.appConfig);const s=n.authToken;return s.requestStatus===0?fu(t,e):s}function ed(t){return ja(t,e=>{if(!Im(e))throw Ws.create("not-registered");const n=e.authToken;return ZI(n)?{...e,authToken:{requestStatus:0}}:e})}async function QI(t,e){try{const n=await GI(t,e),s={...e,authToken:n};return await sa(t.appConfig,s),n}catch(n){if(hm(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Em(t.appConfig);else{const s={...e,authToken:{requestStatus:0}};await sa(t.appConfig,s)}throw n}}function Im(t){return t!==void 0&&t.registrationStatus===2}function YI(t){return t.requestStatus===2&&!JI(t)}function JI(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+bI}function XI(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function ZI(t){return t.requestStatus===1&&t.requestTime+lm<Date.now()}async function eb(t){const e=t,{installationEntry:n,registrationPromise:s}=await hu(e);return s?s.catch(console.error):fu(e).catch(console.error),n.fid}async function tb(t,e=!1){const n=t;return await nb(n),(await fu(n,e)).token}async function nb(t){const{registrationPromise:e}=await hu(t);e&&await e}function sb(t){if(!t||!t.options)throw Hl("App Configuration");if(!t.name)throw Hl("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Hl(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Hl(t){return Ws.create("missing-app-config-values",{valueName:t})}const bm="installations",rb="installations-internal",ib=t=>{const e=t.getProvider("app").getImmediate(),n=sb(e),s=er(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},ob=t=>{const e=t.getProvider("app").getImmediate(),n=er(e,bm).getImmediate();return{getId:()=>eb(n),getToken:r=>tb(n,r)}};function ab(){Pn(new un(bm,ib,"PUBLIC")),Pn(new un(rb,ob,"PRIVATE"))}ab();Yt(am,cu);Yt(am,cu,"esm2020");const ra="analytics",lb="firebase_id",cb="origin",ub=60*1e3,hb="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",du="https://www.googletagmanager.com/gtag/js";const Vt=new $a("@firebase/analytics");const fb={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Gt=new Zs("analytics","Analytics",fb);function db(t){if(!t.startsWith(du)){const e=Gt.create("invalid-gtag-resource",{gtagURL:t});return Vt.warn(e.message),""}return t}function Am(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function pb(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function gb(t,e){const n=pb("firebase-js-sdk-policy",{createScriptURL:db}),s=document.createElement("script"),r=`${du}?l=${t}&id=${e}`;s.src=n?n?.createScriptURL(r):r,s.async=!0,document.head.appendChild(s)}function mb(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function _b(t,e,n,s,r,i){const o=s[r];try{if(o)await e[o];else{const c=(await Am(n)).find(h=>h.measurementId===r);c&&await e[c.appId]}}catch(l){Vt.error(l)}t("config",r,i)}async function yb(t,e,n,s,r){try{let i=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const l=await Am(n);for(const c of o){const h=l.find(p=>p.measurementId===c),f=h&&e[h.appId];if(f)i.push(f);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",s,r||{})}catch(i){Vt.error(i)}}function vb(t,e,n,s){async function r(i,...o){try{if(i==="event"){const[l,c]=o;await yb(t,e,n,l,c)}else if(i==="config"){const[l,c]=o;await _b(t,e,n,s,l,c)}else if(i==="consent"){const[l,c]=o;t("consent",l,c)}else if(i==="get"){const[l,c,h]=o;t("get",l,c,h)}else if(i==="set"){const[l]=o;t("set",l)}else t(i,...o)}catch(l){Vt.error(l)}}return r}function wb(t,e,n,s,r){let i=function(...o){window[s].push(arguments)};return window[r]&&typeof window[r]=="function"&&(i=window[r]),window[r]=vb(i,t,e,n),{gtagCore:i,wrappedGtag:window[r]}}function Eb(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(du)&&n.src.includes(t))return n;return null}const Tb=30,Ib=1e3;class bb{constructor(e={},n=Ib){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Rm=new bb;function Ab(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Rb(t){const{appId:e,apiKey:n}=t,s={method:"GET",headers:Ab(n)},r=hb.replace("{app-id}",e),i=await fetch(r,s);if(i.status!==200&&i.status!==304){let o="";try{const l=await i.json();l.error?.message&&(o=l.error.message)}catch{}throw Gt.create("config-fetch-failed",{httpStatus:i.status,responseMessage:o})}return i.json()}async function Sb(t,e=Rm,n){const{appId:s,apiKey:r,measurementId:i}=t.options;if(!s)throw Gt.create("no-app-id");if(!r){if(i)return{measurementId:i,appId:s};throw Gt.create("no-api-key")}const o=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new xb;return setTimeout(async()=>{l.abort()},ub),Sm({appId:s,apiKey:r,measurementId:i},o,l,e)}async function Sm(t,{throttleEndTimeMillis:e,backoffCount:n},s,r=Rm){const{appId:i,measurementId:o}=t;try{await Cb(s,e)}catch(l){if(o)return Vt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:i,measurementId:o};throw l}try{const l=await Rb(t);return r.deleteThrottleMetadata(i),l}catch(l){const c=l;if(!Pb(c)){if(r.deleteThrottleMetadata(i),o)return Vt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:i,measurementId:o};throw l}const h=Number(c?.customData?.httpStatus)===503?qf(n,r.intervalMillis,Tb):qf(n,r.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return r.setThrottleMetadata(i,f),Vt.debug(`Calling attemptFetch again in ${h} millis`),Sm(t,f,s,r)}}function Cb(t,e){return new Promise((n,s)=>{const r=Math.max(e-Date.now(),0),i=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(i),s(Gt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Pb(t){if(!(t instanceof fn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class xb{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function kb(t,e,n,s,r){if(r&&r.global){t("event",n,s);return}else{const i=await e,o={...s,send_to:i};t("event",n,o)}}async function Db(t,e,n,s){if(s&&s.global){const r={};for(const i of Object.keys(n))r[`user_properties.${i}`]=n[i];return t("set",r),Promise.resolve()}else{const r=await e;t("config",r,{update:!0,user_properties:n})}}async function Nb(){if(Zg())try{await em()}catch(t){return Vt.warn(Gt.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return Vt.warn(Gt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Vb(t,e,n,s,r,i,o){const l=Sb(t);l.then(g=>{n[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&Vt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Vt.error(g)),e.push(l);const c=Nb().then(g=>{if(g)return s.getId()}),[h,f]=await Promise.all([l,c]);Eb(i)||gb(i,h.measurementId),r("js",new Date);const p=o?.config??{};return p[cb]="firebase",p.update=!0,f!=null&&(p[lb]=f),r("config",h.measurementId,p),h.measurementId}class Ob{constructor(e){this.app=e}_delete(){return delete Ir[this.app.options.appId],Promise.resolve()}}let Ir={},td=[];const nd={};let ql="dataLayer",Mb="gtag",sd,pu,rd=!1;function Lb(){const t=[];if(Xg()&&t.push("This is a browser extension environment."),nT()||t.push("Cookies are not available."),t.length>0){const e=t.map((s,r)=>`(${r+1}) ${s}`).join(" "),n=Gt.create("invalid-analytics-context",{errorInfo:e});Vt.warn(n.message)}}function Fb(t,e,n){Lb();const s=t.options.appId;if(!s)throw Gt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Vt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Gt.create("no-api-key");if(Ir[s]!=null)throw Gt.create("already-exists",{id:s});if(!rd){mb(ql);const{wrappedGtag:i,gtagCore:o}=wb(Ir,td,nd,ql,Mb);pu=i,sd=o,rd=!0}return Ir[s]=Vb(t,td,nd,e,sd,ql,n),new Ob(t)}function Ub(t=lu()){t=pt(t);const e=er(t,ra);return e.isInitialized()?e.getImmediate():$b(t)}function $b(t,e={}){const n=er(t,ra);if(n.isInitialized()){const r=n.getImmediate();if(ws(e,n.getOptions()))return r;throw Gt.create("already-initialized")}return n.initialize({options:e})}function Bb(t,e,n){t=pt(t),Db(pu,Ir[t.app.options.appId],e,n).catch(s=>Vt.error(s))}function jb(t,e,n,s){t=pt(t),kb(pu,Ir[t.app.options.appId],e,n,s).catch(r=>Vt.error(r))}const id="@firebase/analytics",od="0.10.19";function Hb(){Pn(new un(ra,(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return Fb(s,r,n)},"PUBLIC")),Pn(new un("analytics-internal",t,"PRIVATE")),Yt(id,od),Yt(id,od,"esm2020");function t(e){try{const n=e.getProvider(ra).getImmediate();return{logEvent:(s,r,i)=>jb(n,s,r,i),setUserProperties:(s,r)=>Bb(n,s,r)}}catch(n){throw Gt.create("interop-component-reg-failed",{reason:n})}}}Hb();function Cm(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qb=Cm,Pm=new Zs("auth","Firebase",Cm());const ia=new $a("@firebase/auth");function zb(t,...e){ia.logLevel<=Ie.WARN&&ia.warn(`Auth (${jr}): ${t}`,...e)}function Vo(t,...e){ia.logLevel<=Ie.ERROR&&ia.error(`Auth (${jr}): ${t}`,...e)}function xn(t,...e){throw mu(t,...e)}function an(t,...e){return mu(t,...e)}function gu(t,e,n){const s={...qb(),[e]:n};return new Zs("auth","Firebase",s).create(e,{appName:t.name})}function zs(t){return gu(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gb(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&xn(t,"argument-error"),gu(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function mu(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return Pm.create(t,...e)}function de(t,e,...n){if(!t)throw mu(e,...n)}function Fn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Vo(e),new Error(e)}function qn(t,e){t||Fn(e)}function vc(){return typeof self<"u"&&self.location?.href||""}function Wb(){return ad()==="http:"||ad()==="https:"}function ad(){return typeof self<"u"&&self.location?.protocol||null}function Kb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Wb()||Xg()||"connection"in navigator)?navigator.onLine:!0}function Qb(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Xi{constructor(e,n){this.shortDelay=e,this.longDelay=n,qn(n>e,"Short delay should be less than long delay!"),this.isMobile=YE()||ZE()}get(){return Kb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _u(t,e){qn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class xm{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Yb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Jb=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Xb=new Xi(3e4,6e4);function yu(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Hr(t,e,n,s,r={}){return km(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const l=Ji({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:c,...i};return XE()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Br(t.emulatorConfig.host)&&(h.credentials="include"),xm.fetch()(await Dm(t,t.config.apiHost,n,l),h)})}async function km(t,e,n){t._canInitEmulator=!1;const s={...Yb,...e};try{const r=new eA(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw To(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw To(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw To(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw To(t,"user-disabled",o);const f=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw gu(t,f,h);xn(t,f)}}catch(r){if(r instanceof fn)throw r;xn(t,"network-request-failed",{message:String(r)})}}async function Zb(t,e,n,s,r={}){const i=await Hr(t,e,n,s,r);return"mfaPendingCredential"in i&&xn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Dm(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?_u(t.config,r):`${t.config.apiScheme}://${r}`;return Jb.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class eA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(an(this.auth,"network-request-failed")),Xb.get())})}}function To(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=an(t,e,s);return r.customData._tokenResponse=n,r}async function tA(t,e){return Hr(t,"POST","/v1/accounts:delete",e)}async function oa(t,e){return Hr(t,"POST","/v1/accounts:lookup",e)}function Si(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nA(t,e=!1){const n=pt(t),s=await n.getIdToken(e),r=vu(s);de(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:Si(zl(r.auth_time)),issuedAtTime:Si(zl(r.iat)),expirationTime:Si(zl(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function zl(t){return Number(t)*1e3}function vu(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Vo("JWT malformed, contained fewer than 3 sections"),null;try{const r=Gg(n);return r?JSON.parse(r):(Vo("Failed to decode base64 JWT payload"),null)}catch(r){return Vo("Caught error parsing JWT payload as JSON",r?.toString()),null}}function ld(t){const e=vu(t);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ui(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof fn&&sA(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function sA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class rA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class wc{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Si(this.lastLoginAt),this.creationTime=Si(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function aa(t){const e=t.auth,n=await t.getIdToken(),s=await Ui(t,oa(e,{idToken:n}));de(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?Nm(r.providerUserInfo):[],o=oA(t.providerData,i),l=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!o?.length,h=l?c:!1,f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new wc(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function iA(t){const e=pt(t);await aa(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oA(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function Nm(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function aA(t,e){const n=await km(t,{},async()=>{const s=Ji({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await Dm(t,r,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:s};return t.emulatorConfig&&Br(t.emulatorConfig.host)&&(c.credentials="include"),xm.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function lA(t,e){return Hr(t,"POST","/v2/accounts:revokeToken",yu(t,e))}class br{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ld(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){de(e.length!==0,"internal-error");const n=ld(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await aA(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new br;return s&&(de(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(de(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(de(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new br,this.toJSON())}_performRefresh(){return Fn("not implemented")}}function ns(t,e){de(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class sn{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new rA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new wc(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Ui(this,this.stsTokenManager.getToken(this.auth,e));return de(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return nA(this,e)}reload(){return iA(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new sn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await aa(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(en(this.auth.app))return Promise.reject(zs(this.auth));const e=await this.getIdToken();return await Ui(this,tA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,h=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:w,providerData:D,stsTokenManager:O}=n;de(p&&O,e,"internal-error");const F=br.fromJSON(this.name,O);de(typeof p=="string",e,"internal-error"),ns(s,e.name),ns(r,e.name),de(typeof g=="boolean",e,"internal-error"),de(typeof w=="boolean",e,"internal-error"),ns(i,e.name),ns(o,e.name),ns(l,e.name),ns(c,e.name),ns(h,e.name),ns(f,e.name);const Q=new sn({uid:p,auth:e,email:r,emailVerified:g,displayName:s,isAnonymous:w,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:F,createdAt:h,lastLoginAt:f});return D&&Array.isArray(D)&&(Q.providerData=D.map(V=>({...V}))),c&&(Q._redirectEventId=c),Q}static async _fromIdTokenResponse(e,n,s=!1){const r=new br;r.updateFromServerResponse(n);const i=new sn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await aa(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];de(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?Nm(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,l=new br;l.updateFromIdToken(s);const c=new sn({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new wc(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(c,h),c}}const cd=new Map;function Un(t){qn(t instanceof Function,"Expected a class definition");let e=cd.get(t);return e?(qn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,cd.set(t,e),e)}class Vm{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Vm.type="NONE";const ud=Vm;function Oo(t,e,n){return`firebase:${t}:${e}:${n}`}class Ar{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=Oo(this.userKey,r.apiKey,i),this.fullPersistenceKey=Oo("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await oa(this.auth,{idToken:e}).catch(()=>{});return n?sn._fromGetAccountInfoResponse(this.auth,n,e):null}return sn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Ar(Un(ud),e,s);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=r[0]||Un(ud);const o=Oo(s,e.config.apiKey,e.name);let l=null;for(const h of n)try{const f=await h._get(o);if(f){let p;if(typeof f=="string"){const g=await oa(e,{idToken:f}).catch(()=>{});if(!g)break;p=await sn._fromGetAccountInfoResponse(e,g,f)}else p=sn._fromJSON(e,f);h!==i&&(l=p),i=h;break}}catch{}const c=r.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Ar(i,e,s):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Ar(i,e,s))}}function hd(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Fm(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Om(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($m(e))return"Blackberry";if(Bm(e))return"Webos";if(Mm(e))return"Safari";if((e.includes("chrome/")||Lm(e))&&!e.includes("edge/"))return"Chrome";if(Um(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function Om(t=Pt()){return/firefox\//i.test(t)}function Mm(t=Pt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Lm(t=Pt()){return/crios\//i.test(t)}function Fm(t=Pt()){return/iemobile/i.test(t)}function Um(t=Pt()){return/android/i.test(t)}function $m(t=Pt()){return/blackberry/i.test(t)}function Bm(t=Pt()){return/webos/i.test(t)}function wu(t=Pt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function cA(t=Pt()){return wu(t)&&!!window.navigator?.standalone}function uA(){return eT()&&document.documentMode===10}function jm(t=Pt()){return wu(t)||Um(t)||Bm(t)||$m(t)||/windows phone/i.test(t)||Fm(t)}function Hm(t,e=[]){let n;switch(t){case"Browser":n=hd(Pt());break;case"Worker":n=`${hd(Pt())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${jr}/${s}`}class hA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function fA(t,e={}){return Hr(t,"GET","/v2/passwordPolicy",yu(t,e))}const dA=6;class pA{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??dA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class gA{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fd(this),this.idTokenSubscription=new fd(this),this.beforeStateQueue=new hA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pm,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Un(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ar.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await oa(this,{idToken:e}),s=await sn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(en(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&l?.user&&(s=l.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await aa(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Qb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(en(this.app))return Promise.reject(zs(this));const n=e?pt(e):null;return n&&de(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return en(this.app)?Promise.reject(zs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return en(this.app)?Promise.reject(zs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Un(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fA(this),n=new pA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zs("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await lA(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Un(e)||this._popupRedirectResolver;de(n,this,"argument-error"),this.redirectPersistenceManager=await Ar.create(this,[Un(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,r);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Hm(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(en(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&zb(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ha(t){return pt(t)}class fd{constructor(e){this.auth=e,this.observer=null,this.addObserver=aT(n=>this.observer=n)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Eu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mA(t){Eu=t}function _A(t){return Eu.loadJS(t)}function yA(){return Eu.gapiScript}function vA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function wA(t,e){const n=er(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(ws(i,e??{}))return r;xn(r,"already-initialized")}return n.initialize({options:e})}function EA(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Un);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function TA(t,e,n){const s=Ha(t);de(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=qm(e),{host:o,port:l}=IA(e),c=l===null?"":`:${l}`,h={url:`${i}//${o}${c}/`},f=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){de(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),de(ws(h,s.config.emulator)&&ws(f,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=h,s.emulatorConfig=f,s.settings.appVerificationDisabledForTesting=!0,Br(o)?(Yg(`${i}//${o}${c}`),Jg("Auth",!0)):bA()}function qm(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function IA(t){const e=qm(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:dd(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:dd(o)}}}function dd(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function bA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class zm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fn("not implemented")}_getIdTokenResponse(e){return Fn("not implemented")}_linkToIdToken(e,n){return Fn("not implemented")}_getReauthenticationResolver(e){return Fn("not implemented")}}async function Rr(t,e){return Zb(t,"POST","/v1/accounts:signInWithIdp",yu(t,e))}const AA="http://localhost";class Qs extends zm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Qs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new Qs(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Rr(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Rr(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Rr(e,n)}buildRequest(){const e={requestUri:AA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ji(n)}return e}}class Tu{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Zi extends Tu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class as extends Zi{constructor(){super("facebook.com")}static credential(e){return Qs._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return as.credential(e.oauthAccessToken)}catch{return null}}}as.FACEBOOK_SIGN_IN_METHOD="facebook.com";as.PROVIDER_ID="facebook.com";class Ln extends Zi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Qs._fromParams({providerId:Ln.PROVIDER_ID,signInMethod:Ln.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ln.credentialFromTaggedObject(e)}static credentialFromError(e){return Ln.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Ln.credential(n,s)}catch{return null}}}Ln.GOOGLE_SIGN_IN_METHOD="google.com";Ln.PROVIDER_ID="google.com";class ls extends Zi{constructor(){super("github.com")}static credential(e){return Qs._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ls.credential(e.oauthAccessToken)}catch{return null}}}ls.GITHUB_SIGN_IN_METHOD="github.com";ls.PROVIDER_ID="github.com";class cs extends Zi{constructor(){super("twitter.com")}static credential(e,n){return Qs._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return cs.credential(n,s)}catch{return null}}}cs.TWITTER_SIGN_IN_METHOD="twitter.com";cs.PROVIDER_ID="twitter.com";class Vr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await sn._fromIdTokenResponse(e,s,r),o=pd(s);return new Vr({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=pd(s);return new Vr({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function pd(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class la extends fn{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,la.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new la(e,n,s,r)}}function Gm(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?la._fromErrorAndOperation(t,i,e,s):i})}async function RA(t,e,n=!1){const s=await Ui(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Vr._forOperation(t,"link",s)}async function SA(t,e,n=!1){const{auth:s}=t;if(en(s.app))return Promise.reject(zs(s));const r="reauthenticate";try{const i=await Ui(t,Gm(s,r,e,t),n);de(i.idToken,s,"internal-error");const o=vu(i.idToken);de(o,s,"internal-error");const{sub:l}=o;return de(t.uid===l,s,"user-mismatch"),Vr._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&xn(s,"user-mismatch"),i}}async function CA(t,e,n=!1){if(en(t.app))return Promise.reject(zs(t));const s="signIn",r=await Gm(t,s,e),i=await Vr._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}function PA(t,e,n,s){return pt(t).onIdTokenChanged(e,n,s)}function xA(t,e,n){return pt(t).beforeAuthStateChanged(e,n)}function qa(t,e,n,s){return pt(t).onAuthStateChanged(e,n,s)}function kA(t){return pt(t).signOut()}const ca="__sak";class Wm{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ca,"1"),this.storage.removeItem(ca),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const DA=1e3,NA=10;class Km extends Wm{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jm(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);uA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,NA):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},DA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Km.type="LOCAL";const VA=Km;class Qm extends Wm{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Qm.type="SESSION";const Ym=Qm;function OA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class za{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new za(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const l=Array.from(o).map(async h=>h(n.origin,i)),c=await OA(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}za.receivers=[];function Iu(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}class MA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const h=Iu("",20);r.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(p){const g=p;if(g.data.eventId===h)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function En(){return window}function LA(t){En().location.href=t}function Jm(){return typeof En().WorkerGlobalScope<"u"&&typeof En().importScripts=="function"}async function FA(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function UA(){return navigator?.serviceWorker?.controller||null}function $A(){return Jm()?self:null}const Xm="firebaseLocalStorageDb",BA=1,ua="firebaseLocalStorage",Zm="fbase_key";class eo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ga(t,e){return t.transaction([ua],e?"readwrite":"readonly").objectStore(ua)}function jA(){const t=indexedDB.deleteDatabase(Xm);return new eo(t).toPromise()}function Ec(){const t=indexedDB.open(Xm,BA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(ua,{keyPath:Zm})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(ua)?e(s):(s.close(),await jA(),e(await Ec()))})})}async function gd(t,e,n){const s=Ga(t,!0).put({[Zm]:e,value:n});return new eo(s).toPromise()}async function HA(t,e){const n=Ga(t,!1).get(e),s=await new eo(n).toPromise();return s===void 0?null:s.value}function md(t,e){const n=Ga(t,!0).delete(e);return new eo(n).toPromise()}const qA=800,zA=3;class e_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ec(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>zA)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Jm()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=za._getInstance($A()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await FA(),!this.activeServiceWorker)return;this.sender=new MA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||UA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ec();return await gd(e,ca,"1"),await md(e,ca),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>gd(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>HA(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>md(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=Ga(r,!1).getAll();return new eo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}e_.type="LOCAL";const GA=e_;new Xi(3e4,6e4);function t_(t,e){return e?Un(e):(de(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class bu extends zm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Rr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Rr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Rr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function WA(t){return CA(t.auth,new bu(t),t.bypassAuthState)}function KA(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),SA(n,new bu(t),t.bypassAuthState)}async function QA(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),RA(n,new bu(t),t.bypassAuthState)}class n_{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WA;case"linkViaPopup":case"linkViaRedirect":return QA;case"reauthViaPopup":case"reauthViaRedirect":return KA;default:xn(this.auth,"internal-error")}}resolve(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const YA=new Xi(2e3,1e4);async function JA(t,e,n){if(en(t.app))return Promise.reject(an(t,"operation-not-supported-in-this-environment"));const s=Ha(t);Gb(t,e,Tu);const r=t_(s,n);return new $s(s,"signInViaPopup",e,r).executeNotNull()}class $s extends n_{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,$s.currentPopupAction&&$s.currentPopupAction.cancel(),$s.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){qn(this.filter.length===1,"Popup operations only handle one event");const e=Iu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(an(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(an(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$s.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(an(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,YA.get())};e()}}$s.currentPopupAction=null;const XA="pendingRedirect",Mo=new Map;class ZA extends n_{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Mo.get(this.auth._key());if(!e){try{const s=await e1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Mo.set(this.auth._key(),e)}return this.bypassAuthState||Mo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function e1(t,e){const n=s1(e),s=n1(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function t1(t,e){Mo.set(t._key(),e)}function n1(t){return Un(t._redirectPersistence)}function s1(t){return Oo(XA,t.config.apiKey,t.name)}async function r1(t,e,n=!1){if(en(t.app))return Promise.reject(zs(t));const s=Ha(t),r=t_(s,e),o=await new ZA(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}const i1=10*60*1e3;class o1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!a1(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!s_(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(an(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=i1&&this.cachedEventUids.clear(),this.cachedEventUids.has(_d(e))}saveEventToCache(e){this.cachedEventUids.add(_d(e)),this.lastProcessedEventTime=Date.now()}}function _d(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function s_({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function a1(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return s_(t);default:return!1}}async function l1(t,e={}){return Hr(t,"GET","/v1/projects",e)}const c1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,u1=/^https?/;async function h1(t){if(t.config.emulator)return;const{authorizedDomains:e}=await l1(t);for(const n of e)try{if(f1(n))return}catch{}xn(t,"unauthorized-domain")}function f1(t){const e=vc(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!u1.test(n))return!1;if(c1.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}const d1=new Xi(3e4,6e4);function yd(){const t=En().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function p1(t){return new Promise((e,n)=>{function s(){yd(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yd(),n(an(t,"network-request-failed"))},timeout:d1.get()})}if(En().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(En().gapi?.load)s();else{const r=vA("iframefcb");return En()[r]=()=>{gapi.load?s():n(an(t,"network-request-failed"))},_A(`${yA()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw Lo=null,e})}let Lo=null;function g1(t){return Lo=Lo||p1(t),Lo}const m1=new Xi(5e3,15e3),_1="__/auth/iframe",y1="emulator/auth/iframe",v1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},w1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function E1(t){const e=t.config;de(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?_u(e,y1):`https://${t.config.authDomain}/${_1}`,s={apiKey:e.apiKey,appName:t.name,v:jr},r=w1.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${Ji(s).slice(1)}`}async function T1(t){const e=await g1(t),n=En().gapi;return de(n,t,"internal-error"),e.open({where:document.body,url:E1(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:v1,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=an(t,"network-request-failed"),l=En().setTimeout(()=>{i(o)},m1.get());function c(){En().clearTimeout(l),r(s)}s.ping(c).then(c,()=>{i(o)})}))}const I1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},b1=500,A1=600,R1="_blank",S1="http://localhost";class vd{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function C1(t,e,n,s=b1,r=A1){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c={...I1,width:s.toString(),height:r.toString(),top:i,left:o},h=Pt().toLowerCase();n&&(l=Lm(h)?R1:n),Om(h)&&(e=e||S1,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[w,D])=>`${g}${w}=${D},`,"");if(cA(h)&&l!=="_self")return P1(e||"",l),new vd(null);const p=window.open(e||"",l,f);de(p,t,"popup-blocked");try{p.focus()}catch{}return new vd(p)}function P1(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const x1="__/auth/handler",k1="emulator/auth/handler",D1=encodeURIComponent("fac");async function wd(t,e,n,s,r,i){de(t.config.authDomain,t,"auth-domain-config-required"),de(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:jr,eventId:r};if(e instanceof Tu){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",oT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof Zi){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const c=await t._getAppCheckToken(),h=c?`#${D1}=${encodeURIComponent(c)}`:"";return`${N1(t)}?${Ji(l).slice(1)}${h}`}function N1({config:t}){return t.emulator?_u(t,k1):`https://${t.authDomain}/${x1}`}const Gl="webStorageSupport";class V1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ym,this._completeRedirectFn=r1,this._overrideRedirectResult=t1}async _openPopup(e,n,s,r){qn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await wd(e,n,s,vc(),r);return C1(e,i,Iu())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await wd(e,n,s,vc(),r);return LA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(qn(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await T1(e),s=new o1(e);return n.register("authEvent",r=>(de(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gl,{type:Gl},r=>{const i=r?.[0]?.[Gl];i!==void 0&&n(!!i),xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=h1(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return jm()||Mm()||wu()}}const O1=V1;var Ed="@firebase/auth",Td="1.11.1";class M1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function L1(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function F1(t){Pn(new un("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;de(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hm(t)},h=new gA(s,r,i,c);return EA(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Pn(new un("auth-internal",e=>{const n=Ha(e.getProvider("auth").getImmediate());return(s=>new M1(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yt(Ed,Td,L1(t)),Yt(Ed,Td,"esm2020")}const U1=5*60,$1=Qg("authIdTokenMaxAge")||U1;let Id=null;const B1=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>$1)return;const r=n?.token;Id!==r&&(Id=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function j1(t=lu()){const e=er(t,"auth");if(e.isInitialized())return e.getImmediate();const n=wA(t,{popupRedirectResolver:O1,persistence:[GA,VA,Ym]}),s=Qg("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=B1(i.toString());xA(n,o,()=>o(n.currentUser)),PA(n,l=>o(l))}}const r=Wg("auth");return r&&TA(n,`http://${r}`),n}function H1(){return document.getElementsByTagName("head")?.[0]??document}mA({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=an("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",H1().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});F1("Browser");var bd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ps,r_;(function(){var t;function e(b,_){function v(){}v.prototype=_.prototype,b.F=_.prototype,b.prototype=new v,b.prototype.constructor=b,b.D=function(R,A,C){for(var E=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)E[Ue-2]=arguments[Ue];return _.prototype[A].apply(R,E)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(b,_,v){v||(v=0);const R=Array(16);if(typeof _=="string")for(var A=0;A<16;++A)R[A]=_.charCodeAt(v++)|_.charCodeAt(v++)<<8|_.charCodeAt(v++)<<16|_.charCodeAt(v++)<<24;else for(A=0;A<16;++A)R[A]=_[v++]|_[v++]<<8|_[v++]<<16|_[v++]<<24;_=b.g[0],v=b.g[1],A=b.g[2];let C=b.g[3],E;E=_+(C^v&(A^C))+R[0]+3614090360&4294967295,_=v+(E<<7&4294967295|E>>>25),E=C+(A^_&(v^A))+R[1]+3905402710&4294967295,C=_+(E<<12&4294967295|E>>>20),E=A+(v^C&(_^v))+R[2]+606105819&4294967295,A=C+(E<<17&4294967295|E>>>15),E=v+(_^A&(C^_))+R[3]+3250441966&4294967295,v=A+(E<<22&4294967295|E>>>10),E=_+(C^v&(A^C))+R[4]+4118548399&4294967295,_=v+(E<<7&4294967295|E>>>25),E=C+(A^_&(v^A))+R[5]+1200080426&4294967295,C=_+(E<<12&4294967295|E>>>20),E=A+(v^C&(_^v))+R[6]+2821735955&4294967295,A=C+(E<<17&4294967295|E>>>15),E=v+(_^A&(C^_))+R[7]+4249261313&4294967295,v=A+(E<<22&4294967295|E>>>10),E=_+(C^v&(A^C))+R[8]+1770035416&4294967295,_=v+(E<<7&4294967295|E>>>25),E=C+(A^_&(v^A))+R[9]+2336552879&4294967295,C=_+(E<<12&4294967295|E>>>20),E=A+(v^C&(_^v))+R[10]+4294925233&4294967295,A=C+(E<<17&4294967295|E>>>15),E=v+(_^A&(C^_))+R[11]+2304563134&4294967295,v=A+(E<<22&4294967295|E>>>10),E=_+(C^v&(A^C))+R[12]+1804603682&4294967295,_=v+(E<<7&4294967295|E>>>25),E=C+(A^_&(v^A))+R[13]+4254626195&4294967295,C=_+(E<<12&4294967295|E>>>20),E=A+(v^C&(_^v))+R[14]+2792965006&4294967295,A=C+(E<<17&4294967295|E>>>15),E=v+(_^A&(C^_))+R[15]+1236535329&4294967295,v=A+(E<<22&4294967295|E>>>10),E=_+(A^C&(v^A))+R[1]+4129170786&4294967295,_=v+(E<<5&4294967295|E>>>27),E=C+(v^A&(_^v))+R[6]+3225465664&4294967295,C=_+(E<<9&4294967295|E>>>23),E=A+(_^v&(C^_))+R[11]+643717713&4294967295,A=C+(E<<14&4294967295|E>>>18),E=v+(C^_&(A^C))+R[0]+3921069994&4294967295,v=A+(E<<20&4294967295|E>>>12),E=_+(A^C&(v^A))+R[5]+3593408605&4294967295,_=v+(E<<5&4294967295|E>>>27),E=C+(v^A&(_^v))+R[10]+38016083&4294967295,C=_+(E<<9&4294967295|E>>>23),E=A+(_^v&(C^_))+R[15]+3634488961&4294967295,A=C+(E<<14&4294967295|E>>>18),E=v+(C^_&(A^C))+R[4]+3889429448&4294967295,v=A+(E<<20&4294967295|E>>>12),E=_+(A^C&(v^A))+R[9]+568446438&4294967295,_=v+(E<<5&4294967295|E>>>27),E=C+(v^A&(_^v))+R[14]+3275163606&4294967295,C=_+(E<<9&4294967295|E>>>23),E=A+(_^v&(C^_))+R[3]+4107603335&4294967295,A=C+(E<<14&4294967295|E>>>18),E=v+(C^_&(A^C))+R[8]+1163531501&4294967295,v=A+(E<<20&4294967295|E>>>12),E=_+(A^C&(v^A))+R[13]+2850285829&4294967295,_=v+(E<<5&4294967295|E>>>27),E=C+(v^A&(_^v))+R[2]+4243563512&4294967295,C=_+(E<<9&4294967295|E>>>23),E=A+(_^v&(C^_))+R[7]+1735328473&4294967295,A=C+(E<<14&4294967295|E>>>18),E=v+(C^_&(A^C))+R[12]+2368359562&4294967295,v=A+(E<<20&4294967295|E>>>12),E=_+(v^A^C)+R[5]+4294588738&4294967295,_=v+(E<<4&4294967295|E>>>28),E=C+(_^v^A)+R[8]+2272392833&4294967295,C=_+(E<<11&4294967295|E>>>21),E=A+(C^_^v)+R[11]+1839030562&4294967295,A=C+(E<<16&4294967295|E>>>16),E=v+(A^C^_)+R[14]+4259657740&4294967295,v=A+(E<<23&4294967295|E>>>9),E=_+(v^A^C)+R[1]+2763975236&4294967295,_=v+(E<<4&4294967295|E>>>28),E=C+(_^v^A)+R[4]+1272893353&4294967295,C=_+(E<<11&4294967295|E>>>21),E=A+(C^_^v)+R[7]+4139469664&4294967295,A=C+(E<<16&4294967295|E>>>16),E=v+(A^C^_)+R[10]+3200236656&4294967295,v=A+(E<<23&4294967295|E>>>9),E=_+(v^A^C)+R[13]+681279174&4294967295,_=v+(E<<4&4294967295|E>>>28),E=C+(_^v^A)+R[0]+3936430074&4294967295,C=_+(E<<11&4294967295|E>>>21),E=A+(C^_^v)+R[3]+3572445317&4294967295,A=C+(E<<16&4294967295|E>>>16),E=v+(A^C^_)+R[6]+76029189&4294967295,v=A+(E<<23&4294967295|E>>>9),E=_+(v^A^C)+R[9]+3654602809&4294967295,_=v+(E<<4&4294967295|E>>>28),E=C+(_^v^A)+R[12]+3873151461&4294967295,C=_+(E<<11&4294967295|E>>>21),E=A+(C^_^v)+R[15]+530742520&4294967295,A=C+(E<<16&4294967295|E>>>16),E=v+(A^C^_)+R[2]+3299628645&4294967295,v=A+(E<<23&4294967295|E>>>9),E=_+(A^(v|~C))+R[0]+4096336452&4294967295,_=v+(E<<6&4294967295|E>>>26),E=C+(v^(_|~A))+R[7]+1126891415&4294967295,C=_+(E<<10&4294967295|E>>>22),E=A+(_^(C|~v))+R[14]+2878612391&4294967295,A=C+(E<<15&4294967295|E>>>17),E=v+(C^(A|~_))+R[5]+4237533241&4294967295,v=A+(E<<21&4294967295|E>>>11),E=_+(A^(v|~C))+R[12]+1700485571&4294967295,_=v+(E<<6&4294967295|E>>>26),E=C+(v^(_|~A))+R[3]+2399980690&4294967295,C=_+(E<<10&4294967295|E>>>22),E=A+(_^(C|~v))+R[10]+4293915773&4294967295,A=C+(E<<15&4294967295|E>>>17),E=v+(C^(A|~_))+R[1]+2240044497&4294967295,v=A+(E<<21&4294967295|E>>>11),E=_+(A^(v|~C))+R[8]+1873313359&4294967295,_=v+(E<<6&4294967295|E>>>26),E=C+(v^(_|~A))+R[15]+4264355552&4294967295,C=_+(E<<10&4294967295|E>>>22),E=A+(_^(C|~v))+R[6]+2734768916&4294967295,A=C+(E<<15&4294967295|E>>>17),E=v+(C^(A|~_))+R[13]+1309151649&4294967295,v=A+(E<<21&4294967295|E>>>11),E=_+(A^(v|~C))+R[4]+4149444226&4294967295,_=v+(E<<6&4294967295|E>>>26),E=C+(v^(_|~A))+R[11]+3174756917&4294967295,C=_+(E<<10&4294967295|E>>>22),E=A+(_^(C|~v))+R[2]+718787259&4294967295,A=C+(E<<15&4294967295|E>>>17),E=v+(C^(A|~_))+R[9]+3951481745&4294967295,b.g[0]=b.g[0]+_&4294967295,b.g[1]=b.g[1]+(A+(E<<21&4294967295|E>>>11))&4294967295,b.g[2]=b.g[2]+A&4294967295,b.g[3]=b.g[3]+C&4294967295}s.prototype.v=function(b,_){_===void 0&&(_=b.length);const v=_-this.blockSize,R=this.C;let A=this.h,C=0;for(;C<_;){if(A==0)for(;C<=v;)r(this,b,C),C+=this.blockSize;if(typeof b=="string"){for(;C<_;)if(R[A++]=b.charCodeAt(C++),A==this.blockSize){r(this,R),A=0;break}}else for(;C<_;)if(R[A++]=b[C++],A==this.blockSize){r(this,R),A=0;break}}this.h=A,this.o+=_},s.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var _=1;_<b.length-8;++_)b[_]=0;_=this.o*8;for(var v=b.length-8;v<b.length;++v)b[v]=_&255,_/=256;for(this.v(b),b=Array(16),_=0,v=0;v<4;++v)for(let R=0;R<32;R+=8)b[_++]=this.g[v]>>>R&255;return b};function i(b,_){var v=l;return Object.prototype.hasOwnProperty.call(v,b)?v[b]:v[b]=_(b)}function o(b,_){this.h=_;const v=[];let R=!0;for(let A=b.length-1;A>=0;A--){const C=b[A]|0;R&&C==_||(v[A]=C,R=!1)}this.g=v}var l={};function c(b){return-128<=b&&b<128?i(b,function(_){return new o([_|0],_<0?-1:0)}):new o([b|0],b<0?-1:0)}function h(b){if(isNaN(b)||!isFinite(b))return p;if(b<0)return F(h(-b));const _=[];let v=1;for(let R=0;b>=v;R++)_[R]=b/v|0,v*=4294967296;return new o(_,0)}function f(b,_){if(b.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(b.charAt(0)=="-")return F(f(b.substring(1),_));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const v=h(Math.pow(_,8));let R=p;for(let C=0;C<b.length;C+=8){var A=Math.min(8,b.length-C);const E=parseInt(b.substring(C,C+A),_);A<8?(A=h(Math.pow(_,A)),R=R.j(A).add(h(E))):(R=R.j(v),R=R.add(h(E)))}return R}var p=c(0),g=c(1),w=c(16777216);t=o.prototype,t.m=function(){if(O(this))return-F(this).m();let b=0,_=1;for(let v=0;v<this.g.length;v++){const R=this.i(v);b+=(R>=0?R:4294967296+R)*_,_*=4294967296}return b},t.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(D(this))return"0";if(O(this))return"-"+F(this).toString(b);const _=h(Math.pow(b,6));var v=this;let R="";for(;;){const A=Y(v,_).g;v=Q(v,A.j(_));let C=((v.g.length>0?v.g[0]:v.h)>>>0).toString(b);if(v=A,D(v))return C+R;for(;C.length<6;)C="0"+C;R=C+R}},t.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function D(b){if(b.h!=0)return!1;for(let _=0;_<b.g.length;_++)if(b.g[_]!=0)return!1;return!0}function O(b){return b.h==-1}t.l=function(b){return b=Q(this,b),O(b)?-1:D(b)?0:1};function F(b){const _=b.g.length,v=[];for(let R=0;R<_;R++)v[R]=~b.g[R];return new o(v,~b.h).add(g)}t.abs=function(){return O(this)?F(this):this},t.add=function(b){const _=Math.max(this.g.length,b.g.length),v=[];let R=0;for(let A=0;A<=_;A++){let C=R+(this.i(A)&65535)+(b.i(A)&65535),E=(C>>>16)+(this.i(A)>>>16)+(b.i(A)>>>16);R=E>>>16,C&=65535,E&=65535,v[A]=E<<16|C}return new o(v,v[v.length-1]&-2147483648?-1:0)};function Q(b,_){return b.add(F(_))}t.j=function(b){if(D(this)||D(b))return p;if(O(this))return O(b)?F(this).j(F(b)):F(F(this).j(b));if(O(b))return F(this.j(F(b)));if(this.l(w)<0&&b.l(w)<0)return h(this.m()*b.m());const _=this.g.length+b.g.length,v=[];for(var R=0;R<2*_;R++)v[R]=0;for(R=0;R<this.g.length;R++)for(let A=0;A<b.g.length;A++){const C=this.i(R)>>>16,E=this.i(R)&65535,Ue=b.i(A)>>>16,tt=b.i(A)&65535;v[2*R+2*A]+=E*tt,V(v,2*R+2*A),v[2*R+2*A+1]+=C*tt,V(v,2*R+2*A+1),v[2*R+2*A+1]+=E*Ue,V(v,2*R+2*A+1),v[2*R+2*A+2]+=C*Ue,V(v,2*R+2*A+2)}for(b=0;b<_;b++)v[b]=v[2*b+1]<<16|v[2*b];for(b=_;b<2*_;b++)v[b]=0;return new o(v,0)};function V(b,_){for(;(b[_]&65535)!=b[_];)b[_+1]+=b[_]>>>16,b[_]&=65535,_++}function M(b,_){this.g=b,this.h=_}function Y(b,_){if(D(_))throw Error("division by zero");if(D(b))return new M(p,p);if(O(b))return _=Y(F(b),_),new M(F(_.g),F(_.h));if(O(_))return _=Y(b,F(_)),new M(F(_.g),_.h);if(b.g.length>30){if(O(b)||O(_))throw Error("slowDivide_ only works with positive integers.");for(var v=g,R=_;R.l(b)<=0;)v=$(v),R=$(R);var A=H(v,1),C=H(R,1);for(R=H(R,2),v=H(v,2);!D(R);){var E=C.add(R);E.l(b)<=0&&(A=A.add(v),C=E),R=H(R,1),v=H(v,1)}return _=Q(b,A.j(_)),new M(A,_)}for(A=p;b.l(_)>=0;){for(v=Math.max(1,Math.floor(b.m()/_.m())),R=Math.ceil(Math.log(v)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),C=h(v),E=C.j(_);O(E)||E.l(b)>0;)v-=R,C=h(v),E=C.j(_);D(C)&&(C=g),A=A.add(C),b=Q(b,E)}return new M(A,b)}t.B=function(b){return Y(this,b).h},t.and=function(b){const _=Math.max(this.g.length,b.g.length),v=[];for(let R=0;R<_;R++)v[R]=this.i(R)&b.i(R);return new o(v,this.h&b.h)},t.or=function(b){const _=Math.max(this.g.length,b.g.length),v=[];for(let R=0;R<_;R++)v[R]=this.i(R)|b.i(R);return new o(v,this.h|b.h)},t.xor=function(b){const _=Math.max(this.g.length,b.g.length),v=[];for(let R=0;R<_;R++)v[R]=this.i(R)^b.i(R);return new o(v,this.h^b.h)};function $(b){const _=b.g.length+1,v=[];for(let R=0;R<_;R++)v[R]=b.i(R)<<1|b.i(R-1)>>>31;return new o(v,b.h)}function H(b,_){const v=_>>5;_%=32;const R=b.g.length-v,A=[];for(let C=0;C<R;C++)A[C]=_>0?b.i(C+v)>>>_|b.i(C+v+1)<<32-_:b.i(C+v);return new o(A,b.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,r_=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,ps=o}).apply(typeof bd<"u"?bd:typeof self<"u"?self:typeof window<"u"?window:{});var Io=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var i_,gi,o_,Fo,Tc,a_,l_,c_;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Io=="object"&&Io];for(var u=0;u<a.length;++u){var d=a[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var s=n(this);function r(a,u){if(u)e:{var d=s;a=a.split(".");for(var m=0;m<a.length-1;m++){var x=a[m];if(!(x in d))break e;d=d[x]}a=a[a.length-1],m=d[a],u=u(m),u!=m&&u!=null&&e(d,a,{configurable:!0,writable:!0,value:u})}}r("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(a){return a||function(u){var d=[],m;for(m in u)Object.prototype.hasOwnProperty.call(u,m)&&d.push([m,u[m]]);return d}});var i=i||{},o=this||self;function l(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function c(a,u,d){return a.call.apply(a.bind,arguments)}function h(a,u,d){return h=c,h.apply(null,arguments)}function f(a,u){var d=Array.prototype.slice.call(arguments,1);return function(){var m=d.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function p(a,u){function d(){}d.prototype=u.prototype,a.Z=u.prototype,a.prototype=new d,a.prototype.constructor=a,a.Ob=function(m,x,k){for(var ee=Array(arguments.length-2),we=2;we<arguments.length;we++)ee[we-2]=arguments[we];return u.prototype[x].apply(m,ee)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function w(a){const u=a.length;if(u>0){const d=Array(u);for(let m=0;m<u;m++)d[m]=a[m];return d}return[]}function D(a,u){for(let m=1;m<arguments.length;m++){const x=arguments[m];var d=typeof x;if(d=d!="object"?d:x?Array.isArray(x)?"array":d:"null",d=="array"||d=="object"&&typeof x.length=="number"){d=a.length||0;const k=x.length||0;a.length=d+k;for(let ee=0;ee<k;ee++)a[d+ee]=x[ee]}else a.push(x)}}class O{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return this.h>0?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function F(a){o.setTimeout(()=>{throw a},0)}function Q(){var a=b;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class V{constructor(){this.h=this.g=null}add(u,d){const m=M.get();m.set(u,d),this.h?this.h.next=m:this.g=m,this.h=m}}var M=new O(()=>new Y,a=>a.reset());class Y{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let $,H=!1,b=new V,_=()=>{const a=Promise.resolve(void 0);$=()=>{a.then(v)}};function v(){for(var a;a=Q();){try{a.h.call(a.g)}catch(d){F(d)}var u=M;u.j(a),u.h<100&&(u.h++,a.next=u.g,u.g=a)}H=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var C=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};o.addEventListener("test",d,u),o.removeEventListener("test",d,u)}catch{}return a}();function E(a){return/^[\s\xa0]*$/.test(a)}function Ue(a,u){A.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,u)}p(Ue,A),Ue.prototype.init=function(a,u){const d=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget,u||(d=="mouseover"?u=a.fromElement:d=="mouseout"&&(u=a.toElement)),this.relatedTarget=u,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&Ue.Z.h.call(this)},Ue.prototype.h=function(){Ue.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var tt="closure_listenable_"+(Math.random()*1e6|0),We=0;function Pe(a,u,d,m,x){this.listener=a,this.proxy=null,this.src=u,this.type=d,this.capture=!!m,this.ha=x,this.key=++We,this.da=this.fa=!1}function Ee(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function mt(a,u,d){for(const m in a)u.call(d,a[m],m,a)}function Ot(a,u){for(const d in a)u.call(void 0,a[d],d,a)}function _t(a){const u={};for(const d in a)u[d]=a[d];return u}const nt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xt(a,u){let d,m;for(let x=1;x<arguments.length;x++){m=arguments[x];for(d in m)a[d]=m[d];for(let k=0;k<nt.length;k++)d=nt[k],Object.prototype.hasOwnProperty.call(m,d)&&(a[d]=m[d])}}function Z(a){this.src=a,this.g={},this.h=0}Z.prototype.add=function(a,u,d,m,x){const k=a.toString();a=this.g[k],a||(a=this.g[k]=[],this.h++);const ee=W(a,u,m,x);return ee>-1?(u=a[ee],d||(u.fa=!1)):(u=new Pe(u,this.src,k,!!m,x),u.fa=d,a.push(u)),u};function N(a,u){const d=u.type;if(d in a.g){var m=a.g[d],x=Array.prototype.indexOf.call(m,u,void 0),k;(k=x>=0)&&Array.prototype.splice.call(m,x,1),k&&(Ee(u),a.g[d].length==0&&(delete a.g[d],a.h--))}}function W(a,u,d,m){for(let x=0;x<a.length;++x){const k=a[x];if(!k.da&&k.listener==u&&k.capture==!!d&&k.ha==m)return x}return-1}var S="closure_lm_"+(Math.random()*1e6|0),q={};function U(a,u,d,m,x){if(Array.isArray(u)){for(let k=0;k<u.length;k++)U(a,u[k],d,m,x);return null}return d=te(d),a&&a[tt]?a.J(u,d,l(m)?!!m.capture:!1,x):ie(a,u,d,!1,m,x)}function ie(a,u,d,m,x,k){if(!u)throw Error("Invalid event type");const ee=l(x)?!!x.capture:!!x;let we=j(a);if(we||(a[S]=we=new Z(a)),d=we.add(u,d,m,ee,k),d.proxy)return d;if(m=_e(),d.proxy=m,m.src=a,m.listener=d,a.addEventListener)C||(x=ee),x===void 0&&(x=!1),a.addEventListener(u.toString(),m,x);else if(a.attachEvent)a.attachEvent(P(u.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return d}function _e(){function a(d){return u.call(a.src,a.listener,d)}const u=B;return a}function y(a,u,d,m,x){if(Array.isArray(u))for(var k=0;k<u.length;k++)y(a,u[k],d,m,x);else m=l(m)?!!m.capture:!!m,d=te(d),a&&a[tt]?(a=a.i,k=String(u).toString(),k in a.g&&(u=a.g[k],d=W(u,d,m,x),d>-1&&(Ee(u[d]),Array.prototype.splice.call(u,d,1),u.length==0&&(delete a.g[k],a.h--)))):a&&(a=j(a))&&(u=a.g[u.toString()],a=-1,u&&(a=W(u,d,m,x)),(d=a>-1?u[a]:null)&&T(d))}function T(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[tt])N(u.i,a);else{var d=a.type,m=a.proxy;u.removeEventListener?u.removeEventListener(d,m,a.capture):u.detachEvent?u.detachEvent(P(d),m):u.addListener&&u.removeListener&&u.removeListener(m),(d=j(u))?(N(d,a),d.h==0&&(d.src=null,u[S]=null)):Ee(a)}}}function P(a){return a in q?q[a]:q[a]="on"+a}function B(a,u){if(a.da)a=!0;else{u=new Ue(u,this);const d=a.listener,m=a.ha||a.src;a.fa&&T(a),a=d.call(m,u)}return a}function j(a){return a=a[S],a instanceof Z?a:null}var L="__closure_events_fn_"+(Math.random()*1e9>>>0);function te(a){return typeof a=="function"?a:(a[L]||(a[L]=function(u){return a.handleEvent(u)}),a[L])}function X(){R.call(this),this.i=new Z(this),this.M=this,this.G=null}p(X,R),X.prototype[tt]=!0,X.prototype.removeEventListener=function(a,u,d,m){y(this,a,u,d,m)};function J(a,u){var d,m=a.G;if(m)for(d=[];m;m=m.G)d.push(m);if(a=a.M,m=u.type||u,typeof u=="string")u=new A(u,a);else if(u instanceof A)u.target=u.target||a;else{var x=u;u=new A(m,a),Xt(u,x)}x=!0;let k,ee;if(d)for(ee=d.length-1;ee>=0;ee--)k=u.g=d[ee],x=K(k,m,!0,u)&&x;if(k=u.g=a,x=K(k,m,!0,u)&&x,x=K(k,m,!1,u)&&x,d)for(ee=0;ee<d.length;ee++)k=u.g=d[ee],x=K(k,m,!1,u)&&x}X.prototype.N=function(){if(X.Z.N.call(this),this.i){var a=this.i;for(const u in a.g){const d=a.g[u];for(let m=0;m<d.length;m++)Ee(d[m]);delete a.g[u],a.h--}}this.G=null},X.prototype.J=function(a,u,d,m){return this.i.add(String(a),u,!1,d,m)},X.prototype.K=function(a,u,d,m){return this.i.add(String(a),u,!0,d,m)};function K(a,u,d,m){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();let x=!0;for(let k=0;k<u.length;++k){const ee=u[k];if(ee&&!ee.da&&ee.capture==d){const we=ee.listener,st=ee.ha||ee.src;ee.fa&&N(a.i,ee),x=we.call(st,m)!==!1&&x}}return x&&!m.defaultPrevented}function ce(a,u){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(u)>2147483647?-1:o.setTimeout(a,u||0)}function se(a){a.g=ce(()=>{a.g=null,a.i&&(a.i=!1,se(a))},a.l);const u=a.h;a.h=null,a.m.apply(null,u)}class ue extends R{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:se(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function he(a){R.call(this),this.h=a,this.g={}}p(he,R);var Te=[];function Oe(a){mt(a.g,function(u,d){this.g.hasOwnProperty(d)&&T(u)},a),a.g={}}he.prototype.N=function(){he.Z.N.call(this),Oe(this)},he.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ce=o.JSON.stringify,yt=o.JSON.parse,vt=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Ut(){}function $t(){}var Zt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ir(){A.call(this,"d")}p(ir,A);function ht(){A.call(this,"c")}p(ht,A);var ot={},Qr=null;function Cs(){return Qr=Qr||new X}ot.Ia="serverreachability";function rh(a){A.call(this,ot.Ia,a)}p(rh,A);function Yr(a){const u=Cs();J(u,new rh(u))}ot.STAT_EVENT="statevent";function ih(a,u){A.call(this,ot.STAT_EVENT,a),this.stat=u}p(ih,A);function xt(a){const u=Cs();J(u,new ih(u,a))}ot.Ja="timingevent";function oh(a,u){A.call(this,ot.Ja,a),this.size=u}p(oh,A);function Jr(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},u)}function Xr(){this.g=!0}Xr.prototype.ua=function(){this.g=!1};function Ly(a,u,d,m,x,k){a.info(function(){if(a.g)if(k){var ee="",we=k.split("&");for(let Me=0;Me<we.length;Me++){var st=we[Me].split("=");if(st.length>1){const at=st[0];st=st[1];const pn=at.split("_");ee=pn.length>=2&&pn[1]=="type"?ee+(at+"="+st+"&"):ee+(at+"=redacted&")}}}else ee=null;else ee=k;return"XMLHTTP REQ ("+m+") [attempt "+x+"]: "+u+`
`+d+`
`+ee})}function Fy(a,u,d,m,x,k,ee){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+x+"]: "+u+`
`+d+`
`+k+" "+ee})}function or(a,u,d,m){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+$y(a,d)+(m?" "+m:"")})}function Uy(a,u){a.info(function(){return"TIMEOUT: "+u})}Xr.prototype.info=function(){};function $y(a,u){if(!a.g)return u;if(!u)return null;try{const k=JSON.parse(u);if(k){for(a=0;a<k.length;a++)if(Array.isArray(k[a])){var d=k[a];if(!(d.length<2)){var m=d[1];if(Array.isArray(m)&&!(m.length<1)){var x=m[0];if(x!="noop"&&x!="stop"&&x!="close")for(let ee=1;ee<m.length;ee++)m[ee]=""}}}}return Ce(k)}catch{return u}}var lo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ah={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},lh;function cl(){}p(cl,Ut),cl.prototype.g=function(){return new XMLHttpRequest},lh=new cl;function Zr(a){return encodeURIComponent(String(a))}function By(a){var u=1;a=a.split(":");const d=[];for(;u>0&&a.length;)d.push(a.shift()),u--;return a.length&&d.push(a.join(":")),d}function Kn(a,u,d,m){this.j=a,this.i=u,this.l=d,this.S=m||1,this.V=new he(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ch}function ch(){this.i=null,this.g="",this.h=!1}var uh={},ul={};function hl(a,u,d){a.M=1,a.A=uo(dn(u)),a.u=d,a.R=!0,hh(a,null)}function hh(a,u){a.F=Date.now(),co(a),a.B=dn(a.A);var d=a.B,m=a.S;Array.isArray(m)||(m=[String(m)]),bh(d.i,"t",m),a.C=0,d=a.j.L,a.h=new ch,a.g=jh(a.j,d?u:null,!a.u),a.P>0&&(a.O=new ue(h(a.Y,a,a.g),a.P)),u=a.V,d=a.g,m=a.ba;var x="readystatechange";Array.isArray(x)||(x&&(Te[0]=x.toString()),x=Te);for(let k=0;k<x.length;k++){const ee=U(d,x[k],m||u.handleEvent,!1,u.h||u);if(!ee)break;u.g[ee.key]=ee}u=a.J?_t(a.J):{},a.u?(a.v||(a.v="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,u)):(a.v="GET",a.g.ea(a.B,a.v,null,u)),Yr(),Ly(a.i,a.v,a.B,a.l,a.S,a.u)}Kn.prototype.ba=function(a){a=a.target;const u=this.O;u&&Jn(a)==3?u.j():this.Y(a)},Kn.prototype.Y=function(a){try{if(a==this.g)e:{const we=Jn(this.g),st=this.g.ya(),Me=this.g.ca();if(!(we<3)&&(we!=3||this.g&&(this.h.h||this.g.la()||kh(this.g)))){this.K||we!=4||st==7||(st==8||Me<=0?Yr(3):Yr(2)),fl(this);var u=this.g.ca();this.X=u;var d=jy(this);if(this.o=u==200,Fy(this.i,this.v,this.B,this.l,this.S,we,u),this.o){if(this.U&&!this.L){t:{if(this.g){var m,x=this.g;if((m=x.g?x.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(m)){var k=m;break t}}k=null}if(a=k)or(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,dl(this,a);else{this.o=!1,this.m=3,xt(12),Ps(this),ei(this);break e}}if(this.R){a=!0;let at;for(;!this.K&&this.C<d.length;)if(at=Hy(this,d),at==ul){we==4&&(this.m=4,xt(14),a=!1),or(this.i,this.l,null,"[Incomplete Response]");break}else if(at==uh){this.m=4,xt(15),or(this.i,this.l,d,"[Invalid Chunk]"),a=!1;break}else or(this.i,this.l,at,null),dl(this,at);if(fh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||d.length!=0||this.h.h||(this.m=1,xt(16),a=!1),this.o=this.o&&a,!a)or(this.i,this.l,d,"[Invalid Chunked Response]"),Ps(this),ei(this);else if(d.length>0&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.aa&&!ee.P&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),El(ee),ee.P=!0,xt(11))}}else or(this.i,this.l,d,null),dl(this,d);we==4&&Ps(this),this.o&&!this.K&&(we==4?Fh(this.j,this):(this.o=!1,co(this)))}else sv(this.g),u==400&&d.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),Ps(this),ei(this)}}}catch{}finally{}};function jy(a){if(!fh(a))return a.g.la();const u=kh(a.g);if(u==="")return"";let d="";const m=u.length,x=Jn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Ps(a),ei(a),"";a.h.i=new o.TextDecoder}for(let k=0;k<m;k++)a.h.h=!0,d+=a.h.i.decode(u[k],{stream:!(x&&k==m-1)});return u.length=0,a.h.g+=d,a.C=0,a.h.g}function fh(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function Hy(a,u){var d=a.C,m=u.indexOf(`
`,d);return m==-1?ul:(d=Number(u.substring(d,m)),isNaN(d)?uh:(m+=1,m+d>u.length?ul:(u=u.slice(m,m+d),a.C=m+d,u)))}Kn.prototype.cancel=function(){this.K=!0,Ps(this)};function co(a){a.T=Date.now()+a.H,dh(a,a.H)}function dh(a,u){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Jr(h(a.aa,a),u)}function fl(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Kn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(Uy(this.i,this.B),this.M!=2&&(Yr(),xt(17)),Ps(this),this.m=2,ei(this)):dh(this,this.T-a)};function ei(a){a.j.I==0||a.K||Fh(a.j,a)}function Ps(a){fl(a);var u=a.O;u&&typeof u.dispose=="function"&&u.dispose(),a.O=null,Oe(a.V),a.g&&(u=a.g,a.g=null,u.abort(),u.dispose())}function dl(a,u){try{var d=a.j;if(d.I!=0&&(d.g==a||pl(d.h,a))){if(!a.L&&pl(d.h,a)&&d.I==3){try{var m=d.Ba.g.parse(u)}catch{m=null}if(Array.isArray(m)&&m.length==3){var x=m;if(x[0]==0){e:if(!d.v){if(d.g)if(d.g.F+3e3<a.F)mo(d),po(d);else break e;wl(d),xt(18)}}else d.xa=x[1],0<d.xa-d.K&&x[2]<37500&&d.F&&d.A==0&&!d.C&&(d.C=Jr(h(d.Va,d),6e3));mh(d.h)<=1&&d.ta&&(d.ta=void 0)}else ks(d,11)}else if((a.L||d.g==a)&&mo(d),!E(u))for(x=d.Ba.g.parse(u),u=0;u<x.length;u++){let Me=x[u];const at=Me[0];if(!(at<=d.K))if(d.K=at,Me=Me[1],d.I==2)if(Me[0]=="c"){d.M=Me[1],d.ba=Me[2];const pn=Me[3];pn!=null&&(d.ka=pn,d.j.info("VER="+d.ka));const Ds=Me[4];Ds!=null&&(d.za=Ds,d.j.info("SVER="+d.za));const Xn=Me[5];Xn!=null&&typeof Xn=="number"&&Xn>0&&(m=1.5*Xn,d.O=m,d.j.info("backChannelRequestTimeoutMs_="+m)),m=d;const Zn=a.g;if(Zn){const yo=Zn.g?Zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yo){var k=m.h;k.g||yo.indexOf("spdy")==-1&&yo.indexOf("quic")==-1&&yo.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(gl(k,k.h),k.h=null))}if(m.G){const Tl=Zn.g?Zn.g.getResponseHeader("X-HTTP-Session-Id"):null;Tl&&(m.wa=Tl,je(m.J,m.G,Tl))}}d.I=3,d.l&&d.l.ra(),d.aa&&(d.T=Date.now()-a.F,d.j.info("Handshake RTT: "+d.T+"ms")),m=d;var ee=a;if(m.na=Bh(m,m.L?m.ba:null,m.W),ee.L){_h(m.h,ee);var we=ee,st=m.O;st&&(we.H=st),we.D&&(fl(we),co(we)),m.g=ee}else Mh(m);d.i.length>0&&go(d)}else Me[0]!="stop"&&Me[0]!="close"||ks(d,7);else d.I==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?ks(d,7):vl(d):Me[0]!="noop"&&d.l&&d.l.qa(Me),d.A=0)}}Yr(4)}catch{}}var qy=class{constructor(a,u){this.g=a,this.map=u}};function ph(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function gh(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function mh(a){return a.h?1:a.g?a.g.size:0}function pl(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function gl(a,u){a.g?a.g.add(u):a.h=u}function _h(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}ph.prototype.cancel=function(){if(this.i=yh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function yh(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let u=a.i;for(const d of a.g.values())u=u.concat(d.G);return u}return w(a.i)}var vh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zy(a,u){if(a){a=a.split("&");for(let d=0;d<a.length;d++){const m=a[d].indexOf("=");let x,k=null;m>=0?(x=a[d].substring(0,m),k=a[d].substring(m+1)):x=a[d],u(x,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function Qn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let u;a instanceof Qn?(this.l=a.l,ti(this,a.j),this.o=a.o,this.g=a.g,ni(this,a.u),this.h=a.h,ml(this,Ah(a.i)),this.m=a.m):a&&(u=String(a).match(vh))?(this.l=!1,ti(this,u[1]||"",!0),this.o=si(u[2]||""),this.g=si(u[3]||"",!0),ni(this,u[4]),this.h=si(u[5]||"",!0),ml(this,u[6]||"",!0),this.m=si(u[7]||"")):(this.l=!1,this.i=new ii(null,this.l))}Qn.prototype.toString=function(){const a=[];var u=this.j;u&&a.push(ri(u,wh,!0),":");var d=this.g;return(d||u=="file")&&(a.push("//"),(u=this.o)&&a.push(ri(u,wh,!0),"@"),a.push(Zr(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,d!=null&&a.push(":",String(d))),(d=this.h)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(ri(d,d.charAt(0)=="/"?Ky:Wy,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",ri(d,Yy)),a.join("")},Qn.prototype.resolve=function(a){const u=dn(this);let d=!!a.j;d?ti(u,a.j):d=!!a.o,d?u.o=a.o:d=!!a.g,d?u.g=a.g:d=a.u!=null;var m=a.h;if(d)ni(u,a.u);else if(d=!!a.h){if(m.charAt(0)!="/")if(this.g&&!this.h)m="/"+m;else{var x=u.h.lastIndexOf("/");x!=-1&&(m=u.h.slice(0,x+1)+m)}if(x=m,x==".."||x==".")m="";else if(x.indexOf("./")!=-1||x.indexOf("/.")!=-1){m=x.lastIndexOf("/",0)==0,x=x.split("/");const k=[];for(let ee=0;ee<x.length;){const we=x[ee++];we=="."?m&&ee==x.length&&k.push(""):we==".."?((k.length>1||k.length==1&&k[0]!="")&&k.pop(),m&&ee==x.length&&k.push("")):(k.push(we),m=!0)}m=k.join("/")}else m=x}return d?u.h=m:d=a.i.toString()!=="",d?ml(u,Ah(a.i)):d=!!a.m,d&&(u.m=a.m),u};function dn(a){return new Qn(a)}function ti(a,u,d){a.j=d?si(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function ni(a,u){if(u){if(u=Number(u),isNaN(u)||u<0)throw Error("Bad port number "+u);a.u=u}else a.u=null}function ml(a,u,d){u instanceof ii?(a.i=u,Jy(a.i,a.l)):(d||(u=ri(u,Qy)),a.i=new ii(u,a.l))}function je(a,u,d){a.i.set(u,d)}function uo(a){return je(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function si(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ri(a,u,d){return typeof a=="string"?(a=encodeURI(a).replace(u,Gy),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Gy(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var wh=/[#\/\?@]/g,Wy=/[#\?:]/g,Ky=/[#\?]/g,Qy=/[#\?@]/g,Yy=/#/g;function ii(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function xs(a){a.g||(a.g=new Map,a.h=0,a.i&&zy(a.i,function(u,d){a.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}t=ii.prototype,t.add=function(a,u){xs(this),this.i=null,a=ar(this,a);let d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(u),this.h+=1,this};function Eh(a,u){xs(a),u=ar(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function Th(a,u){return xs(a),u=ar(a,u),a.g.has(u)}t.forEach=function(a,u){xs(this),this.g.forEach(function(d,m){d.forEach(function(x){a.call(u,x,m,this)},this)},this)};function Ih(a,u){xs(a);let d=[];if(typeof u=="string")Th(a,u)&&(d=d.concat(a.g.get(ar(a,u))));else for(a=Array.from(a.g.values()),u=0;u<a.length;u++)d=d.concat(a[u]);return d}t.set=function(a,u){return xs(this),this.i=null,a=ar(this,a),Th(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},t.get=function(a,u){return a?(a=Ih(this,a),a.length>0?String(a[0]):u):u};function bh(a,u,d){Eh(a,u),d.length>0&&(a.i=null,a.g.set(ar(a,u),w(d)),a.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],u=Array.from(this.g.keys());for(let m=0;m<u.length;m++){var d=u[m];const x=Zr(d);d=Ih(this,d);for(let k=0;k<d.length;k++){let ee=x;d[k]!==""&&(ee+="="+Zr(d[k])),a.push(ee)}}return this.i=a.join("&")};function Ah(a){const u=new ii;return u.i=a.i,a.g&&(u.g=new Map(a.g),u.h=a.h),u}function ar(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function Jy(a,u){u&&!a.j&&(xs(a),a.i=null,a.g.forEach(function(d,m){const x=m.toLowerCase();m!=x&&(Eh(this,m),bh(this,x,d))},a)),a.j=u}function Xy(a,u){const d=new Xr;if(o.Image){const m=new Image;m.onload=f(Yn,d,"TestLoadImage: loaded",!0,u,m),m.onerror=f(Yn,d,"TestLoadImage: error",!1,u,m),m.onabort=f(Yn,d,"TestLoadImage: abort",!1,u,m),m.ontimeout=f(Yn,d,"TestLoadImage: timeout",!1,u,m),o.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else u(!1)}function Zy(a,u){const d=new Xr,m=new AbortController,x=setTimeout(()=>{m.abort(),Yn(d,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:m.signal}).then(k=>{clearTimeout(x),k.ok?Yn(d,"TestPingServer: ok",!0,u):Yn(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(x),Yn(d,"TestPingServer: error",!1,u)})}function Yn(a,u,d,m,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),m(d)}catch{}}function ev(){this.g=new vt}function _l(a){this.i=a.Sb||null,this.h=a.ab||!1}p(_l,Ut),_l.prototype.g=function(){return new ho(this.i,this.h)};function ho(a,u){X.call(this),this.H=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(ho,X),t=ho.prototype,t.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=u,this.readyState=1,ai(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const u={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(u.body=a),(this.H||o).fetch(new Request(this.D,u)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,oi(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ai(this)),this.g&&(this.readyState=3,ai(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Rh(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Rh(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.B.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?oi(this):ai(this),this.readyState==3&&Rh(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,oi(this))},t.Na=function(a){this.g&&(this.response=a,oi(this))},t.ga=function(){this.g&&oi(this)};function oi(a){a.readyState=4,a.l=null,a.j=null,a.B=null,ai(a)}t.setRequestHeader=function(a,u){this.A.append(a,u)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=u.next();return a.join(`\r
`)};function ai(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ho.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Sh(a){let u="";return mt(a,function(d,m){u+=m,u+=":",u+=d,u+=`\r
`}),u}function yl(a,u,d){e:{for(m in d){var m=!1;break e}m=!0}m||(d=Sh(d),typeof a=="string"?d!=null&&Zr(d):je(a,u,d))}function Ke(a){X.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ke,X);var tv=/^https?$/i,nv=["POST","PUT"];t=Ke.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,u,d,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():lh.g(),this.g.onreadystatechange=g(h(this.Ca,this));try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(k){Ch(this,k);return}if(a=d||"",d=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var x in m)d.set(x,m[x]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const k of m.keys())d.set(k,m.get(k));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(d.keys()).find(k=>k.toLowerCase()=="content-type"),x=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(nv,u,void 0)>=0)||m||x||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[k,ee]of d)this.g.setRequestHeader(k,ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(k){Ch(this,k)}};function Ch(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.o=5,Ph(a),fo(a)}function Ph(a){a.A||(a.A=!0,J(a,"complete"),J(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,J(this,"complete"),J(this,"abort"),fo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fo(this,!0)),Ke.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?xh(this):this.Xa())},t.Xa=function(){xh(this)};function xh(a){if(a.h&&typeof i<"u"){if(a.v&&Jn(a)==4)setTimeout(a.Ca.bind(a),0);else if(J(a,"readystatechange"),Jn(a)==4){a.h=!1;try{const k=a.ca();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var d;if(!(d=u)){var m;if(m=k===0){let ee=String(a.D).match(vh)[1]||null;!ee&&o.self&&o.self.location&&(ee=o.self.location.protocol.slice(0,-1)),m=!tv.test(ee?ee.toLowerCase():"")}d=m}if(d)J(a,"complete"),J(a,"success");else{a.o=6;try{var x=Jn(a)>2?a.g.statusText:""}catch{x=""}a.l=x+" ["+a.ca()+"]",Ph(a)}}finally{fo(a)}}}}function fo(a,u){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const d=a.g;a.g=null,u||J(a,"ready");try{d.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Jn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Jn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),yt(u)}};function kh(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function sv(a){const u={};a=(a.g&&Jn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(E(a[m]))continue;var d=By(a[m]);const x=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const k=u[x]||[];u[x]=k,k.push(d)}Ot(u,function(m){return m.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function li(a,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||u}function Dh(a){this.za=0,this.i=[],this.j=new Xr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=li("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=li("baseRetryDelayMs",5e3,a),this.Za=li("retryDelaySeedMs",1e4,a),this.Ta=li("forwardChannelMaxRetries",2,a),this.va=li("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new ph(a&&a.concurrentRequestLimit),this.Ba=new ev,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Dh.prototype,t.ka=8,t.I=1,t.connect=function(a,u,d,m){xt(0),this.W=a,this.H=u||{},d&&m!==void 0&&(this.H.OSID=d,this.H.OAID=m),this.F=this.X,this.J=Bh(this,null,this.W),go(this)};function vl(a){if(Nh(a),a.I==3){var u=a.V++,d=dn(a.J);if(je(d,"SID",a.M),je(d,"RID",u),je(d,"TYPE","terminate"),ci(a,d),u=new Kn(a,a.j,u),u.M=2,u.A=uo(dn(d)),d=!1,o.navigator&&o.navigator.sendBeacon)try{d=o.navigator.sendBeacon(u.A.toString(),"")}catch{}!d&&o.Image&&(new Image().src=u.A,d=!0),d||(u.g=jh(u.j,null),u.g.ea(u.A)),u.F=Date.now(),co(u)}$h(a)}function po(a){a.g&&(El(a),a.g.cancel(),a.g=null)}function Nh(a){po(a),a.v&&(o.clearTimeout(a.v),a.v=null),mo(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function go(a){if(!gh(a.h)&&!a.m){a.m=!0;var u=a.Ea;$||_(),H||($(),H=!0),b.add(u,a),a.D=0}}function rv(a,u){return mh(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=u.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Jr(h(a.Ea,a,u),Uh(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const x=new Kn(this,this.j,a);let k=this.o;if(this.U&&(k?(k=_t(k),Xt(k,this.U)):k=this.U),this.u!==null||this.R||(x.J=k,k=null),this.S)e:{for(var u=0,d=0;d<this.i.length;d++){t:{var m=this.i[d];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(u+=m,u>4096){u=d;break e}if(u===4096||d===this.i.length-1){u=d+1;break e}}u=1e3}else u=1e3;u=Oh(this,x,u),d=dn(this.J),je(d,"RID",a),je(d,"CVER",22),this.G&&je(d,"X-HTTP-Session-Id",this.G),ci(this,d),k&&(this.R?u="headers="+Zr(Sh(k))+"&"+u:this.u&&yl(d,this.u,k)),gl(this.h,x),this.Ra&&je(d,"TYPE","init"),this.S?(je(d,"$req",u),je(d,"SID","null"),x.U=!0,hl(x,d,null)):hl(x,d,u),this.I=2}}else this.I==3&&(a?Vh(this,a):this.i.length==0||gh(this.h)||Vh(this))};function Vh(a,u){var d;u?d=u.l:d=a.V++;const m=dn(a.J);je(m,"SID",a.M),je(m,"RID",d),je(m,"AID",a.K),ci(a,m),a.u&&a.o&&yl(m,a.u,a.o),d=new Kn(a,a.j,d,a.D+1),a.u===null&&(d.J=a.o),u&&(a.i=u.G.concat(a.i)),u=Oh(a,d,1e3),d.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),gl(a.h,d),hl(d,m,u)}function ci(a,u){a.H&&mt(a.H,function(d,m){je(u,m,d)}),a.l&&mt({},function(d,m){je(u,m,d)})}function Oh(a,u,d){d=Math.min(a.i.length,d);const m=a.l?h(a.l.Ka,a.l,a):null;e:{var x=a.i;let we=-1;for(;;){const st=["count="+d];we==-1?d>0?(we=x[0].g,st.push("ofs="+we)):we=0:st.push("ofs="+we);let Me=!0;for(let at=0;at<d;at++){var k=x[at].g;const pn=x[at].map;if(k-=we,k<0)we=Math.max(0,x[at].g-100),Me=!1;else try{k="req"+k+"_"||"";try{var ee=pn instanceof Map?pn:Object.entries(pn);for(const[Ds,Xn]of ee){let Zn=Xn;l(Xn)&&(Zn=Ce(Xn)),st.push(k+Ds+"="+encodeURIComponent(Zn))}}catch(Ds){throw st.push(k+"type="+encodeURIComponent("_badmap")),Ds}}catch{m&&m(pn)}}if(Me){ee=st.join("&");break e}}ee=void 0}return a=a.i.splice(0,d),u.G=a,ee}function Mh(a){if(!a.g&&!a.v){a.Y=1;var u=a.Da;$||_(),H||($(),H=!0),b.add(u,a),a.A=0}}function wl(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Jr(h(a.Da,a),Uh(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Lh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Jr(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),po(this),Lh(this))};function El(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Lh(a){a.g=new Kn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var u=dn(a.na);je(u,"RID","rpc"),je(u,"SID",a.M),je(u,"AID",a.K),je(u,"CI",a.F?"0":"1"),!a.F&&a.ia&&je(u,"TO",a.ia),je(u,"TYPE","xmlhttp"),ci(a,u),a.u&&a.o&&yl(u,a.u,a.o),a.O&&(a.g.H=a.O);var d=a.g;a=a.ba,d.M=1,d.A=uo(dn(u)),d.u=null,d.R=!0,hh(d,a)}t.Va=function(){this.C!=null&&(this.C=null,po(this),wl(this),xt(19))};function mo(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Fh(a,u){var d=null;if(a.g==u){mo(a),El(a),a.g=null;var m=2}else if(pl(a.h,u))d=u.G,_h(a.h,u),m=1;else return;if(a.I!=0){if(u.o)if(m==1){d=u.u?u.u.length:0,u=Date.now()-u.F;var x=a.D;m=Cs(),J(m,new oh(m,d)),go(a)}else Mh(a);else if(x=u.m,x==3||x==0&&u.X>0||!(m==1&&rv(a,u)||m==2&&wl(a)))switch(d&&d.length>0&&(u=a.h,u.i=u.i.concat(d)),x){case 1:ks(a,5);break;case 4:ks(a,10);break;case 3:ks(a,6);break;default:ks(a,2)}}}function Uh(a,u){let d=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(d*=2),d*u}function ks(a,u){if(a.j.info("Error code "+u),u==2){var d=h(a.bb,a),m=a.Ua;const x=!m;m=new Qn(m||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ti(m,"https"),uo(m),x?Xy(m.toString(),d):Zy(m.toString(),d)}else xt(2);a.I=0,a.l&&a.l.pa(u),$h(a),Nh(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function $h(a){if(a.I=0,a.ja=[],a.l){const u=yh(a.h);(u.length!=0||a.i.length!=0)&&(D(a.ja,u),D(a.ja,a.i),a.h.i.length=0,w(a.i),a.i.length=0),a.l.oa()}}function Bh(a,u,d){var m=d instanceof Qn?dn(d):new Qn(d);if(m.g!="")u&&(m.g=u+"."+m.g),ni(m,m.u);else{var x=o.location;m=x.protocol,u=u?u+"."+x.hostname:x.hostname,x=+x.port;const k=new Qn(null);m&&ti(k,m),u&&(k.g=u),x&&ni(k,x),d&&(k.h=d),m=k}return d=a.G,u=a.wa,d&&u&&je(m,d,u),je(m,"VER",a.ka),ci(a,m),m}function jh(a,u,d){if(u&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Aa&&!a.ma?new Ke(new _l({ab:d})):new Ke(a.ma),u.Fa(a.L),u}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hh(){}t=Hh.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function _o(){}_o.prototype.g=function(a,u){return new Bt(a,u)};function Bt(a,u){X.call(this),this.g=new Dh(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.sa&&(a?a["X-WebChannel-Client-Profile"]=u.sa:a={"X-WebChannel-Client-Profile":u.sa}),this.g.U=a,(a=u&&u.Qb)&&!E(a)&&(this.g.u=a),this.A=u&&u.supportsCrossDomainXhr||!1,this.v=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!E(u)&&(this.g.G=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new lr(this)}p(Bt,X),Bt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){vl(this.g)},Bt.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.v&&(d={},d.__data__=Ce(a),a=d);u.i.push(new qy(u.Ya++,a)),u.I==3&&go(u)},Bt.prototype.N=function(){this.g.l=null,delete this.j,vl(this.g),delete this.g,Bt.Z.N.call(this)};function qh(a){ir.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){e:{for(const d in u){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}p(qh,ir);function zh(){ht.call(this),this.status=1}p(zh,ht);function lr(a){this.g=a}p(lr,Hh),lr.prototype.ra=function(){J(this.g,"a")},lr.prototype.qa=function(a){J(this.g,new qh(a))},lr.prototype.pa=function(a){J(this.g,new zh)},lr.prototype.oa=function(){J(this.g,"b")},_o.prototype.createWebChannel=_o.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,c_=function(){return new _o},l_=function(){return Cs()},a_=ot,Tc={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},lo.NO_ERROR=0,lo.TIMEOUT=8,lo.HTTP_ERROR=6,Fo=lo,ah.COMPLETE="complete",o_=ah,$t.EventType=Zt,Zt.OPEN="a",Zt.CLOSE="b",Zt.ERROR="c",Zt.MESSAGE="d",X.prototype.listen=X.prototype.J,gi=$t,Ke.prototype.listenOnce=Ke.prototype.K,Ke.prototype.getLastError=Ke.prototype.Ha,Ke.prototype.getLastErrorCode=Ke.prototype.ya,Ke.prototype.getStatus=Ke.prototype.ca,Ke.prototype.getResponseJson=Ke.prototype.La,Ke.prototype.getResponseText=Ke.prototype.la,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Fa,i_=Ke}).apply(typeof Io<"u"?Io:typeof self<"u"?self:typeof window<"u"?window:{});const Ad="@firebase/firestore",Rd="4.9.2";class Tt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tt.UNAUTHENTICATED=new Tt(null),Tt.GOOGLE_CREDENTIALS=new Tt("google-credentials-uid"),Tt.FIRST_PARTY=new Tt("first-party-uid"),Tt.MOCK_USER=new Tt("mock-user");let qr="12.3.0";const Ys=new $a("@firebase/firestore");function dr(){return Ys.logLevel}function oe(t,...e){if(Ys.logLevel<=Ie.DEBUG){const n=e.map(Au);Ys.debug(`Firestore (${qr}): ${t}`,...n)}}function zn(t,...e){if(Ys.logLevel<=Ie.ERROR){const n=e.map(Au);Ys.error(`Firestore (${qr}): ${t}`,...n)}}function Or(t,...e){if(Ys.logLevel<=Ie.WARN){const n=e.map(Au);Ys.warn(`Firestore (${qr}): ${t}`,...n)}}function Au(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function fe(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,u_(t,s,n)}function u_(t,e,n){let s=`FIRESTORE (${qr}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw zn(s),new Error(s)}function Ve(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||u_(e,r,s)}function me(t,e){return t}const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends fn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class gs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class h_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class q1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Tt.UNAUTHENTICATED))}shutdown(){}}class z1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class G1{constructor(e){this.t=e,this.currentUser=Tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ve(this.o===void 0,42304);let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new gs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new gs,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},l=c=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new gs)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ve(typeof s.accessToken=="string",31837,{l:s}),new h_(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ve(e===null||typeof e=="string",2055,{h:e}),new Tt(e)}}class W1{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Tt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class K1{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new W1(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Sd{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Q1{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,en(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ve(this.o===void 0,3512);const s=i=>{i.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,oe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Sd(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Sd(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Y1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}class Ru{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=Y1(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function be(t,e){return t<e?-1:t>e?1:0}function Ic(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return Wl(r)===Wl(i)?be(r,i):Wl(r)?1:-1}return be(t.length,e.length)}const J1=55296,X1=57343;function Wl(t){const e=t.charCodeAt(0);return e>=J1&&e<=X1}function Mr(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}const Cd="__name__";class _n{constructor(e,n,s){n===void 0?n=0:n>e.length&&fe(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&fe(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return _n.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _n?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=_n.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return be(e.length,n.length)}static compareSegments(e,n){const s=_n.isNumericId(e),r=_n.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?_n.extractNumericId(e).compare(_n.extractNumericId(n)):Ic(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ps.fromString(e.substring(4,e.length-2))}}class Be extends _n{construct(e,n,s){return new Be(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ae(z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const Z1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends _n{construct(e,n,s){return new dt(e,n,s)}static isValidIdentifier(e){return Z1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Cd}static keyField(){return new dt([Cd])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new ae(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new ae(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ae(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(s+=l,r++):(i(),r++)}if(i(),o)throw new ae(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(n)}static emptyPath(){return new dt([])}}class le{constructor(e){this.path=e}static fromPath(e){return new le(Be.fromString(e))}static fromName(e){return new le(Be.fromString(e).popFirst(5))}static empty(){return new le(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new Be(e.slice()))}}function f_(t,e,n){if(!n)throw new ae(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function eR(t,e,n,s){if(e===!0&&s===!0)throw new ae(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Pd(t){if(!le.isDocumentKey(t))throw new ae(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function xd(t){if(le.isDocumentKey(t))throw new ae(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function d_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Wa(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe(12329,{type:typeof t})}function $i(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ae(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Wa(t);throw new ae(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Ze(t,e){const n={typeString:t};return e&&(n.value=e),n}function to(t,e){if(!d_(t))throw new ae(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new ae(z.INVALID_ARGUMENT,n);return!0}const kd=-62135596800,Dd=1e6;class qe{static now(){return qe.fromMillis(Date.now())}static fromDate(e){return qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Dd);return new qe(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ae(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ae(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<kd)throw new ae(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Dd}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(to(e,qe._jsonSchema))return new qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-kd;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qe._jsonSchemaVersion="firestore/timestamp/1.0",qe._jsonSchema={type:Ze("string",qe._jsonSchemaVersion),seconds:Ze("number"),nanoseconds:Ze("number")};class ge{static fromTimestamp(e){return new ge(e)}static min(){return new ge(new qe(0,0))}static max(){return new ge(new qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Bi=-1;function tR(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=ge.fromTimestamp(s===1e9?new qe(n+1,0):new qe(n,s));return new Es(r,le.empty(),e)}function nR(t){return new Es(t.readTime,t.key,Bi)}class Es{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Es(ge.min(),le.empty(),Bi)}static max(){return new Es(ge.max(),le.empty(),Bi)}}function sR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=le.comparator(t.documentKey,e.documentKey),n!==0?n:be(t.largestBatchId,e.largestBatchId))}const rR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function zr(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==rR)throw t;oe("LocalStore","Unexpectedly lost primary lease")}class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,s)=>{n(e)})}static reject(e){return new G((n,s)=>{s(e)})}static waitFor(e){return new G((n,s)=>{let r=0,i=0,o=!1;e.forEach(l=>{++r,l.next(()=>{++i,o&&i===r&&n()},c=>s(c))}),o=!0,i===r&&n()})}static or(e){let n=G.resolve(!1);for(const s of e)n=n.next(r=>r?G.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new G((s,r)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next(f=>{o[h]=f,++l,l===i&&s(o)},f=>r(f))}})}static doWhile(e,n){return new G((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function oR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Gr(t){return t.name==="IndexedDbTransactionError"}class Ka{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ka.ce=-1;const Su=-1;function Qa(t){return t==null}function ha(t){return t===0&&1/t==-1/0}function aR(t){return typeof t=="number"&&Number.isInteger(t)&&!ha(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const p_="";function lR(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Nd(e)),e=cR(t.get(n),e);return Nd(e)}function cR(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case p_:n+="";break;default:n+=i}}return n}function Nd(t){return t+p_+""}function Vd(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function tr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function g_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Ge{constructor(e,n){this.comparator=e,this.root=n||ft.EMPTY}insert(e,n){return new Ge(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ft.BLACK,null,null))}remove(e){return new Ge(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ft.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bo(this.root,e,this.comparator,!1)}getReverseIterator(){return new bo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bo(this.root,e,this.comparator,!0)}}class bo{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ft{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??ft.RED,this.left=r??ft.EMPTY,this.right=i??ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new ft(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return ft.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fe(27949);return e+(this.isRed()?0:1)}}ft.EMPTY=null,ft.RED=!0,ft.BLACK=!1;ft.EMPTY=new class{constructor(){this.size=0}get key(){throw fe(57766)}get value(){throw fe(16141)}get color(){throw fe(16727)}get left(){throw fe(29726)}get right(){throw fe(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new ft(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class it{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Od(this.data.getIterator())}getIteratorFrom(e){return new Od(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof it)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new it(this.comparator);return n.data=e,n}}class Od{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class rn{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new rn([])}unionWith(e){let n=new it(dt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Mr(this.fields,e.fields,(n,s)=>n.isEqual(s))}}class m_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new m_("Invalid base64 string: "+i):i}}(e);return new gt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gt.EMPTY_BYTE_STRING=new gt("");const uR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ts(t){if(Ve(!!t,39018),typeof t=="string"){let e=0;const n=uR.exec(t);if(Ve(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ye(t.seconds),nanos:Ye(t.nanos)}}function Ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Is(t){return typeof t=="string"?gt.fromBase64String(t):gt.fromUint8Array(t)}const __="server_timestamp",y_="__type__",v_="__previous_value__",w_="__local_write_time__";function Cu(t){return(t?.mapValue?.fields||{})[y_]?.stringValue===__}function Ya(t){const e=t.mapValue.fields[v_];return Cu(e)?Ya(e):e}function ji(t){const e=Ts(t.mapValue.fields[w_].timestampValue);return new qe(e.seconds,e.nanos)}class hR{constructor(e,n,s,r,i,o,l,c,h,f){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=f}}const fa="(default)";class Hi{constructor(e,n){this.projectId=e,this.database=n||fa}static empty(){return new Hi("","")}get isDefaultDatabase(){return this.database===fa}isEqual(e){return e instanceof Hi&&e.projectId===this.projectId&&e.database===this.database}}const E_="__type__",fR="__max__",Ao={mapValue:{}},T_="__vector__",da="value";function bs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cu(t)?4:pR(t)?9007199254740991:dR(t)?10:11:fe(28295,{value:t})}function kn(t,e){if(t===e)return!0;const n=bs(t);if(n!==bs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ji(t).isEqual(ji(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Ts(r.timestampValue),l=Ts(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Is(r.bytesValue).isEqual(Is(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Ye(r.geoPointValue.latitude)===Ye(i.geoPointValue.latitude)&&Ye(r.geoPointValue.longitude)===Ye(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Ye(r.integerValue)===Ye(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Ye(r.doubleValue),l=Ye(i.doubleValue);return o===l?ha(o)===ha(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Mr(t.arrayValue.values||[],e.arrayValue.values||[],kn);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Vd(o)!==Vd(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!kn(o[c],l[c])))return!1;return!0}(t,e);default:return fe(52216,{left:t})}}function qi(t,e){return(t.values||[]).find(n=>kn(n,e))!==void 0}function Lr(t,e){if(t===e)return 0;const n=bs(t),s=bs(e);if(n!==s)return be(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return be(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Ye(i.integerValue||i.doubleValue),c=Ye(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Md(t.timestampValue,e.timestampValue);case 4:return Md(ji(t),ji(e));case 5:return Ic(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Is(i),c=Is(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let h=0;h<l.length&&h<c.length;h++){const f=be(l[h],c[h]);if(f!==0)return f}return be(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=be(Ye(i.latitude),Ye(o.latitude));return l!==0?l:be(Ye(i.longitude),Ye(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ld(t.arrayValue,e.arrayValue);case 10:return function(i,o){const l=i.fields||{},c=o.fields||{},h=l[da]?.arrayValue,f=c[da]?.arrayValue,p=be(h?.values?.length||0,f?.values?.length||0);return p!==0?p:Ld(h,f)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ao.mapValue&&o===Ao.mapValue)return 0;if(i===Ao.mapValue)return 1;if(o===Ao.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),h=o.fields||{},f=Object.keys(h);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const g=Ic(c[p],f[p]);if(g!==0)return g;const w=Lr(l[c[p]],h[f[p]]);if(w!==0)return w}return be(c.length,f.length)}(t.mapValue,e.mapValue);default:throw fe(23264,{he:n})}}function Md(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return be(t,e);const n=Ts(t),s=Ts(e),r=be(n.seconds,s.seconds);return r!==0?r:be(n.nanos,s.nanos)}function Ld(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=Lr(n[r],s[r]);if(i)return i}return be(n.length,s.length)}function Fr(t){return bc(t)}function bc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=Ts(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Is(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return le.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=bc(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${bc(n.fields[o])}`;return r+"}"}(t.mapValue):fe(61005,{value:t})}function Uo(t){switch(bs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ya(t);return e?16+Uo(e):16;case 5:return 2*t.stringValue.length;case 6:return Is(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+Uo(i),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return tr(s.fields,(i,o)=>{r+=i.length+Uo(o)}),r}(t.mapValue);default:throw fe(13486,{value:t})}}function Fd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ac(t){return!!t&&"integerValue"in t}function Pu(t){return!!t&&"arrayValue"in t}function Ud(t){return!!t&&"nullValue"in t}function $d(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $o(t){return!!t&&"mapValue"in t}function dR(t){return(t?.mapValue?.fields||{})[E_]?.stringValue===T_}function Ci(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return tr(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Ci(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ci(t.arrayValue.values[n]);return e}return{...t}}function pR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===fR}class Wt{constructor(e){this.value=e}static empty(){return new Wt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!$o(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ci(n)}setAll(e){let n=dt.emptyPath(),s={},r=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=l.popLast()}o?s[l.lastSegment()]=Ci(o):r.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());$o(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];$o(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){tr(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Wt(Ci(this.value))}}function I_(t){const e=[];return tr(t.fields,(n,s)=>{const r=new dt([n]);if($o(s)){const i=I_(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new rn(e)}class bt{constructor(e,n,s,r,i,o,l){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new bt(e,0,ge.min(),ge.min(),ge.min(),Wt.empty(),0)}static newFoundDocument(e,n,s,r){return new bt(e,1,n,ge.min(),s,r,0)}static newNoDocument(e,n){return new bt(e,2,n,ge.min(),ge.min(),Wt.empty(),0)}static newUnknownDocument(e,n){return new bt(e,3,n,ge.min(),ge.min(),Wt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class pa{constructor(e,n){this.position=e,this.inclusive=n}}function Bd(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=le.comparator(le.fromName(o.referenceValue),n.key):s=Lr(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function jd(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kn(t.position[n],e.position[n]))return!1;return!0}class ga{constructor(e,n="asc"){this.field=e,this.dir=n}}function gR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class b_{}class Xe extends b_{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new _R(e,n,s):n==="array-contains"?new wR(e,s):n==="in"?new ER(e,s):n==="not-in"?new TR(e,s):n==="array-contains-any"?new IR(e,s):new Xe(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new yR(e,s):new vR(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Lr(n,this.value)):n!==null&&bs(this.value)===bs(n)&&this.matchesComparison(Lr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hn extends b_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new hn(e,n)}matches(e){return A_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function A_(t){return t.op==="and"}function R_(t){return mR(t)&&A_(t)}function mR(t){for(const e of t.filters)if(e instanceof hn)return!1;return!0}function Rc(t){if(t instanceof Xe)return t.field.canonicalString()+t.op.toString()+Fr(t.value);if(R_(t))return t.filters.map(e=>Rc(e)).join(",");{const e=t.filters.map(n=>Rc(n)).join(",");return`${t.op}(${e})`}}function S_(t,e){return t instanceof Xe?function(s,r){return r instanceof Xe&&s.op===r.op&&s.field.isEqual(r.field)&&kn(s.value,r.value)}(t,e):t instanceof hn?function(s,r){return r instanceof hn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,l)=>i&&S_(o,r.filters[l]),!0):!1}(t,e):void fe(19439)}function C_(t){return t instanceof Xe?function(n){return`${n.field.canonicalString()} ${n.op} ${Fr(n.value)}`}(t):t instanceof hn?function(n){return n.op.toString()+" {"+n.getFilters().map(C_).join(" ,")+"}"}(t):"Filter"}class _R extends Xe{constructor(e,n,s){super(e,n,s),this.key=le.fromName(s.referenceValue)}matches(e){const n=le.comparator(e.key,this.key);return this.matchesComparison(n)}}class yR extends Xe{constructor(e,n){super(e,"in",n),this.keys=P_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class vR extends Xe{constructor(e,n){super(e,"not-in",n),this.keys=P_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function P_(t,e){return(e.arrayValue?.values||[]).map(n=>le.fromName(n.referenceValue))}class wR extends Xe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Pu(n)&&qi(n.arrayValue,this.value)}}class ER extends Xe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qi(this.value.arrayValue,n)}}class TR extends Xe{constructor(e,n){super(e,"not-in",n)}matches(e){if(qi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!qi(this.value.arrayValue,n)}}class IR extends Xe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Pu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>qi(this.value.arrayValue,s))}}class bR{constructor(e,n=null,s=[],r=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function Hd(t,e=null,n=[],s=[],r=null,i=null,o=null){return new bR(t,e,n,s,r,i,o)}function xu(t){const e=me(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Rc(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),Qa(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Fr(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Fr(s)).join(",")),e.Te=n}return e.Te}function ku(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!gR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!S_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!jd(t.startAt,e.startAt)&&jd(t.endAt,e.endAt)}function Sc(t){return le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class no{constructor(e,n=null,s=[],r=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function AR(t,e,n,s,r,i,o,l){return new no(t,e,n,s,r,i,o,l)}function x_(t){return new no(t)}function qd(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function k_(t){return t.collectionGroup!==null}function Pi(t){const e=me(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new it(dt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new ga(i,s))}),n.has(dt.keyField().canonicalString())||e.Ie.push(new ga(dt.keyField(),s))}return e.Ie}function Tn(t){const e=me(t);return e.Ee||(e.Ee=RR(e,Pi(t))),e.Ee}function RR(t,e){if(t.limitType==="F")return Hd(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new ga(r.field,i)});const n=t.endAt?new pa(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new pa(t.startAt.position,t.startAt.inclusive):null;return Hd(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Cc(t,e){const n=t.filters.concat([e]);return new no(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Pc(t,e,n){return new no(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ja(t,e){return ku(Tn(t),Tn(e))&&t.limitType===e.limitType}function D_(t){return`${xu(Tn(t))}|lt:${t.limitType}`}function pr(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>C_(r)).join(", ")}]`),Qa(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>Fr(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>Fr(r)).join(",")),`Target(${s})`}(Tn(t))}; limitType=${t.limitType})`}function Xa(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):le.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of Pi(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(o,l,c){const h=Bd(o,l,c);return o.inclusive?h<=0:h<0}(s.startAt,Pi(s),r)||s.endAt&&!function(o,l,c){const h=Bd(o,l,c);return o.inclusive?h>=0:h>0}(s.endAt,Pi(s),r))}(t,e)}function SR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function N_(t){return(e,n)=>{let s=!1;for(const r of Pi(t)){const i=CR(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function CR(t,e,n){const s=t.field.isKeyField()?le.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),h=l.data.field(i);return c!==null&&h!==null?Lr(c,h):fe(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return fe(19790,{direction:t.dir})}}class nr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){tr(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return g_(this.inner)}size(){return this.innerSize}}const PR=new Ge(le.comparator);function Gn(){return PR}const V_=new Ge(le.comparator);function mi(...t){let e=V_;for(const n of t)e=e.insert(n.key,n);return e}function O_(t){let e=V_;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Bs(){return xi()}function M_(){return xi()}function xi(){return new nr(t=>t.toString(),(t,e)=>t.isEqual(e))}const xR=new Ge(le.comparator),kR=new it(le.comparator);function Ae(...t){let e=kR;for(const n of t)e=e.add(n);return e}const DR=new it(be);function NR(){return DR}function Du(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ha(e)?"-0":e}}function L_(t){return{integerValue:""+t}}function VR(t,e){return aR(e)?L_(e):Du(t,e)}class Za{constructor(){this._=void 0}}function OR(t,e,n){return t instanceof ma?function(r,i){const o={fields:{[y_]:{stringValue:__},[w_]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Cu(i)&&(i=Ya(i)),i&&(o.fields[v_]=i),{mapValue:o}}(n,e):t instanceof zi?U_(t,e):t instanceof Gi?$_(t,e):function(r,i){const o=F_(r,i),l=zd(o)+zd(r.Ae);return Ac(o)&&Ac(r.Ae)?L_(l):Du(r.serializer,l)}(t,e)}function MR(t,e,n){return t instanceof zi?U_(t,e):t instanceof Gi?$_(t,e):n}function F_(t,e){return t instanceof _a?function(s){return Ac(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class ma extends Za{}class zi extends Za{constructor(e){super(),this.elements=e}}function U_(t,e){const n=B_(e);for(const s of t.elements)n.some(r=>kn(r,s))||n.push(s);return{arrayValue:{values:n}}}class Gi extends Za{constructor(e){super(),this.elements=e}}function $_(t,e){let n=B_(e);for(const s of t.elements)n=n.filter(r=>!kn(r,s));return{arrayValue:{values:n}}}class _a extends Za{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function zd(t){return Ye(t.integerValue||t.doubleValue)}function B_(t){return Pu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function LR(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof zi&&r instanceof zi||s instanceof Gi&&r instanceof Gi?Mr(s.elements,r.elements,kn):s instanceof _a&&r instanceof _a?kn(s.Ae,r.Ae):s instanceof ma&&r instanceof ma}(t.transform,e.transform)}class FR{constructor(e,n){this.version=e,this.transformResults=n}}class In{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new In}static exists(e){return new In(void 0,e)}static updateTime(e){return new In(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bo(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class el{}function j_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Nu(t.key,In.none()):new so(t.key,t.data,In.none());{const n=t.data,s=Wt.empty();let r=new it(dt.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new sr(t.key,s,new rn(r.toArray()),In.none())}}function UR(t,e,n){t instanceof so?function(r,i,o){const l=r.value.clone(),c=Wd(r.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof sr?function(r,i,o){if(!Bo(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Wd(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(H_(r)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ki(t,e,n,s){return t instanceof so?function(i,o,l,c){if(!Bo(i.precondition,o))return l;const h=i.value.clone(),f=Kd(i.fieldTransforms,c,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,s):t instanceof sr?function(i,o,l,c){if(!Bo(i.precondition,o))return l;const h=Kd(i.fieldTransforms,c,o),f=o.data;return f.setAll(H_(i)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,s):function(i,o,l){return Bo(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function $R(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=F_(s.transform,r||null);i!=null&&(n===null&&(n=Wt.empty()),n.set(s.field,i))}return n||null}function Gd(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Mr(s,r,(i,o)=>LR(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class so extends el{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class sr extends el{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function H_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function Wd(t,e,n){const s=new Map;Ve(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,l=e.data.field(i.field);s.set(i.field,MR(o,l,n[r]))}return s}function Kd(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,OR(i,o,e))}return s}class Nu extends el{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BR extends el{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class jR{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&UR(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=ki(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=ki(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=M_();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(r.key)?null:l;const c=j_(o,l);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(ge.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&Mr(this.mutations,e.mutations,(n,s)=>Gd(n,s))&&Mr(this.baseMutations,e.baseMutations,(n,s)=>Gd(n,s))}}class Vu{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){Ve(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=function(){return xR}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Vu(e,n,s,r)}}class HR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class qR{constructor(e,n){this.count=e,this.unchangedNames=n}}var Je,Se;function zR(t){switch(t){case z.OK:return fe(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return fe(15467,{code:t})}}function q_(t){if(t===void 0)return zn("GRPC error has no .code"),z.UNKNOWN;switch(t){case Je.OK:return z.OK;case Je.CANCELLED:return z.CANCELLED;case Je.UNKNOWN:return z.UNKNOWN;case Je.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case Je.INTERNAL:return z.INTERNAL;case Je.UNAVAILABLE:return z.UNAVAILABLE;case Je.UNAUTHENTICATED:return z.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case Je.NOT_FOUND:return z.NOT_FOUND;case Je.ALREADY_EXISTS:return z.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return z.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case Je.ABORTED:return z.ABORTED;case Je.OUT_OF_RANGE:return z.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return z.UNIMPLEMENTED;case Je.DATA_LOSS:return z.DATA_LOSS;default:return fe(39323,{code:t})}}(Se=Je||(Je={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";function GR(){return new TextEncoder}const WR=new ps([4294967295,4294967295],0);function Qd(t){const e=GR().encode(t),n=new r_;return n.update(e),new Uint8Array(n.digest())}function Yd(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ps([n,s],0),new ps([r,i],0)]}class Ou{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new _i(`Invalid padding: ${n}`);if(s<0)throw new _i(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new _i(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new _i(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ps.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(ps.fromNumber(s)));return r.compare(WR)===1&&(r=new ps([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Qd(e),[s,r]=Yd(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Ou(i,r,n);return s.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=Qd(e),[s,r]=Yd(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class _i extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class tl{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,ro.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new tl(ge.min(),r,new Ge(be),Gn(),Ae())}}class ro{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new ro(s,n,Ae(),Ae(),Ae())}}class jo{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class z_{constructor(e,n){this.targetId=e,this.Ce=n}}class G_{constructor(e,n,s=gt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Jd{constructor(){this.ve=0,this.Fe=Xd(),this.Me=gt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ae(),n=Ae(),s=Ae();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:fe(38017,{changeType:i})}}),new ro(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Xd()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ve(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class KR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Gn(),this.Je=Ro(),this.He=Ro(),this.Ye=new Ge(be)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:fe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(Sc(i))if(s===0){const o=new le(i.path);this.et(n,o,bt.newNoDocument(o,ge.min()))}else Ve(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,l;try{o=Is(s).toUint8Array()}catch(c){if(c instanceof m_)return Or("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Ou(o,r,i)}catch(c){return Or(c instanceof _i?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Sc(l.target)){const c=new le(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,bt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let s=Ae();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const h=this.ot(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const r=new tl(e,n,this.Ye,this.je,s);return this.je=Gn(),this.Je=Ro(),this.He=Ro(),this.Ye=new Ge(be),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Jd,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new it(be),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new it(be),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Jd),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ro(){return new Ge(le.comparator)}function Xd(){return new Ge(le.comparator)}const QR={asc:"ASCENDING",desc:"DESCENDING"},YR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JR={and:"AND",or:"OR"};class XR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function xc(t,e){return t.useProto3Json||Qa(e)?e:{value:e}}function ya(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function W_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ZR(t,e){return ya(t,e.toTimestamp())}function bn(t){return Ve(!!t,49232),ge.fromTimestamp(function(n){const s=Ts(n);return new qe(s.seconds,s.nanos)}(t))}function Mu(t,e){return kc(t,e).canonicalString()}function kc(t,e){const n=function(r){return new Be(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function K_(t){const e=Be.fromString(t);return Ve(Z_(e),10190,{key:e.toString()}),e}function Dc(t,e){return Mu(t.databaseId,e.path)}function Kl(t,e){const n=K_(e);if(n.get(1)!==t.databaseId.projectId)throw new ae(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ae(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new le(Y_(n))}function Q_(t,e){return Mu(t.databaseId,e)}function eS(t){const e=K_(t);return e.length===4?Be.emptyPath():Y_(e)}function Nc(t){return new Be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Y_(t){return Ve(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Zd(t,e,n){return{name:Dc(t,e),fields:n.value.mapValue.fields}}function tS(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:fe(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(h,f){return h.useProto3Json?(Ve(f===void 0||typeof f=="string",58123),gt.fromBase64String(f||"")):(Ve(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),gt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const f=h.code===void 0?z.UNKNOWN:q_(h.code);return new ae(f,h.message||"")}(o);n=new G_(s,r,i,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Kl(t,s.document.name),i=bn(s.document.updateTime),o=s.document.createTime?bn(s.document.createTime):ge.min(),l=new Wt({mapValue:{fields:s.document.fields}}),c=bt.newFoundDocument(r,i,o,l),h=s.targetIds||[],f=s.removedTargetIds||[];n=new jo(h,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Kl(t,s.document),i=s.readTime?bn(s.readTime):ge.min(),o=bt.newNoDocument(r,i),l=s.removedTargetIds||[];n=new jo([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Kl(t,s.document),i=s.removedTargetIds||[];n=new jo([],i,r,null)}else{if(!("filter"in e))return fe(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new qR(r,i),l=s.targetId;n=new z_(l,o)}}return n}function nS(t,e){let n;if(e instanceof so)n={update:Zd(t,e.key,e.value)};else if(e instanceof Nu)n={delete:Dc(t,e.key)};else if(e instanceof sr)n={update:Zd(t,e.key,e.data),updateMask:hS(e.fieldMask)};else{if(!(e instanceof BR))return fe(16599,{Vt:e.type});n={verify:Dc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const l=o.transform;if(l instanceof ma)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof zi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Gi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof _a)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw fe(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:ZR(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:fe(27497)}(t,e.precondition)),n}function sS(t,e){return t&&t.length>0?(Ve(e!==void 0,14353),t.map(n=>function(r,i){let o=r.updateTime?bn(r.updateTime):bn(i);return o.isEqual(ge.min())&&(o=bn(i)),new FR(o,r.transformResults||[])}(n,e))):[]}function rS(t,e){return{documents:[Q_(t,e.path)]}}function iS(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Q_(t,r);const i=function(h){if(h.length!==0)return X_(hn.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(f=>function(g){return{field:gr(g.field),direction:lS(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=xc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:r}}function oS(t){let e=eS(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Ve(s===1,65062);const f=n.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(p){const g=J_(p);return g instanceof hn&&R_(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(D){return new ga(mr(D.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,Qa(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){const g=!!p.before,w=p.values||[];return new pa(w,g)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const g=!p.before,w=p.values||[];return new pa(w,g)}(n.endAt)),AR(e,r,o,i,l,"F",c,h)}function aS(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function J_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=mr(n.unaryFilter.field);return Xe.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=mr(n.unaryFilter.field);return Xe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=mr(n.unaryFilter.field);return Xe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=mr(n.unaryFilter.field);return Xe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fe(61313);default:return fe(60726)}}(t):t.fieldFilter!==void 0?function(n){return Xe.create(mr(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fe(58110);default:return fe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return hn.create(n.compositeFilter.filters.map(s=>J_(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return fe(1026)}}(n.compositeFilter.op))}(t):fe(30097,{filter:t})}function lS(t){return QR[t]}function cS(t){return YR[t]}function uS(t){return JR[t]}function gr(t){return{fieldPath:t.canonicalString()}}function mr(t){return dt.fromServerFormat(t.fieldPath)}function X_(t){return t instanceof Xe?function(n){if(n.op==="=="){if($d(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NAN"}};if(Ud(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($d(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NOT_NAN"}};if(Ud(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gr(n.field),op:cS(n.op),value:n.value}}}(t):t instanceof hn?function(n){const s=n.getFilters().map(r=>X_(r));return s.length===1?s[0]:{compositeFilter:{op:uS(n.op),filters:s}}}(t):fe(54877,{filter:t})}function hS(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Z_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class us{constructor(e,n,s,r,i=ge.min(),o=ge.min(),l=gt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class fS{constructor(e){this.yt=e}}function dS(t){const e=oS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Pc(e,e.limit,"L"):e}class pS{constructor(){this.Cn=new gS}addToCollectionParentIndex(e,n){return this.Cn.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(Es.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(Es.min())}updateCollectionGroup(e,n,s){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class gS{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new it(Be.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new it(Be.comparator)).toArray()}}const ep={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ey=41943040;class Lt{static withCacheSize(e){return new Lt(e,Lt.DEFAULT_COLLECTION_PERCENTILE,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Lt.DEFAULT_COLLECTION_PERCENTILE=10,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lt.DEFAULT=new Lt(ey,Lt.DEFAULT_COLLECTION_PERCENTILE,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lt.DISABLED=new Lt(-1,0,0);class Ur{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ur(0)}static cr(){return new Ur(-1)}}const tp="LruGarbageCollector",mS=1048576;function np([t,e],[n,s]){const r=be(t,n);return r===0?be(e,s):r}class _S{constructor(e){this.Ir=e,this.buffer=new it(np),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();np(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class yS{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(tp,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Gr(n)?oe(tp,"Ignoring IndexedDB error during garbage collection: ",n):await zr(n)}await this.Vr(3e5)})}}class vS{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return G.resolve(Ka.ce);const s=new _S(n);return this.mr.forEachTarget(e,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(ep)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ep):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,l,c,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,o=Date.now(),this.nthSequenceNumber(e,r))).next(p=>(s=p,l=Date.now(),this.removeTargets(e,s,n))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,s))).next(p=>(h=Date.now(),dr()<=Ie.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${r} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(h-c)+`ms
Total Duration: ${h-f}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:p})))}}function wS(t,e){return new vS(t,e)}class ES{constructor(){this.changes=new nr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?G.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class TS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class IS{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&ki(s.mutation,r,rn.empty(),qe.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Ae()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Ae()){const r=Bs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=mi();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=Bs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Ae()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,s,r){let i=Gn();const o=xi(),l=function(){return xi()}();return n.forEach((c,h)=>{const f=s.get(h.key);r.has(h.key)&&(f===void 0||f.mutation instanceof sr)?i=i.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),ki(f.mutation,h,f.mutation.getFieldMask(),qe.now())):o.set(h.key,rn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((h,f)=>o.set(h,f)),n.forEach((h,f)=>l.set(h,new TS(f,o.get(h)??null))),l))}recalculateAndSaveOverlays(e,n){const s=xi();let r=new Ge((o,l)=>o-l),i=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let f=s.get(c)||rn.empty();f=l.applyToLocalView(h,f),s.set(c,f);const p=(r.get(l.batchId)||Ae()).add(c);r=r.insert(l.batchId,p)})}).next(()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,f=c.value,p=M_();f.forEach(g=>{if(!i.has(g)){const w=j_(n.get(g),s.get(g));w!==null&&p.set(g,w),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return G.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(o){return le.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):k_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):G.resolve(Bs());let l=Bi,c=i;return o.next(h=>G.forEach(h,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(f)?G.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{c=c.insert(f,g)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,c,h,Ae())).next(f=>({batchId:l,changes:O_(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next(s=>{let r=mi();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=mi();return this.indexManager.getCollectionParents(e,i).next(l=>G.forEach(l,c=>{const h=function(p,g){return new no(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,s,r).next(f=>{f.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((c,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,bt.newInvalidDocument(f)))});let l=mi();return o.forEach((c,h)=>{const f=i.get(c);f!==void 0&&ki(f.mutation,h,rn.empty(),qe.now()),Xa(n,h)&&(l=l.insert(c,h))}),l})}}class bS{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return G.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:bn(r.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:dS(r.bundledQuery),readTime:bn(r.readTime)}}(n)),G.resolve()}}class AS{constructor(){this.overlays=new Ge(le.comparator),this.qr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Bs();return G.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),G.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),G.resolve()}getOverlaysForCollection(e,n,s){const r=Bs(),i=n.length+1,o=new le(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return G.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Ge((h,f)=>h-f);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>s){let f=i.get(h.largestBatchId);f===null&&(f=Bs(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=Bs(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=r)););return G.resolve(l)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new HR(n,s));let i=this.qr.get(n);i===void 0&&(i=Ae(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}class RS{constructor(){this.sessionToken=gt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}class Lu{constructor(){this.Qr=new it(ct.$r),this.Ur=new it(ct.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new ct(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new ct(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new le(new Be([])),s=new ct(n,e),r=new ct(n,e+1),i=[];return this.Ur.forEachInRange([s,r],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new le(new Be([])),s=new ct(n,e),r=new ct(n,e+1);let i=Ae();return this.Ur.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ct(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class ct{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return le.comparator(e.key,n.key)||be(e.Yr,n.Yr)}static Kr(e,n){return be(e.Yr,n.Yr)||le.comparator(e.key,n.key)}}class SS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new it(ct.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new jR(i,n,s,r);this.mutationQueue.push(o);for(const l of r)this.Zr=this.Zr.add(new ct(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,n){return G.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return G.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?Su:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new ct(n,0),r=new ct(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],o=>{const l=this.Xr(o.Yr);i.push(l)}),G.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new it(be);return n.forEach(r=>{const i=new ct(r,0),o=new ct(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{s=s.add(l.Yr)})}),G.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;le.isDocumentKey(i)||(i=i.child(""));const o=new ct(new le(i),0);let l=new it(be);return this.Zr.forEachWhile(c=>{const h=c.key.path;return!!s.isPrefixOf(h)&&(h.length===r&&(l=l.add(c.Yr)),!0)},o),G.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(s=>{const r=this.Xr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Ve(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return G.forEach(n.mutations,r=>{const i=new ct(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new ct(n,0),r=this.Zr.firstAfterOrEqual(s);return G.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class CS{constructor(e){this.ri=e,this.docs=function(){return new Ge(le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return G.resolve(s?s.document.mutableCopy():bt.newInvalidDocument(n))}getEntries(e,n){let s=Gn();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():bt.newInvalidDocument(r))}),G.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=Gn();const o=n.path,l=new le(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:f}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||sR(nR(f),s)<=0||(r.has(f.key)||Xa(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return G.resolve(i)}getAllFromCollectionGroup(e,n,s,r){fe(9500)}ii(e,n){return G.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new PS(this)}getSize(e){return G.resolve(this.size)}}class PS extends ES{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)}),G.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class xS{constructor(e){this.persistence=e,this.si=new nr(n=>xu(n),ku),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.oi=0,this._i=new Lu,this.targetCount=0,this.ai=Ur.ur()}forEachTarget(e,n){return this.si.forEach((s,r)=>n(r)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),G.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ur(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Pr(n),G.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),G.waitFor(i).next(()=>r)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return G.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),G.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),G.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return G.resolve(s)}containsKey(e,n){return G.resolve(this._i.containsKey(n))}}class ty{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ka(0),this.li=!1,this.li=!0,this.hi=new RS,this.referenceDelegate=e(this),this.Pi=new xS(this),this.indexManager=new pS,this.remoteDocumentCache=function(r){return new CS(r)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new fS(n),this.Ii=new bS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new AS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new SS(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){oe("MemoryPersistence","Starting transaction:",e);const r=new kS(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(e,n){return G.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class kS extends iR{constructor(e){super(),this.currentSequenceNumber=e}}class Fu{constructor(e){this.persistence=e,this.Ri=new Lu,this.Vi=null}static mi(e){return new Fu(e)}get fi(){if(this.Vi)return this.Vi;throw fe(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),G.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),G.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,s=>{const r=le.fromPath(s);return this.gi(e,r).next(i=>{i||n.removeEntry(r,ge.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return G.or([()=>G.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class va{constructor(e,n){this.persistence=e,this.pi=new nr(s=>lR(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=wS(this,n)}static mi(e,n){return new va(e,n)}Ei(){}di(e){return G.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return G.forEach(this.pi,(s,r)=>this.br(e,s,r).next(i=>i?G.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,o=>this.br(e,o,n).next(l=>{l||(s++,i.removeEntry(o,ge.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),G.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Uo(e.data.value)),n}br(e,n,s){return G.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return G.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Uu{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=Ae(),r=Ae();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Uu(e,n.fromCache,s,r)}}class DS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class NS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return tT()?8:oR(Pt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new DS;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,s,r){return s.documentReadCount<this.fs?(dr()<=Ie.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",pr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(dr()<=Ie.DEBUG&&oe("QueryEngine","Query:",pr(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(dr()<=Ie.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",pr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tn(n))):G.resolve())}ys(e,n){if(qd(n))return G.resolve(null);let s=Tn(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Pc(n,null,"F"),s=Tn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=Ae(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,s).next(c=>{const h=this.Ds(n,l);return this.Cs(n,h,o,c.readTime)?this.ys(e,Pc(n,null,"F")):this.vs(e,h,n,c)}))})))}ws(e,n,s,r){return qd(n)||r.isEqual(ge.min())?G.resolve(null):this.ps.getDocuments(e,s).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?G.resolve(null):(dr()<=Ie.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),pr(n)),this.vs(e,o,n,tR(r,Bi)).next(l=>l))})}Ds(e,n){let s=new it(N_(e));return n.forEach((r,i)=>{Xa(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return dr()<=Ie.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",pr(n)),this.ps.getDocumentsMatchingQuery(e,n,Es.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}const $u="LocalStore",VS=3e8;class OS{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Ge(be),this.xs=new nr(i=>xu(i),ku),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function MS(t,e,n,s){return new OS(t,e,n,s)}async function ny(t,e){const n=me(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],l=[];let c=Ae();for(const h of r){o.push(h.batchId);for(const f of h.mutations)c=c.add(f.key)}for(const h of i){l.push(h.batchId);for(const f of h.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(s,c).next(h=>({Ls:h,removedBatchIds:o,addedBatchIds:l}))})})}function LS(t,e){const n=me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,h,f){const p=h.batch,g=p.keys();let w=G.resolve();return g.forEach(D=>{w=w.next(()=>f.getEntry(c,D)).next(O=>{const F=h.docVersions.get(D);Ve(F!==null,48541),O.version.compareTo(F)<0&&(p.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),f.addEntry(O)))})}),w.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let c=Ae();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function sy(t){const e=me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function FS(t,e){const n=me(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];e.targetChanges.forEach((f,p)=>{const g=r.get(p);if(!g)return;l.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(i,f.addedDocuments,p)));let w=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(gt.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,s)),r=r.insert(p,w),function(O,F,Q){return O.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=VS?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0}(g,w,f)&&l.push(n.Pi.updateTargetData(i,w))});let c=Gn(),h=Ae();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(US(i,o,e.documentUpdates).next(f=>{c=f.ks,h=f.qs})),!s.isEqual(ge.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next(p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));l.push(f)}return G.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(n.Ms=r,i))}function US(t,e,n){let s=Ae(),r=Ae();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=Gn();return n.forEach((l,c)=>{const h=i.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(ge.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):oe($u,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)}),{ks:o,qs:r}})}function $S(t,e){const n=me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Su),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function BS(t,e){const n=me(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Pi.getTargetData(s,e).next(i=>i?(r=i,G.resolve(r)):n.Pi.allocateTargetId(s).next(o=>(r=new us(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function Vc(t,e,n){const s=me(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Gr(o))throw o;oe($u,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function sp(t,e,n){const s=me(t);let r=ge.min(),i=Ae();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,f){const p=me(c),g=p.xs.get(f);return g!==void 0?G.resolve(p.Ms.get(g)):p.Pi.getTargetData(h,f)}(s,o,Tn(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:ge.min(),n?i:Ae())).next(l=>(jS(s,SR(e),l),{documents:l,Qs:i})))}function jS(t,e,n){let s=t.Os.get(e)||ge.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Os.set(e,s)}class rp{constructor(){this.activeTargetIds=NR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class HS{constructor(){this.Mo=new rp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new rp,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class qS{Oo(e){}shutdown(){}}const ip="ConnectivityMonitor";class op{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(ip,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oe(ip,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let So=null;function Oc(){return So===null?So=function(){return 268435456+Math.round(2147483648*Math.random())}():So++,"0x"+So.toString(16)}const Ql="RestConnection",zS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class GS{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===fa?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=Oc(),l=this.zo(e,n.toUriEncodedString());oe(Ql,`Sending RPC '${e}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,i);const{host:h}=new URL(l),f=Br(h);return this.Jo(e,l,c,s,f).then(p=>(oe(Ql,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Or(Ql,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",s),p})}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qr}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}zo(e,n){const s=zS[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class WS{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const wt="WebChannelConnection";class KS extends GS{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=Oc();return new Promise((l,c)=>{const h=new i_;h.setWithCredentials(!0),h.listenOnce(o_.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Fo.NO_ERROR:const p=h.getResponseJson();oe(wt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case Fo.TIMEOUT:oe(wt,`RPC '${e}' ${o} timed out`),c(new ae(z.DEADLINE_EXCEEDED,"Request time out"));break;case Fo.HTTP_ERROR:const g=h.getStatus();if(oe(wt,`RPC '${e}' ${o} failed with status:`,g,"response text:",h.getResponseText()),g>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const D=w?.error;if(D&&D.status&&D.message){const O=function(Q){const V=Q.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(V)>=0?V:z.UNKNOWN}(D.status);c(new ae(O,D.message))}else c(new ae(z.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new ae(z.UNAVAILABLE,"Connection failed."));break;default:fe(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{oe(wt,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(r);oe(wt,`RPC '${e}' ${o} sending request:`,r),h.send(n,"POST",f,s,15)})}T_(e,n,s){const r=Oc(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=c_(),l=l_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const f=i.join("");oe(wt,`Creating RPC '${e}' stream ${r}: ${f}`,c);const p=o.createWebChannel(f,c);this.I_(p);let g=!1,w=!1;const D=new WS({Yo:F=>{w?oe(wt,`Not sending because RPC '${e}' stream ${r} is closed:`,F):(g||(oe(wt,`Opening RPC '${e}' stream ${r} transport.`),p.open(),g=!0),oe(wt,`RPC '${e}' stream ${r} sending:`,F),p.send(F))},Zo:()=>p.close()}),O=(F,Q,V)=>{F.listen(Q,M=>{try{V(M)}catch(Y){setTimeout(()=>{throw Y},0)}})};return O(p,gi.EventType.OPEN,()=>{w||(oe(wt,`RPC '${e}' stream ${r} transport opened.`),D.o_())}),O(p,gi.EventType.CLOSE,()=>{w||(w=!0,oe(wt,`RPC '${e}' stream ${r} transport closed`),D.a_(),this.E_(p))}),O(p,gi.EventType.ERROR,F=>{w||(w=!0,Or(wt,`RPC '${e}' stream ${r} transport errored. Name:`,F.name,"Message:",F.message),D.a_(new ae(z.UNAVAILABLE,"The operation could not be completed")))}),O(p,gi.EventType.MESSAGE,F=>{if(!w){const Q=F.data[0];Ve(!!Q,16349);const V=Q,M=V?.error||V[0]?.error;if(M){oe(wt,`RPC '${e}' stream ${r} received error:`,M);const Y=M.status;let $=function(_){const v=Je[_];if(v!==void 0)return q_(v)}(Y),H=M.message;$===void 0&&($=z.INTERNAL,H="Unknown error status: "+Y+" with message "+M.message),w=!0,D.a_(new ae($,H)),p.close()}else oe(wt,`RPC '${e}' stream ${r} received:`,Q),D.u_(Q)}}),O(l,a_.STAT_EVENT,F=>{F.stat===Tc.PROXY?oe(wt,`RPC '${e}' stream ${r} detected buffering proxy`):F.stat===Tc.NOPROXY&&oe(wt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{D.__()},0),D}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Yl(){return typeof document<"u"?document:null}function nl(t){return new XR(t,!0)}class ry{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&oe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ap="PersistentStream";class iy{constructor(e,n,s,r,i,o,l,c){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ry(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(zn(n.toString()),zn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===n&&this.G_(s,r)},s=>{e(()=>{const r=new ae(z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return oe(ap,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(oe(ap,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QS extends iy{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=tS(this.serializer,e),s=function(i){if(!("targetChange"in i))return ge.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ge.min():o.readTime?bn(o.readTime):ge.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Nc(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Sc(c)?{documents:rS(i,c)}:{query:iS(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=W_(i,o.resumeToken);const h=xc(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(ge.min())>0){l.readTime=ya(i,o.snapshotVersion.toTimestamp());const h=xc(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const s=aS(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Nc(this.serializer),n.removeTarget=e,this.q_(n)}}class YS extends iy{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=sS(e.writeResults,e.commitTime),s=bn(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Nc(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>nS(this.serializer,s))};this.q_(n)}}class JS{}class XS extends JS{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ae(z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,kc(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ae(z.UNKNOWN,i.toString())})}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,kc(n,s),r,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ae(z.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class ZS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(zn(n),this.aa=!1):oe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Js="RemoteStore";class eC{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{rr(this)&&(oe(Js,"Restarting streams for network reachability change."),await async function(c){const h=me(c);h.Ea.add(4),await io(h),h.Ra.set("Unknown"),h.Ea.delete(4),await sl(h)}(this))})}),this.Ra=new ZS(s,r)}}async function sl(t){if(rr(t))for(const e of t.da)await e(!0)}async function io(t){for(const e of t.da)await e(!1)}function oy(t,e){const n=me(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),qu(n)?Hu(n):Wr(n).O_()&&ju(n,e))}function Bu(t,e){const n=me(t),s=Wr(n);n.Ia.delete(e),s.O_()&&ay(n,e),n.Ia.size===0&&(s.O_()?s.L_():rr(n)&&n.Ra.set("Unknown"))}function ju(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Wr(t).Y_(e)}function ay(t,e){t.Va.Ue(e),Wr(t).Z_(e)}function Hu(t){t.Va=new KR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Wr(t).start(),t.Ra.ua()}function qu(t){return rr(t)&&!Wr(t).x_()&&t.Ia.size>0}function rr(t){return me(t).Ea.size===0}function ly(t){t.Va=void 0}async function tC(t){t.Ra.set("Online")}async function nC(t){t.Ia.forEach((e,n)=>{ju(t,e)})}async function sC(t,e){ly(t),qu(t)?(t.Ra.ha(e),Hu(t)):t.Ra.set("Unknown")}async function rC(t,e,n){if(t.Ra.set("Online"),e instanceof G_&&e.state===2&&e.cause)try{await async function(r,i){const o=i.cause;for(const l of i.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.Ia.delete(l),r.Va.removeTarget(l))}(t,e)}catch(s){oe(Js,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await wa(t,s)}else if(e instanceof jo?t.Va.Ze(e):e instanceof z_?t.Va.st(e):t.Va.tt(e),!n.isEqual(ge.min()))try{const s=await sy(t.localStore);n.compareTo(s)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.Ia.get(h);f&&i.Ia.set(h,f.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,h)=>{const f=i.Ia.get(c);if(!f)return;i.Ia.set(c,f.withResumeToken(gt.EMPTY_BYTE_STRING,f.snapshotVersion)),ay(i,c);const p=new us(f.target,c,h,f.sequenceNumber);ju(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(s){oe(Js,"Failed to raise snapshot:",s),await wa(t,s)}}async function wa(t,e,n){if(!Gr(e))throw e;t.Ea.add(1),await io(t),t.Ra.set("Offline"),n||(n=()=>sy(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{oe(Js,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await sl(t)})}function cy(t,e){return e().catch(n=>wa(t,n,e))}async function rl(t){const e=me(t),n=As(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Su;for(;iC(e);)try{const r=await $S(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,oC(e,r)}catch(r){await wa(e,r)}uy(e)&&hy(e)}function iC(t){return rr(t)&&t.Ta.length<10}function oC(t,e){t.Ta.push(e);const n=As(t);n.O_()&&n.X_&&n.ea(e.mutations)}function uy(t){return rr(t)&&!As(t).x_()&&t.Ta.length>0}function hy(t){As(t).start()}async function aC(t){As(t).ra()}async function lC(t){const e=As(t);for(const n of t.Ta)e.ea(n.mutations)}async function cC(t,e,n){const s=t.Ta.shift(),r=Vu.from(s,e,n);await cy(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await rl(t)}async function uC(t,e){e&&As(t).X_&&await async function(s,r){if(function(o){return zR(o)&&o!==z.ABORTED}(r.code)){const i=s.Ta.shift();As(s).B_(),await cy(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await rl(s)}}(t,e),uy(t)&&hy(t)}async function lp(t,e){const n=me(t);n.asyncQueue.verifyOperationInProgress(),oe(Js,"RemoteStore received new credentials");const s=rr(n);n.Ea.add(3),await io(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await sl(n)}async function hC(t,e){const n=me(t);e?(n.Ea.delete(2),await sl(n)):e||(n.Ea.add(2),await io(n),n.Ra.set("Unknown"))}function Wr(t){return t.ma||(t.ma=function(n,s,r){const i=me(n);return i.sa(),new QS(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:tC.bind(null,t),t_:nC.bind(null,t),r_:sC.bind(null,t),H_:rC.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),qu(t)?Hu(t):t.Ra.set("Unknown")):(await t.ma.stop(),ly(t))})),t.ma}function As(t){return t.fa||(t.fa=function(n,s,r){const i=me(n);return i.sa(),new YS(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:aC.bind(null,t),r_:uC.bind(null,t),ta:lC.bind(null,t),na:cC.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await rl(t)):(await t.fa.stop(),t.Ta.length>0&&(oe(Js,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}class zu{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new gs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,l=new zu(e,n,o,r,i);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gu(t,e){if(zn("AsyncQueue",`${e}: ${t}`),Gr(t))return new ae(z.UNAVAILABLE,`${e}: ${t}`);throw t}class Sr{static emptySet(e){return new Sr(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||le.comparator(n.key,s.key):(n,s)=>le.comparator(n.key,s.key),this.keyedMap=mi(),this.sortedSet=new Ge(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Sr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Sr;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class cp{constructor(){this.ga=new Ge(le.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):fe(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class $r{constructor(e,n,s,r,i,o,l,c,h){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new $r(e,n,Sr.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ja(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}class fC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class dC{constructor(){this.queries=up(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=me(n),i=r.queries;r.queries=up(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(s)})})(this,new ae(z.ABORTED,"Firestore shutting down"))}}function up(){return new nr(t=>D_(t),Ja)}async function pC(t,e){const n=me(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new fC,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const l=Gu(o,`Initialization of query '${pr(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Wu(n)}async function gC(t,e){const n=me(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function mC(t,e){const n=me(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(r)&&(s=!0);o.wa=r}}s&&Wu(n)}function _C(t,e,n){const s=me(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function Wu(t){t.Ca.forEach(e=>{e.next()})}var Mc,hp;(hp=Mc||(Mc={})).Ma="default",hp.Cache="cache";class yC{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new $r(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=$r.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Mc.Cache}}class fy{constructor(e){this.key=e}}class dy{constructor(e){this.key=e}}class vC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ae(),this.mutatedKeys=Ae(),this.eu=N_(e),this.tu=new Sr(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new cp,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((f,p)=>{const g=r.get(f),w=Xa(this.query,p)?p:null,D=!!g&&this.mutatedKeys.has(g.key),O=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let F=!1;g&&w?g.data.isEqual(w.data)?D!==O&&(s.track({type:3,doc:w}),F=!0):this.su(g,w)||(s.track({type:2,doc:w}),F=!0,(c&&this.eu(w,c)>0||h&&this.eu(w,h)<0)&&(l=!0)):!g&&w?(s.track({type:0,doc:w}),F=!0):g&&!w&&(s.track({type:1,doc:g}),F=!0,(c||h)&&(l=!0)),F&&(w?(o=o.add(w),i=O?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),s.track({type:1,doc:f})}return{tu:o,iu:s,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((f,p)=>function(w,D){const O=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe(20277,{Rt:F})}};return O(w)-O(D)}(f.type,p.type)||this.eu(f.doc,p.doc)),this.ou(s),r=r??!1;const l=n&&!r?this._u():[],c=this.Xa.size===0&&this.current&&!r?1:0,h=c!==this.Za;return this.Za=c,o.length!==0||h?{snapshot:new $r(this.query,e.tu,i,o,e.mutatedKeys,c===0,h,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new cp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ae(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new dy(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new fy(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ae();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return $r.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ku="SyncEngine";class wC{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class EC{constructor(e){this.key=e,this.hu=!1}}class TC{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new nr(l=>D_(l),Ja),this.Iu=new Map,this.Eu=new Set,this.du=new Ge(le.comparator),this.Au=new Map,this.Ru=new Lu,this.Vu={},this.mu=new Map,this.fu=Ur.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function IC(t,e,n=!0){const s=vy(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await py(s,e,n,!0),r}async function bC(t,e){const n=vy(t);await py(n,e,!0,!1)}async function py(t,e,n,s){const r=await BS(t.localStore,Tn(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return s&&(l=await AC(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&oy(t.remoteStore,r),l}async function AC(t,e,n,s,r){t.pu=(p,g,w)=>async function(O,F,Q,V){let M=F.view.ru(Q);M.Cs&&(M=await sp(O.localStore,F.query,!1).then(({documents:b})=>F.view.ru(b,M)));const Y=V&&V.targetChanges.get(F.targetId),$=V&&V.targetMismatches.get(F.targetId)!=null,H=F.view.applyChanges(M,O.isPrimaryClient,Y,$);return dp(O,F.targetId,H.au),H.snapshot}(t,p,g,w);const i=await sp(t.localStore,e,!0),o=new vC(e,i.Qs),l=o.ru(i.documents),c=ro.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),h=o.applyChanges(l,t.isPrimaryClient,c);dp(t,n,h.au);const f=new wC(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function RC(t,e,n){const s=me(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(o=>!Ja(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Vc(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&Bu(s.remoteStore,r.targetId),Lc(s,r.targetId)}).catch(zr)):(Lc(s,r.targetId),await Vc(s.localStore,r.targetId,!0))}async function SC(t,e){const n=me(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Bu(n.remoteStore,s.targetId))}async function CC(t,e,n){const s=OC(t);try{const r=await function(o,l){const c=me(o),h=qe.now(),f=l.reduce((w,D)=>w.add(D.key),Ae());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",w=>{let D=Gn(),O=Ae();return c.Ns.getEntries(w,f).next(F=>{D=F,D.forEach((Q,V)=>{V.isValidDocument()||(O=O.add(Q))})}).next(()=>c.localDocuments.getOverlayedDocuments(w,D)).next(F=>{p=F;const Q=[];for(const V of l){const M=$R(V,p.get(V.key).overlayedDocument);M!=null&&Q.push(new sr(V.key,M,I_(M.value.mapValue),In.exists(!0)))}return c.mutationQueue.addMutationBatch(w,h,Q,l)}).next(F=>{g=F;const Q=F.applyToLocalDocumentSet(p,O);return c.documentOverlayCache.saveOverlays(w,F.batchId,Q)})}).then(()=>({batchId:g.batchId,changes:O_(p)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(o,l,c){let h=o.Vu[o.currentUser.toKey()];h||(h=new Ge(be)),h=h.insert(l,c),o.Vu[o.currentUser.toKey()]=h}(s,r.batchId,n),await oo(s,r.changes),await rl(s.remoteStore)}catch(r){const i=Gu(r,"Failed to persist write");n.reject(i)}}async function gy(t,e){const n=me(t);try{const s=await FS(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Au.get(i);o&&(Ve(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?Ve(o.hu,14607):r.removedDocuments.size>0&&(Ve(o.hu,42227),o.hu=!1))}),await oo(n,s,e)}catch(s){await zr(s)}}function fp(t,e,n){const s=me(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&r.push(l.snapshot)}),function(o,l){const c=me(o);c.onlineState=l;let h=!1;c.queries.forEach((f,p)=>{for(const g of p.Sa)g.va(l)&&(h=!0)}),h&&Wu(c)}(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function PC(t,e,n){const s=me(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new Ge(le.comparator);o=o.insert(i,bt.newNoDocument(i,ge.min()));const l=Ae().add(i),c=new tl(ge.min(),new Map,new Ge(be),o,l);await gy(s,c),s.du=s.du.remove(i),s.Au.delete(e),Qu(s)}else await Vc(s.localStore,e,!1).then(()=>Lc(s,e,n)).catch(zr)}async function xC(t,e){const n=me(t),s=e.batch.batchId;try{const r=await LS(n.localStore,e);_y(n,s,null),my(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await oo(n,r)}catch(r){await zr(r)}}async function kC(t,e,n){const s=me(t);try{const r=await function(o,l){const c=me(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return c.mutationQueue.lookupMutationBatch(h,l).next(p=>(Ve(p!==null,37113),f=p.keys(),c.mutationQueue.removeMutationBatch(h,p))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>c.localDocuments.getDocuments(h,f))})}(s.localStore,e);_y(s,e,n),my(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await oo(s,r)}catch(r){await zr(r)}}function my(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function _y(t,e,n){const s=me(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function Lc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||yy(t,s)})}function yy(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Bu(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Qu(t))}function dp(t,e,n){for(const s of n)s instanceof fy?(t.Ru.addReference(s.key,e),DC(t,s)):s instanceof dy?(oe(Ku,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||yy(t,s.key)):fe(19791,{wu:s})}function DC(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(oe(Ku,"New document in limbo: "+n),t.Eu.add(s),Qu(t))}function Qu(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new le(Be.fromString(e)),s=t.fu.next();t.Au.set(s,new EC(n)),t.du=t.du.insert(n,s),oy(t.remoteStore,new us(Tn(x_(n.path)),s,"TargetPurposeLimboResolution",Ka.ce))}}async function oo(t,e,n){const s=me(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((l,c)=>{o.push(s.pu(c,e,n).then(h=>{if((h||n)&&s.isPrimaryClient){const f=h?!h.fromCache:n?.targetChanges.get(c.targetId)?.current;s.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(h){r.push(h);const f=Uu.As(c.targetId,h);i.push(f)}}))}),await Promise.all(o),s.Pu.H_(r),await async function(c,h){const f=me(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>G.forEach(h,g=>G.forEach(g.Es,w=>f.persistence.referenceDelegate.addReference(p,g.targetId,w)).next(()=>G.forEach(g.ds,w=>f.persistence.referenceDelegate.removeReference(p,g.targetId,w)))))}catch(p){if(!Gr(p))throw p;oe($u,"Failed to update sequence numbers: "+p)}for(const p of h){const g=p.targetId;if(!p.fromCache){const w=f.Ms.get(g),D=w.snapshotVersion,O=w.withLastLimboFreeSnapshotVersion(D);f.Ms=f.Ms.insert(g,O)}}}(s.localStore,i))}async function NC(t,e){const n=me(t);if(!n.currentUser.isEqual(e)){oe(Ku,"User change. New user:",e.toKey());const s=await ny(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new ae(z.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await oo(n,s.Ls)}}function VC(t,e){const n=me(t),s=n.Au.get(e);if(s&&s.hu)return Ae().add(s.key);{let r=Ae();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const l=n.Tu.get(o);r=r.unionWith(l.view.nu)}return r}}function vy(t){const e=me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=gy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PC.bind(null,e),e.Pu.H_=mC.bind(null,e.eventManager),e.Pu.yu=_C.bind(null,e.eventManager),e}function OC(t){const e=me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kC.bind(null,e),e}class Ea{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return MS(this.persistence,new NS,e.initialUser,this.serializer)}Cu(e){return new ty(Fu.mi,this.serializer)}Du(e){return new HS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ea.provider={build:()=>new Ea};class MC extends Ea{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ve(this.persistence.referenceDelegate instanceof va,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new yS(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Lt.withCacheSize(this.cacheSizeBytes):Lt.DEFAULT;return new ty(s=>va.mi(s,n),this.serializer)}}class Fc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>fp(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=NC.bind(null,this.syncEngine),await hC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new dC}()}createDatastore(e){const n=nl(e.databaseInfo.databaseId),s=function(i){return new KS(i)}(e.databaseInfo);return function(i,o,l,c){return new XS(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,o,l){return new eC(s,r,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>fp(this.syncEngine,n,0),function(){return op.v()?new op:new qS}())}createSyncEngine(e,n){return function(r,i,o,l,c,h,f){const p=new TC(r,i,o,l,c,h);return f&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const s=me(n);oe(Js,"RemoteStore shutting down."),s.Ea.add(5),await io(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Fc.provider={build:()=>new Fc};class LC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):zn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}const Rs="FirestoreClient";class FC{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Tt.UNAUTHENTICATED,this.clientId=Ru.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{oe(Rs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(oe(Rs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Gu(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Jl(t,e){t.asyncQueue.verifyOperationInProgress(),oe(Rs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await ny(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function pp(t,e){t.asyncQueue.verifyOperationInProgress();const n=await UC(t);oe(Rs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>lp(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>lp(e.remoteStore,r)),t._onlineComponents=e}async function UC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){oe(Rs,"Using user provided OfflineComponentProvider");try{await Jl(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===z.FAILED_PRECONDITION||r.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Or("Error using user provided cache. Falling back to memory cache: "+n),await Jl(t,new Ea)}}else oe(Rs,"Using default OfflineComponentProvider"),await Jl(t,new MC(void 0));return t._offlineComponents}async function wy(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(oe(Rs,"Using user provided OnlineComponentProvider"),await pp(t,t._uninitializedComponentsProvider._online)):(oe(Rs,"Using default OnlineComponentProvider"),await pp(t,new Fc))),t._onlineComponents}function $C(t){return wy(t).then(e=>e.syncEngine)}async function BC(t){const e=await wy(t),n=e.eventManager;return n.onListen=IC.bind(null,e.syncEngine),n.onUnlisten=RC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=SC.bind(null,e.syncEngine),n}function jC(t,e,n={}){const s=new gs;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,h){const f=new LC({next:g=>{f.Nu(),o.enqueueAndForget(()=>gC(i,p)),g.fromCache&&c.source==="server"?h.reject(new ae(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new yC(l,f,{includeMetadataChanges:!0,qa:!0});return pC(i,p)}(await BC(t),t.asyncQueue,e,n,s)),s.promise}function Ey(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const gp=new Map;const Ty="firestore.googleapis.com",mp=!0;class _p{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ae(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ty,this.ssl=mp}else this.host=e.host,this.ssl=e.ssl??mp;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ey;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mS)throw new ae(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ey(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ae(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ae(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ae(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class il{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _p({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _p(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new q1;switch(s.type){case"firstParty":return new K1(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ae(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=gp.get(n);s&&(oe("ComponentProvider","Removing Datastore"),gp.delete(n),s.terminate())}(this),Promise.resolve()}}function HC(t,e,n,s={}){t=$i(t,il);const r=Br(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;r&&(Yg(`https://${l}`),Jg("Firestore",!0)),i.host!==Ty&&i.host!==l&&Or("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:r,emulatorOptions:s};if(!ws(c,o)&&(t._setSettings(c),s.mockUserToken)){let h,f;if(typeof s.mockUserToken=="string")h=s.mockUserToken,f=Tt.MOCK_USER;else{h=WE(s.mockUserToken,t._app?.options.projectId);const p=s.mockUserToken.sub||s.mockUserToken.user_id;if(!p)throw new ae(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Tt(p)}t._authCredentials=new z1(new h_(h,f))}}class Kr{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Kr(this.firestore,e,this._query)}}class ut{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ms(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ut(this.firestore,e,this._key)}toJSON(){return{type:ut._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(to(n,ut._jsonSchema))return new ut(e,s||null,new le(Be.fromString(n.referencePath)))}}ut._jsonSchemaVersion="firestore/documentReference/1.0",ut._jsonSchema={type:Ze("string",ut._jsonSchemaVersion),referencePath:Ze("string")};class ms extends Kr{constructor(e,n,s){super(e,n,x_(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ut(this.firestore,null,new le(e))}withConverter(e){return new ms(this.firestore,e,this._path)}}function tn(t,e,...n){if(t=pt(t),f_("collection","path",e),t instanceof il){const s=Be.fromString(e,...n);return xd(s),new ms(t,null,s)}{if(!(t instanceof ut||t instanceof ms))throw new ae(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Be.fromString(e,...n));return xd(s),new ms(t.firestore,null,s)}}function qC(t,e,...n){if(t=pt(t),arguments.length===1&&(e=Ru.newId()),f_("doc","path",e),t instanceof il){const s=Be.fromString(e,...n);return Pd(s),new ut(t,null,new le(s))}{if(!(t instanceof ut||t instanceof ms))throw new ae(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Be.fromString(e,...n));return Pd(s),new ut(t.firestore,t instanceof ms?t.converter:null,new le(s))}}const yp="AsyncQueue";class vp{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ry(this,"async_queue_retry"),this._c=()=>{const s=Yl();s&&oe(yp,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Yl();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Yl();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new gs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Gr(e))throw e;oe(yp,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,zn("INTERNAL UNHANDLED ERROR: ",wp(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=zu.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&fe(47125,{Pc:wp(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function wp(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class ol extends il{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new vp,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vp(e),this._firestoreClient=void 0,await e}}}function zC(t,e){const n=typeof t=="object"?t:lu(),s=typeof t=="string"?t:fa,r=er(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=zE("firestore");i&&HC(r,...i)}return r}function Iy(t){if(t._terminated)throw new ae(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||GC(t),t._firestoreClient}function GC(t){const e=t._freezeSettings(),n=function(r,i,o,l){return new hR(r,i,o,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,Ey(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new FC(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(r){const i=r?._online.build();return{_offline:r?._offline.build(i),_online:i}}(t._componentsProvider))}class Kt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kt(gt.fromBase64String(e))}catch(n){throw new ae(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Kt(gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(to(e,Kt._jsonSchema))return Kt.fromBase64String(e.bytes)}}Kt._jsonSchemaVersion="firestore/bytes/1.0",Kt._jsonSchema={type:Ze("string",Kt._jsonSchemaVersion),bytes:Ze("string")};class Yu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ae(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class by{constructor(e){this._methodName=e}}class An{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ae(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ae(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:An._jsonSchemaVersion}}static fromJSON(e){if(to(e,An._jsonSchema))return new An(e.latitude,e.longitude)}}An._jsonSchemaVersion="firestore/geoPoint/1.0",An._jsonSchema={type:Ze("string",An._jsonSchemaVersion),latitude:Ze("number"),longitude:Ze("number")};class Rn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Rn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(to(e,Rn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Rn(e.vectorValues);throw new ae(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Rn._jsonSchemaVersion="firestore/vectorValue/1.0",Rn._jsonSchema={type:Ze("string",Rn._jsonSchemaVersion),vectorValues:Ze("object")};const WC=/^__.*__$/;class KC{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new sr(e,this.data,this.fieldMask,n,this.fieldTransforms):new so(e,this.data,n,this.fieldTransforms)}}function Ay(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe(40011,{Ac:t})}}class Ju{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ju({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ta(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Ay(this.Ac)&&WC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class QC{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||nl(e)}Cc(e,n,s,r=!1){return new Ju({Ac:e,methodName:n,Dc:s,path:dt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ry(t){const e=t._freezeSettings(),n=nl(t._databaseId);return new QC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function YC(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);Py("Data must be an object, but it was:",o,s);const l=Sy(s,o);let c,h;if(i.merge)c=new rn(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const g=XC(e,p,n);if(!o.contains(g))throw new ae(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);eP(f,g)||f.push(g)}c=new rn(f),h=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,h=o.fieldTransforms;return new KC(new Wt(l),c,h)}function JC(t,e,n,s=!1){return Xu(n,t.Cc(s?4:3,e))}function Xu(t,e){if(Cy(t=pt(t)))return Py("Unsupported field value:",e,t),Sy(t,e);if(t instanceof by)return function(s,r){if(!Ay(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const l of s){let c=Xu(l,r.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=pt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return VR(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=qe.fromDate(s);return{timestampValue:ya(r.serializer,i)}}if(s instanceof qe){const i=new qe(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ya(r.serializer,i)}}if(s instanceof An)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Kt)return{bytesValue:W_(r.serializer,s._byteString)};if(s instanceof ut){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Mu(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Rn)return function(o,l){return{mapValue:{fields:{[E_]:{stringValue:T_},[da]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return Du(l.serializer,h)})}}}}}}(s,r);throw r.Sc(`Unsupported field value: ${Wa(s)}`)}(t,e)}function Sy(t,e){const n={};return g_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):tr(t,(s,r)=>{const i=Xu(r,e.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function Cy(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qe||t instanceof An||t instanceof Kt||t instanceof ut||t instanceof by||t instanceof Rn)}function Py(t,e,n){if(!Cy(n)||!d_(n)){const s=Wa(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function XC(t,e,n){if((e=pt(e))instanceof Yu)return e._internalPath;if(typeof e=="string")return xy(t,e);throw Ta("Field path arguments must be of type string or ",t,!1,void 0,n)}const ZC=new RegExp("[~\\*/\\[\\]]");function xy(t,e,n){if(e.search(ZC)>=0)throw Ta(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Yu(...e.split("."))._internalPath}catch{throw Ta(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ta(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new ae(z.INVALID_ARGUMENT,l+t+c)}function eP(t,e){return t.some(n=>n.isEqual(e))}class ky{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Zu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class tP extends ky{data(){return super.data()}}function Zu(t,e){return typeof e=="string"?xy(t,e):e instanceof Yu?e._internalPath:e._delegate._internalPath}function nP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ae(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eh{}class sP extends eh{}function _s(t,e,...n){let s=[];e instanceof eh&&s.push(e),s=s.concat(n),function(i){const o=i.filter(c=>c instanceof th).length,l=i.filter(c=>c instanceof al).length;if(o>1||o>0&&l>0)throw new ae(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)t=r._apply(t);return t}class al extends sP{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new al(e,n,s)}_apply(e){const n=this._parse(e);return Dy(e._query,n),new Kr(e.firestore,e.converter,Cc(e._query,n))}_parse(e){const n=Ry(e.firestore);return function(i,o,l,c,h,f,p){let g;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new ae(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Tp(p,f);const D=[];for(const O of p)D.push(Ep(c,i,O));g={arrayValue:{values:D}}}else g=Ep(c,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Tp(p,f),g=JC(l,o,p,f==="in"||f==="not-in");return Xe.create(h,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Gs(t,e,n){const s=e,r=Zu("where",t);return al._create(r,s,n)}class th extends eh{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new th(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:hn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let o=r;const l=i.getFlattenedFilters();for(const c of l)Dy(o,c),o=Cc(o,c)}(e._query,n),new Kr(e.firestore,e.converter,Cc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Ep(t,e,n){if(typeof(n=pt(n))=="string"){if(n==="")throw new ae(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!k_(e)&&n.indexOf("/")!==-1)throw new ae(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Be.fromString(n));if(!le.isDocumentKey(s))throw new ae(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Fd(t,new le(s))}if(n instanceof ut)return Fd(t,n._key);throw new ae(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wa(n)}.`)}function Tp(t,e){if(!Array.isArray(t)||t.length===0)throw new ae(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Dy(t,e){const n=function(r,i){for(const o of r)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ae(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class rP{convertValue(e,n="none"){switch(bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Is(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return tr(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){const n=e.fields?.[da].arrayValue?.values?.map(s=>Ye(s.doubleValue));return new Rn(n)}convertGeoPoint(e){return new An(Ye(e.latitude),Ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Ya(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(ji(e));default:return null}}convertTimestamp(e){const n=Ts(e);return new qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Be.fromString(e);Ve(Z_(s),9688,{name:e});const r=new Hi(s.get(1),s.get(3)),i=new le(s.popFirst(5));return r.isEqual(n)||zn(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function iP(t,e,n){let s;return s=t?t.toFirestore(e):e,s}class Co{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Cr extends ky{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ho(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Zu("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Cr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Cr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Cr._jsonSchema={type:Ze("string",Cr._jsonSchemaVersion),bundleSource:Ze("string","DocumentSnapshot"),bundleName:Ze("string"),bundle:Ze("string")};class Ho extends Cr{data(e={}){return super.data(e)}}class Pr{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Co(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Ho(this._firestore,this._userDataWriter,s.key,s,new Co(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ae(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>{const c=new Ho(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Co(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Ho(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Co(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,f=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:oP(l.type),doc:c,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Pr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ru.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function oP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe(61501,{type:t})}}Pr._jsonSchemaVersion="firestore/querySnapshot/1.0",Pr._jsonSchema={type:Ze("string",Pr._jsonSchemaVersion),bundleSource:Ze("string","QuerySnapshot"),bundleName:Ze("string"),bundle:Ze("string")};class aP extends rP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ut(this.firestore,null,n)}}function ys(t){t=$i(t,Kr);const e=$i(t.firestore,ol),n=Iy(e),s=new aP(e);return nP(t._query),jC(n,t._query).then(r=>new Pr(e,s,t,r))}function lP(t){return Ny($i(t.firestore,ol),[new Nu(t._key,In.none())])}function Uc(t,e){const n=$i(t.firestore,ol),s=qC(t),r=iP(t.converter,e);return Ny(n,[YC(Ry(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,In.exists(!1))]).then(()=>s)}function Ny(t,e){return function(s,r){const i=new gs;return s.asyncQueue.enqueueAndForget(async()=>CC(await $C(s),r,i)),i.promise}(Iy(t),e)}(function(e,n=!0){(function(r){qr=r})(jr),Pn(new un("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),l=new ol(new G1(s.getProvider("auth-internal")),new Q1(o,s.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ae(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hi(h.options.projectId,f)}(o,r),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Yt(Ad,Rd,e),Yt(Ad,Rd,"esm2020")})();const cP={apiKey:"AIzaSyBREo7YpHmycRgjyftoxkiFMLwMVePqeKc",authDomain:"happy-tri-friends.firebaseapp.com",databaseURL:"https://happy-tri-friends-default-rtdb.europe-west1.firebasedatabase.app",projectId:"happy-tri-friends",storageBucket:"happy-tri-friends.firebasestorage.app",messagingSenderId:"442257914194",appId:"1:442257914194:web:bf5e1c5cb21cac78e5e28b",measurementId:"G-RV9XDZH7J9"},nh=rm(cP);Ub(nh);const De=j1(nh),Vy=new Ln;Vy.setCustomParameters({prompt:"select_account"});const nn=zC(nh),uP={class:"flex flex-col items-center md:flex-row md:justify-between text-white p-4"},hP={class:"flex flex-wrap justify-center space-x-4 text-sm md:text-base"},fP={class:"flex flex-col gap-2 items-end"},dP={key:1,class:"flex items-center gap-3"},pP={__name:"htfHeader",setup(t){const e=ou(),n=Re(!1),s=Re(""),r=["kulikalovdenis@gmail.com","bugary20@gmail.com"],i=Rt(()=>n.value&&r.includes(s.value||"")),o=Rt(()=>i.value?"/admin":"/user");Qi(()=>{qa(De,h=>{h?(n.value=!0,s.value=h.email):(n.value=!1,s.value="")})});function l(){alert("Welcome to Happy TRI Friends!")}async function c(){try{await kA(De),e.push("/")}catch(h){console.error(" :",h)}}return(h,f)=>{const p=og("router-link");return ne(),re("header",uP,[ze(p,{to:"/"},{default:hr(()=>[...f[0]||(f[0]=[I("img",{src:ME,alt:"Logo",class:"w-20 h-auto mb-4 md:mb-0 cursor-pointer hover:opacity-80 transition"},null,-1)])]),_:1}),I("ul",hP,[f[3]||(f[3]=I("li",null,[I("a",{href:"#",class:"menu-link font-bold hover:text-yellow-400"}," ")],-1)),f[4]||(f[4]=I("li",null,[I("a",{href:"#",class:"menu-link font-bold hover:text-yellow-400"},"")],-1)),f[5]||(f[5]=I("li",null,[I("a",{href:"#",class:"menu-link font-bold hover:text-yellow-400"}," ")],-1)),I("li",null,[ze(p,{to:"/schedule",class:"menu-link font-bold hover:text-yellow-400"},{default:hr(()=>[...f[1]||(f[1]=[_r("",-1)])]),_:1})]),f[6]||(f[6]=Rg('<li data-v-d817f29a><a href="#" class="menu-link font-bold hover:text-yellow-400" data-v-d817f29a> </a></li><li data-v-d817f29a><a href="#" class="menu-link font-bold hover:text-yellow-400" data-v-d817f29a></a></li><li data-v-d817f29a><a href="#" class="menu-link font-bold hover:text-yellow-400" data-v-d817f29a> </a></li><li data-v-d817f29a><a href="#" class="menu-link font-bold hover:text-yellow-400" data-v-d817f29a> </a></li><li data-v-d817f29a><a href="#" class="menu-link font-bold hover:text-yellow-400" data-v-d817f29a> </a></li>',5)),I("li",null,[n.value?lt("",!0):(ne(),Yo(p,{key:0,to:"/login",class:"menu-link font-bold hover:text-yellow-400"},{default:hr(()=>[...f[2]||(f[2]=[_r("",-1)])]),_:1}))])]),I("div",fP,[I("button",{type:"button",onClick:l,class:"bg-yellow-400 text-black font-bold py-2 px-6 rounded-full hover:bg-yellow-500 transition"},"  "),n.value?(ne(),re("div",dP,[ze(p,{to:o.value,class:"flex items-center gap-2 bg-transparent border-2 border-white text-white font-semibold py-1.5 px-4 rounded-lg hover:bg-white hover:text-black transition"},{default:hr(()=>[...f[8]||(f[8]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"})],-1),_r("  ",-1)])]),_:1},8,["to"]),I("button",{onClick:c,title:"",class:"p-2 bg-transparent border-2 border-white text-white rounded-lg hover:bg-red-500 hover:border-red-500 transition"},[...f[9]||(f[9]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z","clip-rule":"evenodd"})],-1)])])])):(ne(),Yo(p,{key:0,to:"/login",class:"flex items-center gap-2 bg-transparent border-2 border-white text-white font-semibold py-1.5 px-4 rounded-lg hover:bg-white hover:text-black transition"},{default:hr(()=>[...f[7]||(f[7]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 011 1v12a1 1 0 11-2 0V4a1 1 0 011-1zm7.707 3.293a1 1 0 010 1.414L9.414 9H17a1 1 0 110 2H9.414l1.293 1.293a1 1 0 01-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),_r("    ",-1)])]),_:1}))])])}}},ao=ru(pP,[["__scopeId","data-v-d817f29a"]]),gP={},mP={class:"home text-center text-white"};function _P(t,e){return ne(),re("div",mP,[...e[0]||(e[0]=[I("div",{class:"uppercase text-sm tracking-widest font-light mb-10"},"triathlon club",-1),I("div",{class:"text-6xl font-bold mb-10"},"Happy TRI Friends",-1),I("div",{class:"text-lg text-white"},"Swimmius. Bikeus. Runius",-1)])])}const yP=ru(gP,[["render",_P]]),ll="/HTF/assets/background-CxF9_idu.png",vP="/HTF/assets/timur-CmFIxDiN.png",wP={class:"relative z-10"},EP={class:"text-center p-10 md:p-40"},TP={class:"flex flex-col md:flex-row items-center justify-center md:justify-between h-auto md:h-150 bg-gray-100 text-black p-4"},IP=["src"],bP={__name:"MainPage",setup(t){ou();function e(){window.scrollBy({top:window.innerHeight,behavior:"smooth"})}return(n,s)=>(ne(),re(He,null,[I("div",{class:"relative min-h-screen bg-cover bg-center bg-fixed",style:Ss({backgroundImage:`url(${Ft(ll)})`})},[s[0]||(s[0]=I("div",{class:"absolute inset-0 bg-black opacity-50"},null,-1)),I("div",wP,[ze(ao),I("main",EP,[ze(yP)])]),I("button",{onClick:e,class:"absolute bottom-5 left-1/2 transform -translate-x-1/2 bg-yellow-400 text-black font-bold py-2 px-4 md:px-8 rounded-full hover:bg-yellow-500 transition"},"   ")],4),s[2]||(s[2]=I("div",{class:"flex flex-col items-center justify-center h-auto bg-white text-black p-4 md:h-80"},[I("h1",{class:"text-2xl md:text-4xl font-bold mb-4 md:mb-10"},"   ,   !"),I("p",{class:"text-base md:text-lg mb-4 md:mb-0"},"     .        ,   .")],-1)),I("div",TP,[I("img",{src:Ft(vP),alt:"Timur",class:"w-2/3 md:w-1/3 h-auto mb-4 md:mb-0 ml-0 md:ml-20"},null,8,IP),s[1]||(s[1]=I("div",{class:"w-full md:w-1/2 text-center md:text-left"},[I("h2",{class:"text-xl md:text-2xl font-bold mb-2 md:mb-4"},""),I("p",{class:"text-base md:text-lg"},"  ")],-1))])],64))}},AP="/HTF/HTF.png",RP={class:"relative z-10"},SP={__name:"LoginView",setup(t){const e=ou(),n=["kulikalovdenis@gmail.com","bugary20@gmail.com"];async function s(){try{const i=(await JA(De,Vy)).user;n.includes(i.email)?e.push("/admin"):e.push("/user")}catch(r){r.code&&r.code!=="auth/popup-closed-by-user"&&r.code!=="auth/cancelled-popup-request"&&console.error(" :",r.code,r.message)}}return(r,i)=>(ne(),re("div",{class:"relative min-h-screen bg-cover bg-center bg-fixed",style:Ss({backgroundImage:`url(${Ft(ll)})`})},[i[5]||(i[5]=I("div",{class:"absolute inset-0 bg-black opacity-50"},null,-1)),I("div",RP,[ze(ao),I("div",{class:"flex flex-col items-center justify-center min-h-[calc(100vh-100px)] p-4"},[I("div",{class:"bg-gradient-to-br from-blue-50 via-white to-blue-50 p-10 rounded-2xl shadow-2xl max-w-md w-full border border-blue-100"},[i[1]||(i[1]=I("div",{class:"flex justify-center mb-6"},[I("img",{src:AP,alt:"HTF Logo",class:"w-24 h-24 rounded-full shadow-lg border-4 border-blue-500"})],-1)),i[2]||(i[2]=I("h1",{class:"text-3xl font-bold mb-3 text-center text-gray-800"},"!",-1)),i[3]||(i[3]=I("p",{class:"text-center text-gray-600 mb-8"},"Happy TRI Friends",-1)),I("button",{onClick:s,class:"w-full flex items-center justify-center gap-3 bg-white hover:bg-gray-50 text-gray-800 font-semibold px-6 py-4 rounded-xl transition shadow-md border border-gray-200 hover:shadow-lg"},[...i[0]||(i[0]=[Rg('<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"></path><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"></path><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"></path><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"></path></svg>   Google ',2)])]),i[4]||(i[4]=I("p",{class:"text-center text-sm text-gray-500 mt-6"},"      ",-1))])])])],4))}},CP={swimming:[" "," "],running:[""," "],cycling:[""],other:[" "," ",""]},PP=["",""," ",""],Ip=t=>CP[t]||PP,xP={swimming:[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}],running:[{value:"RUN",label:"LIGHT"},{value:"RUN",label:"LONG"},{value:"RUN",label:""}],cycling:[{value:"BIKE",label:" "},{value:"BIKE",label:" "},{value:"BIKE",label:""},{value:"BIKE",label:"Coffee Ride"}],other:[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}]},kP=[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}],bp=t=>xP[t]||kP,DP=[" , . .  36"," , 61"," , .  5","",""," "," "],$c=[{value:"swimming",label:" ",icon:"",name:""},{value:"running",label:" ",icon:"",name:""},{value:"cycling",label:" ",icon:"",name:""},{value:"other",label:" ",icon:"",name:""}],sh=t=>{const e=$c.find(n=>n.value===t||n.name===t);return e?e.icon:""},NP={class:"relative z-10 h-full flex flex-col"},VP={class:"bg-gray-800"},OP={class:"flex gap-4 p-4 flex-1 min-h-0"},MP={class:"w-80 bg-white bg-opacity-90 rounded-2xl shadow-lg p-4 flex-shrink-0 overflow-y-auto flex flex-col"},LP={class:"flex flex-col items-center mb-6 pb-6 border-b border-gray-200"},FP={key:0,class:"w-20 h-20 rounded-full mb-3 shadow-md overflow-hidden bg-gray-200"},UP=["src","alt"],$P={key:1,class:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-bold text-2xl mb-3 shadow-md"},BP={class:"flex items-center justify-center gap-2 w-full"},jP={class:"font-semibold text-gray-800 text-center"},HP={class:"text-sm text-gray-500 text-center break-all"},qP={class:"flex-1 overflow-y-auto"},zP={key:0,class:"bg-white bg-opacity-90 rounded-2xl shadow-lg p-6"},GP={key:0,class:"text-center py-12"},WP={key:1,class:"text-center py-12"},KP={key:2,class:"space-y-6"},QP={class:"bg-gradient-to-r from-blue-600 to-blue-800 text-white px-6 py-4"},YP={class:"text-2xl font-bold"},JP={class:"text-sm text-blue-100"},XP={class:"p-6 space-y-4 bg-gray-50"},ZP={class:"flex-1"},ex={class:"flex items-center gap-3 mb-2"},tx={class:"text-2xl"},nx={class:"text-xl font-bold text-gray-800"},sx={key:0,class:"px-3 py-1 rounded-full text-sm font-semibold bg-yellow-100 text-yellow-800"},rx={class:"flex items-center gap-6 text-gray-600"},ix={class:"flex items-center gap-2"},ox={class:"font-semibold"},ax={class:"flex items-center gap-2"},lx={class:"flex items-center gap-2"},cx={class:"ml-6 flex flex-col gap-2"},ux={key:0,disabled:"",class:"px-6 py-3 rounded-lg font-semibold bg-gray-400 text-white cursor-not-allowed shadow-lg opacity-60"},hx=["onClick"],fx=["onClick"],dx={key:3,class:"fixed bottom-8 right-8 bg-green-500 text-white px-6 py-4 rounded-lg shadow-2xl animate-bounce"},px={class:"font-semibold"},gx={__name:"UserView",setup(t){const e=Re(""),n=Re(""),s=Re(""),r=Re("registration"),i=Re(!1),o=Re(null),l=Re([]),c=Re(""),h=()=>{const $=new Date,H=$.getDay(),b=H===0?-6:1-H,_=new Date($);_.setDate($.getDate()+b),_.setHours(0,0,0,0);const v=new Date(_);return v.setDate(_.getDate()+6),v.setHours(23,59,59,999),{monday:_,sunday:v}},f=$=>new Date($).toLocaleDateString("uk-UA",{day:"2-digit",month:"long"}),p=Rt(()=>{if(!o.value||!o.value.trainings)return{};const $={};o.value.trainings.forEach(_=>{const v=_.dayName;$[v]||($[v]=[]),$[v].push(_)});const H=["","","","","'","",""],b={};return H.forEach(_=>{$[_]&&(b[_]=$[_].sort((v,R)=>v.time.localeCompare(R.time)))}),b}),g=$=>sh($),w=$=>({:"bg-green-100 text-green-800",:"bg-yellow-100 text-yellow-800",:"bg-red-100 text-red-800"})[$]||"bg-gray-100 text-gray-800",D=async()=>{try{i.value=!0;const{monday:$,sunday:H}=h(),b=$.toISOString().split("T")[0],_=H.toISOString().split("T")[0],v=_s(tn(nn,"schedules")),R=await ys(v),A=[];R.forEach(C=>{const E=C.data(),Ue=E.weekStart,tt=E.weekEnd;Ue>=b&&tt<=_&&A.push({id:C.id,...E})}),A.length>0?(A.sort((C,E)=>{const Ue=new Date(C.createdAt||0);return new Date(E.createdAt||0)-Ue}),o.value=A[0],await O()):o.value=null}catch($){console.error("  :",$)}finally{i.value=!1}},O=async()=>{if(De.currentUser)try{const $=_s(tn(nn,"registrations"),Gs("userId","==",De.currentUser.uid)),H=await ys($);l.value=H.docs.map(b=>b.data().trainingId)}catch{}},F=$=>{const H=`${o.value.id}_${$.date}_${$.time}`;return l.value.includes(H)},Q=$=>{const H=new Date(`${$.date}T${$.time}:00`),b=new Date,_=2*60,v=b.getTimezoneOffset(),R=new Date(b.getTime()+(_+v)*6e4);return H<R},V=async $=>{if(!De.currentUser){alert(" ,     ");return}try{const H=`${o.value.id}_${$.date}_${$.time}`;if(F($))return;await Uc(tn(nn,"registrations"),{userId:De.currentUser.uid,userEmail:De.currentUser.email,userName:De.currentUser.displayName||De.currentUser.email,userPhoto:De.currentUser.photoURL||null,trainingId:H,scheduleId:o.value.id,trainingDate:$.date,trainingTime:$.time,trainingName:$.name,trainingType:$.type,registeredAt:new Date().toISOString()}),l.value.push(H),c.value=`   ${$.name}`,"Notification"in window&&Notification.permission==="granted"&&new Notification("HTF -  ",{body:`${$.dayName}, ${$.time} - ${$.name}`,icon:"/HTF/HTF.png"}),setTimeout(()=>{c.value=""},3e3)}catch(H){alert(" : "+H.message)}},M=async $=>{if(De.currentUser)try{const H=`${o.value.id}_${$.date}_${$.time}`,b=_s(tn(nn,"registrations"),Gs("userId","==",De.currentUser.uid),Gs("trainingId","==",H)),_=await ys(b);if(!_.empty){const v=_.docs[0];await deleteDoc(v.ref);const R=l.value.indexOf(H);R>-1&&l.value.splice(R,1),c.value=`  ${$.name} `,"Notification"in window&&Notification.permission==="granted"&&new Notification("HTF -  ",{body:`${$.dayName}, ${$.time} - ${$.name}`,icon:"/HTF/HTF.png"}),setTimeout(()=>{c.value=""},3e3)}}catch(H){alert(" : "+H.message)}};Qi(()=>{qa(De,$=>{$&&(e.value=$.displayName||"",n.value=$.email||"",s.value=$.photoURL||"",r.value==="registration"&&D())})}),qs(r,$=>{$==="registration"&&D()});async function Y(){await De.signOut(),window.location.href="/HTF/"}return($,H)=>(ne(),re("div",{class:"relative h-screen bg-cover bg-center bg-fixed overflow-hidden",style:Ss({backgroundImage:`url(${Ft(ll)})`})},[H[10]||(H[10]=I("div",{class:"absolute inset-0 bg-black opacity-40"},null,-1)),I("div",NP,[I("div",VP,[ze(ao)]),I("div",OP,[I("aside",MP,[I("div",LP,[s.value?(ne(),re("div",FP,[I("img",{src:s.value,alt:e.value,class:"w-full h-full object-cover",referrerpolicy:"no-referrer"},null,8,UP)])):(ne(),re("div",$P,ve(e.value?e.value.charAt(0).toUpperCase():"U"),1)),I("div",BP,[I("p",jP,ve(e.value||""),1),I("button",{onClick:Y,class:"bg-red-500 hover:bg-red-600 text-white p-1.5 rounded transition flex-shrink-0",title:""},[...H[1]||(H[1]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z","clip-rule":"evenodd"})],-1)])])]),I("p",HP,ve(n.value),1)]),I("div",null,[H[2]||(H[2]=I("h3",{class:"text-sm font-semibold text-gray-500 uppercase mb-3"},"",-1)),I("button",{onClick:H[0]||(H[0]=b=>r.value="registration"),class:Et(["w-full text-left px-4 py-3 rounded-lg mb-2 transition",r.value==="registration"?"bg-blue-500 text-white":"hover:bg-gray-100 text-gray-700"])},"     ",2)])]),I("main",qP,[r.value==="registration"?(ne(),re("div",zP,[H[9]||(H[9]=I("h1",{class:"text-3xl font-bold mb-6"},"   ",-1)),i.value?(ne(),re("div",GP,[...H[3]||(H[3]=[I("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"},null,-1),I("p",{class:"text-gray-600"}," ...",-1)])])):!o.value||!o.value.trainings||o.value.trainings.length===0?(ne(),re("div",WP,[...H[4]||(H[4]=[I("p",{class:"text-gray-600 text-xl mb-4"},"       ",-1),I("p",{class:"text-gray-500"},"   ",-1)])])):(ne(),re("div",KP,[(ne(!0),re(He,null,Ht(p.value,(b,_)=>(ne(),re("div",{key:_,class:"border border-gray-200 rounded-xl overflow-hidden"},[I("div",QP,[I("h2",YP,ve(_),1),I("p",JP,ve(f(b[0].date)),1)]),I("div",XP,[(ne(!0),re(He,null,Ht(b,(v,R)=>(ne(),re("div",{key:R,class:"flex items-center justify-between p-4 bg-white rounded-lg hover:shadow-md transition-shadow border border-gray-200"},[I("div",ZP,[I("div",ex,[I("span",tx,ve(g(v.type)),1),I("h3",nx,ve(v.name),1),I("span",{class:Et(["px-3 py-1 rounded-full text-sm font-semibold",w(v.difficulty)])},ve(v.difficulty),3),v.isPaid?(ne(),re("span",sx,"   ")):lt("",!0)]),I("div",rx,[I("div",ix,[H[5]||(H[5]=I("span",null,"",-1)),I("span",ox,ve(v.time),1)]),I("div",ax,[H[6]||(H[6]=I("span",null,"",-1)),I("span",null,ve(v.address),1)]),I("div",lx,[H[7]||(H[7]=I("span",null,"",-1)),I("span",null,ve(v.type),1)])])]),I("div",cx,[Q(v)&&!F(v)?(ne(),re("button",ux,"    ")):F(v)?(ne(),re(He,{key:2},[H[8]||(H[8]=I("button",{class:"px-6 py-3 rounded-lg font-semibold bg-green-500 text-white cursor-default shadow-lg"},"   ",-1)),Q(v)?lt("",!0):(ne(),re("button",{key:0,onClick:A=>M(v),class:"px-6 py-2 rounded-lg font-semibold transition-all transform hover:scale-105 bg-red-500 text-white hover:bg-red-600 shadow-lg hover:shadow-xl"},"   ",8,fx))],64)):(ne(),re("button",{key:1,onClick:A=>V(v),class:"px-6 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 bg-blue-600 text-white hover:bg-blue-700 shadow-lg hover:shadow-xl"},"   ",8,hx))])]))),128))])]))),128))])),c.value?(ne(),re("div",dx,[I("p",px," "+ve(c.value),1)])):lt("",!0)])):lt("",!0)])])])],4))}},mx={class:"relative z-10 h-full flex flex-col"},_x={class:"bg-gray-800"},yx={class:"flex gap-4 p-4 flex-1 min-h-0"},vx={class:"w-80 bg-white bg-opacity-90 rounded-2xl shadow-lg p-4 flex-shrink-0 overflow-y-auto flex flex-col"},wx={class:"flex flex-col items-center mb-6 pb-6 border-b border-gray-200"},Ex={key:0,class:"w-20 h-20 rounded-full mb-3 shadow-md overflow-hidden bg-gray-200"},Tx=["src","alt"],Ix={key:1,class:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-bold text-2xl mb-3 shadow-md"},bx={class:"flex items-center justify-center gap-2 w-full"},Ax={class:"font-semibold text-gray-800 text-center"},Rx={class:"text-sm text-gray-500 text-center break-all"},Sx={class:"mb-6"},Cx={class:"flex-1 overflow-y-auto"},Px={key:0,class:"bg-white bg-opacity-90 rounded-2xl shadow-lg p-6"},xx={class:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200"},kx={class:"grid grid-cols-2 gap-4"},Dx={key:0,class:"text-red-600 text-sm mt-2"},Nx={class:"space-y-6"},Vx={class:"text-xl font-semibold mb-4 text-gray-800"},Ox={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Mx={class:"flex gap-2"},Lx=["onUpdate:modelValue"],Fx=["value"],Ux=["onUpdate:modelValue","list"],$x=["id"],Bx=["value"],jx=["onUpdate:modelValue"],Hx=["value"],qx=["onUpdate:modelValue"],zx=["onUpdate:modelValue"],Gx={class:"md:col-span-2"},Wx={class:"flex gap-2"},Kx=["onUpdate:modelValue"],Qx={id:"addresses"},Yx=["value"],Jx=["onClick"],Xx=["onClick"],Zx={key:0,class:"mt-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg"},ek={key:1,class:"mt-4 p-4 bg-green-100 border-2 border-green-500 text-green-800 rounded-lg shadow-lg animate-pulse"},tk={key:2,class:"mt-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg"},nk={key:3,class:"mt-8 p-4 bg-gray-50 rounded-xl"},sk={class:"flex flex-col items-center gap-4"},rk={key:1,class:"bg-white bg-opacity-90 rounded-2xl shadow-lg p-6"},ik={key:0,class:"text-center py-12"},ok={key:1,class:"text-center py-12"},ak={key:2,class:"space-y-6"},lk={class:"bg-gradient-to-r from-blue-600 to-blue-800 text-white px-6 py-4"},ck={class:"text-2xl font-bold"},uk={class:"text-sm text-blue-100"},hk={class:"p-6 space-y-4 bg-gray-50"},fk={class:"flex-1"},dk={class:"flex items-center gap-3 mb-2"},pk={class:"text-2xl"},gk={class:"text-xl font-bold text-gray-800"},mk={key:0,class:"px-3 py-1 rounded-full text-sm font-semibold bg-yellow-100 text-yellow-800"},_k={class:"flex items-center gap-6 text-gray-600"},yk={class:"flex items-center gap-2"},vk={class:"font-semibold"},wk={class:"flex items-center gap-2"},Ek={class:"flex items-center gap-2"},Tk={class:"ml-6 flex flex-col gap-2"},Ik={key:0,disabled:"",class:"px-6 py-3 rounded-lg font-semibold bg-gray-400 text-white cursor-not-allowed shadow-lg opacity-60"},bk=["onClick"],Ak=["onClick"],Rk={key:3,class:"fixed bottom-8 right-8 bg-green-500 text-white px-6 py-4 rounded-lg shadow-2xl animate-bounce"},Sk={class:"font-semibold"},Ck={__name:"AdminView",setup(t){const e=Re(""),n=Re(""),s=Re(""),r=Re("schedule"),i=Re(null),o=Re(!1),l=Re(!1),c=Re(!1),h=Re(""),f=Re(""),p=Re(!1),g=Re(!1),w=Re(null),D=Re([]),O=Re(""),F=Re(!1),Q=Re("");function V(Z){const N=new Date(Z),W=["","","","","","","","","","","",""];return`${N.getDate()} ${W[N.getMonth()]}`}function M(Z){return new Date(Z).getFullYear()}const Y=Re([{id:"monday",name:"",trainings:[]},{id:"tuesday",name:"",trainings:[]},{id:"wednesday",name:"",trainings:[]},{id:"thursday",name:"",trainings:[]},{id:"friday",name:"'",trainings:[]},{id:"saturday",name:"",trainings:[]},{id:"sunday",name:"",trainings:[]}]),$=Re(DP);Qi(()=>{qa(De,Z=>{Z&&(e.value=Z.displayName||"",n.value=Z.email||"",s.value=Z.photoURL||"")})}),qs(r,Z=>{Z==="registration"&&Ee()}),Re([]);async function H(){await De.signOut(),window.location.href="/HTF/"}function b(Z){const N=Y.value.find(W=>W.id===Z);N&&N.trainings.push({type:"swimming",name:"",difficulty:"ELEMENTARY",time:"07:00",isPaid:"",address:"",error:!1})}qs(()=>Y.value.map(Z=>Z.trainings.map(N=>N.type)),(Z,N)=>{Y.value.forEach(W=>{W.trainings.forEach(S=>{const q=bp(S.type);q.length>0&&!q.find(ie=>ie.value===S.difficulty)&&(S.difficulty=q[0].value),Ip(S.type).includes(S.name)||(S.name="")})})},{deep:!0});function _(Z,N){const W=Y.value.find(S=>S.id===Z);W&&W.trainings.splice(N,1)}async function v(){if(l.value=!1,c.value=!1,!h.value||!f.value){c.value=!0;return}let Z=!1;if(Y.value.forEach(y=>{y.trainings.forEach(T=>{T.error=!1,(!T.name||!T.type||!T.difficulty||!T.time||!T.address)&&(T.error=!0,Z=!0)})}),Z){l.value=!0;return}o.value=!0,await new Promise(y=>setTimeout(y,100));const N=i.value;if(!N){console.error("Canvas not found");return}const W=N.getContext("2d");N.width=1080,N.height=1920,W.fillStyle="#1e3a5f",W.fillRect(0,0,N.width,N.height),W.fillStyle="#ffffff",W.font="bold 60px Arial",W.textAlign="center",W.fillText(" ",N.width/2,90),W.font="bold 80px Arial",W.fillStyle="#ffd700",W.fillText("HAPPY TRI FRIENDS",N.width/2,190),W.fillStyle="#ffffff",W.font="bold 40px Arial";const S=V(h.value),q=V(f.value),U=M(f.value);W.fillText(`${S} - ${q} ${U}`,N.width/2,260),W.fillStyle="#ffd700",W.font="32px Arial",W.fillText("($)     ",N.width/2,320);let ie=360;const _e={:"",:"",:"",:"","'":"",:"",:""};Y.value.forEach(y=>{if(y.trainings.length>0){const P=y.trainings.length>1?(y.trainings.length-1)*20:0,B=60+y.trainings.length*90+P+30;W.strokeStyle="#ffd700",W.lineWidth=3,W.strokeRect(40,ie,N.width-80,B),W.fillStyle="#ffd700",W.font="bold 40px Arial",W.textAlign="right",W.fillText(_e[y.name]||y.name.substring(0,2),N.width-80,ie+45);let j=ie+70;y.trainings.forEach((L,te)=>{te>0&&(j+=20);const X=$c.find(ce=>ce.value===L.type),J=X?X.icon:"";W.font="45px Arial",W.textAlign="left",W.fillText(J,60,j+35),W.fillStyle="#ffffff",W.font="bold 36px Arial";const K=L.isPaid?" ($)":"";W.fillText(L.name+K,130,j+25),W.fillStyle="#ffd700",W.font="24px Arial",W.fillText(L.difficulty,130,j+55),W.fillStyle="#ffd700",W.font="bold 36px Arial",W.textAlign="right",W.fillText(L.time,N.width-80,j+40),(te===0||L.address!==y.trainings[te-1].address)&&(W.fillStyle="#ffffff",W.font="24px Arial",W.textAlign="left",W.fillText(L.address,130,j+85)),j+=90}),ie+=B+20}})}function R(){const Z=i.value;if(!Z)return;const N=document.createElement("a");N.download="htf-schedule.png",N.href=Z.toDataURL("image/png"),N.click()}function A(Z){const N=new Date(h.value),S={monday:0,tuesday:1,wednesday:2,thursday:3,friday:4,saturday:5,sunday:6}[Z],q=new Date(N);return q.setDate(N.getDate()+S),q.toISOString().split("T")[0]}async function C(){if(p.value=!1,F.value=!1,Q.value="",l.value=!1,c.value=!1,!h.value||!f.value){c.value=!0,F.value=!0,Q.value="      ";return}let Z=!1;if(Y.value.forEach(N=>{N.trainings.forEach(W=>{W.error=!1,(!W.name||!W.type||!W.difficulty||!W.time||!W.address)&&(W.error=!0,Z=!0)})}),Z){l.value=!0,F.value=!0,Q.value="  '  ";return}try{const N=[];Y.value.forEach(S=>{if(S.trainings.length>0){const q=A(S.id);S.trainings.forEach(U=>{N.push({date:q,dayName:S.name,type:U.type,name:U.name,difficulty:U.difficulty,time:U.time,isPaid:U.isPaid==="paid",address:U.address,createdAt:new Date().toISOString(),createdBy:De.currentUser?.email||"unknown"})})}});const W=await Uc(tn(nn,"schedules"),{weekStart:h.value,weekEnd:f.value,trainings:N,createdAt:new Date().toISOString(),createdBy:De.currentUser?.email||"unknown"});if(W&&W.id)p.value=!0,"Notification"in window&&Notification.permission==="granted"?new Notification("HTF -  ",{body:`  ${N.length} `,icon:"/HTF/HTF.png"}):"Notification"in window&&Notification.permission!=="denied"&&Notification.requestPermission().then(S=>{S==="granted"&&new Notification("HTF -  ",{body:`  ${N.length} `,icon:"/HTF/HTF.png"})}),setTimeout(()=>{p.value=!1},5e3);else throw new Error("   ID  ")}catch(N){console.error("  :",N),F.value=!0,Q.value=N.message||"   "}}const E=()=>{const Z=new Date,N=Z.getDay(),W=N===0?-6:1-N,S=new Date(Z);S.setDate(Z.getDate()+W),S.setHours(0,0,0,0);const q=new Date(S);return q.setDate(S.getDate()+6),q.setHours(23,59,59,999),{monday:S,sunday:q}},Ue=Z=>new Date(Z).toLocaleDateString("uk-UA",{day:"2-digit",month:"long"}),tt=Rt(()=>{if(!w.value||!w.value.trainings)return{};const Z={};w.value.trainings.forEach(S=>{const q=S.dayName;Z[q]||(Z[q]=[]),Z[q].push(S)});const N=["","","","","'","",""],W={};return N.forEach(S=>{Z[S]&&(W[S]=Z[S].sort((q,U)=>q.time.localeCompare(U.time)))}),W}),We=Z=>sh(Z),Pe=Z=>({:"bg-green-100 text-green-800",:"bg-yellow-100 text-yellow-800",:"bg-red-100 text-red-800"})[Z]||"bg-gray-100 text-gray-800",Ee=async()=>{if(r.value==="registration")try{g.value=!0;const{monday:Z,sunday:N}=E(),W=Z.toISOString().split("T")[0],S=N.toISOString().split("T")[0],q=_s(tn(nn,"schedules")),U=await ys(q),ie=[];U.forEach(_e=>{const y=_e.data(),T=y.weekStart,P=y.weekEnd;T>=W&&P<=S&&ie.push({id:_e.id,...y})}),ie.length>0?(ie.sort((_e,y)=>{const T=new Date(_e.createdAt||0);return new Date(y.createdAt||0)-T}),w.value=ie[0],await mt()):w.value=null}catch(Z){console.error("  :",Z)}finally{g.value=!1}},mt=async()=>{if(De.currentUser)try{const Z=_s(tn(nn,"registrations"),Gs("userId","==",De.currentUser.uid)),N=await ys(Z);D.value=N.docs.map(W=>W.data().trainingId)}catch{}},Ot=Z=>{const N=`${w.value.id}_${Z.date}_${Z.time}`;return D.value.includes(N)},_t=Z=>{const N=new Date(`${Z.date}T${Z.time}:00`),W=new Date,S=2*60,q=W.getTimezoneOffset(),U=new Date(W.getTime()+(S+q)*6e4);return N<U},nt=async Z=>{if(!De.currentUser){alert(" ,     ");return}try{const N=`${w.value.id}_${Z.date}_${Z.time}`;if(Ot(Z))return;await Uc(tn(nn,"registrations"),{userId:De.currentUser.uid,userEmail:De.currentUser.email,userName:De.currentUser.displayName||De.currentUser.email,userPhoto:De.currentUser.photoURL||null,trainingId:N,scheduleId:w.value.id,trainingDate:Z.date,trainingTime:Z.time,trainingName:Z.name,trainingType:Z.type,registeredAt:new Date().toISOString()}),D.value.push(N),O.value=`   ${Z.name}`,"Notification"in window&&Notification.permission==="granted"&&new Notification("HTF -  ",{body:`${Z.dayName}, ${Z.time} - ${Z.name}`,icon:"/HTF/HTF.png"}),setTimeout(()=>{O.value=""},3e3)}catch(N){alert(" : "+N.message)}},Xt=async Z=>{if(De.currentUser)try{const N=`${w.value.id}_${Z.date}_${Z.time}`,W=_s(tn(nn,"registrations"),Gs("userId","==",De.currentUser.uid),Gs("trainingId","==",N)),S=await ys(W);if(!S.empty){const q=S.docs[0];await lP(q.ref);const U=D.value.indexOf(N);U>-1&&D.value.splice(U,1),O.value=`  ${Z.name} `,"Notification"in window&&Notification.permission==="granted"&&new Notification("HTF -  ",{body:`${Z.dayName}, ${Z.time} - ${Z.name}`,icon:"/HTF/HTF.png"}),setTimeout(()=>{O.value=""},3e3)}}catch(N){alert(" : "+N.message)}};return(Z,N)=>(ne(),re("div",{class:"relative h-screen bg-cover bg-center bg-fixed overflow-hidden",style:Ss({backgroundImage:`url(${Ft(ll)})`})},[N[27]||(N[27]=I("div",{class:"absolute inset-0 bg-black opacity-40"},null,-1)),I("div",mx,[I("div",_x,[ze(ao)]),I("div",yx,[I("aside",vx,[I("div",wx,[s.value?(ne(),re("div",Ex,[I("img",{src:s.value,alt:e.value,class:"w-full h-full object-cover",referrerpolicy:"no-referrer"},null,8,Tx)])):(ne(),re("div",Ix,ve(e.value?e.value.charAt(0).toUpperCase():"A"),1)),I("div",bx,[I("p",Ax,ve(e.value||""),1),I("button",{onClick:H,class:"bg-red-500 hover:bg-red-600 text-white p-1.5 rounded transition flex-shrink-0",title:""},[...N[4]||(N[4]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z","clip-rule":"evenodd"})],-1)])])]),I("p",Rx,ve(n.value),1)]),I("div",Sx,[N[5]||(N[5]=I("h3",{class:"text-sm font-semibold text-gray-500 uppercase mb-3"},"",-1)),I("button",{onClick:N[0]||(N[0]=W=>r.value="schedule"),class:Et(["w-full text-left px-4 py-3 rounded-lg mb-2 transition",r.value==="schedule"?"bg-blue-500 text-white":"hover:bg-gray-100 text-gray-700"])},"    ",2)]),I("div",null,[N[6]||(N[6]=I("h3",{class:"text-sm font-semibold text-gray-500 uppercase mb-3"},"",-1)),I("button",{onClick:N[1]||(N[1]=W=>r.value="registration"),class:Et(["w-full text-left px-4 py-3 rounded-lg mb-2 transition",r.value==="registration"?"bg-blue-500 text-white":"hover:bg-gray-100 text-gray-700"])},"     ",2)])]),I("main",Cx,[r.value==="schedule"?(ne(),re("div",Px,[N[19]||(N[19]=I("h1",{class:"text-3xl font-bold mb-6"}," ",-1)),I("div",xx,[I("div",kx,[I("div",null,[N[7]||(N[7]=I("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"   *",-1)),es(I("input",{"onUpdate:modelValue":N[2]||(N[2]=W=>h.value=W),type:"date",class:Et(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",c.value&&!h.value?"border-red-500":"border-gray-300"])},null,2),[[fi,h.value]])]),I("div",null,[N[8]||(N[8]=I("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"   *",-1)),es(I("input",{"onUpdate:modelValue":N[3]||(N[3]=W=>f.value=W),type:"date",class:Et(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",c.value&&!f.value?"border-red-500":"border-gray-300"])},null,2),[[fi,f.value]])])]),c.value?(ne(),re("p",Dx," '      ")):lt("",!0)]),I("div",Nx,[(ne(!0),re(He,null,Ht(Y.value,W=>(ne(),re("div",{key:W.id,class:"border border-gray-200 rounded-xl p-4 bg-gray-50"},[I("h3",Vx,ve(W.name),1),(ne(!0),re(He,null,Ht(W.trainings,(S,q)=>(ne(),re("div",{key:q,class:"mb-4 p-4 bg-white rounded-lg shadow-sm border border-gray-100"},[I("div",Ox,[I("div",null,[N[9]||(N[9]=I("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"  *",-1)),I("div",Mx,[es(I("select",{"onUpdate:modelValue":U=>S.type=U,class:Et(["px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",S.error&&!S.type?"border-red-500":"border-gray-300"])},[(ne(!0),re(He,null,Ht(Ft($c),U=>(ne(),re("option",{key:U.value,value:U.value},ve(U.label),9,Fx))),128))],10,Lx),[[Dl,S.type]]),es(I("input",{"onUpdate:modelValue":U=>S.name=U,type:"text",placeholder:"  *",list:"training-names-"+S.type,class:Et(["flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",S.error&&!S.name?"border-red-500":"border-gray-300"])},null,10,Ux),[[fi,S.name]]),I("datalist",{id:"training-names-"+S.type},[(ne(!0),re(He,null,Ht(Ft(Ip)(S.type),U=>(ne(),re("option",{key:U,value:U},null,8,Bx))),128))],8,$x)])]),I("div",null,[N[10]||(N[10]=I("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," *",-1)),es(I("select",{"onUpdate:modelValue":U=>S.difficulty=U,class:Et(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",S.error&&!S.difficulty?"border-red-500":"border-gray-300"])},[(ne(!0),re(He,null,Ht(Ft(bp)(S.type),U=>(ne(),re("option",{key:U.value,value:U.value},ve(U.label),9,Hx))),128))],10,jx),[[Dl,S.difficulty]])]),I("div",null,[N[11]||(N[11]=I("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"  *",-1)),es(I("input",{"onUpdate:modelValue":U=>S.time=U,type:"time",class:Et(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",S.error&&!S.time?"border-red-500":"border-gray-300"])},null,10,qx),[[fi,S.time]])]),I("div",null,[N[13]||(N[13]=I("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," ",-1)),es(I("select",{"onUpdate:modelValue":U=>S.isPaid=U,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...N[12]||(N[12]=[I("option",{value:""},"",-1),I("option",{value:"paid"}," ",-1)])],8,zx),[[Dl,S.isPaid]])]),I("div",Gx,[N[14]||(N[14]=I("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," *",-1)),I("div",Wx,[es(I("input",{"onUpdate:modelValue":U=>S.address=U,type:"text",placeholder:"  *",list:"addresses",class:Et(["flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",S.error&&!S.address?"border-red-500":"border-gray-300"])},null,10,Kx),[[fi,S.address]]),I("datalist",Qx,[(ne(!0),re(He,null,Ht($.value,U=>(ne(),re("option",{key:U,value:U},null,8,Yx))),128))]),I("button",{onClick:U=>_(W.id,q),class:"px-3 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition"},"  ",8,Jx)])])])]))),128)),I("button",{onClick:S=>b(W.id),class:"w-full mt-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition"},"    ",8,Xx)]))),128))]),l.value?(ne(),re("div",Zx,[...N[15]||(N[15]=[I("p",{class:"font-semibold"},"  ",-1),I("p",null," ,   '  (  *)",-1)])])):lt("",!0),I("div",{class:"mt-8 flex gap-4"},[I("button",{onClick:v,class:"flex-1 px-6 py-3 bg-green-500 hover:bg-green-600 text-white font-semibold rounded-lg transition text-lg"},"    "),I("button",{onClick:C,class:"flex-1 px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white font-semibold rounded-lg transition text-lg"},"      ")]),p.value?(ne(),re("div",ek,[...N[16]||(N[16]=[I("p",{class:"font-bold text-lg"},"  !",-1),I("p",null,"      Firebase",-1)])])):lt("",!0),F.value?(ne(),re("div",tk,[N[17]||(N[17]=I("p",{class:"font-semibold"},"  ",-1)),I("p",null,ve(Q.value),1)])):lt("",!0),o.value?(ne(),re("div",nk,[N[18]||(N[18]=I("h3",{class:"text-xl font-semibold mb-4"}," ",-1)),I("div",sk,[I("canvas",{ref_key:"scheduleCanvas",ref:i,class:"border border-gray-300 rounded-lg shadow-lg max-w-full"},null,512),I("button",{onClick:R,class:"px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white font-semibold rounded-lg transition"},"    ")])])):lt("",!0)])):lt("",!0),r.value==="registration"?(ne(),re("div",rk,[N[26]||(N[26]=I("h1",{class:"text-3xl font-bold mb-6"},"   ",-1)),g.value?(ne(),re("div",ik,[...N[20]||(N[20]=[I("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"},null,-1),I("p",{class:"text-gray-600"}," ...",-1)])])):!w.value||!w.value.trainings||w.value.trainings.length===0?(ne(),re("div",ok,[...N[21]||(N[21]=[I("p",{class:"text-gray-600 text-xl mb-4"},"       ",-1),I("p",{class:"text-gray-500"},'     " "',-1)])])):(ne(),re("div",ak,[(ne(!0),re(He,null,Ht(tt.value,(W,S)=>(ne(),re("div",{key:S,class:"border border-gray-200 rounded-xl overflow-hidden"},[I("div",lk,[I("h2",ck,ve(S),1),I("p",uk,ve(Ue(W[0].date)),1)]),I("div",hk,[(ne(!0),re(He,null,Ht(W,(q,U)=>(ne(),re("div",{key:U,class:"flex items-center justify-between p-4 bg-white rounded-lg hover:shadow-md transition-shadow border border-gray-200"},[I("div",fk,[I("div",dk,[I("span",pk,ve(We(q.type)),1),I("h3",gk,ve(q.name),1),I("span",{class:Et(["px-3 py-1 rounded-full text-sm font-semibold",Pe(q.difficulty)])},ve(q.difficulty),3),q.isPaid?(ne(),re("span",mk,"   ")):lt("",!0)]),I("div",_k,[I("div",yk,[N[22]||(N[22]=I("span",null,"",-1)),I("span",vk,ve(q.time),1)]),I("div",wk,[N[23]||(N[23]=I("span",null,"",-1)),I("span",null,ve(q.address),1)]),I("div",Ek,[N[24]||(N[24]=I("span",null,"",-1)),I("span",null,ve(q.type),1)])])]),I("div",Tk,[_t(q)&&!Ot(q)?(ne(),re("button",Ik,"    ")):Ot(q)?(ne(),re(He,{key:2},[N[25]||(N[25]=I("button",{class:"px-6 py-3 rounded-lg font-semibold bg-green-500 text-white cursor-default shadow-lg"},"   ",-1)),_t(q)?lt("",!0):(ne(),re("button",{key:0,onClick:ie=>Xt(q),class:"px-6 py-2 rounded-lg font-semibold transition-all transform hover:scale-105 bg-red-500 text-white hover:bg-red-600 shadow-lg hover:shadow-xl"},"   ",8,Ak))],64)):(ne(),re("button",{key:1,onClick:ie=>nt(q),class:"px-6 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 bg-blue-600 text-white hover:bg-blue-700 shadow-lg hover:shadow-xl"},"   ",8,bk))])]))),128))])]))),128))])),O.value?(ne(),re("div",Rk,[I("p",Sk," "+ve(O.value),1)])):lt("",!0)])):lt("",!0)])])])],4))}},Pk={class:"relative z-10 min-h-screen flex flex-col"},xk={class:"bg-gray-800"},kk={class:"flex-1 p-8"},Dk={class:"max-w-6xl mx-auto"},Nk={class:"bg-white bg-opacity-95 rounded-2xl shadow-2xl p-8 mb-6"},Vk={key:0,class:"text-center text-gray-600"},Ok={key:0,class:"bg-white bg-opacity-95 rounded-2xl shadow-2xl p-12 text-center"},Mk={key:1,class:"bg-white bg-opacity-95 rounded-2xl shadow-2xl p-12 text-center"},Lk={key:2,class:"space-y-4"},Fk={class:"w-32 flex-shrink-0"},Uk={class:"bg-gradient-to-br from-blue-600 to-blue-800 rounded-lg p-4 text-center sticky top-4"},$k={class:"text-lg font-bold text-white"},Bk={class:"flex-1 space-y-3"},jk={class:"p-4"},Hk={class:"flex items-start justify-between gap-4"},qk={class:"flex-1"},zk={class:"flex items-center gap-2 mb-2"},Gk={class:"text-2xl"},Wk={class:"text-lg font-bold text-gray-800"},Kk={key:0,class:"px-2 py-0.5 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800"},Qk={class:"flex items-center gap-4 text-sm text-gray-600"},Yk={class:"flex items-center gap-1"},Jk={class:"font-semibold"},Xk={class:"flex items-center gap-1"},Zk={class:"text-xs"},e2={class:"text-xs"},t2={class:"flex-shrink-0"},n2=["onClick"],s2={class:"font-semibold text-gray-800"},r2={class:"text-gray-500 text-xs"},i2={key:0,class:"mt-3 pt-3 border-t border-gray-200"},o2={key:0,class:"text-center text-gray-400 text-sm py-2"},a2={key:1,class:"space-y-1"},l2={class:"font-medium"},c2={class:"text-xs text-gray-500"},u2="/HTF/bg.jpg",h2={__name:"ScheduleView",setup(t){const e=Re(!0),n=Re(null),s=Re([]),r=Re(new Set),i=()=>{const V=new Date,M=V.getDay(),Y=M===0?-6:1-M,$=new Date(V);$.setDate(V.getDate()+Y),$.setHours(0,0,0,0);const H=new Date($);return H.setDate($.getDate()+6),H.setHours(23,59,59,999),{monday:$,sunday:H}},o=V=>new Date(V).toLocaleDateString("uk-UA",{day:"2-digit",month:"long"}),l=V=>new Date(V).toLocaleString("uk-UA",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),c=Rt(()=>{if(!n.value||!n.value.trainings)return{};const V={};n.value.trainings.forEach($=>{const H=$.dayName;V[H]||(V[H]=[]),V[H].push($)});const M=["","","","","'","",""],Y={};return M.forEach($=>{V[$]&&(Y[$]=V[$].sort((H,b)=>H.time.localeCompare(b.time)))}),Y}),h=V=>sh(V),f=V=>({:"bg-green-100 text-green-800",:"bg-yellow-100 text-yellow-800",:"bg-red-100 text-red-800"})[V]||"bg-gray-100 text-gray-800",p=V=>n.value.id+"_"+V.date+"_"+V.time,g=V=>{const M=p(V);return s.value.filter(Y=>Y.trainingId===M).length},w=V=>{const M=p(V);return s.value.filter(Y=>Y.trainingId===M)},D=V=>{const M=p(V);r.value.has(M)?r.value.delete(M):r.value.add(M)},O=V=>{const M=p(V);return r.value.has(M)},F=async()=>{try{e.value=!0;const{monday:V,sunday:M}=i(),Y=V.toISOString().split("T")[0],$=M.toISOString().split("T")[0],H=_s(tn(nn,"schedules")),b=await ys(H),_=[];b.forEach(v=>{const R=v.data(),A=R.weekStart,C=R.weekEnd;A>=Y&&C<=$&&_.push({id:v.id,...R})}),_.length>0?(_.sort((v,R)=>{const A=new Date(v.createdAt||0);return new Date(R.createdAt||0).getTime()-A.getTime()}),n.value=_[0],await Q(n.value.id)):n.value=null}catch(V){console.error("  :",V)}finally{e.value=!1}},Q=async V=>{try{const M=_s(tn(nn,"registrations"),Gs("scheduleId","==",V)),Y=await ys(M);s.value=Y.docs.map($=>({id:$.id,...$.data()}))}catch(M){console.error("  :",M)}};return Qi(()=>{F()}),(V,M)=>(ne(),re("div",{class:"relative min-h-screen bg-cover bg-center bg-fixed",style:Ss({backgroundImage:`url(${u2})`})},[M[7]||(M[7]=I("div",{class:"absolute inset-0 bg-black opacity-40"},null,-1)),I("div",Pk,[I("div",xk,[ze(ao)]),I("div",kk,[I("div",Dk,[I("div",Nk,[M[0]||(M[0]=I("h1",{class:"text-4xl font-bold text-gray-800 text-center mb-2 flex items-center justify-center gap-3"},[I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"})]),_r("   ")],-1)),n.value?(ne(),re("p",Vk,ve(o(n.value.weekStart))+" - "+ve(o(n.value.weekEnd)),1)):lt("",!0)]),e.value?(ne(),re("div",Ok,[...M[1]||(M[1]=[I("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"},null,-1),I("p",{class:"text-gray-600"}," ...",-1)])])):!n.value||!n.value.trainings||n.value.trainings.length===0?(ne(),re("div",Mk,[...M[2]||(M[2]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 mx-auto mb-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1),I("p",{class:"text-gray-600 text-xl mb-4"},"      ",-1),I("p",{class:"text-gray-500"},"   ",-1)])])):(ne(),re("div",Lk,[(ne(!0),re(He,null,Ht(c.value,(Y,$)=>(ne(),re("div",{key:$,class:"flex gap-4"},[I("div",Fk,[I("div",Uk,[I("h2",$k,ve($),1)])]),I("div",Bk,[(ne(!0),re(He,null,Ht(Y,(H,b)=>(ne(),re("div",{key:b,class:"bg-white bg-opacity-95 rounded-lg shadow-md border border-gray-200"},[I("div",jk,[I("div",Hk,[I("div",qk,[I("div",zk,[I("span",Gk,ve(h(H.type)),1),I("h3",Wk,ve(H.name),1),I("span",{class:Et(["px-2 py-0.5 rounded-full text-xs font-semibold",f(H.difficulty)])},ve(H.difficulty),3),H.isPaid?(ne(),re("span",Kk,"  ")):lt("",!0)]),I("div",Qk,[I("div",Yk,[M[3]||(M[3]=I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),I("span",Jk,ve(H.time),1)]),I("div",Xk,[M[4]||(M[4]=I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)),I("span",Zk,ve(H.address),1)]),I("span",e2,ve(H.type),1)])]),I("div",t2,[I("button",{onClick:_=>D(H),class:"flex items-center gap-2 px-3 py-2 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors text-sm"},[M[5]||(M[5]=I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-blue-600",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"})],-1)),I("span",s2,ve(g(H)),1),I("span",r2,ve(O(H)?"":""),1)],8,n2)])]),O(H)?(ne(),re("div",i2,[w(H).length===0?(ne(),re("div",o2,"   ")):(ne(),re("div",a2,[(ne(!0),re(He,null,Ht(w(H),(_,v)=>(ne(),re("div",{key:v,class:"text-sm text-gray-700 py-1"},[I("span",l2,ve(_.userName),1),M[6]||(M[6]=I("span",{class:"text-gray-400 mx-1"},"",-1)),I("span",c2,ve(l(_.registeredAt)),1)]))),128))]))])):lt("",!0)])]))),128))])]))),128))]))])])])],4))}},Oy=OE({history:dE("/HTF/"),routes:[{path:"/",name:"home",component:bP},{path:"/login",name:"login",component:SP},{path:"/schedule",name:"schedule",component:h2},{path:"/user",name:"user",component:gx,meta:{requiresAuth:!0}},{path:"/admin",name:"admin",component:Ck,meta:{requiresAuth:!0,requiresAdmin:!0}}]}),f2=["kulikalovdenis@gmail.com","bugary20@gmail.com"],d2=()=>new Promise((t,e)=>{const n=qa(De,s=>{n(),t(s)},e)});Oy.beforeEach(async(t,e,n)=>{const s=t.matched.some(i=>i.meta.requiresAuth),r=t.matched.some(i=>i.meta.requiresAdmin);if(s||r){const i=await d2();s&&!i?n("/login"):r&&i?f2.includes(i.email||"")?n():n("/user"):n()}else n()});const My=I0(C0);My.use(Oy);My.mount("#app");
