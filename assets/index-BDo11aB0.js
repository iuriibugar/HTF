(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Vu(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Qe={},jr=[],On=()=>{},Mm=()=>!1,nl=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ou=t=>t.startsWith("onUpdate:"),At=Object.assign,Mu=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Gv=Object.prototype.hasOwnProperty,je=(t,e)=>Gv.call(t,e),ve=Array.isArray,Hr=t=>Io(t)==="[object Map]",sl=t=>Io(t)==="[object Set]",jh=t=>Io(t)==="[object Date]",Ie=t=>typeof t=="function",ft=t=>typeof t=="string",bn=t=>typeof t=="symbol",Ge=t=>t!==null&&typeof t=="object",Lm=t=>(Ge(t)||Ie(t))&&Ie(t.then)&&Ie(t.catch),Fm=Object.prototype.toString,Io=t=>Fm.call(t),Wv=t=>Io(t).slice(8,-1),Um=t=>Io(t)==="[object Object]",Lu=t=>ft(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,qi=Vu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),rl=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Kv=/-\w/g,hn=rl(t=>t.replace(Kv,e=>e.slice(1).toUpperCase())),Qv=/\B([A-Z])/g,Tr=rl(t=>t.replace(Qv,"-$1").toLowerCase()),il=rl(t=>t.charAt(0).toUpperCase()+t.slice(1)),uc=rl(t=>t?`on${il(t)}`:""),Vs=(t,e)=>!Object.is(t,e),la=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},$m=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},ol=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Yv=t=>{const e=ft(t)?Number(t):NaN;return isNaN(e)?t:e};let Hh;const al=()=>Hh||(Hh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ms(t){if(ve(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=ft(s)?ew(s):ms(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(ft(t)||Ge(t))return t}const Xv=/;(?![^(]*\))/g,Jv=/:([^]+)/,Zv=/\/\*[^]*?\*\//g;function ew(t){const e={};return t.replace(Zv,"").split(Xv).forEach(n=>{if(n){const s=n.split(Jv);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function qe(t){let e="";if(ft(t))e=t;else if(ve(t))for(let n=0;n<t.length;n++){const s=qe(t[n]);s&&(e+=s+" ")}else if(Ge(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const tw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",nw=Vu(tw);function Bm(t){return!!t||t===""}function sw(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=ll(t[s],e[s]);return n}function ll(t,e){if(t===e)return!0;let n=jh(t),s=jh(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=bn(t),s=bn(e),n||s)return t===e;if(n=ve(t),s=ve(e),n||s)return n&&s?sw(t,e):!1;if(n=Ge(t),s=Ge(e),n||s){if(!n||!s)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const l=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(l&&!c||!l&&c||!ll(t[o],e[o]))return!1}}return String(t)===String(e)}function rw(t,e){return t.findIndex(n=>ll(n,e))}const jm=t=>!!(t&&t.__v_isRef===!0),Y=t=>ft(t)?t:t==null?"":ve(t)||Ge(t)&&(t.toString===Fm||!Ie(t.toString))?jm(t)?Y(t.value):JSON.stringify(t,Hm,2):String(t),Hm=(t,e)=>jm(e)?Hm(t,e.value):Hr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[dc(s,i)+" =>"]=r,n),{})}:sl(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>dc(n))}:bn(e)?dc(e):Ge(e)&&!ve(e)&&!Um(e)?String(e):e,dc=(t,e="")=>{var n;return bn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let Kt;class iw{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Kt,!e&&Kt&&(this.index=(Kt.scopes||(Kt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Kt;try{return Kt=this,e()}finally{Kt=n}}}on(){++this._on===1&&(this.prevScope=Kt,Kt=this)}off(){this._on>0&&--this._on===0&&(Kt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function ow(){return Kt}let Xe;const hc=new WeakSet;class qm{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Kt&&Kt.active&&Kt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,hc.has(this)&&(hc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Gm(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,qh(this),Wm(this);const e=Xe,n=_n;Xe=this,_n=!0;try{return this.fn()}finally{Km(this),Xe=e,_n=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)$u(e);this.deps=this.depsTail=void 0,qh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?hc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Bc(this)&&this.run()}get dirty(){return Bc(this)}}let zm=0,zi,Gi;function Gm(t,e=!1){if(t.flags|=8,e){t.next=Gi,Gi=t;return}t.next=zi,zi=t}function Fu(){zm++}function Uu(){if(--zm>0)return;if(Gi){let e=Gi;for(Gi=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;zi;){let e=zi;for(zi=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function Wm(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Km(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),$u(s),aw(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function Bc(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Qm(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Qm(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===ro)||(t.globalVersion=ro,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Bc(t))))return;t.flags|=2;const e=t.dep,n=Xe,s=_n;Xe=t,_n=!0;try{Wm(t);const r=t.fn(t._value);(e.version===0||Vs(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{Xe=n,_n=s,Km(t),t.flags&=-3}}function $u(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)$u(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function aw(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let _n=!0;const Ym=[];function as(){Ym.push(_n),_n=!1}function ls(){const t=Ym.pop();_n=t===void 0?!0:t}function qh(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Xe;Xe=void 0;try{e()}finally{Xe=n}}}let ro=0;class lw{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Bu{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Xe||!_n||Xe===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Xe)n=this.activeLink=new lw(Xe,this),Xe.deps?(n.prevDep=Xe.depsTail,Xe.depsTail.nextDep=n,Xe.depsTail=n):Xe.deps=Xe.depsTail=n,Xm(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Xe.depsTail,n.nextDep=void 0,Xe.depsTail.nextDep=n,Xe.depsTail=n,Xe.deps===n&&(Xe.deps=s)}return n}trigger(e){this.version++,ro++,this.notify(e)}notify(e){Fu();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Uu()}}}function Xm(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)Xm(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const jc=new WeakMap,pr=Symbol(""),Hc=Symbol(""),io=Symbol("");function Vt(t,e,n){if(_n&&Xe){let s=jc.get(t);s||jc.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new Bu),r.map=s,r.key=n),r.track()}}function Zn(t,e,n,s,r,i){const o=jc.get(t);if(!o){ro++;return}const l=c=>{c&&c.trigger()};if(Fu(),e==="clear")o.forEach(l);else{const c=ve(t),u=c&&Lu(n);if(c&&n==="length"){const h=Number(s);o.forEach((p,m)=>{(m==="length"||m===io||!bn(m)&&m>=h)&&l(p)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),u&&l(o.get(io)),e){case"add":c?u&&l(o.get("length")):(l(o.get(pr)),Hr(t)&&l(o.get(Hc)));break;case"delete":c||(l(o.get(pr)),Hr(t)&&l(o.get(Hc)));break;case"set":Hr(t)&&l(o.get(pr));break}}Uu()}function Or(t){const e=Fe(t);return e===t?e:(Vt(e,"iterate",io),cn(t)?e:e.map(En))}function cl(t){return Vt(t=Fe(t),"iterate",io),t}function As(t,e){return cs(t)?mr(t)?ei(En(e)):ei(e):En(e)}const cw={__proto__:null,[Symbol.iterator](){return fc(this,Symbol.iterator,t=>As(this,t))},concat(...t){return Or(this).concat(...t.map(e=>ve(e)?Or(e):e))},entries(){return fc(this,"entries",t=>(t[1]=As(this,t[1]),t))},every(t,e){return Wn(this,"every",t,e,void 0,arguments)},filter(t,e){return Wn(this,"filter",t,e,n=>n.map(s=>As(this,s)),arguments)},find(t,e){return Wn(this,"find",t,e,n=>As(this,n),arguments)},findIndex(t,e){return Wn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Wn(this,"findLast",t,e,n=>As(this,n),arguments)},findLastIndex(t,e){return Wn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Wn(this,"forEach",t,e,void 0,arguments)},includes(...t){return pc(this,"includes",t)},indexOf(...t){return pc(this,"indexOf",t)},join(t){return Or(this).join(t)},lastIndexOf(...t){return pc(this,"lastIndexOf",t)},map(t,e){return Wn(this,"map",t,e,void 0,arguments)},pop(){return Oi(this,"pop")},push(...t){return Oi(this,"push",t)},reduce(t,...e){return zh(this,"reduce",t,e)},reduceRight(t,...e){return zh(this,"reduceRight",t,e)},shift(){return Oi(this,"shift")},some(t,e){return Wn(this,"some",t,e,void 0,arguments)},splice(...t){return Oi(this,"splice",t)},toReversed(){return Or(this).toReversed()},toSorted(t){return Or(this).toSorted(t)},toSpliced(...t){return Or(this).toSpliced(...t)},unshift(...t){return Oi(this,"unshift",t)},values(){return fc(this,"values",t=>As(this,t))}};function fc(t,e,n){const s=cl(t),r=s[e]();return s!==t&&!cn(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=n(i.value)),i}),r}const uw=Array.prototype;function Wn(t,e,n,s,r,i){const o=cl(t),l=o!==t&&!cn(t),c=o[e];if(c!==uw[e]){const p=c.apply(t,i);return l?En(p):p}let u=n;o!==t&&(l?u=function(p,m){return n.call(this,As(t,p),m,t)}:n.length>2&&(u=function(p,m){return n.call(this,p,m,t)}));const h=c.call(o,u,s);return l&&r?r(h):h}function zh(t,e,n,s){const r=cl(t);let i=n;return r!==t&&(cn(t)?n.length>3&&(i=function(o,l,c){return n.call(this,o,l,c,t)}):i=function(o,l,c){return n.call(this,o,As(t,l),c,t)}),r[e](i,...s)}function pc(t,e,n){const s=Fe(t);Vt(s,"iterate",io);const r=s[e](...n);return(r===-1||r===!1)&&qu(n[0])?(n[0]=Fe(n[0]),s[e](...n)):r}function Oi(t,e,n=[]){as(),Fu();const s=Fe(t)[e].apply(t,n);return Uu(),ls(),s}const dw=Vu("__proto__,__v_isRef,__isVue"),Jm=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(bn));function hw(t){bn(t)||(t=String(t));const e=Fe(this);return Vt(e,"has",t),e.hasOwnProperty(t)}class Zm{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?Ew:sg:i?ng:tg).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=ve(e);if(!r){let c;if(o&&(c=cw[n]))return c;if(n==="hasOwnProperty")return hw}const l=Reflect.get(e,n,Ft(e)?e:s);if((bn(n)?Jm.has(n):dw(n))||(r||Vt(e,"get",n),i))return l;if(Ft(l)){const c=o&&Lu(n)?l:l.value;return r&&Ge(c)?zc(c):c}return Ge(l)?r?zc(l):ul(l):l}}class eg extends Zm{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];const o=ve(e)&&Lu(n);if(!this._isShallow){const u=cs(i);if(!cn(s)&&!cs(s)&&(i=Fe(i),s=Fe(s)),!o&&Ft(i)&&!Ft(s))return u||(i.value=s),!0}const l=o?Number(n)<e.length:je(e,n),c=Reflect.set(e,n,s,Ft(e)?e:r);return e===Fe(r)&&(l?Vs(s,i)&&Zn(e,"set",n,s):Zn(e,"add",n,s)),c}deleteProperty(e,n){const s=je(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&Zn(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!bn(n)||!Jm.has(n))&&Vt(e,"has",n),s}ownKeys(e){return Vt(e,"iterate",ve(e)?"length":pr),Reflect.ownKeys(e)}}class fw extends Zm{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const pw=new eg,mw=new fw,gw=new eg(!0);const qc=t=>t,Xo=t=>Reflect.getPrototypeOf(t);function yw(t,e,n){return function(...s){const r=this.__v_raw,i=Fe(r),o=Hr(i),l=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=r[t](...s),h=n?qc:e?ei:En;return!e&&Vt(i,"iterate",c?Hc:pr),{next(){const{value:p,done:m}=u.next();return m?{value:p,done:m}:{value:l?[h(p[0]),h(p[1])]:h(p),done:m}},[Symbol.iterator](){return this}}}}function Jo(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function _w(t,e){const n={get(r){const i=this.__v_raw,o=Fe(i),l=Fe(r);t||(Vs(r,l)&&Vt(o,"get",r),Vt(o,"get",l));const{has:c}=Xo(o),u=e?qc:t?ei:En;if(c.call(o,r))return u(i.get(r));if(c.call(o,l))return u(i.get(l));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&Vt(Fe(r),"iterate",pr),r.size},has(r){const i=this.__v_raw,o=Fe(i),l=Fe(r);return t||(Vs(r,l)&&Vt(o,"has",r),Vt(o,"has",l)),r===l?i.has(r):i.has(r)||i.has(l)},forEach(r,i){const o=this,l=o.__v_raw,c=Fe(l),u=e?qc:t?ei:En;return!t&&Vt(c,"iterate",pr),l.forEach((h,p)=>r.call(i,u(h),u(p),o))}};return At(n,t?{add:Jo("add"),set:Jo("set"),delete:Jo("delete"),clear:Jo("clear")}:{add(r){!e&&!cn(r)&&!cs(r)&&(r=Fe(r));const i=Fe(this);return Xo(i).has.call(i,r)||(i.add(r),Zn(i,"add",r,r)),this},set(r,i){!e&&!cn(i)&&!cs(i)&&(i=Fe(i));const o=Fe(this),{has:l,get:c}=Xo(o);let u=l.call(o,r);u||(r=Fe(r),u=l.call(o,r));const h=c.call(o,r);return o.set(r,i),u?Vs(i,h)&&Zn(o,"set",r,i):Zn(o,"add",r,i),this},delete(r){const i=Fe(this),{has:o,get:l}=Xo(i);let c=o.call(i,r);c||(r=Fe(r),c=o.call(i,r)),l&&l.call(i,r);const u=i.delete(r);return c&&Zn(i,"delete",r,void 0),u},clear(){const r=Fe(this),i=r.size!==0,o=r.clear();return i&&Zn(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=yw(r,t,e)}),n}function ju(t,e){const n=_w(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(je(n,r)&&r in s?n:s,r,i)}const vw={get:ju(!1,!1)},ww={get:ju(!1,!0)},bw={get:ju(!0,!1)};const tg=new WeakMap,ng=new WeakMap,sg=new WeakMap,Ew=new WeakMap;function Tw(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Iw(t){return t.__v_skip||!Object.isExtensible(t)?0:Tw(Wv(t))}function ul(t){return cs(t)?t:Hu(t,!1,pw,vw,tg)}function rg(t){return Hu(t,!1,gw,ww,ng)}function zc(t){return Hu(t,!0,mw,bw,sg)}function Hu(t,e,n,s,r){if(!Ge(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Iw(t);if(i===0)return t;const o=r.get(t);if(o)return o;const l=new Proxy(t,i===2?s:n);return r.set(t,l),l}function mr(t){return cs(t)?mr(t.__v_raw):!!(t&&t.__v_isReactive)}function cs(t){return!!(t&&t.__v_isReadonly)}function cn(t){return!!(t&&t.__v_isShallow)}function qu(t){return t?!!t.__v_raw:!1}function Fe(t){const e=t&&t.__v_raw;return e?Fe(e):t}function xw(t){return!je(t,"__v_skip")&&Object.isExtensible(t)&&$m(t,"__v_skip",!0),t}const En=t=>Ge(t)?ul(t):t,ei=t=>Ge(t)?zc(t):t;function Ft(t){return t?t.__v_isRef===!0:!1}function ie(t){return ig(t,!1)}function Aw(t){return ig(t,!0)}function ig(t,e){return Ft(t)?t:new Rw(t,e)}class Rw{constructor(e,n){this.dep=new Bu,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Fe(e),this._value=n?e:En(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||cn(e)||cs(e);e=s?e:Fe(e),Vs(e,n)&&(this._rawValue=e,this._value=s?e:En(e),this.dep.trigger())}}function ot(t){return Ft(t)?t.value:t}const Sw={get:(t,e,n)=>e==="__v_raw"?t:ot(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return Ft(r)&&!Ft(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function og(t){return mr(t)?t:new Proxy(t,Sw)}class Cw{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Bu(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ro-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Xe!==this)return Gm(this,!0),!0}get value(){const e=this.dep.track();return Qm(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function kw(t,e,n=!1){let s,r;return Ie(t)?s=t:(s=t.get,r=t.set),new Cw(s,r,n)}const Zo={},Ta=new WeakMap;let or;function Pw(t,e=!1,n=or){if(n){let s=Ta.get(n);s||Ta.set(n,s=[]),s.push(t)}}function Dw(t,e,n=Qe){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:l,call:c}=n,u=P=>r?P:cn(P)||r===!1||r===0?es(P,1):es(P);let h,p,m,y,D=!1,N=!1;if(Ft(t)?(p=()=>t.value,D=cn(t)):mr(t)?(p=()=>u(t),D=!0):ve(t)?(N=!0,D=t.some(P=>mr(P)||cn(P)),p=()=>t.map(P=>{if(Ft(P))return P.value;if(mr(P))return u(P);if(Ie(P))return c?c(P,2):P()})):Ie(t)?e?p=c?()=>c(t,2):t:p=()=>{if(m){as();try{m()}finally{ls()}}const P=or;or=h;try{return c?c(t,3,[y]):t(y)}finally{or=P}}:p=On,e&&r){const P=p,O=r===!0?1/0:r;p=()=>es(P(),O)}const M=ow(),H=()=>{h.stop(),M&&M.active&&Mu(M.effects,h)};if(i&&e){const P=e;e=(...O)=>{P(...O),H()}}let k=N?new Array(t.length).fill(Zo):Zo;const C=P=>{if(!(!(h.flags&1)||!h.dirty&&!P))if(e){const O=h.run();if(r||D||(N?O.some((B,v)=>Vs(B,k[v])):Vs(O,k))){m&&m();const B=or;or=h;try{const v=[O,k===Zo?void 0:N&&k[0]===Zo?[]:k,y];k=O,c?c(e,3,v):e(...v)}finally{or=B}}}else h.run()};return l&&l(C),h=new qm(p),h.scheduler=o?()=>o(C,!1):C,y=P=>Pw(P,!1,h),m=h.onStop=()=>{const P=Ta.get(h);if(P){if(c)c(P,4);else for(const O of P)O();Ta.delete(h)}},e?s?C(!0):k=h.run():o?o(C.bind(null,!0),!0):h.run(),H.pause=h.pause.bind(h),H.resume=h.resume.bind(h),H.stop=H,H}function es(t,e=1/0,n){if(e<=0||!Ge(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,Ft(t))es(t.value,e,n);else if(ve(t))for(let s=0;s<t.length;s++)es(t[s],e,n);else if(sl(t)||Hr(t))t.forEach(s=>{es(s,e,n)});else if(Um(t)){for(const s in t)es(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&es(t[s],e,n)}return t}function xo(t,e,n,s){try{return s?t(...s):t()}catch(r){dl(r,e,n)}}function Tn(t,e,n,s){if(Ie(t)){const r=xo(t,e,n,s);return r&&Lm(r)&&r.catch(i=>{dl(i,e,n)}),r}if(ve(t)){const r=[];for(let i=0;i<t.length;i++)r.push(Tn(t[i],e,n,s));return r}}function dl(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Qe;if(e){let l=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const h=l.ec;if(h){for(let p=0;p<h.length;p++)if(h[p](t,c,u)===!1)return}l=l.parent}if(i){as(),xo(i,null,10,[t,c,u]),ls();return}}Nw(t,n,r,s,o)}function Nw(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const zt=[];let Pn=-1;const qr=[];let Rs=null,Mr=0;const ag=Promise.resolve();let Ia=null;function hl(t){const e=Ia||ag;return t?e.then(this?t.bind(this):t):e}function Vw(t){let e=Pn+1,n=zt.length;for(;e<n;){const s=e+n>>>1,r=zt[s],i=oo(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function zu(t){if(!(t.flags&1)){const e=oo(t),n=zt[zt.length-1];!n||!(t.flags&2)&&e>=oo(n)?zt.push(t):zt.splice(Vw(e),0,t),t.flags|=1,lg()}}function lg(){Ia||(Ia=ag.then(ug))}function Ow(t){ve(t)?qr.push(...t):Rs&&t.id===-1?Rs.splice(Mr+1,0,t):t.flags&1||(qr.push(t),t.flags|=1),lg()}function Gh(t,e,n=Pn+1){for(;n<zt.length;n++){const s=zt[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;zt.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function cg(t){if(qr.length){const e=[...new Set(qr)].sort((n,s)=>oo(n)-oo(s));if(qr.length=0,Rs){Rs.push(...e);return}for(Rs=e,Mr=0;Mr<Rs.length;Mr++){const n=Rs[Mr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Rs=null,Mr=0}}const oo=t=>t.id==null?t.flags&2?-1:1/0:t.id;function ug(t){try{for(Pn=0;Pn<zt.length;Pn++){const e=zt[Pn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),xo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Pn<zt.length;Pn++){const e=zt[Pn];e&&(e.flags&=-2)}Pn=-1,zt.length=0,cg(),Ia=null,(zt.length||qr.length)&&ug()}}let Ct=null,dg=null;function xa(t){const e=Ct;return Ct=t,dg=t&&t.type.__scopeId||null,e}function Ht(t,e=Ct,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&Sa(-1);const i=xa(e);let o;try{o=t(...r)}finally{xa(i),s._d&&Sa(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Ue(t,e){if(Ct===null)return t;const n=yl(Ct),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,l,c=Qe]=e[r];i&&(Ie(i)&&(i={mounted:i,updated:i}),i.deep&&es(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:l,modifiers:c}))}return t}function nr(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const l=r[o];i&&(l.oldValue=i[o].value);let c=l.dir[s];c&&(as(),Tn(c,n,8,[t.el,l,t,e]),ls())}}const Mw=Symbol("_vte"),hg=t=>t.__isTeleport,Jn=Symbol("_leaveCb"),ea=Symbol("_enterCb");function Lw(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return pn(()=>{t.isMounted=!0}),Gu(()=>{t.isUnmounting=!0}),t}const on=[Function,Array],fg={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:on,onEnter:on,onAfterEnter:on,onEnterCancelled:on,onBeforeLeave:on,onLeave:on,onAfterLeave:on,onLeaveCancelled:on,onBeforeAppear:on,onAppear:on,onAfterAppear:on,onAppearCancelled:on},pg=t=>{const e=t.subTree;return e.component?pg(e.component):e},Fw={name:"BaseTransition",props:fg,setup(t,{slots:e}){const n=Gg(),s=Lw();return()=>{const r=e.default&&yg(e.default(),!0);if(!r||!r.length)return;const i=mg(r),o=Fe(t),{mode:l}=o;if(s.isLeaving)return mc(i);const c=Wh(i);if(!c)return mc(i);let u=Gc(c,o,s,n,p=>u=p);c.type!==Mt&&ao(c,u);let h=n.subTree&&Wh(n.subTree);if(h&&h.type!==Mt&&!lr(h,c)&&pg(n).type!==Mt){let p=Gc(h,o,s,n);if(ao(h,p),l==="out-in"&&c.type!==Mt)return s.isLeaving=!0,p.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete p.afterLeave,h=void 0},mc(i);l==="in-out"&&c.type!==Mt?p.delayLeave=(m,y,D)=>{const N=gg(s,h);N[String(h.key)]=h,m[Jn]=()=>{y(),m[Jn]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{D(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function mg(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Mt){e=n;break}}return e}const Uw=Fw;function gg(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function Gc(t,e,n,s,r){const{appear:i,mode:o,persisted:l=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:h,onEnterCancelled:p,onBeforeLeave:m,onLeave:y,onAfterLeave:D,onLeaveCancelled:N,onBeforeAppear:M,onAppear:H,onAfterAppear:k,onAppearCancelled:C}=e,P=String(t.key),O=gg(n,t),B=(b,S)=>{b&&Tn(b,s,9,S)},v=(b,S)=>{const R=S[1];B(b,S),ve(b)?b.every(A=>A.length<=1)&&R():b.length<=1&&R()},w={mode:o,persisted:l,beforeEnter(b){let S=c;if(!n.isMounted)if(i)S=M||c;else return;b[Jn]&&b[Jn](!0);const R=O[P];R&&lr(t,R)&&R.el[Jn]&&R.el[Jn](),B(S,[b])},enter(b){let S=u,R=h,A=p;if(!n.isMounted)if(i)S=H||u,R=k||h,A=C||p;else return;let E=!1;const De=b[ea]=Se=>{E||(E=!0,Se?B(A,[b]):B(R,[b]),w.delayedLeave&&w.delayedLeave(),b[ea]=void 0)};S?v(S,[b,De]):De()},leave(b,S){const R=String(t.key);if(b[ea]&&b[ea](!0),n.isUnmounting)return S();B(m,[b]);let A=!1;const E=b[Jn]=De=>{A||(A=!0,S(),De?B(N,[b]):B(D,[b]),b[Jn]=void 0,O[R]===t&&delete O[R])};O[R]=t,y?v(y,[b,E]):E()},clone(b){const S=Gc(b,e,n,s,r);return r&&r(S),S}};return w}function mc(t){if(fl(t))return t=Us(t),t.children=null,t}function Wh(t){if(!fl(t))return hg(t.type)&&t.children?mg(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Ie(n.default))return n.default()}}function ao(t,e){t.shapeFlag&6&&t.component?(t.transition=e,ao(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function yg(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const l=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===$e?(o.patchFlag&128&&r++,s=s.concat(yg(o.children,e,l))):(e||o.type!==Mt)&&s.push(l!=null?Us(o,{key:l}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}function _g(t,e){return Ie(t)?At({name:t.name},e,{setup:t}):t}function vg(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Aa=new WeakMap;function Wi(t,e,n,s,r=!1){if(ve(t)){t.forEach((D,N)=>Wi(D,e&&(ve(e)?e[N]:e),n,s,r));return}if(zr(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Wi(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?yl(s.component):s.el,o=r?null:i,{i:l,r:c}=t,u=e&&e.r,h=l.refs===Qe?l.refs={}:l.refs,p=l.setupState,m=Fe(p),y=p===Qe?Mm:D=>je(m,D);if(u!=null&&u!==c){if(Kh(e),ft(u))h[u]=null,y(u)&&(p[u]=null);else if(Ft(u)){u.value=null;const D=e;D.k&&(h[D.k]=null)}}if(Ie(c))xo(c,l,12,[o,h]);else{const D=ft(c),N=Ft(c);if(D||N){const M=()=>{if(t.f){const H=D?y(c)?p[c]:h[c]:c.value;if(r)ve(H)&&Mu(H,i);else if(ve(H))H.includes(i)||H.push(i);else if(D)h[c]=[i],y(c)&&(p[c]=h[c]);else{const k=[i];c.value=k,t.k&&(h[t.k]=k)}}else D?(h[c]=o,y(c)&&(p[c]=o)):N&&(c.value=o,t.k&&(h[t.k]=o))};if(o){const H=()=>{M(),Aa.delete(t)};H.id=-1,Aa.set(t,H),en(H,n)}else Kh(t),M()}}}function Kh(t){const e=Aa.get(t);e&&(e.flags|=8,Aa.delete(t))}al().requestIdleCallback;al().cancelIdleCallback;const zr=t=>!!t.type.__asyncLoader,fl=t=>t.type.__isKeepAlive;function $w(t,e){wg(t,"a",e)}function Bw(t,e){wg(t,"da",e)}function wg(t,e,n=Lt){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(pl(e,s,n),n){let r=n.parent;for(;r&&r.parent;)fl(r.parent.vnode)&&jw(s,e,n,r),r=r.parent}}function jw(t,e,n,s){const r=pl(e,t,s,!0);bg(()=>{Mu(s[e],r)},n)}function pl(t,e,n=Lt,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{as();const l=Ao(n),c=Tn(e,n,t,o);return l(),ls(),c});return s?r.unshift(i):r.push(i),i}}const gs=t=>(e,n=Lt)=>{(!uo||t==="sp")&&pl(t,(...s)=>e(...s),n)},Hw=gs("bm"),pn=gs("m"),qw=gs("bu"),zw=gs("u"),Gu=gs("bum"),bg=gs("um"),Gw=gs("sp"),Ww=gs("rtg"),Kw=gs("rtc");function Qw(t,e=Lt){pl("ec",t,e)}const Eg="components";function Tg(t,e){return xg(Eg,t,!0,e)||t}const Ig=Symbol.for("v-ndc");function Yw(t){return ft(t)?xg(Eg,t,!1)||t:t||Ig}function xg(t,e,n=!0,s=!1){const r=Ct||Lt;if(r){const i=r.type;{const l=Lb(i,!1);if(l&&(l===e||l===hn(e)||l===il(hn(e))))return i}const o=Qh(r[t]||i[t],e)||Qh(r.appContext[t],e);return!o&&s?i:o}}function Qh(t,e){return t&&(t[e]||t[hn(e)]||t[il(hn(e))])}function un(t,e,n,s){let r;const i=n,o=ve(t);if(o||ft(t)){const l=o&&mr(t);let c=!1,u=!1;l&&(c=!cn(t),u=cs(t),t=cl(t)),r=new Array(t.length);for(let h=0,p=t.length;h<p;h++)r[h]=e(c?u?ei(En(t[h])):En(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let l=0;l<t;l++)r[l]=e(l+1,l,void 0,i)}else if(Ge(t))if(t[Symbol.iterator])r=Array.from(t,(l,c)=>e(l,c,void 0,i));else{const l=Object.keys(t);r=new Array(l.length);for(let c=0,u=l.length;c<u;c++){const h=l[c];r[c]=e(t[h],h,c,i)}}else r=[];return r}function Yh(t,e,n={},s,r){if(Ct.ce||Ct.parent&&zr(Ct.parent)&&Ct.parent.ce){const u=Object.keys(n).length>0;return e!=="default"&&(n.name=e),F(),tn($e,null,[Ae("slot",n,s&&s())],u?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),F();const o=i&&Ag(i(n)),l=n.key||o&&o.key,c=tn($e,{key:(l&&!bn(l)?l:`_${e}`)+(!o&&s?"_fb":"")},o||(s?s():[]),o&&t._===1?64:-2);return c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),i&&i._c&&(i._d=!0),c}function Ag(t){return t.some(e=>co(e)?!(e.type===Mt||e.type===$e&&!Ag(e.children)):!0)?t:null}const Wc=t=>t?Wg(t)?yl(t):Wc(t.parent):null,Ki=At(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Wc(t.parent),$root:t=>Wc(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Sg(t),$forceUpdate:t=>t.f||(t.f=()=>{zu(t.update)}),$nextTick:t=>t.n||(t.n=hl.bind(t.proxy)),$watch:t=>ab.bind(t)}),gc=(t,e)=>t!==Qe&&!t.__isScriptSetup&&je(t,e),Xw={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:l,appContext:c}=t;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(gc(s,e))return o[e]=1,s[e];if(r!==Qe&&je(r,e))return o[e]=2,r[e];if(je(i,e))return o[e]=3,i[e];if(n!==Qe&&je(n,e))return o[e]=4,n[e];Kc&&(o[e]=0)}}const u=Ki[e];let h,p;if(u)return e==="$attrs"&&Vt(t.attrs,"get",""),u(t);if((h=l.__cssModules)&&(h=h[e]))return h;if(n!==Qe&&je(n,e))return o[e]=4,n[e];if(p=c.config.globalProperties,je(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return gc(r,e)?(r[e]=n,!0):s!==Qe&&je(s,e)?(s[e]=n,!0):je(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,props:i,type:o}},l){let c;return!!(n[l]||t!==Qe&&l[0]!=="$"&&je(t,l)||gc(e,l)||je(i,l)||je(s,l)||je(Ki,l)||je(r.config.globalProperties,l)||(c=o.__cssModules)&&c[l])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:je(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Xh(t){return ve(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Kc=!0;function Jw(t){const e=Sg(t),n=t.proxy,s=t.ctx;Kc=!1,e.beforeCreate&&Jh(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:l,provide:c,inject:u,created:h,beforeMount:p,mounted:m,beforeUpdate:y,updated:D,activated:N,deactivated:M,beforeDestroy:H,beforeUnmount:k,destroyed:C,unmounted:P,render:O,renderTracked:B,renderTriggered:v,errorCaptured:w,serverPrefetch:b,expose:S,inheritAttrs:R,components:A,directives:E,filters:De}=e;if(u&&Zw(u,s,null),o)for(const te in o){const I=o[te];Ie(I)&&(s[te]=I.bind(n))}if(r){const te=r.call(n,n);Ge(te)&&(t.data=ul(te))}if(Kc=!0,i)for(const te in i){const I=i[te],q=Ie(I)?I.bind(n,n):Ie(I.get)?I.get.bind(n,n):On,J=!Ie(I)&&Ie(I.set)?I.set.bind(n):On,U=et({get:q,set:J});Object.defineProperty(s,te,{enumerable:!0,configurable:!0,get:()=>U.value,set:me=>U.value=me})}if(l)for(const te in l)Rg(l[te],s,n,te);if(c){const te=Ie(c)?c.call(n):c;Reflect.ownKeys(te).forEach(I=>{ca(I,te[I])})}h&&Jh(h,t,"c");function Le(te,I){ve(I)?I.forEach(q=>te(q.bind(n))):I&&te(I.bind(n))}if(Le(Hw,p),Le(pn,m),Le(qw,y),Le(zw,D),Le($w,N),Le(Bw,M),Le(Qw,w),Le(Kw,B),Le(Ww,v),Le(Gu,k),Le(bg,P),Le(Gw,b),ve(S))if(S.length){const te=t.exposed||(t.exposed={});S.forEach(I=>{Object.defineProperty(te,I,{get:()=>n[I],set:q=>n[I]=q,enumerable:!0})})}else t.exposed||(t.exposed={});O&&t.render===On&&(t.render=O),R!=null&&(t.inheritAttrs=R),A&&(t.components=A),E&&(t.directives=E),b&&vg(t)}function Zw(t,e,n=On){ve(t)&&(t=Qc(t));for(const s in t){const r=t[s];let i;Ge(r)?"default"in r?i=vn(r.from||s,r.default,!0):i=vn(r.from||s):i=vn(r),Ft(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function Jh(t,e,n){Tn(ve(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function Rg(t,e,n,s){let r=s.includes(".")?Pg(n,s):()=>n[s];if(ft(t)){const i=e[t];Ie(i)&&rs(r,i)}else if(Ie(t))rs(r,t.bind(n));else if(Ge(t))if(ve(t))t.forEach(i=>Rg(i,e,n,s));else{const i=Ie(t.handler)?t.handler.bind(n):e[t.handler];Ie(i)&&rs(r,i,t)}}function Sg(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,l=i.get(e);let c;return l?c=l:!r.length&&!n&&!s?c=e:(c={},r.length&&r.forEach(u=>Ra(c,u,o,!0)),Ra(c,e,o)),Ge(e)&&i.set(e,c),c}function Ra(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&Ra(t,i,n,!0),r&&r.forEach(o=>Ra(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const l=eb[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const eb={data:Zh,props:ef,emits:ef,methods:Ui,computed:Ui,beforeCreate:jt,created:jt,beforeMount:jt,mounted:jt,beforeUpdate:jt,updated:jt,beforeDestroy:jt,beforeUnmount:jt,destroyed:jt,unmounted:jt,activated:jt,deactivated:jt,errorCaptured:jt,serverPrefetch:jt,components:Ui,directives:Ui,watch:nb,provide:Zh,inject:tb};function Zh(t,e){return e?t?function(){return At(Ie(t)?t.call(this,this):t,Ie(e)?e.call(this,this):e)}:e:t}function tb(t,e){return Ui(Qc(t),Qc(e))}function Qc(t){if(ve(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function jt(t,e){return t?[...new Set([].concat(t,e))]:e}function Ui(t,e){return t?At(Object.create(null),t,e):e}function ef(t,e){return t?ve(t)&&ve(e)?[...new Set([...t,...e])]:At(Object.create(null),Xh(t),Xh(e??{})):e}function nb(t,e){if(!t)return e;if(!e)return t;const n=At(Object.create(null),t);for(const s in e)n[s]=jt(t[s],e[s]);return n}function Cg(){return{app:null,config:{isNativeTag:Mm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let sb=0;function rb(t,e){return function(s,r=null){Ie(s)||(s=At({},s)),r!=null&&!Ge(r)&&(r=null);const i=Cg(),o=new WeakSet,l=[];let c=!1;const u=i.app={_uid:sb++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:Ub,get config(){return i.config},set config(h){},use(h,...p){return o.has(h)||(h&&Ie(h.install)?(o.add(h),h.install(u,...p)):Ie(h)&&(o.add(h),h(u,...p))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,p){return p?(i.components[h]=p,u):i.components[h]},directive(h,p){return p?(i.directives[h]=p,u):i.directives[h]},mount(h,p,m){if(!c){const y=u._ceVNode||Ae(s,r);return y.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),t(y,h,m),c=!0,u._container=h,h.__vue_app__=u,yl(y.component)}},onUnmount(h){l.push(h)},unmount(){c&&(Tn(l,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(h,p){return i.provides[h]=p,u},runWithContext(h){const p=Gr;Gr=u;try{return h()}finally{Gr=p}}};return u}}let Gr=null;function ca(t,e){if(Lt){let n=Lt.provides;const s=Lt.parent&&Lt.parent.provides;s===n&&(n=Lt.provides=Object.create(s)),n[t]=e}}function vn(t,e,n=!1){const s=Gg();if(s||Gr){let r=Gr?Gr._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&Ie(e)?e.call(s&&s.proxy):e}}const ib=Symbol.for("v-scx"),ob=()=>vn(ib);function rs(t,e,n){return kg(t,e,n)}function kg(t,e,n=Qe){const{immediate:s,deep:r,flush:i,once:o}=n,l=At({},n),c=e&&s||!e&&i!=="post";let u;if(uo){if(i==="sync"){const y=ob();u=y.__watcherHandles||(y.__watcherHandles=[])}else if(!c){const y=()=>{};return y.stop=On,y.resume=On,y.pause=On,y}}const h=Lt;l.call=(y,D,N)=>Tn(y,h,D,N);let p=!1;i==="post"?l.scheduler=y=>{en(y,h&&h.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(y,D)=>{D?y():zu(y)}),l.augmentJob=y=>{e&&(y.flags|=4),p&&(y.flags|=2,h&&(y.id=h.uid,y.i=h))};const m=Dw(t,e,l);return uo&&(u?u.push(m):c&&m()),m}function ab(t,e,n){const s=this.proxy,r=ft(t)?t.includes(".")?Pg(s,t):()=>s[t]:t.bind(s,s);let i;Ie(e)?i=e:(i=e.handler,n=e);const o=Ao(this),l=kg(r,i.bind(s),n);return o(),l}function Pg(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const lb=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${hn(e)}Modifiers`]||t[`${Tr(e)}Modifiers`];function cb(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||Qe;let r=n;const i=e.startsWith("update:"),o=i&&lb(s,e.slice(7));o&&(o.trim&&(r=n.map(h=>ft(h)?h.trim():h)),o.number&&(r=n.map(ol)));let l,c=s[l=uc(e)]||s[l=uc(hn(e))];!c&&i&&(c=s[l=uc(Tr(e))]),c&&Tn(c,t,6,r);const u=s[l+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Tn(u,t,6,r)}}const ub=new WeakMap;function Dg(t,e,n=!1){const s=n?ub:e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},l=!1;if(!Ie(t)){const c=u=>{const h=Dg(u,e,!0);h&&(l=!0,At(o,h))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!l?(Ge(t)&&s.set(t,null),null):(ve(i)?i.forEach(c=>o[c]=null):At(o,i),Ge(t)&&s.set(t,o),o)}function ml(t,e){return!t||!nl(e)?!1:(e=e.slice(2).replace(/Once$/,""),je(t,e[0].toLowerCase()+e.slice(1))||je(t,Tr(e))||je(t,e))}function tf(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:l,emit:c,render:u,renderCache:h,props:p,data:m,setupState:y,ctx:D,inheritAttrs:N}=t,M=xa(t);let H,k;try{if(n.shapeFlag&4){const P=r||s,O=P;H=Nn(u.call(O,P,h,p,y,m,D)),k=l}else{const P=e;H=Nn(P.length>1?P(p,{attrs:l,slots:o,emit:c}):P(p,null)),k=e.props?l:db(l)}}catch(P){Qi.length=0,dl(P,t,1),H=Ae(Mt)}let C=H;if(k&&N!==!1){const P=Object.keys(k),{shapeFlag:O}=C;P.length&&O&7&&(i&&P.some(Ou)&&(k=hb(k,i)),C=Us(C,k,!1,!0))}return n.dirs&&(C=Us(C,null,!1,!0),C.dirs=C.dirs?C.dirs.concat(n.dirs):n.dirs),n.transition&&ao(C,n.transition),H=C,xa(M),H}const db=t=>{let e;for(const n in t)(n==="class"||n==="style"||nl(n))&&((e||(e={}))[n]=t[n]);return e},hb=(t,e)=>{const n={};for(const s in t)(!Ou(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function fb(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:l,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?nf(s,o,u):!!o;if(c&8){const h=e.dynamicProps;for(let p=0;p<h.length;p++){const m=h[p];if(o[m]!==s[m]&&!ml(u,m))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?nf(s,o,u):!0:!!o;return!1}function nf(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!ml(n,i))return!0}return!1}function pb({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const Ng={},Vg=()=>Object.create(Ng),Og=t=>Object.getPrototypeOf(t)===Ng;function mb(t,e,n,s=!1){const r={},i=Vg();t.propsDefaults=Object.create(null),Mg(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:rg(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function gb(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,l=Fe(r),[c]=t.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let p=0;p<h.length;p++){let m=h[p];if(ml(t.emitsOptions,m))continue;const y=e[m];if(c)if(je(i,m))y!==i[m]&&(i[m]=y,u=!0);else{const D=hn(m);r[D]=Yc(c,l,D,y,t,!1)}else y!==i[m]&&(i[m]=y,u=!0)}}}else{Mg(t,e,r,i)&&(u=!0);let h;for(const p in l)(!e||!je(e,p)&&((h=Tr(p))===p||!je(e,h)))&&(c?n&&(n[p]!==void 0||n[h]!==void 0)&&(r[p]=Yc(c,l,p,void 0,t,!0)):delete r[p]);if(i!==l)for(const p in i)(!e||!je(e,p))&&(delete i[p],u=!0)}u&&Zn(t.attrs,"set","")}function Mg(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,l;if(e)for(let c in e){if(qi(c))continue;const u=e[c];let h;r&&je(r,h=hn(c))?!i||!i.includes(h)?n[h]=u:(l||(l={}))[h]=u:ml(t.emitsOptions,c)||(!(c in s)||u!==s[c])&&(s[c]=u,o=!0)}if(i){const c=Fe(n),u=l||Qe;for(let h=0;h<i.length;h++){const p=i[h];n[p]=Yc(r,c,p,u[p],t,!je(u,p))}}return o}function Yc(t,e,n,s,r,i){const o=t[n];if(o!=null){const l=je(o,"default");if(l&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Ie(c)){const{propsDefaults:u}=r;if(n in u)s=u[n];else{const h=Ao(r);s=u[n]=c.call(null,e),h()}}else s=c;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!l?s=!1:o[1]&&(s===""||s===Tr(n))&&(s=!0))}return s}const yb=new WeakMap;function Lg(t,e,n=!1){const s=n?yb:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},l=[];let c=!1;if(!Ie(t)){const h=p=>{c=!0;const[m,y]=Lg(p,e,!0);At(o,m),y&&l.push(...y)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!c)return Ge(t)&&s.set(t,jr),jr;if(ve(i))for(let h=0;h<i.length;h++){const p=hn(i[h]);sf(p)&&(o[p]=Qe)}else if(i)for(const h in i){const p=hn(h);if(sf(p)){const m=i[h],y=o[p]=ve(m)||Ie(m)?{type:m}:At({},m),D=y.type;let N=!1,M=!0;if(ve(D))for(let H=0;H<D.length;++H){const k=D[H],C=Ie(k)&&k.name;if(C==="Boolean"){N=!0;break}else C==="String"&&(M=!1)}else N=Ie(D)&&D.name==="Boolean";y[0]=N,y[1]=M,(N||je(y,"default"))&&l.push(p)}}const u=[o,l];return Ge(t)&&s.set(t,u),u}function sf(t){return t[0]!=="$"&&!qi(t)}const Wu=t=>t==="_"||t==="_ctx"||t==="$stable",Ku=t=>ve(t)?t.map(Nn):[Nn(t)],_b=(t,e,n)=>{if(e._n)return e;const s=Ht((...r)=>Ku(e(...r)),n);return s._c=!1,s},Fg=(t,e,n)=>{const s=t._ctx;for(const r in t){if(Wu(r))continue;const i=t[r];if(Ie(i))e[r]=_b(r,i,s);else if(i!=null){const o=Ku(i);e[r]=()=>o}}},Ug=(t,e)=>{const n=Ku(e);t.slots.default=()=>n},$g=(t,e,n)=>{for(const s in e)(n||!Wu(s))&&(t[s]=e[s])},vb=(t,e,n)=>{const s=t.slots=Vg();if(t.vnode.shapeFlag&32){const r=e._;r?($g(s,e,n),n&&$m(s,"_",r,!0)):Fg(e,s)}else e&&Ug(t,e)},wb=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=Qe;if(s.shapeFlag&32){const l=e._;l?n&&l===1?i=!1:$g(r,e,n):(i=!e.$stable,Fg(e,r)),o=e}else e&&(Ug(t,e),o={default:1});if(i)for(const l in r)!Wu(l)&&o[l]==null&&delete r[l]},en=xb;function bb(t){return Eb(t)}function Eb(t,e){const n=al();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:l,createComment:c,setText:u,setElementText:h,parentNode:p,nextSibling:m,setScopeId:y=On,insertStaticContent:D}=t,N=(T,x,V,G=null,K=null,W=null,ae=void 0,se=null,ne=!!x.dynamicChildren)=>{if(T===x)return;T&&!lr(T,x)&&(G=z(T),me(T,K,W,!0),T=null),x.patchFlag===-2&&(ne=!1,x.dynamicChildren=null);const{type:Z,ref:ue,shapeFlag:re}=x;switch(Z){case gl:M(T,x,V,G);break;case Mt:H(T,x,V,G);break;case ua:T==null&&k(x,V,G,ae);break;case $e:A(T,x,V,G,K,W,ae,se,ne);break;default:re&1?O(T,x,V,G,K,W,ae,se,ne):re&6?E(T,x,V,G,K,W,ae,se,ne):(re&64||re&128)&&Z.process(T,x,V,G,K,W,ae,se,ne,fe)}ue!=null&&K?Wi(ue,T&&T.ref,W,x||T,!x):ue==null&&T&&T.ref!=null&&Wi(T.ref,null,W,T,!0)},M=(T,x,V,G)=>{if(T==null)s(x.el=l(x.children),V,G);else{const K=x.el=T.el;x.children!==T.children&&u(K,x.children)}},H=(T,x,V,G)=>{T==null?s(x.el=c(x.children||""),V,G):x.el=T.el},k=(T,x,V,G)=>{[T.el,T.anchor]=D(T.children,x,V,G,T.el,T.anchor)},C=({el:T,anchor:x},V,G)=>{let K;for(;T&&T!==x;)K=m(T),s(T,V,G),T=K;s(x,V,G)},P=({el:T,anchor:x})=>{let V;for(;T&&T!==x;)V=m(T),r(T),T=V;r(x)},O=(T,x,V,G,K,W,ae,se,ne)=>{if(x.type==="svg"?ae="svg":x.type==="math"&&(ae="mathml"),T==null)B(x,V,G,K,W,ae,se,ne);else{const Z=T.el&&T.el._isVueCE?T.el:null;try{Z&&Z._beginPatch(),b(T,x,K,W,ae,se,ne)}finally{Z&&Z._endPatch()}}},B=(T,x,V,G,K,W,ae,se)=>{let ne,Z;const{props:ue,shapeFlag:re,transition:pe,dirs:le}=T;if(ne=T.el=o(T.type,W,ue&&ue.is,ue),re&8?h(ne,T.children):re&16&&w(T.children,ne,null,G,K,yc(T,W),ae,se),le&&nr(T,null,G,"created"),v(ne,T,T.scopeId,ae,G),ue){for(const Re in ue)Re!=="value"&&!qi(Re)&&i(ne,Re,null,ue[Re],W,G);"value"in ue&&i(ne,"value",null,ue.value,W),(Z=ue.onVnodeBeforeMount)&&kn(Z,G,T)}le&&nr(T,null,G,"beforeMount");const be=Tb(K,pe);be&&pe.beforeEnter(ne),s(ne,x,V),((Z=ue&&ue.onVnodeMounted)||be||le)&&en(()=>{Z&&kn(Z,G,T),be&&pe.enter(ne),le&&nr(T,null,G,"mounted")},K)},v=(T,x,V,G,K)=>{if(V&&y(T,V),G)for(let W=0;W<G.length;W++)y(T,G[W]);if(K){let W=K.subTree;if(x===W||Hg(W.type)&&(W.ssContent===x||W.ssFallback===x)){const ae=K.vnode;v(T,ae,ae.scopeId,ae.slotScopeIds,K.parent)}}},w=(T,x,V,G,K,W,ae,se,ne=0)=>{for(let Z=ne;Z<T.length;Z++){const ue=T[Z]=se?Ss(T[Z]):Nn(T[Z]);N(null,ue,x,V,G,K,W,ae,se)}},b=(T,x,V,G,K,W,ae)=>{const se=x.el=T.el;let{patchFlag:ne,dynamicChildren:Z,dirs:ue}=x;ne|=T.patchFlag&16;const re=T.props||Qe,pe=x.props||Qe;let le;if(V&&sr(V,!1),(le=pe.onVnodeBeforeUpdate)&&kn(le,V,x,T),ue&&nr(x,T,V,"beforeUpdate"),V&&sr(V,!0),(re.innerHTML&&pe.innerHTML==null||re.textContent&&pe.textContent==null)&&h(se,""),Z?S(T.dynamicChildren,Z,se,V,G,yc(x,K),W):ae||I(T,x,se,null,V,G,yc(x,K),W,!1),ne>0){if(ne&16)R(se,re,pe,V,K);else if(ne&2&&re.class!==pe.class&&i(se,"class",null,pe.class,K),ne&4&&i(se,"style",re.style,pe.style,K),ne&8){const be=x.dynamicProps;for(let Re=0;Re<be.length;Re++){const Pe=be[Re],lt=re[Pe],ct=pe[Pe];(ct!==lt||Pe==="value")&&i(se,Pe,lt,ct,K,V)}}ne&1&&T.children!==x.children&&h(se,x.children)}else!ae&&Z==null&&R(se,re,pe,V,K);((le=pe.onVnodeUpdated)||ue)&&en(()=>{le&&kn(le,V,x,T),ue&&nr(x,T,V,"updated")},G)},S=(T,x,V,G,K,W,ae)=>{for(let se=0;se<x.length;se++){const ne=T[se],Z=x[se],ue=ne.el&&(ne.type===$e||!lr(ne,Z)||ne.shapeFlag&198)?p(ne.el):V;N(ne,Z,ue,null,G,K,W,ae,!0)}},R=(T,x,V,G,K)=>{if(x!==V){if(x!==Qe)for(const W in x)!qi(W)&&!(W in V)&&i(T,W,x[W],null,K,G);for(const W in V){if(qi(W))continue;const ae=V[W],se=x[W];ae!==se&&W!=="value"&&i(T,W,se,ae,K,G)}"value"in V&&i(T,"value",x.value,V.value,K)}},A=(T,x,V,G,K,W,ae,se,ne)=>{const Z=x.el=T?T.el:l(""),ue=x.anchor=T?T.anchor:l("");let{patchFlag:re,dynamicChildren:pe,slotScopeIds:le}=x;le&&(se=se?se.concat(le):le),T==null?(s(Z,V,G),s(ue,V,G),w(x.children||[],V,ue,K,W,ae,se,ne)):re>0&&re&64&&pe&&T.dynamicChildren?(S(T.dynamicChildren,pe,V,K,W,ae,se),(x.key!=null||K&&x===K.subTree)&&Bg(T,x,!0)):I(T,x,V,ue,K,W,ae,se,ne)},E=(T,x,V,G,K,W,ae,se,ne)=>{x.slotScopeIds=se,T==null?x.shapeFlag&512?K.ctx.activate(x,V,G,ae,ne):De(x,V,G,K,W,ae,ne):Se(T,x,ne)},De=(T,x,V,G,K,W,ae)=>{const se=T.component=Db(T,G,K);if(fl(T)&&(se.ctx.renderer=fe),Nb(se,!1,ae),se.asyncDep){if(K&&K.registerDep(se,Le,ae),!T.el){const ne=se.subTree=Ae(Mt);H(null,ne,x,V),T.placeholder=ne.el}}else Le(se,T,x,V,K,W,ae)},Se=(T,x,V)=>{const G=x.component=T.component;if(fb(T,x,V))if(G.asyncDep&&!G.asyncResolved){te(G,x,V);return}else G.next=x,G.update();else x.el=T.el,G.vnode=x},Le=(T,x,V,G,K,W,ae)=>{const se=()=>{if(T.isMounted){let{next:re,bu:pe,u:le,parent:be,vnode:Re}=T;{const Wt=jg(T);if(Wt){re&&(re.el=Re.el,te(T,re,ae)),Wt.asyncDep.then(()=>{T.isUnmounted||se()});return}}let Pe=re,lt;sr(T,!1),re?(re.el=Re.el,te(T,re,ae)):re=Re,pe&&la(pe),(lt=re.props&&re.props.onVnodeBeforeUpdate)&&kn(lt,be,re,Re),sr(T,!0);const ct=tf(T),Pt=T.subTree;T.subTree=ct,N(Pt,ct,p(Pt.el),z(Pt),T,K,W),re.el=ct.el,Pe===null&&pb(T,ct.el),le&&en(le,K),(lt=re.props&&re.props.onVnodeUpdated)&&en(()=>kn(lt,be,re,Re),K)}else{let re;const{el:pe,props:le}=x,{bm:be,m:Re,parent:Pe,root:lt,type:ct}=T,Pt=zr(x);sr(T,!1),be&&la(be),!Pt&&(re=le&&le.onVnodeBeforeMount)&&kn(re,Pe,x),sr(T,!0);{lt.ce&&lt.ce._def.shadowRoot!==!1&&lt.ce._injectChildStyle(ct);const Wt=T.subTree=tf(T);N(null,Wt,V,G,T,K,W),x.el=Wt.el}if(Re&&en(Re,K),!Pt&&(re=le&&le.onVnodeMounted)){const Wt=x;en(()=>kn(re,Pe,Wt),K)}(x.shapeFlag&256||Pe&&zr(Pe.vnode)&&Pe.vnode.shapeFlag&256)&&T.a&&en(T.a,K),T.isMounted=!0,x=V=G=null}};T.scope.on();const ne=T.effect=new qm(se);T.scope.off();const Z=T.update=ne.run.bind(ne),ue=T.job=ne.runIfDirty.bind(ne);ue.i=T,ue.id=T.uid,ne.scheduler=()=>zu(ue),sr(T,!0),Z()},te=(T,x,V)=>{x.component=T;const G=T.vnode.props;T.vnode=x,T.next=null,gb(T,x.props,G,V),wb(T,x.children,V),as(),Gh(T),ls()},I=(T,x,V,G,K,W,ae,se,ne=!1)=>{const Z=T&&T.children,ue=T?T.shapeFlag:0,re=x.children,{patchFlag:pe,shapeFlag:le}=x;if(pe>0){if(pe&128){J(Z,re,V,G,K,W,ae,se,ne);return}else if(pe&256){q(Z,re,V,G,K,W,ae,se,ne);return}}le&8?(ue&16&&it(Z,K,W),re!==Z&&h(V,re)):ue&16?le&16?J(Z,re,V,G,K,W,ae,se,ne):it(Z,K,W,!0):(ue&8&&h(V,""),le&16&&w(re,V,G,K,W,ae,se,ne))},q=(T,x,V,G,K,W,ae,se,ne)=>{T=T||jr,x=x||jr;const Z=T.length,ue=x.length,re=Math.min(Z,ue);let pe;for(pe=0;pe<re;pe++){const le=x[pe]=ne?Ss(x[pe]):Nn(x[pe]);N(T[pe],le,V,null,K,W,ae,se,ne)}Z>ue?it(T,K,W,!0,!1,re):w(x,V,G,K,W,ae,se,ne,re)},J=(T,x,V,G,K,W,ae,se,ne)=>{let Z=0;const ue=x.length;let re=T.length-1,pe=ue-1;for(;Z<=re&&Z<=pe;){const le=T[Z],be=x[Z]=ne?Ss(x[Z]):Nn(x[Z]);if(lr(le,be))N(le,be,V,null,K,W,ae,se,ne);else break;Z++}for(;Z<=re&&Z<=pe;){const le=T[re],be=x[pe]=ne?Ss(x[pe]):Nn(x[pe]);if(lr(le,be))N(le,be,V,null,K,W,ae,se,ne);else break;re--,pe--}if(Z>re){if(Z<=pe){const le=pe+1,be=le<ue?x[le].el:G;for(;Z<=pe;)N(null,x[Z]=ne?Ss(x[Z]):Nn(x[Z]),V,be,K,W,ae,se,ne),Z++}}else if(Z>pe)for(;Z<=re;)me(T[Z],K,W,!0),Z++;else{const le=Z,be=Z,Re=new Map;for(Z=be;Z<=pe;Z++){const ut=x[Z]=ne?Ss(x[Z]):Nn(x[Z]);ut.key!=null&&Re.set(ut.key,Z)}let Pe,lt=0;const ct=pe-be+1;let Pt=!1,Wt=0;const Jt=new Array(ct);for(Z=0;Z<ct;Z++)Jt[Z]=0;for(Z=le;Z<=re;Z++){const ut=T[Z];if(lt>=ct){me(ut,K,W,!0);continue}let tt;if(ut.key!=null)tt=Re.get(ut.key);else for(Pe=be;Pe<=pe;Pe++)if(Jt[Pe-be]===0&&lr(ut,x[Pe])){tt=Pe;break}tt===void 0?me(ut,K,W,!0):(Jt[tt-be]=Z+1,tt>=Wt?Wt=tt:Pt=!0,N(ut,x[tt],V,null,K,W,ae,se,ne),lt++)}const Ys=Pt?Ib(Jt):jr;for(Pe=Ys.length-1,Z=ct-1;Z>=0;Z--){const ut=be+Z,tt=x[ut],Pr=x[ut+1],Gn=ut+1<ue?Pr.el||Pr.placeholder:G;Jt[Z]===0?N(null,tt,V,Gn,K,W,ae,se,ne):Pt&&(Pe<0||Z!==Ys[Pe]?U(tt,V,Gn,2):Pe--)}}},U=(T,x,V,G,K=null)=>{const{el:W,type:ae,transition:se,children:ne,shapeFlag:Z}=T;if(Z&6){U(T.component.subTree,x,V,G);return}if(Z&128){T.suspense.move(x,V,G);return}if(Z&64){ae.move(T,x,V,fe);return}if(ae===$e){s(W,x,V);for(let re=0;re<ne.length;re++)U(ne[re],x,V,G);s(T.anchor,x,V);return}if(ae===ua){C(T,x,V);return}if(G!==2&&Z&1&&se)if(G===0)se.beforeEnter(W),s(W,x,V),en(()=>se.enter(W),K);else{const{leave:re,delayLeave:pe,afterLeave:le}=se,be=()=>{T.ctx.isUnmounted?r(W):s(W,x,V)},Re=()=>{W._isLeaving&&W[Jn](!0),re(W,()=>{be(),le&&le()})};pe?pe(W,be,Re):Re()}else s(W,x,V)},me=(T,x,V,G=!1,K=!1)=>{const{type:W,props:ae,ref:se,children:ne,dynamicChildren:Z,shapeFlag:ue,patchFlag:re,dirs:pe,cacheIndex:le}=T;if(re===-2&&(K=!1),se!=null&&(as(),Wi(se,null,V,T,!0),ls()),le!=null&&(x.renderCache[le]=void 0),ue&256){x.ctx.deactivate(T);return}const be=ue&1&&pe,Re=!zr(T);let Pe;if(Re&&(Pe=ae&&ae.onVnodeBeforeUnmount)&&kn(Pe,x,T),ue&6)wt(T.component,V,G);else{if(ue&128){T.suspense.unmount(V,G);return}be&&nr(T,null,x,"beforeUnmount"),ue&64?T.type.remove(T,x,V,fe,G):Z&&!Z.hasOnce&&(W!==$e||re>0&&re&64)?it(Z,x,V,!1,!0):(W===$e&&re&384||!K&&ue&16)&&it(ne,x,V),G&&ze(T)}(Re&&(Pe=ae&&ae.onVnodeUnmounted)||be)&&en(()=>{Pe&&kn(Pe,x,T),be&&nr(T,null,x,"unmounted")},V)},ze=T=>{const{type:x,el:V,anchor:G,transition:K}=T;if(x===$e){ke(V,G);return}if(x===ua){P(T);return}const W=()=>{r(V),K&&!K.persisted&&K.afterLeave&&K.afterLeave()};if(T.shapeFlag&1&&K&&!K.persisted){const{leave:ae,delayLeave:se}=K,ne=()=>ae(V,W);se?se(T.el,W,ne):ne()}else W()},ke=(T,x)=>{let V;for(;T!==x;)V=m(T),r(T),T=V;r(x)},wt=(T,x,V)=>{const{bum:G,scope:K,job:W,subTree:ae,um:se,m:ne,a:Z}=T;rf(ne),rf(Z),G&&la(G),K.stop(),W&&(W.flags|=8,me(ae,T,x,V)),se&&en(se,x),en(()=>{T.isUnmounted=!0},x)},it=(T,x,V,G=!1,K=!1,W=0)=>{for(let ae=W;ae<T.length;ae++)me(T[ae],x,V,G,K)},z=T=>{if(T.shapeFlag&6)return z(T.component.subTree);if(T.shapeFlag&128)return T.suspense.next();const x=m(T.anchor||T.el),V=x&&x[Mw];return V?m(V):x};let ee=!1;const ce=(T,x,V)=>{T==null?x._vnode&&me(x._vnode,null,null,!0):N(x._vnode||null,T,x,null,null,null,V),x._vnode=T,ee||(ee=!0,Gh(),cg(),ee=!1)},fe={p:N,um:me,m:U,r:ze,mt:De,mc:w,pc:I,pbc:S,n:z,o:t};return{render:ce,hydrate:void 0,createApp:rb(ce)}}function yc({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function sr({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Tb(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Bg(t,e,n=!1){const s=t.children,r=e.children;if(ve(s)&&ve(r))for(let i=0;i<s.length;i++){const o=s[i];let l=r[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[i]=Ss(r[i]),l.el=o.el),!n&&l.patchFlag!==-2&&Bg(o,l)),l.type===gl&&l.patchFlag!==-1&&(l.el=o.el),l.type===Mt&&!l.el&&(l.el=o.el)}}function Ib(t){const e=t.slice(),n=[0];let s,r,i,o,l;const c=t.length;for(s=0;s<c;s++){const u=t[s];if(u!==0){if(r=n[n.length-1],t[r]<u){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)l=i+o>>1,t[n[l]]<u?i=l+1:o=l;u<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function jg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:jg(e)}function rf(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Hg=t=>t.__isSuspense;function xb(t,e){e&&e.pendingBranch?ve(t)?e.effects.push(...t):e.effects.push(t):Ow(t)}const $e=Symbol.for("v-fgt"),gl=Symbol.for("v-txt"),Mt=Symbol.for("v-cmt"),ua=Symbol.for("v-stc"),Qi=[];let nn=null;function F(t=!1){Qi.push(nn=t?null:[])}function Ab(){Qi.pop(),nn=Qi[Qi.length-1]||null}let lo=1;function Sa(t,e=!1){lo+=t,t<0&&nn&&e&&(nn.hasOnce=!0)}function qg(t){return t.dynamicChildren=lo>0?nn||jr:null,Ab(),lo>0&&nn&&nn.push(t),t}function j(t,e,n,s,r,i){return qg(d(t,e,n,s,r,i,!0))}function tn(t,e,n,s,r){return qg(Ae(t,e,n,s,r,!0))}function co(t){return t?t.__v_isVNode===!0:!1}function lr(t,e){return t.type===e.type&&t.key===e.key}const zg=({key:t})=>t??null,da=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?ft(t)||Ft(t)||Ie(t)?{i:Ct,r:t,k:e,f:!!n}:t:null);function d(t,e=null,n=null,s=0,r=null,i=t===$e?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&zg(e),ref:e&&da(e),scopeId:dg,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Ct};return l?(Qu(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=ft(n)?8:16),lo>0&&!o&&nn&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&nn.push(c),c}const Ae=Rb;function Rb(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===Ig)&&(t=Mt),co(t)){const l=Us(t,e,!0);return n&&Qu(l,n),lo>0&&!i&&nn&&(l.shapeFlag&6?nn[nn.indexOf(t)]=l:nn.push(l)),l.patchFlag=-2,l}if(Fb(t)&&(t=t.__vccOpts),e){e=Sb(e);let{class:l,style:c}=e;l&&!ft(l)&&(e.class=qe(l)),Ge(c)&&(qu(c)&&!ve(c)&&(c=At({},c)),e.style=ms(c))}const o=ft(t)?1:Hg(t)?128:hg(t)?64:Ge(t)?4:Ie(t)?2:0;return d(t,e,n,s,r,o,i,!0)}function Sb(t){return t?qu(t)||Og(t)?At({},t):t:null}function Us(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:l,transition:c}=t,u=e?Cb(r||{},e):r,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&zg(u),ref:e&&e.ref?n&&i?ve(i)?i.concat(da(e)):[i,da(e)]:da(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==$e?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Us(t.ssContent),ssFallback:t.ssFallback&&Us(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&s&&ao(h,c.clone(h)),h}function Ke(t=" ",e=0){return Ae(gl,null,t,e)}function is(t,e){const n=Ae(ua,null,t);return n.staticCount=e,n}function _e(t="",e=!1){return e?(F(),tn(Mt,null,t)):Ae(Mt,null,t)}function Nn(t){return t==null||typeof t=="boolean"?Ae(Mt):ve(t)?Ae($e,null,t.slice()):co(t)?Ss(t):Ae(gl,null,String(t))}function Ss(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Us(t)}function Qu(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(ve(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),Qu(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!Og(e)?e._ctx=Ct:r===3&&Ct&&(Ct.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ie(e)?(e={default:e,_ctx:Ct},n=32):(e=String(e),s&64?(n=16,e=[Ke(e)]):n=8);t.children=e,t.shapeFlag|=n}function Cb(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=qe([e.class,s.class]));else if(r==="style")e.style=ms([e.style,s.style]);else if(nl(r)){const i=e[r],o=s[r];o&&i!==o&&!(ve(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function kn(t,e,n,s=null){Tn(t,e,7,[n,s])}const kb=Cg();let Pb=0;function Db(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||kb,i={uid:Pb++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new iw(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Lg(s,r),emitsOptions:Dg(s,r),emit:null,emitted:null,propsDefaults:Qe,inheritAttrs:s.inheritAttrs,ctx:Qe,data:Qe,props:Qe,attrs:Qe,slots:Qe,refs:Qe,setupState:Qe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=cb.bind(null,i),t.ce&&t.ce(i),i}let Lt=null;const Gg=()=>Lt||Ct;let Ca,Xc;{const t=al(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};Ca=e("__VUE_INSTANCE_SETTERS__",n=>Lt=n),Xc=e("__VUE_SSR_SETTERS__",n=>uo=n)}const Ao=t=>{const e=Lt;return Ca(t),t.scope.on(),()=>{t.scope.off(),Ca(e)}},of=()=>{Lt&&Lt.scope.off(),Ca(null)};function Wg(t){return t.vnode.shapeFlag&4}let uo=!1;function Nb(t,e=!1,n=!1){e&&Xc(e);const{props:s,children:r}=t.vnode,i=Wg(t);mb(t,s,i,e),vb(t,r,n||e);const o=i?Vb(t,e):void 0;return e&&Xc(!1),o}function Vb(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Xw);const{setup:s}=n;if(s){as();const r=t.setupContext=s.length>1?Mb(t):null,i=Ao(t),o=xo(s,t,0,[t.props,r]),l=Lm(o);if(ls(),i(),(l||t.sp)&&!zr(t)&&vg(t),l){if(o.then(of,of),e)return o.then(c=>{af(t,c)}).catch(c=>{dl(c,t,0)});t.asyncDep=o}else af(t,o)}else Kg(t)}function af(t,e,n){Ie(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ge(e)&&(t.setupState=og(e)),Kg(t)}function Kg(t,e,n){const s=t.type;t.render||(t.render=s.render||On);{const r=Ao(t);as();try{Jw(t)}finally{ls(),r()}}}const Ob={get(t,e){return Vt(t,"get",""),t[e]}};function Mb(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Ob),slots:t.slots,emit:t.emit,expose:e}}function yl(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(og(xw(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ki)return Ki[n](t)},has(e,n){return n in e||n in Ki}})):t.proxy}function Lb(t,e=!0){return Ie(t)?t.displayName||t.name:t.name||e&&t.__name}function Fb(t){return Ie(t)&&"__vccOpts"in t}const et=(t,e)=>kw(t,e,uo);function Yu(t,e,n){try{Sa(-1);const s=arguments.length;return s===2?Ge(e)&&!ve(e)?co(e)?Ae(t,null,[e]):Ae(t,e):Ae(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&co(n)&&(n=[n]),Ae(t,e,n))}finally{Sa(1)}}const Ub="3.5.25";let Jc;const lf=typeof window<"u"&&window.trustedTypes;if(lf)try{Jc=lf.createPolicy("vue",{createHTML:t=>t})}catch{}const Qg=Jc?t=>Jc.createHTML(t):t=>t,$b="http://www.w3.org/2000/svg",Bb="http://www.w3.org/1998/Math/MathML",Xn=typeof document<"u"?document:null,cf=Xn&&Xn.createElement("template"),jb={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Xn.createElementNS($b,t):e==="mathml"?Xn.createElementNS(Bb,t):n?Xn.createElement(t,{is:n}):Xn.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Xn.createTextNode(t),createComment:t=>Xn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Xn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{cf.innerHTML=Qg(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const l=cf.content;if(s==="svg"||s==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Ts="transition",Mi="animation",ho=Symbol("_vtc"),Yg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Hb=At({},fg,Yg),qb=t=>(t.displayName="Transition",t.props=Hb,t),zb=qb((t,{slots:e})=>Yu(Uw,Gb(t),e)),rr=(t,e=[])=>{ve(t)?t.forEach(n=>n(...e)):t&&t(...e)},uf=t=>t?ve(t)?t.some(e=>e.length>1):t.length>1:!1;function Gb(t){const e={};for(const A in t)A in Yg||(e[A]=t[A]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:u=o,appearToClass:h=l,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:y=`${n}-leave-to`}=t,D=Wb(r),N=D&&D[0],M=D&&D[1],{onBeforeEnter:H,onEnter:k,onEnterCancelled:C,onLeave:P,onLeaveCancelled:O,onBeforeAppear:B=H,onAppear:v=k,onAppearCancelled:w=C}=e,b=(A,E,De,Se)=>{A._enterCancelled=Se,ir(A,E?h:l),ir(A,E?u:o),De&&De()},S=(A,E)=>{A._isLeaving=!1,ir(A,p),ir(A,y),ir(A,m),E&&E()},R=A=>(E,De)=>{const Se=A?v:k,Le=()=>b(E,A,De);rr(Se,[E,Le]),df(()=>{ir(E,A?c:i),Kn(E,A?h:l),uf(Se)||hf(E,s,N,Le)})};return At(e,{onBeforeEnter(A){rr(H,[A]),Kn(A,i),Kn(A,o)},onBeforeAppear(A){rr(B,[A]),Kn(A,c),Kn(A,u)},onEnter:R(!1),onAppear:R(!0),onLeave(A,E){A._isLeaving=!0;const De=()=>S(A,E);Kn(A,p),A._enterCancelled?(Kn(A,m),mf(A)):(mf(A),Kn(A,m)),df(()=>{A._isLeaving&&(ir(A,p),Kn(A,y),uf(P)||hf(A,s,M,De))}),rr(P,[A,De])},onEnterCancelled(A){b(A,!1,void 0,!0),rr(C,[A])},onAppearCancelled(A){b(A,!0,void 0,!0),rr(w,[A])},onLeaveCancelled(A){S(A),rr(O,[A])}})}function Wb(t){if(t==null)return null;if(Ge(t))return[_c(t.enter),_c(t.leave)];{const e=_c(t);return[e,e]}}function _c(t){return Yv(t)}function Kn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[ho]||(t[ho]=new Set)).add(e)}function ir(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[ho];n&&(n.delete(e),n.size||(t[ho]=void 0))}function df(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Kb=0;function hf(t,e,n,s){const r=t._endId=++Kb,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:l,propCount:c}=Qb(t,e);if(!o)return s();const u=o+"end";let h=0;const p=()=>{t.removeEventListener(u,m),i()},m=y=>{y.target===t&&++h>=c&&p()};setTimeout(()=>{h<c&&p()},l+1),t.addEventListener(u,m)}function Qb(t,e){const n=window.getComputedStyle(t),s=D=>(n[D]||"").split(", "),r=s(`${Ts}Delay`),i=s(`${Ts}Duration`),o=ff(r,i),l=s(`${Mi}Delay`),c=s(`${Mi}Duration`),u=ff(l,c);let h=null,p=0,m=0;e===Ts?o>0&&(h=Ts,p=o,m=i.length):e===Mi?u>0&&(h=Mi,p=u,m=c.length):(p=Math.max(o,u),h=p>0?o>u?Ts:Mi:null,m=h?h===Ts?i.length:c.length:0);const y=h===Ts&&/\b(?:transform|all)(?:,|$)/.test(s(`${Ts}Property`).toString());return{type:h,timeout:p,propCount:m,hasTransform:y}}function ff(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>pf(n)+pf(t[s])))}function pf(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function mf(t){return(t?t.ownerDocument:document).body.offsetHeight}function Yb(t,e,n){const s=t[ho];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const gf=Symbol("_vod"),Xb=Symbol("_vsh"),Jb=Symbol(""),Zb=/(?:^|;)\s*display\s*:/;function e1(t,e,n){const s=t.style,r=ft(n);let i=!1;if(n&&!r){if(e)if(ft(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&ha(s,l,"")}else for(const o in e)n[o]==null&&ha(s,o,"");for(const o in n)o==="display"&&(i=!0),ha(s,o,n[o])}else if(r){if(e!==n){const o=s[Jb];o&&(n+=";"+o),s.cssText=n,i=Zb.test(n)}}else e&&t.removeAttribute("style");gf in t&&(t[gf]=i?s.display:"",t[Xb]&&(s.display="none"))}const yf=/\s*!important$/;function ha(t,e,n){if(ve(n))n.forEach(s=>ha(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=t1(t,e);yf.test(n)?t.setProperty(Tr(s),n.replace(yf,""),"important"):t[s]=n}}const _f=["Webkit","Moz","ms"],vc={};function t1(t,e){const n=vc[e];if(n)return n;let s=hn(e);if(s!=="filter"&&s in t)return vc[e]=s;s=il(s);for(let r=0;r<_f.length;r++){const i=_f[r]+s;if(i in t)return vc[e]=i}return e}const vf="http://www.w3.org/1999/xlink";function wf(t,e,n,s,r,i=nw(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(vf,e.slice(6,e.length)):t.setAttributeNS(vf,e,n):n==null||i&&!Bm(n)?t.removeAttribute(e):t.setAttribute(e,i?"":bn(n)?String(n):n)}function bf(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Qg(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=Bm(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function cr(t,e,n,s){t.addEventListener(e,n,s)}function n1(t,e,n,s){t.removeEventListener(e,n,s)}const Ef=Symbol("_vei");function s1(t,e,n,s,r=null){const i=t[Ef]||(t[Ef]={}),o=i[e];if(s&&o)o.value=s;else{const[l,c]=r1(e);if(s){const u=i[e]=a1(s,r);cr(t,l,u,c)}else o&&(n1(t,l,o,c),i[e]=void 0)}}const Tf=/(?:Once|Passive|Capture)$/;function r1(t){let e;if(Tf.test(t)){e={};let s;for(;s=t.match(Tf);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Tr(t.slice(2)),e]}let wc=0;const i1=Promise.resolve(),o1=()=>wc||(i1.then(()=>wc=0),wc=Date.now());function a1(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Tn(l1(s,n.value),e,5,[s])};return n.value=t,n.attached=o1(),n}function l1(t,e){if(ve(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const If=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,c1=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?Yb(t,s,o):e==="style"?e1(t,n,s):nl(e)?Ou(e)||s1(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):u1(t,e,s,o))?(bf(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&wf(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ft(s))?bf(t,hn(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),wf(t,e,s,o))};function u1(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&If(e)&&Ie(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return If(e)&&ft(n)?!1:e in t}const ka=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ve(e)?n=>la(e,n):e};function d1(t){t.target.composing=!0}function xf(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Wr=Symbol("_assign");function Af(t,e,n){return e&&(t=t.trim()),n&&(t=ol(t)),t}const Je={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[Wr]=ka(r);const i=s||r.props&&r.props.type==="number";cr(t,e?"change":"input",o=>{o.target.composing||t[Wr](Af(t.value,n,i))}),(n||i)&&cr(t,"change",()=>{t.value=Af(t.value,n,i)}),e||(cr(t,"compositionstart",d1),cr(t,"compositionend",xf),cr(t,"change",xf))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(t[Wr]=ka(o),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?ol(t.value):t.value,c=e??"";l!==c&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||r&&t.value.trim()===c)||(t.value=c))}},Yi={deep:!0,created(t,{value:e,modifiers:{number:n}},s){const r=sl(e);cr(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?ol(Pa(o)):Pa(o));t[Wr](t.multiple?r?new Set(i):i:i[0]),t._assigning=!0,hl(()=>{t._assigning=!1})}),t[Wr]=ka(s)},mounted(t,{value:e}){Rf(t,e)},beforeUpdate(t,e,n){t[Wr]=ka(n)},updated(t,{value:e}){t._assigning||Rf(t,e)}};function Rf(t,e){const n=t.multiple,s=ve(e);if(!(n&&!s&&!sl(e))){for(let r=0,i=t.options.length;r<i;r++){const o=t.options[r],l=Pa(o);if(n)if(s){const c=typeof l;c==="string"||c==="number"?o.selected=e.some(u=>String(u)===String(l)):o.selected=rw(e,l)>-1}else o.selected=e.has(l);else if(ll(Pa(o),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Pa(t){return"_value"in t?t._value:t.value}const h1=["ctrl","shift","alt","meta"],f1={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>h1.some(n=>t[`${n}Key`]&&!e.includes(n))},Vn=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const l=f1[e[o]];if(l&&l(r,e))return}return t(r,...i)})},p1=At({patchProp:c1},jb);let Sf;function m1(){return Sf||(Sf=bb(p1))}const g1=(...t)=>{const e=m1().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=_1(s);if(!r)return;const i=e._component;!Ie(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,y1(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function y1(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function _1(t){return ft(t)?document.querySelector(t):t}const ui=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},v1={},w1={class:"min-h-screen w-full overflow-x-hidden"};function b1(t,e){const n=Tg("router-view");return F(),j("div",w1,[Ae(n)])}const E1=ui(v1,[["render",b1]]);const Lr=typeof document<"u";function Xg(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function T1(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Xg(t.default)}const Be=Object.assign;function bc(t,e){const n={};for(const s in e){const r=e[s];n[s]=In(r)?r.map(t):t(r)}return n}const Xi=()=>{},In=Array.isArray;function Cf(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}const Jg=/#/g,I1=/&/g,x1=/\//g,A1=/=/g,R1=/\?/g,Zg=/\+/g,S1=/%5B/g,C1=/%5D/g,ey=/%5E/g,k1=/%60/g,ty=/%7B/g,P1=/%7C/g,ny=/%7D/g,D1=/%20/g;function Xu(t){return t==null?"":encodeURI(""+t).replace(P1,"|").replace(S1,"[").replace(C1,"]")}function N1(t){return Xu(t).replace(ty,"{").replace(ny,"}").replace(ey,"^")}function Zc(t){return Xu(t).replace(Zg,"%2B").replace(D1,"+").replace(Jg,"%23").replace(I1,"%26").replace(k1,"`").replace(ty,"{").replace(ny,"}").replace(ey,"^")}function V1(t){return Zc(t).replace(A1,"%3D")}function O1(t){return Xu(t).replace(Jg,"%23").replace(R1,"%3F")}function M1(t){return O1(t).replace(x1,"%2F")}function fo(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const L1=/\/$/,F1=t=>t.replace(L1,"");function Ec(t,e,n="/"){let s,r={},i="",o="";const l=e.indexOf("#");let c=e.indexOf("?");return c=l>=0&&c>l?-1:c,c>=0&&(s=e.slice(0,c),i=e.slice(c,l>0?l:e.length),r=t(i.slice(1))),l>=0&&(s=s||e.slice(0,l),o=e.slice(l,e.length)),s=j1(s??e,n),{fullPath:s+i+o,path:s,query:r,hash:fo(o)}}function U1(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function kf(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function $1(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&ti(e.matched[s],n.matched[r])&&sy(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function ti(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function sy(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!B1(t[n],e[n]))return!1;return!0}function B1(t,e){return In(t)?Pf(t,e):In(e)?Pf(e,t):t===e}function Pf(t,e){return In(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function j1(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,l;for(o=0;o<s.length;o++)if(l=s[o],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const Is={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let eu=function(t){return t.pop="pop",t.push="push",t}({}),Tc=function(t){return t.back="back",t.forward="forward",t.unknown="",t}({});function H1(t){if(!t)if(Lr){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),F1(t)}const q1=/^[^#]+#/;function z1(t,e){return t.replace(q1,"#")+e}function G1(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const _l=()=>({left:window.scrollX,top:window.scrollY});function W1(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=G1(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Df(t,e){return(history.state?history.state.position-e:-1)+t}const tu=new Map;function K1(t,e){tu.set(t,e)}function Q1(t){const e=tu.get(t);return tu.delete(t),e}function Y1(t){return typeof t=="string"||t&&typeof t=="object"}function ry(t){return typeof t=="string"||typeof t=="symbol"}let ht=function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t}({});const iy=Symbol("");ht.MATCHER_NOT_FOUND+"",ht.NAVIGATION_GUARD_REDIRECT+"",ht.NAVIGATION_ABORTED+"",ht.NAVIGATION_CANCELLED+"",ht.NAVIGATION_DUPLICATED+"";function ni(t,e){return Be(new Error,{type:t,[iy]:!0},e)}function Qn(t,e){return t instanceof Error&&iy in t&&(e==null||!!(t.type&e))}const X1=["params","query","hash"];function J1(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of X1)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function Z1(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(Zg," "),i=r.indexOf("="),o=fo(i<0?r:r.slice(0,i)),l=i<0?null:fo(r.slice(i+1));if(o in e){let c=e[o];In(c)||(c=e[o]=[c]),c.push(l)}else e[o]=l}return e}function Nf(t){let e="";for(let n in t){const s=t[n];if(n=V1(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(In(s)?s.map(r=>r&&Zc(r)):[s&&Zc(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function eE(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=In(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const tE=Symbol(""),Vf=Symbol(""),vl=Symbol(""),Ju=Symbol(""),nu=Symbol("");function Li(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Cs(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((l,c)=>{const u=m=>{m===!1?c(ni(ht.NAVIGATION_ABORTED,{from:n,to:e})):m instanceof Error?c(m):Y1(m)?c(ni(ht.NAVIGATION_GUARD_REDIRECT,{from:e,to:m})):(o&&s.enterCallbacks[r]===o&&typeof m=="function"&&o.push(m),l())},h=i(()=>t.call(s&&s.instances[r],e,n,u));let p=Promise.resolve(h);t.length<3&&(p=p.then(u)),p.catch(m=>c(m))})}function Ic(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const l in o.components){let c=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(Xg(c)){const u=(c.__vccOpts||c)[e];u&&i.push(Cs(u,n,s,o,l,r))}else{let u=c();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const p=T1(h)?h.default:h;o.mods[l]=h,o.components[l]=p;const m=(p.__vccOpts||p)[e];return m&&Cs(m,n,s,o,l,r)()}))}}return i}function nE(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const l=e.matched[o];l&&(t.matched.find(u=>ti(u,l))?s.push(l):n.push(l));const c=t.matched[o];c&&(e.matched.find(u=>ti(u,c))||r.push(c))}return[n,s,r]}let sE=()=>location.protocol+"//"+location.host;function oy(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,l=r.slice(o);return l[0]!=="/"&&(l="/"+l),kf(l,"")}return kf(n,t)+s+r}function rE(t,e,n,s){let r=[],i=[],o=null;const l=({state:m})=>{const y=oy(t,location),D=n.value,N=e.value;let M=0;if(m){if(n.value=y,e.value=m,o&&o===D){o=null;return}M=N?m.position-N.position:0}else s(y);r.forEach(H=>{H(n.value,D,{delta:M,type:eu.pop,direction:M?M>0?Tc.forward:Tc.back:Tc.unknown})})};function c(){o=n.value}function u(m){r.push(m);const y=()=>{const D=r.indexOf(m);D>-1&&r.splice(D,1)};return i.push(y),y}function h(){if(document.visibilityState==="hidden"){const{history:m}=window;if(!m.state)return;m.replaceState(Be({},m.state,{scroll:_l()}),"")}}function p(){for(const m of i)m();i=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",h),document.removeEventListener("visibilitychange",h)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",h),document.addEventListener("visibilitychange",h),{pauseListeners:c,listen:u,destroy:p}}function Of(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?_l():null}}function iE(t){const{history:e,location:n}=window,s={value:oy(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,u,h){const p=t.indexOf("#"),m=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+c:sE()+t+c;try{e[h?"replaceState":"pushState"](u,"",m),r.value=u}catch(y){console.error(y),n[h?"replace":"assign"](m)}}function o(c,u){i(c,Be({},e.state,Of(r.value.back,c,r.value.forward,!0),u,{position:r.value.position}),!0),s.value=c}function l(c,u){const h=Be({},r.value,e.state,{forward:c,scroll:_l()});i(h.current,h,!0),i(c,Be({},Of(s.value,c,null),{position:h.position+1},u),!1),s.value=c}return{location:s,state:r,push:l,replace:o}}function oE(t){t=H1(t);const e=iE(t),n=rE(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=Be({location:"",base:t,go:s,createHref:z1.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}let ur=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t}({});var Et=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t}(Et||{});const aE={type:ur.Static,value:""},lE=/[a-zA-Z0-9_]/;function cE(t){if(!t)return[[]];if(t==="/")return[[aE]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(y){throw new Error(`ERR (${n})/"${u}": ${y}`)}let n=Et.Static,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let l=0,c,u="",h="";function p(){u&&(n===Et.Static?i.push({type:ur.Static,value:u}):n===Et.Param||n===Et.ParamRegExp||n===Et.ParamRegExpEnd?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:ur.Param,value:u,regexp:h,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function m(){u+=c}for(;l<t.length;){if(c=t[l++],c==="\\"&&n!==Et.ParamRegExp){s=n,n=Et.EscapeNext;continue}switch(n){case Et.Static:c==="/"?(u&&p(),o()):c===":"?(p(),n=Et.Param):m();break;case Et.EscapeNext:m(),n=s;break;case Et.Param:c==="("?n=Et.ParamRegExp:lE.test(c)?m():(p(),n=Et.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case Et.ParamRegExp:c===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+c:n=Et.ParamRegExpEnd:h+=c;break;case Et.ParamRegExpEnd:p(),n=Et.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--,h="";break;default:e("Unknown state");break}}return n===Et.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),p(),o(),r}const Mf="[^/]+?",uE={sensitive:!1,strict:!1,start:!0,end:!0};var qt=function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t}(qt||{});const dE=/[.+*?^${}()[\]/\\]/g;function hE(t,e){const n=Be({},uE,e),s=[];let r=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[qt.Root];n.strict&&!u.length&&(r+="/");for(let p=0;p<u.length;p++){const m=u[p];let y=qt.Segment+(n.sensitive?qt.BonusCaseSensitive:0);if(m.type===ur.Static)p||(r+="/"),r+=m.value.replace(dE,"\\$&"),y+=qt.Static;else if(m.type===ur.Param){const{value:D,repeatable:N,optional:M,regexp:H}=m;i.push({name:D,repeatable:N,optional:M});const k=H||Mf;if(k!==Mf){y+=qt.BonusCustomRegExp;try{`${k}`}catch(P){throw new Error(`Invalid custom RegExp for param "${D}" (${k}): `+P.message)}}let C=N?`((?:${k})(?:/(?:${k}))*)`:`(${k})`;p||(C=M&&u.length<2?`(?:/${C})`:"/"+C),M&&(C+="?"),r+=C,y+=qt.Dynamic,M&&(y+=qt.BonusOptional),N&&(y+=qt.BonusRepeatable),k===".*"&&(y+=qt.BonusWildcard)}h.push(y)}s.push(h)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=qt.BonusStrict}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function l(u){const h=u.match(o),p={};if(!h)return null;for(let m=1;m<h.length;m++){const y=h[m]||"",D=i[m-1];p[D.name]=y&&D.repeatable?y.split("/"):y}return p}function c(u){let h="",p=!1;for(const m of t){(!p||!h.endsWith("/"))&&(h+="/"),p=!1;for(const y of m)if(y.type===ur.Static)h+=y.value;else if(y.type===ur.Param){const{value:D,repeatable:N,optional:M}=y,H=D in u?u[D]:"";if(In(H)&&!N)throw new Error(`Provided param "${D}" is an array but it is not repeatable (* or + modifiers)`);const k=In(H)?H.join("/"):H;if(!k)if(M)m.length<2&&(h.endsWith("/")?h=h.slice(0,-1):p=!0);else throw new Error(`Missing required param "${D}"`);h+=k}}return h||"/"}return{re:o,score:s,keys:i,parse:l,stringify:c}}function fE(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===qt.Static+qt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===qt.Static+qt.Segment?1:-1:0}function ay(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=fE(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(Lf(s))return 1;if(Lf(r))return-1}return r.length-s.length}function Lf(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const pE={strict:!1,end:!0,sensitive:!1};function mE(t,e,n){const s=hE(cE(t.path),n),r=Be(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function gE(t,e){const n=[],s=new Map;e=Cf(pE,e);function r(p){return s.get(p)}function i(p,m,y){const D=!y,N=Uf(p);N.aliasOf=y&&y.record;const M=Cf(e,p),H=[N];if("alias"in p){const P=typeof p.alias=="string"?[p.alias]:p.alias;for(const O of P)H.push(Uf(Be({},N,{components:y?y.record.components:N.components,path:O,aliasOf:y?y.record:N})))}let k,C;for(const P of H){const{path:O}=P;if(m&&O[0]!=="/"){const B=m.record.path,v=B[B.length-1]==="/"?"":"/";P.path=m.record.path+(O&&v+O)}if(k=mE(P,m,M),y?y.alias.push(k):(C=C||k,C!==k&&C.alias.push(k),D&&p.name&&!$f(k)&&o(p.name)),ly(k)&&c(k),N.children){const B=N.children;for(let v=0;v<B.length;v++)i(B[v],k,y&&y.children[v])}y=y||k}return C?()=>{o(C)}:Xi}function o(p){if(ry(p)){const m=s.get(p);m&&(s.delete(p),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(p);m>-1&&(n.splice(m,1),p.record.name&&s.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function l(){return n}function c(p){const m=vE(p,n);n.splice(m,0,p),p.record.name&&!$f(p)&&s.set(p.record.name,p)}function u(p,m){let y,D={},N,M;if("name"in p&&p.name){if(y=s.get(p.name),!y)throw ni(ht.MATCHER_NOT_FOUND,{location:p});M=y.record.name,D=Be(Ff(m.params,y.keys.filter(C=>!C.optional).concat(y.parent?y.parent.keys.filter(C=>C.optional):[]).map(C=>C.name)),p.params&&Ff(p.params,y.keys.map(C=>C.name))),N=y.stringify(D)}else if(p.path!=null)N=p.path,y=n.find(C=>C.re.test(N)),y&&(D=y.parse(N),M=y.record.name);else{if(y=m.name?s.get(m.name):n.find(C=>C.re.test(m.path)),!y)throw ni(ht.MATCHER_NOT_FOUND,{location:p,currentLocation:m});M=y.record.name,D=Be({},m.params,p.params),N=y.stringify(D)}const H=[];let k=y;for(;k;)H.unshift(k.record),k=k.parent;return{name:M,path:N,params:D,matched:H,meta:_E(H)}}t.forEach(p=>i(p));function h(){n.length=0,s.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:l,getRecordMatcher:r}}function Ff(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function Uf(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:yE(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function yE(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function $f(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function _E(t){return t.reduce((e,n)=>Be(e,n.meta),{})}function vE(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;ay(t,e[i])<0?s=i:n=i+1}const r=wE(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function wE(t){let e=t;for(;e=e.parent;)if(ly(e)&&ay(t,e)===0)return e}function ly({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Bf(t){const e=vn(vl),n=vn(Ju),s=et(()=>{const c=ot(t.to);return e.resolve(c)}),r=et(()=>{const{matched:c}=s.value,{length:u}=c,h=c[u-1],p=n.matched;if(!h||!p.length)return-1;const m=p.findIndex(ti.bind(null,h));if(m>-1)return m;const y=jf(c[u-2]);return u>1&&jf(h)===y&&p[p.length-1].path!==y?p.findIndex(ti.bind(null,c[u-2])):m}),i=et(()=>r.value>-1&&xE(n.params,s.value.params)),o=et(()=>r.value>-1&&r.value===n.matched.length-1&&sy(n.params,s.value.params));function l(c={}){if(IE(c)){const u=e[ot(t.replace)?"replace":"push"](ot(t.to)).catch(Xi);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:et(()=>s.value.href),isActive:i,isExactActive:o,navigate:l}}function bE(t){return t.length===1?t[0]:t}const EE=_g({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Bf,setup(t,{slots:e}){const n=ul(Bf(t)),{options:s}=vn(vl),r=et(()=>({[Hf(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Hf(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&bE(e.default(n));return t.custom?i:Yu("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),TE=EE;function IE(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function xE(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!In(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function jf(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Hf=(t,e,n)=>t??e??n,AE=_g({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=vn(nu),r=et(()=>t.route||s.value),i=vn(Vf,0),o=et(()=>{let u=ot(i);const{matched:h}=r.value;let p;for(;(p=h[u])&&!p.components;)u++;return u}),l=et(()=>r.value.matched[o.value]);ca(Vf,et(()=>o.value+1)),ca(tE,l),ca(nu,r);const c=ie();return rs(()=>[c.value,l.value,t.name],([u,h,p],[m,y,D])=>{h&&(h.instances[p]=u,y&&y!==h&&u&&u===m&&(h.leaveGuards.size||(h.leaveGuards=y.leaveGuards),h.updateGuards.size||(h.updateGuards=y.updateGuards))),u&&h&&(!y||!ti(h,y)||!m)&&(h.enterCallbacks[p]||[]).forEach(N=>N(u))},{flush:"post"}),()=>{const u=r.value,h=t.name,p=l.value,m=p&&p.components[h];if(!m)return qf(n.default,{Component:m,route:u});const y=p.props[h],D=y?y===!0?u.params:typeof y=="function"?y(u):y:null,M=Yu(m,Be({},D,e,{onVnodeUnmounted:H=>{H.component.isUnmounted&&(p.instances[h]=null)},ref:c}));return qf(n.default,{Component:M,route:u})||M}}});function qf(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const RE=AE;function SE(t){const e=gE(t.routes,t),n=t.parseQuery||Z1,s=t.stringifyQuery||Nf,r=t.history,i=Li(),o=Li(),l=Li(),c=Aw(Is);let u=Is;Lr&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=bc.bind(null,z=>""+z),p=bc.bind(null,M1),m=bc.bind(null,fo);function y(z,ee){let ce,fe;return ry(z)?(ce=e.getRecordMatcher(z),fe=ee):fe=z,e.addRoute(fe,ce)}function D(z){const ee=e.getRecordMatcher(z);ee&&e.removeRoute(ee)}function N(){return e.getRoutes().map(z=>z.record)}function M(z){return!!e.getRecordMatcher(z)}function H(z,ee){if(ee=Be({},ee||c.value),typeof z=="string"){const V=Ec(n,z,ee.path),G=e.resolve({path:V.path},ee),K=r.createHref(V.fullPath);return Be(V,G,{params:m(G.params),hash:fo(V.hash),redirectedFrom:void 0,href:K})}let ce;if(z.path!=null)ce=Be({},z,{path:Ec(n,z.path,ee.path).path});else{const V=Be({},z.params);for(const G in V)V[G]==null&&delete V[G];ce=Be({},z,{params:p(V)}),ee.params=p(ee.params)}const fe=e.resolve(ce,ee),ye=z.hash||"";fe.params=h(m(fe.params));const T=U1(s,Be({},z,{hash:N1(ye),path:fe.path})),x=r.createHref(T);return Be({fullPath:T,hash:ye,query:s===Nf?eE(z.query):z.query||{}},fe,{redirectedFrom:void 0,href:x})}function k(z){return typeof z=="string"?Ec(n,z,c.value.path):Be({},z)}function C(z,ee){if(u!==z)return ni(ht.NAVIGATION_CANCELLED,{from:ee,to:z})}function P(z){return v(z)}function O(z){return P(Be(k(z),{replace:!0}))}function B(z,ee){const ce=z.matched[z.matched.length-1];if(ce&&ce.redirect){const{redirect:fe}=ce;let ye=typeof fe=="function"?fe(z,ee):fe;return typeof ye=="string"&&(ye=ye.includes("?")||ye.includes("#")?ye=k(ye):{path:ye},ye.params={}),Be({query:z.query,hash:z.hash,params:ye.path!=null?{}:z.params},ye)}}function v(z,ee){const ce=u=H(z),fe=c.value,ye=z.state,T=z.force,x=z.replace===!0,V=B(ce,fe);if(V)return v(Be(k(V),{state:typeof V=="object"?Be({},ye,V.state):ye,force:T,replace:x}),ee||ce);const G=ce;G.redirectedFrom=ee;let K;return!T&&$1(s,fe,ce)&&(K=ni(ht.NAVIGATION_DUPLICATED,{to:G,from:fe}),U(fe,fe,!0,!1)),(K?Promise.resolve(K):S(G,fe)).catch(W=>Qn(W)?Qn(W,ht.NAVIGATION_GUARD_REDIRECT)?W:J(W):I(W,G,fe)).then(W=>{if(W){if(Qn(W,ht.NAVIGATION_GUARD_REDIRECT))return v(Be({replace:x},k(W.to),{state:typeof W.to=="object"?Be({},ye,W.to.state):ye,force:T}),ee||G)}else W=A(G,fe,!0,x,ye);return R(G,fe,W),W})}function w(z,ee){const ce=C(z,ee);return ce?Promise.reject(ce):Promise.resolve()}function b(z){const ee=ke.values().next().value;return ee&&typeof ee.runWithContext=="function"?ee.runWithContext(z):z()}function S(z,ee){let ce;const[fe,ye,T]=nE(z,ee);ce=Ic(fe.reverse(),"beforeRouteLeave",z,ee);for(const V of fe)V.leaveGuards.forEach(G=>{ce.push(Cs(G,z,ee))});const x=w.bind(null,z,ee);return ce.push(x),it(ce).then(()=>{ce=[];for(const V of i.list())ce.push(Cs(V,z,ee));return ce.push(x),it(ce)}).then(()=>{ce=Ic(ye,"beforeRouteUpdate",z,ee);for(const V of ye)V.updateGuards.forEach(G=>{ce.push(Cs(G,z,ee))});return ce.push(x),it(ce)}).then(()=>{ce=[];for(const V of T)if(V.beforeEnter)if(In(V.beforeEnter))for(const G of V.beforeEnter)ce.push(Cs(G,z,ee));else ce.push(Cs(V.beforeEnter,z,ee));return ce.push(x),it(ce)}).then(()=>(z.matched.forEach(V=>V.enterCallbacks={}),ce=Ic(T,"beforeRouteEnter",z,ee,b),ce.push(x),it(ce))).then(()=>{ce=[];for(const V of o.list())ce.push(Cs(V,z,ee));return ce.push(x),it(ce)}).catch(V=>Qn(V,ht.NAVIGATION_CANCELLED)?V:Promise.reject(V))}function R(z,ee,ce){l.list().forEach(fe=>b(()=>fe(z,ee,ce)))}function A(z,ee,ce,fe,ye){const T=C(z,ee);if(T)return T;const x=ee===Is,V=Lr?history.state:{};ce&&(fe||x?r.replace(z.fullPath,Be({scroll:x&&V&&V.scroll},ye)):r.push(z.fullPath,ye)),c.value=z,U(z,ee,ce,x),J()}let E;function De(){E||(E=r.listen((z,ee,ce)=>{if(!wt.listening)return;const fe=H(z),ye=B(fe,wt.currentRoute.value);if(ye){v(Be(ye,{replace:!0,force:!0}),fe).catch(Xi);return}u=fe;const T=c.value;Lr&&K1(Df(T.fullPath,ce.delta),_l()),S(fe,T).catch(x=>Qn(x,ht.NAVIGATION_ABORTED|ht.NAVIGATION_CANCELLED)?x:Qn(x,ht.NAVIGATION_GUARD_REDIRECT)?(v(Be(k(x.to),{force:!0}),fe).then(V=>{Qn(V,ht.NAVIGATION_ABORTED|ht.NAVIGATION_DUPLICATED)&&!ce.delta&&ce.type===eu.pop&&r.go(-1,!1)}).catch(Xi),Promise.reject()):(ce.delta&&r.go(-ce.delta,!1),I(x,fe,T))).then(x=>{x=x||A(fe,T,!1),x&&(ce.delta&&!Qn(x,ht.NAVIGATION_CANCELLED)?r.go(-ce.delta,!1):ce.type===eu.pop&&Qn(x,ht.NAVIGATION_ABORTED|ht.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),R(fe,T,x)}).catch(Xi)}))}let Se=Li(),Le=Li(),te;function I(z,ee,ce){J(z);const fe=Le.list();return fe.length?fe.forEach(ye=>ye(z,ee,ce)):console.error(z),Promise.reject(z)}function q(){return te&&c.value!==Is?Promise.resolve():new Promise((z,ee)=>{Se.add([z,ee])})}function J(z){return te||(te=!z,De(),Se.list().forEach(([ee,ce])=>z?ce(z):ee()),Se.reset()),z}function U(z,ee,ce,fe){const{scrollBehavior:ye}=t;if(!Lr||!ye)return Promise.resolve();const T=!ce&&Q1(Df(z.fullPath,0))||(fe||!ce)&&history.state&&history.state.scroll||null;return hl().then(()=>ye(z,ee,T)).then(x=>x&&W1(x)).catch(x=>I(x,z,ee))}const me=z=>r.go(z);let ze;const ke=new Set,wt={currentRoute:c,listening:!0,addRoute:y,removeRoute:D,clearRoutes:e.clearRoutes,hasRoute:M,getRoutes:N,resolve:H,options:t,push:P,replace:O,go:me,back:()=>me(-1),forward:()=>me(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:Le.add,isReady:q,install(z){z.component("RouterLink",TE),z.component("RouterView",RE),z.config.globalProperties.$router=wt,Object.defineProperty(z.config.globalProperties,"$route",{enumerable:!0,get:()=>ot(c)}),Lr&&!ze&&c.value===Is&&(ze=!0,P(r.location).catch(fe=>{}));const ee={};for(const fe in Is)Object.defineProperty(ee,fe,{get:()=>c.value[fe],enumerable:!0});z.provide(vl,wt),z.provide(Ju,rg(ee)),z.provide(nu,c);const ce=z.unmount;ke.add(z),z.unmount=function(){ke.delete(z),ke.size<1&&(u=Is,E&&E(),E=null,c.value=Is,ze=!1,te=!1),ce()}}};function it(z){return z.reduce((ee,ce)=>ee.then(()=>b(ce)),Promise.resolve())}return wt}function Ro(){return vn(vl)}function Zu(t){return vn(Ju)}const zf="/HTF/assets/Logo_yellow-C2dq30_U.png",CE=()=>{};var Gf={};const cy=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},kE=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],l=t[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},uy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,l=o?t[r+1]:0,c=r+2<t.length,u=c?t[r+2]:0,h=i>>2,p=(i&3)<<4|l>>4;let m=(l&15)<<2|u>>6,y=u&63;c||(y=64,o||(m=64)),s.push(n[h],n[p],n[m],n[y])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cy(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):kE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const p=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||l==null||u==null||p==null)throw new PE;const m=i<<2|l>>4;if(s.push(m),u!==64){const y=l<<4&240|u>>2;if(s.push(y),p!==64){const D=u<<6&192|p;s.push(D)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class PE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DE=function(t){const e=cy(t);return uy.encodeByteArray(e,!0)},Da=function(t){return DE(t).replace(/\./g,"")},dy=function(t){try{return uy.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function NE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const VE=()=>NE().__FIREBASE_DEFAULTS__,OE=()=>{if(typeof process>"u"||typeof Gf>"u")return;const t=Gf.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ME=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&dy(t[1]);return e&&JSON.parse(e)},wl=()=>{try{return CE()||VE()||OE()||ME()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hy=t=>wl()?.emulatorHosts?.[t],fy=t=>{const e=hy(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},py=()=>wl()?.config,my=t=>wl()?.[`_${t}`];class LE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Ir(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ed(t){return(await fetch(t,{credentials:"include"})).ok}function gy(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Da(JSON.stringify(n)),Da(JSON.stringify(o)),""].join(".")}const Ji={};function FE(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ji))Ji[e]?t.emulator.push(e):t.prod.push(e);return t}function UE(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Wf=!1;function td(t,e){if(typeof window>"u"||typeof document>"u"||!Ir(window.location.host)||Ji[t]===e||Ji[t]||Wf)return;Ji[t]=e;function n(m){return`__firebase__banner__${m}`}const s="__firebase__banner",i=FE().prod.length>0;function o(){const m=document.getElementById(s);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Wf=!0,o()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=UE(s),y=n("text"),D=document.getElementById(y)||document.createElement("span"),N=n("learnmore"),M=document.getElementById(N)||document.createElement("a"),H=n("preprendIcon"),k=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const C=m.element;l(C),h(M,N);const P=u();c(k,H),C.append(k,D,M,P),document.body.appendChild(C)}i?(D.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $E(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function BE(){const t=wl()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yy(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function HE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qE(){const t=Ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function zE(){return!BE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _y(){try{return typeof indexedDB=="object"}catch{return!1}}function vy(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}function GE(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const WE="FirebaseError";class mn extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=WE,Object.setPrototypeOf(this,mn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xr.prototype.create)}}class xr{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?KE(i,s):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new mn(r,l,s)}}function KE(t,e){return t.replace(QE,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const QE=/\{\$([^}]+)}/g;function YE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $s(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(Kf(i)&&Kf(o)){if(!$s(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Kf(t){return t!==null&&typeof t=="object"}function So(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function XE(t,e){const n=new JE(t,e);return n.subscribe.bind(n)}class JE{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");ZE(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=xc),r.error===void 0&&(r.error=xc),r.complete===void 0&&(r.complete=xc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ZE(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function xc(){}const eT=1e3,tT=2,nT=4*60*60*1e3,sT=.5;function Qf(t,e=eT,n=tT){const s=e*Math.pow(n,t),r=Math.round(sT*s*(Math.random()-.5)*2);return Math.min(nT,s+r)}function gt(t){return t&&t._delegate?t._delegate:t}class fn{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ar="[DEFAULT]";class rT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new LE;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oT(e))try{this.getOrInitializeService({instanceIdentifier:ar})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=ar){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ar){return this.instances.has(e)}getOptions(e=ar){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:iT(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ar){return this.component?this.component.multipleInstances?e:ar:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iT(t){return t===ar?void 0:t}function oT(t){return t.instantiationMode==="EAGER"}class aT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new rT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ne||(Ne={}));const lT={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},cT=Ne.INFO,uT={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},dT=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=uT[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bl{constructor(e){this.name=e,this._logLevel=cT,this._logHandler=dT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const hT=(t,e)=>e.some(n=>t instanceof n);let Yf,Xf;function fT(){return Yf||(Yf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pT(){return Xf||(Xf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wy=new WeakMap,su=new WeakMap,by=new WeakMap,Ac=new WeakMap,nd=new WeakMap;function mT(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Os(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&wy.set(n,t)}).catch(()=>{}),nd.set(e,t),e}function gT(t){if(su.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});su.set(t,e)}let ru={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return su.get(t);if(e==="objectStoreNames")return t.objectStoreNames||by.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Os(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function yT(t){ru=t(ru)}function _T(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Rc(this),e,...n);return by.set(s,e.sort?e.sort():[e]),Os(s)}:pT().includes(t)?function(...e){return t.apply(Rc(this),e),Os(wy.get(this))}:function(...e){return Os(t.apply(Rc(this),e))}}function vT(t){return typeof t=="function"?_T(t):(t instanceof IDBTransaction&&gT(t),hT(t,fT())?new Proxy(t,ru):t)}function Os(t){if(t instanceof IDBRequest)return mT(t);if(Ac.has(t))return Ac.get(t);const e=vT(t);return e!==t&&(Ac.set(t,e),nd.set(e,t)),e}const Rc=t=>nd.get(t);function Ey(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),l=Os(o);return s&&o.addEventListener("upgradeneeded",c=>{s(Os(o.result),c.oldVersion,c.newVersion,Os(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const wT=["get","getKey","getAll","getAllKeys","count"],bT=["put","add","delete","clear"],Sc=new Map;function Jf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Sc.get(e))return Sc.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=bT.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||wT.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,r?"readwrite":"readonly");let u=c.store;return s&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),r&&c.done]))[0]};return Sc.set(e,i),i}yT(t=>({...t,get:(e,n,s)=>Jf(e,n)||t.get(e,n,s),has:(e,n)=>!!Jf(e,n)||t.has(e,n)}));class ET{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(TT(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function TT(t){return t.getComponent()?.type==="VERSION"}const iu="@firebase/app",Zf="0.14.6";const us=new bl("@firebase/app"),IT="@firebase/app-compat",xT="@firebase/analytics-compat",AT="@firebase/analytics",RT="@firebase/app-check-compat",ST="@firebase/app-check",CT="@firebase/auth",kT="@firebase/auth-compat",PT="@firebase/database",DT="@firebase/data-connect",NT="@firebase/database-compat",VT="@firebase/functions",OT="@firebase/functions-compat",MT="@firebase/installations",LT="@firebase/installations-compat",FT="@firebase/messaging",UT="@firebase/messaging-compat",$T="@firebase/performance",BT="@firebase/performance-compat",jT="@firebase/remote-config",HT="@firebase/remote-config-compat",qT="@firebase/storage",zT="@firebase/storage-compat",GT="@firebase/firestore",WT="@firebase/ai",KT="@firebase/firestore-compat",QT="firebase",YT="12.6.0";const ou="[DEFAULT]",XT={[iu]:"fire-core",[IT]:"fire-core-compat",[AT]:"fire-analytics",[xT]:"fire-analytics-compat",[ST]:"fire-app-check",[RT]:"fire-app-check-compat",[CT]:"fire-auth",[kT]:"fire-auth-compat",[PT]:"fire-rtdb",[DT]:"fire-data-connect",[NT]:"fire-rtdb-compat",[VT]:"fire-fn",[OT]:"fire-fn-compat",[MT]:"fire-iid",[LT]:"fire-iid-compat",[FT]:"fire-fcm",[UT]:"fire-fcm-compat",[$T]:"fire-perf",[BT]:"fire-perf-compat",[jT]:"fire-rc",[HT]:"fire-rc-compat",[qT]:"fire-gcs",[zT]:"fire-gcs-compat",[GT]:"fire-fst",[KT]:"fire-fst-compat",[WT]:"fire-vertex","fire-js":"fire-js",[QT]:"fire-js-all"};const Na=new Map,JT=new Map,au=new Map;function ep(t,e){try{t.container.addComponent(e)}catch(n){us.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xn(t){const e=t.name;if(au.has(e))return us.debug(`There were multiple attempts to register component ${e}.`),!1;au.set(e,t);for(const n of Na.values())ep(n,t);for(const n of JT.values())ep(n,t);return!0}function Ws(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function an(t){return t==null?!1:t.settings!==void 0}const ZT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ms=new xr("app","Firebase",ZT);class eI{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new fn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ms.create("app-deleted",{appName:this._name})}}const Ar=YT;function Ty(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:ou,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Ms.create("bad-app-name",{appName:String(r)});if(n||(n=py()),!n)throw Ms.create("no-options");const i=Na.get(r);if(i){if($s(n,i.options)&&$s(s,i.config))return i;throw Ms.create("duplicate-app",{appName:r})}const o=new aT(r);for(const c of au.values())o.addComponent(c);const l=new eI(n,s,o);return Na.set(r,l),l}function El(t=ou){const e=Na.get(t);if(!e&&t===ou&&py())return Ty();if(!e)throw Ms.create("no-app",{appName:t});return e}function Xt(t,e,n){let s=XT[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),us.warn(o.join(" "));return}xn(new fn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const tI="firebase-heartbeat-database",nI=1,po="firebase-heartbeat-store";let Cc=null;function Iy(){return Cc||(Cc=Ey(tI,nI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(po)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ms.create("idb-open",{originalErrorMessage:t.message})})),Cc}async function sI(t){try{const n=(await Iy()).transaction(po),s=await n.objectStore(po).get(xy(t));return await n.done,s}catch(e){if(e instanceof mn)us.warn(e.message);else{const n=Ms.create("idb-get",{originalErrorMessage:e?.message});us.warn(n.message)}}}async function tp(t,e){try{const s=(await Iy()).transaction(po,"readwrite");await s.objectStore(po).put(e,xy(t)),await s.done}catch(n){if(n instanceof mn)us.warn(n.message);else{const s=Ms.create("idb-set",{originalErrorMessage:n?.message});us.warn(s.message)}}}function xy(t){return`${t.name}!${t.options.appId}`}const rI=1024,iI=30;class oI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new lI(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=np();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>iI){const r=cI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){us.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=np(),{heartbeatsToSend:n,unsentEntries:s}=aI(this._heartbeatsCache.heartbeats),r=Da(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return us.warn(e),""}}}function np(){return new Date().toISOString().substring(0,10)}function aI(t,e=rI){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),sp(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),sp(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class lI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _y()?vy().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await sI(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return tp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return tp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function sp(t){return Da(JSON.stringify({version:2,heartbeats:t})).length}function cI(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}function uI(t){xn(new fn("platform-logger",e=>new ET(e),"PRIVATE")),xn(new fn("heartbeat",e=>new oI(e),"PRIVATE")),Xt(iu,Zf,t),Xt(iu,Zf,"esm2020"),Xt("fire-js","")}uI("");var dI="firebase",hI="12.6.0";Xt(dI,hI,"app");const Ay="@firebase/installations",sd="0.6.19";const Ry=1e4,Sy=`w:${sd}`,Cy="FIS_v2",fI="https://firebaseinstallations.googleapis.com/v1",pI=60*60*1e3,mI="installations",gI="Installations";const yI={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},_r=new xr(mI,gI,yI);function ky(t){return t instanceof mn&&t.code.includes("request-failed")}function Py({projectId:t}){return`${fI}/projects/${t}/installations`}function Dy(t){return{token:t.token,requestStatus:2,expiresIn:vI(t.expiresIn),creationTime:Date.now()}}async function Ny(t,e){const s=(await e.json()).error;return _r.create("request-failed",{requestName:t,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function Vy({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function _I(t,{refreshToken:e}){const n=Vy(t);return n.append("Authorization",wI(e)),n}async function Oy(t){const e=await t();return e.status>=500&&e.status<600?t():e}function vI(t){return Number(t.replace("s","000"))}function wI(t){return`${Cy} ${t}`}async function bI({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const s=Py(t),r=Vy(t),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={fid:n,authVersion:Cy,appId:t.appId,sdkVersion:Sy},l={method:"POST",headers:r,body:JSON.stringify(o)},c=await Oy(()=>fetch(s,l));if(c.ok){const u=await c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:Dy(u.authToken)}}else throw await Ny("Create Installation",c)}function My(t){return new Promise(e=>{setTimeout(e,t)})}function EI(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}const TI=/^[cdef][\w-]{21}$/,lu="";function II(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=xI(t);return TI.test(n)?n:lu}catch{return lu}}function xI(t){return EI(t).substr(0,22)}function Tl(t){return`${t.appName}!${t.appId}`}const Ly=new Map;function Fy(t,e){const n=Tl(t);Uy(n,e),AI(n,e)}function Uy(t,e){const n=Ly.get(t);if(n)for(const s of n)s(e)}function AI(t,e){const n=RI();n&&n.postMessage({key:t,fid:e}),SI()}let dr=null;function RI(){return!dr&&"BroadcastChannel"in self&&(dr=new BroadcastChannel("[Firebase] FID Change"),dr.onmessage=t=>{Uy(t.data.key,t.data.fid)}),dr}function SI(){Ly.size===0&&dr&&(dr.close(),dr=null)}const CI="firebase-installations-database",kI=1,vr="firebase-installations-store";let kc=null;function rd(){return kc||(kc=Ey(CI,kI,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(vr)}}})),kc}async function Va(t,e){const n=Tl(t),r=(await rd()).transaction(vr,"readwrite"),i=r.objectStore(vr),o=await i.get(n);return await i.put(e,n),await r.done,(!o||o.fid!==e.fid)&&Fy(t,e.fid),e}async function $y(t){const e=Tl(t),s=(await rd()).transaction(vr,"readwrite");await s.objectStore(vr).delete(e),await s.done}async function Il(t,e){const n=Tl(t),r=(await rd()).transaction(vr,"readwrite"),i=r.objectStore(vr),o=await i.get(n),l=e(o);return l===void 0?await i.delete(n):await i.put(l,n),await r.done,l&&(!o||o.fid!==l.fid)&&Fy(t,l.fid),l}async function id(t){let e;const n=await Il(t.appConfig,s=>{const r=PI(s),i=DI(t,r);return e=i.registrationPromise,i.installationEntry});return n.fid===lu?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function PI(t){const e=t||{fid:II(),registrationStatus:0};return By(e)}function DI(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(_r.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=NI(t,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:VI(t)}:{installationEntry:e}}async function NI(t,e){try{const n=await bI(t,e);return Va(t.appConfig,n)}catch(n){throw ky(n)&&n.customData.serverCode===409?await $y(t.appConfig):await Va(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function VI(t){let e=await rp(t.appConfig);for(;e.registrationStatus===1;)await My(100),e=await rp(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await id(t);return s||n}return e}function rp(t){return Il(t,e=>{if(!e)throw _r.create("installation-not-found");return By(e)})}function By(t){return OI(t)?{fid:t.fid,registrationStatus:0}:t}function OI(t){return t.registrationStatus===1&&t.registrationTime+Ry<Date.now()}async function MI({appConfig:t,heartbeatServiceProvider:e},n){const s=LI(t,n),r=_I(t,n),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={installation:{sdkVersion:Sy,appId:t.appId}},l={method:"POST",headers:r,body:JSON.stringify(o)},c=await Oy(()=>fetch(s,l));if(c.ok){const u=await c.json();return Dy(u)}else throw await Ny("Generate Auth Token",c)}function LI(t,{fid:e}){return`${Py(t)}/${e}/authTokens:generate`}async function od(t,e=!1){let n;const s=await Il(t.appConfig,i=>{if(!jy(i))throw _r.create("not-registered");const o=i.authToken;if(!e&&$I(o))return i;if(o.requestStatus===1)return n=FI(t,e),i;{if(!navigator.onLine)throw _r.create("app-offline");const l=jI(i);return n=UI(t,l),l}});return n?await n:s.authToken}async function FI(t,e){let n=await ip(t.appConfig);for(;n.authToken.requestStatus===1;)await My(100),n=await ip(t.appConfig);const s=n.authToken;return s.requestStatus===0?od(t,e):s}function ip(t){return Il(t,e=>{if(!jy(e))throw _r.create("not-registered");const n=e.authToken;return HI(n)?{...e,authToken:{requestStatus:0}}:e})}async function UI(t,e){try{const n=await MI(t,e),s={...e,authToken:n};return await Va(t.appConfig,s),n}catch(n){if(ky(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await $y(t.appConfig);else{const s={...e,authToken:{requestStatus:0}};await Va(t.appConfig,s)}throw n}}function jy(t){return t!==void 0&&t.registrationStatus===2}function $I(t){return t.requestStatus===2&&!BI(t)}function BI(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+pI}function jI(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function HI(t){return t.requestStatus===1&&t.requestTime+Ry<Date.now()}async function qI(t){const e=t,{installationEntry:n,registrationPromise:s}=await id(e);return s?s.catch(console.error):od(e).catch(console.error),n.fid}async function zI(t,e=!1){const n=t;return await GI(n),(await od(n,e)).token}async function GI(t){const{registrationPromise:e}=await id(t);e&&await e}function WI(t){if(!t||!t.options)throw Pc("App Configuration");if(!t.name)throw Pc("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Pc(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Pc(t){return _r.create("missing-app-config-values",{valueName:t})}const Hy="installations",KI="installations-internal",QI=t=>{const e=t.getProvider("app").getImmediate(),n=WI(e),s=Ws(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},YI=t=>{const e=t.getProvider("app").getImmediate(),n=Ws(e,Hy).getImmediate();return{getId:()=>qI(n),getToken:r=>zI(n,r)}};function XI(){xn(new fn(Hy,QI,"PUBLIC")),xn(new fn(KI,YI,"PRIVATE"))}XI();Xt(Ay,sd);Xt(Ay,sd,"esm2020");const Oa="analytics",JI="firebase_id",ZI="origin",ex=60*1e3,tx="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ad="https://www.googletagmanager.com/gtag/js";const Gt=new bl("@firebase/analytics");const nx={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},rn=new xr("analytics","Analytics",nx);function sx(t){if(!t.startsWith(ad)){const e=rn.create("invalid-gtag-resource",{gtagURL:t});return Gt.warn(e.message),""}return t}function qy(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function rx(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function ix(t,e){const n=rx("firebase-js-sdk-policy",{createScriptURL:sx}),s=document.createElement("script"),r=`${ad}?l=${t}&id=${e}`;s.src=n?n?.createScriptURL(r):r,s.async=!0,document.head.appendChild(s)}function ox(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function ax(t,e,n,s,r,i){const o=s[r];try{if(o)await e[o];else{const c=(await qy(n)).find(u=>u.measurementId===r);c&&await e[c.appId]}}catch(l){Gt.error(l)}t("config",r,i)}async function lx(t,e,n,s,r){try{let i=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const l=await qy(n);for(const c of o){const u=l.find(p=>p.measurementId===c),h=u&&e[u.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",s,r||{})}catch(i){Gt.error(i)}}function cx(t,e,n,s){async function r(i,...o){try{if(i==="event"){const[l,c]=o;await lx(t,e,n,l,c)}else if(i==="config"){const[l,c]=o;await ax(t,e,n,s,l,c)}else if(i==="consent"){const[l,c]=o;t("consent",l,c)}else if(i==="get"){const[l,c,u]=o;t("get",l,c,u)}else if(i==="set"){const[l]=o;t("set",l)}else t(i,...o)}catch(l){Gt.error(l)}}return r}function ux(t,e,n,s,r){let i=function(...o){window[s].push(arguments)};return window[r]&&typeof window[r]=="function"&&(i=window[r]),window[r]=cx(i,t,e,n),{gtagCore:i,wrappedGtag:window[r]}}function dx(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(ad)&&n.src.includes(t))return n;return null}const hx=30,fx=1e3;class px{constructor(e={},n=fx){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const zy=new px;function mx(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function gx(t){const{appId:e,apiKey:n}=t,s={method:"GET",headers:mx(n)},r=tx.replace("{app-id}",e),i=await fetch(r,s);if(i.status!==200&&i.status!==304){let o="";try{const l=await i.json();l.error?.message&&(o=l.error.message)}catch{}throw rn.create("config-fetch-failed",{httpStatus:i.status,responseMessage:o})}return i.json()}async function yx(t,e=zy,n){const{appId:s,apiKey:r,measurementId:i}=t.options;if(!s)throw rn.create("no-app-id");if(!r){if(i)return{measurementId:i,appId:s};throw rn.create("no-api-key")}const o=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new wx;return setTimeout(async()=>{l.abort()},ex),Gy({appId:s,apiKey:r,measurementId:i},o,l,e)}async function Gy(t,{throttleEndTimeMillis:e,backoffCount:n},s,r=zy){const{appId:i,measurementId:o}=t;try{await _x(s,e)}catch(l){if(o)return Gt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:i,measurementId:o};throw l}try{const l=await gx(t);return r.deleteThrottleMetadata(i),l}catch(l){const c=l;if(!vx(c)){if(r.deleteThrottleMetadata(i),o)return Gt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:i,measurementId:o};throw l}const u=Number(c?.customData?.httpStatus)===503?Qf(n,r.intervalMillis,hx):Qf(n,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return r.setThrottleMetadata(i,h),Gt.debug(`Calling attemptFetch again in ${u} millis`),Gy(t,h,s,r)}}function _x(t,e){return new Promise((n,s)=>{const r=Math.max(e-Date.now(),0),i=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(i),s(rn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function vx(t){if(!(t instanceof mn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class wx{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function bx(t,e,n,s,r){if(r&&r.global){t("event",n,s);return}else{const i=await e,o={...s,send_to:i};t("event",n,o)}}async function Ex(t,e,n,s){if(s&&s.global){const r={};for(const i of Object.keys(n))r[`user_properties.${i}`]=n[i];return t("set",r),Promise.resolve()}else{const r=await e;t("config",r,{update:!0,user_properties:n})}}async function Tx(){if(_y())try{await vy()}catch(t){return Gt.warn(rn.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return Gt.warn(rn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Ix(t,e,n,s,r,i,o){const l=yx(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Gt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Gt.error(m)),e.push(l);const c=Tx().then(m=>{if(m)return s.getId()}),[u,h]=await Promise.all([l,c]);dx(i)||ix(i,u.measurementId),r("js",new Date);const p=o?.config??{};return p[ZI]="firebase",p.update=!0,h!=null&&(p[JI]=h),r("config",u.measurementId,p),u.measurementId}class xx{constructor(e){this.app=e}_delete(){return delete Kr[this.app.options.appId],Promise.resolve()}}let Kr={},op=[];const ap={};let Dc="dataLayer",Ax="gtag",lp,ld,cp=!1;function Rx(){const t=[];if(yy()&&t.push("This is a browser extension environment."),GE()||t.push("Cookies are not available."),t.length>0){const e=t.map((s,r)=>`(${r+1}) ${s}`).join(" "),n=rn.create("invalid-analytics-context",{errorInfo:e});Gt.warn(n.message)}}function Sx(t,e,n){Rx();const s=t.options.appId;if(!s)throw rn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Gt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw rn.create("no-api-key");if(Kr[s]!=null)throw rn.create("already-exists",{id:s});if(!cp){ox(Dc);const{wrappedGtag:i,gtagCore:o}=ux(Kr,op,ap,Dc,Ax);ld=i,lp=o,cp=!0}return Kr[s]=Ix(t,op,ap,e,lp,Dc,n),new xx(t)}function Cx(t=El()){t=gt(t);const e=Ws(t,Oa);return e.isInitialized()?e.getImmediate():kx(t)}function kx(t,e={}){const n=Ws(t,Oa);if(n.isInitialized()){const r=n.getImmediate();if($s(e,n.getOptions()))return r;throw rn.create("already-initialized")}return n.initialize({options:e})}function Px(t,e,n){t=gt(t),Ex(ld,Kr[t.app.options.appId],e,n).catch(s=>Gt.error(s))}function Dx(t,e,n,s){t=gt(t),bx(ld,Kr[t.app.options.appId],e,n,s).catch(r=>Gt.error(r))}const up="@firebase/analytics",dp="0.10.19";function Nx(){xn(new fn(Oa,(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return Sx(s,r,n)},"PUBLIC")),xn(new fn("analytics-internal",t,"PRIVATE")),Xt(up,dp),Xt(up,dp,"esm2020");function t(e){try{const n=e.getProvider(Oa).getImmediate();return{logEvent:(s,r,i)=>Dx(n,s,r,i),setUserProperties:(s,r)=>Px(n,s,r)}}catch(n){throw rn.create("interop-component-reg-failed",{reason:n})}}}Nx();function Wy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Vx=Wy,Ky=new xr("auth","Firebase",Wy());const Ma=new bl("@firebase/auth");function Ox(t,...e){Ma.logLevel<=Ne.WARN&&Ma.warn(`Auth (${Ar}): ${t}`,...e)}function fa(t,...e){Ma.logLevel<=Ne.ERROR&&Ma.error(`Auth (${Ar}): ${t}`,...e)}function Bn(t,...e){throw ud(t,...e)}function wn(t,...e){return ud(t,...e)}function cd(t,e,n){const s={...Vx(),[e]:n};return new xr("auth","Firebase",s).create(e,{appName:t.name})}function gr(t){return cd(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mx(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Bn(t,"argument-error"),cd(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ud(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return Ky.create(t,...e)}function Ee(t,e,...n){if(!t)throw ud(e,...n)}function ns(t){const e="INTERNAL ASSERTION FAILED: "+t;throw fa(e),new Error(e)}function ds(t,e){t||ns(e)}function cu(){return typeof self<"u"&&self.location?.href||""}function Lx(){return hp()==="http:"||hp()==="https:"}function hp(){return typeof self<"u"&&self.location?.protocol||null}function Fx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Lx()||yy()||"connection"in navigator)?navigator.onLine:!0}function Ux(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Co{constructor(e,n){this.shortDelay=e,this.longDelay=n,ds(n>e,"Short delay should be less than long delay!"),this.isMobile=$E()||HE()}get(){return Fx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function dd(t,e){ds(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Qy{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ns("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ns("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ns("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const $x={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Bx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],jx=new Co(3e4,6e4);function hd(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function di(t,e,n,s,r={}){return Yy(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const l=So({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return jE()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Ir(t.emulatorConfig.host)&&(u.credentials="include"),Qy.fetch()(await Xy(t,t.config.apiHost,n,l),u)})}async function Yy(t,e,n){t._canInitEmulator=!1;const s={...$x,...e};try{const r=new qx(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ta(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ta(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw ta(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw ta(t,"user-disabled",o);const h=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw cd(t,h,u);Bn(t,h)}}catch(r){if(r instanceof mn)throw r;Bn(t,"network-request-failed",{message:String(r)})}}async function Hx(t,e,n,s,r={}){const i=await di(t,e,n,s,r);return"mfaPendingCredential"in i&&Bn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Xy(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?dd(t.config,r):`${t.config.apiScheme}://${r}`;return Bx.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class qx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(wn(this.auth,"network-request-failed")),jx.get())})}}function ta(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=wn(t,e,s);return r.customData._tokenResponse=n,r}async function zx(t,e){return di(t,"POST","/v1/accounts:delete",e)}async function La(t,e){return di(t,"POST","/v1/accounts:lookup",e)}function Zi(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Gx(t,e=!1){const n=gt(t),s=await n.getIdToken(e),r=fd(s);Ee(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:Zi(Nc(r.auth_time)),issuedAtTime:Zi(Nc(r.iat)),expirationTime:Zi(Nc(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function Nc(t){return Number(t)*1e3}function fd(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return fa("JWT malformed, contained fewer than 3 sections"),null;try{const r=dy(n);return r?JSON.parse(r):(fa("Failed to decode base64 JWT payload"),null)}catch(r){return fa("Caught error parsing JWT payload as JSON",r?.toString()),null}}function fp(t){const e=fd(t);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function mo(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof mn&&Wx(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function Wx({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class Kx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class uu{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zi(this.lastLoginAt),this.creationTime=Zi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Fa(t){const e=t.auth,n=await t.getIdToken(),s=await mo(t,La(e,{idToken:n}));Ee(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?Jy(r.providerUserInfo):[],o=Yx(t.providerData,i),l=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!o?.length,u=l?c:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new uu(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function Qx(t){const e=gt(t);await Fa(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Yx(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function Jy(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function Xx(t,e){const n=await Yy(t,{},async()=>{const s=So({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await Xy(t,r,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:s};return t.emulatorConfig&&Ir(t.emulatorConfig.host)&&(c.credentials="include"),Qy.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Jx(t,e){return di(t,"POST","/v2/accounts:revokeToken",hd(t,e))}class Qr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const n=fp(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await Xx(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new Qr;return s&&(Ee(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(Ee(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(Ee(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qr,this.toJSON())}_performRefresh(){return ns("not implemented")}}function xs(t,e){Ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class gn{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new Kx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new uu(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await mo(this,this.stsTokenManager.getToken(this.auth,e));return Ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Gx(this,e)}reload(){return Qx(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new gn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Fa(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(an(this.auth.app))return Promise.reject(gr(this.auth));const e=await this.getIdToken();return await mo(this,zx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:y,providerData:D,stsTokenManager:N}=n;Ee(p&&N,e,"internal-error");const M=Qr.fromJSON(this.name,N);Ee(typeof p=="string",e,"internal-error"),xs(s,e.name),xs(r,e.name),Ee(typeof m=="boolean",e,"internal-error"),Ee(typeof y=="boolean",e,"internal-error"),xs(i,e.name),xs(o,e.name),xs(l,e.name),xs(c,e.name),xs(u,e.name),xs(h,e.name);const H=new gn({uid:p,auth:e,email:r,emailVerified:m,displayName:s,isAnonymous:y,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:M,createdAt:u,lastLoginAt:h});return D&&Array.isArray(D)&&(H.providerData=D.map(k=>({...k}))),c&&(H._redirectEventId=c),H}static async _fromIdTokenResponse(e,n,s=!1){const r=new Qr;r.updateFromServerResponse(n);const i=new gn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await Fa(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];Ee(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?Jy(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,l=new Qr;l.updateFromIdToken(s);const c=new gn({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new uu(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(c,u),c}}const pp=new Map;function ss(t){ds(t instanceof Function,"Expected a class definition");let e=pp.get(t);return e?(ds(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,pp.set(t,e),e)}class Zy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Zy.type="NONE";const mp=Zy;function pa(t,e,n){return`firebase:${t}:${e}:${n}`}class Yr{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=pa(this.userKey,r.apiKey,i),this.fullPersistenceKey=pa("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await La(this.auth,{idToken:e}).catch(()=>{});return n?gn._fromGetAccountInfoResponse(this.auth,n,e):null}return gn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Yr(ss(mp),e,s);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||ss(mp);const o=pa(s,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(o);if(h){let p;if(typeof h=="string"){const m=await La(e,{idToken:h}).catch(()=>{});if(!m)break;p=await gn._fromGetAccountInfoResponse(e,m,h)}else p=gn._fromJSON(e,h);u!==i&&(l=p),i=u;break}}catch{}const c=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Yr(i,e,s):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Yr(i,e,s))}}function gp(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(s0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(e0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(i0(e))return"Blackberry";if(o0(e))return"Webos";if(t0(e))return"Safari";if((e.includes("chrome/")||n0(e))&&!e.includes("edge/"))return"Chrome";if(r0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function e0(t=Ut()){return/firefox\//i.test(t)}function t0(t=Ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function n0(t=Ut()){return/crios\//i.test(t)}function s0(t=Ut()){return/iemobile/i.test(t)}function r0(t=Ut()){return/android/i.test(t)}function i0(t=Ut()){return/blackberry/i.test(t)}function o0(t=Ut()){return/webos/i.test(t)}function pd(t=Ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Zx(t=Ut()){return pd(t)&&!!window.navigator?.standalone}function eA(){return qE()&&document.documentMode===10}function a0(t=Ut()){return pd(t)||r0(t)||o0(t)||i0(t)||/windows phone/i.test(t)||s0(t)}function l0(t,e=[]){let n;switch(t){case"Browser":n=gp(Ut());break;case"Worker":n=`${gp(Ut())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ar}/${s}`}class tA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function nA(t,e={}){return di(t,"GET","/v2/passwordPolicy",hd(t,e))}const sA=6;class rA{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??sA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class iA{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yp(this),this.idTokenSubscription=new yp(this),this.beforeStateQueue=new tA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ky,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ss(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Yr.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await La(this,{idToken:e}),s=await gn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(an(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&l?.user&&(s=l.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fa(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ux()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(an(this.app))return Promise.reject(gr(this));const n=e?gt(e):null;return n&&Ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return an(this.app)?Promise.reject(gr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return an(this.app)?Promise.reject(gr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ss(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nA(this),n=new rA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xr("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Jx(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ss(e)||this._popupRedirectResolver;Ee(n,this,"argument-error"),this.redirectPersistenceManager=await Yr.create(this,[ss(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,r);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=l0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(an(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Ox(`Error while retrieving App Check token: ${e.error}`),e?.token}}function xl(t){return gt(t)}class yp{constructor(e){this.auth=e,this.observer=null,this.addObserver=XE(n=>this.observer=n)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let md={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oA(t){md=t}function aA(t){return md.loadJS(t)}function lA(){return md.gapiScript}function cA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function uA(t,e){const n=Ws(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if($s(i,e??{}))return r;Bn(r,"already-initialized")}return n.initialize({options:e})}function dA(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(ss);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function hA(t,e,n){const s=xl(t);Ee(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=c0(e),{host:o,port:l}=fA(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){Ee(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ee($s(u,s.config.emulator)&&$s(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,Ir(o)?(ed(`${i}//${o}${c}`),td("Auth",!0)):pA()}function c0(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function fA(t){const e=c0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:_p(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:_p(o)}}}function _p(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function pA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class u0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ns("not implemented")}_getIdTokenResponse(e){return ns("not implemented")}_linkToIdToken(e,n){return ns("not implemented")}_getReauthenticationResolver(e){return ns("not implemented")}}async function Xr(t,e){return Hx(t,"POST","/v1/accounts:signInWithIdp",hd(t,e))}const mA="http://localhost";class wr extends u0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new wr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new wr(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Xr(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Xr(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xr(e,n)}buildRequest(){const e={requestUri:mA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=So(n)}return e}}class gd{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ko extends gd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ks extends ko{constructor(){super("facebook.com")}static credential(e){return wr._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ks.credential(e.oauthAccessToken)}catch{return null}}}ks.FACEBOOK_SIGN_IN_METHOD="facebook.com";ks.PROVIDER_ID="facebook.com";class ts extends ko{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return wr._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return ts.credential(n,s)}catch{return null}}}ts.GOOGLE_SIGN_IN_METHOD="google.com";ts.PROVIDER_ID="google.com";class Ps extends ko{constructor(){super("github.com")}static credential(e){return wr._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ps.credential(e.oauthAccessToken)}catch{return null}}}Ps.GITHUB_SIGN_IN_METHOD="github.com";Ps.PROVIDER_ID="github.com";class Ds extends ko{constructor(){super("twitter.com")}static credential(e,n){return wr._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Ds.credential(n,s)}catch{return null}}}Ds.TWITTER_SIGN_IN_METHOD="twitter.com";Ds.PROVIDER_ID="twitter.com";class si{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await gn._fromIdTokenResponse(e,s,r),o=vp(s);return new si({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=vp(s);return new si({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function vp(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Ua extends mn{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,Ua.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new Ua(e,n,s,r)}}function d0(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ua._fromErrorAndOperation(t,i,e,s):i})}async function gA(t,e,n=!1){const s=await mo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return si._forOperation(t,"link",s)}async function yA(t,e,n=!1){const{auth:s}=t;if(an(s.app))return Promise.reject(gr(s));const r="reauthenticate";try{const i=await mo(t,d0(s,r,e,t),n);Ee(i.idToken,s,"internal-error");const o=fd(i.idToken);Ee(o,s,"internal-error");const{sub:l}=o;return Ee(t.uid===l,s,"user-mismatch"),si._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&Bn(s,"user-mismatch"),i}}async function _A(t,e,n=!1){if(an(t.app))return Promise.reject(gr(t));const s="signIn",r=await d0(t,s,e),i=await si._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}function vA(t,e,n,s){return gt(t).onIdTokenChanged(e,n,s)}function wA(t,e,n){return gt(t).beforeAuthStateChanged(e,n)}function hi(t,e,n,s){return gt(t).onAuthStateChanged(e,n,s)}function bA(t){return gt(t).signOut()}const $a="__sak";class h0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($a,"1"),this.storage.removeItem($a),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const EA=1e3,TA=10;class f0 extends h0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=a0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);eA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,TA):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},EA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}f0.type="LOCAL";const IA=f0;class p0 extends h0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}p0.type="SESSION";const m0=p0;function xA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Al{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new Al(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await xA(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Al.receivers=[];function yd(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}class AA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=yd("",20);r.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(p){const m=p;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Mn(){return window}function RA(t){Mn().location.href=t}function g0(){return typeof Mn().WorkerGlobalScope<"u"&&typeof Mn().importScripts=="function"}async function SA(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CA(){return navigator?.serviceWorker?.controller||null}function kA(){return g0()?self:null}const y0="firebaseLocalStorageDb",PA=1,Ba="firebaseLocalStorage",_0="fbase_key";class Po{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Rl(t,e){return t.transaction([Ba],e?"readwrite":"readonly").objectStore(Ba)}function DA(){const t=indexedDB.deleteDatabase(y0);return new Po(t).toPromise()}function du(){const t=indexedDB.open(y0,PA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Ba,{keyPath:_0})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Ba)?e(s):(s.close(),await DA(),e(await du()))})})}async function wp(t,e,n){const s=Rl(t,!0).put({[_0]:e,value:n});return new Po(s).toPromise()}async function NA(t,e){const n=Rl(t,!1).get(e),s=await new Po(n).toPromise();return s===void 0?null:s.value}function bp(t,e){const n=Rl(t,!0).delete(e);return new Po(n).toPromise()}const VA=800,OA=3;class v0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await du(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>OA)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return g0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Al._getInstance(kA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await SA(),!this.activeServiceWorker)return;this.sender=new AA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await du();return await wp(e,$a,"1"),await bp(e,$a),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>wp(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>NA(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>bp(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=Rl(r,!1).getAll();return new Po(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),VA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}v0.type="LOCAL";const MA=v0;new Co(3e4,6e4);function w0(t,e){return e?ss(e):(Ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class _d extends u0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function LA(t){return _A(t.auth,new _d(t),t.bypassAuthState)}function FA(t){const{auth:e,user:n}=t;return Ee(n,e,"internal-error"),yA(n,new _d(t),t.bypassAuthState)}async function UA(t){const{auth:e,user:n}=t;return Ee(n,e,"internal-error"),gA(n,new _d(t),t.bypassAuthState)}class b0{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return LA;case"linkViaPopup":case"linkViaRedirect":return UA;case"reauthViaPopup":case"reauthViaRedirect":return FA;default:Bn(this.auth,"internal-error")}}resolve(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const $A=new Co(2e3,1e4);async function E0(t,e,n){if(an(t.app))return Promise.reject(wn(t,"operation-not-supported-in-this-environment"));const s=xl(t);Mx(t,e,gd);const r=w0(s,n);return new hr(s,"signInViaPopup",e,r).executeNotNull()}class hr extends b0{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,hr.currentPopupAction&&hr.currentPopupAction.cancel(),hr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){ds(this.filter.length===1,"Popup operations only handle one event");const e=yd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(wn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(wn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hr.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$A.get())};e()}}hr.currentPopupAction=null;const BA="pendingRedirect",ma=new Map;class jA extends b0{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=ma.get(this.auth._key());if(!e){try{const s=await HA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}ma.set(this.auth._key(),e)}return this.bypassAuthState||ma.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HA(t,e){const n=GA(e),s=zA(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function qA(t,e){ma.set(t._key(),e)}function zA(t){return ss(t._redirectPersistence)}function GA(t){return pa(BA,t.config.apiKey,t.name)}async function WA(t,e,n=!1){if(an(t.app))return Promise.reject(gr(t));const s=xl(t),r=w0(s,e),o=await new jA(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}const KA=10*60*1e3;class QA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!T0(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(wn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=KA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ep(e))}saveEventToCache(e){this.cachedEventUids.add(Ep(e)),this.lastProcessedEventTime=Date.now()}}function Ep(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function T0({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function YA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return T0(t);default:return!1}}async function XA(t,e={}){return di(t,"GET","/v1/projects",e)}const JA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZA=/^https?/;async function e2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await XA(t);for(const n of e)try{if(t2(n))return}catch{}Bn(t,"unauthorized-domain")}function t2(t){const e=cu(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!ZA.test(n))return!1;if(JA.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}const n2=new Co(3e4,6e4);function Tp(){const t=Mn().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function s2(t){return new Promise((e,n)=>{function s(){Tp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Tp(),n(wn(t,"network-request-failed"))},timeout:n2.get()})}if(Mn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Mn().gapi?.load)s();else{const r=cA("iframefcb");return Mn()[r]=()=>{gapi.load?s():n(wn(t,"network-request-failed"))},aA(`${lA()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw ga=null,e})}let ga=null;function r2(t){return ga=ga||s2(t),ga}const i2=new Co(5e3,15e3),o2="__/auth/iframe",a2="emulator/auth/iframe",l2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},c2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function u2(t){const e=t.config;Ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?dd(e,a2):`https://${t.config.authDomain}/${o2}`,s={apiKey:e.apiKey,appName:t.name,v:Ar},r=c2.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${So(s).slice(1)}`}async function d2(t){const e=await r2(t),n=Mn().gapi;return Ee(n,t,"internal-error"),e.open({where:document.body,url:u2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:l2,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=wn(t,"network-request-failed"),l=Mn().setTimeout(()=>{i(o)},i2.get());function c(){Mn().clearTimeout(l),r(s)}s.ping(c).then(c,()=>{i(o)})}))}const h2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},f2=500,p2=600,m2="_blank",g2="http://localhost";class Ip{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function y2(t,e,n,s=f2,r=p2){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c={...h2,width:s.toString(),height:r.toString(),top:i,left:o},u=Ut().toLowerCase();n&&(l=n0(u)?m2:n),e0(u)&&(e=e||g2,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[y,D])=>`${m}${y}=${D},`,"");if(Zx(u)&&l!=="_self")return _2(e||"",l),new Ip(null);const p=window.open(e||"",l,h);Ee(p,t,"popup-blocked");try{p.focus()}catch{}return new Ip(p)}function _2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const v2="__/auth/handler",w2="emulator/auth/handler",b2=encodeURIComponent("fac");async function xp(t,e,n,s,r,i){Ee(t.config.authDomain,t,"auth-domain-config-required"),Ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Ar,eventId:r};if(e instanceof gd){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",YE(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof ko){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${b2}=${encodeURIComponent(c)}`:"";return`${E2(t)}?${So(l).slice(1)}${u}`}function E2({config:t}){return t.emulator?dd(t,w2):`https://${t.authDomain}/${v2}`}const Vc="webStorageSupport";class T2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=m0,this._completeRedirectFn=WA,this._overrideRedirectResult=qA}async _openPopup(e,n,s,r){ds(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await xp(e,n,s,cu(),r);return y2(e,i,yd())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await xp(e,n,s,cu(),r);return RA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(ds(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await d2(e),s=new QA(e);return n.register("authEvent",r=>(Ee(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Vc,{type:Vc},r=>{const i=r?.[0]?.[Vc];i!==void 0&&n(!!i),Bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=e2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return a0()||t0()||pd()}}const I2=T2;var Ap="@firebase/auth",Rp="1.11.1";class x2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function A2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function R2(t){xn(new fn("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;Ee(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:l0(t)},u=new iA(s,r,i,c);return dA(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),xn(new fn("auth-internal",e=>{const n=xl(e.getProvider("auth").getImmediate());return(s=>new x2(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xt(Ap,Rp,A2(t)),Xt(Ap,Rp,"esm2020")}const S2=5*60,C2=my("authIdTokenMaxAge")||S2;let Sp=null;const k2=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>C2)return;const r=n?.token;Sp!==r&&(Sp=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function P2(t=El()){const e=Ws(t,"auth");if(e.isInitialized())return e.getImmediate();const n=uA(t,{popupRedirectResolver:I2,persistence:[MA,IA,m0]}),s=my("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=k2(i.toString());wA(n,o,()=>o(n.currentUser)),vA(n,l=>o(l))}}const r=hy("auth");return r&&hA(n,`http://${r}`),n}function D2(){return document.getElementsByTagName("head")?.[0]??document}oA({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=wn("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",D2().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});R2("Browser");var Cp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ls,I0;(function(){var t;function e(v,w){function b(){}b.prototype=w.prototype,v.F=w.prototype,v.prototype=new b,v.prototype.constructor=v,v.D=function(S,R,A){for(var E=Array(arguments.length-2),De=2;De<arguments.length;De++)E[De-2]=arguments[De];return w.prototype[R].apply(S,E)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(v,w,b){b||(b=0);const S=Array(16);if(typeof w=="string")for(var R=0;R<16;++R)S[R]=w.charCodeAt(b++)|w.charCodeAt(b++)<<8|w.charCodeAt(b++)<<16|w.charCodeAt(b++)<<24;else for(R=0;R<16;++R)S[R]=w[b++]|w[b++]<<8|w[b++]<<16|w[b++]<<24;w=v.g[0],b=v.g[1],R=v.g[2];let A=v.g[3],E;E=w+(A^b&(R^A))+S[0]+3614090360&4294967295,w=b+(E<<7&4294967295|E>>>25),E=A+(R^w&(b^R))+S[1]+3905402710&4294967295,A=w+(E<<12&4294967295|E>>>20),E=R+(b^A&(w^b))+S[2]+606105819&4294967295,R=A+(E<<17&4294967295|E>>>15),E=b+(w^R&(A^w))+S[3]+3250441966&4294967295,b=R+(E<<22&4294967295|E>>>10),E=w+(A^b&(R^A))+S[4]+4118548399&4294967295,w=b+(E<<7&4294967295|E>>>25),E=A+(R^w&(b^R))+S[5]+1200080426&4294967295,A=w+(E<<12&4294967295|E>>>20),E=R+(b^A&(w^b))+S[6]+2821735955&4294967295,R=A+(E<<17&4294967295|E>>>15),E=b+(w^R&(A^w))+S[7]+4249261313&4294967295,b=R+(E<<22&4294967295|E>>>10),E=w+(A^b&(R^A))+S[8]+1770035416&4294967295,w=b+(E<<7&4294967295|E>>>25),E=A+(R^w&(b^R))+S[9]+2336552879&4294967295,A=w+(E<<12&4294967295|E>>>20),E=R+(b^A&(w^b))+S[10]+4294925233&4294967295,R=A+(E<<17&4294967295|E>>>15),E=b+(w^R&(A^w))+S[11]+2304563134&4294967295,b=R+(E<<22&4294967295|E>>>10),E=w+(A^b&(R^A))+S[12]+1804603682&4294967295,w=b+(E<<7&4294967295|E>>>25),E=A+(R^w&(b^R))+S[13]+4254626195&4294967295,A=w+(E<<12&4294967295|E>>>20),E=R+(b^A&(w^b))+S[14]+2792965006&4294967295,R=A+(E<<17&4294967295|E>>>15),E=b+(w^R&(A^w))+S[15]+1236535329&4294967295,b=R+(E<<22&4294967295|E>>>10),E=w+(R^A&(b^R))+S[1]+4129170786&4294967295,w=b+(E<<5&4294967295|E>>>27),E=A+(b^R&(w^b))+S[6]+3225465664&4294967295,A=w+(E<<9&4294967295|E>>>23),E=R+(w^b&(A^w))+S[11]+643717713&4294967295,R=A+(E<<14&4294967295|E>>>18),E=b+(A^w&(R^A))+S[0]+3921069994&4294967295,b=R+(E<<20&4294967295|E>>>12),E=w+(R^A&(b^R))+S[5]+3593408605&4294967295,w=b+(E<<5&4294967295|E>>>27),E=A+(b^R&(w^b))+S[10]+38016083&4294967295,A=w+(E<<9&4294967295|E>>>23),E=R+(w^b&(A^w))+S[15]+3634488961&4294967295,R=A+(E<<14&4294967295|E>>>18),E=b+(A^w&(R^A))+S[4]+3889429448&4294967295,b=R+(E<<20&4294967295|E>>>12),E=w+(R^A&(b^R))+S[9]+568446438&4294967295,w=b+(E<<5&4294967295|E>>>27),E=A+(b^R&(w^b))+S[14]+3275163606&4294967295,A=w+(E<<9&4294967295|E>>>23),E=R+(w^b&(A^w))+S[3]+4107603335&4294967295,R=A+(E<<14&4294967295|E>>>18),E=b+(A^w&(R^A))+S[8]+1163531501&4294967295,b=R+(E<<20&4294967295|E>>>12),E=w+(R^A&(b^R))+S[13]+2850285829&4294967295,w=b+(E<<5&4294967295|E>>>27),E=A+(b^R&(w^b))+S[2]+4243563512&4294967295,A=w+(E<<9&4294967295|E>>>23),E=R+(w^b&(A^w))+S[7]+1735328473&4294967295,R=A+(E<<14&4294967295|E>>>18),E=b+(A^w&(R^A))+S[12]+2368359562&4294967295,b=R+(E<<20&4294967295|E>>>12),E=w+(b^R^A)+S[5]+4294588738&4294967295,w=b+(E<<4&4294967295|E>>>28),E=A+(w^b^R)+S[8]+2272392833&4294967295,A=w+(E<<11&4294967295|E>>>21),E=R+(A^w^b)+S[11]+1839030562&4294967295,R=A+(E<<16&4294967295|E>>>16),E=b+(R^A^w)+S[14]+4259657740&4294967295,b=R+(E<<23&4294967295|E>>>9),E=w+(b^R^A)+S[1]+2763975236&4294967295,w=b+(E<<4&4294967295|E>>>28),E=A+(w^b^R)+S[4]+1272893353&4294967295,A=w+(E<<11&4294967295|E>>>21),E=R+(A^w^b)+S[7]+4139469664&4294967295,R=A+(E<<16&4294967295|E>>>16),E=b+(R^A^w)+S[10]+3200236656&4294967295,b=R+(E<<23&4294967295|E>>>9),E=w+(b^R^A)+S[13]+681279174&4294967295,w=b+(E<<4&4294967295|E>>>28),E=A+(w^b^R)+S[0]+3936430074&4294967295,A=w+(E<<11&4294967295|E>>>21),E=R+(A^w^b)+S[3]+3572445317&4294967295,R=A+(E<<16&4294967295|E>>>16),E=b+(R^A^w)+S[6]+76029189&4294967295,b=R+(E<<23&4294967295|E>>>9),E=w+(b^R^A)+S[9]+3654602809&4294967295,w=b+(E<<4&4294967295|E>>>28),E=A+(w^b^R)+S[12]+3873151461&4294967295,A=w+(E<<11&4294967295|E>>>21),E=R+(A^w^b)+S[15]+530742520&4294967295,R=A+(E<<16&4294967295|E>>>16),E=b+(R^A^w)+S[2]+3299628645&4294967295,b=R+(E<<23&4294967295|E>>>9),E=w+(R^(b|~A))+S[0]+4096336452&4294967295,w=b+(E<<6&4294967295|E>>>26),E=A+(b^(w|~R))+S[7]+1126891415&4294967295,A=w+(E<<10&4294967295|E>>>22),E=R+(w^(A|~b))+S[14]+2878612391&4294967295,R=A+(E<<15&4294967295|E>>>17),E=b+(A^(R|~w))+S[5]+4237533241&4294967295,b=R+(E<<21&4294967295|E>>>11),E=w+(R^(b|~A))+S[12]+1700485571&4294967295,w=b+(E<<6&4294967295|E>>>26),E=A+(b^(w|~R))+S[3]+2399980690&4294967295,A=w+(E<<10&4294967295|E>>>22),E=R+(w^(A|~b))+S[10]+4293915773&4294967295,R=A+(E<<15&4294967295|E>>>17),E=b+(A^(R|~w))+S[1]+2240044497&4294967295,b=R+(E<<21&4294967295|E>>>11),E=w+(R^(b|~A))+S[8]+1873313359&4294967295,w=b+(E<<6&4294967295|E>>>26),E=A+(b^(w|~R))+S[15]+4264355552&4294967295,A=w+(E<<10&4294967295|E>>>22),E=R+(w^(A|~b))+S[6]+2734768916&4294967295,R=A+(E<<15&4294967295|E>>>17),E=b+(A^(R|~w))+S[13]+1309151649&4294967295,b=R+(E<<21&4294967295|E>>>11),E=w+(R^(b|~A))+S[4]+4149444226&4294967295,w=b+(E<<6&4294967295|E>>>26),E=A+(b^(w|~R))+S[11]+3174756917&4294967295,A=w+(E<<10&4294967295|E>>>22),E=R+(w^(A|~b))+S[2]+718787259&4294967295,R=A+(E<<15&4294967295|E>>>17),E=b+(A^(R|~w))+S[9]+3951481745&4294967295,v.g[0]=v.g[0]+w&4294967295,v.g[1]=v.g[1]+(R+(E<<21&4294967295|E>>>11))&4294967295,v.g[2]=v.g[2]+R&4294967295,v.g[3]=v.g[3]+A&4294967295}s.prototype.v=function(v,w){w===void 0&&(w=v.length);const b=w-this.blockSize,S=this.C;let R=this.h,A=0;for(;A<w;){if(R==0)for(;A<=b;)r(this,v,A),A+=this.blockSize;if(typeof v=="string"){for(;A<w;)if(S[R++]=v.charCodeAt(A++),R==this.blockSize){r(this,S),R=0;break}}else for(;A<w;)if(S[R++]=v[A++],R==this.blockSize){r(this,S),R=0;break}}this.h=R,this.o+=w},s.prototype.A=function(){var v=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);v[0]=128;for(var w=1;w<v.length-8;++w)v[w]=0;w=this.o*8;for(var b=v.length-8;b<v.length;++b)v[b]=w&255,w/=256;for(this.v(v),v=Array(16),w=0,b=0;b<4;++b)for(let S=0;S<32;S+=8)v[w++]=this.g[b]>>>S&255;return v};function i(v,w){var b=l;return Object.prototype.hasOwnProperty.call(b,v)?b[v]:b[v]=w(v)}function o(v,w){this.h=w;const b=[];let S=!0;for(let R=v.length-1;R>=0;R--){const A=v[R]|0;S&&A==w||(b[R]=A,S=!1)}this.g=b}var l={};function c(v){return-128<=v&&v<128?i(v,function(w){return new o([w|0],w<0?-1:0)}):new o([v|0],v<0?-1:0)}function u(v){if(isNaN(v)||!isFinite(v))return p;if(v<0)return M(u(-v));const w=[];let b=1;for(let S=0;v>=b;S++)w[S]=v/b|0,b*=4294967296;return new o(w,0)}function h(v,w){if(v.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(v.charAt(0)=="-")return M(h(v.substring(1),w));if(v.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=u(Math.pow(w,8));let S=p;for(let A=0;A<v.length;A+=8){var R=Math.min(8,v.length-A);const E=parseInt(v.substring(A,A+R),w);R<8?(R=u(Math.pow(w,R)),S=S.j(R).add(u(E))):(S=S.j(b),S=S.add(u(E)))}return S}var p=c(0),m=c(1),y=c(16777216);t=o.prototype,t.m=function(){if(N(this))return-M(this).m();let v=0,w=1;for(let b=0;b<this.g.length;b++){const S=this.i(b);v+=(S>=0?S:4294967296+S)*w,w*=4294967296}return v},t.toString=function(v){if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(D(this))return"0";if(N(this))return"-"+M(this).toString(v);const w=u(Math.pow(v,6));var b=this;let S="";for(;;){const R=P(b,w).g;b=H(b,R.j(w));let A=((b.g.length>0?b.g[0]:b.h)>>>0).toString(v);if(b=R,D(b))return A+S;for(;A.length<6;)A="0"+A;S=A+S}},t.i=function(v){return v<0?0:v<this.g.length?this.g[v]:this.h};function D(v){if(v.h!=0)return!1;for(let w=0;w<v.g.length;w++)if(v.g[w]!=0)return!1;return!0}function N(v){return v.h==-1}t.l=function(v){return v=H(this,v),N(v)?-1:D(v)?0:1};function M(v){const w=v.g.length,b=[];for(let S=0;S<w;S++)b[S]=~v.g[S];return new o(b,~v.h).add(m)}t.abs=function(){return N(this)?M(this):this},t.add=function(v){const w=Math.max(this.g.length,v.g.length),b=[];let S=0;for(let R=0;R<=w;R++){let A=S+(this.i(R)&65535)+(v.i(R)&65535),E=(A>>>16)+(this.i(R)>>>16)+(v.i(R)>>>16);S=E>>>16,A&=65535,E&=65535,b[R]=E<<16|A}return new o(b,b[b.length-1]&-2147483648?-1:0)};function H(v,w){return v.add(M(w))}t.j=function(v){if(D(this)||D(v))return p;if(N(this))return N(v)?M(this).j(M(v)):M(M(this).j(v));if(N(v))return M(this.j(M(v)));if(this.l(y)<0&&v.l(y)<0)return u(this.m()*v.m());const w=this.g.length+v.g.length,b=[];for(var S=0;S<2*w;S++)b[S]=0;for(S=0;S<this.g.length;S++)for(let R=0;R<v.g.length;R++){const A=this.i(S)>>>16,E=this.i(S)&65535,De=v.i(R)>>>16,Se=v.i(R)&65535;b[2*S+2*R]+=E*Se,k(b,2*S+2*R),b[2*S+2*R+1]+=A*Se,k(b,2*S+2*R+1),b[2*S+2*R+1]+=E*De,k(b,2*S+2*R+1),b[2*S+2*R+2]+=A*De,k(b,2*S+2*R+2)}for(v=0;v<w;v++)b[v]=b[2*v+1]<<16|b[2*v];for(v=w;v<2*w;v++)b[v]=0;return new o(b,0)};function k(v,w){for(;(v[w]&65535)!=v[w];)v[w+1]+=v[w]>>>16,v[w]&=65535,w++}function C(v,w){this.g=v,this.h=w}function P(v,w){if(D(w))throw Error("division by zero");if(D(v))return new C(p,p);if(N(v))return w=P(M(v),w),new C(M(w.g),M(w.h));if(N(w))return w=P(v,M(w)),new C(M(w.g),w.h);if(v.g.length>30){if(N(v)||N(w))throw Error("slowDivide_ only works with positive integers.");for(var b=m,S=w;S.l(v)<=0;)b=O(b),S=O(S);var R=B(b,1),A=B(S,1);for(S=B(S,2),b=B(b,2);!D(S);){var E=A.add(S);E.l(v)<=0&&(R=R.add(b),A=E),S=B(S,1),b=B(b,1)}return w=H(v,R.j(w)),new C(R,w)}for(R=p;v.l(w)>=0;){for(b=Math.max(1,Math.floor(v.m()/w.m())),S=Math.ceil(Math.log(b)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),A=u(b),E=A.j(w);N(E)||E.l(v)>0;)b-=S,A=u(b),E=A.j(w);D(A)&&(A=m),R=R.add(A),v=H(v,E)}return new C(R,v)}t.B=function(v){return P(this,v).h},t.and=function(v){const w=Math.max(this.g.length,v.g.length),b=[];for(let S=0;S<w;S++)b[S]=this.i(S)&v.i(S);return new o(b,this.h&v.h)},t.or=function(v){const w=Math.max(this.g.length,v.g.length),b=[];for(let S=0;S<w;S++)b[S]=this.i(S)|v.i(S);return new o(b,this.h|v.h)},t.xor=function(v){const w=Math.max(this.g.length,v.g.length),b=[];for(let S=0;S<w;S++)b[S]=this.i(S)^v.i(S);return new o(b,this.h^v.h)};function O(v){const w=v.g.length+1,b=[];for(let S=0;S<w;S++)b[S]=v.i(S)<<1|v.i(S-1)>>>31;return new o(b,v.h)}function B(v,w){const b=w>>5;w%=32;const S=v.g.length-b,R=[];for(let A=0;A<S;A++)R[A]=w>0?v.i(A+b)>>>w|v.i(A+b+1)<<32-w:v.i(A+b);return new o(R,v.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,I0=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Ls=o}).apply(typeof Cp<"u"?Cp:typeof self<"u"?self:typeof window<"u"?window:{});var na=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var x0,$i,A0,ya,hu,R0,S0,C0;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof na=="object"&&na];for(var f=0;f<a.length;++f){var g=a[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function r(a,f){if(f)e:{var g=s;a=a.split(".");for(var _=0;_<a.length-1;_++){var L=a[_];if(!(L in g))break e;g=g[L]}a=a[a.length-1],_=g[a],f=f(_),f!=_&&f!=null&&e(g,a,{configurable:!0,writable:!0,value:f})}}r("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(a){return a||function(f){var g=[],_;for(_ in f)Object.prototype.hasOwnProperty.call(f,_)&&g.push([_,f[_]]);return g}});var i=i||{},o=this||self;function l(a){var f=typeof a;return f=="object"&&a!=null||f=="function"}function c(a,f,g){return a.call.apply(a.bind,arguments)}function u(a,f,g){return u=c,u.apply(null,arguments)}function h(a,f){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function p(a,f){function g(){}g.prototype=f.prototype,a.Z=f.prototype,a.prototype=new g,a.prototype.constructor=a,a.Ob=function(_,L,$){for(var oe=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)oe[Ce-2]=arguments[Ce];return f.prototype[L].apply(_,oe)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function y(a){const f=a.length;if(f>0){const g=Array(f);for(let _=0;_<f;_++)g[_]=a[_];return g}return[]}function D(a,f){for(let _=1;_<arguments.length;_++){const L=arguments[_];var g=typeof L;if(g=g!="object"?g:L?Array.isArray(L)?"array":g:"null",g=="array"||g=="object"&&typeof L.length=="number"){g=a.length||0;const $=L.length||0;a.length=g+$;for(let oe=0;oe<$;oe++)a[g+oe]=L[oe]}else a.push(L)}}class N{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function M(a){o.setTimeout(()=>{throw a},0)}function H(){var a=v;let f=null;return a.g&&(f=a.g,a.g=a.g.next,a.g||(a.h=null),f.next=null),f}class k{constructor(){this.h=this.g=null}add(f,g){const _=C.get();_.set(f,g),this.h?this.h.next=_:this.g=_,this.h=_}}var C=new N(()=>new P,a=>a.reset());class P{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let O,B=!1,v=new k,w=()=>{const a=Promise.resolve(void 0);O=()=>{a.then(b)}};function b(){for(var a;a=H();){try{a.h.call(a.g)}catch(g){M(g)}var f=C;f.j(a),f.h<100&&(f.h++,a.next=f.g,f.g=a)}B=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(a,f){this.type=a,this.g=this.target=f,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const g=()=>{};o.addEventListener("test",g,f),o.removeEventListener("test",g,f)}catch{}return a}();function E(a){return/^[\s\xa0]*$/.test(a)}function De(a,f){R.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,f)}p(De,R),De.prototype.init=function(a,f){const g=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=f,f=a.relatedTarget,f||(g=="mouseover"?f=a.fromElement:g=="mouseout"&&(f=a.toElement)),this.relatedTarget=f,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&De.Z.h.call(this)},De.prototype.h=function(){De.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Se="closure_listenable_"+(Math.random()*1e6|0),Le=0;function te(a,f,g,_,L){this.listener=a,this.proxy=null,this.src=f,this.type=g,this.capture=!!_,this.ha=L,this.key=++Le,this.da=this.fa=!1}function I(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function q(a,f,g){for(const _ in a)f.call(g,a[_],_,a)}function J(a,f){for(const g in a)f.call(void 0,a[g],g,a)}function U(a){const f={};for(const g in a)f[g]=a[g];return f}const me="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ze(a,f){let g,_;for(let L=1;L<arguments.length;L++){_=arguments[L];for(g in _)a[g]=_[g];for(let $=0;$<me.length;$++)g=me[$],Object.prototype.hasOwnProperty.call(_,g)&&(a[g]=_[g])}}function ke(a){this.src=a,this.g={},this.h=0}ke.prototype.add=function(a,f,g,_,L){const $=a.toString();a=this.g[$],a||(a=this.g[$]=[],this.h++);const oe=it(a,f,_,L);return oe>-1?(f=a[oe],g||(f.fa=!1)):(f=new te(f,this.src,$,!!_,L),f.fa=g,a.push(f)),f};function wt(a,f){const g=f.type;if(g in a.g){var _=a.g[g],L=Array.prototype.indexOf.call(_,f,void 0),$;($=L>=0)&&Array.prototype.splice.call(_,L,1),$&&(I(f),a.g[g].length==0&&(delete a.g[g],a.h--))}}function it(a,f,g,_){for(let L=0;L<a.length;++L){const $=a[L];if(!$.da&&$.listener==f&&$.capture==!!g&&$.ha==_)return L}return-1}var z="closure_lm_"+(Math.random()*1e6|0),ee={};function ce(a,f,g,_,L){if(Array.isArray(f)){for(let $=0;$<f.length;$++)ce(a,f[$],g,_,L);return null}return g=ae(g),a&&a[Se]?a.J(f,g,l(_)?!!_.capture:!1,L):fe(a,f,g,!1,_,L)}function fe(a,f,g,_,L,$){if(!f)throw Error("Invalid event type");const oe=l(L)?!!L.capture:!!L;let Ce=K(a);if(Ce||(a[z]=Ce=new ke(a)),g=Ce.add(f,g,_,oe,$),g.proxy)return g;if(_=ye(),g.proxy=_,_.src=a,_.listener=g,a.addEventListener)A||(L=oe),L===void 0&&(L=!1),a.addEventListener(f.toString(),_,L);else if(a.attachEvent)a.attachEvent(V(f.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ye(){function a(g){return f.call(a.src,a.listener,g)}const f=G;return a}function T(a,f,g,_,L){if(Array.isArray(f))for(var $=0;$<f.length;$++)T(a,f[$],g,_,L);else _=l(_)?!!_.capture:!!_,g=ae(g),a&&a[Se]?(a=a.i,$=String(f).toString(),$ in a.g&&(f=a.g[$],g=it(f,g,_,L),g>-1&&(I(f[g]),Array.prototype.splice.call(f,g,1),f.length==0&&(delete a.g[$],a.h--)))):a&&(a=K(a))&&(f=a.g[f.toString()],a=-1,f&&(a=it(f,g,_,L)),(g=a>-1?f[a]:null)&&x(g))}function x(a){if(typeof a!="number"&&a&&!a.da){var f=a.src;if(f&&f[Se])wt(f.i,a);else{var g=a.type,_=a.proxy;f.removeEventListener?f.removeEventListener(g,_,a.capture):f.detachEvent?f.detachEvent(V(g),_):f.addListener&&f.removeListener&&f.removeListener(_),(g=K(f))?(wt(g,a),g.h==0&&(g.src=null,f[z]=null)):I(a)}}}function V(a){return a in ee?ee[a]:ee[a]="on"+a}function G(a,f){if(a.da)a=!0;else{f=new De(f,this);const g=a.listener,_=a.ha||a.src;a.fa&&x(a),a=g.call(_,f)}return a}function K(a){return a=a[z],a instanceof ke?a:null}var W="__closure_events_fn_"+(Math.random()*1e9>>>0);function ae(a){return typeof a=="function"?a:(a[W]||(a[W]=function(f){return a.handleEvent(f)}),a[W])}function se(){S.call(this),this.i=new ke(this),this.M=this,this.G=null}p(se,S),se.prototype[Se]=!0,se.prototype.removeEventListener=function(a,f,g,_){T(this,a,f,g,_)};function ne(a,f){var g,_=a.G;if(_)for(g=[];_;_=_.G)g.push(_);if(a=a.M,_=f.type||f,typeof f=="string")f=new R(f,a);else if(f instanceof R)f.target=f.target||a;else{var L=f;f=new R(_,a),ze(f,L)}L=!0;let $,oe;if(g)for(oe=g.length-1;oe>=0;oe--)$=f.g=g[oe],L=Z($,_,!0,f)&&L;if($=f.g=a,L=Z($,_,!0,f)&&L,L=Z($,_,!1,f)&&L,g)for(oe=0;oe<g.length;oe++)$=f.g=g[oe],L=Z($,_,!1,f)&&L}se.prototype.N=function(){if(se.Z.N.call(this),this.i){var a=this.i;for(const f in a.g){const g=a.g[f];for(let _=0;_<g.length;_++)I(g[_]);delete a.g[f],a.h--}}this.G=null},se.prototype.J=function(a,f,g,_){return this.i.add(String(a),f,!1,g,_)},se.prototype.K=function(a,f,g,_){return this.i.add(String(a),f,!0,g,_)};function Z(a,f,g,_){if(f=a.i.g[String(f)],!f)return!0;f=f.concat();let L=!0;for(let $=0;$<f.length;++$){const oe=f[$];if(oe&&!oe.da&&oe.capture==g){const Ce=oe.listener,bt=oe.ha||oe.src;oe.fa&&wt(a.i,oe),L=Ce.call(bt,_)!==!1&&L}}return L&&!_.defaultPrevented}function ue(a,f){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(a,f||0)}function re(a){a.g=ue(()=>{a.g=null,a.i&&(a.i=!1,re(a))},a.l);const f=a.h;a.h=null,a.m.apply(null,f)}class pe extends S{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:re(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(a){S.call(this),this.h=a,this.g={}}p(le,S);var be=[];function Re(a){q(a.g,function(f,g){this.g.hasOwnProperty(g)&&x(f)},a),a.g={}}le.prototype.N=function(){le.Z.N.call(this),Re(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pe=o.JSON.stringify,lt=o.JSON.parse,ct=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Pt(){}function Wt(){}var Jt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ys(){R.call(this,"d")}p(Ys,R);function ut(){R.call(this,"c")}p(ut,R);var tt={},Pr=null;function Gn(){return Pr=Pr||new se}tt.Ia="serverreachability";function bi(a){R.call(this,tt.Ia,a)}p(bi,R);function Xs(a){const f=Gn();ne(f,new bi(f))}tt.STAT_EVENT="statevent";function $o(a,f){R.call(this,tt.STAT_EVENT,a),this.stat=f}p($o,R);function Bt(a){const f=Gn();ne(f,new $o(f,a))}tt.Ja="timingevent";function nh(a,f){R.call(this,tt.Ja,a),this.size=f}p(nh,R);function Ei(a,f){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},f)}function Ti(){this.g=!0}Ti.prototype.ua=function(){this.g=!1};function Iv(a,f,g,_,L,$){a.info(function(){if(a.g)if($){var oe="",Ce=$.split("&");for(let We=0;We<Ce.length;We++){var bt=Ce[We].split("=");if(bt.length>1){const It=bt[0];bt=bt[1];const Cn=It.split("_");oe=Cn.length>=2&&Cn[1]=="type"?oe+(It+"="+bt+"&"):oe+(It+"=redacted&")}}}else oe=null;else oe=$;return"XMLHTTP REQ ("+_+") [attempt "+L+"]: "+f+`
`+g+`
`+oe})}function xv(a,f,g,_,L,$,oe){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+L+"]: "+f+`
`+g+`
`+$+" "+oe})}function Dr(a,f,g,_){a.info(function(){return"XMLHTTP TEXT ("+f+"): "+Rv(a,g)+(_?" "+_:"")})}function Av(a,f){a.info(function(){return"TIMEOUT: "+f})}Ti.prototype.info=function(){};function Rv(a,f){if(!a.g)return f;if(!f)return null;try{const $=JSON.parse(f);if($){for(a=0;a<$.length;a++)if(Array.isArray($[a])){var g=$[a];if(!(g.length<2)){var _=g[1];if(Array.isArray(_)&&!(_.length<1)){var L=_[0];if(L!="noop"&&L!="stop"&&L!="close")for(let oe=1;oe<_.length;oe++)_[oe]=""}}}}return Pe($)}catch{return f}}var Bo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},sh={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},rh;function Yl(){}p(Yl,Pt),Yl.prototype.g=function(){return new XMLHttpRequest},rh=new Yl;function Ii(a){return encodeURIComponent(String(a))}function Sv(a){var f=1;a=a.split(":");const g=[];for(;f>0&&a.length;)g.push(a.shift()),f--;return a.length&&g.push(a.join(":")),g}function ys(a,f,g,_){this.j=a,this.i=f,this.l=g,this.S=_||1,this.V=new le(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ih}function ih(){this.i=null,this.g="",this.h=!1}var oh={},Xl={};function Jl(a,f,g){a.M=1,a.A=Ho(Sn(f)),a.u=g,a.R=!0,ah(a,null)}function ah(a,f){a.F=Date.now(),jo(a),a.B=Sn(a.A);var g=a.B,_=a.S;Array.isArray(_)||(_=[String(_)]),wh(g.i,"t",_),a.C=0,g=a.j.L,a.h=new ih,a.g=Fh(a.j,g?f:null,!a.u),a.P>0&&(a.O=new pe(u(a.Y,a,a.g),a.P)),f=a.V,g=a.g,_=a.ba;var L="readystatechange";Array.isArray(L)||(L&&(be[0]=L.toString()),L=be);for(let $=0;$<L.length;$++){const oe=ce(g,L[$],_||f.handleEvent,!1,f.h||f);if(!oe)break;f.g[oe.key]=oe}f=a.J?U(a.J):{},a.u?(a.v||(a.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,f)):(a.v="GET",a.g.ea(a.B,a.v,null,f)),Xs(),Iv(a.i,a.v,a.B,a.l,a.S,a.u)}ys.prototype.ba=function(a){a=a.target;const f=this.O;f&&ws(a)==3?f.j():this.Y(a)},ys.prototype.Y=function(a){try{if(a==this.g)e:{const Ce=ws(this.g),bt=this.g.ya(),We=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||Rh(this.g)))){this.K||Ce!=4||bt==7||(bt==8||We<=0?Xs(3):Xs(2)),Zl(this);var f=this.g.ca();this.X=f;var g=Cv(this);if(this.o=f==200,xv(this.i,this.v,this.B,this.l,this.S,Ce,f),this.o){if(this.U&&!this.L){t:{if(this.g){var _,L=this.g;if((_=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(_)){var $=_;break t}}$=null}if(a=$)Dr(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ec(this,a);else{this.o=!1,this.m=3,Bt(12),Js(this),xi(this);break e}}if(this.R){a=!0;let It;for(;!this.K&&this.C<g.length;)if(It=kv(this,g),It==Xl){Ce==4&&(this.m=4,Bt(14),a=!1),Dr(this.i,this.l,null,"[Incomplete Response]");break}else if(It==oh){this.m=4,Bt(15),Dr(this.i,this.l,g,"[Invalid Chunk]"),a=!1;break}else Dr(this.i,this.l,It,null),ec(this,It);if(lh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||g.length!=0||this.h.h||(this.m=1,Bt(16),a=!1),this.o=this.o&&a,!a)Dr(this.i,this.l,g,"[Invalid Chunked Response]"),Js(this),xi(this);else if(g.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),lc(oe),oe.P=!0,Bt(11))}}else Dr(this.i,this.l,g,null),ec(this,g);Ce==4&&Js(this),this.o&&!this.K&&(Ce==4?Vh(this.j,this):(this.o=!1,jo(this)))}else qv(this.g),f==400&&g.indexOf("Unknown SID")>0?(this.m=3,Bt(12)):(this.m=0,Bt(13)),Js(this),xi(this)}}}catch{}finally{}};function Cv(a){if(!lh(a))return a.g.la();const f=Rh(a.g);if(f==="")return"";let g="";const _=f.length,L=ws(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Js(a),xi(a),"";a.h.i=new o.TextDecoder}for(let $=0;$<_;$++)a.h.h=!0,g+=a.h.i.decode(f[$],{stream:!(L&&$==_-1)});return f.length=0,a.h.g+=g,a.C=0,a.h.g}function lh(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function kv(a,f){var g=a.C,_=f.indexOf(`
`,g);return _==-1?Xl:(g=Number(f.substring(g,_)),isNaN(g)?oh:(_+=1,_+g>f.length?Xl:(f=f.slice(_,_+g),a.C=_+g,f)))}ys.prototype.cancel=function(){this.K=!0,Js(this)};function jo(a){a.T=Date.now()+a.H,ch(a,a.H)}function ch(a,f){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Ei(u(a.aa,a),f)}function Zl(a){a.D&&(o.clearTimeout(a.D),a.D=null)}ys.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(Av(this.i,this.B),this.M!=2&&(Xs(),Bt(17)),Js(this),this.m=2,xi(this)):ch(this,this.T-a)};function xi(a){a.j.I==0||a.K||Vh(a.j,a)}function Js(a){Zl(a);var f=a.O;f&&typeof f.dispose=="function"&&f.dispose(),a.O=null,Re(a.V),a.g&&(f=a.g,a.g=null,f.abort(),f.dispose())}function ec(a,f){try{var g=a.j;if(g.I!=0&&(g.g==a||tc(g.h,a))){if(!a.L&&tc(g.h,a)&&g.I==3){try{var _=g.Ba.g.parse(f)}catch{_=null}if(Array.isArray(_)&&_.length==3){var L=_;if(L[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<a.F)Ko(g),Go(g);else break e;ac(g),Bt(18)}}else g.xa=L[1],0<g.xa-g.K&&L[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=Ei(u(g.Va,g),6e3));hh(g.h)<=1&&g.ta&&(g.ta=void 0)}else er(g,11)}else if((a.L||g.g==a)&&Ko(g),!E(f))for(L=g.Ba.g.parse(f),f=0;f<L.length;f++){let We=L[f];const It=We[0];if(!(It<=g.K))if(g.K=It,We=We[1],g.I==2)if(We[0]=="c"){g.M=We[1],g.ba=We[2];const Cn=We[3];Cn!=null&&(g.ka=Cn,g.j.info("VER="+g.ka));const tr=We[4];tr!=null&&(g.za=tr,g.j.info("SVER="+g.za));const bs=We[5];bs!=null&&typeof bs=="number"&&bs>0&&(_=1.5*bs,g.O=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;const Es=a.g;if(Es){const Yo=Es.g?Es.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yo){var $=_.h;$.g||Yo.indexOf("spdy")==-1&&Yo.indexOf("quic")==-1&&Yo.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(nc($,$.h),$.h=null))}if(_.G){const cc=Es.g?Es.g.getResponseHeader("X-HTTP-Session-Id"):null;cc&&(_.wa=cc,nt(_.J,_.G,cc))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-a.F,g.j.info("Handshake RTT: "+g.T+"ms")),_=g;var oe=a;if(_.na=Lh(_,_.L?_.ba:null,_.W),oe.L){fh(_.h,oe);var Ce=oe,bt=_.O;bt&&(Ce.H=bt),Ce.D&&(Zl(Ce),jo(Ce)),_.g=oe}else Dh(_);g.i.length>0&&Wo(g)}else We[0]!="stop"&&We[0]!="close"||er(g,7);else g.I==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?er(g,7):oc(g):We[0]!="noop"&&g.l&&g.l.qa(We),g.A=0)}}Xs(4)}catch{}}var Pv=class{constructor(a,f){this.g=a,this.map=f}};function uh(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function dh(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function hh(a){return a.h?1:a.g?a.g.size:0}function tc(a,f){return a.h?a.h==f:a.g?a.g.has(f):!1}function nc(a,f){a.g?a.g.add(f):a.h=f}function fh(a,f){a.h&&a.h==f?a.h=null:a.g&&a.g.has(f)&&a.g.delete(f)}uh.prototype.cancel=function(){if(this.i=ph(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function ph(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let f=a.i;for(const g of a.g.values())f=f.concat(g.G);return f}return y(a.i)}var mh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dv(a,f){if(a){a=a.split("&");for(let g=0;g<a.length;g++){const _=a[g].indexOf("=");let L,$=null;_>=0?(L=a[g].substring(0,_),$=a[g].substring(_+1)):L=a[g],f(L,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function _s(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;a instanceof _s?(this.l=a.l,Ai(this,a.j),this.o=a.o,this.g=a.g,Ri(this,a.u),this.h=a.h,sc(this,bh(a.i)),this.m=a.m):a&&(f=String(a).match(mh))?(this.l=!1,Ai(this,f[1]||"",!0),this.o=Si(f[2]||""),this.g=Si(f[3]||"",!0),Ri(this,f[4]),this.h=Si(f[5]||"",!0),sc(this,f[6]||"",!0),this.m=Si(f[7]||"")):(this.l=!1,this.i=new ki(null,this.l))}_s.prototype.toString=function(){const a=[];var f=this.j;f&&a.push(Ci(f,gh,!0),":");var g=this.g;return(g||f=="file")&&(a.push("//"),(f=this.o)&&a.push(Ci(f,gh,!0),"@"),a.push(Ii(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&a.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&a.push("/"),a.push(Ci(g,g.charAt(0)=="/"?Ov:Vv,!0))),(g=this.i.toString())&&a.push("?",g),(g=this.m)&&a.push("#",Ci(g,Lv)),a.join("")},_s.prototype.resolve=function(a){const f=Sn(this);let g=!!a.j;g?Ai(f,a.j):g=!!a.o,g?f.o=a.o:g=!!a.g,g?f.g=a.g:g=a.u!=null;var _=a.h;if(g)Ri(f,a.u);else if(g=!!a.h){if(_.charAt(0)!="/")if(this.g&&!this.h)_="/"+_;else{var L=f.h.lastIndexOf("/");L!=-1&&(_=f.h.slice(0,L+1)+_)}if(L=_,L==".."||L==".")_="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){_=L.lastIndexOf("/",0)==0,L=L.split("/");const $=[];for(let oe=0;oe<L.length;){const Ce=L[oe++];Ce=="."?_&&oe==L.length&&$.push(""):Ce==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),_&&oe==L.length&&$.push("")):($.push(Ce),_=!0)}_=$.join("/")}else _=L}return g?f.h=_:g=a.i.toString()!=="",g?sc(f,bh(a.i)):g=!!a.m,g&&(f.m=a.m),f};function Sn(a){return new _s(a)}function Ai(a,f,g){a.j=g?Si(f,!0):f,a.j&&(a.j=a.j.replace(/:$/,""))}function Ri(a,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);a.u=f}else a.u=null}function sc(a,f,g){f instanceof ki?(a.i=f,Fv(a.i,a.l)):(g||(f=Ci(f,Mv)),a.i=new ki(f,a.l))}function nt(a,f,g){a.i.set(f,g)}function Ho(a){return nt(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Si(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ci(a,f,g){return typeof a=="string"?(a=encodeURI(a).replace(f,Nv),g&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Nv(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var gh=/[#\/\?@]/g,Vv=/[#\?:]/g,Ov=/[#\?]/g,Mv=/[#\?@]/g,Lv=/#/g;function ki(a,f){this.h=this.g=null,this.i=a||null,this.j=!!f}function Zs(a){a.g||(a.g=new Map,a.h=0,a.i&&Dv(a.i,function(f,g){a.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=ki.prototype,t.add=function(a,f){Zs(this),this.i=null,a=Nr(this,a);let g=this.g.get(a);return g||this.g.set(a,g=[]),g.push(f),this.h+=1,this};function yh(a,f){Zs(a),f=Nr(a,f),a.g.has(f)&&(a.i=null,a.h-=a.g.get(f).length,a.g.delete(f))}function _h(a,f){return Zs(a),f=Nr(a,f),a.g.has(f)}t.forEach=function(a,f){Zs(this),this.g.forEach(function(g,_){g.forEach(function(L){a.call(f,L,_,this)},this)},this)};function vh(a,f){Zs(a);let g=[];if(typeof f=="string")_h(a,f)&&(g=g.concat(a.g.get(Nr(a,f))));else for(a=Array.from(a.g.values()),f=0;f<a.length;f++)g=g.concat(a[f]);return g}t.set=function(a,f){return Zs(this),this.i=null,a=Nr(this,a),_h(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[f]),this.h+=1,this},t.get=function(a,f){return a?(a=vh(this,a),a.length>0?String(a[0]):f):f};function wh(a,f,g){yh(a,f),g.length>0&&(a.i=null,a.g.set(Nr(a,f),y(g)),a.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],f=Array.from(this.g.keys());for(let _=0;_<f.length;_++){var g=f[_];const L=Ii(g);g=vh(this,g);for(let $=0;$<g.length;$++){let oe=L;g[$]!==""&&(oe+="="+Ii(g[$])),a.push(oe)}}return this.i=a.join("&")};function bh(a){const f=new ki;return f.i=a.i,a.g&&(f.g=new Map(a.g),f.h=a.h),f}function Nr(a,f){return f=String(f),a.j&&(f=f.toLowerCase()),f}function Fv(a,f){f&&!a.j&&(Zs(a),a.i=null,a.g.forEach(function(g,_){const L=_.toLowerCase();_!=L&&(yh(this,_),wh(this,L,g))},a)),a.j=f}function Uv(a,f){const g=new Ti;if(o.Image){const _=new Image;_.onload=h(vs,g,"TestLoadImage: loaded",!0,f,_),_.onerror=h(vs,g,"TestLoadImage: error",!1,f,_),_.onabort=h(vs,g,"TestLoadImage: abort",!1,f,_),_.ontimeout=h(vs,g,"TestLoadImage: timeout",!1,f,_),o.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else f(!1)}function $v(a,f){const g=new Ti,_=new AbortController,L=setTimeout(()=>{_.abort(),vs(g,"TestPingServer: timeout",!1,f)},1e4);fetch(a,{signal:_.signal}).then($=>{clearTimeout(L),$.ok?vs(g,"TestPingServer: ok",!0,f):vs(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),vs(g,"TestPingServer: error",!1,f)})}function vs(a,f,g,_,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),_(g)}catch{}}function Bv(){this.g=new ct}function rc(a){this.i=a.Sb||null,this.h=a.ab||!1}p(rc,Pt),rc.prototype.g=function(){return new qo(this.i,this.h)};function qo(a,f){se.call(this),this.H=a,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(qo,se),t=qo.prototype,t.open=function(a,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=f,this.readyState=1,Di(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(f.body=a),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Pi(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Di(this)),this.g&&(this.readyState=3,Di(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Eh(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Eh(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var f=a.value?a.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!a.done}))&&(this.response=this.responseText+=f)}a.done?Pi(this):Di(this),this.readyState==3&&Eh(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Pi(this))},t.Na=function(a){this.g&&(this.response=a,Pi(this))},t.ga=function(){this.g&&Pi(this)};function Pi(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Di(a)}t.setRequestHeader=function(a,f){this.A.append(a,f)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,a.push(g[0]+": "+g[1]),g=f.next();return a.join(`\r
`)};function Di(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(qo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Th(a){let f="";return q(a,function(g,_){f+=_,f+=":",f+=g,f+=`\r
`}),f}function ic(a,f,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=Th(g),typeof a=="string"?g!=null&&Ii(g):nt(a,f,g))}function dt(a){se.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(dt,se);var jv=/^https?$/i,Hv=["POST","PUT"];t=dt.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,f,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);f=f?f.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():rh.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(f,String(a),!0),this.B=!1}catch($){Ih(this,$);return}if(a=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var L in _)g.set(L,_[L]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const $ of _.keys())g.set($,_.get($));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find($=>$.toLowerCase()=="content-type"),L=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(Hv,f,void 0)>=0)||_||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,oe]of g)this.g.setRequestHeader($,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch($){Ih(this,$)}};function Ih(a,f){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=f,a.o=5,xh(a),zo(a)}function xh(a){a.A||(a.A=!0,ne(a,"complete"),ne(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,ne(this,"complete"),ne(this,"abort"),zo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zo(this,!0)),dt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ah(this):this.Xa())},t.Xa=function(){Ah(this)};function Ah(a){if(a.h&&typeof i<"u"){if(a.v&&ws(a)==4)setTimeout(a.Ca.bind(a),0);else if(ne(a,"readystatechange"),ws(a)==4){a.h=!1;try{const $=a.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var _;if(_=$===0){let oe=String(a.D).match(mh)[1]||null;!oe&&o.self&&o.self.location&&(oe=o.self.location.protocol.slice(0,-1)),_=!jv.test(oe?oe.toLowerCase():"")}g=_}if(g)ne(a,"complete"),ne(a,"success");else{a.o=6;try{var L=ws(a)>2?a.g.statusText:""}catch{L=""}a.l=L+" ["+a.ca()+"]",xh(a)}}finally{zo(a)}}}}function zo(a,f){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const g=a.g;a.g=null,f||ne(a,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ws(a){return a.g?a.g.readyState:0}t.ca=function(){try{return ws(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var f=this.g.responseText;return a&&f.indexOf(a)==0&&(f=f.substring(a.length)),lt(f)}};function Rh(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function qv(a){const f={};a=(a.g&&ws(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(E(a[_]))continue;var g=Sv(a[_]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const $=f[L]||[];f[L]=$,$.push(g)}J(f,function(_){return _.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ni(a,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[a]||f}function Sh(a){this.za=0,this.i=[],this.j=new Ti,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ni("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ni("baseRetryDelayMs",5e3,a),this.Za=Ni("retryDelaySeedMs",1e4,a),this.Ta=Ni("forwardChannelMaxRetries",2,a),this.va=Ni("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new uh(a&&a.concurrentRequestLimit),this.Ba=new Bv,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Sh.prototype,t.ka=8,t.I=1,t.connect=function(a,f,g,_){Bt(0),this.W=a,this.H=f||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.J=Lh(this,null,this.W),Wo(this)};function oc(a){if(Ch(a),a.I==3){var f=a.V++,g=Sn(a.J);if(nt(g,"SID",a.M),nt(g,"RID",f),nt(g,"TYPE","terminate"),Vi(a,g),f=new ys(a,a.j,f),f.M=2,f.A=Ho(Sn(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=f.A,g=!0),g||(f.g=Fh(f.j,null),f.g.ea(f.A)),f.F=Date.now(),jo(f)}Mh(a)}function Go(a){a.g&&(lc(a),a.g.cancel(),a.g=null)}function Ch(a){Go(a),a.v&&(o.clearTimeout(a.v),a.v=null),Ko(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Wo(a){if(!dh(a.h)&&!a.m){a.m=!0;var f=a.Ea;O||w(),B||(O(),B=!0),v.add(f,a),a.D=0}}function zv(a,f){return hh(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=f.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Ei(u(a.Ea,a,f),Oh(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const L=new ys(this,this.j,a);let $=this.o;if(this.U&&($?($=U($),ze($,this.U)):$=this.U),this.u!==null||this.R||(L.J=$,$=null),this.S)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(f+=_,f>4096){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Ph(this,L,f),g=Sn(this.J),nt(g,"RID",a),nt(g,"CVER",22),this.G&&nt(g,"X-HTTP-Session-Id",this.G),Vi(this,g),$&&(this.R?f="headers="+Ii(Th($))+"&"+f:this.u&&ic(g,this.u,$)),nc(this.h,L),this.Ra&&nt(g,"TYPE","init"),this.S?(nt(g,"$req",f),nt(g,"SID","null"),L.U=!0,Jl(L,g,null)):Jl(L,g,f),this.I=2}}else this.I==3&&(a?kh(this,a):this.i.length==0||dh(this.h)||kh(this))};function kh(a,f){var g;f?g=f.l:g=a.V++;const _=Sn(a.J);nt(_,"SID",a.M),nt(_,"RID",g),nt(_,"AID",a.K),Vi(a,_),a.u&&a.o&&ic(_,a.u,a.o),g=new ys(a,a.j,g,a.D+1),a.u===null&&(g.J=a.o),f&&(a.i=f.G.concat(a.i)),f=Ph(a,g,1e3),g.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),nc(a.h,g),Jl(g,_,f)}function Vi(a,f){a.H&&q(a.H,function(g,_){nt(f,_,g)}),a.l&&q({},function(g,_){nt(f,_,g)})}function Ph(a,f,g){g=Math.min(a.i.length,g);const _=a.l?u(a.l.Ka,a.l,a):null;e:{var L=a.i;let Ce=-1;for(;;){const bt=["count="+g];Ce==-1?g>0?(Ce=L[0].g,bt.push("ofs="+Ce)):Ce=0:bt.push("ofs="+Ce);let We=!0;for(let It=0;It<g;It++){var $=L[It].g;const Cn=L[It].map;if($-=Ce,$<0)Ce=Math.max(0,L[It].g-100),We=!1;else try{$="req"+$+"_"||"";try{var oe=Cn instanceof Map?Cn:Object.entries(Cn);for(const[tr,bs]of oe){let Es=bs;l(bs)&&(Es=Pe(bs)),bt.push($+tr+"="+encodeURIComponent(Es))}}catch(tr){throw bt.push($+"type="+encodeURIComponent("_badmap")),tr}}catch{_&&_(Cn)}}if(We){oe=bt.join("&");break e}}oe=void 0}return a=a.i.splice(0,g),f.G=a,oe}function Dh(a){if(!a.g&&!a.v){a.Y=1;var f=a.Da;O||w(),B||(O(),B=!0),v.add(f,a),a.A=0}}function ac(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Ei(u(a.Da,a),Oh(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Nh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Ei(u(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Bt(10),Go(this),Nh(this))};function lc(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Nh(a){a.g=new ys(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var f=Sn(a.na);nt(f,"RID","rpc"),nt(f,"SID",a.M),nt(f,"AID",a.K),nt(f,"CI",a.F?"0":"1"),!a.F&&a.ia&&nt(f,"TO",a.ia),nt(f,"TYPE","xmlhttp"),Vi(a,f),a.u&&a.o&&ic(f,a.u,a.o),a.O&&(a.g.H=a.O);var g=a.g;a=a.ba,g.M=1,g.A=Ho(Sn(f)),g.u=null,g.R=!0,ah(g,a)}t.Va=function(){this.C!=null&&(this.C=null,Go(this),ac(this),Bt(19))};function Ko(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Vh(a,f){var g=null;if(a.g==f){Ko(a),lc(a),a.g=null;var _=2}else if(tc(a.h,f))g=f.G,fh(a.h,f),_=1;else return;if(a.I!=0){if(f.o)if(_==1){g=f.u?f.u.length:0,f=Date.now()-f.F;var L=a.D;_=Gn(),ne(_,new nh(_,g)),Wo(a)}else Dh(a);else if(L=f.m,L==3||L==0&&f.X>0||!(_==1&&zv(a,f)||_==2&&ac(a)))switch(g&&g.length>0&&(f=a.h,f.i=f.i.concat(g)),L){case 1:er(a,5);break;case 4:er(a,10);break;case 3:er(a,6);break;default:er(a,2)}}}function Oh(a,f){let g=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(g*=2),g*f}function er(a,f){if(a.j.info("Error code "+f),f==2){var g=u(a.bb,a),_=a.Ua;const L=!_;_=new _s(_||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ai(_,"https"),Ho(_),L?Uv(_.toString(),g):$v(_.toString(),g)}else Bt(2);a.I=0,a.l&&a.l.pa(f),Mh(a),Ch(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function Mh(a){if(a.I=0,a.ja=[],a.l){const f=ph(a.h);(f.length!=0||a.i.length!=0)&&(D(a.ja,f),D(a.ja,a.i),a.h.i.length=0,y(a.i),a.i.length=0),a.l.oa()}}function Lh(a,f,g){var _=g instanceof _s?Sn(g):new _s(g);if(_.g!="")f&&(_.g=f+"."+_.g),Ri(_,_.u);else{var L=o.location;_=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;const $=new _s(null);_&&Ai($,_),f&&($.g=f),L&&Ri($,L),g&&($.h=g),_=$}return g=a.G,f=a.wa,g&&f&&nt(_,g,f),nt(_,"VER",a.ka),Vi(a,_),_}function Fh(a,f,g){if(f&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=a.Aa&&!a.ma?new dt(new rc({ab:g})):new dt(a.ma),f.Fa(a.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Uh(){}t=Uh.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Qo(){}Qo.prototype.g=function(a,f){return new Zt(a,f)};function Zt(a,f){se.call(this),this.g=new Sh(f),this.l=a,this.h=f&&f.messageUrlParams||null,a=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(a?a["X-WebChannel-Content-Type"]=f.messageContentType:a={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(a?a["X-WebChannel-Client-Profile"]=f.sa:a={"X-WebChannel-Client-Profile":f.sa}),this.g.U=a,(a=f&&f.Qb)&&!E(a)&&(this.g.u=a),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!E(f)&&(this.g.G=f,a=this.h,a!==null&&f in a&&(a=this.h,f in a&&delete a[f])),this.j=new Vr(this)}p(Zt,se),Zt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){oc(this.g)},Zt.prototype.o=function(a){var f=this.g;if(typeof a=="string"){var g={};g.__data__=a,a=g}else this.v&&(g={},g.__data__=Pe(a),a=g);f.i.push(new Pv(f.Ya++,a)),f.I==3&&Wo(f)},Zt.prototype.N=function(){this.g.l=null,delete this.j,oc(this.g),delete this.g,Zt.Z.N.call(this)};function $h(a){Ys.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var f=a.__sm__;if(f){e:{for(const g in f){a=g;break e}a=void 0}(this.i=a)&&(a=this.i,f=f!==null&&a in f?f[a]:void 0),this.data=f}else this.data=a}p($h,Ys);function Bh(){ut.call(this),this.status=1}p(Bh,ut);function Vr(a){this.g=a}p(Vr,Uh),Vr.prototype.ra=function(){ne(this.g,"a")},Vr.prototype.qa=function(a){ne(this.g,new $h(a))},Vr.prototype.pa=function(a){ne(this.g,new Bh)},Vr.prototype.oa=function(){ne(this.g,"b")},Qo.prototype.createWebChannel=Qo.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,C0=function(){return new Qo},S0=function(){return Gn()},R0=tt,hu={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Bo.NO_ERROR=0,Bo.TIMEOUT=8,Bo.HTTP_ERROR=6,ya=Bo,sh.COMPLETE="complete",A0=sh,Wt.EventType=Jt,Jt.OPEN="a",Jt.CLOSE="b",Jt.ERROR="c",Jt.MESSAGE="d",se.prototype.listen=se.prototype.J,$i=Wt,dt.prototype.listenOnce=dt.prototype.K,dt.prototype.getLastError=dt.prototype.Ha,dt.prototype.getLastErrorCode=dt.prototype.ya,dt.prototype.getStatus=dt.prototype.ca,dt.prototype.getResponseJson=dt.prototype.La,dt.prototype.getResponseText=dt.prototype.la,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Fa,x0=dt}).apply(typeof na<"u"?na:typeof self<"u"?self:typeof window<"u"?window:{});const kp="@firebase/firestore",Pp="4.9.2";class Nt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nt.UNAUTHENTICATED=new Nt(null),Nt.GOOGLE_CREDENTIALS=new Nt("google-credentials-uid"),Nt.FIRST_PARTY=new Nt("first-party-uid"),Nt.MOCK_USER=new Nt("mock-user");let fi="12.3.0";const br=new bl("@firebase/firestore");function Fr(){return br.logLevel}function he(t,...e){if(br.logLevel<=Ne.DEBUG){const n=e.map(vd);br.debug(`Firestore (${fi}): ${t}`,...n)}}function hs(t,...e){if(br.logLevel<=Ne.ERROR){const n=e.map(vd);br.error(`Firestore (${fi}): ${t}`,...n)}}function ri(t,...e){if(br.logLevel<=Ne.WARN){const n=e.map(vd);br.warn(`Firestore (${fi}): ${t}`,...n)}}function vd(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function we(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,k0(t,s,n)}function k0(t,e,n){let s=`FIRESTORE (${fi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw hs(s),new Error(s)}function He(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||k0(e,r,s)}function xe(t,e){return t}const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends mn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class os{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class P0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class N2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Nt.UNAUTHENTICATED))}shutdown(){}}class V2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class O2{constructor(e){this.t=e,this.currentUser=Nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){He(this.o===void 0,42304);let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new os;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new os,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},l=c=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new os)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(He(typeof s.accessToken=="string",31837,{l:s}),new P0(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string",2055,{h:e}),new Nt(e)}}class M2{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Nt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class L2{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new M2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Dp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class F2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,an(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){He(this.o===void 0,3512);const s=i=>{i.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,he("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Dp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(He(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Dp(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function U2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}class wd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=U2(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Ve(t,e){return t<e?-1:t>e?1:0}function fu(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return Oc(r)===Oc(i)?Ve(r,i):Oc(r)?1:-1}return Ve(t.length,e.length)}const $2=55296,B2=57343;function Oc(t){const e=t.charCodeAt(0);return e>=$2&&e<=B2}function ii(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}const Np="__name__";class Dn{constructor(e,n,s){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&we(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Dn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Dn?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=Dn.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Ve(e.length,n.length)}static compareSegments(e,n){const s=Dn.isNumericId(e),r=Dn.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?Dn.extractNumericId(e).compare(Dn.extractNumericId(n)):fu(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ls.fromString(e.substring(4,e.length-2))}}class Ze extends Dn{construct(e,n,s){return new Ze(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new de(Q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new Ze(n)}static emptyPath(){return new Ze([])}}const j2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends Dn{construct(e,n,s){return new St(e,n,s)}static isValidIdentifier(e){return j2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Np}static keyField(){return new St([Np])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new de(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new de(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new de(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(s+=l,r++):(i(),r++)}if(i(),o)throw new de(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new St(n)}static emptyPath(){return new St([])}}class ge{constructor(e){this.path=e}static fromPath(e){return new ge(Ze.fromString(e))}static fromName(e){return new ge(Ze.fromString(e).popFirst(5))}static empty(){return new ge(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new Ze(e.slice()))}}function D0(t,e,n){if(!n)throw new de(Q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function H2(t,e,n,s){if(e===!0&&s===!0)throw new de(Q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Vp(t){if(!ge.isDocumentKey(t))throw new de(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Op(t){if(ge.isDocumentKey(t))throw new de(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function N0(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Sl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we(12329,{type:typeof t})}function An(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new de(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sl(t);throw new de(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function vt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Do(t,e){if(!N0(t))throw new de(Q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new de(Q.INVALID_ARGUMENT,n);return!0}const Mp=-62135596800,Lp=1e6;class st{static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Lp);return new st(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Mp)throw new de(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Lp}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:st._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Do(e,st._jsonSchema))return new st(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Mp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}st._jsonSchemaVersion="firestore/timestamp/1.0",st._jsonSchema={type:vt("string",st._jsonSchemaVersion),seconds:vt("number"),nanoseconds:vt("number")};class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new st(0,0))}static max(){return new Te(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const go=-1;function q2(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=Te.fromTimestamp(s===1e9?new st(n+1,0):new st(n,s));return new Bs(r,ge.empty(),e)}function z2(t){return new Bs(t.readTime,t.key,go)}class Bs{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Bs(Te.min(),ge.empty(),go)}static max(){return new Bs(Te.max(),ge.empty(),go)}}function G2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ge.comparator(t.documentKey,e.documentKey),n!==0?n:Ve(t.largestBatchId,e.largestBatchId))}const W2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class K2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function pi(t){if(t.code!==Q.FAILED_PRECONDITION||t.message!==W2)throw t;he("LocalStore","Unexpectedly lost primary lease")}class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new X((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof X?n:X.resolve(n)}catch(n){return X.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):X.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):X.reject(n)}static resolve(e){return new X((n,s)=>{n(e)})}static reject(e){return new X((n,s)=>{s(e)})}static waitFor(e){return new X((n,s)=>{let r=0,i=0,o=!1;e.forEach(l=>{++r,l.next(()=>{++i,o&&i===r&&n()},c=>s(c))}),o=!0,i===r&&n()})}static or(e){let n=X.resolve(!1);for(const s of e)n=n.next(r=>r?X.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new X((s,r)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{o[u]=h,++l,l===i&&s(o)},h=>r(h))}})}static doWhile(e,n){return new X((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function Q2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function mi(t){return t.name==="IndexedDbTransactionError"}class Cl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Cl.ce=-1;const bd=-1;function kl(t){return t==null}function ja(t){return t===0&&1/t==-1/0}function Y2(t){return typeof t=="number"&&Number.isInteger(t)&&!ja(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const V0="";function X2(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Fp(e)),e=J2(t.get(n),e);return Fp(e)}function J2(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case V0:n+="";break;default:n+=i}}return n}function Fp(t){return t+V0+""}function Up(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ks(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function O0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class at{constructor(e,n){this.comparator=e,this.root=n||Rt.EMPTY}insert(e,n){return new at(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rt.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sa(this.root,e,this.comparator,!1)}getReverseIterator(){return new sa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sa(this.root,e,this.comparator,!0)}}class sa{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rt{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??Rt.RED,this.left=r??Rt.EMPTY,this.right=i??Rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Rt(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Rt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1;Rt.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new Rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Tt{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $p(this.data.getIterator())}getIteratorFrom(e){return new $p(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Tt(this.comparator);return n.data=e,n}}class $p{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class sn{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new sn([])}unionWith(e){let n=new Tt(St.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new sn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ii(this.fields,e.fields,(n,s)=>n.isEqual(s))}}class M0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new M0("Invalid base64 string: "+i):i}}(e);return new kt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kt.EMPTY_BYTE_STRING=new kt("");const Z2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function js(t){if(He(!!t,39018),typeof t=="string"){let e=0;const n=Z2.exec(t);if(He(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:pt(t.seconds),nanos:pt(t.nanos)}}function pt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Hs(t){return typeof t=="string"?kt.fromBase64String(t):kt.fromUint8Array(t)}const L0="server_timestamp",F0="__type__",U0="__previous_value__",$0="__local_write_time__";function Ed(t){return(t?.mapValue?.fields||{})[F0]?.stringValue===L0}function Pl(t){const e=t.mapValue.fields[U0];return Ed(e)?Pl(e):e}function yo(t){const e=js(t.mapValue.fields[$0].timestampValue);return new st(e.seconds,e.nanos)}class eR{constructor(e,n,s,r,i,o,l,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const Ha="(default)";class _o{constructor(e,n){this.projectId=e,this.database=n||Ha}static empty(){return new _o("","")}get isDefaultDatabase(){return this.database===Ha}isEqual(e){return e instanceof _o&&e.projectId===this.projectId&&e.database===this.database}}const B0="__type__",tR="__max__",ra={mapValue:{}},j0="__vector__",qa="value";function qs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ed(t)?4:sR(t)?9007199254740991:nR(t)?10:11:we(28295,{value:t})}function jn(t,e){if(t===e)return!0;const n=qs(t);if(n!==qs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return yo(t).isEqual(yo(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=js(r.timestampValue),l=js(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Hs(r.bytesValue).isEqual(Hs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return pt(r.geoPointValue.latitude)===pt(i.geoPointValue.latitude)&&pt(r.geoPointValue.longitude)===pt(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return pt(r.integerValue)===pt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=pt(r.doubleValue),l=pt(i.doubleValue);return o===l?ja(o)===ja(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return ii(t.arrayValue.values||[],e.arrayValue.values||[],jn);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Up(o)!==Up(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!jn(o[c],l[c])))return!1;return!0}(t,e);default:return we(52216,{left:t})}}function vo(t,e){return(t.values||[]).find(n=>jn(n,e))!==void 0}function oi(t,e){if(t===e)return 0;const n=qs(t),s=qs(e);if(n!==s)return Ve(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=pt(i.integerValue||i.doubleValue),c=pt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Bp(t.timestampValue,e.timestampValue);case 4:return Bp(yo(t),yo(e));case 5:return fu(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Hs(i),c=Hs(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=Ve(l[u],c[u]);if(h!==0)return h}return Ve(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Ve(pt(i.latitude),pt(o.latitude));return l!==0?l:Ve(pt(i.longitude),pt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return jp(t.arrayValue,e.arrayValue);case 10:return function(i,o){const l=i.fields||{},c=o.fields||{},u=l[qa]?.arrayValue,h=c[qa]?.arrayValue,p=Ve(u?.values?.length||0,h?.values?.length||0);return p!==0?p:jp(u,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===ra.mapValue&&o===ra.mapValue)return 0;if(i===ra.mapValue)return 1;if(o===ra.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){const m=fu(c[p],h[p]);if(m!==0)return m;const y=oi(l[c[p]],u[h[p]]);if(y!==0)return y}return Ve(c.length,h.length)}(t.mapValue,e.mapValue);default:throw we(23264,{he:n})}}function Bp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ve(t,e);const n=js(t),s=js(e),r=Ve(n.seconds,s.seconds);return r!==0?r:Ve(n.nanos,s.nanos)}function jp(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=oi(n[r],s[r]);if(i)return i}return Ve(n.length,s.length)}function ai(t){return pu(t)}function pu(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=js(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Hs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ge.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=pu(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${pu(n.fields[o])}`;return r+"}"}(t.mapValue):we(61005,{value:t})}function _a(t){switch(qs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pl(t);return e?16+_a(e):16;case 5:return 2*t.stringValue.length;case 6:return Hs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+_a(i),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return Ks(s.fields,(i,o)=>{r+=i.length+_a(o)}),r}(t.mapValue);default:throw we(13486,{value:t})}}function Hp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function mu(t){return!!t&&"integerValue"in t}function Td(t){return!!t&&"arrayValue"in t}function qp(t){return!!t&&"nullValue"in t}function zp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function va(t){return!!t&&"mapValue"in t}function nR(t){return(t?.mapValue?.fields||{})[B0]?.stringValue===j0}function eo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ks(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=eo(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=eo(t.arrayValue.values[n]);return e}return{...t}}function sR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===tR}class Yt{constructor(e){this.value=e}static empty(){return new Yt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!va(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=eo(n)}setAll(e){let n=St.emptyPath(),s={},r=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=l.popLast()}o?s[l.lastSegment()]=eo(o):r.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());va(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];va(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Ks(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Yt(eo(this.value))}}function H0(t){const e=[];return Ks(t.fields,(n,s)=>{const r=new St([n]);if(va(s)){const i=H0(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new sn(e)}class Ot{constructor(e,n,s,r,i,o,l){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Ot(e,0,Te.min(),Te.min(),Te.min(),Yt.empty(),0)}static newFoundDocument(e,n,s,r){return new Ot(e,1,n,Te.min(),s,r,0)}static newNoDocument(e,n){return new Ot(e,2,n,Te.min(),Te.min(),Yt.empty(),0)}static newUnknownDocument(e,n){return new Ot(e,3,n,Te.min(),Te.min(),Yt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class za{constructor(e,n){this.position=e,this.inclusive=n}}function Gp(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=ge.comparator(ge.fromName(o.referenceValue),n.key):s=oi(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function Wp(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jn(t.position[n],e.position[n]))return!1;return!0}class Ga{constructor(e,n="asc"){this.field=e,this.dir=n}}function rR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class q0{}class _t extends q0{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new oR(e,n,s):n==="array-contains"?new cR(e,s):n==="in"?new uR(e,s):n==="not-in"?new dR(e,s):n==="array-contains-any"?new hR(e,s):new _t(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new aR(e,s):new lR(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(oi(n,this.value)):n!==null&&qs(this.value)===qs(n)&&this.matchesComparison(oi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Rn extends q0{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Rn(e,n)}matches(e){return z0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function z0(t){return t.op==="and"}function G0(t){return iR(t)&&z0(t)}function iR(t){for(const e of t.filters)if(e instanceof Rn)return!1;return!0}function gu(t){if(t instanceof _t)return t.field.canonicalString()+t.op.toString()+ai(t.value);if(G0(t))return t.filters.map(e=>gu(e)).join(",");{const e=t.filters.map(n=>gu(n)).join(",");return`${t.op}(${e})`}}function W0(t,e){return t instanceof _t?function(s,r){return r instanceof _t&&s.op===r.op&&s.field.isEqual(r.field)&&jn(s.value,r.value)}(t,e):t instanceof Rn?function(s,r){return r instanceof Rn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,l)=>i&&W0(o,r.filters[l]),!0):!1}(t,e):void we(19439)}function K0(t){return t instanceof _t?function(n){return`${n.field.canonicalString()} ${n.op} ${ai(n.value)}`}(t):t instanceof Rn?function(n){return n.op.toString()+" {"+n.getFilters().map(K0).join(" ,")+"}"}(t):"Filter"}class oR extends _t{constructor(e,n,s){super(e,n,s),this.key=ge.fromName(s.referenceValue)}matches(e){const n=ge.comparator(e.key,this.key);return this.matchesComparison(n)}}class aR extends _t{constructor(e,n){super(e,"in",n),this.keys=Q0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class lR extends _t{constructor(e,n){super(e,"not-in",n),this.keys=Q0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Q0(t,e){return(e.arrayValue?.values||[]).map(n=>ge.fromName(n.referenceValue))}class cR extends _t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Td(n)&&vo(n.arrayValue,this.value)}}class uR extends _t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&vo(this.value.arrayValue,n)}}class dR extends _t{constructor(e,n){super(e,"not-in",n)}matches(e){if(vo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!vo(this.value.arrayValue,n)}}class hR extends _t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Td(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>vo(this.value.arrayValue,s))}}class fR{constructor(e,n=null,s=[],r=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function Kp(t,e=null,n=[],s=[],r=null,i=null,o=null){return new fR(t,e,n,s,r,i,o)}function Id(t){const e=xe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>gu(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),kl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>ai(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>ai(s)).join(",")),e.Te=n}return e.Te}function xd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!rR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!W0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Wp(t.startAt,e.startAt)&&Wp(t.endAt,e.endAt)}function yu(t){return ge.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class No{constructor(e,n=null,s=[],r=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function pR(t,e,n,s,r,i,o,l){return new No(t,e,n,s,r,i,o,l)}function Ad(t){return new No(t)}function Qp(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Y0(t){return t.collectionGroup!==null}function to(t){const e=xe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Tt(St.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Ga(i,s))}),n.has(St.keyField().canonicalString())||e.Ie.push(new Ga(St.keyField(),s))}return e.Ie}function Ln(t){const e=xe(t);return e.Ee||(e.Ee=mR(e,to(t))),e.Ee}function mR(t,e){if(t.limitType==="F")return Kp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new Ga(r.field,i)});const n=t.endAt?new za(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new za(t.startAt.position,t.startAt.inclusive):null;return Kp(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function _u(t,e){const n=t.filters.concat([e]);return new No(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function vu(t,e,n){return new No(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Dl(t,e){return xd(Ln(t),Ln(e))&&t.limitType===e.limitType}function X0(t){return`${Id(Ln(t))}|lt:${t.limitType}`}function Ur(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>K0(r)).join(", ")}]`),kl(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>ai(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>ai(r)).join(",")),`Target(${s})`}(Ln(t))}; limitType=${t.limitType})`}function Nl(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):ge.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of to(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(o,l,c){const u=Gp(o,l,c);return o.inclusive?u<=0:u<0}(s.startAt,to(s),r)||s.endAt&&!function(o,l,c){const u=Gp(o,l,c);return o.inclusive?u>=0:u>0}(s.endAt,to(s),r))}(t,e)}function gR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function J0(t){return(e,n)=>{let s=!1;for(const r of to(t)){const i=yR(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function yR(t,e,n){const s=t.field.isKeyField()?ge.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?oi(c,u):we(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return we(19790,{direction:t.dir})}}class Rr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ks(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return O0(this.inner)}size(){return this.innerSize}}const _R=new at(ge.comparator);function fs(){return _R}const Z0=new at(ge.comparator);function Bi(...t){let e=Z0;for(const n of t)e=e.insert(n.key,n);return e}function e_(t){let e=Z0;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function fr(){return no()}function t_(){return no()}function no(){return new Rr(t=>t.toString(),(t,e)=>t.isEqual(e))}const vR=new at(ge.comparator),wR=new Tt(ge.comparator);function Oe(...t){let e=wR;for(const n of t)e=e.add(n);return e}const bR=new Tt(Ve);function ER(){return bR}function Rd(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ja(e)?"-0":e}}function n_(t){return{integerValue:""+t}}function s_(t,e){return Y2(e)?n_(e):Rd(t,e)}class Vl{constructor(){this._=void 0}}function TR(t,e,n){return t instanceof Wa?function(r,i){const o={fields:{[F0]:{stringValue:L0},[$0]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Ed(i)&&(i=Pl(i)),i&&(o.fields[U0]=i),{mapValue:o}}(n,e):t instanceof wo?i_(t,e):t instanceof bo?o_(t,e):function(r,i){const o=r_(r,i),l=Yp(o)+Yp(r.Ae);return mu(o)&&mu(r.Ae)?n_(l):Rd(r.serializer,l)}(t,e)}function IR(t,e,n){return t instanceof wo?i_(t,e):t instanceof bo?o_(t,e):n}function r_(t,e){return t instanceof Eo?function(s){return mu(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class Wa extends Vl{}class wo extends Vl{constructor(e){super(),this.elements=e}}function i_(t,e){const n=a_(e);for(const s of t.elements)n.some(r=>jn(r,s))||n.push(s);return{arrayValue:{values:n}}}class bo extends Vl{constructor(e){super(),this.elements=e}}function o_(t,e){let n=a_(e);for(const s of t.elements)n=n.filter(r=>!jn(r,s));return{arrayValue:{values:n}}}class Eo extends Vl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Yp(t){return pt(t.integerValue||t.doubleValue)}function a_(t){return Td(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class xR{constructor(e,n){this.field=e,this.transform=n}}function AR(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof wo&&r instanceof wo||s instanceof bo&&r instanceof bo?ii(s.elements,r.elements,jn):s instanceof Eo&&r instanceof Eo?jn(s.Ae,r.Ae):s instanceof Wa&&r instanceof Wa}(t.transform,e.transform)}class RR{constructor(e,n){this.version=e,this.transformResults=n}}class dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new dn}static exists(e){return new dn(void 0,e)}static updateTime(e){return new dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ol{}function l_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Sd(t.key,dn.none()):new Vo(t.key,t.data,dn.none());{const n=t.data,s=Yt.empty();let r=new Tt(St.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Qs(t.key,s,new sn(r.toArray()),dn.none())}}function SR(t,e,n){t instanceof Vo?function(r,i,o){const l=r.value.clone(),c=Jp(r.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Qs?function(r,i,o){if(!wa(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Jp(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(c_(r)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function so(t,e,n,s){return t instanceof Vo?function(i,o,l,c){if(!wa(i.precondition,o))return l;const u=i.value.clone(),h=Zp(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,s):t instanceof Qs?function(i,o,l,c){if(!wa(i.precondition,o))return l;const u=Zp(i.fieldTransforms,c,o),h=o.data;return h.setAll(c_(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,s):function(i,o,l){return wa(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function CR(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=r_(s.transform,r||null);i!=null&&(n===null&&(n=Yt.empty()),n.set(s.field,i))}return n||null}function Xp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&ii(s,r,(i,o)=>AR(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Vo extends Ol{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Qs extends Ol{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function c_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function Jp(t,e,n){const s=new Map;He(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,l=e.data.field(i.field);s.set(i.field,IR(o,l,n[r]))}return s}function Zp(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,TR(i,o,e))}return s}class Sd extends Ol{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kR extends Ol{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class PR{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&SR(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=so(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=so(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=t_();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(r.key)?null:l;const c=l_(o,l);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(Te.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Oe())}isEqual(e){return this.batchId===e.batchId&&ii(this.mutations,e.mutations,(n,s)=>Xp(n,s))&&ii(this.baseMutations,e.baseMutations,(n,s)=>Xp(n,s))}}class Cd{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){He(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=function(){return vR}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Cd(e,n,s,r)}}class DR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class NR{constructor(e,n){this.count=e,this.unchangedNames=n}}var yt,Me;function VR(t){switch(t){case Q.OK:return we(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return we(15467,{code:t})}}function u_(t){if(t===void 0)return hs("GRPC error has no .code"),Q.UNKNOWN;switch(t){case yt.OK:return Q.OK;case yt.CANCELLED:return Q.CANCELLED;case yt.UNKNOWN:return Q.UNKNOWN;case yt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case yt.INTERNAL:return Q.INTERNAL;case yt.UNAVAILABLE:return Q.UNAVAILABLE;case yt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case yt.NOT_FOUND:return Q.NOT_FOUND;case yt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case yt.ABORTED:return Q.ABORTED;case yt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case yt.DATA_LOSS:return Q.DATA_LOSS;default:return we(39323,{code:t})}}(Me=yt||(yt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";function OR(){return new TextEncoder}const MR=new Ls([4294967295,4294967295],0);function em(t){const e=OR().encode(t),n=new I0;return n.update(e),new Uint8Array(n.digest())}function tm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ls([n,s],0),new Ls([r,i],0)]}class kd{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new ji(`Invalid padding: ${n}`);if(s<0)throw new ji(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ji(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new ji(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ls.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(Ls.fromNumber(s)));return r.compare(MR)===1&&(r=new Ls([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=em(e),[s,r]=tm(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new kd(i,r,n);return s.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=em(e),[s,r]=tm(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class ji extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ml{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,Oo.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Ml(Te.min(),r,new at(Ve),fs(),Oe())}}class Oo{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Oo(s,n,Oe(),Oe(),Oe())}}class ba{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class d_{constructor(e,n){this.targetId=e,this.Ce=n}}class h_{constructor(e,n,s=kt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class nm{constructor(){this.ve=0,this.Fe=sm(),this.Me=kt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Oe(),n=Oe(),s=Oe();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:we(38017,{changeType:i})}}),new Oo(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=sm()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,He(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class LR{constructor(e){this.Ge=e,this.ze=new Map,this.je=fs(),this.Je=ia(),this.He=ia(),this.Ye=new at(Ve)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:we(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(yu(i))if(s===0){const o=new ge(i.path);this.et(n,o,Ot.newNoDocument(o,Te.min()))}else He(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,l;try{o=Hs(s).toUint8Array()}catch(c){if(c instanceof M0)return ri("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new kd(o,r,i)}catch(c){return ri(c instanceof ji?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&yu(l.target)){const c=new ge(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Ot.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let s=Oe();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const r=new Ml(e,n,this.Ye,this.je,s);return this.je=fs(),this.Je=ia(),this.He=ia(),this.Ye=new at(Ve),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new nm,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Tt(Ve),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Tt(Ve),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new nm),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ia(){return new at(ge.comparator)}function sm(){return new at(ge.comparator)}const FR={asc:"ASCENDING",desc:"DESCENDING"},UR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$R={and:"AND",or:"OR"};class BR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function wu(t,e){return t.useProto3Json||kl(e)?e:{value:e}}function Ka(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function f_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function jR(t,e){return Ka(t,e.toTimestamp())}function Fn(t){return He(!!t,49232),Te.fromTimestamp(function(n){const s=js(n);return new st(s.seconds,s.nanos)}(t))}function Pd(t,e){return bu(t,e).canonicalString()}function bu(t,e){const n=function(r){return new Ze(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function p_(t){const e=Ze.fromString(t);return He(v_(e),10190,{key:e.toString()}),e}function Eu(t,e){return Pd(t.databaseId,e.path)}function Mc(t,e){const n=p_(e);if(n.get(1)!==t.databaseId.projectId)throw new de(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new de(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ge(g_(n))}function m_(t,e){return Pd(t.databaseId,e)}function HR(t){const e=p_(t);return e.length===4?Ze.emptyPath():g_(e)}function Tu(t){return new Ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function g_(t){return He(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function rm(t,e,n){return{name:Eu(t,e),fields:n.value.mapValue.fields}}function qR(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:we(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(He(h===void 0||typeof h=="string",58123),kt.fromBase64String(h||"")):(He(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),kt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const h=u.code===void 0?Q.UNKNOWN:u_(u.code);return new de(h,u.message||"")}(o);n=new h_(s,r,i,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Mc(t,s.document.name),i=Fn(s.document.updateTime),o=s.document.createTime?Fn(s.document.createTime):Te.min(),l=new Yt({mapValue:{fields:s.document.fields}}),c=Ot.newFoundDocument(r,i,o,l),u=s.targetIds||[],h=s.removedTargetIds||[];n=new ba(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Mc(t,s.document),i=s.readTime?Fn(s.readTime):Te.min(),o=Ot.newNoDocument(r,i),l=s.removedTargetIds||[];n=new ba([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Mc(t,s.document),i=s.removedTargetIds||[];n=new ba([],i,r,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new NR(r,i),l=s.targetId;n=new d_(l,o)}}return n}function zR(t,e){let n;if(e instanceof Vo)n={update:rm(t,e.key,e.value)};else if(e instanceof Sd)n={delete:Eu(t,e.key)};else if(e instanceof Qs)n={update:rm(t,e.key,e.data),updateMask:eS(e.fieldMask)};else{if(!(e instanceof kR))return we(16599,{Vt:e.type});n={verify:Eu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const l=o.transform;if(l instanceof Wa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof wo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof bo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Eo)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw we(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:jR(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:we(27497)}(t,e.precondition)),n}function GR(t,e){return t&&t.length>0?(He(e!==void 0,14353),t.map(n=>function(r,i){let o=r.updateTime?Fn(r.updateTime):Fn(i);return o.isEqual(Te.min())&&(o=Fn(i)),new RR(o,r.transformResults||[])}(n,e))):[]}function WR(t,e){return{documents:[m_(t,e.path)]}}function KR(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=m_(t,r);const i=function(u){if(u.length!==0)return __(Rn.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:$r(m.field),direction:XR(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=wu(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:r}}function QR(t){let e=HR(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){He(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(p){const m=y_(p);return m instanceof Rn&&G0(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(D){return new Ga(Br(D.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,kl(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(p){const m=!!p.before,y=p.values||[];return new za(y,m)}(n.startAt));let u=null;return n.endAt&&(u=function(p){const m=!p.before,y=p.values||[];return new za(y,m)}(n.endAt)),pR(e,r,o,i,l,"F",c,u)}function YR(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function y_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Br(n.unaryFilter.field);return _t.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=Br(n.unaryFilter.field);return _t.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Br(n.unaryFilter.field);return _t.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Br(n.unaryFilter.field);return _t.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}}(t):t.fieldFilter!==void 0?function(n){return _t.create(Br(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Rn.create(n.compositeFilter.filters.map(s=>y_(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return we(1026)}}(n.compositeFilter.op))}(t):we(30097,{filter:t})}function XR(t){return FR[t]}function JR(t){return UR[t]}function ZR(t){return $R[t]}function $r(t){return{fieldPath:t.canonicalString()}}function Br(t){return St.fromServerFormat(t.fieldPath)}function __(t){return t instanceof _t?function(n){if(n.op==="=="){if(zp(n.value))return{unaryFilter:{field:$r(n.field),op:"IS_NAN"}};if(qp(n.value))return{unaryFilter:{field:$r(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(zp(n.value))return{unaryFilter:{field:$r(n.field),op:"IS_NOT_NAN"}};if(qp(n.value))return{unaryFilter:{field:$r(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$r(n.field),op:JR(n.op),value:n.value}}}(t):t instanceof Rn?function(n){const s=n.getFilters().map(r=>__(r));return s.length===1?s[0]:{compositeFilter:{op:ZR(n.op),filters:s}}}(t):we(54877,{filter:t})}function eS(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function v_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class Ns{constructor(e,n,s,r,i=Te.min(),o=Te.min(),l=kt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Ns(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class tS{constructor(e){this.yt=e}}function nS(t){const e=QR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vu(e,e.limit,"L"):e}class sS{constructor(){this.Cn=new rS}addToCollectionParentIndex(e,n){return this.Cn.add(n),X.resolve()}getCollectionParents(e,n){return X.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return X.resolve()}deleteFieldIndex(e,n){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,n){return X.resolve()}getDocumentsMatchingTarget(e,n){return X.resolve(null)}getIndexType(e,n){return X.resolve(0)}getFieldIndexes(e,n){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,n){return X.resolve(Bs.min())}getMinOffsetFromCollectionGroup(e,n){return X.resolve(Bs.min())}updateCollectionGroup(e,n,s){return X.resolve()}updateIndexEntries(e,n){return X.resolve()}}class rS{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new Tt(Ze.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Tt(Ze.comparator)).toArray()}}const im={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},w_=41943040;class Qt{static withCacheSize(e){return new Qt(e,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Qt.DEFAULT_COLLECTION_PERCENTILE=10,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qt.DEFAULT=new Qt(w_,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qt.DISABLED=new Qt(-1,0,0);class li{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new li(0)}static cr(){return new li(-1)}}const om="LruGarbageCollector",iS=1048576;function am([t,e],[n,s]){const r=Ve(t,n);return r===0?Ve(e,s):r}class oS{constructor(e){this.Ir=e,this.buffer=new Tt(am),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();am(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class aS{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(om,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){mi(n)?he(om,"Ignoring IndexedDB error during garbage collection: ",n):await pi(n)}await this.Vr(3e5)})}}class lS{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return X.resolve(Cl.ce);const s=new oS(n);return this.mr.forEachTarget(e,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(im)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),im):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,o=Date.now(),this.nthSequenceNumber(e,r))).next(p=>(s=p,l=Date.now(),this.removeTargets(e,s,n))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,s))).next(p=>(u=Date.now(),Fr()<=Ne.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:p})))}}function cS(t,e){return new lS(t,e)}class uS{constructor(){this.changes=new Rr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ot.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?X.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class dS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class hS{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&so(s.mutation,r,sn.empty(),st.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Oe()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Oe()){const r=fr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=Bi();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=fr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Oe()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,s,r){let i=fs();const o=no(),l=function(){return no()}();return n.forEach((c,u)=>{const h=s.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof Qs)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),so(h.mutation,u,h.mutation.getFieldMask(),st.now())):o.set(u.key,sn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>l.set(u,new dS(h,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const s=no();let r=new at((o,l)=>o-l),i=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=s.get(c)||sn.empty();h=l.applyToLocalView(u,h),s.set(c,h);const p=(r.get(l.batchId)||Oe()).add(c);r=r.insert(l.batchId,p)})}).next(()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,p=t_();h.forEach(m=>{if(!i.has(m)){const y=l_(n.get(m),s.get(m));y!==null&&p.set(m,y),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return X.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(o){return ge.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Y0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):X.resolve(fr());let l=go,c=i;return o.next(u=>X.forEach(u,(h,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(h)?X.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,Oe())).next(h=>({batchId:l,changes:e_(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ge(n)).next(s=>{let r=Bi();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=Bi();return this.indexManager.getCollectionParents(e,i).next(l=>X.forEach(l,c=>{const u=function(p,m){return new No(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,r).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Ot.newInvalidDocument(h)))});let l=Bi();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&so(h.mutation,u,sn.empty(),st.now()),Nl(n,u)&&(l=l.insert(c,u))}),l})}}class fS{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return X.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Fn(r.createTime)}}(n)),X.resolve()}getNamedQuery(e,n){return X.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:nS(r.bundledQuery),readTime:Fn(r.readTime)}}(n)),X.resolve()}}class pS{constructor(){this.overlays=new at(ge.comparator),this.qr=new Map}getOverlay(e,n){return X.resolve(this.overlays.get(n))}getOverlays(e,n){const s=fr();return X.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),X.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),X.resolve()}getOverlaysForCollection(e,n,s){const r=fr(),i=n.length+1,o=new ge(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return X.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new at((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let h=i.get(u.largestBatchId);h===null&&(h=fr(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=fr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=r)););return X.resolve(l)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new DR(n,s));let i=this.qr.get(n);i===void 0&&(i=Oe(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}class mS{constructor(){this.sessionToken=kt.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,X.resolve()}}class Dd{constructor(){this.Qr=new Tt(xt.$r),this.Ur=new Tt(xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new xt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new xt(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new ge(new Ze([])),s=new xt(n,e),r=new xt(n,e+1),i=[];return this.Ur.forEachInRange([s,r],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ge(new Ze([])),s=new xt(n,e),r=new xt(n,e+1);let i=Oe();return this.Ur.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new xt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class xt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ge.comparator(e.key,n.key)||Ve(e.Yr,n.Yr)}static Kr(e,n){return Ve(e.Yr,n.Yr)||ge.comparator(e.key,n.key)}}class gS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Tt(xt.$r)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new PR(i,n,s,r);this.mutationQueue.push(o);for(const l of r)this.Zr=this.Zr.add(new xt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return X.resolve(o)}lookupMutationBatch(e,n){return X.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return X.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?bd:this.tr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new xt(n,0),r=new xt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],o=>{const l=this.Xr(o.Yr);i.push(l)}),X.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Tt(Ve);return n.forEach(r=>{const i=new xt(r,0),o=new xt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{s=s.add(l.Yr)})}),X.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;ge.isDocumentKey(i)||(i=i.child(""));const o=new xt(new ge(i),0);let l=new Tt(Ve);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(l=l.add(c.Yr)),!0)},o),X.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(s=>{const r=this.Xr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){He(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return X.forEach(n.mutations,r=>{const i=new xt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new xt(n,0),r=this.Zr.firstAfterOrEqual(s);return X.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class yS{constructor(e){this.ri=e,this.docs=function(){return new at(ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return X.resolve(s?s.document.mutableCopy():Ot.newInvalidDocument(n))}getEntries(e,n){let s=fs();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Ot.newInvalidDocument(r))}),X.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=fs();const o=n.path,l=new ge(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||G2(z2(h),s)<=0||(r.has(h.key)||Nl(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return X.resolve(i)}getAllFromCollectionGroup(e,n,s,r){we(9500)}ii(e,n){return X.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new _S(this)}getSize(e){return X.resolve(this.size)}}class _S extends uS{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)}),X.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class vS{constructor(e){this.persistence=e,this.si=new Rr(n=>Id(n),xd),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.oi=0,this._i=new Dd,this.targetCount=0,this.ai=li.ur()}forEachTarget(e,n){return this.si.forEach((s,r)=>n(r)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),X.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new li(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,X.resolve()}updateTargetData(e,n){return this.Pr(n),X.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),X.waitFor(i).next(()=>r)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return X.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),X.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),X.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),X.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return X.resolve(s)}containsKey(e,n){return X.resolve(this._i.containsKey(n))}}class b_{constructor(e,n){this.ui={},this.overlays={},this.ci=new Cl(0),this.li=!1,this.li=!0,this.hi=new mS,this.referenceDelegate=e(this),this.Pi=new vS(this),this.indexManager=new sS,this.remoteDocumentCache=function(r){return new yS(r)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new tS(n),this.Ii=new fS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new pS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new gS(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){he("MemoryPersistence","Starting transaction:",e);const r=new wS(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(e,n){return X.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class wS extends K2{constructor(e){super(),this.currentSequenceNumber=e}}class Nd{constructor(e){this.persistence=e,this.Ri=new Dd,this.Vi=null}static mi(e){return new Nd(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),X.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),X.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),X.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.fi,s=>{const r=ge.fromPath(s);return this.gi(e,r).next(i=>{i||n.removeEntry(r,Te.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return X.or([()=>X.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Qa{constructor(e,n){this.persistence=e,this.pi=new Rr(s=>X2(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=cS(this,n)}static mi(e,n){return new Qa(e,n)}Ei(){}di(e){return X.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return X.forEach(this.pi,(s,r)=>this.br(e,s,r).next(i=>i?X.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,o=>this.br(e,o,n).next(l=>{l||(s++,i.removeEntry(o,Te.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),X.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),X.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),X.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=_a(e.data.value)),n}br(e,n,s){return X.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return X.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Vd{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=Oe(),r=Oe();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Vd(e,n.fromCache,s,r)}}class bS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class ES{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return zE()?8:Q2(Ut())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new bS;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,s,r){return s.documentReadCount<this.fs?(Fr()<=Ne.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Ur(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),X.resolve()):(Fr()<=Ne.DEBUG&&he("QueryEngine","Query:",Ur(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(Fr()<=Ne.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Ur(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ln(n))):X.resolve())}ys(e,n){if(Qp(n))return X.resolve(null);let s=Ln(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=vu(n,null,"F"),s=Ln(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=Oe(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,s).next(c=>{const u=this.Ds(n,l);return this.Cs(n,u,o,c.readTime)?this.ys(e,vu(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,s,r){return Qp(n)||r.isEqual(Te.min())?X.resolve(null):this.ps.getDocuments(e,s).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?X.resolve(null):(Fr()<=Ne.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ur(n)),this.vs(e,o,n,q2(r,go)).next(l=>l))})}Ds(e,n){let s=new Tt(J0(e));return n.forEach((r,i)=>{Nl(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return Fr()<=Ne.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Ur(n)),this.ps.getDocumentsMatchingQuery(e,n,Bs.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}const Od="LocalStore",TS=3e8;class IS{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new at(Ve),this.xs=new Rr(i=>Id(i),xd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function xS(t,e,n,s){return new IS(t,e,n,s)}async function E_(t,e){const n=xe(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],l=[];let c=Oe();for(const u of r){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(s,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function AS(t,e){const n=xe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const p=u.batch,m=p.keys();let y=X.resolve();return m.forEach(D=>{y=y.next(()=>h.getEntry(c,D)).next(N=>{const M=u.docVersions.get(D);He(M!==null,48541),N.version.compareTo(M)<0&&(p.applyToRemoteDocument(N,u),N.isValidDocument()&&(N.setReadTime(u.commitVersion),h.addEntry(N)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let c=Oe();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function T_(t){const e=xe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function RS(t,e){const n=xe(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];e.targetChanges.forEach((h,p)=>{const m=r.get(p);if(!m)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,p)));let y=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(kt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,s)),r=r.insert(p,y),function(N,M,H){return N.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=TS?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(m,y,h)&&l.push(n.Pi.updateTargetData(i,y))});let c=fs(),u=Oe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(SS(i,o,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!s.isEqual(Te.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));l.push(h)}return X.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ms=r,i))}function SS(t,e,n){let s=Oe(),r=Oe();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=fs();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(Te.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):he(Od,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:r}})}function CS(t,e){const n=xe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=bd),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function kS(t,e){const n=xe(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Pi.getTargetData(s,e).next(i=>i?(r=i,X.resolve(r)):n.Pi.allocateTargetId(s).next(o=>(r=new Ns(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function Iu(t,e,n){const s=xe(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!mi(o))throw o;he(Od,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function lm(t,e,n){const s=xe(t);let r=Te.min(),i=Oe();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const p=xe(c),m=p.xs.get(h);return m!==void 0?X.resolve(p.Ms.get(m)):p.Pi.getTargetData(u,h)}(s,o,Ln(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:Te.min(),n?i:Oe())).next(l=>(PS(s,gR(e),l),{documents:l,Qs:i})))}function PS(t,e,n){let s=t.Os.get(e)||Te.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Os.set(e,s)}class cm{constructor(){this.activeTargetIds=ER()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class DS{constructor(){this.Mo=new cm,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new cm,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class NS{Oo(e){}shutdown(){}}const um="ConnectivityMonitor";class dm{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(um,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(um,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let oa=null;function xu(){return oa===null?oa=function(){return 268435456+Math.round(2147483648*Math.random())}():oa++,"0x"+oa.toString(16)}const Lc="RestConnection",VS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class OS{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===Ha?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=xu(),l=this.zo(e,n.toUriEncodedString());he(Lc,`Sending RPC '${e}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,i);const{host:u}=new URL(l),h=Ir(u);return this.Jo(e,l,c,s,h).then(p=>(he(Lc,`Received RPC '${e}' ${o}: `,p),p),p=>{throw ri(Lc,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",s),p})}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}zo(e,n){const s=VS[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class MS{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Dt="WebChannelConnection";class LS extends OS{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=xu();return new Promise((l,c)=>{const u=new x0;u.setWithCredentials(!0),u.listenOnce(A0.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ya.NO_ERROR:const p=u.getResponseJson();he(Dt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case ya.TIMEOUT:he(Dt,`RPC '${e}' ${o} timed out`),c(new de(Q.DEADLINE_EXCEEDED,"Request time out"));break;case ya.HTTP_ERROR:const m=u.getStatus();if(he(Dt,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const D=y?.error;if(D&&D.status&&D.message){const N=function(H){const k=H.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(k)>=0?k:Q.UNKNOWN}(D.status);c(new de(N,D.message))}else c(new de(Q.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new de(Q.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{he(Dt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(r);he(Dt,`RPC '${e}' ${o} sending request:`,r),u.send(n,"POST",h,s,15)})}T_(e,n,s){const r=xu(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=C0(),l=S0(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const h=i.join("");he(Dt,`Creating RPC '${e}' stream ${r}: ${h}`,c);const p=o.createWebChannel(h,c);this.I_(p);let m=!1,y=!1;const D=new MS({Yo:M=>{y?he(Dt,`Not sending because RPC '${e}' stream ${r} is closed:`,M):(m||(he(Dt,`Opening RPC '${e}' stream ${r} transport.`),p.open(),m=!0),he(Dt,`RPC '${e}' stream ${r} sending:`,M),p.send(M))},Zo:()=>p.close()}),N=(M,H,k)=>{M.listen(H,C=>{try{k(C)}catch(P){setTimeout(()=>{throw P},0)}})};return N(p,$i.EventType.OPEN,()=>{y||(he(Dt,`RPC '${e}' stream ${r} transport opened.`),D.o_())}),N(p,$i.EventType.CLOSE,()=>{y||(y=!0,he(Dt,`RPC '${e}' stream ${r} transport closed`),D.a_(),this.E_(p))}),N(p,$i.EventType.ERROR,M=>{y||(y=!0,ri(Dt,`RPC '${e}' stream ${r} transport errored. Name:`,M.name,"Message:",M.message),D.a_(new de(Q.UNAVAILABLE,"The operation could not be completed")))}),N(p,$i.EventType.MESSAGE,M=>{if(!y){const H=M.data[0];He(!!H,16349);const k=H,C=k?.error||k[0]?.error;if(C){he(Dt,`RPC '${e}' stream ${r} received error:`,C);const P=C.status;let O=function(w){const b=yt[w];if(b!==void 0)return u_(b)}(P),B=C.message;O===void 0&&(O=Q.INTERNAL,B="Unknown error status: "+P+" with message "+C.message),y=!0,D.a_(new de(O,B)),p.close()}else he(Dt,`RPC '${e}' stream ${r} received:`,H),D.u_(H)}}),N(l,R0.STAT_EVENT,M=>{M.stat===hu.PROXY?he(Dt,`RPC '${e}' stream ${r} detected buffering proxy`):M.stat===hu.NOPROXY&&he(Dt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{D.__()},0),D}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Fc(){return typeof document<"u"?document:null}function Ll(t){return new BR(t,!0)}class I_{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&he("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const hm="PersistentStream";class x_{constructor(e,n,s,r,i,o,l,c){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new I_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(hs(n.toString()),hs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===n&&this.G_(s,r)},s=>{e(()=>{const r=new de(Q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return he(hm,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(he(hm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FS extends x_{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=qR(this.serializer,e),s=function(i){if(!("targetChange"in i))return Te.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Te.min():o.readTime?Fn(o.readTime):Te.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Tu(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=yu(c)?{documents:WR(i,c)}:{query:KR(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=f_(i,o.resumeToken);const u=wu(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Te.min())>0){l.readTime=Ka(i,o.snapshotVersion.toTimestamp());const u=wu(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const s=YR(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Tu(this.serializer),n.removeTarget=e,this.q_(n)}}class US extends x_{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return He(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){He(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=GR(e.writeResults,e.commitTime),s=Fn(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Tu(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>zR(this.serializer,s))};this.q_(n)}}class $S{}class BS extends $S{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new de(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,bu(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new de(Q.UNKNOWN,i.toString())})}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,bu(n,s),r,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(Q.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class jS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(hs(n),this.aa=!1):he("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Er="RemoteStore";class HS{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{Sr(this)&&(he(Er,"Restarting streams for network reachability change."),await async function(c){const u=xe(c);u.Ea.add(4),await Mo(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Fl(u)}(this))})}),this.Ra=new jS(s,r)}}async function Fl(t){if(Sr(t))for(const e of t.da)await e(!0)}async function Mo(t){for(const e of t.da)await e(!1)}function A_(t,e){const n=xe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Ud(n)?Fd(n):gi(n).O_()&&Ld(n,e))}function Md(t,e){const n=xe(t),s=gi(n);n.Ia.delete(e),s.O_()&&R_(n,e),n.Ia.size===0&&(s.O_()?s.L_():Sr(n)&&n.Ra.set("Unknown"))}function Ld(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}gi(t).Y_(e)}function R_(t,e){t.Va.Ue(e),gi(t).Z_(e)}function Fd(t){t.Va=new LR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),gi(t).start(),t.Ra.ua()}function Ud(t){return Sr(t)&&!gi(t).x_()&&t.Ia.size>0}function Sr(t){return xe(t).Ea.size===0}function S_(t){t.Va=void 0}async function qS(t){t.Ra.set("Online")}async function zS(t){t.Ia.forEach((e,n)=>{Ld(t,e)})}async function GS(t,e){S_(t),Ud(t)?(t.Ra.ha(e),Fd(t)):t.Ra.set("Unknown")}async function WS(t,e,n){if(t.Ra.set("Online"),e instanceof h_&&e.state===2&&e.cause)try{await async function(r,i){const o=i.cause;for(const l of i.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.Ia.delete(l),r.Va.removeTarget(l))}(t,e)}catch(s){he(Er,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Ya(t,s)}else if(e instanceof ba?t.Va.Ze(e):e instanceof d_?t.Va.st(e):t.Va.tt(e),!n.isEqual(Te.min()))try{const s=await T_(t.localStore);n.compareTo(s)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(kt.EMPTY_BYTE_STRING,h.snapshotVersion)),R_(i,c);const p=new Ns(h.target,c,u,h.sequenceNumber);Ld(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(s){he(Er,"Failed to raise snapshot:",s),await Ya(t,s)}}async function Ya(t,e,n){if(!mi(e))throw e;t.Ea.add(1),await Mo(t),t.Ra.set("Offline"),n||(n=()=>T_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{he(Er,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Fl(t)})}function C_(t,e){return e().catch(n=>Ya(t,n,e))}async function Ul(t){const e=xe(t),n=zs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bd;for(;KS(e);)try{const r=await CS(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,QS(e,r)}catch(r){await Ya(e,r)}k_(e)&&P_(e)}function KS(t){return Sr(t)&&t.Ta.length<10}function QS(t,e){t.Ta.push(e);const n=zs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function k_(t){return Sr(t)&&!zs(t).x_()&&t.Ta.length>0}function P_(t){zs(t).start()}async function YS(t){zs(t).ra()}async function XS(t){const e=zs(t);for(const n of t.Ta)e.ea(n.mutations)}async function JS(t,e,n){const s=t.Ta.shift(),r=Cd.from(s,e,n);await C_(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Ul(t)}async function ZS(t,e){e&&zs(t).X_&&await async function(s,r){if(function(o){return VR(o)&&o!==Q.ABORTED}(r.code)){const i=s.Ta.shift();zs(s).B_(),await C_(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Ul(s)}}(t,e),k_(t)&&P_(t)}async function fm(t,e){const n=xe(t);n.asyncQueue.verifyOperationInProgress(),he(Er,"RemoteStore received new credentials");const s=Sr(n);n.Ea.add(3),await Mo(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Fl(n)}async function eC(t,e){const n=xe(t);e?(n.Ea.delete(2),await Fl(n)):e||(n.Ea.add(2),await Mo(n),n.Ra.set("Unknown"))}function gi(t){return t.ma||(t.ma=function(n,s,r){const i=xe(n);return i.sa(),new FS(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:qS.bind(null,t),t_:zS.bind(null,t),r_:GS.bind(null,t),H_:WS.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Ud(t)?Fd(t):t.Ra.set("Unknown")):(await t.ma.stop(),S_(t))})),t.ma}function zs(t){return t.fa||(t.fa=function(n,s,r){const i=xe(n);return i.sa(),new US(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:YS.bind(null,t),r_:ZS.bind(null,t),ta:XS.bind(null,t),na:JS.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Ul(t)):(await t.fa.stop(),t.Ta.length>0&&(he(Er,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}class $d{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new os,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,l=new $d(e,n,o,r,i);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bd(t,e){if(hs("AsyncQueue",`${e}: ${t}`),mi(t))return new de(Q.UNAVAILABLE,`${e}: ${t}`);throw t}class Jr{static emptySet(e){return new Jr(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ge.comparator(n.key,s.key):(n,s)=>ge.comparator(n.key,s.key),this.keyedMap=Bi(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Jr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Jr;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class pm{constructor(){this.ga=new at(ge.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class ci{constructor(e,n,s,r,i,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new ci(e,n,Jr.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}class tC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class nC{constructor(){this.queries=mm(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=xe(n),i=r.queries;r.queries=mm(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(s)})})(this,new de(Q.ABORTED,"Firestore shutting down"))}}function mm(){return new Rr(t=>X0(t),Dl)}async function D_(t,e){const n=xe(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new tC,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const l=Bd(o,`Initialization of query '${Ur(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&jd(n)}async function N_(t,e){const n=xe(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function sC(t,e){const n=xe(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(r)&&(s=!0);o.wa=r}}s&&jd(n)}function rC(t,e,n){const s=xe(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function jd(t){t.Ca.forEach(e=>{e.next()})}var Au,gm;(gm=Au||(Au={})).Ma="default",gm.Cache="cache";class V_{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new ci(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ci.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Au.Cache}}class O_{constructor(e){this.key=e}}class M_{constructor(e){this.key=e}}class iC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Oe(),this.mutatedKeys=Oe(),this.eu=J0(e),this.tu=new Jr(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new pm,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,p)=>{const m=r.get(h),y=Nl(this.query,p)?p:null,D=!!m&&this.mutatedKeys.has(m.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let M=!1;m&&y?m.data.isEqual(y.data)?D!==N&&(s.track({type:3,doc:y}),M=!0):this.su(m,y)||(s.track({type:2,doc:y}),M=!0,(c&&this.eu(y,c)>0||u&&this.eu(y,u)<0)&&(l=!0)):!m&&y?(s.track({type:0,doc:y}),M=!0):m&&!y&&(s.track({type:1,doc:m}),M=!0,(c||u)&&(l=!0)),M&&(y?(o=o.add(y),i=N?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,p)=>function(y,D){const N=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:M})}};return N(y)-N(D)}(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(s),r=r??!1;const l=n&&!r?this._u():[],c=this.Xa.size===0&&this.current&&!r?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new ci(this.query,e.tu,i,o,e.mutatedKeys,c===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new pm,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Oe(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new M_(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new O_(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=Oe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ci.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Hd="SyncEngine";class oC{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class aC{constructor(e){this.key=e,this.hu=!1}}class lC{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Rr(l=>X0(l),Dl),this.Iu=new Map,this.Eu=new Set,this.du=new at(ge.comparator),this.Au=new Map,this.Ru=new Dd,this.Vu={},this.mu=new Map,this.fu=li.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function cC(t,e,n=!0){const s=j_(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await L_(s,e,n,!0),r}async function uC(t,e){const n=j_(t);await L_(n,e,!0,!1)}async function L_(t,e,n,s){const r=await kS(t.localStore,Ln(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return s&&(l=await dC(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&A_(t.remoteStore,r),l}async function dC(t,e,n,s,r){t.pu=(p,m,y)=>async function(N,M,H,k){let C=M.view.ru(H);C.Cs&&(C=await lm(N.localStore,M.query,!1).then(({documents:v})=>M.view.ru(v,C)));const P=k&&k.targetChanges.get(M.targetId),O=k&&k.targetMismatches.get(M.targetId)!=null,B=M.view.applyChanges(C,N.isPrimaryClient,P,O);return _m(N,M.targetId,B.au),B.snapshot}(t,p,m,y);const i=await lm(t.localStore,e,!0),o=new iC(e,i.Qs),l=o.ru(i.documents),c=Oo.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=o.applyChanges(l,t.isPrimaryClient,c);_m(t,n,u.au);const h=new oC(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function hC(t,e,n){const s=xe(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(o=>!Dl(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Iu(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&Md(s.remoteStore,r.targetId),Ru(s,r.targetId)}).catch(pi)):(Ru(s,r.targetId),await Iu(s.localStore,r.targetId,!0))}async function fC(t,e){const n=xe(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Md(n.remoteStore,s.targetId))}async function pC(t,e,n){const s=bC(t);try{const r=await function(o,l){const c=xe(o),u=st.now(),h=l.reduce((y,D)=>y.add(D.key),Oe());let p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=fs(),N=Oe();return c.Ns.getEntries(y,h).next(M=>{D=M,D.forEach((H,k)=>{k.isValidDocument()||(N=N.add(H))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,D)).next(M=>{p=M;const H=[];for(const k of l){const C=CR(k,p.get(k.key).overlayedDocument);C!=null&&H.push(new Qs(k.key,C,H0(C.value.mapValue),dn.exists(!0)))}return c.mutationQueue.addMutationBatch(y,u,H,l)}).next(M=>{m=M;const H=M.applyToLocalDocumentSet(p,N);return c.documentOverlayCache.saveOverlays(y,M.batchId,H)})}).then(()=>({batchId:m.batchId,changes:e_(p)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new at(Ve)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(s,r.batchId,n),await Lo(s,r.changes),await Ul(s.remoteStore)}catch(r){const i=Bd(r,"Failed to persist write");n.reject(i)}}async function F_(t,e){const n=xe(t);try{const s=await RS(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Au.get(i);o&&(He(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?He(o.hu,14607):r.removedDocuments.size>0&&(He(o.hu,42227),o.hu=!1))}),await Lo(n,s,e)}catch(s){await pi(s)}}function ym(t,e,n){const s=xe(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&r.push(l.snapshot)}),function(o,l){const c=xe(o);c.onlineState=l;let u=!1;c.queries.forEach((h,p)=>{for(const m of p.Sa)m.va(l)&&(u=!0)}),u&&jd(c)}(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function mC(t,e,n){const s=xe(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new at(ge.comparator);o=o.insert(i,Ot.newNoDocument(i,Te.min()));const l=Oe().add(i),c=new Ml(Te.min(),new Map,new at(Ve),o,l);await F_(s,c),s.du=s.du.remove(i),s.Au.delete(e),qd(s)}else await Iu(s.localStore,e,!1).then(()=>Ru(s,e,n)).catch(pi)}async function gC(t,e){const n=xe(t),s=e.batch.batchId;try{const r=await AS(n.localStore,e);$_(n,s,null),U_(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Lo(n,r)}catch(r){await pi(r)}}async function yC(t,e,n){const s=xe(t);try{const r=await function(o,l){const c=xe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(p=>(He(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(u,p))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(s.localStore,e);$_(s,e,n),U_(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Lo(s,r)}catch(r){await pi(r)}}function U_(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function $_(t,e,n){const s=xe(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function Ru(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||B_(t,s)})}function B_(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Md(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),qd(t))}function _m(t,e,n){for(const s of n)s instanceof O_?(t.Ru.addReference(s.key,e),_C(t,s)):s instanceof M_?(he(Hd,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||B_(t,s.key)):we(19791,{wu:s})}function _C(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(he(Hd,"New document in limbo: "+n),t.Eu.add(s),qd(t))}function qd(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ge(Ze.fromString(e)),s=t.fu.next();t.Au.set(s,new aC(n)),t.du=t.du.insert(n,s),A_(t.remoteStore,new Ns(Ln(Ad(n.path)),s,"TargetPurposeLimboResolution",Cl.ce))}}async function Lo(t,e,n){const s=xe(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((l,c)=>{o.push(s.pu(c,e,n).then(u=>{if((u||n)&&s.isPrimaryClient){const h=u?!u.fromCache:n?.targetChanges.get(c.targetId)?.current;s.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){r.push(u);const h=Vd.As(c.targetId,u);i.push(h)}}))}),await Promise.all(o),s.Pu.H_(r),await async function(c,u){const h=xe(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>X.forEach(u,m=>X.forEach(m.Es,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>X.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!mi(p))throw p;he(Od,"Failed to update sequence numbers: "+p)}for(const p of u){const m=p.targetId;if(!p.fromCache){const y=h.Ms.get(m),D=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(D);h.Ms=h.Ms.insert(m,N)}}}(s.localStore,i))}async function vC(t,e){const n=xe(t);if(!n.currentUser.isEqual(e)){he(Hd,"User change. New user:",e.toKey());const s=await E_(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new de(Q.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Lo(n,s.Ls)}}function wC(t,e){const n=xe(t),s=n.Au.get(e);if(s&&s.hu)return Oe().add(s.key);{let r=Oe();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const l=n.Tu.get(o);r=r.unionWith(l.view.nu)}return r}}function j_(t){const e=xe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=F_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mC.bind(null,e),e.Pu.H_=sC.bind(null,e.eventManager),e.Pu.yu=rC.bind(null,e.eventManager),e}function bC(t){const e=xe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yC.bind(null,e),e}class Xa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ll(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return xS(this.persistence,new ES,e.initialUser,this.serializer)}Cu(e){return new b_(Nd.mi,this.serializer)}Du(e){return new DS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xa.provider={build:()=>new Xa};class EC extends Xa{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){He(this.persistence.referenceDelegate instanceof Qa,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new aS(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new b_(s=>Qa.mi(s,n),this.serializer)}}class Su{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>ym(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=vC.bind(null,this.syncEngine),await eC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new nC}()}createDatastore(e){const n=Ll(e.databaseInfo.databaseId),s=function(i){return new LS(i)}(e.databaseInfo);return function(i,o,l,c){return new BS(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,o,l){return new HS(s,r,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>ym(this.syncEngine,n,0),function(){return dm.v()?new dm:new NS}())}createSyncEngine(e,n){return function(r,i,o,l,c,u,h){const p=new lC(r,i,o,l,c,u);return h&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const s=xe(n);he(Er,"RemoteStore shutting down."),s.Ea.add(5),await Mo(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Su.provider={build:()=>new Su};class H_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):hs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}const Gs="FirestoreClient";class TC{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Nt.UNAUTHENTICATED,this.clientId=wd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{he(Gs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(he(Gs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new os;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Bd(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Uc(t,e){t.asyncQueue.verifyOperationInProgress(),he(Gs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await E_(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function vm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await IC(t);he(Gs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>fm(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>fm(e.remoteStore,r)),t._onlineComponents=e}async function IC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){he(Gs,"Using user provided OfflineComponentProvider");try{await Uc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===Q.FAILED_PRECONDITION||r.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;ri("Error using user provided cache. Falling back to memory cache: "+n),await Uc(t,new Xa)}}else he(Gs,"Using default OfflineComponentProvider"),await Uc(t,new EC(void 0));return t._offlineComponents}async function q_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(he(Gs,"Using user provided OnlineComponentProvider"),await vm(t,t._uninitializedComponentsProvider._online)):(he(Gs,"Using default OnlineComponentProvider"),await vm(t,new Su))),t._onlineComponents}function xC(t){return q_(t).then(e=>e.syncEngine)}async function z_(t){const e=await q_(t),n=e.eventManager;return n.onListen=cC.bind(null,e.syncEngine),n.onUnlisten=hC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=uC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=fC.bind(null,e.syncEngine),n}function AC(t,e,n={}){const s=new os;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new H_({next:m=>{h.Nu(),o.enqueueAndForget(()=>N_(i,p));const y=m.docs.has(l);!y&&m.fromCache?u.reject(new de(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?u.reject(new de(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new V_(Ad(l.path),h,{includeMetadataChanges:!0,qa:!0});return D_(i,p)}(await z_(t),t.asyncQueue,e,n,s)),s.promise}function RC(t,e,n={}){const s=new os;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new H_({next:m=>{h.Nu(),o.enqueueAndForget(()=>N_(i,p)),m.fromCache&&c.source==="server"?u.reject(new de(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new V_(l,h,{includeMetadataChanges:!0,qa:!0});return D_(i,p)}(await z_(t),t.asyncQueue,e,n,s)),s.promise}function G_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const wm=new Map;const W_="firestore.googleapis.com",bm=!0;class Em{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=W_,this.ssl=bm}else this.host=e.host,this.ssl=e.ssl??bm;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=w_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iS)throw new de(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}H2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=G_(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new de(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new de(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new de(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $l{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Em({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Em(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new N2;switch(s.type){case"firstParty":return new L2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new de(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=wm.get(n);s&&(he("ComponentProvider","Removing Datastore"),wm.delete(n),s.terminate())}(this),Promise.resolve()}}function SC(t,e,n,s={}){t=An(t,$l);const r=Ir(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;r&&(ed(`https://${l}`),td("Firestore",!0)),i.host!==W_&&i.host!==l&&ri("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:r,emulatorOptions:s};if(!$s(c,o)&&(t._setSettings(c),s.mockUserToken)){let u,h;if(typeof s.mockUserToken=="string")u=s.mockUserToken,h=Nt.MOCK_USER;else{u=gy(s.mockUserToken,t._app?.options.projectId);const p=s.mockUserToken.sub||s.mockUserToken.user_id;if(!p)throw new de(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Nt(p)}t._authCredentials=new V2(new P0(u,h))}}class yi{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new yi(this.firestore,e,this._query)}}class mt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mt(this.firestore,e,this._key)}toJSON(){return{type:mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Do(n,mt._jsonSchema))return new mt(e,s||null,new ge(Ze.fromString(n.referencePath)))}}mt._jsonSchemaVersion="firestore/documentReference/1.0",mt._jsonSchema={type:vt("string",mt._jsonSchemaVersion),referencePath:vt("string")};class Fs extends yi{constructor(e,n,s){super(e,n,Ad(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new ge(e))}withConverter(e){return new Fs(this.firestore,e,this._path)}}function qn(t,e,...n){if(t=gt(t),D0("collection","path",e),t instanceof $l){const s=Ze.fromString(e,...n);return Op(s),new Fs(t,null,s)}{if(!(t instanceof mt||t instanceof Fs))throw new de(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ze.fromString(e,...n));return Op(s),new Fs(t.firestore,null,s)}}function $t(t,e,...n){if(t=gt(t),arguments.length===1&&(e=wd.newId()),D0("doc","path",e),t instanceof $l){const s=Ze.fromString(e,...n);return Vp(s),new mt(t,null,new ge(s))}{if(!(t instanceof mt||t instanceof Fs))throw new de(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ze.fromString(e,...n));return Vp(s),new mt(t.firestore,t instanceof Fs?t.converter:null,new ge(s))}}const Tm="AsyncQueue";class Im{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new I_(this,"async_queue_retry"),this._c=()=>{const s=Fc();s&&he(Tm,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Fc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Fc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new os;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!mi(e))throw e;he(Tm,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,hs("INTERNAL UNHANDLED ERROR: ",xm(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=$d.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&we(47125,{Pc:xm(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function xm(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Cr extends $l{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new Im,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Im(e),this._firestoreClient=void 0,await e}}}function CC(t,e){const n=typeof t=="object"?t:El(),s=typeof t=="string"?t:Ha,r=Ws(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=fy("firestore");i&&SC(r,...i)}return r}function zd(t){if(t._terminated)throw new de(Q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||kC(t),t._firestoreClient}function kC(t){const e=t._freezeSettings(),n=function(r,i,o,l){return new eR(r,i,o,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,G_(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new TC(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(r){const i=r?._online.build();return{_offline:r?._offline.build(i),_online:i}}(t._componentsProvider))}class ln{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ln(kt.fromBase64String(e))}catch(n){throw new de(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ln(kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ln._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Do(e,ln._jsonSchema))return ln.fromBase64String(e.bytes)}}ln._jsonSchemaVersion="firestore/bytes/1.0",ln._jsonSchema={type:vt("string",ln._jsonSchemaVersion),bytes:vt("string")};class Bl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class jl{constructor(e){this._methodName=e}}class Un{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Un._jsonSchemaVersion}}static fromJSON(e){if(Do(e,Un._jsonSchema))return new Un(e.latitude,e.longitude)}}Un._jsonSchemaVersion="firestore/geoPoint/1.0",Un._jsonSchema={type:vt("string",Un._jsonSchemaVersion),latitude:vt("number"),longitude:vt("number")};class $n{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:$n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Do(e,$n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new $n(e.vectorValues);throw new de(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$n._jsonSchemaVersion="firestore/vectorValue/1.0",$n._jsonSchema={type:vt("string",$n._jsonSchemaVersion),vectorValues:vt("object")};const PC=/^__.*__$/;class DC{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Qs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Vo(e,this.data,n,this.fieldTransforms)}}class K_{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Qs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Q_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:t})}}class Gd{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Gd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ja(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Q_(this.Ac)&&PC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class NC{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Ll(e)}Cc(e,n,s,r=!1){return new Gd({Ac:e,methodName:n,Dc:s,path:St.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hl(t){const e=t._freezeSettings(),n=Ll(t._databaseId);return new NC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Y_(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);Kd("Data must be an object, but it was:",o,s);const l=X_(s,o);let c,u;if(i.merge)c=new sn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const p of i.mergeFields){const m=Cu(e,p,n);if(!o.contains(m))throw new de(Q.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Z_(h,m)||h.push(m)}c=new sn(h),u=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,u=o.fieldTransforms;return new DC(new Yt(l),c,u)}class ql extends jl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ql}}class Wd extends jl{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Eo(e.serializer,s_(e.serializer,this.Fc));return new xR(e.path,n)}isEqual(e){return e instanceof Wd&&this.Fc===e.Fc}}function VC(t,e,n,s){const r=t.Cc(1,e,n);Kd("Data must be an object, but it was:",r,s);const i=[],o=Yt.empty();Ks(s,(c,u)=>{const h=Qd(e,c,n);u=gt(u);const p=r.yc(h);if(u instanceof ql)i.push(h);else{const m=Fo(u,p);m!=null&&(i.push(h),o.set(h,m))}});const l=new sn(i);return new K_(o,l,r.fieldTransforms)}function OC(t,e,n,s,r,i){const o=t.Cc(1,e,n),l=[Cu(e,s,n)],c=[r];if(i.length%2!=0)throw new de(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(Cu(e,i[m])),c.push(i[m+1]);const u=[],h=Yt.empty();for(let m=l.length-1;m>=0;--m)if(!Z_(u,l[m])){const y=l[m];let D=c[m];D=gt(D);const N=o.yc(y);if(D instanceof ql)u.push(y);else{const M=Fo(D,N);M!=null&&(u.push(y),h.set(y,M))}}const p=new sn(u);return new K_(h,p,o.fieldTransforms)}function MC(t,e,n,s=!1){return Fo(n,t.Cc(s?4:3,e))}function Fo(t,e){if(J_(t=gt(t)))return Kd("Unsupported field value:",e,t),X_(t,e);if(t instanceof jl)return function(s,r){if(!Q_(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const l of s){let c=Fo(l,r.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=gt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return s_(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=st.fromDate(s);return{timestampValue:Ka(r.serializer,i)}}if(s instanceof st){const i=new st(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ka(r.serializer,i)}}if(s instanceof Un)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ln)return{bytesValue:f_(r.serializer,s._byteString)};if(s instanceof mt){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Pd(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof $n)return function(o,l){return{mapValue:{fields:{[B0]:{stringValue:j0},[qa]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return Rd(l.serializer,u)})}}}}}}(s,r);throw r.Sc(`Unsupported field value: ${Sl(s)}`)}(t,e)}function X_(t,e){const n={};return O0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ks(t,(s,r)=>{const i=Fo(r,e.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function J_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof st||t instanceof Un||t instanceof ln||t instanceof mt||t instanceof jl||t instanceof $n)}function Kd(t,e,n){if(!J_(n)||!N0(n)){const s=Sl(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function Cu(t,e,n){if((e=gt(e))instanceof Bl)return e._internalPath;if(typeof e=="string")return Qd(t,e);throw Ja("Field path arguments must be of type string or ",t,!1,void 0,n)}const LC=new RegExp("[~\\*/\\[\\]]");function Qd(t,e,n){if(e.search(LC)>=0)throw Ja(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bl(...e.split("."))._internalPath}catch{throw Ja(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ja(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new de(Q.INVALID_ARGUMENT,l+t+c)}function Z_(t,e){return t.some(n=>n.isEqual(e))}class ev{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new FC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Yd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class FC extends ev{data(){return super.data()}}function Yd(t,e){return typeof e=="string"?Qd(t,e):e instanceof Bl?e._internalPath:e._delegate._internalPath}function UC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new de(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xd{}class $C extends Xd{}function _i(t,e,...n){let s=[];e instanceof Xd&&s.push(e),s=s.concat(n),function(i){const o=i.filter(c=>c instanceof Jd).length,l=i.filter(c=>c instanceof zl).length;if(o>1||o>0&&l>0)throw new de(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)t=r._apply(t);return t}class zl extends $C{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new zl(e,n,s)}_apply(e){const n=this._parse(e);return tv(e._query,n),new yi(e.firestore,e.converter,_u(e._query,n))}_parse(e){const n=Hl(e.firestore);return function(i,o,l,c,u,h,p){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new de(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Rm(p,h);const D=[];for(const N of p)D.push(Am(c,i,N));m={arrayValue:{values:D}}}else m=Am(c,i,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Rm(p,h),m=MC(l,o,p,h==="in"||h==="not-in");return _t.create(u,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Za(t,e,n){const s=e,r=Yd("where",t);return zl._create(r,s,n)}class Jd extends Xd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Jd(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Rn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let o=r;const l=i.getFlattenedFilters();for(const c of l)tv(o,c),o=_u(o,c)}(e._query,n),new yi(e.firestore,e.converter,_u(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Am(t,e,n){if(typeof(n=gt(n))=="string"){if(n==="")throw new de(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Y0(e)&&n.indexOf("/")!==-1)throw new de(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Ze.fromString(n));if(!ge.isDocumentKey(s))throw new de(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Hp(t,new ge(s))}if(n instanceof mt)return Hp(t,n._key);throw new de(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sl(n)}.`)}function Rm(t,e){if(!Array.isArray(t)||t.length===0)throw new de(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tv(t,e){const n=function(r,i){for(const o of r)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new de(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class BC{convertValue(e,n="none"){switch(qs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Ks(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){const n=e.fields?.[qa].arrayValue?.values?.map(s=>pt(s.doubleValue));return new $n(n)}convertGeoPoint(e){return new Un(pt(e.latitude),pt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Pl(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(yo(e));default:return null}}convertTimestamp(e){const n=js(e);return new st(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Ze.fromString(e);He(v_(s),9688,{name:e});const r=new _o(s.get(1),s.get(3)),i=new ge(s.popFirst(5));return r.isEqual(n)||hs(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function nv(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class Hi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yr extends ev{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ea(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Yd("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=yr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}yr._jsonSchemaVersion="firestore/documentSnapshot/1.0",yr._jsonSchema={type:vt("string",yr._jsonSchemaVersion),bundleSource:vt("string","DocumentSnapshot"),bundleName:vt("string"),bundle:vt("string")};class Ea extends yr{data(e={}){return super.data(e)}}class Zr{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Hi(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Ea(this._firestore,this._userDataWriter,s.key,s,new Hi(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>{const c=new Ea(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Hi(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Ea(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Hi(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:jC(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Zr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=wd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function jC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:t})}}function sv(t){t=An(t,mt);const e=An(t.firestore,Cr);return AC(zd(e),t._key).then(n=>HC(e,t,n))}Zr._jsonSchemaVersion="firestore/querySnapshot/1.0",Zr._jsonSchema={type:vt("string",Zr._jsonSchemaVersion),bundleSource:vt("string","QuerySnapshot"),bundleName:vt("string"),bundle:vt("string")};class rv extends BC{constructor(e){super(),this.firestore=e}convertBytes(e){return new ln(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,n)}}function kr(t){t=An(t,yi);const e=An(t.firestore,Cr),n=zd(e),s=new rv(e);return UC(t._query),RC(n,t._query).then(r=>new Zr(e,s,t,r))}function To(t,e,n){t=An(t,mt);const s=An(t.firestore,Cr),r=nv(t.converter,e,n);return Gl(s,[Y_(Hl(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,dn.none())])}function ps(t,e,n,...s){t=An(t,mt);const r=An(t.firestore,Cr),i=Hl(r);let o;return o=typeof(e=gt(e))=="string"||e instanceof Bl?OC(i,"updateDoc",t._key,e,n,s):VC(i,"updateDoc",t._key,e),Gl(r,[o.toMutation(t._key,dn.exists(!0))])}function iv(t){return Gl(An(t.firestore,Cr),[new Sd(t._key,dn.none())])}function Zd(t,e){const n=An(t.firestore,Cr),s=$t(t),r=nv(t.converter,e);return Gl(n,[Y_(Hl(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,dn.exists(!1))]).then(()=>s)}function Gl(t,e){return function(s,r){const i=new os;return s.asyncQueue.enqueueAndForget(async()=>pC(await xC(s),r,i)),i.promise}(zd(t),e)}function HC(t,e,n){const s=n.docs.get(e._key),r=new rv(t);return new yr(t,r,e._key,s,new Hi(n.hasPendingWrites,n.fromCache),e.converter)}function ov(t){return new Wd("increment",t)}(function(e,n=!0){(function(r){fi=r})(Ar),xn(new fn("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),l=new Cr(new O2(s.getProvider("auth-internal")),new F2(o,s.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new de(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _o(u.options.projectId,h)}(o,r),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Xt(kp,Pp,e),Xt(kp,Pp,"esm2020")})();const av="firebasestorage.googleapis.com",qC="storageBucket",zC=2*60*1e3,GC=10*60*1e3;class zn extends mn{constructor(e,n,s=0){super($c(e),`Firebase Storage: ${n} (${$c(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,zn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return $c(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Hn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Hn||(Hn={}));function $c(t){return"storage/"+t}function WC(){const t="An unknown error occurred, please check the error payload for server response.";return new zn(Hn.UNKNOWN,t)}function KC(){return new zn(Hn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function QC(){return new zn(Hn.CANCELED,"User canceled the upload/download.")}function YC(t){return new zn(Hn.INVALID_URL,"Invalid URL '"+t+"'.")}function XC(t){return new zn(Hn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Sm(t){return new zn(Hn.INVALID_ARGUMENT,t)}function lv(){return new zn(Hn.APP_DELETED,"The Firebase app was deleted.")}function JC(t){return new zn(Hn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class yn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=yn.makeFromUrl(e,n)}catch{return new yn(e,"")}if(s.path==="")return s;throw XC(e)}static makeFromUrl(e,n){let s=null;const r="([A-Za-z0-9.\\-_]+)";function i(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+r+o,"i"),c={bucket:1,path:3};function u(P){P.path_=decodeURIComponent(P.path)}const h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${p}/${h}/b/${r}/o${m}`,"i"),D={bucket:1,path:3},N=n===av?"(?:storage.googleapis.com|storage.cloud.google.com)":n,M="([^?#]*)",H=new RegExp(`^https?://${N}/${r}/${M}`,"i"),C=[{regex:l,indices:c,postModify:i},{regex:y,indices:D,postModify:u},{regex:H,indices:{bucket:1,path:2},postModify:u}];for(let P=0;P<C.length;P++){const O=C[P],B=O.regex.exec(e);if(B){const v=B[O.indices.bucket];let w=B[O.indices.path];w||(w=""),s=new yn(v,w),O.postModify(s);break}}if(s==null)throw YC(e);return s}}class ZC{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function e4(t,e,n){let s=1,r=null,i=null,o=!1,l=0;function c(){return l===2}let u=!1;function h(...M){u||(u=!0,e.apply(null,M))}function p(M){r=setTimeout(()=>{r=null,t(y,c())},M)}function m(){i&&clearTimeout(i)}function y(M,...H){if(u){m();return}if(M){m(),h.call(null,M,...H);return}if(c()||o){m(),h.call(null,M,...H);return}s<64&&(s*=2);let C;l===1?(l=2,C=0):C=(s+Math.random())*1e3,p(C)}let D=!1;function N(M){D||(D=!0,m(),!u&&(r!==null?(M||(l=2),clearTimeout(r),p(0)):M||(l=1)))}return p(0),i=setTimeout(()=>{o=!0,N(!0)},n),N}function t4(t){t(!1)}function n4(t){return t!==void 0}function Cm(t,e,n,s){if(s<e)throw Sm(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw Sm(`Invalid value for '${t}'. Expected ${n} or less.`)}function s4(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const r=e(s)+"="+e(t[s]);n=n+r+"&"}return n=n.slice(0,-1),n}var el;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(el||(el={}));function r4(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||r||i}class i4{constructor(e,n,s,r,i,o,l,c,u,h,p,m=!0,y=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=p,this.retry=m,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,N)=>{this.resolve_=D,this.reject_=N,this.start_()})}start_(){const e=(s,r)=>{if(r){s(!1,new aa(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===el.NO_ERROR,c=i.getStatus();if(!l||r4(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===el.ABORT;s(!1,new aa(!1,null,h));return}const u=this.successCodes_.indexOf(c)!==-1;s(!0,new aa(u,i))})},n=(s,r)=>{const i=this.resolve_,o=this.reject_,l=r.connection;if(r.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());n4(c)?i(c):i()}catch(c){o(c)}else if(l!==null){const c=WC();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(r.canceled){const c=this.appDelete_?lv():QC();o(c)}else{const c=KC();o(c)}};this.canceled_?n(!1,new aa(!1,null,!0)):this.backoffId_=e4(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&t4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class aa{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function o4(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function a4(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function l4(t,e){e&&(t["X-Firebase-GMPID"]=e)}function c4(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function u4(t,e,n,s,r,i,o=!0,l=!1){const c=s4(t.urlParams),u=t.url+c,h=Object.assign({},t.headers);return l4(h,e),o4(h,n),a4(h,i),c4(h,s),new i4(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o,l)}function d4(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function h4(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}class tl{constructor(e,n){this._service=e,n instanceof yn?this._location=n:this._location=yn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new tl(e,n)}get root(){const e=new yn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return h4(this._location.path)}get storage(){return this._service}get parent(){const e=d4(this._location.path);if(e===null)return null;const n=new yn(this._location.bucket,e);return new tl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw JC(e)}}function km(t,e){const n=e?.[qC];return n==null?null:yn.makeFromBucketSpec(n,t)}function f4(t,e,n,s={}){t.host=`${e}:${n}`;const r=Ir(e);r&&(ed(`https://${t.host}/b`),td("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:i}=s;i&&(t._overrideAuthToken=typeof i=="string"?i:gy(i,t.app.options.projectId))}class p4{constructor(e,n,s,r,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=av,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=zC,this._maxUploadRetryTime=GC,this._requests=new Set,r!=null?this._bucket=yn.makeFromBucketSpec(r,this._host):this._bucket=km(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=yn.makeFromBucketSpec(this._url,e):this._bucket=km(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Cm("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Cm("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(an(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new tl(this,e)}_makeRequest(e,n,s,r,i=!0){if(this._deleted)return new ZC(lv());{const o=u4(e,this._appId,s,r,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,r).getPromise()}}const Pm="@firebase/storage",Dm="0.14.0";const cv="storage";function m4(t=El(),e){t=gt(t);const s=Ws(t,cv).getImmediate({identifier:e}),r=fy("storage");return r&&g4(s,...r),s}function g4(t,e,n,s={}){f4(t,e,n,s)}function y4(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new p4(n,s,r,e,Ar)}function _4(){xn(new fn(cv,y4,"PUBLIC").setMultipleInstances(!0)),Xt(Pm,Dm,""),Xt(Pm,Dm,"esm2020")}_4();const v4={apiKey:"AIzaSyBREo7YpHmycRgjyftoxkiFMLwMVePqeKc",authDomain:"happy-tri-friends.firebaseapp.com",databaseURL:"https://happy-tri-friends-default-rtdb.europe-west1.firebasedatabase.app",projectId:"happy-tri-friends",storageBucket:"happy-tri-friends.firebasestorage.app",messagingSenderId:"442257914194",appId:"1:442257914194:web:bf5e1c5cb21cac78e5e28b",measurementId:"G-RV9XDZH7J9"},Wl=Ty(v4);Cx(Wl);const Ye=P2(Wl),eh=new ts;eh.setCustomParameters({prompt:"select_account"});const rt=CC(Wl);m4(Wl);const uv=["kulikalovdenis@gmail.com","bugary20@gmail.com"];async function w4(t,e={}){try{const n=Ye.currentUser;if(!n)throw new Error("  ");const s=$t(rt,"users",t),r=await sv(s),i=uv.includes(n.email||"");if(r.exists()){const o=r.data(),l={lastLoginAt:new Date().toISOString(),loginCount:(o.loginCount||0)+1,updatedAt:new Date().toISOString()};return await To(s,l,{merge:!0}),{...o,...l}}else{const o={uid:t,email:n.email,displayName:n.displayName||null,photoURL:n.photoURL||null,isApproved:!!i,role:i?"admin":"user",emailVerified:n.emailVerified||!1,status:"active",amount:0,notifications:{email:e.notifications?.email??!0,push:e.notifications?.push??!1,trainingReminders:e.notifications?.trainingReminders??!0},firstName:e.firstName||null,lastName:e.lastName||null,phone:e.phone||null,birthDate:e.birthDate||null,gender:e.gender||null,city:e.city||null,address:e.address||null,postalDepartment:e.postalDepartment||null,emergencyContactName:e.emergencyContactName||null,emergencyContactPhone:e.emergencyContactPhone||null,phoneNumber:e.phoneNumber||null,bio:e.bio||null,experienceLevel:e.experienceLevel||null,specialization:e.specialization||null,registeredAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),loginCount:1,notes:null,deletedAt:null,updatedAt:new Date().toISOString(),trainingStats:{swimming:{registered:0},cycling:{registered:0},running:{registered:0},other:{registered:0}}};return await To(s,o,{merge:!1}),o}}catch(n){throw console.error("  / :",n),n}}async function Kl(t){try{const e=await sv($t(rt,"users",t));return e.exists()?{id:e.id,...e.data()}:null}catch(e){throw console.error("  :",e),e}}async function b4(t,e,n){try{const s=$t(rt,"users",t);return await ps(s,{isApproved:e,updatedAt:new Date().toISOString(),updatedBy:n}),!0}catch(s){throw console.error("   :",s),s}}async function E4(t,e,n){try{if(!["user","admin"].includes(e))throw new Error(" ");const s=$t(rt,"users",t);return await ps(s,{role:e,updatedAt:new Date().toISOString(),updatedBy:n}),!0}catch(s){throw console.error("   :",s),s}}async function Nm(t,e,n){try{if(!["active","inactive","blocked"].includes(e))throw new Error(" ");const s=$t(rt,"users",t);return await ps(s,{status:e,updatedAt:new Date().toISOString(),updatedBy:n}),!0}catch(s){throw console.error("   :",s),s}}async function dv(){try{const t=await kr(_i(qn(rt,"users"))),e=[];return t.forEach(n=>{e.push({id:n.id,...n.data()})}),e.sort((n,s)=>new Date(s.registeredAt)-new Date(n.registeredAt))}catch(t){throw console.error("  :",t),t}}async function T4(t,e){try{const n=$t(rt,"users",t),s=["firstName","lastName","phone","birthDate","gender","city","address","postalDepartment","emergencyContactName","emergencyContactPhone","experienceLevel","specialization","bio","phoneNumber","notifications"],r={};return s.forEach(i=>{i in e&&(r[i]=e[i])}),r.updatedAt=new Date().toISOString(),await To(n,r,{merge:!0}),!0}catch(n){throw console.error("   :",n),n}}async function I4(t,e,n){try{const s=$t(rt,"users",t);return await ps(s,{notes:e,updatedAt:new Date().toISOString(),updatedBy:n}),!0}catch(s){throw console.error("   :",s),s}}async function x4(t,e,n,s=null){try{const r=$t(rt,"users",t),i={amount:Math.max(0,parseFloat(e)||0),balanceUpdatedAt:new Date().toISOString(),balanceUpdatedBy:n,updatedAt:new Date().toISOString()};return s&&s.percent>0&&(i.discount={percent:s.percent,appliedAt:new Date().toISOString(),appliedBy:n,previousAmount:s.previousAmount}),await To(r,i,{merge:!0}),!0}catch(r){throw console.error("   :",r),r}}async function A4(){try{const t=await dv();return{total:t.length,approved:t.filter(n=>n.isApproved).length,pending:t.filter(n=>!n.isApproved).length,admins:t.filter(n=>n.role==="admin").length,active:t.filter(n=>n.status==="active").length,blocked:t.filter(n=>n.status==="blocked").length}}catch(t){throw console.error("   :",t),t}}async function R4(t){try{const{uid:e,email:n,displayName:s,photoURL:r,additionalData:i={}}=t;if(!e||!n)throw new Error("UID  Email  '");const o=uv.includes(n||""),l=$t(rt,"users",e),c={uid:e,email:n,displayName:s||null,photoURL:r||null,isApproved:!!o,role:o?"admin":"user",status:"active",firstName:i.firstName||void 0,lastName:i.lastName||void 0,phone:i.phone||void 0,city:i.city||void 0,experienceLevel:i.experienceLevel||void 0,bio:i.bio||void 0,notifications:{email:!0,push:!1,trainingReminders:!0},registeredAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),updatedAt:new Date().toISOString(),emailVerified:!1,loginCount:1,notes:null,deletedAt:null,amount:0,trainingStats:{swimming:{registered:0},cycling:{registered:0},running:{registered:0},other:{registered:0}}};return Object.keys(c).forEach(u=>{c[u]===void 0&&delete c[u]}),await To(l,c),c}catch(e){throw console.error("   :",e),e}}function S4(t=3){return new Promise((e,n)=>{let s=0,r=null;const i=()=>{r=hi(Ye,async o=>{if(r&&r(),o){try{await w4(o.uid,{})}catch(l){console.error("    :",l)}e(o)}else s<t?(s++,r(),setTimeout(i,300)):e(null)},n)};i()})}async function hv(){try{return await bA(Ye),!0}catch(t){throw console.error(" :",t),t}}function th(t,e){return e.includes(t||"")}const C4={class:"flex-shrink-0 text-2xl"},k4={class:"flex-1"},P4={key:0,class:"font-bold text-lg mb-1"},D4={class:"text-sm"},N4={__name:"Notification",props:{type:{type:String,default:"success",validator:t=>["success","warning","error"].includes(t)},message:{type:String,required:!0},title:{type:String,default:""},duration:{type:Number,default:3e3},show:{type:Boolean,default:!1}},emits:["close"],setup(t,{emit:e}){const n=t,s=e,r=ie(n.show);let i=null;const o=et(()=>({success:"bg-green-50 border-l-4 border-green-500 text-green-800",warning:"bg-yellow-50 border-l-4 border-yellow-500 text-yellow-800",error:"bg-red-50 border-l-4 border-red-500 text-red-800"})[n.type]),l=et(()=>({success:"",warning:"",error:""})[n.type]),c=()=>{r.value=!1,s("close"),i&&clearTimeout(i)};return rs(()=>n.show,u=>{r.value=u,u&&n.duration>0&&(i&&clearTimeout(i),i=setTimeout(()=>{c()},n.duration))}),n.show&&n.duration>0&&(i=setTimeout(()=>{c()},n.duration)),(u,h)=>(F(),tn(zb,{name:"slide-fade"},{default:Ht(()=>[r.value?(F(),j("div",{key:0,class:qe(["fixed top-20 left-1/2 -translate-x-1/2 z-50 max-w-md rounded-lg shadow-2xl p-4 flex items-start gap-3","transition-all duration-300",o.value])},[d("div",C4,Y(l.value),1),d("div",k4,[t.title?(F(),j("h4",P4,Y(t.title),1)):_e("",!0),d("p",D4,Y(t.message),1)]),d("button",{onClick:c,class:"flex-shrink-0 text-2xl opacity-60 hover:opacity-100 transition-opacity"},"  ")],2)):_e("",!0)]),_:1}))}},Ql=ui(N4,[["__scopeId","data-v-21362ac3"]]),V4={class:"flex flex-col md:flex-row md:justify-between md:items-center text-white p-3 gap-4 md:gap-0"},O4={class:"flex md:hidden justify-between items-center w-full relative"},M4={class:"flex flex-row items-center gap-1 ml-auto"},L4={key:1,class:"flex flex-row items-center gap-1"},F4={key:1,class:"relative"},U4={class:"hidden md:flex md:justify-start md:w-48"},$4={class:"hidden md:flex justify-center flex-1"},B4={class:"flex flex-wrap justify-center space-x-4 text-sm md:text-base"},j4={key:0,class:"md:hidden w-full bg-opacity-95 rounded-lg p-4 space-y-3"},H4={class:"hidden md:flex md:flex-col gap-2 items-end md:items-center md:w-48 md:justify-end"},q4={key:2,class:"flex md:flex-col items-center md:items-end gap-3 md:gap-2"},z4={__name:"htfHeader",setup(t){const e=Ro(),n=Zu(),s=ie(!1),r=ie(""),i=ie(""),o=ie(!1),l=ie(!1),c=ie(!1);ie(!1);const u=["kulikalovdenis@gmail.com","bugary20@gmail.com"],h=et(()=>s.value&&th(r.value||"",u)),p=et(()=>h.value?"/admin":"/user"),m=et(()=>n.path==="/register");pn(()=>{hi(Ye,async H=>{if(H){s.value=!0,r.value=H.email,i.value=H.uid;try{const k=await Kl(H.uid);k?o.value=k.isApproved||!1:o.value=!1}catch(k){console.error("  :",k),o.value=!1}}else s.value=!1,r.value="",i.value="",o.value=!1})});function y(){e.push("/register")}function D(){l.value=!1}async function N(){try{await hv(),D(),e.push("/")}catch(H){console.error(" :",H)}}function M(){c.value=!0}return(H,k)=>{const C=Tg("router-link");return F(),j($e,null,[d("header",V4,[d("div",O4,[d("button",{onClick:k[0]||(k[0]=P=>l.value=!l.value),class:"p-2 hover:bg-gray-700 rounded transition",title:""},[...k[2]||(k[2]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]),Ae(C,{to:"/",class:"absolute left-1/2 transform -translate-x-1/2"},{default:Ht(()=>[...k[3]||(k[3]=[d("img",{src:zf,alt:"Logo",class:"w-10 h-auto cursor-pointer hover:opacity-80 transition"},null,-1)])]),_:1}),d("div",M4,[m.value?_e("",!0):(F(),j($e,{key:0},[s.value?(F(),j("div",L4,[o.value?(F(),tn(C,{key:0,to:p.value,class:"flex items-center justify-center p-2 bg-transparent border-2 border-yellow-400 text-yellow-400 font-semibold rounded-lg hover:bg-yellow-400 hover:text-black transition"},{default:Ht(()=>[...k[5]||(k[5]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"})],-1)])]),_:1},8,["to"])):(F(),j("div",F4,[d("button",{onClick:M,title:"    ",class:"flex items-center justify-center p-2 bg-gray-600 border-2 border-gray-500 text-gray-300 font-semibold rounded-lg hover:bg-gray-500 transition cursor-pointer"},[...k[6]||(k[6]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),d("path",{"fill-rule":"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z","clip-rule":"evenodd"})],-1)])])])),d("button",{onClick:N,title:"",class:"p-2 bg-transparent border-2 border-yellow-400 text-yellow-400 rounded-lg hover:bg-yellow-400 hover:border-yellow-500 hover:text-black transition"},[...k[7]||(k[7]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z","clip-rule":"evenodd"})],-1)])])])):(F(),tn(C,{key:0,to:"/login",class:"flex items-center justify-center p-2 bg-transparent border-2 border-yellow-400 text-yellow-400 font-semibold rounded-lg hover:bg-yellow-400 hover:text-black transition"},{default:Ht(()=>[...k[4]||(k[4]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 011 1v12a1 1 0 11-2 0V4a1 1 0 011-1zm7.707 3.293a1 1 0 010 1.414L9.414 9H17a1 1 0 110 2H9.414l1.293 1.293a1 1 0 01-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)])]),_:1}))],64))])]),d("div",U4,[Ae(C,{to:"/"},{default:Ht(()=>[...k[8]||(k[8]=[d("img",{src:zf,alt:"Logo",class:"w-20 h-auto cursor-pointer hover:opacity-80 transition"},null,-1)])]),_:1})]),d("div",$4,[d("ul",B4,[d("li",null,[Ae(C,{to:"/schedule",class:"menu-link font-bold hover:text-yellow-400","active-class":"text-yellow-400"},{default:Ht(()=>[...k[9]||(k[9]=[Ke("",-1)])]),_:1})]),d("li",null,[Ae(C,{to:"/donations",class:"menu-link font-bold hover:text-yellow-400","active-class":"text-yellow-400"},{default:Ht(()=>[...k[10]||(k[10]=[Ke(" ",-1)])]),_:1})]),d("li",null,[s.value?_e("",!0):(F(),tn(C,{key:0,to:"/login",class:"menu-link font-bold hover:text-yellow-400","active-class":"text-yellow-400"},{default:Ht(()=>[...k[11]||(k[11]=[Ke("",-1)])]),_:1}))])])]),l.value?(F(),j("div",j4,[Ae(C,{to:"/schedule",class:"block menu-link font-bold hover:text-yellow-400 text-center py-2","active-class":"text-yellow-400",onClick:D},{default:Ht(()=>[...k[12]||(k[12]=[Ke("  ",-1)])]),_:1}),Ae(C,{to:"/donations",class:"block menu-link font-bold hover:text-yellow-400 text-center py-2","active-class":"text-yellow-400",onClick:D},{default:Ht(()=>[...k[13]||(k[13]=[Ke("   ",-1)])]),_:1}),s.value?_e("",!0):(F(),tn(C,{key:0,to:"/login",class:"block menu-link font-bold hover:text-yellow-400 text-center py-2","active-class":"text-yellow-400",onClick:D},{default:Ht(()=>[...k[14]||(k[14]=[Ke("  ",-1)])]),_:1}))])):_e("",!0),d("div",H4,[m.value?_e("",!0):(F(),j($e,{key:0},[s.value?_e("",!0):(F(),j("button",{key:0,type:"button",onClick:y,class:"bg-yellow-400 text-black font-bold py-2 px-6 rounded-full hover:bg-yellow-500 transition"},"  ")),s.value?(F(),j("div",q4,[o.value?(F(),tn(C,{key:0,to:p.value,class:"flex items-center gap-2 bg-transparent border-2 border-yellow-400 text-yellow-400 font-semibold py-1.5 px-4 rounded-lg hover:bg-yellow-400 hover:text-black transition text-sm"},{default:Ht(()=>[...k[16]||(k[16]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"})],-1),Ke("  ",-1)])]),_:1},8,["to"])):(F(),j("button",{key:1,onClick:M,title:"     ",class:"flex items-center gap-2 bg-gray-700 border-2 border-gray-600 text-gray-400 font-semibold py-1.5 px-4 rounded-lg hover:bg-gray-600 transition text-sm cursor-pointer"},[...k[17]||(k[17]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),d("path",{"fill-rule":"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z","clip-rule":"evenodd"})],-1),Ke("   ",-1)])])),d("button",{onClick:N,title:"",class:"p-2 bg-transparent border-2 border-yellow-400 text-yellow-400 rounded-lg hover:bg-yellow-400 hover:border-yellow-500 hover:text-black transition"},[...k[18]||(k[18]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z","clip-rule":"evenodd"})],-1)])])])):(F(),tn(C,{key:1,to:"/login",class:"flex items-center justify-center gap-2 bg-transparent border-2 border-yellow-400 text-yellow-400 font-semibold py-1.5 px-4 rounded-lg hover:bg-yellow-400 hover:text-black transition text-sm"},{default:Ht(()=>[...k[15]||(k[15]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 011 1v12a1 1 0 11-2 0V4a1 1 0 011-1zm7.707 3.293a1 1 0 010 1.414L9.414 9H17a1 1 0 110 2H9.414l1.293 1.293a1 1 0 01-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),Ke("    ",-1)])]),_:1}))],64))])]),s.value&&!o.value?(F(),tn(Ql,{key:0,type:"warning",title:"  ",message:"     ",show:c.value,duration:5e3,onClose:k[1]||(k[1]=P=>c.value=!1)},null,8,["show"])):_e("",!0)],64)}}},G4=ui(z4,[["__scopeId","data-v-27e35d8d"]]),W4={class:"relative z-10"},vi={__name:"HeaderWrapper",setup(t){return(e,n)=>(F(),j("div",W4,[Ae(G4)]))}},K4={},Q4={class:"bg-transparent text-white p-4 sm:p-6 md:p-8"};function Y4(t,e){return F(),j("footer",Q4,[...e[0]||(e[0]=[is('<div class="max-w-7xl mx-auto"><div class="flex items-center justify-center gap-4"><a href="https://www.facebook.com/HappyTRIFriendsTeam" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center w-10 h-10 rounded-full border-2 border-yellow-400 text-yellow-400 hover:border-white hover:text-white transition-all duration-300" title="Facebook"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path></svg></a><a href="https://www.youtube.com/@happytrifriendsteam" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center w-10 h-10 rounded-full border-2 border-yellow-400 text-yellow-400 hover:border-white hover:text-white transition-all duration-300" title="YouTube"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"></path></svg></a><a href="https://www.instagram.com/happy_tri_friends/" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center w-10 h-10 rounded-full border-2 border-yellow-400 text-yellow-400 hover:border-white hover:text-white transition-all duration-300" title="Instagram"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.117.6c-.794.272-1.473.646-2.157 1.33-.683.683-1.065 1.35-1.33 2.157-.266.792-.468 1.662-.54 2.942C.008 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.528 2.913.262.763.633 1.41 1.313 2.088.68.68 1.325 1.05 2.092 1.303.765.266 1.636.477 2.914.54 1.28.058 1.687.072 4.947.072s3.667-.015 4.947-.072c1.280-.063 2.148-.274 2.913-.54.763-.253 1.410-.623 2.088-1.303.680-.68 1.050-1.335 1.303-2.1.266-.765.477-1.636.540-2.914.058-1.280.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.063-1.277-.274-2.148-.540-2.913-.253-.764-.623-1.409-1.303-2.088-.68-.68-1.335-1.050-2.100-1.303-.765-.266-1.636-.477-2.913-.540C15.667.008 15.260 0 12 0zm0 2.16c3.203 0 3.585.009 4.849.070 1.171.054 1.805.244 2.227.408.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.354 1.057.408 2.227.061 1.264.070 1.645.070 4.849 0 3.204-.009 3.585-.070 4.849-.054 1.171-.244 1.806-.408 2.228-.217.562-.477.960-.896 1.382-.420.419-.819.679-1.381.896-.422.164-1.057.354-2.227.408-1.264.061-1.645.070-4.849.070-3.204 0-3.585-.009-4.849-.070-1.171-.054-1.806-.244-2.228-.408-.562-.217-.960-.477-1.382-.896-.419-.420-.679-.819-.896-1.381-.164-.422-.354-1.057-.408-2.227-.061-1.264-.070-1.645-.070-4.849 0-3.204.009-3.585.070-4.849.054-1.171.244-1.805.408-2.227.217-.562.477-.960.896-1.382.420-.419.819-.679 1.381-.896.422-.164 1.057-.354 2.227-.408 1.264-.061 1.645-.070 4.849-.070z"></path><circle cx="12" cy="12" r="3.846"></circle><path d="M5.408 7.065a1.657 1.657 0 100 3.314 1.657 1.657 0 000-3.314z"></path></svg></a></div></div>',1)])])}const Uo=ui(K4,[["render",Y4]]),X4={},J4={class:"home text-center text-white px-2 sm:px-4 py-4"};function Z4(t,e){return F(),j("div",J4,[...e[0]||(e[0]=[d("div",{class:"uppercase text-xs sm:text-sm tracking-widest font-light mb-6 sm:mb-10"},"triathlon club",-1),d("div",{class:"text-3xl sm:text-6xl font-bold mb-6 sm:mb-10"},"Happy TRI Friends",-1),d("div",{class:"text-base sm:text-lg text-white"},"Swimmius. Bikeus. Runius",-1)])])}const ek=ui(X4,[["render",Z4]]),wi="/HTF/assets/background-CxF9_idu.png",tk="/HTF/assets/founders_HTF-D-k_59ix.png",nk="/HTF/assets/Kulikalov-c-KDy7Jn.png",sk={class:"relative z-10"},rk={class:"text-center p-4 sm:p-6 md:p-10 lg:p-40"},ik={class:"flex flex-col md:flex-row items-center justify-center md:justify-between h-auto md:h-150 bg-gray-100 text-black p-8 sm:p-10 md:p-16 gap-4 md:gap-0 overflow-hidden"},ok=["src"],ak={class:"flex flex-col md:flex-row-reverse items-center justify-center md:justify-between h-auto md:h-150 bg-white text-black p-8 sm:p-10 md:p-16 gap-4 md:gap-0 overflow-hidden"},lk=["src"],ck={__name:"MainPage",setup(t){Ro();function e(){window.scrollBy({top:window.innerHeight,behavior:"smooth"})}return(n,s)=>(F(),j($e,null,[d("div",{class:"relative min-h-screen bg-cover bg-center bg-fixed",style:ms({backgroundImage:`url(${ot(wi)})`})},[s[0]||(s[0]=d("div",{class:"absolute inset-0 bg-black opacity-50"},null,-1)),d("div",sk,[Ae(vi),d("main",rk,[Ae(ek)])]),d("button",{onClick:e,class:"fixed sm:absolute bottom-5 left-1/2 transform -translate-x-1/2 bg-yellow-400 text-black font-bold py-2 px-4 sm:px-6 md:px-8 rounded-full hover:bg-yellow-500 transition text-base sm:text-lg"},"   ")],4),s[3]||(s[3]=d("div",{class:"flex flex-col items-center justify-center h-auto bg-white text-black p-4 sm:p-6 md:h-80"},[d("h1",{class:"text-xl sm:text-2xl md:text-4xl font-bold mb-4 md:mb-10"},"  "),d("p",{class:"text-sm sm:text-base md:text-lg mb-4 md:mb-0"},"  ,        !")],-1)),d("div",ik,[d("img",{src:ot(tk),alt:"Founders",class:"w-2/3 sm:w-1/2 md:w-1/3 h-auto mb-4 md:mb-0 ml-0 md:ml-20 object-contain max-h-full"},null,8,ok),s[1]||(s[1]=d("div",{class:"w-full md:w-1/2 text-center md:text-left px-6 md:px-12 lg:px-16"},[d("h2",{class:"text-lg sm:text-xl md:text-2xl font-bold mb-2 md:mb-4"}," HTF"),d("p",{class:"text-sm sm:text-base md:text-lg"},"  '  .   HTF,       ,        .       !")],-1))]),d("div",ak,[d("img",{src:ot(nk),alt:"Kulikalov",class:"w-2/3 sm:w-1/2 md:w-1/3 h-auto mb-4 md:mb-0 mr-0 md:mr-20 object-contain max-h-full"},null,8,lk),s[2]||(s[2]=d("div",{class:"w-full md:w-1/2 text-center md:text-left px-6 md:px-12 lg:px-16"},[d("h2",{class:"text-lg sm:text-xl md:text-2xl font-bold mb-2 md:mb-4"},"  "),d("p",{class:"text-sm sm:text-base md:text-lg"},"       .     ,             .")],-1))]),Ae(Uo)],64))}},fv="/HTF/HTF.png",uk={class:"relative z-10 flex flex-col min-h-screen"},dk={__name:"LoginView",setup(t){const e=Ro(),n=["kulikalovdenis@gmail.com","bugary20@gmail.com"];async function s(){try{const i=(await E0(Ye,eh)).user;if(await new Promise(o=>setTimeout(o,500)),n.includes(i.email))e.push("/admin");else try{const o=await Kl(i.uid);o&&o.isApproved?e.push("/user"):e.push("/register")}catch(o){console.error("   :",o),e.push("/register")}}catch(r){r.code&&r.code!=="auth/popup-closed-by-user"&&r.code!=="auth/cancelled-popup-request"&&console.error(" :",r.code,r.message)}}return(r,i)=>(F(),j("div",{class:"relative min-h-screen bg-cover bg-center bg-fixed",style:ms({backgroundImage:`url(${ot(wi)})`})},[i[3]||(i[3]=d("div",{class:"absolute inset-0 bg-black opacity-50"},null,-1)),d("div",uk,[Ae(vi),d("div",{class:"flex flex-col items-center justify-center flex-1 p-2 sm:p-4"},[d("div",{class:"bg bg-opacity-80 backdrop-blur-sm p-6 sm:p-8 md:p-12 rounded-2xl shadow-2xl max-w-xs sm:max-w-md w-full border-2 border-yellow-400"},[i[1]||(i[1]=is('<div class="flex justify-center mb-8"><img src="'+fv+'" alt="HTF Logo" class="w-24 h-24 sm:w-28 sm:h-28 rounded-full shadow-lg border-4 border-yellow-400"></div><div class="text-center mb-8"><h1 class="text-2xl sm:text-3xl font-bold mb-2 text-yellow-400 uppercase tracking-wide">!</h1><p class="text-white text-sm sm:text-base font-light">Happy TRI Friends</p></div>',2)),d("button",{onClick:s,class:"w-full flex items-center justify-center gap-3 bg-yellow-400 hover:bg-yellow-500 text-black font-bold px-4 py-3 sm:px-6 sm:py-4 rounded-xl transition shadow-lg hover:shadow-xl text-base sm:text-lg"},[...i[0]||(i[0]=[is('<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#000"></path><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#000"></path><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#000"></path><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#000"></path></svg>   Google ',2)])]),i[2]||(i[2]=d("p",{class:"text-center text-xs sm:text-sm text-gray-300 mt-6 sm:mt-8 font-light"},"      ",-1))])]),Ae(Uo)])],4))}};function hk(){return"/HTF/"}function pv(){const t=hk();window.location.href=t}const fk={class:"relative z-10 flex flex-col min-h-screen"},pk={class:"flex flex-col items-center justify-center flex-1 p-2 sm:p-4"},mk={class:"bg-gray-900 bg-opacity-80 backdrop-blur-sm p-6 sm:p-8 md:p-12 rounded-2xl shadow-2xl max-w-lg w-full border-2 border-yellow-400"},gk={key:0,class:"space-y-4"},yk=["disabled"],_k={key:0,class:"bg-red-600/20 border-2 border-red-400 rounded-lg p-3 text-red-300 text-sm"},vk={key:1,class:"space-y-4"},wk={key:0,class:"bg-red-600/20 border-2 border-red-400 rounded-lg p-3 text-red-300 text-sm"},bk={key:1,class:"bg-green-600/20 border-2 border-green-400 rounded-lg p-4 text-green-300 text-center"},Ek=["disabled"],Tk={__name:"RegisterView",setup(t){Ro();const e=ie(!1),n=ie(""),s=ie({firstName:"",lastName:"",phone:"",city:"",experienceLevel:"",bio:""}),r=ie(!1),i=ie(""),o=ie(!1),l=ie(!1);pn(()=>{hi(Ye,p=>{p?(e.value=!0,n.value=p.email||""):(e.value=!1,n.value="")})});async function c(){try{l.value=!0,i.value="";const m=(await E0(Ye,eh)).user;m&&(e.value=!0,n.value=m.email||"")}catch(p){p.code!=="auth/popup-closed-by-user"&&p.code!=="auth/cancelled-popup-request"&&(i.value=" : "+p.message,console.error(" :",p))}finally{l.value=!1}}async function u(){try{i.value="",r.value=!0;const p=Ye.currentUser;if(!p)throw new Error("  ");const m={};s.value.firstName&&(m.firstName=s.value.firstName),s.value.lastName&&(m.lastName=s.value.lastName),s.value.phone&&(m.phone=s.value.phone),s.value.city&&(m.city=s.value.city),s.value.experienceLevel&&(m.experienceLevel=s.value.experienceLevel),s.value.bio&&(m.bio=s.value.bio),await R4({uid:p.uid,email:p.email,displayName:p.displayName,photoURL:p.photoURL,additionalData:m})?(o.value=!0,setTimeout(()=>{h()},3e3)):i.value="   .  ."}catch(p){i.value=": "+p.message,console.error(" :",p)}finally{r.value=!1}}function h(){pv()}return(p,m)=>(F(),j("div",{class:"relative min-h-screen bg-cover bg-center bg-fixed",style:ms({backgroundImage:`url(${ot(wi)})`})},[m[22]||(m[22]=d("div",{class:"absolute inset-0 bg-black opacity-50"},null,-1)),d("div",fk,[Ae(vi),d("div",pk,[d("div",mk,[m[20]||(m[20]=is('<div class="flex justify-center mb-8"><img src="'+fv+'" alt="HTF Logo" class="w-20 h-20 sm:w-24 sm:h-24 rounded-full shadow-lg border-4 border-yellow-400"></div><div class="text-center mb-8"><h1 class="text-2xl sm:text-3xl font-bold mb-2 text-yellow-400 uppercase tracking-wide">!</h1><p class="text-gray-300 text-sm sm:text-base font-light"> ,     </p></div>',2)),d("form",{onSubmit:Vn(u,["prevent"]),class:"space-y-4"},[e.value?(F(),j("div",vk,[d("div",null,[m[9]||(m[9]=d("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Email (Google)",-1)),Ue(d("input",{"onUpdate:modelValue":m[0]||(m[0]=y=>n.value=y),type:"email",disabled:"",class:"w-full px-4 py-3 bg-gray-700 border-2 border-green-500 rounded-lg text-white placeholder-gray-500 focus:outline-none cursor-not-allowed bg-gray-600/50"},null,512),[[Je,n.value]]),m[10]||(m[10]=d("p",{class:"text-xs text-green-400 mt-1"},"     Google ",-1))]),m[19]||(m[19]=d("div",{class:"bg-yellow-600/20 border-l-4 border-yellow-400 p-4 rounded"},[d("p",{class:"text-yellow-100 text-sm"},[Ke("  "),d("strong",null,"     '."),Ke("       .    . ")])],-1)),d("div",null,[m[11]||(m[11]=d("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," '",-1)),Ue(d("input",{"onUpdate:modelValue":m[1]||(m[1]=y=>s.value.firstName=y),type:"text",placeholder:" '",class:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-yellow-400 transition"},null,512),[[Je,s.value.firstName]])]),d("div",null,[m[12]||(m[12]=d("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," ",-1)),Ue(d("input",{"onUpdate:modelValue":m[2]||(m[2]=y=>s.value.lastName=y),type:"text",placeholder:" ",class:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-yellow-400 transition"},null,512),[[Je,s.value.lastName]])]),d("div",null,[m[13]||(m[13]=d("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," ",-1)),Ue(d("input",{"onUpdate:modelValue":m[3]||(m[3]=y=>s.value.phone=y),type:"tel",placeholder:"+38 (0XX) XXX-XX-XX",class:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-yellow-400 transition"},null,512),[[Je,s.value.phone]])]),d("div",null,[m[14]||(m[14]=d("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," ",-1)),Ue(d("input",{"onUpdate:modelValue":m[4]||(m[4]=y=>s.value.city=y),type:"text",placeholder:" ",class:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-yellow-400 transition"},null,512),[[Je,s.value.city]])]),d("div",null,[m[16]||(m[16]=d("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"  ",-1)),Ue(d("select",{"onUpdate:modelValue":m[5]||(m[5]=y=>s.value.experienceLevel=y),class:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-yellow-400 transition"},[...m[15]||(m[15]=[is('<option value="">--   --</option><option value="beginner"></option><option value="intermediate"></option><option value="advanced"></option><option value="professional"></option>',5)])],512),[[Yi,s.value.experienceLevel]])]),d("div",null,[m[17]||(m[17]=d("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," ",-1)),Ue(d("textarea",{"onUpdate:modelValue":m[6]||(m[6]=y=>s.value.bio=y),placeholder:"  ,    ...",rows:"3",class:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-yellow-400 transition resize-none"},null,512),[[Je,s.value.bio]])]),i.value?(F(),j("div",wk,"  "+Y(i.value),1)):_e("",!0),o.value?(F(),j("div",bk,[...m[18]||(m[18]=[d("p",{class:"font-semibold mb-2"},"   !",-1),d("p",{class:"text-sm"},"     24 .",-1),d("p",{class:"text-xs text-green-400 mt-3"},"   ...",-1)])])):_e("",!0),o.value?(F(),j("button",{key:3,type:"button",onClick:h,class:"w-full bg-gray-600 hover:bg-gray-700 text-white font-bold px-6 py-3 rounded-lg transition duration-200"},"    ")):(F(),j("button",{key:2,type:"submit",disabled:r.value,class:"w-full bg-yellow-400 hover:bg-yellow-500 disabled:bg-gray-600 text-black font-bold px-6 py-3 rounded-lg transition duration-200 text-base sm:text-lg"},Y(r.value?" ...":"  "),9,Ek))])):(F(),j("div",gk,[m[8]||(m[8]=d("p",{class:"text-gray-300 text-center mb-4"},"      Google ",-1)),d("button",{type:"button",onClick:c,disabled:l.value,class:"w-full flex items-center justify-center gap-3 bg-yellow-400 hover:bg-yellow-500 disabled:bg-gray-600 text-black font-bold px-4 py-3 sm:px-6 sm:py-4 rounded-lg transition shadow-lg hover:shadow-xl text-base sm:text-lg"},[m[7]||(m[7]=is('<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#000"></path><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#000"></path><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#000"></path><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#000"></path></svg>',1)),Ke(" "+Y(l.value?" ...":"   Google"),1)],8,yk),i.value?(F(),j("div",_k,"  "+Y(i.value),1)):_e("",!0)]))],32),m[21]||(m[21]=d("p",{class:"text-center text-xs sm:text-sm text-gray-400 mt-6 font-light"}," Happy TRI Friends -    ",-1))])]),Ae(Uo)])],4))}},Ik={class:"relative w-full"},xk=["value","placeholder","readonly"],Ak={key:0,class:"absolute left-0 right-0 z-20 border-2 border-white rounded-lg shadow-lg max-h-48 overflow-auto mt-1 bg-gray-800"},Rk=["onMousedown"],Sk={key:0,class:"px-3 py-2 text-gray-400 text-sm"},Ck={__name:"CustomDropdown",props:{modelValue:String,options:Array,placeholder:String,hasError:{type:Boolean,default:!1},allowCustom:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,s=et(()=>n.options.length>0&&typeof n.options[0]=="object"),r=N=>typeof N=="string"?N:N.label||N.value,i=N=>typeof N=="string"?N:N.value,o=et(()=>{if(n.modelValue===void 0||n.modelValue===null)return"";if(!s.value)return n.modelValue;const N=n.options.find(M=>M.value===n.modelValue);return N?N.label:n.modelValue}),l=ie(!1);function c(){setTimeout(()=>{l.value=!1},150)}function u(N){const M=i(N);h("update:modelValue",M),l.value=!1}const h=e,p=ie(o.value),m=et(()=>{if(!n.allowCustom||p.value===o.value||!p.value)return n.options;const N=p.value.toLowerCase();return n.options.filter(M=>r(M).toLowerCase().includes(N))});rs(()=>n.modelValue,()=>{p.value=o.value});function y(){l.value=!0}function D(N){n.allowCustom&&(p.value=N.target.value,l.value=!1,h("update:modelValue",N.target.value))}return(N,M)=>(F(),j("div",Ik,[d("input",{value:t.allowCustom?p.value:o.value,onInput:D,onClick:y,onFocus:y,onBlur:c,placeholder:t.placeholder,class:qe(["w-full px-3 py-2 border-2 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 appearance-none cursor-pointer placeholder-gray-400 transition",t.hasError?"border-red-500":t.modelValue?"border-yellow-400 bg-yellow-400 text-black font-semibold":"border-white text-white bg-gray-700 hover:border-yellow-400"]),autocomplete:"off",readonly:!t.allowCustom},null,42,xk),d("button",{type:"button",onMousedown:M[0]||(M[0]=Vn(H=>l.value=!0,["prevent"])),class:qe(["absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none transition",t.modelValue?"text-black":"text-white hover:text-yellow-400"])},[...M[1]||(M[1]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])],34),l.value?(F(),j("ul",Ak,[(F(!0),j($e,null,un(m.value,(H,k)=>(F(),j("li",{key:k,onMousedown:Vn(C=>u(H),["prevent"]),class:qe(["px-3 py-2 cursor-pointer transition border-b border-gray-700 text-white hover:bg-yellow-400 hover:text-black",i(H)===t.modelValue?"bg-yellow-400 text-black font-semibold":""])},Y(r(H)),43,Rk))),128)),t.allowCustom&&m.value.length===0?(F(),j("li",Sk,"    ")):_e("",!0)])):_e("",!0)]))}},Fi=ui(Ck,[["__scopeId","data-v-f91b8425"]]),kk={swimming:[" "," "," "],running:[""," ","  "," "],cycling:["","Indoor Zwift"],other:[" "," "]},Pk=["",""," ",""],Dk=t=>kk[t]||Pk,Nk={swimming:[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}],running:[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}],cycling:[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}],other:[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}]},Vk=[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}],Vm=t=>Nk[t]||Vk,Ok=[" , . .  36","  , . , 10"," , 61"," , .  5"," , . ., 18","",""," "," "],Mk="",Lk="",Fk="",Uk="",mv=new URL("/HTF/assets/icon-swimming-BaKitOA7.png",import.meta.url).href,gv=new URL("/HTF/assets/icon-running-CXWM86tb.png",import.meta.url).href,yv=new URL("/HTF/assets/icon-cycling-BWF-ICF6.png",import.meta.url).href,_v=new URL("/HTF/assets/icon-other-CNe9co9v.png",import.meta.url).href,vv=[{value:"swimming",label:"",icon:Mk,iconImg:mv,name:""},{value:"running",label:"",icon:Lk,iconImg:gv,name:""},{value:"cycling",label:"",icon:Fk,iconImg:yv,name:""},{value:"other",label:"",icon:Uk,iconImg:_v,name:""}],$k=t=>{const e=vv.find(n=>n.value===t||n.name===t);return e?e.icon:""};async function Bk(){try{const t=_i(qn(rt,"schedules")),e=await kr(t),n=[];return e.forEach(s=>{n.push({id:s.id,...s.data()})}),n.sort((s,r)=>new Date(r.weekStart)-new Date(s.weekStart))}catch(t){throw console.error("  :",t),t}}async function wv(t,e){try{const n=t.toISOString().split("T")[0],s=e.toISOString().split("T")[0],r=_i(qn(rt,"schedules")),i=await kr(r),o=[];return i.forEach(l=>{const c=l.data(),u=c.weekStart,h=c.weekEnd;u>=n&&h<=s&&o.push({id:l.id,...c})}),o.length>0?(o.sort((l,c)=>{const u=new Date(l.createdAt||0);return new Date(c.createdAt||0)-u}),o[0]):null}catch(n){throw console.error("  :",n),n}}async function jk(t,e,n,s){try{return(await Zd(qn(rt,"schedules"),{weekStart:t,weekEnd:e,trainings:n,createdAt:new Date().toISOString(),createdBy:s||"unknown"})).id}catch(r){throw console.error("  :",r),r}}const Hk={class:"bg-gray-800/50 backdrop-blur-md rounded-2xl shadow-lg p-2 sm:p-4"},qk={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4"},zk={key:0,class:"flex items-center gap-2"},Gk=["disabled"],Wk=["disabled"],Kk={key:1,class:"text-gray-500 text-sm"},Qk={key:2,class:"text-gray-400 text-sm"},Yk={class:"mb-4 sm:mb-6 p-2 sm:p-4 bg-gray-800/70 rounded-lg border-2 border-yellow-400"},Xk={class:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4"},Jk={key:0,class:"text-yellow-400 text-sm mt-2 font-semibold"},Zk={class:"space-y-4 sm:space-y-6"},eP={class:"text-lg sm:text-xl font-bold mb-2 sm:mb-4 text-yellow-400"},tP={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-4"},nP={class:"flex gap-2"},sP=["onUpdate:modelValue"],rP={class:"md:col-span-2"},iP={class:"flex gap-2"},oP=["onClick"],aP=["onClick"],lP={key:0,class:"mt-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg"},cP={key:1,class:"mt-4 p-4 bg-green-100 border-2 border-green-500 text-green-800 rounded-lg shadow-lg animate-pulse"},uP={key:2,class:"mt-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg"},dP={key:3,class:"mt-8 p-4 bg-gray-800/70 rounded-xl border-2 border-white"},hP={class:"flex flex-col items-center gap-4"},fP={__name:"FormSchedule",props:{notification:Object},emits:["show-notification"],setup(t,{emit:e}){const n=e,s=ie(null),r=ie(null),i=ie(null),o=ie(!1),l=ie(!1),c=ie(!1),u=ie(""),h=ie(""),p=ie(!1),m=ie([]),y=ie(0),D=ie(!1),N=ie(!1),M=ie(""),H=ie(0),k=ie([{id:"monday",name:"",trainings:[]},{id:"tuesday",name:"",trainings:[]},{id:"wednesday",name:"",trainings:[]},{id:"thursday",name:"",trainings:[]},{id:"friday",name:"'",trainings:[]},{id:"saturday",name:"",trainings:[]},{id:"sunday",name:"",trainings:[]}]),C=ie(Ok);function P(q,J,U=""){n("show-notification",q,J,U)}async function O(){try{D.value=!0;const q=await Bk();m.value=q,m.value.length>0&&(y.value=0)}catch(q){console.error("  :",q)}finally{D.value=!1}}const B=et(()=>m.value.length===0?null:m.value[y.value]);function v(q,J){const U=new Date(q),me=new Date(J),ze=ke=>{const wt=String(ke.getDate()).padStart(2,"0"),it=String(ke.getMonth()+1).padStart(2,"0");return`${wt}.${it}`};return`${ze(U)} - ${ze(me)}`}function w(){y.value<m.value.length-1&&y.value++}function b(){y.value>0&&y.value--}function S(){const q=B.value;q&&(u.value=q.weekStart,h.value=q.weekEnd,k.value.forEach(J=>{J.trainings=[]}),q.trainings&&Array.isArray(q.trainings)&&q.trainings.forEach(J=>{const U=R(J.dayName),me=k.value.find(ze=>ze.id===U);me&&me.trainings.push({name:J.name,time:J.time,type:J.type,difficulty:J.difficulty,address:J.address,isPaid:J.isPaid||!1})}),P("success","   !      .",""))}function R(q){return{:"monday",:"tuesday",:"wednesday",:"thursday","'":"friday",:"saturday",:"sunday"}[q]||"monday"}function A(q){const J=k.value.find(U=>U.id===q);J&&J.trainings.push({type:"swimming",name:"",difficulty:"ELEMENTARY",time:"07:00",isPaid:"",address:"",error:!1})}function E(q){const J=q.target;if(J&&typeof J.showPicker=="function")try{J.showPicker()}catch{}}rs(()=>k.value.map(q=>q.trainings.map(J=>J.type)),(q,J)=>{k.value.forEach((U,me)=>{U.trainings.forEach((ze,ke)=>{const wt=J[me]?.[ke],it=q[me]?.[ke];if(wt&&it&&wt!==it){const z=Vm(ze.type);z.length>0&&(ze.difficulty=z[0].value),ze.name=""}})})},{deep:!0});function De(q,J){const U=k.value.find(me=>me.id===q);U&&U.trainings.splice(J,1)}async function Se(){l.value=!1,c.value=!1;let q=!1;if((!u.value||!h.value)&&(c.value=!0,q=!0),k.value.forEach(fe=>{fe.trainings.forEach(ye=>{ye.error=!1,(!ye.name||!ye.type||!ye.difficulty||!ye.time||!ye.address)&&(ye.error=!0,q=!0)})}),q){l.value=!0,H.value++,await hl(),P("error"," ,   '  (  *)"," ");return}o.value=!0,await new Promise(fe=>setTimeout(fe,100)),await document.fonts.ready;const J=s.value;if(!J){console.error("Canvas not found");return}const U=J.getContext("2d");J.width=1080,J.height=1920,U.fillStyle="#2C3E5F",U.fillRect(0,0,J.width,J.height),U.fillStyle="#FFD700",U.font="bold 70px Montserrat",U.textAlign="center",U.fillText("  HTF",J.width/2,120),U.font="bold 26px Montserrat";const me=U.measureText("($) - ").width;U.font="26px Montserrat";const ze=U.measureText(" ").width,ke=me+ze,wt=J.width-60-ke;U.fillStyle="#FFD700",U.font="bold 26px Montserrat",U.textAlign="left",U.fillText("($) - ",wt,150),U.fillStyle="#ffffff",U.font="26px Montserrat",U.fillText(" ",wt+me,150),U.fillStyle="#ffffff",U.font="26px Montserrat",U.textAlign="right",U.fillText(" ",J.width-60,180);const it={},z=[{type:"swimming",src:mv},{type:"running",src:gv},{type:"cycling",src:yv},{type:"other",src:_v}].map(({type:fe,src:ye})=>new Promise(T=>{const x=new Image;x.onload=()=>{it[fe]=x,T()},x.onerror=()=>T(),x.src=ye}));await Promise.all(z);let ee=220;const ce={:"",:"",:"",:"","'":"",:"",:""};k.value.forEach(fe=>{if(fe.trainings.length>0){const ye=[];fe.trainings.forEach(le=>{const be=ye.find(Re=>Re.type===le.type&&Re.isPaid===le.isPaid&&Re.address===le.address&&Re.name===le.name);if(be){const Re=be.difficultyTimes.find(Pe=>Pe.difficulty===le.difficulty);Re?Re.times.push(le.time):be.difficultyTimes.push({difficulty:le.difficulty,times:[le.time]})}else ye.push({type:le.type,name:le.name,isPaid:le.isPaid,address:le.address,difficultyTimes:[{difficulty:le.difficulty,times:[le.time]}]})});const T=[];let x=15;ye.forEach((le,be)=>{const Pe=28+(le.difficultyTimes.length-1)*35,ct=Math.max(Pe,60)+30;T.push(ct),x+=ct,be<ye.length-1&&(x+=15)}),x+=15;const V=x,G=45,K=V;U.fillStyle="#FFD700",U.beginPath(),U.moveTo(55,ee),U.lineTo(40+G,ee),U.lineTo(40+G,ee+K),U.lineTo(55,ee+K),U.arcTo(40,ee+K,40,ee+K-15,15),U.lineTo(40,ee+15),U.arcTo(40,ee,55,ee,15),U.closePath(),U.fill(),U.fillStyle="#000000",U.font="32px Montserrat",U.textAlign="center";const ae=(ce[fe.name]||fe.name.substring(0,2)).toUpperCase().split(""),se=38,ne=ae.length*se,Z=ee+(K-ne)/2+30;ae.forEach((le,be)=>{U.fillText(le,40+G/2,Z+be*se)});const ue=40+G,re=J.width-ue-50;U.fillStyle="#2C3E5F",U.beginPath(),U.moveTo(ue,ee),U.lineTo(ue+re-15,ee),U.arcTo(ue+re,ee,ue+re,ee+15,15),U.lineTo(ue+re,ee+V-15),U.arcTo(ue+re,ee+V,ue+re-15,ee+V,15),U.lineTo(ue,ee+V),U.closePath(),U.fill(),U.strokeStyle="#FFD700",U.lineWidth=4,U.beginPath(),U.moveTo(55,ee),U.lineTo(ue+re-15,ee),U.arcTo(ue+re,ee,ue+re,ee+15,15),U.lineTo(ue+re,ee+V-15),U.arcTo(ue+re,ee+V,ue+re-15,ee+V,15),U.lineTo(55,ee+V),U.arcTo(40,ee+V,40,ee+V-15,15),U.lineTo(40,ee+15),U.arcTo(40,ee,55,ee,15),U.closePath(),U.stroke();let pe=ee+15;ye.forEach((le,be)=>{const Re=T[be],lt=(Re-55)/2,ct=it[le.type];if(ct&&U.drawImage(ct,ue+20,pe+lt,50,50),U.fillStyle="#ffffff",U.font="300 32px Montserrat",U.textAlign="left",U.fillText(le.name,ue+85,pe+lt+25),le.isPaid){const tt=U.measureText(le.name).width;U.fillStyle="#FFD700",U.fillText(" ($)",ue+85+tt,pe+lt+25)}U.fillStyle="#D1D5DB",U.font="20px Montserrat",U.fillText(le.address,ue+85,pe+lt+55);const Pt=ue+re-350,Jt=28+(le.difficultyTimes.length-1)*35;let ut=pe+(Re-Jt)/2;le.difficultyTimes.forEach((tt,Pr)=>{U.font="20px Montserrat",U.textAlign="left";const Gn=U.measureText(tt.difficulty).width,bi=15,Xs=Gn+bi*2;U.strokeStyle="#FFD700",U.lineWidth=2,U.strokeRect(Pt,ut,Xs,28),U.fillStyle="#FFD700",U.fillText(tt.difficulty,Pt+bi,ut+20),U.fillStyle="#ffffff",U.font="22px Montserrat",U.textAlign="right";const $o=tt.times.join(" | ");U.fillText($o,ue+re-30,ut+18),ut+=35}),pe+=Re,be<ye.length-1&&(pe+=7.5,U.strokeStyle="#FFD700",U.lineWidth=1,U.beginPath(),U.moveTo(ue+20,pe),U.lineTo(ue+re-20,pe),U.stroke(),pe+=7.5)}),ee+=V+25}})}function Le(){const q=s.value;if(!q)return;const J=document.createElement("a");J.download="htf-schedule.png",J.href=q.toDataURL("image/png"),J.click()}function te(q){const J=new Date(u.value),me={monday:0,tuesday:1,wednesday:2,thursday:3,friday:4,saturday:5,sunday:6}[q],ze=new Date(J);return ze.setDate(J.getDate()+me),ze.toISOString().split("T")[0]}async function I(){if(p.value=!1,N.value=!1,M.value="",l.value=!1,c.value=!1,!u.value||!h.value){c.value=!0,N.value=!0,M.value="      ";return}let q=!1;if(k.value.forEach(J=>{J.trainings.forEach(U=>{U.error=!1,(!U.name||!U.type||!U.difficulty||!U.time||!U.address)&&(U.error=!0,q=!0)})}),q){l.value=!0,N.value=!0,M.value="  '  ";return}try{const J=[];if(k.value.forEach(me=>{if(me.trainings.length>0){const ze=te(me.id);me.trainings.forEach(ke=>{J.push({date:ze,dayName:me.name,type:ke.type,name:ke.name,difficulty:ke.difficulty,time:ke.time,isPaid:ke.isPaid==="paid",address:ke.address,createdAt:new Date().toISOString(),createdBy:Ye.currentUser?.email||"unknown"})})}}),await jk(u.value,h.value,J,Ye.currentUser?.email||"unknown"))p.value=!0,P("success",`  ${J.length} `," "),setTimeout(()=>{p.value=!1},5e3),await O();else throw new Error("   ID  ")}catch(J){console.error("  :",J),N.value=!0,M.value=J.message||"   "}}return pn(()=>{O()}),(q,J)=>(F(),j("div",Hk,[d("div",qk,[J[4]||(J[4]=d("h1",{class:"text-3xl font-bold text-yellow-400"}," ",-1)),m.value.length>0?(F(),j("div",zk,[d("button",{onClick:w,disabled:y.value===m.value.length-1,class:qe(["px-3 py-2 rounded-lg font-bold transition-colors border-2",y.value===m.value.length-1?"bg-gray-600 text-gray-400 cursor-not-allowed border-gray-600":"border-white text-white hover:border-yellow-400 hover:text-yellow-400"]),title:" "}," < ",10,Gk),d("button",{onClick:S,class:"px-4 py-2 bg-yellow-400 hover:bg-yellow-500 text-black rounded-lg font-semibold transition-colors border-2 border-yellow-400",title:"   "},Y(B.value?`${y.value+1}: ${v(B.value.weekStart,B.value.weekEnd)}`:" "),1),d("button",{onClick:b,disabled:y.value===0,class:qe(["px-3 py-2 rounded-lg font-bold transition-colors border-2",y.value===0?"bg-gray-600 text-gray-400 cursor-not-allowed border-gray-600":"border-white text-white hover:border-yellow-400 hover:text-yellow-400"]),title:" "}," > ",10,Wk)])):D.value?(F(),j("div",Kk,"  ... ")):(F(),j("div",Qk,"    "))]),d("div",Yk,[J[7]||(J[7]=d("h3",{class:"text-lg font-bold text-yellow-400 mb-4"}," ",-1)),d("div",Xk,[d("div",null,[J[5]||(J[5]=d("label",{class:"block text-sm font-semibold text-white mb-2"},"   *",-1)),Ue(d("input",{ref_key:"startDateInput",ref:r,"onUpdate:modelValue":J[0]||(J[0]=U=>u.value=U),type:"date",onClick:J[1]||(J[1]=U=>E(U)),class:qe(["w-full px-3 py-2 border-2 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 cursor-pointer bg-gray-700 text-white",c.value&&!u.value?"border-red-500":"border-white hover:border-yellow-400"])},null,2),[[Je,u.value]])]),d("div",null,[J[6]||(J[6]=d("label",{class:"block text-sm font-semibold text-white mb-2"},"   *",-1)),Ue(d("input",{ref_key:"endDateInput",ref:i,"onUpdate:modelValue":J[2]||(J[2]=U=>h.value=U),type:"date",onClick:J[3]||(J[3]=U=>E(U)),class:qe(["w-full px-3 py-2 border-2 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 cursor-pointer bg-gray-700 text-white",c.value&&!h.value?"border-red-500":"border-white hover:border-yellow-400"])},null,2),[[Je,h.value]])])]),c.value?(F(),j("p",Jk," '      ")):_e("",!0)]),d("div",Zk,[(F(!0),j($e,null,un(k.value,U=>(F(),j("div",{key:U.id,class:"border-2 border-yellow-400 rounded-xl p-2 sm:p-4 bg-gray-800/70"},[d("h3",eP,Y(U.name),1),(F(!0),j($e,null,un(U.trainings,(me,ze)=>(F(),j("div",{key:`${U.id}-${ze}-${H.value}`,class:"mb-2 sm:mb-4 p-2 sm:p-4 bg-gray-700/50 rounded-lg shadow-sm border-2 border-yellow-400"},[d("div",tP,[d("div",null,[J[8]||(J[8]=d("label",{class:"block text-sm font-semibold text-white mb-2"},"  *",-1)),d("div",nP,[Ae(Fi,{modelValue:me.type,"onUpdate:modelValue":ke=>me.type=ke,options:ot(vv),placeholder:"  *",hasError:!!(me.error&&!me.type)},null,8,["modelValue","onUpdate:modelValue","options","hasError"]),Ae(Fi,{modelValue:me.name,"onUpdate:modelValue":ke=>me.name=ke,options:ot(Dk)(me.type),placeholder:"  *",hasError:!!(me.error&&!me.name),allowCustom:!0},null,8,["modelValue","onUpdate:modelValue","options","hasError"])])]),d("div",null,[J[9]||(J[9]=d("label",{class:"block text-sm font-semibold text-white mb-2"}," *",-1)),Ae(Fi,{modelValue:me.difficulty,"onUpdate:modelValue":ke=>me.difficulty=ke,options:ot(Vm)(me.type),placeholder:" *",hasError:!!(me.error&&!me.difficulty)},null,8,["modelValue","onUpdate:modelValue","options","hasError"])]),d("div",null,[J[10]||(J[10]=d("label",{class:"block text-sm font-semibold text-white mb-2"},"  *",-1)),Ue(d("input",{"onUpdate:modelValue":ke=>me.time=ke,type:"time",class:qe(["w-full px-3 py-2 border-2 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 bg-gray-700 text-white",me.error&&!me.time?"border-red-500":"border-white hover:border-yellow-400"])},null,10,sP),[[Je,me.time]])]),d("div",null,[J[11]||(J[11]=d("label",{class:"block text-sm font-semibold text-white mb-2"}," ",-1)),Ae(Fi,{modelValue:me.isPaid,"onUpdate:modelValue":ke=>me.isPaid=ke,options:[{value:"",label:""},{value:"paid",label:" "}],placeholder:""},null,8,["modelValue","onUpdate:modelValue"])]),d("div",rP,[J[13]||(J[13]=d("label",{class:"block text-sm font-semibold text-white mb-2"}," *",-1)),d("div",iP,[Ae(Fi,{modelValue:me.address,"onUpdate:modelValue":ke=>me.address=ke,options:C.value,placeholder:"  *",hasError:me.error&&!me.address,allowCustom:!0},null,8,["modelValue","onUpdate:modelValue","options","hasError"]),d("button",{onClick:ke=>De(U.id,ze),class:"px-3 py-2 bg-transparent border-2 border-white text-white rounded-lg transition hover:border-red-400 hover:text-red-400"},[...J[12]||(J[12]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)])],8,oP)])])])]))),128)),d("button",{onClick:me=>A(U.id),class:"w-full mt-2 px-4 py-2 border-2 border-yellow-400 text-white rounded-lg transition hover:border-white hover:text-yellow-400"},"    ",8,aP)]))),128))]),l.value?(F(),j("div",lP,[...J[14]||(J[14]=[d("p",{class:"font-semibold"},"  ",-1),d("p",null," ,   '  (  *)",-1)])])):_e("",!0),d("div",{class:"mt-8 flex gap-4"},[d("button",{onClick:Se,class:"flex-1 px-6 py-3 border-2 border-white text-white font-semibold rounded-lg transition text-lg hover:border-yellow-400 hover:text-yellow-400"},"    "),d("button",{onClick:I,class:"flex-1 px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition text-lg border-2 border-yellow-400"},"      ")]),p.value?(F(),j("div",cP,[...J[15]||(J[15]=[d("p",{class:"font-bold text-lg"},"  !",-1),d("p",null,"      Firebase",-1)])])):_e("",!0),N.value?(F(),j("div",uP,[J[16]||(J[16]=d("p",{class:"font-semibold"},"  ",-1)),d("p",null,Y(M.value),1)])):_e("",!0),o.value?(F(),j("div",dP,[J[17]||(J[17]=d("h3",{class:"text-xl font-bold mb-4 text-yellow-400"}," ",-1)),d("div",hP,[d("canvas",{ref_key:"scheduleCanvas",ref:s,class:"border-2 border-white rounded-lg shadow-lg max-w-full"},null,512),d("button",{onClick:Le,class:"px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition border-2 border-yellow-400"},"    ")])])):_e("",!0)]))}},pP={class:"bg-gray-800/50 backdrop-blur-md rounded-2xl shadow-lg p-2 sm:p-4"},mP={class:"text-3xl font-bold mb-6 text-yellow-400"},gP={key:0,class:"text-center py-12"},yP={key:1,class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},_P={class:"space-y-4"},vP={class:"flex items-center justify-between mb-4"},wP={class:"text-xl font-bold text-yellow-400"},bP={class:"text-sm text-white"},EP={key:0,class:"text-center py-12 bg-gray-700/50 rounded-lg border-2 border-dashed border-white"},TP={class:"text-white"},IP={key:1,class:"space-y-4 max-h-[600px] overflow-y-auto pr-2"},xP={key:0,class:"mb-3"},AP=["src"],RP={key:1,class:"mb-3 h-32 bg-gray-600 rounded-lg flex items-center justify-center"},SP={class:"font-bold text-lg mb-2 text-yellow-400"},CP={class:"text-sm text-white mb-2 line-clamp-2"},kP=["href"],PP={class:"flex gap-2 mt-3"},DP=["onClick"],NP=["onClick"],VP={class:"text-xs text-gray-400 mt-2"},OP={class:"space-y-6 lg:sticky lg:top-4 lg:self-start"},MP={class:"flex items-center justify-between mb-4"},LP={class:"text-xl font-bold text-yellow-400"},FP={class:"flex gap-4"},UP=["disabled"],$P={key:0},BP={key:1},jP={__name:"ItemsManager",props:{title:{type:String,default:"  "},listTitle:{type:String,default:"  "},formCreateTitle:{type:String,default:"  "},formEditTitle:{type:String,default:"  "},emptyMessage:{type:String,default:"  "},items:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},saving:{type:Boolean,default:!1},editingId:{type:String,default:null}},emits:["edit","delete","save","cancel"],setup(t){function e(n){return n?new Date(n).toLocaleString("uk-UA",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):""}return(n,s)=>(F(),j("div",pP,[d("h1",mP,Y(t.title),1),t.loading?(F(),j("div",gP,[...s[3]||(s[3]=[d("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-yellow-400 mx-auto mb-4"},null,-1),d("p",{class:"text-white"},"...",-1)])])):(F(),j("div",yP,[d("div",_P,[d("div",vP,[d("h2",wP,Y(t.listTitle),1),d("span",bP,": "+Y(t.items.length),1)]),t.items.length===0?(F(),j("div",EP,[s[4]||(s[4]=d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 mx-auto text-white mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1)),d("p",TP,Y(t.emptyMessage),1),s[5]||(s[5]=d("p",{class:"text-gray-300 text-sm"},"     ",-1))])):(F(),j("div",IP,[(F(!0),j($e,null,un(t.items,r=>(F(),j("div",{key:r.id,class:qe(["bg-gray-700/50 border-2 rounded-lg p-4 hover:shadow-lg transition cursor-pointer",t.editingId===r.id?"border-yellow-400 shadow-lg":"border-white"])},[s[7]||(s[7]=Ke(` @click="$emit('edit', item)"> `,-1)),Yh(n.$slots,"item-card",{item:r},()=>[r.imageUrl||r.imageBase64?(F(),j("div",xP,[d("img",{src:r.imageUrl||r.imageBase64,alt:"Item",class:"w-full h-32 object-cover rounded-lg"},null,8,AP)])):(F(),j("div",RP,[...s[6]||(s[6]=[d("span",{class:"text-gray-400"}," ",-1)])])),d("h3",SP,Y(r.title),1),d("p",CP,Y(r.description),1),r.link?(F(),j("a",{key:2,href:r.link,target:"_blank",class:"text-xs text-yellow-400 hover:underline block mb-3 truncate"},"  "+Y(r.link),9,kP)):_e("",!0)]),d("div",PP,[d("button",{onClick:Vn(i=>n.$emit("edit",r),["stop"]),class:"flex-1 px-3 py-2 border-2 border-white text-white text-sm rounded transition hover:border-yellow-400 hover:text-yellow-400"},"   ",8,DP),d("button",{onClick:Vn(i=>n.$emit("delete",r.id),["stop"]),class:"px-3 py-2 border-2 border-white text-white text-sm rounded transition hover:border-red-400 hover:text-red-400"},"  ",8,NP)]),d("p",VP,": "+Y(e(r.updatedAt)),1)],2))),128))]))]),d("div",OP,[d("div",MP,[d("h2",LP,Y(t.editingId?t.formEditTitle:t.formCreateTitle),1),t.editingId?(F(),j("button",{key:0,onClick:s[0]||(s[0]=r=>n.$emit("cancel")),class:"text-sm text-white hover:text-yellow-400 transition"},"   ")):_e("",!0)]),Yh(n.$slots,"form"),d("div",FP,[d("button",{onClick:s[1]||(s[1]=r=>n.$emit("save")),disabled:t.saving,class:"flex-1 px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed border-2 border-yellow-400"},[t.saving?(F(),j("span",$P," ...")):(F(),j("span",BP,Y(t.editingId?" ":" "),1))],8,UP),t.editingId?(F(),j("button",{key:0,onClick:s[2]||(s[2]=r=>n.$emit("cancel")),class:"px-6 py-3 border-2 border-white text-white font-semibold rounded-lg transition hover:border-gray-400 hover:text-gray-400"},"   ")):_e("",!0)])])]))]))}};async function bv(){try{const t=await kr(qn(rt,"donations")),e=[];return t.forEach(n=>{e.push({id:n.id,...n.data()})}),e.sort((n,s)=>new Date(s.updatedAt||0)-new Date(n.updatedAt||0)),e}catch(t){throw console.error("  :",t),t}}async function HP(t){try{return(await Zd(qn(rt,"donations"),{createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),...t})).id}catch(e){throw console.error("  :",e),e}}async function qP(t,e){try{const n=$t(rt,"donations",t);return await ps(n,{updatedAt:new Date().toISOString(),...e}),t}catch(n){throw console.error("  :",n),n}}async function zP(t){try{return await iv($t(rt,"donations",t)),!0}catch(e){throw console.error("  :",e),e}}const GP={class:"border-2 border-dashed border-white rounded-xl p-6 text-center hover:border-yellow-400 transition bg-gray-700/50"},WP={key:0,class:"mb-4"},KP=["src"],QP={key:1},YP={key:0,class:"text-yellow-400 text-sm mt-1 font-semibold"},XP={key:0,class:"text-yellow-400 text-sm mt-1 font-semibold"},JP={key:0,class:"text-yellow-400 text-sm mt-1 font-semibold"},ZP={__name:"DonationsManager",emits:["show-notification"],setup(t,{emit:e}){const n=e,s=ie(!1),r=ie(!1),i=ie(""),o=ie(null),l=ie([]),c=ie(null),u=ie(null),h=ie({title:"",description:"",link:""}),p=ie({title:"",description:"",link:""});async function m(){try{s.value=!0,l.value=await bv()}catch(O){console.error("  :",O),n("show-notification","error","  ","")}finally{s.value=!1}}function y(O){c.value=O.id,h.value.title=O.title||"",h.value.description=O.description||"",h.value.link=O.link||"",O.imageBase64?i.value=O.imageBase64:i.value="",o.value=null,window.scrollTo({top:0,behavior:"smooth"})}function D(){c.value=null,P()}async function N(O){if(confirm(" ,     ?"))try{await zP(O),n("show-notification","success","  ",""),await m(),c.value===O&&D()}catch(B){console.error(" :",B),n("show-notification","error","  ","")}}function M(O){const B=O.target.files[0];if(!B)return;if(!B.type.includes("png")){n("show-notification","warning"," ,    PNG"," ");return}if(B.size>1024*1024){n("show-notification","warning","  .  1MB"," ");return}o.value=B;const v=new FileReader;v.onload=w=>{i.value=w.target.result},v.readAsDataURL(B)}function H(){i.value="",o.value=null,u.value&&(u.value.value="")}function k(){p.value={title:"",description:"",link:""};let O=!0;return h.value.title.trim()||(p.value.title=" '",O=!1),h.value.description.trim()||(p.value.description=" '",O=!1),h.value.link.trim()?h.value.link.startsWith("http")||(p.value.link="    http://  https://",O=!1):(p.value.link=" '",O=!1),O}async function C(){if(!k()){n("show-notification","warning","  ' "," ");return}try{r.value=!0;const O={title:h.value.title.trim(),description:h.value.description.trim(),link:h.value.link.trim(),imageBase64:i.value||""};c.value?(await qP(c.value,O),n("show-notification","success","  ","")):(await HP(O),n("show-notification","success","   ","")),await m(),D()}catch(O){console.error(" :",O),n("show-notification","error",O.message||"   ","")}finally{r.value=!1}}function P(){h.value={title:"",description:"",link:""},H(),p.value={title:"",description:"",link:""}}return pn(()=>{m()}),(O,B)=>(F(),tn(jP,{title:"  ","list-title":"  ","form-create-title":"  ","form-edit-title":"  ","empty-message":"  ",items:l.value,loading:s.value,saving:r.value,"editing-id":c.value,onEdit:y,onDelete:N,onSave:C,onCancel:D},{form:Ht(()=>[d("div",GP,[i.value?(F(),j("div",WP,[d("img",{src:i.value,alt:"Preview",class:"max-h-64 mx-auto rounded-lg shadow-md"},null,8,KP),d("button",{onClick:H,class:"mt-4 px-4 py-2 border-2 border-white text-white rounded-lg transition hover:border-red-400 hover:text-red-400"},"    ")])):(F(),j("div",QP,[B[4]||(B[4]=d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 mx-auto text-white mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),B[5]||(B[5]=d("p",{class:"text-white mb-2"},"  (PNG)",-1)),d("input",{ref_key:"fileInput",ref:u,type:"file",accept:"image/png",onChange:M,class:"hidden"},null,544),d("button",{onClick:B[0]||(B[0]=v=>O.$refs.fileInput.click()),class:"px-6 py-3 border-2 border-white text-white rounded-lg transition"},"    ")]))]),d("div",null,[B[6]||(B[6]=d("label",{class:"block text-sm font-semibold text-white mb-2"}," *",-1)),Ue(d("input",{"onUpdate:modelValue":B[1]||(B[1]=v=>h.value.title=v),type:"text",placeholder:":  ",class:qe(["w-full px-4 py-3 border-2 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 bg-gray-700 text-white",p.value.title?"border-red-500":"border-white"])},null,2),[[Je,h.value.title]]),p.value.title?(F(),j("p",YP," "+Y(p.value.title),1)):_e("",!0)]),d("div",null,[B[7]||(B[7]=d("label",{class:"block text-sm font-semibold text-white mb-2"}," *",-1)),Ue(d("textarea",{"onUpdate:modelValue":B[2]||(B[2]=v=>h.value.description=v),rows:"4",placeholder:"  ...",class:qe(["w-full px-4 py-3 border-2 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 bg-gray-700 text-white",p.value.description?"border-red-500":"border-white"])},null,2),[[Je,h.value.description]]),p.value.description?(F(),j("p",XP," "+Y(p.value.description),1)):_e("",!0)]),d("div",null,[B[8]||(B[8]=d("label",{class:"block text-sm font-semibold text-white mb-2"},"   *",-1)),Ue(d("input",{"onUpdate:modelValue":B[3]||(B[3]=v=>h.value.link=v),type:"url",placeholder:"https://send.monobank.ua/...",class:qe(["w-full px-4 py-3 border-2 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 bg-gray-700 text-white",p.value.link?"border-red-500":"border-white"])},null,2),[[Je,h.value.link]]),p.value.link?(F(),j("p",JP," "+Y(p.value.link),1)):_e("",!0)])]),_:1},8,["items","loading","saving","editing-id"]))}},ku="/HTF/assets/icon-swimming-BaKitOA7.png",Pu="/HTF/assets/icon-cycling-BWF-ICF6.png",Du="/HTF/assets/icon-running-CXWM86tb.png",Nu="/HTF/assets/icon-other-CNe9co9v.png",eD={class:"bg-gray-800/50 backdrop-blur-md rounded-2xl shadow-lg p-4 sm:p-6 overflow-auto h-full"},tD={class:"grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-4 mb-6"},nD={class:"bg-gray-700/50 rounded-lg p-3 text-center"},sD={class:"text-2xl font-bold text-yellow-400"},rD={class:"bg-gray-700/50 rounded-lg p-3 text-center"},iD={class:"text-2xl font-bold text-green-400"},oD={class:"bg-gray-700/50 rounded-lg p-3 text-center"},aD={class:"text-2xl font-bold text-orange-400"},lD={class:"bg-gray-700/50 rounded-lg p-3 text-center"},cD={class:"text-2xl font-bold text-blue-400"},uD={class:"bg-gray-700/50 rounded-lg p-3 text-center"},dD={class:"text-2xl font-bold text-green-500"},hD={class:"bg-gray-700/50 rounded-lg p-3 text-center"},fD={class:"text-2xl font-bold text-red-400"},pD={class:"mb-6 flex gap-2 flex-wrap"},mD={class:"overflow-x-auto"},gD={class:"w-full text-sm"},yD={class:"py-3 px-2 text-gray-300"},_D={class:"py-3 px-2 text-gray-300"},vD={class:"py-3 px-2"},wD={class:"py-3 px-2"},bD={class:"py-3 px-2"},ED=["onClick"],TD={class:"py-3 px-2"},ID=["onClick"],xD={class:"py-3 px-2"},AD=["onClick"],RD={class:"py-3 px-2 text-gray-400 text-xs"},SD={class:"py-3 px-2"},CD={class:"flex gap-2"},kD=["onClick"],PD=["onClick"],DD=["onClick"],ND=["onClick"],VD=["onClick"],OD={key:0,class:"border-b border-gray-700"},MD={class:"bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6"},LD={class:"flex justify-between items-center mb-4"},FD={class:"space-y-4"},UD={class:"text-gray-300 mb-2"},$D={class:"text-gray-400 text-sm"},BD={class:"text-green-400 font-bold"},jD={class:"border-t border-gray-700 pt-4"},HD={class:"bg-gray-700/30 rounded p-3 border border-gray-600"},qD={class:"space-y-2"},zD={class:"flex gap-3 pt-4"},GD={class:"bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6"},WD={class:"flex justify-between items-center mb-4"},KD={class:"space-y-4"},QD={class:"bg-gray-700/30 rounded p-4 border border-gray-600"},YD={class:"mb-4"},XD={class:"text-green-400 font-bold text-lg"},JD={class:"text-yellow-300 font-bold text-lg"},ZD={class:"flex gap-3 pt-4"},eN={class:"bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6"},tN={class:"flex justify-between items-center mb-4"},nN={class:"space-y-4"},sN={class:"text-gray-300 mb-2"},rN={class:"text-gray-400 text-sm"},iN={class:"text-orange-400 font-bold"},oN={class:"border-t border-gray-700 pt-4"},aN={class:"flex gap-3 pt-4"},lN={class:"bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-96 overflow-y-auto p-6"},cN={class:"flex justify-between items-center mb-4"},uN={class:"space-y-3 text-sm"},dN={class:"grid grid-cols-2 gap-4"},hN={class:"text-white font-semibold"},fN={class:"text-white font-semibold"},pN={class:"text-white font-semibold"},mN={class:"text-white font-semibold"},gN={class:"text-white font-semibold"},yN={class:"text-white font-semibold"},_N={class:"text-white font-semibold"},vN={class:"text-white font-semibold"},wN={class:"text-white font-semibold"},bN={class:"text-green-400 font-semibold"},EN={key:0},TN={class:"text-orange-400 font-semibold"},IN={class:"mt-4 pt-4 border-t border-gray-700"},xN={class:"grid grid-cols-2 gap-3"},AN={class:"bg-gray-700/30 rounded p-3"},RN={class:"flex justify-between text-xs"},SN={class:"text-white font-bold"},CN={class:"flex justify-between text-xs mt-1"},kN={class:"text-green-400 font-bold"},PN={class:"bg-gray-700/30 rounded p-3"},DN={class:"flex justify-between text-xs"},NN={class:"text-white font-bold"},VN={class:"flex justify-between text-xs mt-1"},ON={class:"text-green-400 font-bold"},MN={class:"bg-gray-700/30 rounded p-3"},LN={class:"flex justify-between text-xs"},FN={class:"text-white font-bold"},UN={class:"flex justify-between text-xs mt-1"},$N={class:"text-green-400 font-bold"},BN={class:"bg-gray-700/30 rounded p-3"},jN={class:"flex justify-between text-xs"},HN={class:"text-white font-bold"},qN={class:"flex justify-between text-xs mt-1"},zN={class:"text-green-400 font-bold"},GN={key:0,class:"mt-4 pt-4 border-t border-gray-700"},WN={class:"text-white mt-2 p-3 bg-gray-700 rounded"},KN={class:"mt-4 pt-4 border-t border-gray-700"},QN={class:"bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6"},YN={class:"flex justify-between items-center mb-4"},XN={class:"text-xl font-bold text-yellow-400"},JN={class:"grid grid-cols-2 gap-3"},ZN={class:"bg-gradient-to-br from-blue-900/50 to-blue-800/30 rounded-lg p-4 border border-blue-600"},e3={class:"space-y-2"},t3={class:"flex justify-between items-center text-sm"},n3={class:"bg-blue-600/50 px-2 py-1 rounded text-white font-bold"},s3={class:"bg-gradient-to-br from-orange-900/50 to-orange-800/30 rounded-lg p-4 border border-orange-600"},r3={class:"space-y-2"},i3={class:"flex justify-between items-center text-sm"},o3={class:"bg-orange-600/50 px-2 py-1 rounded text-white font-bold"},a3={class:"bg-gradient-to-br from-red-900/50 to-red-800/30 rounded-lg p-4 border border-red-600"},l3={class:"space-y-2"},c3={class:"flex justify-between items-center text-sm"},u3={class:"bg-red-600/50 px-2 py-1 rounded text-white font-bold"},d3={class:"bg-gradient-to-br from-purple-900/50 to-purple-800/30 rounded-lg p-4 border border-purple-600"},h3={class:"space-y-2"},f3={class:"flex justify-between items-center text-sm"},p3={class:"bg-purple-600/50 px-2 py-1 rounded text-white font-bold"},m3={class:"mt-4 pt-4 border-t border-gray-700"},g3={class:"bg-yellow-600/20 rounded-lg p-3 border border-yellow-600/50"},y3={class:"flex justify-between items-center"},_3={class:"text-yellow-300 font-bold text-lg"},v3={__name:"UsersManager",setup(t){const e=ie([]),n=ie({total:0,approved:0,pending:0,admins:0,active:0,blocked:0}),s=ie(""),r=ie(""),i=ie(""),o=ie(null),l=ie(""),c=ie({show:!1,user:null}),u=ie({show:!1,user:null,newAmount:0,previousAmount:0}),h=ie({show:!1,oldAmount:0,newAmount:0}),p=ie({show:!1,user:null,discountPercent:0}),m=ie({show:!1,type:"success",message:""}),y=et(()=>e.value.filter(te=>{const I=r.value===""||te.email.toLowerCase().includes(r.value.toLowerCase())||te.displayName&&te.displayName.toLowerCase().includes(r.value.toLowerCase());let q=!0;return i.value==="pending"?q=!te.isApproved:i.value==="approved"?q=te.isApproved&&te.status==="active":i.value==="blocked"&&(q=te.status==="blocked"),I&&q}));function D(te,I){return I==="blocked"?"inline-block px-2 py-1 bg-red-600/50 text-red-300 rounded text-xs font-semibold":te?"inline-block px-2 py-1 bg-green-600/50 text-green-300 rounded text-xs font-semibold":"inline-block px-2 py-1 bg-orange-600/50 text-orange-300 rounded text-xs font-semibold"}function N(te,I){return I==="blocked"?" ":te?" ":" "}function M(te){return te?new Date(te).toLocaleDateString("uk-UA"):"-"}function H(te){o.value=te,l.value=te.notes||""}function k(te){u.value.user=te,u.value.newAmount=te.amount||0,u.value.previousAmount=te.amount||0,u.value.show=!0}function C(te){u.value.newAmount=(u.value.newAmount||0)+te}function P(){if(!u.value.user||u.value.newAmount<0){Se("error"," ");return}h.value={show:!0,oldAmount:u.value.previousAmount,newAmount:u.value.newAmount}}async function O(){try{const te=u.value.newAmount;await x4(u.value.user.id,te,s.value);const I=e.value.findIndex(q=>q.id===u.value.user.id);I!==-1&&(e.value[I].amount=te),Se("success",`   ${te} `),h.value.show=!1,u.value.show=!1,await Le()}catch(te){console.error("   :",te),Se("error","   ")}}function B(te){c.value.user=te,c.value.show=!0}function v(te){p.value.user=te,p.value.discountPercent=te.discount?.percent||0,p.value.show=!0}async function w(){if(!p.value.user||p.value.discountPercent<0||p.value.discountPercent>100){Se("error","  ");return}try{const te=p.value.discountPercent;if(te===0||te===null){const q=$t(rt,"users",p.value.user.id);await ps(q,{discount:null,updatedAt:new Date().toISOString(),updatedBy:s.value})}else{const q=$t(rt,"users",p.value.user.id);await ps(q,{discount:{percent:te,appliedAt:new Date().toISOString(),appliedBy:s.value,previousAmount:p.value.user.amount||0},updatedAt:new Date().toISOString(),updatedBy:s.value})}const I=e.value.findIndex(q=>q.id===p.value.user.id);I!==-1&&(te===0?e.value[I].discount=null:e.value[I].discount={percent:te,appliedAt:new Date().toISOString(),appliedBy:s.value,previousAmount:e.value[I].amount||0}),Se("success",`   ${te}%`),p.value.show=!1,await Le()}catch(te){console.error("   :",te),Se("error","   ")}}function b(te){return te.trainingStats?(te.trainingStats.swimming?.registered||0)+(te.trainingStats.cycling?.registered||0)+(te.trainingStats.running?.registered||0)+(te.trainingStats.other?.registered||0):0}async function S(te){try{await b4(te,!0,s.value);const I=e.value.findIndex(q=>q.id===te);I!==-1&&(e.value[I].isApproved=!0),Se("success"," "),await Le()}catch(I){console.error("  :",I),Se("error","   ")}}async function R(te){try{await Nm(te,"blocked",s.value),Se("success"," "),await Le()}catch(I){console.error("  :",I),Se("error","   ")}}async function A(te){try{await Nm(te,"active",s.value),Se("success"," "),await Le()}catch(I){console.error("  :",I),Se("error","   ")}}async function E(te){try{await E4(te,"admin",s.value),Se("success","  "),await Le()}catch(I){console.error("   :",I),Se("error","   ")}}async function De(){if(o.value)try{await I4(o.value.id,l.value,s.value),o.value.notes=l.value,Se("success"," ")}catch(te){console.error("   :",te),Se("error","  ")}}function Se(te,I){m.value={show:!0,type:te,message:I}}async function Le(){try{e.value=await dv(),n.value=await A4()}catch(te){console.error("   :",te),Se("error","   ")}}return pn(()=>{hi(Ye,async te=>{te&&(s.value=te.uid,await Le())})}),(te,I)=>(F(),j("div",eD,[I[82]||(I[82]=d("div",{class:"mb-6"},[d("h2",{class:"text-2xl font-bold text-yellow-400 mb-2"},"  "),d("p",{class:"text-gray-300"},"   ,    ")],-1)),d("div",tD,[d("div",nD,[d("div",sD,Y(n.value.total),1),I[22]||(I[22]=d("div",{class:"text-xs text-gray-400"}," ",-1))]),d("div",rD,[d("div",iD,Y(n.value.approved),1),I[23]||(I[23]=d("div",{class:"text-xs text-gray-400"},"",-1))]),d("div",oD,[d("div",aD,Y(n.value.pending),1),I[24]||(I[24]=d("div",{class:"text-xs text-gray-400"},"",-1))]),d("div",lD,[d("div",cD,Y(n.value.admins),1),I[25]||(I[25]=d("div",{class:"text-xs text-gray-400"},"",-1))]),d("div",uD,[d("div",dD,Y(n.value.active),1),I[26]||(I[26]=d("div",{class:"text-xs text-gray-400"},"",-1))]),d("div",hD,[d("div",fD,Y(n.value.blocked),1),I[27]||(I[27]=d("div",{class:"text-xs text-gray-400"},"",-1))])]),d("div",pD,[Ue(d("input",{"onUpdate:modelValue":I[0]||(I[0]=q=>r.value=q),type:"text",placeholder:"  email  ...",class:"flex-1 min-w-48 px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-yellow-400"},null,512),[[Je,r.value]]),Ue(d("select",{"onUpdate:modelValue":I[1]||(I[1]=q=>i.value=q),class:"px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-yellow-400"},[...I[28]||(I[28]=[d("option",{value:""}," ",-1),d("option",{value:"pending"},"",-1),d("option",{value:"approved"},"",-1),d("option",{value:"blocked"},"",-1)])],512),[[Yi,i.value]])]),d("div",mD,[d("table",gD,[I[30]||(I[30]=d("thead",null,[d("tr",{class:"border-b border-gray-600 text-yellow-400"},[d("th",{class:"text-left py-3 px-2"},"Email"),d("th",{class:"text-left py-3 px-2"},"'"),d("th",{class:"text-left py-3 px-2"},""),d("th",{class:"text-left py-3 px-2"},""),d("th",{class:"text-left py-3 px-2"}," "),d("th",{class:"text-left py-3 px-2"}," "),d("th",{class:"text-left py-3 px-2"},""),d("th",{class:"text-left py-3 px-2"},""),d("th",{class:"text-left py-3 px-2"},"")])],-1)),d("tbody",null,[(F(!0),j($e,null,un(y.value,q=>(F(),j("tr",{key:q.id,class:"border-b border-gray-700 hover:bg-gray-700/30 transition"},[d("td",yD,Y(q.email),1),d("td",_D,Y(q.displayName||"-"),1),d("td",vD,[d("span",{class:qe(D(q.isApproved,q.status))},Y(N(q.isApproved,q.status)),3)]),d("td",wD,[d("span",{class:qe(q.role==="admin"?"text-blue-400":"text-gray-400")},Y(q.role==="admin"?" ":""),3)]),d("td",bD,[d("button",{onClick:J=>k(q),class:"px-3 py-1 bg-green-600/50 hover:bg-green-600 text-green-300 rounded text-sm transition font-semibold"},"  "+Y(q.amount||0),9,ED)]),d("td",TD,[d("button",{onClick:J=>v(q),class:"px-3 py-1 bg-orange-600/50 hover:bg-orange-600 text-orange-300 rounded text-sm transition font-semibold"},"  "+Y(q.discount?.percent||0)+"% ",9,ID)]),d("td",xD,[d("button",{onClick:J=>B(q),class:"px-3 py-1 bg-gray-600 hover:bg-yellow-500 hover:text-black text-white rounded text-xs transition font-bold"},"  "+Y(b(q)),9,AD)]),d("td",RD,Y(M(q.registeredAt)),1),d("td",SD,[d("div",CD,[q.isApproved?_e("",!0):(F(),j("button",{key:0,onClick:J=>S(q.id),class:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-xs transition",title:""},"  ",8,kD)),q.isApproved&&q.status!=="blocked"?(F(),j("button",{key:1,onClick:J=>R(q.id),class:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-xs transition",title:""},"  ",8,PD)):_e("",!0),q.status==="blocked"?(F(),j("button",{key:2,onClick:J=>A(q.id),class:"px-3 py-1 bg-orange-600 hover:bg-orange-700 text-white rounded text-xs transition",title:""},"  ",8,DD)):_e("",!0),q.role==="user"?(F(),j("button",{key:3,onClick:J=>E(q.id),class:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-xs transition",title:" "},"  ",8,ND)):_e("",!0),d("button",{onClick:J=>H(q),class:"px-3 py-1 bg-gray-600 hover:bg-gray-700 text-white rounded text-xs transition",title:""},"  ",8,VD)])])]))),128)),y.value.length===0?(F(),j("tr",OD,[...I[29]||(I[29]=[d("td",{colspan:"6",class:"py-4 text-center text-gray-400"},"    ",-1)])])):_e("",!0)])])]),u.value.show&&u.value.user?(F(),j("div",{key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:I[8]||(I[8]=Vn(q=>u.value.show=!1,["self"]))},[d("div",MD,[d("div",LD,[I[31]||(I[31]=d("h3",{class:"text-xl font-bold text-yellow-400"},"  ",-1)),d("button",{onClick:I[2]||(I[2]=q=>u.value.show=!1),class:"text-2xl text-gray-400 hover:text-white"},"  ")]),d("div",FD,[d("div",null,[d("p",UD,Y(u.value.user.email),1),d("p",$D,[I[32]||(I[32]=Ke(" : ",-1)),d("span",BD,Y(u.value.user.amount||0)+" ",1)])]),d("div",jD,[I[33]||(I[33]=d("label",{class:"text-gray-300 block mb-2 font-semibold"}," ",-1)),Ue(d("input",{"onUpdate:modelValue":I[3]||(I[3]=q=>u.value.newAmount=q),type:"number",step:"0.01",class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white placeholder-gray-400 focus:outline-none focus:border-yellow-400",placeholder:" ..."},null,512),[[Je,u.value.newAmount,void 0,{number:!0}]])]),d("div",HD,[I[34]||(I[34]=d("div",{class:"text-xs text-gray-400 mb-2"}," :",-1)),d("div",qD,[d("button",{onClick:I[4]||(I[4]=q=>C(50)),class:"w-full px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm transition font-semibold"}," + 50  "),d("button",{onClick:I[5]||(I[5]=q=>C(100)),class:"w-full px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm transition font-semibold"}," + 100  "),d("button",{onClick:I[6]||(I[6]=q=>C(500)),class:"w-full px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm transition font-semibold"}," + 500  ")])]),d("div",zD,[d("button",{onClick:I[7]||(I[7]=q=>u.value.show=!1),class:"flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded font-semibold transition"},"  "),d("button",{onClick:P,class:"flex-1 px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-black font-semibold rounded transition"},"  ")])])])])):_e("",!0),h.value.show?(F(),j("div",{key:1,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:I[11]||(I[11]=Vn(q=>h.value.show=!1,["self"]))},[d("div",GD,[d("div",WD,[I[35]||(I[35]=d("h3",{class:"text-xl font-bold text-yellow-400"},"  ",-1)),d("button",{onClick:I[9]||(I[9]=q=>h.value.show=!1),class:"text-2xl text-gray-400 hover:text-white"},"  ")]),d("div",KD,[d("div",QD,[d("div",YD,[I[36]||(I[36]=d("p",{class:"text-gray-400 text-sm mb-2"}," :",-1)),d("p",XD,Y(h.value.oldAmount)+" ",1)]),I[38]||(I[38]=d("div",{class:"flex justify-center items-center my-4"},[d("div",{class:"text-yellow-400 text-2xl"},"")],-1)),d("div",null,[I[37]||(I[37]=d("p",{class:"text-gray-400 text-sm mb-2"}," :",-1)),d("p",JD,Y(h.value.newAmount)+" ",1)])]),I[39]||(I[39]=d("p",{class:"text-gray-300 text-sm text-center"},"       ? ",-1)),d("div",ZD,[d("button",{onClick:I[10]||(I[10]=q=>h.value.show=!1),class:"flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded font-semibold transition"},"  "),d("button",{onClick:O,class:"flex-1 px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-semibold rounded transition"},"  ")])])])])):_e("",!0),p.value.show&&p.value.user?(F(),j("div",{key:2,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:I[15]||(I[15]=Vn(q=>p.value.show=!1,["self"]))},[d("div",eN,[d("div",tN,[I[40]||(I[40]=d("h3",{class:"text-xl font-bold text-orange-400"},"  ",-1)),d("button",{onClick:I[12]||(I[12]=q=>p.value.show=!1),class:"text-2xl text-gray-400 hover:text-white"},"  ")]),d("div",nN,[d("div",null,[d("p",sN,Y(p.value.user.email),1),d("p",rN,[I[41]||(I[41]=Ke(" : ",-1)),d("span",iN,Y(p.value.user.discount?.percent||0)+"%",1)])]),d("div",oN,[I[42]||(I[42]=d("label",{class:"text-gray-300 block mb-2 font-semibold"},"  (%)",-1)),Ue(d("input",{"onUpdate:modelValue":I[13]||(I[13]=q=>p.value.discountPercent=q),type:"number",min:"0",max:"100",step:"0.1",class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white placeholder-gray-400 focus:outline-none focus:border-yellow-400",placeholder:"   (0-100)..."},null,512),[[Je,p.value.discountPercent,void 0,{number:!0}]])]),d("div",aN,[d("button",{onClick:I[14]||(I[14]=q=>p.value.show=!1),class:"flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded font-semibold transition"},"  "),d("button",{onClick:w,class:"flex-1 px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white font-semibold rounded transition"},"  ")])])])])):_e("",!0),o.value?(F(),j("div",{key:3,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:I[18]||(I[18]=Vn(q=>o.value=null,["self"]))},[d("div",lN,[d("div",cN,[I[43]||(I[43]=d("h3",{class:"text-xl font-bold text-yellow-400"}," ",-1)),d("button",{onClick:I[16]||(I[16]=q=>o.value=null),class:"text-2xl text-gray-400 hover:text-white"},"  ")]),d("div",uN,[d("div",dN,[d("div",null,[I[44]||(I[44]=d("span",{class:"text-gray-400"},"Email:",-1)),d("div",hN,Y(o.value.email),1)]),d("div",null,[I[45]||(I[45]=d("span",{class:"text-gray-400"},"':",-1)),d("div",fN,Y(o.value.displayName||"-"),1)]),d("div",null,[I[46]||(I[46]=d("span",{class:"text-gray-400"},":",-1)),d("div",pN,Y(N(o.value.isApproved,o.value.status)),1)]),d("div",null,[I[47]||(I[47]=d("span",{class:"text-gray-400"},":",-1)),d("div",mN,Y(o.value.role==="admin"?"":""),1)]),d("div",null,[I[48]||(I[48]=d("span",{class:"text-gray-400"}," :",-1)),d("div",gN,Y(o.value.experienceLevel||"-"),1)]),d("div",null,[I[49]||(I[49]=d("span",{class:"text-gray-400"},":",-1)),d("div",yN,Y(o.value.specialization||"-"),1)]),d("div",null,[I[50]||(I[50]=d("span",{class:"text-gray-400"}," :",-1)),d("div",_N,Y(M(o.value.registeredAt)),1)]),d("div",null,[I[51]||(I[51]=d("span",{class:"text-gray-400"}," :",-1)),d("div",vN,Y(M(o.value.lastLoginAt)),1)]),d("div",null,[I[52]||(I[52]=d("span",{class:"text-gray-400"},":",-1)),d("div",wN,Y(o.value.loginCount),1)]),d("div",null,[I[53]||(I[53]=d("span",{class:"text-gray-400"},":",-1)),d("div",bN,Y(o.value.amount||0)+" ",1)]),o.value.discount?.percent?(F(),j("div",EN,[I[54]||(I[54]=d("span",{class:"text-gray-400"},":",-1)),d("div",TN,Y(o.value.discount.percent)+"%",1)])):_e("",!0)]),d("div",IN,[I[70]||(I[70]=d("span",{class:"text-gray-400 block font-bold mb-3"},"  :",-1)),d("div",xN,[d("div",AN,[I[57]||(I[57]=d("img",{src:ku,alt:"",class:"w-6 h-6 inline mr-1"},null,-1)),I[58]||(I[58]=Ke("  ",-1)),d("div",RN,[I[55]||(I[55]=d("span",{class:"text-gray-400"},":",-1)),d("span",SN,Y(o.value.trainingStats?.swimming?.registered||0),1)]),d("div",CN,[I[56]||(I[56]=d("span",{class:"text-gray-400"},":",-1)),d("span",kN,Y(o.value.trainingStats?.swimming?.completed||0),1)])]),d("div",PN,[I[61]||(I[61]=d("img",{src:Pu,alt:"",class:"w-6 h-6 inline mr-1"},null,-1)),I[62]||(I[62]=Ke("  ",-1)),d("div",DN,[I[59]||(I[59]=d("span",{class:"text-gray-400"},":",-1)),d("span",NN,Y(o.value.trainingStats?.cycling?.registered||0),1)]),d("div",VN,[I[60]||(I[60]=d("span",{class:"text-gray-400"},":",-1)),d("span",ON,Y(o.value.trainingStats?.cycling?.completed||0),1)])]),d("div",MN,[I[65]||(I[65]=d("div",{class:"text-center text-sm font-semibold text-red-400 mb-2"},[d("img",{src:Du,alt:"",class:"w-6 h-6 inline mr-1"}),Ke(" ")],-1)),d("div",LN,[I[63]||(I[63]=d("span",{class:"text-gray-400"},":",-1)),d("span",FN,Y(o.value.trainingStats?.running?.registered||0),1)]),d("div",UN,[I[64]||(I[64]=d("span",{class:"text-gray-400"},":",-1)),d("span",$N,Y(o.value.trainingStats?.running?.completed||0),1)])]),d("div",BN,[I[68]||(I[68]=d("img",{src:Nu,alt:"",class:"w-6 h-6 inline mr-1"},null,-1)),I[69]||(I[69]=Ke("  ",-1)),d("div",jN,[I[66]||(I[66]=d("span",{class:"text-gray-400"},":",-1)),d("span",HN,Y(o.value.trainingStats?.other?.registered||0),1)]),d("div",qN,[I[67]||(I[67]=d("span",{class:"text-gray-400"},":",-1)),d("span",zN,Y(o.value.trainingStats?.other?.completed||0),1)])])])]),o.value.notes?(F(),j("div",GN,[I[71]||(I[71]=d("span",{class:"text-gray-400"}," :",-1)),d("div",WN,Y(o.value.notes),1)])):_e("",!0),d("div",KN,[I[72]||(I[72]=d("label",{class:"text-gray-400 block mb-2"}," :",-1)),Ue(d("textarea",{"onUpdate:modelValue":I[17]||(I[17]=q=>l.value=q),class:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white placeholder-gray-400 focus:outline-none focus:border-yellow-400",placeholder:" ...",rows:"3"},null,512),[[Je,l.value]]),d("button",{onClick:De,class:"mt-2 px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-black font-semibold rounded transition"},"   ")])])])])):_e("",!0),c.value.show&&c.value.user?(F(),j("div",{key:4,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:I[20]||(I[20]=Vn(q=>c.value.show=!1,["self"]))},[d("div",QN,[d("div",YN,[d("h3",XN," "+Y(c.value.user.displayName||c.value.user.email),1),d("button",{onClick:I[19]||(I[19]=q=>c.value.show=!1),class:"text-2xl text-gray-400 hover:text-white"},"  ")]),d("div",JN,[d("div",ZN,[I[74]||(I[74]=d("div",{class:"text-center text-sm font-bold text-blue-300 mb-3"},[d("img",{src:ku,alt:"",class:"w-6 h-6 inline mr-1"}),Ke(" ")],-1)),d("div",e3,[d("div",t3,[I[73]||(I[73]=d("span",{class:"text-gray-300"},":",-1)),d("span",n3,Y(c.value.user.trainingStats?.swimming?.registered||0),1)])])]),d("div",s3,[I[76]||(I[76]=d("div",{class:"text-center text-sm font-bold text-orange-300 mb-3"},[d("img",{src:Pu,alt:"",class:"w-6 h-6 inline mr-1"}),Ke(" ")],-1)),d("div",r3,[d("div",i3,[I[75]||(I[75]=d("span",{class:"text-gray-300"},":",-1)),d("span",o3,Y(c.value.user.trainingStats?.cycling?.registered||0),1)])])]),d("div",a3,[I[78]||(I[78]=d("div",{class:"text-center text-sm font-bold text-red-300 mb-3"},[d("img",{src:Du,alt:"",class:"w-6 h-6 inline mr-1"}),Ke(" ")],-1)),d("div",l3,[d("div",c3,[I[77]||(I[77]=d("span",{class:"text-gray-300"},":",-1)),d("span",u3,Y(c.value.user.trainingStats?.running?.registered||0),1)])])]),d("div",d3,[I[80]||(I[80]=d("div",{class:"text-center text-sm font-bold text-purple-300 mb-3"},[d("img",{src:Nu,alt:"",class:"w-6 h-6 inline mr-1"}),Ke(" ")],-1)),d("div",h3,[d("div",f3,[I[79]||(I[79]=d("span",{class:"text-gray-300"},":",-1)),d("span",p3,Y(c.value.user.trainingStats?.other?.registered||0),1)])])])]),d("div",m3,[d("div",g3,[d("div",y3,[I[81]||(I[81]=d("span",{class:"text-gray-300 font-bold"}," :",-1)),d("span",_3,Y(b(c.value.user)),1)])])])])])):_e("",!0),Ae(Ql,{show:m.value.show,type:m.value.type,message:m.value.message,onClose:I[21]||(I[21]=q=>m.value.show=!1)},null,8,["show","type","message"])]))}};async function w3(t){try{const e=Ye.currentUser.uid,n=await Zd(qn(rt,"registrations"),{userId:e,userEmail:Ye.currentUser.email,userName:Ye.currentUser.displayName||Ye.currentUser.email,userPhoto:Ye.currentUser.photoURL||null,registeredAt:new Date().toISOString(),...t}),s=t.trainingType||"other",r=$t(rt,"users",e);try{await ps(r,{[`trainingStats.${s}.registered`]:ov(1),updatedAt:new Date().toISOString()})}catch(i){console.warn("   (,  ):",i)}return n.id}catch(e){throw console.error("   :",e),e}}async function b3(t){try{const e=_i(qn(rt,"registrations"),Za("userId","==",t));return(await kr(e)).docs.map(s=>s.data().trainingId)}catch(e){throw console.error("   :",e),e}}async function E3(t){try{const e=_i(qn(rt,"registrations"),Za("scheduleId","==",t));return(await kr(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){throw console.error("   :",e),e}}async function T3(t,e,n="other"){try{const s=_i(qn(rt,"registrations"),Za("userId","==",t),Za("trainingId","==",e)),r=await kr(s);if(!r.empty){const i=r.docs[0],o=i.data();await iv(i.ref);const l=o.trainingType||n||"other",c=$t(rt,"users",t);try{await ps(c,{[`trainingStats.${l}.registered`]:ov(-1),updatedAt:new Date().toISOString()})}catch(u){console.warn("    :",u)}return!0}return!1}catch(s){throw console.error("  :",s),s}}const I3={class:"bg-gray-800/50 backdrop-blur-md rounded-2xl shadow-lg p-2 sm:p-4"},x3={key:0,class:"text-center py-12"},A3={key:1,class:"text-center py-12"},R3={key:2,class:"space-y-4 sm:space-y-6"},S3={class:"bg-gray-700/70 text-white px-4 sm:px-6 py-3 sm:py-4 border-b-2 border-yellow-400 flex items-center justify-between"},C3={class:"text-xl sm:text-2xl font-bold text-yellow-400"},k3={class:"text-sm text-gray-300"},P3={class:"p-2 sm:p-4 space-y-3 sm:space-y-4 bg-gray-700/50"},D3={class:"flex items-center justify-between gap-3 mb-3"},N3={class:"flex items-center gap-2 min-w-0 flex-1"},V3=["src","alt"],O3={class:"text-lg font-bold text-yellow-400 truncate"},M3={class:"text-right"},L3={class:"text-2l font-bold text-white"},F3={class:"flex flex-wrap gap-2 mb-4"},U3={key:0,class:"px-3 py-1 rounded text-xs font-semibold bg-yellow-400 text-black"},$3={class:"space-y-2 mb-4 text-gray-300 text-sm"},B3={class:"flex items-start gap-2"},j3={class:"flex items-center gap-2"},H3=["src","alt"],q3={class:"space-y-2"},z3={key:0,disabled:"",class:"w-full px-4 py-2 rounded-lg font-semibold bg-gray-600 text-gray-400 cursor-not-allowed opacity-60"},G3=["onClick"],W3=["onClick"],K3={class:"flex-1"},Q3={class:"flex flex-wrap items-center gap-2 sm:gap-3 mb-3"},Y3=["src","alt"],X3={class:"text-lg sm:text-xl font-bold text-yellow-400"},J3={key:0,class:"px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-semibold bg-yellow-400 text-black"},Z3={class:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-6 text-gray-300 text-sm"},eV={class:"flex items-center gap-2"},tV={class:"font-semibold"},nV={class:"flex items-center gap-2"},sV={class:"flex items-center gap-2"},rV=["src","alt"],iV={class:"flex flex-col gap-2 flex-shrink-0"},oV={key:0,disabled:"",class:"px-8 py-2 rounded font-semibold text-sm bg-gray-600 text-gray-400 cursor-not-allowed opacity-60 whitespace-nowrap"},aV=["onClick"],lV=["onClick"],cV={key:3,class:"fixed bottom-4 right-4 sm:bottom-8 sm:right-8 bg-yellow-400 text-black px-4 sm:px-6 py-3 sm:py-4 rounded-lg shadow-2xl animate-bounce z-50"},uV={class:"font-semibold text-sm sm:text-base"},Om={__name:"TrainingRegistration",props:{notification:Object},emits:["show-notification"],setup(t,{emit:e}){const n=e,s=ie(!1),r=ie(null),i=ie([]),o=ie("");function l(C,P,O=""){n("show-notification",C,P,O)}const c=()=>{const C=new Date,P=C.getDay(),O=P===0?-6:1-P,B=new Date(C);B.setDate(C.getDate()+O),B.setHours(0,0,0,0);const v=new Date(B);return v.setDate(B.getDate()+6),v.setHours(23,59,59,999),{monday:B,sunday:v}},u=C=>new Date(C).toLocaleDateString("uk-UA",{day:"2-digit",month:"long"}),h=et(()=>{if(!r.value||!r.value.trainings)return{};const C={};r.value.trainings.forEach(B=>{const v=B.dayName;C[v]||(C[v]=[]),C[v].push(B)});const P=["","","","","'","",""],O={};return P.forEach(B=>{C[B]&&(O[B]=C[B].sort((v,w)=>v.time.localeCompare(w.time)))}),O}),p=C=>{const P={swimming:new URL("/HTF/assets/icon-swimming-BaKitOA7.png",import.meta.url).href,running:new URL("/HTF/assets/icon-running-CXWM86tb.png",import.meta.url).href,cycling:new URL("/HTF/assets/icon-cycling-BWF-ICF6.png",import.meta.url).href,other:new URL("/HTF/assets/icon-other-CNe9co9v.png",import.meta.url).href,:new URL("/HTF/assets/icon-swimming-BaKitOA7.png",import.meta.url).href,:new URL("/HTF/assets/icon-running-CXWM86tb.png",import.meta.url).href,:new URL("/HTF/assets/icon-cycling-BWF-ICF6.png",import.meta.url).href,:new URL("/HTF/assets/icon-cycling-BWF-ICF6.png",import.meta.url).href,:new URL("/HTF/assets/icon-other-CNe9co9v.png",import.meta.url).href};if(!C)return P.other;const O=String(C).toLowerCase().trim();return P[O]||P.other},m=C=>({:"bg-green-500 text-white",:"bg-yellow-500 text-black",:"bg-red-500 text-white"})[C]||"bg-gray-500 text-white",y=async()=>{try{s.value=!0;const{monday:C,sunday:P}=c(),O=await wv(C,P);r.value=O,O&&await D()}catch(C){console.error(" :",C)}finally{s.value=!1}},D=async()=>{if(Ye.currentUser)try{const C=await b3(Ye.currentUser.uid);i.value=C}catch{}},N=C=>{const P=`${r.value.id}_${C.date}_${C.time}`;return i.value.includes(P)},M=C=>{const P=new Date(`${C.date}T${C.time}:00`),O=new Date,B=2*60,v=O.getTimezoneOffset(),w=new Date(O.getTime()+(B+v)*6e4);return P<w},H=async C=>{if(!Ye.currentUser){l("warning"," ,     "," ");return}try{const P=`${r.value.id}_${C.date}_${C.time}`;if(N(C))return;await w3({trainingId:P,scheduleId:r.value.id,trainingDate:C.date,trainingTime:C.time,trainingName:C.name,trainingType:C.type}),i.value.push(P),o.value=`   ${C.name}`,setTimeout(()=>{o.value=""},3e3)}catch(P){l("error",P.message," ")}},k=async C=>{if(Ye.currentUser)try{const P=`${r.value.id}_${C.date}_${C.time}`;if(await T3(Ye.currentUser.uid,P)){const B=i.value.indexOf(P);B>-1&&i.value.splice(B,1),o.value=`  ${C.name} `,setTimeout(()=>{o.value=""},3e3)}}catch(P){l("error",P.message," ")}};return pn(()=>{y()}),(C,P)=>(F(),j("div",I3,[P[7]||(P[7]=d("h1",{class:"text-2xl sm:text-3xl font-bold mb-6 text-yellow-400"},"   ",-1)),s.value?(F(),j("div",x3,[...P[0]||(P[0]=[d("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-yellow-400 mx-auto mb-4"},null,-1),d("p",{class:"text-white"}," ...",-1)])])):!r.value||!r.value.trainings||r.value.trainings.length===0?(F(),j("div",A3,[...P[1]||(P[1]=[d("p",{class:"text-white text-lg sm:text-xl mb-4"},"       ",-1),d("p",{class:"text-gray-300"},'     " "',-1)])])):(F(),j("div",R3,[(F(!0),j($e,null,un(h.value,(O,B)=>(F(),j("div",{key:B,class:"border-2 border-yellow-400 rounded-xl overflow-hidden"},[d("div",S3,[d("h2",C3,Y(B),1),d("p",k3,Y(u(O[0].date)),1)]),d("div",P3,[(F(!0),j($e,null,un(O,(v,w)=>(F(),j("div",{key:w,class:"sm:hidden border-2 border-yellow-400 rounded-lg p-4 bg-gray-800"},[d("div",D3,[d("div",N3,[d("img",{src:p(v.type),alt:v.type,class:"w-8 h-8 object-contain flex-shrink-0"},null,8,V3),d("h3",O3,Y(v.name),1)]),d("div",M3,[d("div",L3,Y(v.time),1)])]),d("div",F3,[d("span",{class:qe(["px-3 py-1 rounded text-xs font-semibold",m(v.difficulty)])},Y(v.difficulty),3),v.isPaid?(F(),j("span",U3,"   ")):_e("",!0)]),d("div",$3,[d("div",B3,[P[2]||(P[2]=d("span",null,"",-1)),d("span",null,Y(v.address),1)]),d("div",j3,[d("img",{src:p(v.type),alt:v.type,class:"w-5 h-5 object-contain"},null,8,H3),d("span",null,Y(v.type),1)])]),d("div",q3,[M(v)&&!N(v)?(F(),j("button",z3,"    ")):N(v)?(F(),j($e,{key:2},[P[3]||(P[3]=d("button",{class:"w-full px-4 py-3 rounded-lg font-semibold bg-yellow-400 text-black cursor-default"},"   ",-1)),M(v)?_e("",!0):(F(),j("button",{key:0,onClick:b=>k(v),class:"w-full px-4 py-2 rounded-lg font-semibold border-2 border-white text-white hover:border-red-400 hover:text-red-400 transition-colors"},"   ",8,W3))],64)):(F(),j("button",{key:1,onClick:b=>H(v),class:"w-full px-4 py-3 rounded-lg font-semibold border-2 border-white text-white hover:border-yellow-400 hover:text-yellow-400 transition-colors"},"   ",8,G3))])]))),128)),(F(!0),j($e,null,un(O,(v,w)=>(F(),j("div",{key:w,class:"hidden sm:flex items-center justify-between gap-4 p-4 bg-gray-800 rounded-lg border-2 border-yellow-400 hover:shadow-lg transition-shadow"},[d("div",K3,[d("div",Q3,[d("img",{src:p(v.type),alt:v.type,class:"w-8 h-8 object-contain"},null,8,Y3),d("h3",X3,Y(v.name),1),d("span",{class:qe(["px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-semibold",m(v.difficulty)])},Y(v.difficulty),3),v.isPaid?(F(),j("span",J3,"   ")):_e("",!0)]),d("div",Z3,[d("div",eV,[P[4]||(P[4]=d("span",null,"",-1)),d("span",tV,Y(v.time),1)]),d("div",nV,[P[5]||(P[5]=d("span",null,"",-1)),d("span",null,Y(v.address),1)]),d("div",sV,[d("img",{src:p(v.type),alt:v.type,class:"w-5 h-5 object-contain"},null,8,rV),d("span",null,Y(v.type),1)])])]),d("div",iV,[M(v)&&!N(v)?(F(),j("button",oV,"    ")):N(v)?(F(),j($e,{key:2},[P[6]||(P[6]=d("button",{class:"px-8 py-2 rounded font-semibold text-sm bg-yellow-400 text-black cursor-default whitespace-nowrap"},"   ",-1)),M(v)?_e("",!0):(F(),j("button",{key:0,onClick:b=>k(v),class:"px-8 py-2 rounded font-semibold text-sm border-2 border-white text-white hover:border-red-400 hover:text-red-400 transition-colors whitespace-nowrap"},"   ",8,lV))],64)):(F(),j("button",{key:1,onClick:b=>H(v),class:"px-8 py-2 rounded font-semibold text-sm transition-all border-2 border-white text-white hover:border-yellow-400 hover:text-yellow-400 whitespace-nowrap"},"   ",8,aV))])]))),128))])]))),128))])),o.value?(F(),j("div",cV,[d("p",uV," "+Y(o.value),1)])):_e("",!0)]))}},dV={class:"w-full h-full flex flex-col overflow-y-auto"},hV={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 flex-1"},fV={class:"lg:col-span-2 bg-gray-800/60 backdrop-blur-md rounded-2xl p-6 border-2 border-gray-700"},pV={class:"space-y-4"},mV={class:"lg:col-span-2 bg-gray-800/60 backdrop-blur-md rounded-2xl p-6 border-2 border-gray-700"},gV={class:"space-y-4"},yV={class:"lg:col-span-2 bg-gray-800/60 backdrop-blur-md rounded-2xl p-6 border-2 border-gray-700"},_V={class:"space-y-4"},vV={class:"lg:col-span-2 bg-gray-800/60 backdrop-blur-md rounded-2xl p-6 border-2 border-gray-700"},wV={class:"space-y-4"},bV={class:"lg:col-span-2 flex gap-3 mt-auto pt-6"},EV=["disabled"],TV={key:0},IV={key:1},xV={__name:"UserProfile",setup(t){const e=Zu(),n=ie({firstName:"",lastName:"",birthDate:"",gender:"",phone:"",city:"",address:"",postalDepartment:"",emergencyContactName:"",emergencyContactPhone:"",experienceLevel:"",specialization:"",bio:""}),s=ie({}),r=ie(!1),i=ie(null),o=ie({show:!1,type:"success",message:""});function l(p,m){o.value={show:!0,type:p,message:m}}const c=async()=>{try{const p=Ye.currentUser;if(!p)return;const m=await Kl(p.uid);m&&(n.value={firstName:m.firstName||"",lastName:m.lastName||"",birthDate:m.birthDate||"",gender:m.gender||"",phone:m.phone||"",city:m.city||"",address:m.address||"",postalDepartment:m.postalDepartment||"",emergencyContactName:m.emergencyContactName||"",emergencyContactPhone:m.emergencyContactPhone||"",experienceLevel:m.experienceLevel||"",specialization:m.specialization||"",bio:m.bio||""},s.value=JSON.parse(JSON.stringify(n.value)))}catch(p){console.error("  :",p),i.value={type:"error",message:"   "}}},u=async()=>{try{r.value=!0;const p=Ye.currentUser;if(!p)throw new Error("  ");const m={};let y=0;if(Object.keys(n.value).forEach(D=>{const N=n.value[D],M=s.value[D];N!==M&&(m[D]=N===""?null:N,y++)}),y===0){l("info","     ");return}await T4(p.uid,m),await c(),l("success","   !"),i.value={type:"success",message:"   "},setTimeout(()=>{i.value=null},3e3)}catch(p){console.error(" :",p),l("error","   : "+p.message),i.value={type:"error",message:"   "}}finally{r.value=!1}},h=()=>{n.value={...s.value},i.value=null};return pn(()=>{Ye.currentUser?c():hi(Ye,p=>{p&&c()})}),rs(()=>e.path,p=>{p==="/user/profile"&&c()}),Gu(()=>{Object.keys(n.value).forEach(p=>{n.value[p]=""})}),(p,m)=>(F(),j("div",dV,[m[34]||(m[34]=d("div",{class:"mb-8"},[d("h1",{class:"text-3xl font-bold text-yellow-400 mb-2"},"  "),d("p",{class:"text-gray-300"},"   ")],-1)),d("div",hV,[d("div",fV,[m[19]||(m[19]=d("h2",{class:"text-lg font-semibold text-yellow-400 mb-4"}," ",-1)),d("div",pV,[d("div",null,[m[14]||(m[14]=d("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"'",-1)),Ue(d("input",{"onUpdate:modelValue":m[0]||(m[0]=y=>n.value.firstName=y),type:"text",placeholder:" '",class:"w-full px-4 py-2 bg-gray-700/50 border-2 border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-yellow-400 focus:outline-none transition"},null,512),[[Je,n.value.firstName]])]),d("div",null,[m[15]||(m[15]=d("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"",-1)),Ue(d("input",{"onUpdate:modelValue":m[1]||(m[1]=y=>n.value.lastName=y),type:"text",placeholder:" ",class:"w-full px-4 py-2 bg-gray-700/50 border-2 border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-yellow-400 focus:outline-none transition"},null,512),[[Je,n.value.lastName]])]),d("div",null,[m[16]||(m[16]=d("label",{class:"block text-sm font-medium text-gray-300 mb-1"}," ",-1)),Ue(d("input",{"onUpdate:modelValue":m[2]||(m[2]=y=>n.value.birthDate=y),type:"date",class:"w-full px-4 py-2 bg-gray-700/50 border-2 border-gray-600 rounded-lg text-white focus:border-yellow-400 focus:outline-none transition"},null,512),[[Je,n.value.birthDate]])]),d("div",null,[m[18]||(m[18]=d("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"",-1)),Ue(d("select",{"onUpdate:modelValue":m[3]||(m[3]=y=>n.value.gender=y),class:"w-full px-4 py-2 bg-gray-700/50 border-2 border-gray-600 rounded-lg text-white focus:border-yellow-400 focus:outline-none transition"},[...m[17]||(m[17]=[d("option",{value:""}," ",-1),d("option",{value:"male"},"",-1),d("option",{value:"female"},"",-1),d("option",{value:"other"},"",-1)])],512),[[Yi,n.value.gender]])])])]),d("div",mV,[m[24]||(m[24]=d("h2",{class:"text-lg font-semibold text-yellow-400 mb-4"},"  ",-1)),d("div",gV,[d("div",null,[m[20]||(m[20]=d("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"",-1)),Ue(d("input",{"onUpdate:modelValue":m[4]||(m[4]=y=>n.value.phone=y),type:"tel",placeholder:"+38 (099) 123-45-67",class:"w-full px-4 py-2 bg-gray-700/50 border-2 border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-yellow-400 focus:outline-none transition"},null,512),[[Je,n.value.phone]])]),d("div",null,[m[21]||(m[21]=d("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"",-1)),Ue(d("input",{"onUpdate:modelValue":m[5]||(m[5]=y=>n.value.city=y),type:"text",placeholder:" ",class:"w-full px-4 py-2 bg-gray-700/50 border-2 border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-yellow-400 focus:outline-none transition"},null,512),[[Je,n.value.city]])]),d("div",null,[m[22]||(m[22]=d("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"",-1)),Ue(d("input",{"onUpdate:modelValue":m[6]||(m[6]=y=>n.value.address=y),type:"text",placeholder:", ",class:"w-full px-4 py-2 bg-gray-700/50 border-2 border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-yellow-400 focus:outline-none transition"},null,512),[[Je,n.value.address]])]),d("div",null,[m[23]||(m[23]=d("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"  ",-1)),Ue(d("input",{"onUpdate:modelValue":m[7]||(m[7]=y=>n.value.postalDepartment=y),type:"text",placeholder:":  1",class:"w-full px-4 py-2 bg-gray-700/50 border-2 border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-yellow-400 focus:outline-none transition"},null,512),[[Je,n.value.postalDepartment]])])])]),d("div",yV,[m[27]||(m[27]=d("h2",{class:"text-lg font-semibold text-yellow-400 mb-4"},"     ",-1)),d("div",_V,[d("div",null,[m[25]||(m[25]=d("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"'  ",-1)),Ue(d("input",{"onUpdate:modelValue":m[8]||(m[8]=y=>n.value.emergencyContactName=y),type:"text",placeholder:"'  ",class:"w-full px-4 py-2 bg-gray-700/50 border-2 border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-yellow-400 focus:outline-none transition"},null,512),[[Je,n.value.emergencyContactName]])]),d("div",null,[m[26]||(m[26]=d("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"  ",-1)),Ue(d("input",{"onUpdate:modelValue":m[9]||(m[9]=y=>n.value.emergencyContactPhone=y),type:"tel",placeholder:"+38 (099) 123-45-67",class:"w-full px-4 py-2 bg-gray-700/50 border-2 border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-yellow-400 focus:outline-none transition"},null,512),[[Je,n.value.emergencyContactPhone]])])])]),d("div",vV,[m[33]||(m[33]=d("h2",{class:"text-lg font-semibold text-yellow-400 mb-4"},"   ",-1)),d("div",wV,[d("div",null,[m[29]||(m[29]=d("label",{class:"block text-sm font-medium text-gray-300 mb-1"}," ",-1)),Ue(d("select",{"onUpdate:modelValue":m[10]||(m[10]=y=>n.value.experienceLevel=y),class:"w-full px-4 py-2 bg-gray-700/50 border-2 border-gray-600 rounded-lg text-white focus:border-yellow-400 focus:outline-none transition"},[...m[28]||(m[28]=[is('<option value=""> </option><option value="beginner"></option><option value="intermediate"> </option><option value="advanced"></option><option value="professional"></option>',5)])],512),[[Yi,n.value.experienceLevel]])]),d("div",null,[m[31]||(m[31]=d("label",{class:"block text-sm font-medium text-gray-300 mb-1"},"",-1)),Ue(d("select",{"onUpdate:modelValue":m[11]||(m[11]=y=>n.value.specialization=y),class:"w-full px-4 py-2 bg-gray-700/50 border-2 border-gray-600 rounded-lg text-white focus:border-yellow-400 focus:outline-none transition"},[...m[30]||(m[30]=[is('<option value=""> </option><option value="swimming"></option><option value="cycling"></option><option value="running"></option><option value="triathlon"></option>',5)])],512),[[Yi,n.value.specialization]])]),d("div",null,[m[32]||(m[32]=d("label",{class:"block text-sm font-medium text-gray-300 mb-1"}," ",-1)),Ue(d("textarea",{"onUpdate:modelValue":m[12]||(m[12]=y=>n.value.bio=y),rows:"4",placeholder:"  ...",class:"w-full px-4 py-2 bg-gray-700/50 border-2 border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-yellow-400 focus:outline-none transition resize-none"},null,512),[[Je,n.value.bio]])])])]),d("div",bV,[d("button",{onClick:u,disabled:r.value,class:"flex-1 bg-yellow-500 hover:bg-yellow-600 disabled:bg-gray-500 text-black font-bold py-3 px-6 rounded-lg transition flex items-center justify-center gap-2"},[r.value?(F(),j("span",IV," ...")):(F(),j("span",TV," "))],8,EV),d("button",{onClick:h,class:"flex-1 bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg transition"},"   ")]),i.value?(F(),j("div",{key:0,class:qe(["lg:col-span-2 p-4 rounded-lg",i.value.type==="success"?"bg-green-900/30 border-2 border-green-500 text-green-300":"bg-red-900/30 border-2 border-red-500 text-red-300"])},Y(i.value.message),3)):_e("",!0)]),Ae(Ql,{show:o.value.show,type:o.value.type,message:o.value.message,onClose:m[13]||(m[13]=y=>o.value.show=!1)},null,8,["show","type","message"])]))}},AV={class:"max-w-4xl mx-auto"},RV={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},SV={class:"bg-blue-900/40 border-2 border-blue-400 rounded-lg p-4"},CV={class:"space-y-2"},kV={class:"flex justify-between text-sm"},PV={class:"text-blue-300 font-bold"},DV={class:"bg-green-900/40 border-2 border-green-400 rounded-lg p-4"},NV={class:"space-y-2"},VV={class:"flex justify-between text-sm"},OV={class:"text-green-300 font-bold"},MV={class:"bg-red-900/40 border-2 border-red-400 rounded-lg p-4"},LV={class:"space-y-2"},FV={class:"flex justify-between text-sm"},UV={class:"text-red-300 font-bold"},$V={class:"bg-purple-900/40 border-2 border-purple-400 rounded-lg p-4"},BV={class:"space-y-2"},jV={class:"flex justify-between text-sm"},HV={class:"text-purple-300 font-bold"},qV={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6"},zV={class:"bg-green-900/40 border-2 border-green-400 rounded-lg p-6"},GV={class:"flex items-center justify-between"},WV={class:"text-5xl font-bold text-green-400"},KV={key:0,class:"bg-orange-900/40 border-2 border-orange-400 rounded-lg p-6"},QV={class:"flex items-center justify-between h-full"},YV={class:"text-5xl font-bold text-orange-400"},XV={__name:"Statistics",props:{trainingStats:{type:Object,default:()=>({swimming:{registered:0},cycling:{registered:0},running:{registered:0},other:{registered:0}})},userAmount:{type:Number,default:0},userDiscount:{type:[Number,null],default:null}},setup(t){const e=t,n=et(()=>e.trainingStats);return(s,r)=>(F(),j("div",AV,[r[14]||(r[14]=d("div",{class:"bg-yellow-600/20 border-2 border-yellow-400 rounded-lg p-6 mb-6"},[d("h1",{class:"text-3xl font-bold text-yellow-300 mb-2"}," "),d("p",{class:"text-yellow-100"},"          ")],-1)),d("div",RV,[d("div",SV,[r[1]||(r[1]=d("div",{class:"flex items-center gap-3 mb-3"},[d("img",{src:ku,alt:"",class:"w-8 h-8"}),d("h3",{class:"text-lg font-bold text-blue-300"},"")],-1)),d("div",CV,[d("div",kV,[r[0]||(r[0]=d("span",{class:"text-gray-300"}," :",-1)),d("span",PV,Y(n.value.swimming.registered),1)])])]),d("div",DV,[r[3]||(r[3]=d("div",{class:"flex items-center gap-3 mb-3"},[d("img",{src:Pu,alt:"",class:"w-8 h-8"}),d("h3",{class:"text-lg font-bold text-green-300"},"")],-1)),d("div",NV,[d("div",VV,[r[2]||(r[2]=d("span",{class:"text-gray-300"}," :",-1)),d("span",OV,Y(n.value.cycling.registered),1)])])]),d("div",MV,[r[5]||(r[5]=d("div",{class:"flex items-center gap-3 mb-3"},[d("img",{src:Du,alt:"",class:"w-8 h-8"}),d("h3",{class:"text-lg font-bold text-red-300"},"")],-1)),d("div",LV,[d("div",FV,[r[4]||(r[4]=d("span",{class:"text-gray-300"}," :",-1)),d("span",UV,Y(n.value.running.registered),1)])])]),d("div",$V,[r[7]||(r[7]=d("div",{class:"flex items-center gap-3 mb-3"},[d("img",{src:Nu,alt:"",class:"w-8 h-8"}),d("h3",{class:"text-lg font-bold text-purple-300"},"")],-1)),d("div",BV,[d("div",jV,[r[6]||(r[6]=d("span",{class:"text-gray-300"}," :",-1)),d("span",HV,Y(n.value.other.registered),1)])])])]),d("div",qV,[d("div",zV,[d("div",GV,[d("div",null,[r[8]||(r[8]=d("p",{class:"text-gray-300 text-sm mb-2"},"   ",-1)),d("p",WV,Y(t.userAmount),1),r[9]||(r[9]=d("p",{class:"text-xs text-gray-400 mt-2"},"htfCoin",-1))]),r[10]||(r[10]=d("div",{class:"text-6xl"},"",-1))])]),t.userDiscount?(F(),j("div",KV,[d("div",QV,[d("div",null,[r[11]||(r[11]=d("p",{class:"text-gray-300 text-sm mb-2"},"  ",-1)),d("p",YV,Y(t.userDiscount)+"%",1),r[12]||(r[12]=d("p",{class:"text-xs text-gray-400 mt-2"}," ",-1))]),r[13]||(r[13]=d("div",{class:"text-6xl"},"",-1))])])):_e("",!0)]),r[15]||(r[15]=is('<div class="bg-gray-800/50 backdrop-blur-md rounded-lg p-6 border border-gray-600 mb-6"><h2 class="text-2xl font-bold text-yellow-400 mb-6"> </h2><div class="space-y-3"><div class="bg-gray-700/30 rounded-lg p-4 border-l-4 border-gray-500"><div class="flex justify-between items-center"><div><p class="text-gray-300 font-semibold"> </p><p class="text-xs text-gray-400 mt-1">     &#39; </p></div><span class="text-3xl"></span></div></div></div></div>',1))]))}},JV={key:0,class:"fixed top-0 left-0 right-0 z-50 bg-yellow-600/90 border-b border-yellow-400"},ZV={class:"relative z-10 h-full flex flex-col"},e6={class:"flex flex-col lg:flex-row gap-2 lg:gap-4 p-2 sm:p-4 flex-1 min-h-0 overflow-y-auto"},t6={class:"w-full lg:w-80 bg-gray-800/50 backdrop-blur-md rounded-2xl shadow-lg p-2 sm:p-4 flex-shrink-0 overflow-y-auto flex flex-col mb-2 lg:mb-0"},n6={class:"flex flex-col items-center mb-6 pb-6 border-b border-gray-400"},s6={key:0,class:"w-20 h-20 rounded-full mb-3 shadow-md overflow-hidden bg-gray-200"},r6=["src","alt"],i6={key:1,class:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-bold text-2xl mb-3 shadow-md"},o6={class:"flex items-center justify-center gap-2 w-full"},a6={class:"font-semibold text-yellow-400 text-center"},l6={class:"text-sm text-yellow-400 text-center break-all"},c6={class:"mt-3 w-full"},u6={key:0,class:"text-center"},d6={key:0,class:"inline-block px-3 py-1 bg-green-600/50 text-green-300 rounded-full text-xs font-semibold"},h6={key:1,class:"inline-block px-3 py-1 bg-yellow-600/50 text-yellow-300 rounded-full text-xs font-semibold"},f6={key:1,class:"inline-block px-3 py-1 bg-blue-600/50 text-blue-300 rounded-full text-xs font-semibold w-full text-center"},p6={key:0,class:"mb-6"},m6={class:"flex-1 w-full"},g6={key:0,class:"bg-yellow-600/20 border-2 border-yellow-400 rounded-lg p-6 text-center mb-4"},Yn={__name:"CabinetView",props:{section:String},setup(t){const e=Zu(),n=Ro(),s=ie(""),r=ie(""),i=ie(""),o=ie(!1),l=ie(!1),c=ie("active"),u=ie("training-registration"),h=ie({swimming:{registered:0,completed:0},cycling:{registered:0,completed:0},running:{registered:0,completed:0},other:{registered:0,completed:0}}),p=ie(0),m=ie(null),y=["kulikalovdenis@gmail.com","bugary20@gmail.com"],D=ie({show:!1,type:"success",title:"",message:""});function N(P,O,B=""){D.value={show:!0,type:P,title:B,message:O}}function M(){D.value.show=!1}const H=et(()=>({"form-schedule":fP,"donations-manager":ZP,"users-manager":v3,"training-registration":Om,"user-profile":xV,statistics:XV})[u.value]||Om);async function k(P){try{const O=await Kl(P);O?(l.value=O.isApproved,c.value=O.status,h.value=O.trainingStats||h.value,p.value=O.amount||0,m.value=O.discount?.percent||null):(l.value=!1,c.value="active",p.value=0,m.value=null)}catch(O){console.error("   :",O),l.value=!1,p.value=0,m.value=null}}rs(()=>e.path,P=>{if(P==="/user/profile")u.value="user-profile";else if(P==="/user/registration")u.value="training-registration";else if(P==="/user/statistics"){u.value="statistics";const O=Ye.currentUser;O&&k(O.uid)}else P==="/admin/users"?u.value="users-manager":P==="/admin/schedule"?u.value="form-schedule":P==="/admin/donations"?u.value="donations-manager":P.includes("/user")?u.value="training-registration":P.includes("/admin")?u.value="form-schedule":u.value="training-registration"},{immediate:!0}),pn(()=>{hi(Ye,async P=>{if(P){if(s.value=P.displayName||"",r.value=P.email||"",i.value=P.photoURL||"",o.value=th(P.email,y),await k(P.uid),!o.value&&!l.value){n.push("/register");return}e.path==="/user/registration"?u.value="training-registration":e.path==="/user/statistics"?u.value="statistics":e.path==="/admin/users"?u.value="users-manager":e.path==="/admin/schedule"?u.value="form-schedule":e.path==="/admin/donations"?u.value="donations-manager":e.path.includes("/user")?u.value="training-registration":e.path.includes("/admin")&&o.value?u.value="form-schedule":u.value="training-registration"}})});async function C(){try{await hv(),pv()}catch(P){console.error(" :",P)}}return(P,O)=>(F(),j("div",{class:"relative h-screen bg-cover bg-center bg-fixed overflow-hidden",style:ms({backgroundImage:`url(${ot(wi)})`})},[O[16]||(O[16]=d("div",{class:"absolute inset-0 bg-black opacity-40"},null,-1)),Ae(Ql,{show:D.value.show,type:D.value.type,title:D.value.title,message:D.value.message,onClose:M},null,8,["show","type","title","message"]),!o.value&&!l.value?(F(),j("div",JV,[...O[7]||(O[7]=[d("div",{class:"max-w-7xl mx-auto px-4 py-3 text-center"},[d("p",{class:"text-white font-semibold"},"        ")],-1)])])):_e("",!0),d("div",ZV,[Ae(vi),d("div",e6,[d("aside",t6,[d("div",n6,[i.value?(F(),j("div",s6,[d("img",{src:i.value,alt:s.value,class:"w-full h-full object-cover",referrerpolicy:"no-referrer"},null,8,r6)])):(F(),j("div",i6,Y(s.value?s.value.charAt(0).toUpperCase():"A"),1)),d("div",o6,[d("p",a6,Y(s.value||""),1),d("button",{onClick:C,class:"bg-transparent border-2 border-yellow-400 text-yellow-400 p-1.5 rounded transition flex-shrink-0 hover:border-white hover:text-white",title:""},[...O[8]||(O[8]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z","clip-rule":"evenodd"})],-1)])])]),d("p",l6,Y(r.value),1),d("div",c6,[o.value?(F(),j("div",f6,"   ")):(F(),j("div",u6,[l.value?(F(),j("div",d6,"    ")):(F(),j("div",h6,"    "))]))])]),o.value?(F(),j("div",p6,[O[12]||(O[12]=d("h3",{class:"text-sm font-bold text-yellow-400 uppercase mb-3"},"",-1)),d("button",{onClick:O[0]||(O[0]=B=>ot(n).push("/admin/users")),class:qe(["w-full text-left px-4 py-3 rounded-lg mb-2 transition flex items-center gap-2 border-2 border-white text-white",u.value==="users-manager"?"bg-yellow-400 text-black border-yellow-400":"hover:border-yellow-400 hover:text-yellow-400"])},[...O[9]||(O[9]=[d("span",null,"",-1),d("span",null," ",-1)])],2),d("button",{onClick:O[1]||(O[1]=B=>ot(n).push("/admin/schedule")),class:qe(["w-full text-left px-4 py-3 rounded-lg mb-2 transition flex items-center gap-2 border-2 border-white text-white",u.value==="form-schedule"?"bg-yellow-400 text-black border-yellow-400":"hover:border-yellow-400 hover:text-yellow-400"])},[...O[10]||(O[10]=[d("span",null,"",-1),d("span",null," ",-1)])],2),d("button",{onClick:O[2]||(O[2]=B=>ot(n).push("/admin/donations")),class:qe(["w-full text-left px-4 py-3 rounded-lg mb-2 transition border-2 border-white text-white",u.value==="donations-manager"?"bg-yellow-400 text-black border-yellow-400":"hover:border-yellow-400 hover:text-yellow-400"])},[...O[11]||(O[11]=[d("span",null,"  ",-1)])],2)])):_e("",!0),d("div",null,[O[13]||(O[13]=d("h3",{class:"text-sm font-bold text-yellow-400 uppercase mb-3"},"",-1)),d("button",{onClick:O[3]||(O[3]=B=>ot(n).push("/user/profile")),class:qe(["w-full text-left px-4 py-3 rounded-lg mb-2 transition border-2 border-white text-white",u.value==="user-profile"?"bg-yellow-400 text-black border-yellow-400":"hover:border-yellow-400 hover:text-yellow-400"])},"    ",2),d("button",{onClick:O[4]||(O[4]=B=>ot(n).push("/user/registration")),class:qe(["w-full text-left px-4 py-3 rounded-lg mb-2 transition border-2 border-white text-white",u.value==="training-registration"?"bg-yellow-400 text-black border-yellow-400":"hover:border-yellow-400 hover:text-yellow-400"])},"     ",2),d("button",{onClick:O[5]||(O[5]=B=>ot(n).push("/user/statistics")),class:qe(["w-full text-left px-4 py-3 rounded-lg mb-2 transition border-2 border-white text-white",u.value==="statistics"?"bg-yellow-400 text-black border-yellow-400":"hover:border-yellow-400 hover:text-yellow-400"])},"   ",2)])]),d("main",m6,[!o.value&&!l.value?(F(),j("div",g6,[O[14]||(O[14]=d("h3",{class:"text-xl font-bold text-yellow-300 mb-2"},"   ",-1)),O[15]||(O[15]=d("p",{class:"text-yellow-100"},"   !       .     24 .   ,    . ",-1)),d("button",{onClick:O[6]||(O[6]=B=>ot(n).push("/register")),class:"mt-4 px-6 py-2 bg-yellow-400 hover:bg-yellow-500 text-black font-bold rounded-lg transition"},"    ")])):_e("",!0),o.value||l.value?(F(),tn(Yw(H.value),{key:1,notification:D.value,trainingStats:h.value,userAmount:p.value,userDiscount:m.value,onShowNotification:N},null,40,["notification","trainingStats","userAmount","userDiscount"])):_e("",!0)])])])],4))}},y6={class:"relative z-10 min-h-screen flex flex-col"},_6={class:"flex-1 p-2 sm:p-4 md:p-8"},v6={class:"max-w-6xl mx-auto"},w6={class:"mb-2 sm:mb-4"},b6={key:0,class:"text-center text-white text-xs sm:text-sm"},E6={key:0,class:"bg-gray-800/50 backdrop-blur-md rounded-xl shadow-lg p-4 sm:p-8 text-center border-2 border-yellow-400"},T6={key:1,class:"bg-gray-800/50 backdrop-blur-md rounded-xl shadow-lg p-4 sm:p-8 text-center border-2 border-yellow-400"},I6={key:2,class:"space-y-4 sm:space-y-6"},x6={class:"bg-gray-700/70 text-white px-4 sm:px-6 py-3 sm:py-4 border-b-2 border-yellow-400 flex items-center justify-between"},A6={class:"text-xl sm:text-2xl font-bold text-yellow-400"},R6={class:"text-sm text-gray-300"},S6={class:"p-2 sm:p-4 space-y-3 sm:space-y-4 bg-gray-700/50"},C6={class:"flex flex-col sm:flex-row items-start justify-between gap-3 sm:gap-4"},k6={class:"flex-1 w-full"},P6={class:"flex flex-wrap items-center gap-2 sm:gap-3 mb-2"},D6={class:"text-lg"},N6={class:"text-base sm:text-lg font-bold text-yellow-400"},V6={key:0,class:"px-2 sm:px-3 py-1 rounded text-xs sm:text-sm font-semibold bg-yellow-400 text-black"},O6={class:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-6 text-gray-300 text-xs sm:text-sm"},M6={class:"flex items-center gap-1 flex-shrink-0"},L6={class:"font-semibold"},F6={class:"flex items-center gap-1"},U6={class:"flex items-center gap-1"},$6={class:"flex-shrink-0 w-full sm:w-auto"},B6=["onClick"],j6={class:"text-xs"},H6={key:0,class:"border-t border-gray-600 mt-3 pt-3"},q6={key:0,class:"text-center text-gray-400 text-xs py-2"},z6={key:1,class:"space-y-2"},G6={class:"font-medium"},W6={class:"text-gray-500"},K6={class:"mt-4"},Q6={__name:"ScheduleView",setup(t){const e=ie(!0),n=ie(null),s=ie([]),r=ie(new Set),i=()=>{const k=new Date,C=k.getDay(),P=C===0?-6:1-C,O=new Date(k);O.setDate(k.getDate()+P),O.setHours(0,0,0,0);const B=new Date(O);return B.setDate(O.getDate()+6),B.setHours(23,59,59,999),{monday:O,sunday:B}},o=k=>new Date(k).toLocaleDateString("uk-UA",{day:"2-digit",month:"long"}),l=k=>new Date(k).toLocaleString("uk-UA",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),c=et(()=>{if(!n.value||!n.value.trainings)return{};const k={};n.value.trainings.forEach(O=>{const B=O.dayName;k[B]||(k[B]=[]),k[B].push(O)});const C=["","","","","'","",""],P={};return C.forEach(O=>{k[O]&&(P[O]=k[O].sort((B,v)=>B.time.localeCompare(v.time)))}),P}),u=k=>$k(k),h=k=>({:"bg-green-500 text-white",:"bg-yellow-400 text-black",:"bg-red-500 text-white"})[k]||"bg-gray-500 text-white",p=k=>n.value.id+"_"+k.date+"_"+k.time,m=k=>{const C=p(k);return s.value.filter(P=>P.trainingId===C).length},y=k=>{const C=p(k);return s.value.filter(P=>P.trainingId===C)},D=k=>{const C=p(k);r.value.has(C)?r.value.delete(C):r.value.add(C)},N=k=>{const C=p(k);return r.value.has(C)},M=async()=>{try{e.value=!0;const{monday:k,sunday:C}=i(),P=await wv(k,C);P?(n.value=P,await H(P.id)):n.value=null}catch(k){console.error("  :",k)}finally{e.value=!1}},H=async k=>{try{const C=await E3(k);s.value=C}catch(C){console.error("  :",C)}};return pn(()=>{M()}),(k,C)=>(F(),j("div",{class:"relative min-h-screen bg-cover bg-center bg-fixed overflow-y-auto",style:ms({backgroundImage:`url(${ot(wi)})`})},[C[8]||(C[8]=d("div",{class:"absolute inset-0 bg-black opacity-50"},null,-1)),d("div",y6,[Ae(vi),d("div",_6,[d("div",v6,[d("div",w6,[C[0]||(C[0]=d("h1",{class:"text-lg sm:text-2xl font-bold text-yellow-400 text-center mb-1 flex items-center justify-center gap-2"},[d("span",null,""),Ke("   ")],-1)),n.value?(F(),j("p",b6,Y(o(n.value.weekStart))+" - "+Y(o(n.value.weekEnd)),1)):_e("",!0)]),e.value?(F(),j("div",E6,[...C[1]||(C[1]=[d("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-400 mx-auto mb-2"},null,-1),d("p",{class:"text-white text-sm"}," ...",-1)])])):!n.value||!n.value.trainings||n.value.trainings.length===0?(F(),j("div",T6,[...C[2]||(C[2]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 mx-auto mb-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1),d("p",{class:"text-white text-sm font-bold mb-1"},"   ",-1),d("p",{class:"text-gray-400 text-xs"},"   ",-1)])])):(F(),j("div",I6,[(F(!0),j($e,null,un(c.value,(P,O)=>(F(),j("div",{key:O,class:"border-2 border-yellow-400 rounded-xl overflow-hidden"},[d("div",x6,[d("h2",A6,Y(O),1),d("p",R6,Y(o(P[0].date)),1)]),d("div",S6,[(F(!0),j($e,null,un(P,(B,v)=>(F(),j("div",{key:v,class:"p-3 sm:p-4 bg-gray-800 rounded-lg border-2 border-yellow-400"},[d("div",C6,[d("div",k6,[d("div",P6,[d("span",D6,Y(u(B.type)),1),d("h3",N6,Y(B.name),1),d("span",{class:qe(["px-2 sm:px-3 py-1 rounded text-xs sm:text-sm font-semibold",h(B.difficulty)])},Y(B.difficulty),3),B.isPaid?(F(),j("span",V6,"   ")):_e("",!0)]),d("div",O6,[d("div",M6,[C[3]||(C[3]=d("span",null,"",-1)),d("span",L6,Y(B.time),1)]),d("div",F6,[C[4]||(C[4]=d("span",null,"",-1)),d("span",null,Y(B.address),1)]),d("div",U6,[C[5]||(C[5]=d("span",null,"",-1)),d("span",null,Y(B.type),1)])])]),d("div",$6,[d("button",{onClick:w=>D(B),class:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-yellow-400 hover:bg-yellow-500 rounded-lg transition-colors text-xs sm:text-sm font-semibold text-black"},[C[6]||(C[6]=d("span",null,"",-1)),d("span",null,Y(m(B)),1),d("span",j6,Y(N(B)?"":""),1)],8,B6)])]),N(B)?(F(),j("div",H6,[y(B).length===0?(F(),j("div",q6,"   ")):(F(),j("div",z6,[(F(!0),j($e,null,un(y(B),(w,b)=>(F(),j("div",{key:b,class:"text-xs text-white"},[d("span",G6,Y(w.userName),1),C[7]||(C[7]=d("span",{class:"text-gray-400 mx-1"},"",-1)),d("span",W6,Y(l(w.registeredAt)),1)]))),128))]))])):_e("",!0)]))),128))])]))),128))])),d("div",K6,[Ae(Uo)])])])])],4))}},Y6={class:"relative z-10"},X6={class:"flex-1 p-2 sm:p-4 md:p-8"},J6={class:"max-w-7xl mx-auto"},Z6={key:0,class:"bg-gray-800/50 backdrop-blur-md rounded-2xl shadow-lg p-8 md:p-12 text-center border-2 border-yellow-400"},eO={key:1,class:"bg-gray-800/50 backdrop-blur-md rounded-2xl shadow-lg p-8 md:p-12 text-center border-2 border-yellow-400"},tO={key:0,class:"w-full h-64 overflow-hidden bg-gray-700"},nO=["src","alt"],sO={key:1,class:"w-full h-64 bg-gradient-to-br from-gray-700 to-gray-800 flex items-center justify-center border-b-2 border-yellow-400"},rO={class:"p-6"},iO={class:"text-2xl font-bold text-yellow-400 mb-3"},oO={class:"text-white mb-6 leading-relaxed"},aO=["href"],lO={class:"text-xs text-gray-400 text-center mt-4"},cO={class:"mt-2"},uO={__name:"DonationsView",setup(t){const e=ie(!1),n=ie([]),s=et(()=>{const o=n.value.length;return o===1?"grid grid-cols-1 md:grid-cols-1 gap-6 max-w-md mx-auto":o===2?"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto":o===3?"grid grid-cols-1 md:grid-cols-3 gap-6":"grid grid-cols-1 md:grid-cols-2 gap-6"});async function r(){try{e.value=!0,n.value=await bv()}catch(o){console.error("  :",o)}finally{e.value=!1}}function i(o){return o?new Date(o).toLocaleString("uk-UA",{year:"numeric",month:"long",day:"numeric"}):""}return pn(()=>{r()}),(o,l)=>(F(),j("div",{class:"relative min-h-screen bg-cover bg-center bg-fixed overflow-y-auto",style:ms({backgroundImage:`url(${ot(wi)})`})},[l[6]||(l[6]=d("div",{class:"absolute inset-0 bg-black opacity-50"},null,-1)),d("div",Y6,[Ae(vi),d("div",X6,[d("div",J6,[l[4]||(l[4]=d("div",{class:"mb-5"},[d("h1",{class:"text-sm sm:text-base font-bold text-yellow-400 text-center mb-1 flex items-center justify-center gap-1"},[d("span",{class:"text-sm"},""),Ke("   ! ")])],-1)),e.value?(F(),j("div",Z6,[...l[0]||(l[0]=[d("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-yellow-400 mx-auto mb-4"},null,-1),d("p",{class:"text-white text-lg"},"...",-1)])])):n.value.length===0?(F(),j("div",eO,[...l[1]||(l[1]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 mx-auto mb-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),d("p",{class:"text-white text-xl"},"     ",-1)])])):(F(),j("div",{key:2,class:qe(s.value)},[(F(!0),j($e,null,un(n.value,c=>(F(),j("div",{key:c.id,class:"bg-gray-800/50 backdrop-blur-md rounded-2xl shadow-lg overflow-hidden transform transition-all duration-300 hover:shadow-xl border-2 border-yellow-400"},[c.imageBase64?(F(),j("div",tO,[d("img",{src:c.imageBase64,alt:c.title,class:"w-full h-full object-cover"},null,8,nO)])):(F(),j("div",sO,[...l[2]||(l[2]=[d("span",{class:"text-white text-6xl"},"",-1)])])),d("div",rO,[d("h2",iO,Y(c.title),1),d("p",oO,Y(c.description),1),d("a",{href:c.link,target:"_blank",rel:"noopener noreferrer",class:"block w-full bg-yellow-400 hover:bg-yellow-500 text-black font-bold py-4 px-6 rounded-xl transition-all duration-300 text-center shadow-lg hover:shadow-xl border-2 border-yellow-400"},[...l[3]||(l[3]=[d("span",{class:"flex items-center justify-center gap-2"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),Ke("   ")],-1)])],8,aO),d("p",lO," : "+Y(i(c.updatedAt)),1)])]))),128))],2)),l[5]||(l[5]=d("div",{class:"mt-5 text-center"},[d("h3",{class:"text-sm font-bold mb-1 text-center text-yellow-400"},"   !"),d("p",{class:"text-center text-xs mb-1 text-white"})],-1)),d("div",cO,[Ae(Uo)])])])])],4))}},Ev=SE({history:oE("/HTF/"),routes:[{path:"/",name:"home",component:ck},{path:"/login",name:"login",component:dk},{path:"/register",name:"register",component:Tk},{path:"/schedule",name:"schedule",component:Q6},{path:"/donations",name:"donations",component:uO},{path:"/user",name:"user",component:Yn,meta:{requiresAuth:!0}},{path:"/user/profile",name:"user-profile",component:Yn,meta:{requiresAuth:!0},props:{section:"user-profile"}},{path:"/user/registration",name:"user-registration",component:Yn,meta:{requiresAuth:!0},props:{section:"training-registration"}},{path:"/user/statistics",name:"user-statistics",component:Yn,meta:{requiresAuth:!0},props:{section:"statistics"}},{path:"/admin",name:"admin",component:Yn,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/users",name:"admin-users",component:Yn,meta:{requiresAuth:!0,requiresAdmin:!0},props:{section:"users-manager"}},{path:"/admin/schedule",name:"admin-schedule",component:Yn,meta:{requiresAuth:!0,requiresAdmin:!0},props:{section:"form-schedule"}},{path:"/admin/donations",name:"admin-donations",component:Yn,meta:{requiresAuth:!0,requiresAdmin:!0},props:{section:"donations-manager"}},{path:"/cabinet",name:"cabinet",component:Yn,meta:{requiresAuth:!0}}]}),dO=["kulikalovdenis@gmail.com","bugary20@gmail.com"];Ev.beforeEach(async(t,e,n)=>{const s=t.matched.some(i=>i.meta.requiresAuth),r=t.matched.some(i=>i.meta.requiresAdmin);if(s||r){const i=await S4();if(!i)n("/login");else try{const o=th(i.email,dO);r?o?n():n("/user"):n()}catch(o){console.error("   :",o),n("/login")}}else n()});const Tv=g1(E1);Tv.use(Ev);Tv.mount("#app");"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js",{scope:"/"}).then(t=>{console.log("Service Worker :",t)}).catch(t=>{console.error("  Service Worker:",t)});
