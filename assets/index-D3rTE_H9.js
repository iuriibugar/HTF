(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function jc(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Le={},yr=[],vn=()=>{},Rp=()=>!1,Ea=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),qc=t=>t.startsWith("onUpdate:"),St=Object.assign,Hc=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},ov=Object.prototype.hasOwnProperty,Ne=(t,e)=>ov.call(t,e),pe=Array.isArray,vr=t=>Gi(t)==="[object Map]",Ta=t=>Gi(t)==="[object Set]",Gh=t=>Gi(t)==="[object Date]",ve=t=>typeof t=="function",et=t=>typeof t=="string",Sn=t=>typeof t=="symbol",Fe=t=>t!==null&&typeof t=="object",Sp=t=>(Fe(t)||ve(t))&&ve(t.then)&&ve(t.catch),Cp=Object.prototype.toString,Gi=t=>Cp.call(t),av=t=>Gi(t).slice(8,-1),Pp=t=>Gi(t)==="[object Object]",zc=t=>et(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,_i=jc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ia=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},lv=/-\w/g,Jt=Ia(t=>t.replace(lv,e=>e.slice(1).toUpperCase())),cv=/\B([A-Z])/g,Js=Ia(t=>t.replace(cv,"-$1").toLowerCase()),ba=Ia(t=>t.charAt(0).toUpperCase()+t.slice(1)),Tl=Ia(t=>t?`on${ba(t)}`:""),us=(t,e)=>!Object.is(t,e),Co=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},xp=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},Aa=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Wh;const Ra=()=>Wh||(Wh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Rs(t){if(pe(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=et(s)?dv(s):Rs(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(et(t)||Fe(t))return t}const uv=/;(?![^(]*\))/g,hv=/:([^]+)/,fv=/\/\*[^]*?\*\//g;function dv(t){const e={};return t.replace(fv,"").split(uv).forEach(n=>{if(n){const s=n.split(hv);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Dt(t){let e="";if(et(t))e=t;else if(pe(t))for(let n=0;n<t.length;n++){const s=Dt(t[n]);s&&(e+=s+" ")}else if(Fe(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const pv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",mv=jc(pv);function kp(t){return!!t||t===""}function gv(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=Sa(t[s],e[s]);return n}function Sa(t,e){if(t===e)return!0;let n=Gh(t),s=Gh(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=Sn(t),s=Sn(e),n||s)return t===e;if(n=pe(t),s=pe(e),n||s)return n&&s?gv(t,e):!1;if(n=Fe(t),s=Fe(e),n||s){if(!n||!s)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const l=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(l&&!c||!l&&c||!Sa(t[o],e[o]))return!1}}return String(t)===String(e)}function _v(t,e){return t.findIndex(n=>Sa(n,e))}const Dp=t=>!!(t&&t.__v_isRef===!0),ye=t=>et(t)?t:t==null?"":pe(t)||Fe(t)&&(t.toString===Cp||!ve(t.toString))?Dp(t)?ye(t.value):JSON.stringify(t,Np,2):String(t),Np=(t,e)=>Dp(e)?Np(t,e.value):vr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[Il(s,i)+" =>"]=r,n),{})}:Ta(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Il(n))}:Sn(e)?Il(e):Fe(e)&&!pe(e)&&!Pp(e)?String(e):e,Il=(t,e="")=>{var n;return Sn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let Mt;class yv{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Mt,!e&&Mt&&(this.index=(Mt.scopes||(Mt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Mt;try{return Mt=this,e()}finally{Mt=n}}}on(){++this._on===1&&(this.prevScope=Mt,Mt=this)}off(){this._on>0&&--this._on===0&&(Mt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function vv(){return Mt}let $e;const bl=new WeakSet;class Vp{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Mt&&Mt.active&&Mt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,bl.has(this)&&(bl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Mp(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Kh(this),Lp(this);const e=$e,n=on;$e=this,on=!0;try{return this.fn()}finally{Fp(this),$e=e,on=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Kc(e);this.deps=this.depsTail=void 0,Kh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?bl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Xl(this)&&this.run()}get dirty(){return Xl(this)}}let Op=0,yi,vi;function Mp(t,e=!1){if(t.flags|=8,e){t.next=vi,vi=t;return}t.next=yi,yi=t}function Gc(){Op++}function Wc(){if(--Op>0)return;if(vi){let e=vi;for(vi=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;yi;){let e=yi;for(yi=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function Lp(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Fp(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),Kc(s),wv(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function Xl(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Up(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Up(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===ki)||(t.globalVersion=ki,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Xl(t))))return;t.flags|=2;const e=t.dep,n=$e,s=on;$e=t,on=!0;try{Lp(t);const r=t.fn(t._value);(e.version===0||us(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{$e=n,on=s,Fp(t),t.flags&=-3}}function Kc(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Kc(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function wv(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let on=!0;const $p=[];function $n(){$p.push(on),on=!1}function Bn(){const t=$p.pop();on=t===void 0?!0:t}function Kh(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=$e;$e=void 0;try{e()}finally{$e=n}}}let ki=0;class Ev{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Qc{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!$e||!on||$e===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==$e)n=this.activeLink=new Ev($e,this),$e.deps?(n.prevDep=$e.depsTail,$e.depsTail.nextDep=n,$e.depsTail=n):$e.deps=$e.depsTail=n,Bp(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=$e.depsTail,n.nextDep=void 0,$e.depsTail.nextDep=n,$e.depsTail=n,$e.deps===n&&($e.deps=s)}return n}trigger(e){this.version++,ki++,this.notify(e)}notify(e){Gc();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Wc()}}}function Bp(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)Bp(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Zl=new WeakMap,Bs=Symbol(""),ec=Symbol(""),Di=Symbol("");function Tt(t,e,n){if(on&&$e){let s=Zl.get(t);s||Zl.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new Qc),r.map=s,r.key=n),r.track()}}function On(t,e,n,s,r,i){const o=Zl.get(t);if(!o){ki++;return}const l=c=>{c&&c.trigger()};if(Gc(),e==="clear")o.forEach(l);else{const c=pe(t),h=c&&zc(n);if(c&&n==="length"){const f=Number(s);o.forEach((p,m)=>{(m==="length"||m===Di||!Sn(m)&&m>=f)&&l(p)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),h&&l(o.get(Di)),e){case"add":c?h&&l(o.get("length")):(l(o.get(Bs)),vr(t)&&l(o.get(ec)));break;case"delete":c||(l(o.get(Bs)),vr(t)&&l(o.get(ec)));break;case"set":vr(t)&&l(o.get(Bs));break}}Wc()}function lr(t){const e=ke(t);return e===t?e:(Tt(e,"iterate",Di),Qt(t)?e:e.map(ln))}function Ca(t){return Tt(t=ke(t),"iterate",Di),t}function ns(t,e){return jn(t)?js(t)?xr(ln(e)):xr(e):ln(e)}const Tv={__proto__:null,[Symbol.iterator](){return Al(this,Symbol.iterator,t=>ns(this,t))},concat(...t){return lr(this).concat(...t.map(e=>pe(e)?lr(e):e))},entries(){return Al(this,"entries",t=>(t[1]=ns(this,t[1]),t))},every(t,e){return Dn(this,"every",t,e,void 0,arguments)},filter(t,e){return Dn(this,"filter",t,e,n=>n.map(s=>ns(this,s)),arguments)},find(t,e){return Dn(this,"find",t,e,n=>ns(this,n),arguments)},findIndex(t,e){return Dn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Dn(this,"findLast",t,e,n=>ns(this,n),arguments)},findLastIndex(t,e){return Dn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Dn(this,"forEach",t,e,void 0,arguments)},includes(...t){return Rl(this,"includes",t)},indexOf(...t){return Rl(this,"indexOf",t)},join(t){return lr(this).join(t)},lastIndexOf(...t){return Rl(this,"lastIndexOf",t)},map(t,e){return Dn(this,"map",t,e,void 0,arguments)},pop(){return ui(this,"pop")},push(...t){return ui(this,"push",t)},reduce(t,...e){return Qh(this,"reduce",t,e)},reduceRight(t,...e){return Qh(this,"reduceRight",t,e)},shift(){return ui(this,"shift")},some(t,e){return Dn(this,"some",t,e,void 0,arguments)},splice(...t){return ui(this,"splice",t)},toReversed(){return lr(this).toReversed()},toSorted(t){return lr(this).toSorted(t)},toSpliced(...t){return lr(this).toSpliced(...t)},unshift(...t){return ui(this,"unshift",t)},values(){return Al(this,"values",t=>ns(this,t))}};function Al(t,e,n){const s=Ca(t),r=s[e]();return s!==t&&!Qt(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=n(i.value)),i}),r}const Iv=Array.prototype;function Dn(t,e,n,s,r,i){const o=Ca(t),l=o!==t&&!Qt(t),c=o[e];if(c!==Iv[e]){const p=c.apply(t,i);return l?ln(p):p}let h=n;o!==t&&(l?h=function(p,m){return n.call(this,ns(t,p),m,t)}:n.length>2&&(h=function(p,m){return n.call(this,p,m,t)}));const f=c.call(o,h,s);return l&&r?r(f):f}function Qh(t,e,n,s){const r=Ca(t);let i=n;return r!==t&&(Qt(t)?n.length>3&&(i=function(o,l,c){return n.call(this,o,l,c,t)}):i=function(o,l,c){return n.call(this,o,ns(t,l),c,t)}),r[e](i,...s)}function Rl(t,e,n){const s=ke(t);Tt(s,"iterate",Di);const r=s[e](...n);return(r===-1||r===!1)&&Xc(n[0])?(n[0]=ke(n[0]),s[e](...n)):r}function ui(t,e,n=[]){$n(),Gc();const s=ke(t)[e].apply(t,n);return Wc(),Bn(),s}const bv=jc("__proto__,__v_isRef,__isVue"),jp=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Sn));function Av(t){Sn(t)||(t=String(t));const e=ke(this);return Tt(e,"has",t),e.hasOwnProperty(t)}class qp{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?Ov:Wp:i?Gp:zp).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=pe(e);if(!r){let c;if(o&&(c=Tv[n]))return c;if(n==="hasOwnProperty")return Av}const l=Reflect.get(e,n,Rt(e)?e:s);if((Sn(n)?jp.has(n):bv(n))||(r||Tt(e,"get",n),i))return l;if(Rt(l)){const c=o&&zc(n)?l:l.value;return r&&Fe(c)?nc(c):c}return Fe(l)?r?nc(l):Pa(l):l}}class Hp extends qp{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];const o=pe(e)&&zc(n);if(!this._isShallow){const h=jn(i);if(!Qt(s)&&!jn(s)&&(i=ke(i),s=ke(s)),!o&&Rt(i)&&!Rt(s))return h||(i.value=s),!0}const l=o?Number(n)<e.length:Ne(e,n),c=Reflect.set(e,n,s,Rt(e)?e:r);return e===ke(r)&&(l?us(s,i)&&On(e,"set",n,s):On(e,"add",n,s)),c}deleteProperty(e,n){const s=Ne(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&On(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!Sn(n)||!jp.has(n))&&Tt(e,"has",n),s}ownKeys(e){return Tt(e,"iterate",pe(e)?"length":Bs),Reflect.ownKeys(e)}}class Rv extends qp{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Sv=new Hp,Cv=new Rv,Pv=new Hp(!0);const tc=t=>t,yo=t=>Reflect.getPrototypeOf(t);function xv(t,e,n){return function(...s){const r=this.__v_raw,i=ke(r),o=vr(i),l=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,h=r[t](...s),f=n?tc:e?xr:ln;return!e&&Tt(i,"iterate",c?ec:Bs),{next(){const{value:p,done:m}=h.next();return m?{value:p,done:m}:{value:l?[f(p[0]),f(p[1])]:f(p),done:m}},[Symbol.iterator](){return this}}}}function vo(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function kv(t,e){const n={get(r){const i=this.__v_raw,o=ke(i),l=ke(r);t||(us(r,l)&&Tt(o,"get",r),Tt(o,"get",l));const{has:c}=yo(o),h=e?tc:t?xr:ln;if(c.call(o,r))return h(i.get(r));if(c.call(o,l))return h(i.get(l));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&Tt(ke(r),"iterate",Bs),r.size},has(r){const i=this.__v_raw,o=ke(i),l=ke(r);return t||(us(r,l)&&Tt(o,"has",r),Tt(o,"has",l)),r===l?i.has(r):i.has(r)||i.has(l)},forEach(r,i){const o=this,l=o.__v_raw,c=ke(l),h=e?tc:t?xr:ln;return!t&&Tt(c,"iterate",Bs),l.forEach((f,p)=>r.call(i,h(f),h(p),o))}};return St(n,t?{add:vo("add"),set:vo("set"),delete:vo("delete"),clear:vo("clear")}:{add(r){!e&&!Qt(r)&&!jn(r)&&(r=ke(r));const i=ke(this);return yo(i).has.call(i,r)||(i.add(r),On(i,"add",r,r)),this},set(r,i){!e&&!Qt(i)&&!jn(i)&&(i=ke(i));const o=ke(this),{has:l,get:c}=yo(o);let h=l.call(o,r);h||(r=ke(r),h=l.call(o,r));const f=c.call(o,r);return o.set(r,i),h?us(i,f)&&On(o,"set",r,i):On(o,"add",r,i),this},delete(r){const i=ke(this),{has:o,get:l}=yo(i);let c=o.call(i,r);c||(r=ke(r),c=o.call(i,r)),l&&l.call(i,r);const h=i.delete(r);return c&&On(i,"delete",r,void 0),h},clear(){const r=ke(this),i=r.size!==0,o=r.clear();return i&&On(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=xv(r,t,e)}),n}function Yc(t,e){const n=kv(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(Ne(n,r)&&r in s?n:s,r,i)}const Dv={get:Yc(!1,!1)},Nv={get:Yc(!1,!0)},Vv={get:Yc(!0,!1)};const zp=new WeakMap,Gp=new WeakMap,Wp=new WeakMap,Ov=new WeakMap;function Mv(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Lv(t){return t.__v_skip||!Object.isExtensible(t)?0:Mv(av(t))}function Pa(t){return jn(t)?t:Jc(t,!1,Sv,Dv,zp)}function Kp(t){return Jc(t,!1,Pv,Nv,Gp)}function nc(t){return Jc(t,!0,Cv,Vv,Wp)}function Jc(t,e,n,s,r){if(!Fe(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Lv(t);if(i===0)return t;const o=r.get(t);if(o)return o;const l=new Proxy(t,i===2?s:n);return r.set(t,l),l}function js(t){return jn(t)?js(t.__v_raw):!!(t&&t.__v_isReactive)}function jn(t){return!!(t&&t.__v_isReadonly)}function Qt(t){return!!(t&&t.__v_isShallow)}function Xc(t){return t?!!t.__v_raw:!1}function ke(t){const e=t&&t.__v_raw;return e?ke(e):t}function Fv(t){return!Ne(t,"__v_skip")&&Object.isExtensible(t)&&xp(t,"__v_skip",!0),t}const ln=t=>Fe(t)?Pa(t):t,xr=t=>Fe(t)?nc(t):t;function Rt(t){return t?t.__v_isRef===!0:!1}function Ie(t){return Qp(t,!1)}function Uv(t){return Qp(t,!0)}function Qp(t,e){return Rt(t)?t:new $v(t,e)}class $v{constructor(e,n){this.dep=new Qc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:ke(e),this._value=n?e:ln(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||Qt(e)||jn(e);e=s?e:ke(e),us(e,n)&&(this._rawValue=e,this._value=s?e:ln(e),this.dep.trigger())}}function Ft(t){return Rt(t)?t.value:t}const Bv={get:(t,e,n)=>e==="__v_raw"?t:Ft(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return Rt(r)&&!Rt(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function Yp(t){return js(t)?t:new Proxy(t,Bv)}class jv{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Qc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ki-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&$e!==this)return Mp(this,!0),!0}get value(){const e=this.dep.track();return Up(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function qv(t,e,n=!1){let s,r;return ve(t)?s=t:(s=t.get,r=t.set),new jv(s,r,n)}const wo={},qo=new WeakMap;let Vs;function Hv(t,e=!1,n=Vs){if(n){let s=qo.get(n);s||qo.set(n,s=[]),s.push(t)}}function zv(t,e,n=Le){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:l,call:c}=n,h=Y=>r?Y:Qt(Y)||r===!1||r===0?Mn(Y,1):Mn(Y);let f,p,m,w,D=!1,O=!1;if(Rt(t)?(p=()=>t.value,D=Qt(t)):js(t)?(p=()=>h(t),D=!0):pe(t)?(O=!0,D=t.some(Y=>js(Y)||Qt(Y)),p=()=>t.map(Y=>{if(Rt(Y))return Y.value;if(js(Y))return h(Y);if(ve(Y))return c?c(Y,2):Y()})):ve(t)?e?p=c?()=>c(t,2):t:p=()=>{if(m){$n();try{m()}finally{Bn()}}const Y=Vs;Vs=f;try{return c?c(t,3,[w]):t(w)}finally{Vs=Y}}:p=vn,e&&r){const Y=p,U=r===!0?1/0:r;p=()=>Mn(Y(),U)}const F=vv(),Q=()=>{f.stop(),F&&F.active&&Hc(F.effects,f)};if(i&&e){const Y=e;e=(...U)=>{Y(...U),Q()}}let V=O?new Array(t.length).fill(wo):wo;const M=Y=>{if(!(!(f.flags&1)||!f.dirty&&!Y))if(e){const U=f.run();if(r||D||(O?U.some((q,b)=>us(q,V[b])):us(U,V))){m&&m();const q=Vs;Vs=f;try{const b=[U,V===wo?void 0:O&&V[0]===wo?[]:V,w];V=U,c?c(e,3,b):e(...b)}finally{Vs=q}}}else f.run()};return l&&l(M),f=new Vp(p),f.scheduler=o?()=>o(M,!1):M,w=Y=>Hv(Y,!1,f),m=f.onStop=()=>{const Y=qo.get(f);if(Y){if(c)c(Y,4);else for(const U of Y)U();qo.delete(f)}},e?s?M(!0):V=f.run():o?o(M.bind(null,!0),!0):f.run(),Q.pause=f.pause.bind(f),Q.resume=f.resume.bind(f),Q.stop=Q,Q}function Mn(t,e=1/0,n){if(e<=0||!Fe(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,Rt(t))Mn(t.value,e,n);else if(pe(t))for(let s=0;s<t.length;s++)Mn(t[s],e,n);else if(Ta(t)||vr(t))t.forEach(s=>{Mn(s,e,n)});else if(Pp(t)){for(const s in t)Mn(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Mn(t[s],e,n)}return t}function Wi(t,e,n,s){try{return s?t(...s):t()}catch(r){xa(r,e,n)}}function Cn(t,e,n,s){if(ve(t)){const r=Wi(t,e,n,s);return r&&Sp(r)&&r.catch(i=>{xa(i,e,n)}),r}if(pe(t)){const r=[];for(let i=0;i<t.length;i++)r.push(Cn(t[i],e,n,s));return r}}function xa(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Le;if(e){let l=e.parent;const c=e.proxy,h=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const f=l.ec;if(f){for(let p=0;p<f.length;p++)if(f[p](t,c,h)===!1)return}l=l.parent}if(i){$n(),Wi(i,null,10,[t,c,h]),Bn();return}}Gv(t,n,r,s,o)}function Gv(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const Nt=[];let gn=-1;const wr=[];let ss=null,ur=0;const Jp=Promise.resolve();let Ho=null;function Zc(t){const e=Ho||Jp;return t?e.then(this?t.bind(this):t):e}function Wv(t){let e=gn+1,n=Nt.length;for(;e<n;){const s=e+n>>>1,r=Nt[s],i=Ni(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function eu(t){if(!(t.flags&1)){const e=Ni(t),n=Nt[Nt.length-1];!n||!(t.flags&2)&&e>=Ni(n)?Nt.push(t):Nt.splice(Wv(e),0,t),t.flags|=1,Xp()}}function Xp(){Ho||(Ho=Jp.then(em))}function Kv(t){pe(t)?wr.push(...t):ss&&t.id===-1?ss.splice(ur+1,0,t):t.flags&1||(wr.push(t),t.flags|=1),Xp()}function Yh(t,e,n=gn+1){for(;n<Nt.length;n++){const s=Nt[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;Nt.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Zp(t){if(wr.length){const e=[...new Set(wr)].sort((n,s)=>Ni(n)-Ni(s));if(wr.length=0,ss){ss.push(...e);return}for(ss=e,ur=0;ur<ss.length;ur++){const n=ss[ur];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ss=null,ur=0}}const Ni=t=>t.id==null?t.flags&2?-1:1/0:t.id;function em(t){try{for(gn=0;gn<Nt.length;gn++){const e=Nt[gn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Wi(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;gn<Nt.length;gn++){const e=Nt[gn];e&&(e.flags&=-2)}gn=-1,Nt.length=0,Zp(),Ho=null,(Nt.length||wr.length)&&em()}}let qt=null,tm=null;function zo(t){const e=qt;return qt=t,tm=t&&t.type.__scopeId||null,e}function hr(t,e=qt,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&Ko(-1);const i=zo(e);let o;try{o=t(...r)}finally{zo(i),s._d&&Ko(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function cr(t,e){if(qt===null)return t;const n=Va(qt),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,l,c=Le]=e[r];i&&(ve(i)&&(i={mounted:i,updated:i}),i.deep&&Mn(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:l,modifiers:c}))}return t}function Ds(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const l=r[o];i&&(l.oldValue=i[o].value);let c=l.dir[s];c&&($n(),Cn(c,n,8,[t.el,l,t,e]),Bn())}}const Qv=Symbol("_vte"),Yv=t=>t.__isTeleport,Jv=Symbol("_leaveCb");function tu(t,e){t.shapeFlag&6&&t.component?(t.transition=e,tu(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function nm(t,e){return ve(t)?St({name:t.name},e,{setup:t}):t}function sm(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Go=new WeakMap;function wi(t,e,n,s,r=!1){if(pe(t)){t.forEach((D,O)=>wi(D,e&&(pe(e)?e[O]:e),n,s,r));return}if(Ei(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&wi(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?Va(s.component):s.el,o=r?null:i,{i:l,r:c}=t,h=e&&e.r,f=l.refs===Le?l.refs={}:l.refs,p=l.setupState,m=ke(p),w=p===Le?Rp:D=>Ne(m,D);if(h!=null&&h!==c){if(Jh(e),et(h))f[h]=null,w(h)&&(p[h]=null);else if(Rt(h)){h.value=null;const D=e;D.k&&(f[D.k]=null)}}if(ve(c))Wi(c,l,12,[o,f]);else{const D=et(c),O=Rt(c);if(D||O){const F=()=>{if(t.f){const Q=D?w(c)?p[c]:f[c]:c.value;if(r)pe(Q)&&Hc(Q,i);else if(pe(Q))Q.includes(i)||Q.push(i);else if(D)f[c]=[i],w(c)&&(p[c]=f[c]);else{const V=[i];c.value=V,t.k&&(f[t.k]=V)}}else D?(f[c]=o,w(c)&&(p[c]=o)):O&&(c.value=o,t.k&&(f[t.k]=o))};if(o){const Q=()=>{F(),Go.delete(t)};Q.id=-1,Go.set(t,Q),jt(Q,n)}else Jh(t),F()}}}function Jh(t){const e=Go.get(t);e&&(e.flags|=8,Go.delete(t))}Ra().requestIdleCallback;Ra().cancelIdleCallback;const Ei=t=>!!t.type.__asyncLoader,rm=t=>t.type.__isKeepAlive;function Xv(t,e){im(t,"a",e)}function Zv(t,e){im(t,"da",e)}function im(t,e,n=bt){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(ka(e,s,n),n){let r=n.parent;for(;r&&r.parent;)rm(r.parent.vnode)&&ew(s,e,n,r),r=r.parent}}function ew(t,e,n,s){const r=ka(e,t,s,!0);om(()=>{Hc(s[e],r)},n)}function ka(t,e,n=bt,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{$n();const l=Qi(n),c=Cn(e,n,t,o);return l(),Bn(),c});return s?r.unshift(i):r.push(i),i}}const Wn=t=>(e,n=bt)=>{(!Oi||t==="sp")&&ka(t,(...s)=>e(...s),n)},tw=Wn("bm"),Ki=Wn("m"),nw=Wn("bu"),sw=Wn("u"),rw=Wn("bum"),om=Wn("um"),iw=Wn("sp"),ow=Wn("rtg"),aw=Wn("rtc");function lw(t,e=bt){ka("ec",t,e)}const cw="components";function am(t,e){return hw(cw,t,!0,e)||t}const uw=Symbol.for("v-ndc");function hw(t,e,n=!0,s=!1){const r=qt||bt;if(r){const i=r.type;{const l=Zw(i,!1);if(l&&(l===e||l===Jt(e)||l===ba(Jt(e))))return i}const o=Xh(r[t]||i[t],e)||Xh(r.appContext[t],e);return!o&&s?i:o}}function Xh(t,e){return t&&(t[e]||t[Jt(e)]||t[ba(Jt(e))])}function Gt(t,e,n,s){let r;const i=n,o=pe(t);if(o||et(t)){const l=o&&js(t);let c=!1,h=!1;l&&(c=!Qt(t),h=jn(t),t=Ca(t)),r=new Array(t.length);for(let f=0,p=t.length;f<p;f++)r[f]=e(c?h?xr(ln(t[f])):ln(t[f]):t[f],f,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let l=0;l<t;l++)r[l]=e(l+1,l,void 0,i)}else if(Fe(t))if(t[Symbol.iterator])r=Array.from(t,(l,c)=>e(l,c,void 0,i));else{const l=Object.keys(t);r=new Array(l.length);for(let c=0,h=l.length;c<h;c++){const f=l[c];r[c]=e(t[f],f,c,i)}}else r=[];return r}const sc=t=>t?Cm(t)?Va(t):sc(t.parent):null,Ti=St(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>sc(t.parent),$root:t=>sc(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>cm(t),$forceUpdate:t=>t.f||(t.f=()=>{eu(t.update)}),$nextTick:t=>t.n||(t.n=Zc.bind(t.proxy)),$watch:t=>Tw.bind(t)}),Sl=(t,e)=>t!==Le&&!t.__isScriptSetup&&Ne(t,e),fw={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:l,appContext:c}=t;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(Sl(s,e))return o[e]=1,s[e];if(r!==Le&&Ne(r,e))return o[e]=2,r[e];if(Ne(i,e))return o[e]=3,i[e];if(n!==Le&&Ne(n,e))return o[e]=4,n[e];rc&&(o[e]=0)}}const h=Ti[e];let f,p;if(h)return e==="$attrs"&&Tt(t.attrs,"get",""),h(t);if((f=l.__cssModules)&&(f=f[e]))return f;if(n!==Le&&Ne(n,e))return o[e]=4,n[e];if(p=c.config.globalProperties,Ne(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return Sl(r,e)?(r[e]=n,!0):s!==Le&&Ne(s,e)?(s[e]=n,!0):Ne(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,props:i,type:o}},l){let c;return!!(n[l]||t!==Le&&l[0]!=="$"&&Ne(t,l)||Sl(e,l)||Ne(i,l)||Ne(s,l)||Ne(Ti,l)||Ne(r.config.globalProperties,l)||(c=o.__cssModules)&&c[l])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ne(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Zh(t){return pe(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let rc=!0;function dw(t){const e=cm(t),n=t.proxy,s=t.ctx;rc=!1,e.beforeCreate&&ef(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:l,provide:c,inject:h,created:f,beforeMount:p,mounted:m,beforeUpdate:w,updated:D,activated:O,deactivated:F,beforeDestroy:Q,beforeUnmount:V,destroyed:M,unmounted:Y,render:U,renderTracked:q,renderTriggered:b,errorCaptured:_,serverPrefetch:v,expose:R,inheritAttrs:A,components:C,directives:E,filters:Ue}=e;if(h&&pw(h,s,null),o)for(const Pe in o){const Ee=o[Pe];ve(Ee)&&(s[Pe]=Ee.bind(n))}if(r){const Pe=r.call(n,n);Fe(Pe)&&(t.data=Pa(Pe))}if(rc=!0,i)for(const Pe in i){const Ee=i[Pe],gt=ve(Ee)?Ee.bind(n,n):ve(Ee.get)?Ee.get.bind(n,n):vn,Ot=!ve(Ee)&&ve(Ee.set)?Ee.set.bind(n):vn,_t=At({get:gt,set:Ot});Object.defineProperty(s,Pe,{enumerable:!0,configurable:!0,get:()=>_t.value,set:nt=>_t.value=nt})}if(l)for(const Pe in l)lm(l[Pe],s,n,Pe);if(c){const Pe=ve(c)?c.call(n):c;Reflect.ownKeys(Pe).forEach(Ee=>{Po(Ee,Pe[Ee])})}f&&ef(f,t,"c");function We(Pe,Ee){pe(Ee)?Ee.forEach(gt=>Pe(gt.bind(n))):Ee&&Pe(Ee.bind(n))}if(We(tw,p),We(Ki,m),We(nw,w),We(sw,D),We(Xv,O),We(Zv,F),We(lw,_),We(aw,q),We(ow,b),We(rw,V),We(om,Y),We(iw,v),pe(R))if(R.length){const Pe=t.exposed||(t.exposed={});R.forEach(Ee=>{Object.defineProperty(Pe,Ee,{get:()=>n[Ee],set:gt=>n[Ee]=gt,enumerable:!0})})}else t.exposed||(t.exposed={});U&&t.render===vn&&(t.render=U),A!=null&&(t.inheritAttrs=A),C&&(t.components=C),E&&(t.directives=E),v&&sm(t)}function pw(t,e,n=vn){pe(t)&&(t=ic(t));for(const s in t){const r=t[s];let i;Fe(r)?"default"in r?i=wn(r.from||s,r.default,!0):i=wn(r.from||s):i=wn(r),Rt(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function ef(t,e,n){Cn(pe(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function lm(t,e,n,s){let r=s.includes(".")?fm(n,s):()=>n[s];if(et(t)){const i=e[t];ve(i)&&qs(r,i)}else if(ve(t))qs(r,t.bind(n));else if(Fe(t))if(pe(t))t.forEach(i=>lm(i,e,n,s));else{const i=ve(t.handler)?t.handler.bind(n):e[t.handler];ve(i)&&qs(r,i,t)}}function cm(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,l=i.get(e);let c;return l?c=l:!r.length&&!n&&!s?c=e:(c={},r.length&&r.forEach(h=>Wo(c,h,o,!0)),Wo(c,e,o)),Fe(e)&&i.set(e,c),c}function Wo(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&Wo(t,i,n,!0),r&&r.forEach(o=>Wo(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const l=mw[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const mw={data:tf,props:nf,emits:nf,methods:di,computed:di,beforeCreate:xt,created:xt,beforeMount:xt,mounted:xt,beforeUpdate:xt,updated:xt,beforeDestroy:xt,beforeUnmount:xt,destroyed:xt,unmounted:xt,activated:xt,deactivated:xt,errorCaptured:xt,serverPrefetch:xt,components:di,directives:di,watch:_w,provide:tf,inject:gw};function tf(t,e){return e?t?function(){return St(ve(t)?t.call(this,this):t,ve(e)?e.call(this,this):e)}:e:t}function gw(t,e){return di(ic(t),ic(e))}function ic(t){if(pe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function xt(t,e){return t?[...new Set([].concat(t,e))]:e}function di(t,e){return t?St(Object.create(null),t,e):e}function nf(t,e){return t?pe(t)&&pe(e)?[...new Set([...t,...e])]:St(Object.create(null),Zh(t),Zh(e??{})):e}function _w(t,e){if(!t)return e;if(!e)return t;const n=St(Object.create(null),t);for(const s in e)n[s]=xt(t[s],e[s]);return n}function um(){return{app:null,config:{isNativeTag:Rp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let yw=0;function vw(t,e){return function(s,r=null){ve(s)||(s=St({},s)),r!=null&&!Fe(r)&&(r=null);const i=um(),o=new WeakSet,l=[];let c=!1;const h=i.app={_uid:yw++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:t0,get config(){return i.config},set config(f){},use(f,...p){return o.has(f)||(f&&ve(f.install)?(o.add(f),f.install(h,...p)):ve(f)&&(o.add(f),f(h,...p))),h},mixin(f){return i.mixins.includes(f)||i.mixins.push(f),h},component(f,p){return p?(i.components[f]=p,h):i.components[f]},directive(f,p){return p?(i.directives[f]=p,h):i.directives[f]},mount(f,p,m){if(!c){const w=h._ceVNode||je(s,r);return w.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),t(w,f,m),c=!0,h._container=f,f.__vue_app__=h,Va(w.component)}},onUnmount(f){l.push(f)},unmount(){c&&(Cn(l,h._instance,16),t(null,h._container),delete h._container.__vue_app__)},provide(f,p){return i.provides[f]=p,h},runWithContext(f){const p=Er;Er=h;try{return f()}finally{Er=p}}};return h}}let Er=null;function Po(t,e){if(bt){let n=bt.provides;const s=bt.parent&&bt.parent.provides;s===n&&(n=bt.provides=Object.create(s)),n[t]=e}}function wn(t,e,n=!1){const s=Kw();if(s||Er){let r=Er?Er._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&ve(e)?e.call(s&&s.proxy):e}}const ww=Symbol.for("v-scx"),Ew=()=>wn(ww);function qs(t,e,n){return hm(t,e,n)}function hm(t,e,n=Le){const{immediate:s,deep:r,flush:i,once:o}=n,l=St({},n),c=e&&s||!e&&i!=="post";let h;if(Oi){if(i==="sync"){const w=Ew();h=w.__watcherHandles||(w.__watcherHandles=[])}else if(!c){const w=()=>{};return w.stop=vn,w.resume=vn,w.pause=vn,w}}const f=bt;l.call=(w,D,O)=>Cn(w,f,D,O);let p=!1;i==="post"?l.scheduler=w=>{jt(w,f&&f.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(w,D)=>{D?w():eu(w)}),l.augmentJob=w=>{e&&(w.flags|=4),p&&(w.flags|=2,f&&(w.id=f.uid,w.i=f))};const m=zv(t,e,l);return Oi&&(h?h.push(m):c&&m()),m}function Tw(t,e,n){const s=this.proxy,r=et(t)?t.includes(".")?fm(s,t):()=>s[t]:t.bind(s,s);let i;ve(e)?i=e:(i=e.handler,n=e);const o=Qi(this),l=hm(r,i.bind(s),n);return o(),l}function fm(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const Iw=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Jt(e)}Modifiers`]||t[`${Js(e)}Modifiers`];function bw(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||Le;let r=n;const i=e.startsWith("update:"),o=i&&Iw(s,e.slice(7));o&&(o.trim&&(r=n.map(f=>et(f)?f.trim():f)),o.number&&(r=n.map(Aa)));let l,c=s[l=Tl(e)]||s[l=Tl(Jt(e))];!c&&i&&(c=s[l=Tl(Js(e))]),c&&Cn(c,t,6,r);const h=s[l+"Once"];if(h){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Cn(h,t,6,r)}}const Aw=new WeakMap;function dm(t,e,n=!1){const s=n?Aw:e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},l=!1;if(!ve(t)){const c=h=>{const f=dm(h,e,!0);f&&(l=!0,St(o,f))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!l?(Fe(t)&&s.set(t,null),null):(pe(i)?i.forEach(c=>o[c]=null):St(o,i),Fe(t)&&s.set(t,o),o)}function Da(t,e){return!t||!Ea(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ne(t,e[0].toLowerCase()+e.slice(1))||Ne(t,Js(e))||Ne(t,e))}function sf(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:l,emit:c,render:h,renderCache:f,props:p,data:m,setupState:w,ctx:D,inheritAttrs:O}=t,F=zo(t);let Q,V;try{if(n.shapeFlag&4){const Y=r||s,U=Y;Q=yn(h.call(U,Y,f,p,w,m,D)),V=l}else{const Y=e;Q=yn(Y.length>1?Y(p,{attrs:l,slots:o,emit:c}):Y(p,null)),V=e.props?l:Rw(l)}}catch(Y){Ii.length=0,xa(Y,t,1),Q=je(ys)}let M=Q;if(V&&O!==!1){const Y=Object.keys(V),{shapeFlag:U}=M;Y.length&&U&7&&(i&&Y.some(qc)&&(V=Sw(V,i)),M=kr(M,V,!1,!0))}return n.dirs&&(M=kr(M,null,!1,!0),M.dirs=M.dirs?M.dirs.concat(n.dirs):n.dirs),n.transition&&tu(M,n.transition),Q=M,zo(F),Q}const Rw=t=>{let e;for(const n in t)(n==="class"||n==="style"||Ea(n))&&((e||(e={}))[n]=t[n]);return e},Sw=(t,e)=>{const n={};for(const s in t)(!qc(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function Cw(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:l,patchFlag:c}=e,h=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?rf(s,o,h):!!o;if(c&8){const f=e.dynamicProps;for(let p=0;p<f.length;p++){const m=f[p];if(o[m]!==s[m]&&!Da(h,m))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?rf(s,o,h):!0:!!o;return!1}function rf(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!Da(n,i))return!0}return!1}function Pw({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const pm={},mm=()=>Object.create(pm),gm=t=>Object.getPrototypeOf(t)===pm;function xw(t,e,n,s=!1){const r={},i=mm();t.propsDefaults=Object.create(null),_m(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:Kp(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function kw(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,l=ke(r),[c]=t.propsOptions;let h=!1;if((s||o>0)&&!(o&16)){if(o&8){const f=t.vnode.dynamicProps;for(let p=0;p<f.length;p++){let m=f[p];if(Da(t.emitsOptions,m))continue;const w=e[m];if(c)if(Ne(i,m))w!==i[m]&&(i[m]=w,h=!0);else{const D=Jt(m);r[D]=oc(c,l,D,w,t,!1)}else w!==i[m]&&(i[m]=w,h=!0)}}}else{_m(t,e,r,i)&&(h=!0);let f;for(const p in l)(!e||!Ne(e,p)&&((f=Js(p))===p||!Ne(e,f)))&&(c?n&&(n[p]!==void 0||n[f]!==void 0)&&(r[p]=oc(c,l,p,void 0,t,!0)):delete r[p]);if(i!==l)for(const p in i)(!e||!Ne(e,p))&&(delete i[p],h=!0)}h&&On(t.attrs,"set","")}function _m(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,l;if(e)for(let c in e){if(_i(c))continue;const h=e[c];let f;r&&Ne(r,f=Jt(c))?!i||!i.includes(f)?n[f]=h:(l||(l={}))[f]=h:Da(t.emitsOptions,c)||(!(c in s)||h!==s[c])&&(s[c]=h,o=!0)}if(i){const c=ke(n),h=l||Le;for(let f=0;f<i.length;f++){const p=i[f];n[p]=oc(r,c,p,h[p],t,!Ne(h,p))}}return o}function oc(t,e,n,s,r,i){const o=t[n];if(o!=null){const l=Ne(o,"default");if(l&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&ve(c)){const{propsDefaults:h}=r;if(n in h)s=h[n];else{const f=Qi(r);s=h[n]=c.call(null,e),f()}}else s=c;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!l?s=!1:o[1]&&(s===""||s===Js(n))&&(s=!0))}return s}const Dw=new WeakMap;function ym(t,e,n=!1){const s=n?Dw:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},l=[];let c=!1;if(!ve(t)){const f=p=>{c=!0;const[m,w]=ym(p,e,!0);St(o,m),w&&l.push(...w)};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!i&&!c)return Fe(t)&&s.set(t,yr),yr;if(pe(i))for(let f=0;f<i.length;f++){const p=Jt(i[f]);of(p)&&(o[p]=Le)}else if(i)for(const f in i){const p=Jt(f);if(of(p)){const m=i[f],w=o[p]=pe(m)||ve(m)?{type:m}:St({},m),D=w.type;let O=!1,F=!0;if(pe(D))for(let Q=0;Q<D.length;++Q){const V=D[Q],M=ve(V)&&V.name;if(M==="Boolean"){O=!0;break}else M==="String"&&(F=!1)}else O=ve(D)&&D.name==="Boolean";w[0]=O,w[1]=F,(O||Ne(w,"default"))&&l.push(p)}}const h=[o,l];return Fe(t)&&s.set(t,h),h}function of(t){return t[0]!=="$"&&!_i(t)}const nu=t=>t==="_"||t==="_ctx"||t==="$stable",su=t=>pe(t)?t.map(yn):[yn(t)],Nw=(t,e,n)=>{if(e._n)return e;const s=hr((...r)=>su(e(...r)),n);return s._c=!1,s},vm=(t,e,n)=>{const s=t._ctx;for(const r in t){if(nu(r))continue;const i=t[r];if(ve(i))e[r]=Nw(r,i,s);else if(i!=null){const o=su(i);e[r]=()=>o}}},wm=(t,e)=>{const n=su(e);t.slots.default=()=>n},Em=(t,e,n)=>{for(const s in e)(n||!nu(s))&&(t[s]=e[s])},Vw=(t,e,n)=>{const s=t.slots=mm();if(t.vnode.shapeFlag&32){const r=e._;r?(Em(s,e,n),n&&xp(s,"_",r,!0)):vm(e,s)}else e&&wm(t,e)},Ow=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=Le;if(s.shapeFlag&32){const l=e._;l?n&&l===1?i=!1:Em(r,e,n):(i=!e.$stable,vm(e,r)),o=e}else e&&(wm(t,e),o={default:1});if(i)for(const l in r)!nu(l)&&o[l]==null&&delete r[l]},jt=$w;function Mw(t){return Lw(t)}function Lw(t,e){const n=Ra();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:l,createComment:c,setText:h,setElementText:f,parentNode:p,nextSibling:m,setScopeId:w=vn,insertStaticContent:D}=t,O=(y,T,P,B=null,$=null,L=null,te=void 0,X=null,J=!!T.dynamicChildren)=>{if(y===T)return;y&&!hi(y,T)&&(B=S(y),nt(y,$,L,!0),y=null),T.patchFlag===-2&&(J=!1,T.dynamicChildren=null);const{type:K,ref:ce,shapeFlag:re}=T;switch(K){case Na:F(y,T,P,B);break;case ys:Q(y,T,P,B);break;case xo:y==null&&V(T,P,B,te);break;case ze:C(y,T,P,B,$,L,te,X,J);break;default:re&1?U(y,T,P,B,$,L,te,X,J):re&6?E(y,T,P,B,$,L,te,X,J):(re&64||re&128)&&K.process(y,T,P,B,$,L,te,X,J,ae)}ce!=null&&$?wi(ce,y&&y.ref,L,T||y,!T):ce==null&&y&&y.ref!=null&&wi(y.ref,null,L,y,!0)},F=(y,T,P,B)=>{if(y==null)s(T.el=l(T.children),P,B);else{const $=T.el=y.el;T.children!==y.children&&h($,T.children)}},Q=(y,T,P,B)=>{y==null?s(T.el=c(T.children||""),P,B):T.el=y.el},V=(y,T,P,B)=>{[y.el,y.anchor]=D(y.children,T,P,B,y.el,y.anchor)},M=({el:y,anchor:T},P,B)=>{let $;for(;y&&y!==T;)$=m(y),s(y,P,B),y=$;s(T,P,B)},Y=({el:y,anchor:T})=>{let P;for(;y&&y!==T;)P=m(y),r(y),y=P;r(T)},U=(y,T,P,B,$,L,te,X,J)=>{if(T.type==="svg"?te="svg":T.type==="math"&&(te="mathml"),y==null)q(T,P,B,$,L,te,X,J);else{const K=y.el&&y.el._isVueCE?y.el:null;try{K&&K._beginPatch(),v(y,T,$,L,te,X,J)}finally{K&&K._endPatch()}}},q=(y,T,P,B,$,L,te,X)=>{let J,K;const{props:ce,shapeFlag:re,transition:ue,dirs:he}=y;if(J=y.el=o(y.type,L,ce&&ce.is,ce),re&8?f(J,y.children):re&16&&_(y.children,J,null,B,$,Cl(y,L),te,X),he&&Ds(y,null,B,"created"),b(J,y,y.scopeId,te,B),ce){for(const Oe in ce)Oe!=="value"&&!_i(Oe)&&i(J,Oe,null,ce[Oe],L,B);"value"in ce&&i(J,"value",null,ce.value,L),(K=ce.onVnodeBeforeMount)&&mn(K,B,y)}he&&Ds(y,null,B,"beforeMount");const Te=Fw($,ue);Te&&ue.beforeEnter(J),s(J,T,P),((K=ce&&ce.onVnodeMounted)||Te||he)&&jt(()=>{K&&mn(K,B,y),Te&&ue.enter(J),he&&Ds(y,null,B,"mounted")},$)},b=(y,T,P,B,$)=>{if(P&&w(y,P),B)for(let L=0;L<B.length;L++)w(y,B[L]);if($){let L=$.subTree;if(T===L||bm(L.type)&&(L.ssContent===T||L.ssFallback===T)){const te=$.vnode;b(y,te,te.scopeId,te.slotScopeIds,$.parent)}}},_=(y,T,P,B,$,L,te,X,J=0)=>{for(let K=J;K<y.length;K++){const ce=y[K]=X?rs(y[K]):yn(y[K]);O(null,ce,T,P,B,$,L,te,X)}},v=(y,T,P,B,$,L,te)=>{const X=T.el=y.el;let{patchFlag:J,dynamicChildren:K,dirs:ce}=T;J|=y.patchFlag&16;const re=y.props||Le,ue=T.props||Le;let he;if(P&&Ns(P,!1),(he=ue.onVnodeBeforeUpdate)&&mn(he,P,T,y),ce&&Ds(T,y,P,"beforeUpdate"),P&&Ns(P,!0),(re.innerHTML&&ue.innerHTML==null||re.textContent&&ue.textContent==null)&&f(X,""),K?R(y.dynamicChildren,K,X,P,B,Cl(T,$),L):te||Ee(y,T,X,null,P,B,Cl(T,$),L,!1),J>0){if(J&16)A(X,re,ue,P,$);else if(J&2&&re.class!==ue.class&&i(X,"class",null,ue.class,$),J&4&&i(X,"style",re.style,ue.style,$),J&8){const Te=T.dynamicProps;for(let Oe=0;Oe<Te.length;Oe++){const Ce=Te[Oe],yt=re[Ce],vt=ue[Ce];(vt!==yt||Ce==="value")&&i(X,Ce,yt,vt,$,P)}}J&1&&y.children!==T.children&&f(X,T.children)}else!te&&K==null&&A(X,re,ue,P,$);((he=ue.onVnodeUpdated)||ce)&&jt(()=>{he&&mn(he,P,T,y),ce&&Ds(T,y,P,"updated")},B)},R=(y,T,P,B,$,L,te)=>{for(let X=0;X<T.length;X++){const J=y[X],K=T[X],ce=J.el&&(J.type===ze||!hi(J,K)||J.shapeFlag&198)?p(J.el):P;O(J,K,ce,null,B,$,L,te,!0)}},A=(y,T,P,B,$)=>{if(T!==P){if(T!==Le)for(const L in T)!_i(L)&&!(L in P)&&i(y,L,T[L],null,$,B);for(const L in P){if(_i(L))continue;const te=P[L],X=T[L];te!==X&&L!=="value"&&i(y,L,X,te,$,B)}"value"in P&&i(y,"value",T.value,P.value,$)}},C=(y,T,P,B,$,L,te,X,J)=>{const K=T.el=y?y.el:l(""),ce=T.anchor=y?y.anchor:l("");let{patchFlag:re,dynamicChildren:ue,slotScopeIds:he}=T;he&&(X=X?X.concat(he):he),y==null?(s(K,P,B),s(ce,P,B),_(T.children||[],P,ce,$,L,te,X,J)):re>0&&re&64&&ue&&y.dynamicChildren?(R(y.dynamicChildren,ue,P,$,L,te,X),(T.key!=null||$&&T===$.subTree)&&Tm(y,T,!0)):Ee(y,T,P,ce,$,L,te,X,J)},E=(y,T,P,B,$,L,te,X,J)=>{T.slotScopeIds=X,y==null?T.shapeFlag&512?$.ctx.activate(T,P,B,te,J):Ue(T,P,B,$,L,te,J):tt(y,T,J)},Ue=(y,T,P,B,$,L,te)=>{const X=y.component=Ww(y,B,$);if(rm(y)&&(X.ctx.renderer=ae),Qw(X,!1,te),X.asyncDep){if($&&$.registerDep(X,We,te),!y.el){const J=X.subTree=je(ys);Q(null,J,T,P),y.placeholder=J.el}}else We(X,y,T,P,$,L,te)},tt=(y,T,P)=>{const B=T.component=y.component;if(Cw(y,T,P))if(B.asyncDep&&!B.asyncResolved){Pe(B,T,P);return}else B.next=T,B.update();else T.el=y.el,B.vnode=T},We=(y,T,P,B,$,L,te)=>{const X=()=>{if(y.isMounted){let{next:re,bu:ue,u:he,parent:Te,vnode:Oe}=y;{const $t=Im(y);if($t){re&&(re.el=Oe.el,Pe(y,re,te)),$t.asyncDep.then(()=>{y.isUnmounted||X()});return}}let Ce=re,yt;Ns(y,!1),re?(re.el=Oe.el,Pe(y,re,te)):re=Oe,ue&&Co(ue),(yt=re.props&&re.props.onVnodeBeforeUpdate)&&mn(yt,Te,re,Oe),Ns(y,!0);const vt=sf(y),Ut=y.subTree;y.subTree=vt,O(Ut,vt,p(Ut.el),S(Ut),y,$,L),re.el=vt.el,Ce===null&&Pw(y,vt.el),he&&jt(he,$),(yt=re.props&&re.props.onVnodeUpdated)&&jt(()=>mn(yt,Te,re,Oe),$)}else{let re;const{el:ue,props:he}=T,{bm:Te,m:Oe,parent:Ce,root:yt,type:vt}=y,Ut=Ei(T);Ns(y,!1),Te&&Co(Te),!Ut&&(re=he&&he.onVnodeBeforeMount)&&mn(re,Ce,T),Ns(y,!0);{yt.ce&&yt.ce._def.shadowRoot!==!1&&yt.ce._injectChildStyle(vt);const $t=y.subTree=sf(y);O(null,$t,P,B,y,$,L),T.el=$t.el}if(Oe&&jt(Oe,$),!Ut&&(re=he&&he.onVnodeMounted)){const $t=T;jt(()=>mn(re,Ce,$t),$)}(T.shapeFlag&256||Ce&&Ei(Ce.vnode)&&Ce.vnode.shapeFlag&256)&&y.a&&jt(y.a,$),y.isMounted=!0,T=P=B=null}};y.scope.on();const J=y.effect=new Vp(X);y.scope.off();const K=y.update=J.run.bind(J),ce=y.job=J.runIfDirty.bind(J);ce.i=y,ce.id=y.uid,J.scheduler=()=>eu(ce),Ns(y,!0),K()},Pe=(y,T,P)=>{T.component=y;const B=y.vnode.props;y.vnode=T,y.next=null,kw(y,T.props,B,P),Ow(y,T.children,P),$n(),Yh(y),Bn()},Ee=(y,T,P,B,$,L,te,X,J=!1)=>{const K=y&&y.children,ce=y?y.shapeFlag:0,re=T.children,{patchFlag:ue,shapeFlag:he}=T;if(ue>0){if(ue&128){Ot(K,re,P,B,$,L,te,X,J);return}else if(ue&256){gt(K,re,P,B,$,L,te,X,J);return}}he&8?(ce&16&&W(K,$,L),re!==K&&f(P,re)):ce&16?he&16?Ot(K,re,P,B,$,L,te,X,J):W(K,$,L,!0):(ce&8&&f(P,""),he&16&&_(re,P,B,$,L,te,X,J))},gt=(y,T,P,B,$,L,te,X,J)=>{y=y||yr,T=T||yr;const K=y.length,ce=T.length,re=Math.min(K,ce);let ue;for(ue=0;ue<re;ue++){const he=T[ue]=J?rs(T[ue]):yn(T[ue]);O(y[ue],he,P,null,$,L,te,X,J)}K>ce?W(y,$,L,!0,!1,re):_(T,P,B,$,L,te,X,J,re)},Ot=(y,T,P,B,$,L,te,X,J)=>{let K=0;const ce=T.length;let re=y.length-1,ue=ce-1;for(;K<=re&&K<=ue;){const he=y[K],Te=T[K]=J?rs(T[K]):yn(T[K]);if(hi(he,Te))O(he,Te,P,null,$,L,te,X,J);else break;K++}for(;K<=re&&K<=ue;){const he=y[re],Te=T[ue]=J?rs(T[ue]):yn(T[ue]);if(hi(he,Te))O(he,Te,P,null,$,L,te,X,J);else break;re--,ue--}if(K>re){if(K<=ue){const he=ue+1,Te=he<ce?T[he].el:B;for(;K<=ue;)O(null,T[K]=J?rs(T[K]):yn(T[K]),P,Te,$,L,te,X,J),K++}}else if(K>ue)for(;K<=re;)nt(y[K],$,L,!0),K++;else{const he=K,Te=K,Oe=new Map;for(K=Te;K<=ue;K++){const ht=T[K]=J?rs(T[K]):yn(T[K]);ht.key!=null&&Oe.set(ht.key,K)}let Ce,yt=0;const vt=ue-Te+1;let Ut=!1,$t=0;const Zt=new Array(vt);for(K=0;K<vt;K++)Zt[K]=0;for(K=he;K<=re;K++){const ht=y[K];if(yt>=vt){nt(ht,$,L,!0);continue}let at;if(ht.key!=null)at=Oe.get(ht.key);else for(Ce=Te;Ce<=ue;Ce++)if(Zt[Ce-Te]===0&&hi(ht,T[Ce])){at=Ce;break}at===void 0?nt(ht,$,L,!0):(Zt[at-Te]=K+1,at>=$t?$t=at:Ut=!0,O(ht,T[at],P,null,$,L,te,X,J),yt++)}const rr=Ut?Uw(Zt):yr;for(Ce=rr.length-1,K=vt-1;K>=0;K--){const ht=Te+K,at=T[ht],Qr=T[ht+1],Ss=ht+1<ce?Qr.el||Qr.placeholder:B;Zt[K]===0?O(null,at,P,Ss,$,L,te,X,J):Ut&&(Ce<0||K!==rr[Ce]?_t(at,P,Ss,2):Ce--)}}},_t=(y,T,P,B,$=null)=>{const{el:L,type:te,transition:X,children:J,shapeFlag:K}=y;if(K&6){_t(y.component.subTree,T,P,B);return}if(K&128){y.suspense.move(T,P,B);return}if(K&64){te.move(y,T,P,ae);return}if(te===ze){s(L,T,P);for(let re=0;re<J.length;re++)_t(J[re],T,P,B);s(y.anchor,T,P);return}if(te===xo){M(y,T,P);return}if(B!==2&&K&1&&X)if(B===0)X.beforeEnter(L),s(L,T,P),jt(()=>X.enter(L),$);else{const{leave:re,delayLeave:ue,afterLeave:he}=X,Te=()=>{y.ctx.isUnmounted?r(L):s(L,T,P)},Oe=()=>{L._isLeaving&&L[Jv](!0),re(L,()=>{Te(),he&&he()})};ue?ue(L,Te,Oe):Oe()}else s(L,T,P)},nt=(y,T,P,B=!1,$=!1)=>{const{type:L,props:te,ref:X,children:J,dynamicChildren:K,shapeFlag:ce,patchFlag:re,dirs:ue,cacheIndex:he}=y;if(re===-2&&($=!1),X!=null&&($n(),wi(X,null,P,y,!0),Bn()),he!=null&&(T.renderCache[he]=void 0),ce&256){T.ctx.deactivate(y);return}const Te=ce&1&&ue,Oe=!Ei(y);let Ce;if(Oe&&(Ce=te&&te.onVnodeBeforeUnmount)&&mn(Ce,T,y),ce&6)N(y.component,P,B);else{if(ce&128){y.suspense.unmount(P,B);return}Te&&Ds(y,null,T,"beforeUnmount"),ce&64?y.type.remove(y,T,P,ae,B):K&&!K.hasOnce&&(L!==ze||re>0&&re&64)?W(K,T,P,!1,!0):(L===ze&&re&384||!$&&ce&16)&&W(J,T,P),B&&Xt(y)}(Oe&&(Ce=te&&te.onVnodeUnmounted)||Te)&&jt(()=>{Ce&&mn(Ce,T,y),Te&&Ds(y,null,T,"unmounted")},P)},Xt=y=>{const{type:T,el:P,anchor:B,transition:$}=y;if(T===ze){Z(P,B);return}if(T===xo){Y(y);return}const L=()=>{r(P),$&&!$.persisted&&$.afterLeave&&$.afterLeave()};if(y.shapeFlag&1&&$&&!$.persisted){const{leave:te,delayLeave:X}=$,J=()=>te(P,L);X?X(y.el,L,J):J()}else L()},Z=(y,T)=>{let P;for(;y!==T;)P=m(y),r(y),y=P;r(T)},N=(y,T,P)=>{const{bum:B,scope:$,job:L,subTree:te,um:X,m:J,a:K}=y;af(J),af(K),B&&Co(B),$.stop(),L&&(L.flags|=8,nt(te,y,T,P)),X&&jt(X,T),jt(()=>{y.isUnmounted=!0},T)},W=(y,T,P,B=!1,$=!1,L=0)=>{for(let te=L;te<y.length;te++)nt(y[te],T,P,B,$)},S=y=>{if(y.shapeFlag&6)return S(y.component.subTree);if(y.shapeFlag&128)return y.suspense.next();const T=m(y.anchor||y.el),P=T&&T[Qv];return P?m(P):T};let H=!1;const j=(y,T,P)=>{y==null?T._vnode&&nt(T._vnode,null,null,!0):O(T._vnode||null,y,T,null,null,null,P),T._vnode=y,H||(H=!0,Yh(),Zp(),H=!1)},ae={p:O,um:nt,m:_t,r:Xt,mt:Ue,mc:_,pc:Ee,pbc:R,n:S,o:t};return{render:j,hydrate:void 0,createApp:vw(j)}}function Cl({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ns({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Fw(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Tm(t,e,n=!1){const s=t.children,r=e.children;if(pe(s)&&pe(r))for(let i=0;i<s.length;i++){const o=s[i];let l=r[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[i]=rs(r[i]),l.el=o.el),!n&&l.patchFlag!==-2&&Tm(o,l)),l.type===Na&&l.patchFlag!==-1&&(l.el=o.el),l.type===ys&&!l.el&&(l.el=o.el)}}function Uw(t){const e=t.slice(),n=[0];let s,r,i,o,l;const c=t.length;for(s=0;s<c;s++){const h=t[s];if(h!==0){if(r=n[n.length-1],t[r]<h){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)l=i+o>>1,t[n[l]]<h?i=l+1:o=l;h<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Im(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Im(e)}function af(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const bm=t=>t.__isSuspense;function $w(t,e){e&&e.pendingBranch?pe(t)?e.effects.push(...t):e.effects.push(t):Kv(t)}const ze=Symbol.for("v-fgt"),Na=Symbol.for("v-txt"),ys=Symbol.for("v-cmt"),xo=Symbol.for("v-stc"),Ii=[];let Ht=null;function ne(t=!1){Ii.push(Ht=t?null:[])}function Bw(){Ii.pop(),Ht=Ii[Ii.length-1]||null}let Vi=1;function Ko(t,e=!1){Vi+=t,t<0&&Ht&&e&&(Ht.hasOnce=!0)}function Am(t){return t.dynamicChildren=Vi>0?Ht||yr:null,Bw(),Vi>0&&Ht&&Ht.push(t),t}function se(t,e,n,s,r,i){return Am(I(t,e,n,s,r,i,!0))}function ac(t,e,n,s,r){return Am(je(t,e,n,s,r,!0))}function Qo(t){return t?t.__v_isVNode===!0:!1}function hi(t,e){return t.type===e.type&&t.key===e.key}const Rm=({key:t})=>t??null,ko=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?et(t)||Rt(t)||ve(t)?{i:qt,r:t,k:e,f:!!n}:t:null);function I(t,e=null,n=null,s=0,r=null,i=t===ze?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Rm(e),ref:e&&ko(e),scopeId:tm,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:qt};return l?(ru(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=et(n)?8:16),Vi>0&&!o&&Ht&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Ht.push(c),c}const je=jw;function jw(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===uw)&&(t=ys),Qo(t)){const l=kr(t,e,!0);return n&&ru(l,n),Vi>0&&!i&&Ht&&(l.shapeFlag&6?Ht[Ht.indexOf(t)]=l:Ht.push(l)),l.patchFlag=-2,l}if(e0(t)&&(t=t.__vccOpts),e){e=qw(e);let{class:l,style:c}=e;l&&!et(l)&&(e.class=Dt(l)),Fe(c)&&(Xc(c)&&!pe(c)&&(c=St({},c)),e.style=Rs(c))}const o=et(t)?1:bm(t)?128:Yv(t)?64:Fe(t)?4:ve(t)?2:0;return I(t,e,n,s,r,o,i,!0)}function qw(t){return t?Xc(t)||gm(t)?St({},t):t:null}function kr(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:l,transition:c}=t,h=e?Hw(r||{},e):r,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:h,key:h&&Rm(h),ref:e&&e.ref?n&&i?pe(i)?i.concat(ko(e)):[i,ko(e)]:ko(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ze?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&kr(t.ssContent),ssFallback:t.ssFallback&&kr(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&s&&tu(f,c.clone(f)),f}function _r(t=" ",e=0){return je(Na,null,t,e)}function Sm(t,e){const n=je(xo,null,t);return n.staticCount=e,n}function it(t="",e=!1){return e?(ne(),ac(ys,null,t)):je(ys,null,t)}function yn(t){return t==null||typeof t=="boolean"?je(ys):pe(t)?je(ze,null,t.slice()):Qo(t)?rs(t):je(Na,null,String(t))}function rs(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:kr(t)}function ru(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(pe(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),ru(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!gm(e)?e._ctx=qt:r===3&&qt&&(qt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ve(e)?(e={default:e,_ctx:qt},n=32):(e=String(e),s&64?(n=16,e=[_r(e)]):n=8);t.children=e,t.shapeFlag|=n}function Hw(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Dt([e.class,s.class]));else if(r==="style")e.style=Rs([e.style,s.style]);else if(Ea(r)){const i=e[r],o=s[r];o&&i!==o&&!(pe(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function mn(t,e,n,s=null){Cn(t,e,7,[n,s])}const zw=um();let Gw=0;function Ww(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||zw,i={uid:Gw++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new yv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ym(s,r),emitsOptions:dm(s,r),emit:null,emitted:null,propsDefaults:Le,inheritAttrs:s.inheritAttrs,ctx:Le,data:Le,props:Le,attrs:Le,slots:Le,refs:Le,setupState:Le,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=bw.bind(null,i),t.ce&&t.ce(i),i}let bt=null;const Kw=()=>bt||qt;let Yo,lc;{const t=Ra(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};Yo=e("__VUE_INSTANCE_SETTERS__",n=>bt=n),lc=e("__VUE_SSR_SETTERS__",n=>Oi=n)}const Qi=t=>{const e=bt;return Yo(t),t.scope.on(),()=>{t.scope.off(),Yo(e)}},lf=()=>{bt&&bt.scope.off(),Yo(null)};function Cm(t){return t.vnode.shapeFlag&4}let Oi=!1;function Qw(t,e=!1,n=!1){e&&lc(e);const{props:s,children:r}=t.vnode,i=Cm(t);xw(t,s,i,e),Vw(t,r,n||e);const o=i?Yw(t,e):void 0;return e&&lc(!1),o}function Yw(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,fw);const{setup:s}=n;if(s){$n();const r=t.setupContext=s.length>1?Xw(t):null,i=Qi(t),o=Wi(s,t,0,[t.props,r]),l=Sp(o);if(Bn(),i(),(l||t.sp)&&!Ei(t)&&sm(t),l){if(o.then(lf,lf),e)return o.then(c=>{cf(t,c)}).catch(c=>{xa(c,t,0)});t.asyncDep=o}else cf(t,o)}else Pm(t)}function cf(t,e,n){ve(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Fe(e)&&(t.setupState=Yp(e)),Pm(t)}function Pm(t,e,n){const s=t.type;t.render||(t.render=s.render||vn);{const r=Qi(t);$n();try{dw(t)}finally{Bn(),r()}}}const Jw={get(t,e){return Tt(t,"get",""),t[e]}};function Xw(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Jw),slots:t.slots,emit:t.emit,expose:e}}function Va(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Yp(Fv(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ti)return Ti[n](t)},has(e,n){return n in e||n in Ti}})):t.proxy}function Zw(t,e=!0){return ve(t)?t.displayName||t.name:t.name||e&&t.__name}function e0(t){return ve(t)&&"__vccOpts"in t}const At=(t,e)=>qv(t,e,Oi);function xm(t,e,n){try{Ko(-1);const s=arguments.length;return s===2?Fe(e)&&!pe(e)?Qo(e)?je(t,null,[e]):je(t,e):je(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Qo(n)&&(n=[n]),je(t,e,n))}finally{Ko(1)}}const t0="3.5.25";let cc;const uf=typeof window<"u"&&window.trustedTypes;if(uf)try{cc=uf.createPolicy("vue",{createHTML:t=>t})}catch{}const km=cc?t=>cc.createHTML(t):t=>t,n0="http://www.w3.org/2000/svg",s0="http://www.w3.org/1998/Math/MathML",Vn=typeof document<"u"?document:null,hf=Vn&&Vn.createElement("template"),r0={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Vn.createElementNS(n0,t):e==="mathml"?Vn.createElementNS(s0,t):n?Vn.createElement(t,{is:n}):Vn.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Vn.createTextNode(t),createComment:t=>Vn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Vn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{hf.innerHTML=km(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const l=hf.content;if(s==="svg"||s==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},i0=Symbol("_vtc");function o0(t,e,n){const s=t[i0];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const ff=Symbol("_vod"),a0=Symbol("_vsh"),l0=Symbol(""),c0=/(?:^|;)\s*display\s*:/;function u0(t,e,n){const s=t.style,r=et(n);let i=!1;if(n&&!r){if(e)if(et(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&Do(s,l,"")}else for(const o in e)n[o]==null&&Do(s,o,"");for(const o in n)o==="display"&&(i=!0),Do(s,o,n[o])}else if(r){if(e!==n){const o=s[l0];o&&(n+=";"+o),s.cssText=n,i=c0.test(n)}}else e&&t.removeAttribute("style");ff in t&&(t[ff]=i?s.display:"",t[a0]&&(s.display="none"))}const df=/\s*!important$/;function Do(t,e,n){if(pe(n))n.forEach(s=>Do(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=h0(t,e);df.test(n)?t.setProperty(Js(s),n.replace(df,""),"important"):t[s]=n}}const pf=["Webkit","Moz","ms"],Pl={};function h0(t,e){const n=Pl[e];if(n)return n;let s=Jt(e);if(s!=="filter"&&s in t)return Pl[e]=s;s=ba(s);for(let r=0;r<pf.length;r++){const i=pf[r]+s;if(i in t)return Pl[e]=i}return e}const mf="http://www.w3.org/1999/xlink";function gf(t,e,n,s,r,i=mv(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(mf,e.slice(6,e.length)):t.setAttributeNS(mf,e,n):n==null||i&&!kp(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Sn(n)?String(n):n)}function _f(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?km(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=kp(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function Ms(t,e,n,s){t.addEventListener(e,n,s)}function f0(t,e,n,s){t.removeEventListener(e,n,s)}const yf=Symbol("_vei");function d0(t,e,n,s,r=null){const i=t[yf]||(t[yf]={}),o=i[e];if(s&&o)o.value=s;else{const[l,c]=p0(e);if(s){const h=i[e]=_0(s,r);Ms(t,l,h,c)}else o&&(f0(t,l,o,c),i[e]=void 0)}}const vf=/(?:Once|Passive|Capture)$/;function p0(t){let e;if(vf.test(t)){e={};let s;for(;s=t.match(vf);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Js(t.slice(2)),e]}let xl=0;const m0=Promise.resolve(),g0=()=>xl||(m0.then(()=>xl=0),xl=Date.now());function _0(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Cn(y0(s,n.value),e,5,[s])};return n.value=t,n.attached=g0(),n}function y0(t,e){if(pe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const wf=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,v0=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?o0(t,s,o):e==="style"?u0(t,n,s):Ea(e)?qc(e)||d0(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):w0(t,e,s,o))?(_f(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&gf(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!et(s))?_f(t,Jt(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),gf(t,e,s,o))};function w0(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&wf(e)&&ve(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return wf(e)&&et(n)?!1:e in t}const Jo=t=>{const e=t.props["onUpdate:modelValue"]||!1;return pe(e)?n=>Co(e,n):e};function E0(t){t.target.composing=!0}function Ef(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Tr=Symbol("_assign");function Tf(t,e,n){return e&&(t=t.trim()),n&&(t=Aa(t)),t}const kl={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[Tr]=Jo(r);const i=s||r.props&&r.props.type==="number";Ms(t,e?"change":"input",o=>{o.target.composing||t[Tr](Tf(t.value,n,i))}),(n||i)&&Ms(t,"change",()=>{t.value=Tf(t.value,n,i)}),e||(Ms(t,"compositionstart",E0),Ms(t,"compositionend",Ef),Ms(t,"change",Ef))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(t[Tr]=Jo(o),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?Aa(t.value):t.value,c=e??"";l!==c&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||r&&t.value.trim()===c)||(t.value=c))}},Dl={deep:!0,created(t,{value:e,modifiers:{number:n}},s){const r=Ta(e);Ms(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Aa(Xo(o)):Xo(o));t[Tr](t.multiple?r?new Set(i):i:i[0]),t._assigning=!0,Zc(()=>{t._assigning=!1})}),t[Tr]=Jo(s)},mounted(t,{value:e}){If(t,e)},beforeUpdate(t,e,n){t[Tr]=Jo(n)},updated(t,{value:e}){t._assigning||If(t,e)}};function If(t,e){const n=t.multiple,s=pe(e);if(!(n&&!s&&!Ta(e))){for(let r=0,i=t.options.length;r<i;r++){const o=t.options[r],l=Xo(o);if(n)if(s){const c=typeof l;c==="string"||c==="number"?o.selected=e.some(h=>String(h)===String(l)):o.selected=_v(e,l)>-1}else o.selected=e.has(l);else if(Sa(Xo(o),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Xo(t){return"_value"in t?t._value:t.value}const T0=["ctrl","shift","alt","meta"],I0={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>T0.some(n=>t[`${n}Key`]&&!e.includes(n))},bf=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const l=I0[e[o]];if(l&&l(r,e))return}return t(r,...i)})},b0=St({patchProp:v0},r0);let Af;function A0(){return Af||(Af=Mw(b0))}const R0=(...t)=>{const e=A0().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=C0(s);if(!r)return;const i=e._component;!ve(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,S0(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function S0(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function C0(t){return et(t)?document.querySelector(t):t}const Oa=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},P0={},x0={class:"min-h-screen w-full overflow-x-hidden"};function k0(t,e){const n=am("router-view");return ne(),se("div",x0,[je(n)])}const D0=Oa(P0,[["render",k0]]);const fr=typeof document<"u";function Dm(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function N0(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Dm(t.default)}const xe=Object.assign;function Nl(t,e){const n={};for(const s in e){const r=e[s];n[s]=cn(r)?r.map(t):t(r)}return n}const bi=()=>{},cn=Array.isArray;function Rf(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}const Nm=/#/g,V0=/&/g,O0=/\//g,M0=/=/g,L0=/\?/g,Vm=/\+/g,F0=/%5B/g,U0=/%5D/g,Om=/%5E/g,$0=/%60/g,Mm=/%7B/g,B0=/%7C/g,Lm=/%7D/g,j0=/%20/g;function iu(t){return t==null?"":encodeURI(""+t).replace(B0,"|").replace(F0,"[").replace(U0,"]")}function q0(t){return iu(t).replace(Mm,"{").replace(Lm,"}").replace(Om,"^")}function uc(t){return iu(t).replace(Vm,"%2B").replace(j0,"+").replace(Nm,"%23").replace(V0,"%26").replace($0,"`").replace(Mm,"{").replace(Lm,"}").replace(Om,"^")}function H0(t){return uc(t).replace(M0,"%3D")}function z0(t){return iu(t).replace(Nm,"%23").replace(L0,"%3F")}function G0(t){return z0(t).replace(O0,"%2F")}function Mi(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const W0=/\/$/,K0=t=>t.replace(W0,"");function Vl(t,e,n="/"){let s,r={},i="",o="";const l=e.indexOf("#");let c=e.indexOf("?");return c=l>=0&&c>l?-1:c,c>=0&&(s=e.slice(0,c),i=e.slice(c,l>0?l:e.length),r=t(i.slice(1))),l>=0&&(s=s||e.slice(0,l),o=e.slice(l,e.length)),s=X0(s??e,n),{fullPath:s+i+o,path:s,query:r,hash:Mi(o)}}function Q0(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Sf(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Y0(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&Dr(e.matched[s],n.matched[r])&&Fm(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Dr(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Fm(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!J0(t[n],e[n]))return!1;return!0}function J0(t,e){return cn(t)?Cf(t,e):cn(e)?Cf(e,t):t===e}function Cf(t,e){return cn(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function X0(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,l;for(o=0;o<s.length;o++)if(l=s[o],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const es={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let hc=function(t){return t.pop="pop",t.push="push",t}({}),Ol=function(t){return t.back="back",t.forward="forward",t.unknown="",t}({});function Z0(t){if(!t)if(fr){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),K0(t)}const eE=/^[^#]+#/;function tE(t,e){return t.replace(eE,"#")+e}function nE(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const Ma=()=>({left:window.scrollX,top:window.scrollY});function sE(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=nE(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Pf(t,e){return(history.state?history.state.position-e:-1)+t}const fc=new Map;function rE(t,e){fc.set(t,e)}function iE(t){const e=fc.get(t);return fc.delete(t),e}function oE(t){return typeof t=="string"||t&&typeof t=="object"}function Um(t){return typeof t=="string"||typeof t=="symbol"}let Qe=function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t}({});const $m=Symbol("");Qe.MATCHER_NOT_FOUND+"",Qe.NAVIGATION_GUARD_REDIRECT+"",Qe.NAVIGATION_ABORTED+"",Qe.NAVIGATION_CANCELLED+"",Qe.NAVIGATION_DUPLICATED+"";function Nr(t,e){return xe(new Error,{type:t,[$m]:!0},e)}function Nn(t,e){return t instanceof Error&&$m in t&&(e==null||!!(t.type&e))}const aE=["params","query","hash"];function lE(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of aE)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function cE(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(Vm," "),i=r.indexOf("="),o=Mi(i<0?r:r.slice(0,i)),l=i<0?null:Mi(r.slice(i+1));if(o in e){let c=e[o];cn(c)||(c=e[o]=[c]),c.push(l)}else e[o]=l}return e}function xf(t){let e="";for(let n in t){const s=t[n];if(n=H0(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(cn(s)?s.map(r=>r&&uc(r)):[s&&uc(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function uE(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=cn(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const hE=Symbol(""),kf=Symbol(""),La=Symbol(""),Bm=Symbol(""),dc=Symbol("");function fi(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function is(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((l,c)=>{const h=m=>{m===!1?c(Nr(Qe.NAVIGATION_ABORTED,{from:n,to:e})):m instanceof Error?c(m):oE(m)?c(Nr(Qe.NAVIGATION_GUARD_REDIRECT,{from:e,to:m})):(o&&s.enterCallbacks[r]===o&&typeof m=="function"&&o.push(m),l())},f=i(()=>t.call(s&&s.instances[r],e,n,h));let p=Promise.resolve(f);t.length<3&&(p=p.then(h)),p.catch(m=>c(m))})}function Ml(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const l in o.components){let c=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(Dm(c)){const h=(c.__vccOpts||c)[e];h&&i.push(is(h,n,s,o,l,r))}else{let h=c();i.push(()=>h.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const p=N0(f)?f.default:f;o.mods[l]=f,o.components[l]=p;const m=(p.__vccOpts||p)[e];return m&&is(m,n,s,o,l,r)()}))}}return i}function fE(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const l=e.matched[o];l&&(t.matched.find(h=>Dr(h,l))?s.push(l):n.push(l));const c=t.matched[o];c&&(e.matched.find(h=>Dr(h,c))||r.push(c))}return[n,s,r]}let dE=()=>location.protocol+"//"+location.host;function jm(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,l=r.slice(o);return l[0]!=="/"&&(l="/"+l),Sf(l,"")}return Sf(n,t)+s+r}function pE(t,e,n,s){let r=[],i=[],o=null;const l=({state:m})=>{const w=jm(t,location),D=n.value,O=e.value;let F=0;if(m){if(n.value=w,e.value=m,o&&o===D){o=null;return}F=O?m.position-O.position:0}else s(w);r.forEach(Q=>{Q(n.value,D,{delta:F,type:hc.pop,direction:F?F>0?Ol.forward:Ol.back:Ol.unknown})})};function c(){o=n.value}function h(m){r.push(m);const w=()=>{const D=r.indexOf(m);D>-1&&r.splice(D,1)};return i.push(w),w}function f(){if(document.visibilityState==="hidden"){const{history:m}=window;if(!m.state)return;m.replaceState(xe({},m.state,{scroll:Ma()}),"")}}function p(){for(const m of i)m();i=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:c,listen:h,destroy:p}}function Df(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?Ma():null}}function mE(t){const{history:e,location:n}=window,s={value:jm(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,h,f){const p=t.indexOf("#"),m=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+c:dE()+t+c;try{e[f?"replaceState":"pushState"](h,"",m),r.value=h}catch(w){console.error(w),n[f?"replace":"assign"](m)}}function o(c,h){i(c,xe({},e.state,Df(r.value.back,c,r.value.forward,!0),h,{position:r.value.position}),!0),s.value=c}function l(c,h){const f=xe({},r.value,e.state,{forward:c,scroll:Ma()});i(f.current,f,!0),i(c,xe({},Df(s.value,c,null),{position:f.position+1},h),!1),s.value=c}return{location:s,state:r,push:l,replace:o}}function gE(t){t=Z0(t);const e=mE(t),n=pE(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=xe({location:"",base:t,go:s,createHref:tE.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function _E(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),gE(t)}let Ls=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t}({});var rt=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t}(rt||{});const yE={type:Ls.Static,value:""},vE=/[a-zA-Z0-9_]/;function wE(t){if(!t)return[[]];if(t==="/")return[[yE]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(w){throw new Error(`ERR (${n})/"${h}": ${w}`)}let n=rt.Static,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let l=0,c,h="",f="";function p(){h&&(n===rt.Static?i.push({type:Ls.Static,value:h}):n===rt.Param||n===rt.ParamRegExp||n===rt.ParamRegExpEnd?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Ls.Param,value:h,regexp:f,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),h="")}function m(){h+=c}for(;l<t.length;){if(c=t[l++],c==="\\"&&n!==rt.ParamRegExp){s=n,n=rt.EscapeNext;continue}switch(n){case rt.Static:c==="/"?(h&&p(),o()):c===":"?(p(),n=rt.Param):m();break;case rt.EscapeNext:m(),n=s;break;case rt.Param:c==="("?n=rt.ParamRegExp:vE.test(c)?m():(p(),n=rt.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case rt.ParamRegExp:c===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+c:n=rt.ParamRegExpEnd:f+=c;break;case rt.ParamRegExpEnd:p(),n=rt.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--,f="";break;default:e("Unknown state");break}}return n===rt.ParamRegExp&&e(`Unfinished custom RegExp for param "${h}"`),p(),o(),r}const Nf="[^/]+?",EE={sensitive:!1,strict:!1,start:!0,end:!0};var kt=function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t}(kt||{});const TE=/[.+*?^${}()[\]/\\]/g;function IE(t,e){const n=xe({},EE,e),s=[];let r=n.start?"^":"";const i=[];for(const h of t){const f=h.length?[]:[kt.Root];n.strict&&!h.length&&(r+="/");for(let p=0;p<h.length;p++){const m=h[p];let w=kt.Segment+(n.sensitive?kt.BonusCaseSensitive:0);if(m.type===Ls.Static)p||(r+="/"),r+=m.value.replace(TE,"\\$&"),w+=kt.Static;else if(m.type===Ls.Param){const{value:D,repeatable:O,optional:F,regexp:Q}=m;i.push({name:D,repeatable:O,optional:F});const V=Q||Nf;if(V!==Nf){w+=kt.BonusCustomRegExp;try{`${V}`}catch(Y){throw new Error(`Invalid custom RegExp for param "${D}" (${V}): `+Y.message)}}let M=O?`((?:${V})(?:/(?:${V}))*)`:`(${V})`;p||(M=F&&h.length<2?`(?:/${M})`:"/"+M),F&&(M+="?"),r+=M,w+=kt.Dynamic,F&&(w+=kt.BonusOptional),O&&(w+=kt.BonusRepeatable),V===".*"&&(w+=kt.BonusWildcard)}f.push(w)}s.push(f)}if(n.strict&&n.end){const h=s.length-1;s[h][s[h].length-1]+=kt.BonusStrict}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function l(h){const f=h.match(o),p={};if(!f)return null;for(let m=1;m<f.length;m++){const w=f[m]||"",D=i[m-1];p[D.name]=w&&D.repeatable?w.split("/"):w}return p}function c(h){let f="",p=!1;for(const m of t){(!p||!f.endsWith("/"))&&(f+="/"),p=!1;for(const w of m)if(w.type===Ls.Static)f+=w.value;else if(w.type===Ls.Param){const{value:D,repeatable:O,optional:F}=w,Q=D in h?h[D]:"";if(cn(Q)&&!O)throw new Error(`Provided param "${D}" is an array but it is not repeatable (* or + modifiers)`);const V=cn(Q)?Q.join("/"):Q;if(!V)if(F)m.length<2&&(f.endsWith("/")?f=f.slice(0,-1):p=!0);else throw new Error(`Missing required param "${D}"`);f+=V}}return f||"/"}return{re:o,score:s,keys:i,parse:l,stringify:c}}function bE(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===kt.Static+kt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===kt.Static+kt.Segment?1:-1:0}function qm(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=bE(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(Vf(s))return 1;if(Vf(r))return-1}return r.length-s.length}function Vf(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const AE={strict:!1,end:!0,sensitive:!1};function RE(t,e,n){const s=IE(wE(t.path),n),r=xe(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function SE(t,e){const n=[],s=new Map;e=Rf(AE,e);function r(p){return s.get(p)}function i(p,m,w){const D=!w,O=Mf(p);O.aliasOf=w&&w.record;const F=Rf(e,p),Q=[O];if("alias"in p){const Y=typeof p.alias=="string"?[p.alias]:p.alias;for(const U of Y)Q.push(Mf(xe({},O,{components:w?w.record.components:O.components,path:U,aliasOf:w?w.record:O})))}let V,M;for(const Y of Q){const{path:U}=Y;if(m&&U[0]!=="/"){const q=m.record.path,b=q[q.length-1]==="/"?"":"/";Y.path=m.record.path+(U&&b+U)}if(V=RE(Y,m,F),w?w.alias.push(V):(M=M||V,M!==V&&M.alias.push(V),D&&p.name&&!Lf(V)&&o(p.name)),Hm(V)&&c(V),O.children){const q=O.children;for(let b=0;b<q.length;b++)i(q[b],V,w&&w.children[b])}w=w||V}return M?()=>{o(M)}:bi}function o(p){if(Um(p)){const m=s.get(p);m&&(s.delete(p),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(p);m>-1&&(n.splice(m,1),p.record.name&&s.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function l(){return n}function c(p){const m=xE(p,n);n.splice(m,0,p),p.record.name&&!Lf(p)&&s.set(p.record.name,p)}function h(p,m){let w,D={},O,F;if("name"in p&&p.name){if(w=s.get(p.name),!w)throw Nr(Qe.MATCHER_NOT_FOUND,{location:p});F=w.record.name,D=xe(Of(m.params,w.keys.filter(M=>!M.optional).concat(w.parent?w.parent.keys.filter(M=>M.optional):[]).map(M=>M.name)),p.params&&Of(p.params,w.keys.map(M=>M.name))),O=w.stringify(D)}else if(p.path!=null)O=p.path,w=n.find(M=>M.re.test(O)),w&&(D=w.parse(O),F=w.record.name);else{if(w=m.name?s.get(m.name):n.find(M=>M.re.test(m.path)),!w)throw Nr(Qe.MATCHER_NOT_FOUND,{location:p,currentLocation:m});F=w.record.name,D=xe({},m.params,p.params),O=w.stringify(D)}const Q=[];let V=w;for(;V;)Q.unshift(V.record),V=V.parent;return{name:F,path:O,params:D,matched:Q,meta:PE(Q)}}t.forEach(p=>i(p));function f(){n.length=0,s.clear()}return{addRoute:i,resolve:h,removeRoute:o,clearRoutes:f,getRoutes:l,getRecordMatcher:r}}function Of(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function Mf(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:CE(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function CE(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function Lf(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function PE(t){return t.reduce((e,n)=>xe(e,n.meta),{})}function xE(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;qm(t,e[i])<0?s=i:n=i+1}const r=kE(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function kE(t){let e=t;for(;e=e.parent;)if(Hm(e)&&qm(t,e)===0)return e}function Hm({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Ff(t){const e=wn(La),n=wn(Bm),s=At(()=>{const c=Ft(t.to);return e.resolve(c)}),r=At(()=>{const{matched:c}=s.value,{length:h}=c,f=c[h-1],p=n.matched;if(!f||!p.length)return-1;const m=p.findIndex(Dr.bind(null,f));if(m>-1)return m;const w=Uf(c[h-2]);return h>1&&Uf(f)===w&&p[p.length-1].path!==w?p.findIndex(Dr.bind(null,c[h-2])):m}),i=At(()=>r.value>-1&&ME(n.params,s.value.params)),o=At(()=>r.value>-1&&r.value===n.matched.length-1&&Fm(n.params,s.value.params));function l(c={}){if(OE(c)){const h=e[Ft(t.replace)?"replace":"push"](Ft(t.to)).catch(bi);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:s,href:At(()=>s.value.href),isActive:i,isExactActive:o,navigate:l}}function DE(t){return t.length===1?t[0]:t}const NE=nm({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Ff,setup(t,{slots:e}){const n=Pa(Ff(t)),{options:s}=wn(La),r=At(()=>({[$f(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[$f(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&DE(e.default(n));return t.custom?i:xm("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),VE=NE;function OE(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function ME(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!cn(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function Uf(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const $f=(t,e,n)=>t??e??n,LE=nm({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=wn(dc),r=At(()=>t.route||s.value),i=wn(kf,0),o=At(()=>{let h=Ft(i);const{matched:f}=r.value;let p;for(;(p=f[h])&&!p.components;)h++;return h}),l=At(()=>r.value.matched[o.value]);Po(kf,At(()=>o.value+1)),Po(hE,l),Po(dc,r);const c=Ie();return qs(()=>[c.value,l.value,t.name],([h,f,p],[m,w,D])=>{f&&(f.instances[p]=h,w&&w!==f&&h&&h===m&&(f.leaveGuards.size||(f.leaveGuards=w.leaveGuards),f.updateGuards.size||(f.updateGuards=w.updateGuards))),h&&f&&(!w||!Dr(f,w)||!m)&&(f.enterCallbacks[p]||[]).forEach(O=>O(h))},{flush:"post"}),()=>{const h=r.value,f=t.name,p=l.value,m=p&&p.components[f];if(!m)return Bf(n.default,{Component:m,route:h});const w=p.props[f],D=w?w===!0?h.params:typeof w=="function"?w(h):w:null,F=xm(m,xe({},D,e,{onVnodeUnmounted:Q=>{Q.component.isUnmounted&&(p.instances[f]=null)},ref:c}));return Bf(n.default,{Component:F,route:h})||F}}});function Bf(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const FE=LE;function UE(t){const e=SE(t.routes,t),n=t.parseQuery||cE,s=t.stringifyQuery||xf,r=t.history,i=fi(),o=fi(),l=fi(),c=Uv(es);let h=es;fr&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Nl.bind(null,S=>""+S),p=Nl.bind(null,G0),m=Nl.bind(null,Mi);function w(S,H){let j,ae;return Um(S)?(j=e.getRecordMatcher(S),ae=H):ae=S,e.addRoute(ae,j)}function D(S){const H=e.getRecordMatcher(S);H&&e.removeRoute(H)}function O(){return e.getRoutes().map(S=>S.record)}function F(S){return!!e.getRecordMatcher(S)}function Q(S,H){if(H=xe({},H||c.value),typeof S=="string"){const P=Vl(n,S,H.path),B=e.resolve({path:P.path},H),$=r.createHref(P.fullPath);return xe(P,B,{params:m(B.params),hash:Mi(P.hash),redirectedFrom:void 0,href:$})}let j;if(S.path!=null)j=xe({},S,{path:Vl(n,S.path,H.path).path});else{const P=xe({},S.params);for(const B in P)P[B]==null&&delete P[B];j=xe({},S,{params:p(P)}),H.params=p(H.params)}const ae=e.resolve(j,H),_e=S.hash||"";ae.params=f(m(ae.params));const y=Q0(s,xe({},S,{hash:q0(_e),path:ae.path})),T=r.createHref(y);return xe({fullPath:y,hash:_e,query:s===xf?uE(S.query):S.query||{}},ae,{redirectedFrom:void 0,href:T})}function V(S){return typeof S=="string"?Vl(n,S,c.value.path):xe({},S)}function M(S,H){if(h!==S)return Nr(Qe.NAVIGATION_CANCELLED,{from:H,to:S})}function Y(S){return b(S)}function U(S){return Y(xe(V(S),{replace:!0}))}function q(S,H){const j=S.matched[S.matched.length-1];if(j&&j.redirect){const{redirect:ae}=j;let _e=typeof ae=="function"?ae(S,H):ae;return typeof _e=="string"&&(_e=_e.includes("?")||_e.includes("#")?_e=V(_e):{path:_e},_e.params={}),xe({query:S.query,hash:S.hash,params:_e.path!=null?{}:S.params},_e)}}function b(S,H){const j=h=Q(S),ae=c.value,_e=S.state,y=S.force,T=S.replace===!0,P=q(j,ae);if(P)return b(xe(V(P),{state:typeof P=="object"?xe({},_e,P.state):_e,force:y,replace:T}),H||j);const B=j;B.redirectedFrom=H;let $;return!y&&Y0(s,ae,j)&&($=Nr(Qe.NAVIGATION_DUPLICATED,{to:B,from:ae}),_t(ae,ae,!0,!1)),($?Promise.resolve($):R(B,ae)).catch(L=>Nn(L)?Nn(L,Qe.NAVIGATION_GUARD_REDIRECT)?L:Ot(L):Ee(L,B,ae)).then(L=>{if(L){if(Nn(L,Qe.NAVIGATION_GUARD_REDIRECT))return b(xe({replace:T},V(L.to),{state:typeof L.to=="object"?xe({},_e,L.to.state):_e,force:y}),H||B)}else L=C(B,ae,!0,T,_e);return A(B,ae,L),L})}function _(S,H){const j=M(S,H);return j?Promise.reject(j):Promise.resolve()}function v(S){const H=Z.values().next().value;return H&&typeof H.runWithContext=="function"?H.runWithContext(S):S()}function R(S,H){let j;const[ae,_e,y]=fE(S,H);j=Ml(ae.reverse(),"beforeRouteLeave",S,H);for(const P of ae)P.leaveGuards.forEach(B=>{j.push(is(B,S,H))});const T=_.bind(null,S,H);return j.push(T),W(j).then(()=>{j=[];for(const P of i.list())j.push(is(P,S,H));return j.push(T),W(j)}).then(()=>{j=Ml(_e,"beforeRouteUpdate",S,H);for(const P of _e)P.updateGuards.forEach(B=>{j.push(is(B,S,H))});return j.push(T),W(j)}).then(()=>{j=[];for(const P of y)if(P.beforeEnter)if(cn(P.beforeEnter))for(const B of P.beforeEnter)j.push(is(B,S,H));else j.push(is(P.beforeEnter,S,H));return j.push(T),W(j)}).then(()=>(S.matched.forEach(P=>P.enterCallbacks={}),j=Ml(y,"beforeRouteEnter",S,H,v),j.push(T),W(j))).then(()=>{j=[];for(const P of o.list())j.push(is(P,S,H));return j.push(T),W(j)}).catch(P=>Nn(P,Qe.NAVIGATION_CANCELLED)?P:Promise.reject(P))}function A(S,H,j){l.list().forEach(ae=>v(()=>ae(S,H,j)))}function C(S,H,j,ae,_e){const y=M(S,H);if(y)return y;const T=H===es,P=fr?history.state:{};j&&(ae||T?r.replace(S.fullPath,xe({scroll:T&&P&&P.scroll},_e)):r.push(S.fullPath,_e)),c.value=S,_t(S,H,j,T),Ot()}let E;function Ue(){E||(E=r.listen((S,H,j)=>{if(!N.listening)return;const ae=Q(S),_e=q(ae,N.currentRoute.value);if(_e){b(xe(_e,{replace:!0,force:!0}),ae).catch(bi);return}h=ae;const y=c.value;fr&&rE(Pf(y.fullPath,j.delta),Ma()),R(ae,y).catch(T=>Nn(T,Qe.NAVIGATION_ABORTED|Qe.NAVIGATION_CANCELLED)?T:Nn(T,Qe.NAVIGATION_GUARD_REDIRECT)?(b(xe(V(T.to),{force:!0}),ae).then(P=>{Nn(P,Qe.NAVIGATION_ABORTED|Qe.NAVIGATION_DUPLICATED)&&!j.delta&&j.type===hc.pop&&r.go(-1,!1)}).catch(bi),Promise.reject()):(j.delta&&r.go(-j.delta,!1),Ee(T,ae,y))).then(T=>{T=T||C(ae,y,!1),T&&(j.delta&&!Nn(T,Qe.NAVIGATION_CANCELLED)?r.go(-j.delta,!1):j.type===hc.pop&&Nn(T,Qe.NAVIGATION_ABORTED|Qe.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),A(ae,y,T)}).catch(bi)}))}let tt=fi(),We=fi(),Pe;function Ee(S,H,j){Ot(S);const ae=We.list();return ae.length?ae.forEach(_e=>_e(S,H,j)):console.error(S),Promise.reject(S)}function gt(){return Pe&&c.value!==es?Promise.resolve():new Promise((S,H)=>{tt.add([S,H])})}function Ot(S){return Pe||(Pe=!S,Ue(),tt.list().forEach(([H,j])=>S?j(S):H()),tt.reset()),S}function _t(S,H,j,ae){const{scrollBehavior:_e}=t;if(!fr||!_e)return Promise.resolve();const y=!j&&iE(Pf(S.fullPath,0))||(ae||!j)&&history.state&&history.state.scroll||null;return Zc().then(()=>_e(S,H,y)).then(T=>T&&sE(T)).catch(T=>Ee(T,S,H))}const nt=S=>r.go(S);let Xt;const Z=new Set,N={currentRoute:c,listening:!0,addRoute:w,removeRoute:D,clearRoutes:e.clearRoutes,hasRoute:F,getRoutes:O,resolve:Q,options:t,push:Y,replace:U,go:nt,back:()=>nt(-1),forward:()=>nt(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:We.add,isReady:gt,install(S){S.component("RouterLink",VE),S.component("RouterView",FE),S.config.globalProperties.$router=N,Object.defineProperty(S.config.globalProperties,"$route",{enumerable:!0,get:()=>Ft(c)}),fr&&!Xt&&c.value===es&&(Xt=!0,Y(r.location).catch(ae=>{}));const H={};for(const ae in es)Object.defineProperty(H,ae,{get:()=>c.value[ae],enumerable:!0});S.provide(La,N),S.provide(Bm,Kp(H)),S.provide(dc,c);const j=S.unmount;Z.add(S),S.unmount=function(){Z.delete(S),Z.size<1&&(h=es,E&&E(),E=null,c.value=es,Xt=!1,Pe=!1),j()}}};function W(S){return S.reduce((H,j)=>H.then(()=>v(j)),Promise.resolve())}return N}function ou(){return wn(La)}const $E="/HTF/assets/Logo_yellow-C2dq30_U.png",BE=()=>{};var jf={};const zm=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},jE=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],l=t[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Gm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,l=o?t[r+1]:0,c=r+2<t.length,h=c?t[r+2]:0,f=i>>2,p=(i&3)<<4|l>>4;let m=(l&15)<<2|h>>6,w=h&63;c||(w=64,o||(m=64)),s.push(n[f],n[p],n[m],n[w])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(zm(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):jE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const h=r<t.length?n[t.charAt(r)]:64;++r;const p=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||l==null||h==null||p==null)throw new qE;const m=i<<2|l>>4;if(s.push(m),h!==64){const w=l<<4&240|h>>2;if(s.push(w),p!==64){const D=h<<6&192|p;s.push(D)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class qE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HE=function(t){const e=zm(t);return Gm.encodeByteArray(e,!0)},Zo=function(t){return HE(t).replace(/\./g,"")},Wm=function(t){try{return Gm.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function zE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const GE=()=>zE().__FIREBASE_DEFAULTS__,WE=()=>{if(typeof process>"u"||typeof jf>"u")return;const t=jf.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},KE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Wm(t[1]);return e&&JSON.parse(e)},Fa=()=>{try{return BE()||GE()||WE()||KE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Km=t=>Fa()?.emulatorHosts?.[t],QE=t=>{const e=Km(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Qm=()=>Fa()?.config,Ym=t=>Fa()?.[`_${t}`];class YE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Br(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Jm(t){return(await fetch(t,{credentials:"include"})).ok}function JE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Zo(JSON.stringify(n)),Zo(JSON.stringify(o)),""].join(".")}const Ai={};function XE(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ai))Ai[e]?t.emulator.push(e):t.prod.push(e);return t}function ZE(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let qf=!1;function Xm(t,e){if(typeof window>"u"||typeof document>"u"||!Br(window.location.host)||Ai[t]===e||Ai[t]||qf)return;Ai[t]=e;function n(m){return`__firebase__banner__${m}`}const s="__firebase__banner",i=XE().prod.length>0;function o(){const m=document.getElementById(s);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,w){m.setAttribute("width","24"),m.setAttribute("id",w),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{qf=!0,o()},m}function f(m,w){m.setAttribute("id",w),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=ZE(s),w=n("text"),D=document.getElementById(w)||document.createElement("span"),O=n("learnmore"),F=document.getElementById(O)||document.createElement("a"),Q=n("preprendIcon"),V=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const M=m.element;l(M),f(F,O);const Y=h();c(V,Q),M.append(V,D,F,Y),document.body.appendChild(M)}i?(D.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Ct(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ct())}function tT(){const t=Fa()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Zm(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function sT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rT(){const t=Ct();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function iT(){return!tT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eg(){try{return typeof indexedDB=="object"}catch{return!1}}function tg(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}function oT(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const aT="FirebaseError";class fn extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=aT,Object.setPrototypeOf(this,fn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xs.prototype.create)}}class Xs{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?lT(i,s):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new fn(r,l,s)}}function lT(t,e){return t.replace(cT,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const cT=/\{\$([^}]+)}/g;function uT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function vs(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(Hf(i)&&Hf(o)){if(!vs(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Hf(t){return t!==null&&typeof t=="object"}function Yi(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function hT(t,e){const n=new fT(t,e);return n.subscribe.bind(n)}class fT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");dT(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=Ll),r.error===void 0&&(r.error=Ll),r.complete===void 0&&(r.complete=Ll);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ll(){}const pT=1e3,mT=2,gT=4*60*60*1e3,_T=.5;function zf(t,e=pT,n=mT){const s=e*Math.pow(n,t),r=Math.round(_T*s*(Math.random()-.5)*2);return Math.min(gT,s+r)}function pt(t){return t&&t._delegate?t._delegate:t}class un{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Os="[DEFAULT]";class yT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new YE;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wT(e))try{this.getOrInitializeService({instanceIdentifier:Os})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Os){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Os){return this.instances.has(e)}getOptions(e=Os){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:vT(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Os){return this.component?this.component.multipleInstances?e:Os:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vT(t){return t===Os?void 0:t}function wT(t){return t.instantiationMode==="EAGER"}class ET{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new yT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(be||(be={}));const TT={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},IT=be.INFO,bT={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},AT=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=bT[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ua{constructor(e){this.name=e,this._logLevel=IT,this._logHandler=AT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const RT=(t,e)=>e.some(n=>t instanceof n);let Gf,Wf;function ST(){return Gf||(Gf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CT(){return Wf||(Wf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ng=new WeakMap,pc=new WeakMap,sg=new WeakMap,Fl=new WeakMap,au=new WeakMap;function PT(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(hs(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&ng.set(n,t)}).catch(()=>{}),au.set(e,t),e}function xT(t){if(pc.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});pc.set(t,e)}let mc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return pc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||sg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kT(t){mc=t(mc)}function DT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Ul(this),e,...n);return sg.set(s,e.sort?e.sort():[e]),hs(s)}:CT().includes(t)?function(...e){return t.apply(Ul(this),e),hs(ng.get(this))}:function(...e){return hs(t.apply(Ul(this),e))}}function NT(t){return typeof t=="function"?DT(t):(t instanceof IDBTransaction&&xT(t),RT(t,ST())?new Proxy(t,mc):t)}function hs(t){if(t instanceof IDBRequest)return PT(t);if(Fl.has(t))return Fl.get(t);const e=NT(t);return e!==t&&(Fl.set(t,e),au.set(e,t)),e}const Ul=t=>au.get(t);function rg(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),l=hs(o);return s&&o.addEventListener("upgradeneeded",c=>{s(hs(o.result),c.oldVersion,c.newVersion,hs(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const VT=["get","getKey","getAll","getAllKeys","count"],OT=["put","add","delete","clear"],$l=new Map;function Kf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($l.get(e))return $l.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=OT.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||VT.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,r?"readwrite":"readonly");let h=c.store;return s&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&c.done]))[0]};return $l.set(e,i),i}kT(t=>({...t,get:(e,n,s)=>Kf(e,n)||t.get(e,n,s),has:(e,n)=>!!Kf(e,n)||t.has(e,n)}));class MT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(LT(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function LT(t){return t.getComponent()?.type==="VERSION"}const gc="@firebase/app",Qf="0.14.6";const qn=new Ua("@firebase/app"),FT="@firebase/app-compat",UT="@firebase/analytics-compat",$T="@firebase/analytics",BT="@firebase/app-check-compat",jT="@firebase/app-check",qT="@firebase/auth",HT="@firebase/auth-compat",zT="@firebase/database",GT="@firebase/data-connect",WT="@firebase/database-compat",KT="@firebase/functions",QT="@firebase/functions-compat",YT="@firebase/installations",JT="@firebase/installations-compat",XT="@firebase/messaging",ZT="@firebase/messaging-compat",eI="@firebase/performance",tI="@firebase/performance-compat",nI="@firebase/remote-config",sI="@firebase/remote-config-compat",rI="@firebase/storage",iI="@firebase/storage-compat",oI="@firebase/firestore",aI="@firebase/ai",lI="@firebase/firestore-compat",cI="firebase",uI="12.6.0";const _c="[DEFAULT]",hI={[gc]:"fire-core",[FT]:"fire-core-compat",[$T]:"fire-analytics",[UT]:"fire-analytics-compat",[jT]:"fire-app-check",[BT]:"fire-app-check-compat",[qT]:"fire-auth",[HT]:"fire-auth-compat",[zT]:"fire-rtdb",[GT]:"fire-data-connect",[WT]:"fire-rtdb-compat",[KT]:"fire-fn",[QT]:"fire-fn-compat",[YT]:"fire-iid",[JT]:"fire-iid-compat",[XT]:"fire-fcm",[ZT]:"fire-fcm-compat",[eI]:"fire-perf",[tI]:"fire-perf-compat",[nI]:"fire-rc",[sI]:"fire-rc-compat",[rI]:"fire-gcs",[iI]:"fire-gcs-compat",[oI]:"fire-fst",[lI]:"fire-fst-compat",[aI]:"fire-vertex","fire-js":"fire-js",[cI]:"fire-js-all"};const ea=new Map,fI=new Map,yc=new Map;function Yf(t,e){try{t.container.addComponent(e)}catch(n){qn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Pn(t){const e=t.name;if(yc.has(e))return qn.debug(`There were multiple attempts to register component ${e}.`),!1;yc.set(e,t);for(const n of ea.values())Yf(n,t);for(const n of fI.values())Yf(n,t);return!0}function Zs(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function en(t){return t==null?!1:t.settings!==void 0}const dI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fs=new Xs("app","Firebase",dI);class pI{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new un("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fs.create("app-deleted",{appName:this._name})}}const jr=uI;function ig(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:_c,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw fs.create("bad-app-name",{appName:String(r)});if(n||(n=Qm()),!n)throw fs.create("no-options");const i=ea.get(r);if(i){if(vs(n,i.options)&&vs(s,i.config))return i;throw fs.create("duplicate-app",{appName:r})}const o=new ET(r);for(const c of yc.values())o.addComponent(c);const l=new pI(n,s,o);return ea.set(r,l),l}function lu(t=_c){const e=ea.get(t);if(!e&&t===_c&&Qm())return ig();if(!e)throw fs.create("no-app",{appName:t});return e}function Yt(t,e,n){let s=hI[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qn.warn(o.join(" "));return}Pn(new un(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const mI="firebase-heartbeat-database",gI=1,Li="firebase-heartbeat-store";let Bl=null;function og(){return Bl||(Bl=rg(mI,gI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Li)}catch(n){console.warn(n)}}}}).catch(t=>{throw fs.create("idb-open",{originalErrorMessage:t.message})})),Bl}async function _I(t){try{const n=(await og()).transaction(Li),s=await n.objectStore(Li).get(ag(t));return await n.done,s}catch(e){if(e instanceof fn)qn.warn(e.message);else{const n=fs.create("idb-get",{originalErrorMessage:e?.message});qn.warn(n.message)}}}async function Jf(t,e){try{const s=(await og()).transaction(Li,"readwrite");await s.objectStore(Li).put(e,ag(t)),await s.done}catch(n){if(n instanceof fn)qn.warn(n.message);else{const s=fs.create("idb-set",{originalErrorMessage:n?.message});qn.warn(s.message)}}}function ag(t){return`${t.name}!${t.options.appId}`}const yI=1024,vI=30;class wI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TI(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Xf();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>vI){const r=II(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){qn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Xf(),{heartbeatsToSend:n,unsentEntries:s}=EI(this._heartbeatsCache.heartbeats),r=Zo(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return qn.warn(e),""}}}function Xf(){return new Date().toISOString().substring(0,10)}function EI(t,e=yI){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),Zf(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Zf(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class TI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return eg()?tg().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await _I(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Jf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Jf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Zf(t){return Zo(JSON.stringify({version:2,heartbeats:t})).length}function II(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}function bI(t){Pn(new un("platform-logger",e=>new MT(e),"PRIVATE")),Pn(new un("heartbeat",e=>new wI(e),"PRIVATE")),Yt(gc,Qf,t),Yt(gc,Qf,"esm2020"),Yt("fire-js","")}bI("");var AI="firebase",RI="12.6.0";Yt(AI,RI,"app");const lg="@firebase/installations",cu="0.6.19";const cg=1e4,ug=`w:${cu}`,hg="FIS_v2",SI="https://firebaseinstallations.googleapis.com/v1",CI=60*60*1e3,PI="installations",xI="Installations";const kI={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Gs=new Xs(PI,xI,kI);function fg(t){return t instanceof fn&&t.code.includes("request-failed")}function dg({projectId:t}){return`${SI}/projects/${t}/installations`}function pg(t){return{token:t.token,requestStatus:2,expiresIn:NI(t.expiresIn),creationTime:Date.now()}}async function mg(t,e){const s=(await e.json()).error;return Gs.create("request-failed",{requestName:t,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function gg({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function DI(t,{refreshToken:e}){const n=gg(t);return n.append("Authorization",VI(e)),n}async function _g(t){const e=await t();return e.status>=500&&e.status<600?t():e}function NI(t){return Number(t.replace("s","000"))}function VI(t){return`${hg} ${t}`}async function OI({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const s=dg(t),r=gg(t),i=e.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&r.append("x-firebase-client",h)}const o={fid:n,authVersion:hg,appId:t.appId,sdkVersion:ug},l={method:"POST",headers:r,body:JSON.stringify(o)},c=await _g(()=>fetch(s,l));if(c.ok){const h=await c.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:pg(h.authToken)}}else throw await mg("Create Installation",c)}function yg(t){return new Promise(e=>{setTimeout(e,t)})}function MI(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}const LI=/^[cdef][\w-]{21}$/,vc="";function FI(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=UI(t);return LI.test(n)?n:vc}catch{return vc}}function UI(t){return MI(t).substr(0,22)}function $a(t){return`${t.appName}!${t.appId}`}const vg=new Map;function wg(t,e){const n=$a(t);Eg(n,e),$I(n,e)}function Eg(t,e){const n=vg.get(t);if(n)for(const s of n)s(e)}function $I(t,e){const n=BI();n&&n.postMessage({key:t,fid:e}),jI()}let Fs=null;function BI(){return!Fs&&"BroadcastChannel"in self&&(Fs=new BroadcastChannel("[Firebase] FID Change"),Fs.onmessage=t=>{Eg(t.data.key,t.data.fid)}),Fs}function jI(){vg.size===0&&Fs&&(Fs.close(),Fs=null)}const qI="firebase-installations-database",HI=1,Ws="firebase-installations-store";let jl=null;function uu(){return jl||(jl=rg(qI,HI,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ws)}}})),jl}async function ta(t,e){const n=$a(t),r=(await uu()).transaction(Ws,"readwrite"),i=r.objectStore(Ws),o=await i.get(n);return await i.put(e,n),await r.done,(!o||o.fid!==e.fid)&&wg(t,e.fid),e}async function Tg(t){const e=$a(t),s=(await uu()).transaction(Ws,"readwrite");await s.objectStore(Ws).delete(e),await s.done}async function Ba(t,e){const n=$a(t),r=(await uu()).transaction(Ws,"readwrite"),i=r.objectStore(Ws),o=await i.get(n),l=e(o);return l===void 0?await i.delete(n):await i.put(l,n),await r.done,l&&(!o||o.fid!==l.fid)&&wg(t,l.fid),l}async function hu(t){let e;const n=await Ba(t.appConfig,s=>{const r=zI(s),i=GI(t,r);return e=i.registrationPromise,i.installationEntry});return n.fid===vc?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function zI(t){const e=t||{fid:FI(),registrationStatus:0};return Ig(e)}function GI(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Gs.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=WI(t,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:KI(t)}:{installationEntry:e}}async function WI(t,e){try{const n=await OI(t,e);return ta(t.appConfig,n)}catch(n){throw fg(n)&&n.customData.serverCode===409?await Tg(t.appConfig):await ta(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function KI(t){let e=await ed(t.appConfig);for(;e.registrationStatus===1;)await yg(100),e=await ed(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await hu(t);return s||n}return e}function ed(t){return Ba(t,e=>{if(!e)throw Gs.create("installation-not-found");return Ig(e)})}function Ig(t){return QI(t)?{fid:t.fid,registrationStatus:0}:t}function QI(t){return t.registrationStatus===1&&t.registrationTime+cg<Date.now()}async function YI({appConfig:t,heartbeatServiceProvider:e},n){const s=JI(t,n),r=DI(t,n),i=e.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&r.append("x-firebase-client",h)}const o={installation:{sdkVersion:ug,appId:t.appId}},l={method:"POST",headers:r,body:JSON.stringify(o)},c=await _g(()=>fetch(s,l));if(c.ok){const h=await c.json();return pg(h)}else throw await mg("Generate Auth Token",c)}function JI(t,{fid:e}){return`${dg(t)}/${e}/authTokens:generate`}async function fu(t,e=!1){let n;const s=await Ba(t.appConfig,i=>{if(!bg(i))throw Gs.create("not-registered");const o=i.authToken;if(!e&&eb(o))return i;if(o.requestStatus===1)return n=XI(t,e),i;{if(!navigator.onLine)throw Gs.create("app-offline");const l=nb(i);return n=ZI(t,l),l}});return n?await n:s.authToken}async function XI(t,e){let n=await td(t.appConfig);for(;n.authToken.requestStatus===1;)await yg(100),n=await td(t.appConfig);const s=n.authToken;return s.requestStatus===0?fu(t,e):s}function td(t){return Ba(t,e=>{if(!bg(e))throw Gs.create("not-registered");const n=e.authToken;return sb(n)?{...e,authToken:{requestStatus:0}}:e})}async function ZI(t,e){try{const n=await YI(t,e),s={...e,authToken:n};return await ta(t.appConfig,s),n}catch(n){if(fg(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Tg(t.appConfig);else{const s={...e,authToken:{requestStatus:0}};await ta(t.appConfig,s)}throw n}}function bg(t){return t!==void 0&&t.registrationStatus===2}function eb(t){return t.requestStatus===2&&!tb(t)}function tb(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+CI}function nb(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function sb(t){return t.requestStatus===1&&t.requestTime+cg<Date.now()}async function rb(t){const e=t,{installationEntry:n,registrationPromise:s}=await hu(e);return s?s.catch(console.error):fu(e).catch(console.error),n.fid}async function ib(t,e=!1){const n=t;return await ob(n),(await fu(n,e)).token}async function ob(t){const{registrationPromise:e}=await hu(t);e&&await e}function ab(t){if(!t||!t.options)throw ql("App Configuration");if(!t.name)throw ql("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw ql(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function ql(t){return Gs.create("missing-app-config-values",{valueName:t})}const Ag="installations",lb="installations-internal",cb=t=>{const e=t.getProvider("app").getImmediate(),n=ab(e),s=Zs(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},ub=t=>{const e=t.getProvider("app").getImmediate(),n=Zs(e,Ag).getImmediate();return{getId:()=>rb(n),getToken:r=>ib(n,r)}};function hb(){Pn(new un(Ag,cb,"PUBLIC")),Pn(new un(lb,ub,"PRIVATE"))}hb();Yt(lg,cu);Yt(lg,cu,"esm2020");const na="analytics",fb="firebase_id",db="origin",pb=60*1e3,mb="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",du="https://www.googletagmanager.com/gtag/js";const Vt=new Ua("@firebase/analytics");const gb={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},zt=new Xs("analytics","Analytics",gb);function _b(t){if(!t.startsWith(du)){const e=zt.create("invalid-gtag-resource",{gtagURL:t});return Vt.warn(e.message),""}return t}function Rg(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function yb(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function vb(t,e){const n=yb("firebase-js-sdk-policy",{createScriptURL:_b}),s=document.createElement("script"),r=`${du}?l=${t}&id=${e}`;s.src=n?n?.createScriptURL(r):r,s.async=!0,document.head.appendChild(s)}function wb(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Eb(t,e,n,s,r,i){const o=s[r];try{if(o)await e[o];else{const c=(await Rg(n)).find(h=>h.measurementId===r);c&&await e[c.appId]}}catch(l){Vt.error(l)}t("config",r,i)}async function Tb(t,e,n,s,r){try{let i=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const l=await Rg(n);for(const c of o){const h=l.find(p=>p.measurementId===c),f=h&&e[h.appId];if(f)i.push(f);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",s,r||{})}catch(i){Vt.error(i)}}function Ib(t,e,n,s){async function r(i,...o){try{if(i==="event"){const[l,c]=o;await Tb(t,e,n,l,c)}else if(i==="config"){const[l,c]=o;await Eb(t,e,n,s,l,c)}else if(i==="consent"){const[l,c]=o;t("consent",l,c)}else if(i==="get"){const[l,c,h]=o;t("get",l,c,h)}else if(i==="set"){const[l]=o;t("set",l)}else t(i,...o)}catch(l){Vt.error(l)}}return r}function bb(t,e,n,s,r){let i=function(...o){window[s].push(arguments)};return window[r]&&typeof window[r]=="function"&&(i=window[r]),window[r]=Ib(i,t,e,n),{gtagCore:i,wrappedGtag:window[r]}}function Ab(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(du)&&n.src.includes(t))return n;return null}const Rb=30,Sb=1e3;class Cb{constructor(e={},n=Sb){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Sg=new Cb;function Pb(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function xb(t){const{appId:e,apiKey:n}=t,s={method:"GET",headers:Pb(n)},r=mb.replace("{app-id}",e),i=await fetch(r,s);if(i.status!==200&&i.status!==304){let o="";try{const l=await i.json();l.error?.message&&(o=l.error.message)}catch{}throw zt.create("config-fetch-failed",{httpStatus:i.status,responseMessage:o})}return i.json()}async function kb(t,e=Sg,n){const{appId:s,apiKey:r,measurementId:i}=t.options;if(!s)throw zt.create("no-app-id");if(!r){if(i)return{measurementId:i,appId:s};throw zt.create("no-api-key")}const o=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new Vb;return setTimeout(async()=>{l.abort()},pb),Cg({appId:s,apiKey:r,measurementId:i},o,l,e)}async function Cg(t,{throttleEndTimeMillis:e,backoffCount:n},s,r=Sg){const{appId:i,measurementId:o}=t;try{await Db(s,e)}catch(l){if(o)return Vt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:i,measurementId:o};throw l}try{const l=await xb(t);return r.deleteThrottleMetadata(i),l}catch(l){const c=l;if(!Nb(c)){if(r.deleteThrottleMetadata(i),o)return Vt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:i,measurementId:o};throw l}const h=Number(c?.customData?.httpStatus)===503?zf(n,r.intervalMillis,Rb):zf(n,r.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return r.setThrottleMetadata(i,f),Vt.debug(`Calling attemptFetch again in ${h} millis`),Cg(t,f,s,r)}}function Db(t,e){return new Promise((n,s)=>{const r=Math.max(e-Date.now(),0),i=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(i),s(zt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Nb(t){if(!(t instanceof fn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class Vb{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Ob(t,e,n,s,r){if(r&&r.global){t("event",n,s);return}else{const i=await e,o={...s,send_to:i};t("event",n,o)}}async function Mb(t,e,n,s){if(s&&s.global){const r={};for(const i of Object.keys(n))r[`user_properties.${i}`]=n[i];return t("set",r),Promise.resolve()}else{const r=await e;t("config",r,{update:!0,user_properties:n})}}async function Lb(){if(eg())try{await tg()}catch(t){return Vt.warn(zt.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return Vt.warn(zt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Fb(t,e,n,s,r,i,o){const l=kb(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Vt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Vt.error(m)),e.push(l);const c=Lb().then(m=>{if(m)return s.getId()}),[h,f]=await Promise.all([l,c]);Ab(i)||vb(i,h.measurementId),r("js",new Date);const p=o?.config??{};return p[db]="firebase",p.update=!0,f!=null&&(p[fb]=f),r("config",h.measurementId,p),h.measurementId}class Ub{constructor(e){this.app=e}_delete(){return delete Ir[this.app.options.appId],Promise.resolve()}}let Ir={},nd=[];const sd={};let Hl="dataLayer",$b="gtag",rd,pu,id=!1;function Bb(){const t=[];if(Zm()&&t.push("This is a browser extension environment."),oT()||t.push("Cookies are not available."),t.length>0){const e=t.map((s,r)=>`(${r+1}) ${s}`).join(" "),n=zt.create("invalid-analytics-context",{errorInfo:e});Vt.warn(n.message)}}function jb(t,e,n){Bb();const s=t.options.appId;if(!s)throw zt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Vt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw zt.create("no-api-key");if(Ir[s]!=null)throw zt.create("already-exists",{id:s});if(!id){wb(Hl);const{wrappedGtag:i,gtagCore:o}=bb(Ir,nd,sd,Hl,$b);pu=i,rd=o,id=!0}return Ir[s]=Fb(t,nd,sd,e,rd,Hl,n),new Ub(t)}function qb(t=lu()){t=pt(t);const e=Zs(t,na);return e.isInitialized()?e.getImmediate():Hb(t)}function Hb(t,e={}){const n=Zs(t,na);if(n.isInitialized()){const r=n.getImmediate();if(vs(e,n.getOptions()))return r;throw zt.create("already-initialized")}return n.initialize({options:e})}function zb(t,e,n){t=pt(t),Mb(pu,Ir[t.app.options.appId],e,n).catch(s=>Vt.error(s))}function Gb(t,e,n,s){t=pt(t),Ob(pu,Ir[t.app.options.appId],e,n,s).catch(r=>Vt.error(r))}const od="@firebase/analytics",ad="0.10.19";function Wb(){Pn(new un(na,(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return jb(s,r,n)},"PUBLIC")),Pn(new un("analytics-internal",t,"PRIVATE")),Yt(od,ad),Yt(od,ad,"esm2020");function t(e){try{const n=e.getProvider(na).getImmediate();return{logEvent:(s,r,i)=>Gb(n,s,r,i),setUserProperties:(s,r)=>zb(n,s,r)}}catch(n){throw zt.create("interop-component-reg-failed",{reason:n})}}}Wb();function Pg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Kb=Pg,xg=new Xs("auth","Firebase",Pg());const sa=new Ua("@firebase/auth");function Qb(t,...e){sa.logLevel<=be.WARN&&sa.warn(`Auth (${jr}): ${t}`,...e)}function No(t,...e){sa.logLevel<=be.ERROR&&sa.error(`Auth (${jr}): ${t}`,...e)}function xn(t,...e){throw gu(t,...e)}function an(t,...e){return gu(t,...e)}function mu(t,e,n){const s={...Kb(),[e]:n};return new Xs("auth","Firebase",s).create(e,{appName:t.name})}function Hs(t){return mu(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Yb(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&xn(t,"argument-error"),mu(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function gu(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return xg.create(t,...e)}function de(t,e,...n){if(!t)throw gu(e,...n)}function Fn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw No(e),new Error(e)}function Hn(t,e){t||Fn(e)}function wc(){return typeof self<"u"&&self.location?.href||""}function Jb(){return ld()==="http:"||ld()==="https:"}function ld(){return typeof self<"u"&&self.location?.protocol||null}function Xb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Jb()||Zm()||"connection"in navigator)?navigator.onLine:!0}function Zb(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Ji{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hn(n>e,"Short delay should be less than long delay!"),this.isMobile=eT()||sT()}get(){return Xb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _u(t,e){Hn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class kg{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const eA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const tA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nA=new Ji(3e4,6e4);function yu(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function qr(t,e,n,s,r={}){return Dg(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const l=Yi({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:c,...i};return nT()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Br(t.emulatorConfig.host)&&(h.credentials="include"),kg.fetch()(await Ng(t,t.config.apiHost,n,l),h)})}async function Dg(t,e,n){t._canInitEmulator=!1;const s={...eA,...e};try{const r=new rA(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Eo(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Eo(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Eo(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Eo(t,"user-disabled",o);const f=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw mu(t,f,h);xn(t,f)}}catch(r){if(r instanceof fn)throw r;xn(t,"network-request-failed",{message:String(r)})}}async function sA(t,e,n,s,r={}){const i=await qr(t,e,n,s,r);return"mfaPendingCredential"in i&&xn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Ng(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?_u(t.config,r):`${t.config.apiScheme}://${r}`;return tA.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class rA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(an(this.auth,"network-request-failed")),nA.get())})}}function Eo(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=an(t,e,s);return r.customData._tokenResponse=n,r}async function iA(t,e){return qr(t,"POST","/v1/accounts:delete",e)}async function ra(t,e){return qr(t,"POST","/v1/accounts:lookup",e)}function Ri(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oA(t,e=!1){const n=pt(t),s=await n.getIdToken(e),r=vu(s);de(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:Ri(zl(r.auth_time)),issuedAtTime:Ri(zl(r.iat)),expirationTime:Ri(zl(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function zl(t){return Number(t)*1e3}function vu(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return No("JWT malformed, contained fewer than 3 sections"),null;try{const r=Wm(n);return r?JSON.parse(r):(No("Failed to decode base64 JWT payload"),null)}catch(r){return No("Caught error parsing JWT payload as JSON",r?.toString()),null}}function cd(t){const e=vu(t);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Fi(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof fn&&aA(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function aA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class lA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Ec{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ri(this.lastLoginAt),this.creationTime=Ri(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ia(t){const e=t.auth,n=await t.getIdToken(),s=await Fi(t,ra(e,{idToken:n}));de(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?Vg(r.providerUserInfo):[],o=uA(t.providerData,i),l=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!o?.length,h=l?c:!1,f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Ec(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function cA(t){const e=pt(t);await ia(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uA(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function Vg(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function hA(t,e){const n=await Dg(t,{},async()=>{const s=Yi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await Ng(t,r,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:s};return t.emulatorConfig&&Br(t.emulatorConfig.host)&&(c.credentials="include"),kg.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function fA(t,e){return qr(t,"POST","/v2/accounts:revokeToken",yu(t,e))}class br{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cd(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){de(e.length!==0,"internal-error");const n=cd(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await hA(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new br;return s&&(de(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(de(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(de(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new br,this.toJSON())}_performRefresh(){return Fn("not implemented")}}function ts(t,e){de(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class sn{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new lA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Ec(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Fi(this,this.stsTokenManager.getToken(this.auth,e));return de(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return oA(this,e)}reload(){return cA(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new sn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await ia(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(en(this.auth.app))return Promise.reject(Hs(this.auth));const e=await this.getIdToken();return await Fi(this,iA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,h=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:w,providerData:D,stsTokenManager:O}=n;de(p&&O,e,"internal-error");const F=br.fromJSON(this.name,O);de(typeof p=="string",e,"internal-error"),ts(s,e.name),ts(r,e.name),de(typeof m=="boolean",e,"internal-error"),de(typeof w=="boolean",e,"internal-error"),ts(i,e.name),ts(o,e.name),ts(l,e.name),ts(c,e.name),ts(h,e.name),ts(f,e.name);const Q=new sn({uid:p,auth:e,email:r,emailVerified:m,displayName:s,isAnonymous:w,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:F,createdAt:h,lastLoginAt:f});return D&&Array.isArray(D)&&(Q.providerData=D.map(V=>({...V}))),c&&(Q._redirectEventId=c),Q}static async _fromIdTokenResponse(e,n,s=!1){const r=new br;r.updateFromServerResponse(n);const i=new sn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await ia(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];de(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?Vg(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,l=new br;l.updateFromIdToken(s);const c=new sn({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Ec(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(c,h),c}}const ud=new Map;function Un(t){Hn(t instanceof Function,"Expected a class definition");let e=ud.get(t);return e?(Hn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ud.set(t,e),e)}class Og{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Og.type="NONE";const hd=Og;function Vo(t,e,n){return`firebase:${t}:${e}:${n}`}class Ar{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=Vo(this.userKey,r.apiKey,i),this.fullPersistenceKey=Vo("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ra(this.auth,{idToken:e}).catch(()=>{});return n?sn._fromGetAccountInfoResponse(this.auth,n,e):null}return sn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Ar(Un(hd),e,s);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=r[0]||Un(hd);const o=Vo(s,e.config.apiKey,e.name);let l=null;for(const h of n)try{const f=await h._get(o);if(f){let p;if(typeof f=="string"){const m=await ra(e,{idToken:f}).catch(()=>{});if(!m)break;p=await sn._fromGetAccountInfoResponse(e,m,f)}else p=sn._fromJSON(e,f);h!==i&&(l=p),i=h;break}}catch{}const c=r.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Ar(i,e,s):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Ar(i,e,s))}}function fd(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ug(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Mg(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Bg(e))return"Blackberry";if(jg(e))return"Webos";if(Lg(e))return"Safari";if((e.includes("chrome/")||Fg(e))&&!e.includes("edge/"))return"Chrome";if($g(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function Mg(t=Ct()){return/firefox\//i.test(t)}function Lg(t=Ct()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Fg(t=Ct()){return/crios\//i.test(t)}function Ug(t=Ct()){return/iemobile/i.test(t)}function $g(t=Ct()){return/android/i.test(t)}function Bg(t=Ct()){return/blackberry/i.test(t)}function jg(t=Ct()){return/webos/i.test(t)}function wu(t=Ct()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function dA(t=Ct()){return wu(t)&&!!window.navigator?.standalone}function pA(){return rT()&&document.documentMode===10}function qg(t=Ct()){return wu(t)||$g(t)||jg(t)||Bg(t)||/windows phone/i.test(t)||Ug(t)}function Hg(t,e=[]){let n;switch(t){case"Browser":n=fd(Ct());break;case"Worker":n=`${fd(Ct())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${jr}/${s}`}class mA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function gA(t,e={}){return qr(t,"GET","/v2/passwordPolicy",yu(t,e))}const _A=6;class yA{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??_A,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class vA{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dd(this),this.idTokenSubscription=new dd(this),this.beforeStateQueue=new mA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Un(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ar.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ra(this,{idToken:e}),s=await sn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(en(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&l?.user&&(s=l.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ia(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Zb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(en(this.app))return Promise.reject(Hs(this));const n=e?pt(e):null;return n&&de(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return en(this.app)?Promise.reject(Hs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return en(this.app)?Promise.reject(Hs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Un(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gA(this),n=new yA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xs("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await fA(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Un(e)||this._popupRedirectResolver;de(n,this,"argument-error"),this.redirectPersistenceManager=await Ar.create(this,[Un(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,r);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Hg(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(en(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Qb(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ja(t){return pt(t)}class dd{constructor(e){this.auth=e,this.observer=null,this.addObserver=hT(n=>this.observer=n)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Eu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wA(t){Eu=t}function EA(t){return Eu.loadJS(t)}function TA(){return Eu.gapiScript}function IA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function bA(t,e){const n=Zs(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(vs(i,e??{}))return r;xn(r,"already-initialized")}return n.initialize({options:e})}function AA(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Un);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function RA(t,e,n){const s=ja(t);de(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=zg(e),{host:o,port:l}=SA(e),c=l===null?"":`:${l}`,h={url:`${i}//${o}${c}/`},f=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){de(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),de(vs(h,s.config.emulator)&&vs(f,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=h,s.emulatorConfig=f,s.settings.appVerificationDisabledForTesting=!0,Br(o)?(Jm(`${i}//${o}${c}`),Xm("Auth",!0)):CA()}function zg(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function SA(t){const e=zg(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:pd(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:pd(o)}}}function pd(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function CA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class Gg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fn("not implemented")}_getIdTokenResponse(e){return Fn("not implemented")}_linkToIdToken(e,n){return Fn("not implemented")}_getReauthenticationResolver(e){return Fn("not implemented")}}async function Rr(t,e){return sA(t,"POST","/v1/accounts:signInWithIdp",yu(t,e))}const PA="http://localhost";class Ks extends Gg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ks(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new Ks(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Rr(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Rr(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Rr(e,n)}buildRequest(){const e={requestUri:PA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Yi(n)}return e}}class Tu{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Xi extends Tu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class os extends Xi{constructor(){super("facebook.com")}static credential(e){return Ks._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return os.credential(e.oauthAccessToken)}catch{return null}}}os.FACEBOOK_SIGN_IN_METHOD="facebook.com";os.PROVIDER_ID="facebook.com";class Ln extends Xi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ks._fromParams({providerId:Ln.PROVIDER_ID,signInMethod:Ln.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ln.credentialFromTaggedObject(e)}static credentialFromError(e){return Ln.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Ln.credential(n,s)}catch{return null}}}Ln.GOOGLE_SIGN_IN_METHOD="google.com";Ln.PROVIDER_ID="google.com";class as extends Xi{constructor(){super("github.com")}static credential(e){return Ks._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return as.credential(e.oauthAccessToken)}catch{return null}}}as.GITHUB_SIGN_IN_METHOD="github.com";as.PROVIDER_ID="github.com";class ls extends Xi{constructor(){super("twitter.com")}static credential(e,n){return Ks._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ls.credential(n,s)}catch{return null}}}ls.TWITTER_SIGN_IN_METHOD="twitter.com";ls.PROVIDER_ID="twitter.com";class Vr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await sn._fromIdTokenResponse(e,s,r),o=md(s);return new Vr({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=md(s);return new Vr({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function md(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class oa extends fn{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,oa.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new oa(e,n,s,r)}}function Wg(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?oa._fromErrorAndOperation(t,i,e,s):i})}async function xA(t,e,n=!1){const s=await Fi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Vr._forOperation(t,"link",s)}async function kA(t,e,n=!1){const{auth:s}=t;if(en(s.app))return Promise.reject(Hs(s));const r="reauthenticate";try{const i=await Fi(t,Wg(s,r,e,t),n);de(i.idToken,s,"internal-error");const o=vu(i.idToken);de(o,s,"internal-error");const{sub:l}=o;return de(t.uid===l,s,"user-mismatch"),Vr._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&xn(s,"user-mismatch"),i}}async function DA(t,e,n=!1){if(en(t.app))return Promise.reject(Hs(t));const s="signIn",r=await Wg(t,s,e),i=await Vr._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}function NA(t,e,n,s){return pt(t).onIdTokenChanged(e,n,s)}function VA(t,e,n){return pt(t).beforeAuthStateChanged(e,n)}function qa(t,e,n,s){return pt(t).onAuthStateChanged(e,n,s)}function OA(t){return pt(t).signOut()}const aa="__sak";class Kg{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(aa,"1"),this.storage.removeItem(aa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const MA=1e3,LA=10;class Qg extends Kg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qg(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);pA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,LA):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},MA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Qg.type="LOCAL";const FA=Qg;class Yg extends Kg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Yg.type="SESSION";const Jg=Yg;function UA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Ha{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new Ha(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const l=Array.from(o).map(async h=>h(n.origin,i)),c=await UA(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ha.receivers=[];function Iu(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}class $A{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const h=Iu("",20);r.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(p){const m=p;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function En(){return window}function BA(t){En().location.href=t}function Xg(){return typeof En().WorkerGlobalScope<"u"&&typeof En().importScripts=="function"}async function jA(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qA(){return navigator?.serviceWorker?.controller||null}function HA(){return Xg()?self:null}const Zg="firebaseLocalStorageDb",zA=1,la="firebaseLocalStorage",e_="fbase_key";class Zi{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function za(t,e){return t.transaction([la],e?"readwrite":"readonly").objectStore(la)}function GA(){const t=indexedDB.deleteDatabase(Zg);return new Zi(t).toPromise()}function Tc(){const t=indexedDB.open(Zg,zA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(la,{keyPath:e_})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(la)?e(s):(s.close(),await GA(),e(await Tc()))})})}async function gd(t,e,n){const s=za(t,!0).put({[e_]:e,value:n});return new Zi(s).toPromise()}async function WA(t,e){const n=za(t,!1).get(e),s=await new Zi(n).toPromise();return s===void 0?null:s.value}function _d(t,e){const n=za(t,!0).delete(e);return new Zi(n).toPromise()}const KA=800,QA=3;class t_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Tc(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>QA)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Xg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ha._getInstance(HA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await jA(),!this.activeServiceWorker)return;this.sender=new $A(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Tc();return await gd(e,aa,"1"),await _d(e,aa),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>gd(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>WA(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_d(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=za(r,!1).getAll();return new Zi(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}t_.type="LOCAL";const YA=t_;new Ji(3e4,6e4);function n_(t,e){return e?Un(e):(de(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class bu extends Gg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Rr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Rr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Rr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function JA(t){return DA(t.auth,new bu(t),t.bypassAuthState)}function XA(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),kA(n,new bu(t),t.bypassAuthState)}async function ZA(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),xA(n,new bu(t),t.bypassAuthState)}class s_{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return JA;case"linkViaPopup":case"linkViaRedirect":return ZA;case"reauthViaPopup":case"reauthViaRedirect":return XA;default:xn(this.auth,"internal-error")}}resolve(e){Hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const e1=new Ji(2e3,1e4);async function t1(t,e,n){if(en(t.app))return Promise.reject(an(t,"operation-not-supported-in-this-environment"));const s=ja(t);Yb(t,e,Tu);const r=n_(s,n);return new Us(s,"signInViaPopup",e,r).executeNotNull()}class Us extends s_{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,Us.currentPopupAction&&Us.currentPopupAction.cancel(),Us.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){Hn(this.filter.length===1,"Popup operations only handle one event");const e=Iu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(an(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(an(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Us.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(an(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,e1.get())};e()}}Us.currentPopupAction=null;const n1="pendingRedirect",Oo=new Map;class s1 extends s_{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Oo.get(this.auth._key());if(!e){try{const s=await r1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Oo.set(this.auth._key(),e)}return this.bypassAuthState||Oo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function r1(t,e){const n=a1(e),s=o1(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function i1(t,e){Oo.set(t._key(),e)}function o1(t){return Un(t._redirectPersistence)}function a1(t){return Vo(n1,t.config.apiKey,t.name)}async function l1(t,e,n=!1){if(en(t.app))return Promise.reject(Hs(t));const s=ja(t),r=n_(s,e),o=await new s1(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}const c1=10*60*1e3;class u1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!h1(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!r_(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(an(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=c1&&this.cachedEventUids.clear(),this.cachedEventUids.has(yd(e))}saveEventToCache(e){this.cachedEventUids.add(yd(e)),this.lastProcessedEventTime=Date.now()}}function yd(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function r_({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function h1(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return r_(t);default:return!1}}async function f1(t,e={}){return qr(t,"GET","/v1/projects",e)}const d1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,p1=/^https?/;async function m1(t){if(t.config.emulator)return;const{authorizedDomains:e}=await f1(t);for(const n of e)try{if(g1(n))return}catch{}xn(t,"unauthorized-domain")}function g1(t){const e=wc(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!p1.test(n))return!1;if(d1.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}const _1=new Ji(3e4,6e4);function vd(){const t=En().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function y1(t){return new Promise((e,n)=>{function s(){vd(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vd(),n(an(t,"network-request-failed"))},timeout:_1.get()})}if(En().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(En().gapi?.load)s();else{const r=IA("iframefcb");return En()[r]=()=>{gapi.load?s():n(an(t,"network-request-failed"))},EA(`${TA()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw Mo=null,e})}let Mo=null;function v1(t){return Mo=Mo||y1(t),Mo}const w1=new Ji(5e3,15e3),E1="__/auth/iframe",T1="emulator/auth/iframe",I1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},b1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function A1(t){const e=t.config;de(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?_u(e,T1):`https://${t.config.authDomain}/${E1}`,s={apiKey:e.apiKey,appName:t.name,v:jr},r=b1.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${Yi(s).slice(1)}`}async function R1(t){const e=await v1(t),n=En().gapi;return de(n,t,"internal-error"),e.open({where:document.body,url:A1(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:I1,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=an(t,"network-request-failed"),l=En().setTimeout(()=>{i(o)},w1.get());function c(){En().clearTimeout(l),r(s)}s.ping(c).then(c,()=>{i(o)})}))}const S1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},C1=500,P1=600,x1="_blank",k1="http://localhost";class wd{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function D1(t,e,n,s=C1,r=P1){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c={...S1,width:s.toString(),height:r.toString(),top:i,left:o},h=Ct().toLowerCase();n&&(l=Fg(h)?x1:n),Mg(h)&&(e=e||k1,c.scrollbars="yes");const f=Object.entries(c).reduce((m,[w,D])=>`${m}${w}=${D},`,"");if(dA(h)&&l!=="_self")return N1(e||"",l),new wd(null);const p=window.open(e||"",l,f);de(p,t,"popup-blocked");try{p.focus()}catch{}return new wd(p)}function N1(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const V1="__/auth/handler",O1="emulator/auth/handler",M1=encodeURIComponent("fac");async function Ed(t,e,n,s,r,i){de(t.config.authDomain,t,"auth-domain-config-required"),de(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:jr,eventId:r};if(e instanceof Tu){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",uT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof Xi){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const c=await t._getAppCheckToken(),h=c?`#${M1}=${encodeURIComponent(c)}`:"";return`${L1(t)}?${Yi(l).slice(1)}${h}`}function L1({config:t}){return t.emulator?_u(t,O1):`https://${t.authDomain}/${V1}`}const Gl="webStorageSupport";class F1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jg,this._completeRedirectFn=l1,this._overrideRedirectResult=i1}async _openPopup(e,n,s,r){Hn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await Ed(e,n,s,wc(),r);return D1(e,i,Iu())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await Ed(e,n,s,wc(),r);return BA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(Hn(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await R1(e),s=new u1(e);return n.register("authEvent",r=>(de(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gl,{type:Gl},r=>{const i=r?.[0]?.[Gl];i!==void 0&&n(!!i),xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=m1(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return qg()||Lg()||wu()}}const U1=F1;var Td="@firebase/auth",Id="1.11.1";class $1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function B1(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function j1(t){Pn(new un("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;de(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hg(t)},h=new vA(s,r,i,c);return AA(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Pn(new un("auth-internal",e=>{const n=ja(e.getProvider("auth").getImmediate());return(s=>new $1(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yt(Td,Id,B1(t)),Yt(Td,Id,"esm2020")}const q1=5*60,H1=Ym("authIdTokenMaxAge")||q1;let bd=null;const z1=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>H1)return;const r=n?.token;bd!==r&&(bd=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function G1(t=lu()){const e=Zs(t,"auth");if(e.isInitialized())return e.getImmediate();const n=bA(t,{popupRedirectResolver:U1,persistence:[YA,FA,Jg]}),s=Ym("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=z1(i.toString());VA(n,o,()=>o(n.currentUser)),NA(n,l=>o(l))}}const r=Km("auth");return r&&RA(n,`http://${r}`),n}function W1(){return document.getElementsByTagName("head")?.[0]??document}wA({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=an("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",W1().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});j1("Browser");var Ad=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ds,i_;(function(){var t;function e(b,_){function v(){}v.prototype=_.prototype,b.F=_.prototype,b.prototype=new v,b.prototype.constructor=b,b.D=function(R,A,C){for(var E=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)E[Ue-2]=arguments[Ue];return _.prototype[A].apply(R,E)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(b,_,v){v||(v=0);const R=Array(16);if(typeof _=="string")for(var A=0;A<16;++A)R[A]=_.charCodeAt(v++)|_.charCodeAt(v++)<<8|_.charCodeAt(v++)<<16|_.charCodeAt(v++)<<24;else for(A=0;A<16;++A)R[A]=_[v++]|_[v++]<<8|_[v++]<<16|_[v++]<<24;_=b.g[0],v=b.g[1],A=b.g[2];let C=b.g[3],E;E=_+(C^v&(A^C))+R[0]+3614090360&4294967295,_=v+(E<<7&4294967295|E>>>25),E=C+(A^_&(v^A))+R[1]+3905402710&4294967295,C=_+(E<<12&4294967295|E>>>20),E=A+(v^C&(_^v))+R[2]+606105819&4294967295,A=C+(E<<17&4294967295|E>>>15),E=v+(_^A&(C^_))+R[3]+3250441966&4294967295,v=A+(E<<22&4294967295|E>>>10),E=_+(C^v&(A^C))+R[4]+4118548399&4294967295,_=v+(E<<7&4294967295|E>>>25),E=C+(A^_&(v^A))+R[5]+1200080426&4294967295,C=_+(E<<12&4294967295|E>>>20),E=A+(v^C&(_^v))+R[6]+2821735955&4294967295,A=C+(E<<17&4294967295|E>>>15),E=v+(_^A&(C^_))+R[7]+4249261313&4294967295,v=A+(E<<22&4294967295|E>>>10),E=_+(C^v&(A^C))+R[8]+1770035416&4294967295,_=v+(E<<7&4294967295|E>>>25),E=C+(A^_&(v^A))+R[9]+2336552879&4294967295,C=_+(E<<12&4294967295|E>>>20),E=A+(v^C&(_^v))+R[10]+4294925233&4294967295,A=C+(E<<17&4294967295|E>>>15),E=v+(_^A&(C^_))+R[11]+2304563134&4294967295,v=A+(E<<22&4294967295|E>>>10),E=_+(C^v&(A^C))+R[12]+1804603682&4294967295,_=v+(E<<7&4294967295|E>>>25),E=C+(A^_&(v^A))+R[13]+4254626195&4294967295,C=_+(E<<12&4294967295|E>>>20),E=A+(v^C&(_^v))+R[14]+2792965006&4294967295,A=C+(E<<17&4294967295|E>>>15),E=v+(_^A&(C^_))+R[15]+1236535329&4294967295,v=A+(E<<22&4294967295|E>>>10),E=_+(A^C&(v^A))+R[1]+4129170786&4294967295,_=v+(E<<5&4294967295|E>>>27),E=C+(v^A&(_^v))+R[6]+3225465664&4294967295,C=_+(E<<9&4294967295|E>>>23),E=A+(_^v&(C^_))+R[11]+643717713&4294967295,A=C+(E<<14&4294967295|E>>>18),E=v+(C^_&(A^C))+R[0]+3921069994&4294967295,v=A+(E<<20&4294967295|E>>>12),E=_+(A^C&(v^A))+R[5]+3593408605&4294967295,_=v+(E<<5&4294967295|E>>>27),E=C+(v^A&(_^v))+R[10]+38016083&4294967295,C=_+(E<<9&4294967295|E>>>23),E=A+(_^v&(C^_))+R[15]+3634488961&4294967295,A=C+(E<<14&4294967295|E>>>18),E=v+(C^_&(A^C))+R[4]+3889429448&4294967295,v=A+(E<<20&4294967295|E>>>12),E=_+(A^C&(v^A))+R[9]+568446438&4294967295,_=v+(E<<5&4294967295|E>>>27),E=C+(v^A&(_^v))+R[14]+3275163606&4294967295,C=_+(E<<9&4294967295|E>>>23),E=A+(_^v&(C^_))+R[3]+4107603335&4294967295,A=C+(E<<14&4294967295|E>>>18),E=v+(C^_&(A^C))+R[8]+1163531501&4294967295,v=A+(E<<20&4294967295|E>>>12),E=_+(A^C&(v^A))+R[13]+2850285829&4294967295,_=v+(E<<5&4294967295|E>>>27),E=C+(v^A&(_^v))+R[2]+4243563512&4294967295,C=_+(E<<9&4294967295|E>>>23),E=A+(_^v&(C^_))+R[7]+1735328473&4294967295,A=C+(E<<14&4294967295|E>>>18),E=v+(C^_&(A^C))+R[12]+2368359562&4294967295,v=A+(E<<20&4294967295|E>>>12),E=_+(v^A^C)+R[5]+4294588738&4294967295,_=v+(E<<4&4294967295|E>>>28),E=C+(_^v^A)+R[8]+2272392833&4294967295,C=_+(E<<11&4294967295|E>>>21),E=A+(C^_^v)+R[11]+1839030562&4294967295,A=C+(E<<16&4294967295|E>>>16),E=v+(A^C^_)+R[14]+4259657740&4294967295,v=A+(E<<23&4294967295|E>>>9),E=_+(v^A^C)+R[1]+2763975236&4294967295,_=v+(E<<4&4294967295|E>>>28),E=C+(_^v^A)+R[4]+1272893353&4294967295,C=_+(E<<11&4294967295|E>>>21),E=A+(C^_^v)+R[7]+4139469664&4294967295,A=C+(E<<16&4294967295|E>>>16),E=v+(A^C^_)+R[10]+3200236656&4294967295,v=A+(E<<23&4294967295|E>>>9),E=_+(v^A^C)+R[13]+681279174&4294967295,_=v+(E<<4&4294967295|E>>>28),E=C+(_^v^A)+R[0]+3936430074&4294967295,C=_+(E<<11&4294967295|E>>>21),E=A+(C^_^v)+R[3]+3572445317&4294967295,A=C+(E<<16&4294967295|E>>>16),E=v+(A^C^_)+R[6]+76029189&4294967295,v=A+(E<<23&4294967295|E>>>9),E=_+(v^A^C)+R[9]+3654602809&4294967295,_=v+(E<<4&4294967295|E>>>28),E=C+(_^v^A)+R[12]+3873151461&4294967295,C=_+(E<<11&4294967295|E>>>21),E=A+(C^_^v)+R[15]+530742520&4294967295,A=C+(E<<16&4294967295|E>>>16),E=v+(A^C^_)+R[2]+3299628645&4294967295,v=A+(E<<23&4294967295|E>>>9),E=_+(A^(v|~C))+R[0]+4096336452&4294967295,_=v+(E<<6&4294967295|E>>>26),E=C+(v^(_|~A))+R[7]+1126891415&4294967295,C=_+(E<<10&4294967295|E>>>22),E=A+(_^(C|~v))+R[14]+2878612391&4294967295,A=C+(E<<15&4294967295|E>>>17),E=v+(C^(A|~_))+R[5]+4237533241&4294967295,v=A+(E<<21&4294967295|E>>>11),E=_+(A^(v|~C))+R[12]+1700485571&4294967295,_=v+(E<<6&4294967295|E>>>26),E=C+(v^(_|~A))+R[3]+2399980690&4294967295,C=_+(E<<10&4294967295|E>>>22),E=A+(_^(C|~v))+R[10]+4293915773&4294967295,A=C+(E<<15&4294967295|E>>>17),E=v+(C^(A|~_))+R[1]+2240044497&4294967295,v=A+(E<<21&4294967295|E>>>11),E=_+(A^(v|~C))+R[8]+1873313359&4294967295,_=v+(E<<6&4294967295|E>>>26),E=C+(v^(_|~A))+R[15]+4264355552&4294967295,C=_+(E<<10&4294967295|E>>>22),E=A+(_^(C|~v))+R[6]+2734768916&4294967295,A=C+(E<<15&4294967295|E>>>17),E=v+(C^(A|~_))+R[13]+1309151649&4294967295,v=A+(E<<21&4294967295|E>>>11),E=_+(A^(v|~C))+R[4]+4149444226&4294967295,_=v+(E<<6&4294967295|E>>>26),E=C+(v^(_|~A))+R[11]+3174756917&4294967295,C=_+(E<<10&4294967295|E>>>22),E=A+(_^(C|~v))+R[2]+718787259&4294967295,A=C+(E<<15&4294967295|E>>>17),E=v+(C^(A|~_))+R[9]+3951481745&4294967295,b.g[0]=b.g[0]+_&4294967295,b.g[1]=b.g[1]+(A+(E<<21&4294967295|E>>>11))&4294967295,b.g[2]=b.g[2]+A&4294967295,b.g[3]=b.g[3]+C&4294967295}s.prototype.v=function(b,_){_===void 0&&(_=b.length);const v=_-this.blockSize,R=this.C;let A=this.h,C=0;for(;C<_;){if(A==0)for(;C<=v;)r(this,b,C),C+=this.blockSize;if(typeof b=="string"){for(;C<_;)if(R[A++]=b.charCodeAt(C++),A==this.blockSize){r(this,R),A=0;break}}else for(;C<_;)if(R[A++]=b[C++],A==this.blockSize){r(this,R),A=0;break}}this.h=A,this.o+=_},s.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var _=1;_<b.length-8;++_)b[_]=0;_=this.o*8;for(var v=b.length-8;v<b.length;++v)b[v]=_&255,_/=256;for(this.v(b),b=Array(16),_=0,v=0;v<4;++v)for(let R=0;R<32;R+=8)b[_++]=this.g[v]>>>R&255;return b};function i(b,_){var v=l;return Object.prototype.hasOwnProperty.call(v,b)?v[b]:v[b]=_(b)}function o(b,_){this.h=_;const v=[];let R=!0;for(let A=b.length-1;A>=0;A--){const C=b[A]|0;R&&C==_||(v[A]=C,R=!1)}this.g=v}var l={};function c(b){return-128<=b&&b<128?i(b,function(_){return new o([_|0],_<0?-1:0)}):new o([b|0],b<0?-1:0)}function h(b){if(isNaN(b)||!isFinite(b))return p;if(b<0)return F(h(-b));const _=[];let v=1;for(let R=0;b>=v;R++)_[R]=b/v|0,v*=4294967296;return new o(_,0)}function f(b,_){if(b.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(b.charAt(0)=="-")return F(f(b.substring(1),_));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const v=h(Math.pow(_,8));let R=p;for(let C=0;C<b.length;C+=8){var A=Math.min(8,b.length-C);const E=parseInt(b.substring(C,C+A),_);A<8?(A=h(Math.pow(_,A)),R=R.j(A).add(h(E))):(R=R.j(v),R=R.add(h(E)))}return R}var p=c(0),m=c(1),w=c(16777216);t=o.prototype,t.m=function(){if(O(this))return-F(this).m();let b=0,_=1;for(let v=0;v<this.g.length;v++){const R=this.i(v);b+=(R>=0?R:4294967296+R)*_,_*=4294967296}return b},t.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(D(this))return"0";if(O(this))return"-"+F(this).toString(b);const _=h(Math.pow(b,6));var v=this;let R="";for(;;){const A=Y(v,_).g;v=Q(v,A.j(_));let C=((v.g.length>0?v.g[0]:v.h)>>>0).toString(b);if(v=A,D(v))return C+R;for(;C.length<6;)C="0"+C;R=C+R}},t.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function D(b){if(b.h!=0)return!1;for(let _=0;_<b.g.length;_++)if(b.g[_]!=0)return!1;return!0}function O(b){return b.h==-1}t.l=function(b){return b=Q(this,b),O(b)?-1:D(b)?0:1};function F(b){const _=b.g.length,v=[];for(let R=0;R<_;R++)v[R]=~b.g[R];return new o(v,~b.h).add(m)}t.abs=function(){return O(this)?F(this):this},t.add=function(b){const _=Math.max(this.g.length,b.g.length),v=[];let R=0;for(let A=0;A<=_;A++){let C=R+(this.i(A)&65535)+(b.i(A)&65535),E=(C>>>16)+(this.i(A)>>>16)+(b.i(A)>>>16);R=E>>>16,C&=65535,E&=65535,v[A]=E<<16|C}return new o(v,v[v.length-1]&-2147483648?-1:0)};function Q(b,_){return b.add(F(_))}t.j=function(b){if(D(this)||D(b))return p;if(O(this))return O(b)?F(this).j(F(b)):F(F(this).j(b));if(O(b))return F(this.j(F(b)));if(this.l(w)<0&&b.l(w)<0)return h(this.m()*b.m());const _=this.g.length+b.g.length,v=[];for(var R=0;R<2*_;R++)v[R]=0;for(R=0;R<this.g.length;R++)for(let A=0;A<b.g.length;A++){const C=this.i(R)>>>16,E=this.i(R)&65535,Ue=b.i(A)>>>16,tt=b.i(A)&65535;v[2*R+2*A]+=E*tt,V(v,2*R+2*A),v[2*R+2*A+1]+=C*tt,V(v,2*R+2*A+1),v[2*R+2*A+1]+=E*Ue,V(v,2*R+2*A+1),v[2*R+2*A+2]+=C*Ue,V(v,2*R+2*A+2)}for(b=0;b<_;b++)v[b]=v[2*b+1]<<16|v[2*b];for(b=_;b<2*_;b++)v[b]=0;return new o(v,0)};function V(b,_){for(;(b[_]&65535)!=b[_];)b[_+1]+=b[_]>>>16,b[_]&=65535,_++}function M(b,_){this.g=b,this.h=_}function Y(b,_){if(D(_))throw Error("division by zero");if(D(b))return new M(p,p);if(O(b))return _=Y(F(b),_),new M(F(_.g),F(_.h));if(O(_))return _=Y(b,F(_)),new M(F(_.g),_.h);if(b.g.length>30){if(O(b)||O(_))throw Error("slowDivide_ only works with positive integers.");for(var v=m,R=_;R.l(b)<=0;)v=U(v),R=U(R);var A=q(v,1),C=q(R,1);for(R=q(R,2),v=q(v,2);!D(R);){var E=C.add(R);E.l(b)<=0&&(A=A.add(v),C=E),R=q(R,1),v=q(v,1)}return _=Q(b,A.j(_)),new M(A,_)}for(A=p;b.l(_)>=0;){for(v=Math.max(1,Math.floor(b.m()/_.m())),R=Math.ceil(Math.log(v)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),C=h(v),E=C.j(_);O(E)||E.l(b)>0;)v-=R,C=h(v),E=C.j(_);D(C)&&(C=m),A=A.add(C),b=Q(b,E)}return new M(A,b)}t.B=function(b){return Y(this,b).h},t.and=function(b){const _=Math.max(this.g.length,b.g.length),v=[];for(let R=0;R<_;R++)v[R]=this.i(R)&b.i(R);return new o(v,this.h&b.h)},t.or=function(b){const _=Math.max(this.g.length,b.g.length),v=[];for(let R=0;R<_;R++)v[R]=this.i(R)|b.i(R);return new o(v,this.h|b.h)},t.xor=function(b){const _=Math.max(this.g.length,b.g.length),v=[];for(let R=0;R<_;R++)v[R]=this.i(R)^b.i(R);return new o(v,this.h^b.h)};function U(b){const _=b.g.length+1,v=[];for(let R=0;R<_;R++)v[R]=b.i(R)<<1|b.i(R-1)>>>31;return new o(v,b.h)}function q(b,_){const v=_>>5;_%=32;const R=b.g.length-v,A=[];for(let C=0;C<R;C++)A[C]=_>0?b.i(C+v)>>>_|b.i(C+v+1)<<32-_:b.i(C+v);return new o(A,b.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,i_=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,ds=o}).apply(typeof Ad<"u"?Ad:typeof self<"u"?self:typeof window<"u"?window:{});var To=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var o_,pi,a_,Lo,Ic,l_,c_,u_;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof To=="object"&&To];for(var u=0;u<a.length;++u){var d=a[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var s=n(this);function r(a,u){if(u)e:{var d=s;a=a.split(".");for(var g=0;g<a.length-1;g++){var x=a[g];if(!(x in d))break e;d=d[x]}a=a[a.length-1],g=d[a],u=u(g),u!=g&&u!=null&&e(d,a,{configurable:!0,writable:!0,value:u})}}r("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(a){return a||function(u){var d=[],g;for(g in u)Object.prototype.hasOwnProperty.call(u,g)&&d.push([g,u[g]]);return d}});var i=i||{},o=this||self;function l(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function c(a,u,d){return a.call.apply(a.bind,arguments)}function h(a,u,d){return h=c,h.apply(null,arguments)}function f(a,u){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function p(a,u){function d(){}d.prototype=u.prototype,a.Z=u.prototype,a.prototype=new d,a.prototype.constructor=a,a.Ob=function(g,x,k){for(var ee=Array(arguments.length-2),we=2;we<arguments.length;we++)ee[we-2]=arguments[we];return u.prototype[x].apply(g,ee)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function w(a){const u=a.length;if(u>0){const d=Array(u);for(let g=0;g<u;g++)d[g]=a[g];return d}return[]}function D(a,u){for(let g=1;g<arguments.length;g++){const x=arguments[g];var d=typeof x;if(d=d!="object"?d:x?Array.isArray(x)?"array":d:"null",d=="array"||d=="object"&&typeof x.length=="number"){d=a.length||0;const k=x.length||0;a.length=d+k;for(let ee=0;ee<k;ee++)a[d+ee]=x[ee]}else a.push(x)}}class O{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return this.h>0?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function F(a){o.setTimeout(()=>{throw a},0)}function Q(){var a=b;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class V{constructor(){this.h=this.g=null}add(u,d){const g=M.get();g.set(u,d),this.h?this.h.next=g:this.g=g,this.h=g}}var M=new O(()=>new Y,a=>a.reset());class Y{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let U,q=!1,b=new V,_=()=>{const a=Promise.resolve(void 0);U=()=>{a.then(v)}};function v(){for(var a;a=Q();){try{a.h.call(a.g)}catch(d){F(d)}var u=M;u.j(a),u.h<100&&(u.h++,a.next=u.g,u.g=a)}q=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var C=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};o.addEventListener("test",d,u),o.removeEventListener("test",d,u)}catch{}return a}();function E(a){return/^[\s\xa0]*$/.test(a)}function Ue(a,u){A.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,u)}p(Ue,A),Ue.prototype.init=function(a,u){const d=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget,u||(d=="mouseover"?u=a.fromElement:d=="mouseout"&&(u=a.toElement)),this.relatedTarget=u,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&Ue.Z.h.call(this)},Ue.prototype.h=function(){Ue.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var tt="closure_listenable_"+(Math.random()*1e6|0),We=0;function Pe(a,u,d,g,x){this.listener=a,this.proxy=null,this.src=u,this.type=d,this.capture=!!g,this.ha=x,this.key=++We,this.da=this.fa=!1}function Ee(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function gt(a,u,d){for(const g in a)u.call(d,a[g],g,a)}function Ot(a,u){for(const d in a)u.call(void 0,a[d],d,a)}function _t(a){const u={};for(const d in a)u[d]=a[d];return u}const nt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xt(a,u){let d,g;for(let x=1;x<arguments.length;x++){g=arguments[x];for(d in g)a[d]=g[d];for(let k=0;k<nt.length;k++)d=nt[k],Object.prototype.hasOwnProperty.call(g,d)&&(a[d]=g[d])}}function Z(a){this.src=a,this.g={},this.h=0}Z.prototype.add=function(a,u,d,g,x){const k=a.toString();a=this.g[k],a||(a=this.g[k]=[],this.h++);const ee=W(a,u,g,x);return ee>-1?(u=a[ee],d||(u.fa=!1)):(u=new Pe(u,this.src,k,!!g,x),u.fa=d,a.push(u)),u};function N(a,u){const d=u.type;if(d in a.g){var g=a.g[d],x=Array.prototype.indexOf.call(g,u,void 0),k;(k=x>=0)&&Array.prototype.splice.call(g,x,1),k&&(Ee(u),a.g[d].length==0&&(delete a.g[d],a.h--))}}function W(a,u,d,g){for(let x=0;x<a.length;++x){const k=a[x];if(!k.da&&k.listener==u&&k.capture==!!d&&k.ha==g)return x}return-1}var S="closure_lm_"+(Math.random()*1e6|0),H={};function j(a,u,d,g,x){if(Array.isArray(u)){for(let k=0;k<u.length;k++)j(a,u[k],d,g,x);return null}return d=te(d),a&&a[tt]?a.J(u,d,l(g)?!!g.capture:!1,x):ae(a,u,d,!1,g,x)}function ae(a,u,d,g,x,k){if(!u)throw Error("Invalid event type");const ee=l(x)?!!x.capture:!!x;let we=$(a);if(we||(a[S]=we=new Z(a)),d=we.add(u,d,g,ee,k),d.proxy)return d;if(g=_e(),d.proxy=g,g.src=a,g.listener=d,a.addEventListener)C||(x=ee),x===void 0&&(x=!1),a.addEventListener(u.toString(),g,x);else if(a.attachEvent)a.attachEvent(P(u.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return d}function _e(){function a(d){return u.call(a.src,a.listener,d)}const u=B;return a}function y(a,u,d,g,x){if(Array.isArray(u))for(var k=0;k<u.length;k++)y(a,u[k],d,g,x);else g=l(g)?!!g.capture:!!g,d=te(d),a&&a[tt]?(a=a.i,k=String(u).toString(),k in a.g&&(u=a.g[k],d=W(u,d,g,x),d>-1&&(Ee(u[d]),Array.prototype.splice.call(u,d,1),u.length==0&&(delete a.g[k],a.h--)))):a&&(a=$(a))&&(u=a.g[u.toString()],a=-1,u&&(a=W(u,d,g,x)),(d=a>-1?u[a]:null)&&T(d))}function T(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[tt])N(u.i,a);else{var d=a.type,g=a.proxy;u.removeEventListener?u.removeEventListener(d,g,a.capture):u.detachEvent?u.detachEvent(P(d),g):u.addListener&&u.removeListener&&u.removeListener(g),(d=$(u))?(N(d,a),d.h==0&&(d.src=null,u[S]=null)):Ee(a)}}}function P(a){return a in H?H[a]:H[a]="on"+a}function B(a,u){if(a.da)a=!0;else{u=new Ue(u,this);const d=a.listener,g=a.ha||a.src;a.fa&&T(a),a=d.call(g,u)}return a}function $(a){return a=a[S],a instanceof Z?a:null}var L="__closure_events_fn_"+(Math.random()*1e9>>>0);function te(a){return typeof a=="function"?a:(a[L]||(a[L]=function(u){return a.handleEvent(u)}),a[L])}function X(){R.call(this),this.i=new Z(this),this.M=this,this.G=null}p(X,R),X.prototype[tt]=!0,X.prototype.removeEventListener=function(a,u,d,g){y(this,a,u,d,g)};function J(a,u){var d,g=a.G;if(g)for(d=[];g;g=g.G)d.push(g);if(a=a.M,g=u.type||u,typeof u=="string")u=new A(u,a);else if(u instanceof A)u.target=u.target||a;else{var x=u;u=new A(g,a),Xt(u,x)}x=!0;let k,ee;if(d)for(ee=d.length-1;ee>=0;ee--)k=u.g=d[ee],x=K(k,g,!0,u)&&x;if(k=u.g=a,x=K(k,g,!0,u)&&x,x=K(k,g,!1,u)&&x,d)for(ee=0;ee<d.length;ee++)k=u.g=d[ee],x=K(k,g,!1,u)&&x}X.prototype.N=function(){if(X.Z.N.call(this),this.i){var a=this.i;for(const u in a.g){const d=a.g[u];for(let g=0;g<d.length;g++)Ee(d[g]);delete a.g[u],a.h--}}this.G=null},X.prototype.J=function(a,u,d,g){return this.i.add(String(a),u,!1,d,g)},X.prototype.K=function(a,u,d,g){return this.i.add(String(a),u,!0,d,g)};function K(a,u,d,g){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();let x=!0;for(let k=0;k<u.length;++k){const ee=u[k];if(ee&&!ee.da&&ee.capture==d){const we=ee.listener,st=ee.ha||ee.src;ee.fa&&N(a.i,ee),x=we.call(st,g)!==!1&&x}}return x&&!g.defaultPrevented}function ce(a,u){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(u)>2147483647?-1:o.setTimeout(a,u||0)}function re(a){a.g=ce(()=>{a.g=null,a.i&&(a.i=!1,re(a))},a.l);const u=a.h;a.h=null,a.m.apply(null,u)}class ue extends R{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:re(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function he(a){R.call(this),this.h=a,this.g={}}p(he,R);var Te=[];function Oe(a){gt(a.g,function(u,d){this.g.hasOwnProperty(d)&&T(u)},a),a.g={}}he.prototype.N=function(){he.Z.N.call(this),Oe(this)},he.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ce=o.JSON.stringify,yt=o.JSON.parse,vt=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Ut(){}function $t(){}var Zt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function rr(){A.call(this,"d")}p(rr,A);function ht(){A.call(this,"c")}p(ht,A);var at={},Qr=null;function Ss(){return Qr=Qr||new X}at.Ia="serverreachability";function rh(a){A.call(this,at.Ia,a)}p(rh,A);function Yr(a){const u=Ss();J(u,new rh(u))}at.STAT_EVENT="statevent";function ih(a,u){A.call(this,at.STAT_EVENT,a),this.stat=u}p(ih,A);function Pt(a){const u=Ss();J(u,new ih(u,a))}at.Ja="timingevent";function oh(a,u){A.call(this,at.Ja,a),this.size=u}p(oh,A);function Jr(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},u)}function Xr(){this.g=!0}Xr.prototype.ua=function(){this.g=!1};function Fy(a,u,d,g,x,k){a.info(function(){if(a.g)if(k){var ee="",we=k.split("&");for(let Me=0;Me<we.length;Me++){var st=we[Me].split("=");if(st.length>1){const lt=st[0];st=st[1];const pn=lt.split("_");ee=pn.length>=2&&pn[1]=="type"?ee+(lt+"="+st+"&"):ee+(lt+"=redacted&")}}}else ee=null;else ee=k;return"XMLHTTP REQ ("+g+") [attempt "+x+"]: "+u+`
`+d+`
`+ee})}function Uy(a,u,d,g,x,k,ee){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+x+"]: "+u+`
`+d+`
`+k+" "+ee})}function ir(a,u,d,g){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+By(a,d)+(g?" "+g:"")})}function $y(a,u){a.info(function(){return"TIMEOUT: "+u})}Xr.prototype.info=function(){};function By(a,u){if(!a.g)return u;if(!u)return null;try{const k=JSON.parse(u);if(k){for(a=0;a<k.length;a++)if(Array.isArray(k[a])){var d=k[a];if(!(d.length<2)){var g=d[1];if(Array.isArray(g)&&!(g.length<1)){var x=g[0];if(x!="noop"&&x!="stop"&&x!="close")for(let ee=1;ee<g.length;ee++)g[ee]=""}}}}return Ce(k)}catch{return u}}var ao={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ah={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},lh;function ll(){}p(ll,Ut),ll.prototype.g=function(){return new XMLHttpRequest},lh=new ll;function Zr(a){return encodeURIComponent(String(a))}function jy(a){var u=1;a=a.split(":");const d=[];for(;u>0&&a.length;)d.push(a.shift()),u--;return a.length&&d.push(a.join(":")),d}function Kn(a,u,d,g){this.j=a,this.i=u,this.l=d,this.S=g||1,this.V=new he(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ch}function ch(){this.i=null,this.g="",this.h=!1}var uh={},cl={};function ul(a,u,d){a.M=1,a.A=co(dn(u)),a.u=d,a.R=!0,hh(a,null)}function hh(a,u){a.F=Date.now(),lo(a),a.B=dn(a.A);var d=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),bh(d.i,"t",g),a.C=0,d=a.j.L,a.h=new ch,a.g=jh(a.j,d?u:null,!a.u),a.P>0&&(a.O=new ue(h(a.Y,a,a.g),a.P)),u=a.V,d=a.g,g=a.ba;var x="readystatechange";Array.isArray(x)||(x&&(Te[0]=x.toString()),x=Te);for(let k=0;k<x.length;k++){const ee=j(d,x[k],g||u.handleEvent,!1,u.h||u);if(!ee)break;u.g[ee.key]=ee}u=a.J?_t(a.J):{},a.u?(a.v||(a.v="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,u)):(a.v="GET",a.g.ea(a.B,a.v,null,u)),Yr(),Fy(a.i,a.v,a.B,a.l,a.S,a.u)}Kn.prototype.ba=function(a){a=a.target;const u=this.O;u&&Jn(a)==3?u.j():this.Y(a)},Kn.prototype.Y=function(a){try{if(a==this.g)e:{const we=Jn(this.g),st=this.g.ya(),Me=this.g.ca();if(!(we<3)&&(we!=3||this.g&&(this.h.h||this.g.la()||kh(this.g)))){this.K||we!=4||st==7||(st==8||Me<=0?Yr(3):Yr(2)),hl(this);var u=this.g.ca();this.X=u;var d=qy(this);if(this.o=u==200,Uy(this.i,this.v,this.B,this.l,this.S,we,u),this.o){if(this.U&&!this.L){t:{if(this.g){var g,x=this.g;if((g=x.g?x.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(g)){var k=g;break t}}k=null}if(a=k)ir(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,fl(this,a);else{this.o=!1,this.m=3,Pt(12),Cs(this),ei(this);break e}}if(this.R){a=!0;let lt;for(;!this.K&&this.C<d.length;)if(lt=Hy(this,d),lt==cl){we==4&&(this.m=4,Pt(14),a=!1),ir(this.i,this.l,null,"[Incomplete Response]");break}else if(lt==uh){this.m=4,Pt(15),ir(this.i,this.l,d,"[Invalid Chunk]"),a=!1;break}else ir(this.i,this.l,lt,null),fl(this,lt);if(fh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||d.length!=0||this.h.h||(this.m=1,Pt(16),a=!1),this.o=this.o&&a,!a)ir(this.i,this.l,d,"[Invalid Chunked Response]"),Cs(this),ei(this);else if(d.length>0&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.aa&&!ee.P&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),wl(ee),ee.P=!0,Pt(11))}}else ir(this.i,this.l,d,null),fl(this,d);we==4&&Cs(this),this.o&&!this.K&&(we==4?Fh(this.j,this):(this.o=!1,lo(this)))}else rv(this.g),u==400&&d.indexOf("Unknown SID")>0?(this.m=3,Pt(12)):(this.m=0,Pt(13)),Cs(this),ei(this)}}}catch{}finally{}};function qy(a){if(!fh(a))return a.g.la();const u=kh(a.g);if(u==="")return"";let d="";const g=u.length,x=Jn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Cs(a),ei(a),"";a.h.i=new o.TextDecoder}for(let k=0;k<g;k++)a.h.h=!0,d+=a.h.i.decode(u[k],{stream:!(x&&k==g-1)});return u.length=0,a.h.g+=d,a.C=0,a.h.g}function fh(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function Hy(a,u){var d=a.C,g=u.indexOf(`
`,d);return g==-1?cl:(d=Number(u.substring(d,g)),isNaN(d)?uh:(g+=1,g+d>u.length?cl:(u=u.slice(g,g+d),a.C=g+d,u)))}Kn.prototype.cancel=function(){this.K=!0,Cs(this)};function lo(a){a.T=Date.now()+a.H,dh(a,a.H)}function dh(a,u){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Jr(h(a.aa,a),u)}function hl(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Kn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?($y(this.i,this.B),this.M!=2&&(Yr(),Pt(17)),Cs(this),this.m=2,ei(this)):dh(this,this.T-a)};function ei(a){a.j.I==0||a.K||Fh(a.j,a)}function Cs(a){hl(a);var u=a.O;u&&typeof u.dispose=="function"&&u.dispose(),a.O=null,Oe(a.V),a.g&&(u=a.g,a.g=null,u.abort(),u.dispose())}function fl(a,u){try{var d=a.j;if(d.I!=0&&(d.g==a||dl(d.h,a))){if(!a.L&&dl(d.h,a)&&d.I==3){try{var g=d.Ba.g.parse(u)}catch{g=null}if(Array.isArray(g)&&g.length==3){var x=g;if(x[0]==0){e:if(!d.v){if(d.g)if(d.g.F+3e3<a.F)mo(d),fo(d);else break e;vl(d),Pt(18)}}else d.xa=x[1],0<d.xa-d.K&&x[2]<37500&&d.F&&d.A==0&&!d.C&&(d.C=Jr(h(d.Va,d),6e3));gh(d.h)<=1&&d.ta&&(d.ta=void 0)}else xs(d,11)}else if((a.L||d.g==a)&&mo(d),!E(u))for(x=d.Ba.g.parse(u),u=0;u<x.length;u++){let Me=x[u];const lt=Me[0];if(!(lt<=d.K))if(d.K=lt,Me=Me[1],d.I==2)if(Me[0]=="c"){d.M=Me[1],d.ba=Me[2];const pn=Me[3];pn!=null&&(d.ka=pn,d.j.info("VER="+d.ka));const ks=Me[4];ks!=null&&(d.za=ks,d.j.info("SVER="+d.za));const Xn=Me[5];Xn!=null&&typeof Xn=="number"&&Xn>0&&(g=1.5*Xn,d.O=g,d.j.info("backChannelRequestTimeoutMs_="+g)),g=d;const Zn=a.g;if(Zn){const _o=Zn.g?Zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_o){var k=g.h;k.g||_o.indexOf("spdy")==-1&&_o.indexOf("quic")==-1&&_o.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(pl(k,k.h),k.h=null))}if(g.G){const El=Zn.g?Zn.g.getResponseHeader("X-HTTP-Session-Id"):null;El&&(g.wa=El,qe(g.J,g.G,El))}}d.I=3,d.l&&d.l.ra(),d.aa&&(d.T=Date.now()-a.F,d.j.info("Handshake RTT: "+d.T+"ms")),g=d;var ee=a;if(g.na=Bh(g,g.L?g.ba:null,g.W),ee.L){_h(g.h,ee);var we=ee,st=g.O;st&&(we.H=st),we.D&&(hl(we),lo(we)),g.g=ee}else Mh(g);d.i.length>0&&po(d)}else Me[0]!="stop"&&Me[0]!="close"||xs(d,7);else d.I==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?xs(d,7):yl(d):Me[0]!="noop"&&d.l&&d.l.qa(Me),d.A=0)}}Yr(4)}catch{}}var zy=class{constructor(a,u){this.g=a,this.map=u}};function ph(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function mh(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function gh(a){return a.h?1:a.g?a.g.size:0}function dl(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function pl(a,u){a.g?a.g.add(u):a.h=u}function _h(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}ph.prototype.cancel=function(){if(this.i=yh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function yh(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let u=a.i;for(const d of a.g.values())u=u.concat(d.G);return u}return w(a.i)}var vh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gy(a,u){if(a){a=a.split("&");for(let d=0;d<a.length;d++){const g=a[d].indexOf("=");let x,k=null;g>=0?(x=a[d].substring(0,g),k=a[d].substring(g+1)):x=a[d],u(x,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function Qn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let u;a instanceof Qn?(this.l=a.l,ti(this,a.j),this.o=a.o,this.g=a.g,ni(this,a.u),this.h=a.h,ml(this,Ah(a.i)),this.m=a.m):a&&(u=String(a).match(vh))?(this.l=!1,ti(this,u[1]||"",!0),this.o=si(u[2]||""),this.g=si(u[3]||"",!0),ni(this,u[4]),this.h=si(u[5]||"",!0),ml(this,u[6]||"",!0),this.m=si(u[7]||"")):(this.l=!1,this.i=new ii(null,this.l))}Qn.prototype.toString=function(){const a=[];var u=this.j;u&&a.push(ri(u,wh,!0),":");var d=this.g;return(d||u=="file")&&(a.push("//"),(u=this.o)&&a.push(ri(u,wh,!0),"@"),a.push(Zr(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,d!=null&&a.push(":",String(d))),(d=this.h)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(ri(d,d.charAt(0)=="/"?Qy:Ky,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",ri(d,Jy)),a.join("")},Qn.prototype.resolve=function(a){const u=dn(this);let d=!!a.j;d?ti(u,a.j):d=!!a.o,d?u.o=a.o:d=!!a.g,d?u.g=a.g:d=a.u!=null;var g=a.h;if(d)ni(u,a.u);else if(d=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var x=u.h.lastIndexOf("/");x!=-1&&(g=u.h.slice(0,x+1)+g)}if(x=g,x==".."||x==".")g="";else if(x.indexOf("./")!=-1||x.indexOf("/.")!=-1){g=x.lastIndexOf("/",0)==0,x=x.split("/");const k=[];for(let ee=0;ee<x.length;){const we=x[ee++];we=="."?g&&ee==x.length&&k.push(""):we==".."?((k.length>1||k.length==1&&k[0]!="")&&k.pop(),g&&ee==x.length&&k.push("")):(k.push(we),g=!0)}g=k.join("/")}else g=x}return d?u.h=g:d=a.i.toString()!=="",d?ml(u,Ah(a.i)):d=!!a.m,d&&(u.m=a.m),u};function dn(a){return new Qn(a)}function ti(a,u,d){a.j=d?si(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function ni(a,u){if(u){if(u=Number(u),isNaN(u)||u<0)throw Error("Bad port number "+u);a.u=u}else a.u=null}function ml(a,u,d){u instanceof ii?(a.i=u,Xy(a.i,a.l)):(d||(u=ri(u,Yy)),a.i=new ii(u,a.l))}function qe(a,u,d){a.i.set(u,d)}function co(a){return qe(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function si(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ri(a,u,d){return typeof a=="string"?(a=encodeURI(a).replace(u,Wy),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Wy(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var wh=/[#\/\?@]/g,Ky=/[#\?:]/g,Qy=/[#\?]/g,Yy=/[#\?@]/g,Jy=/#/g;function ii(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function Ps(a){a.g||(a.g=new Map,a.h=0,a.i&&Gy(a.i,function(u,d){a.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}t=ii.prototype,t.add=function(a,u){Ps(this),this.i=null,a=or(this,a);let d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(u),this.h+=1,this};function Eh(a,u){Ps(a),u=or(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function Th(a,u){return Ps(a),u=or(a,u),a.g.has(u)}t.forEach=function(a,u){Ps(this),this.g.forEach(function(d,g){d.forEach(function(x){a.call(u,x,g,this)},this)},this)};function Ih(a,u){Ps(a);let d=[];if(typeof u=="string")Th(a,u)&&(d=d.concat(a.g.get(or(a,u))));else for(a=Array.from(a.g.values()),u=0;u<a.length;u++)d=d.concat(a[u]);return d}t.set=function(a,u){return Ps(this),this.i=null,a=or(this,a),Th(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},t.get=function(a,u){return a?(a=Ih(this,a),a.length>0?String(a[0]):u):u};function bh(a,u,d){Eh(a,u),d.length>0&&(a.i=null,a.g.set(or(a,u),w(d)),a.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],u=Array.from(this.g.keys());for(let g=0;g<u.length;g++){var d=u[g];const x=Zr(d);d=Ih(this,d);for(let k=0;k<d.length;k++){let ee=x;d[k]!==""&&(ee+="="+Zr(d[k])),a.push(ee)}}return this.i=a.join("&")};function Ah(a){const u=new ii;return u.i=a.i,a.g&&(u.g=new Map(a.g),u.h=a.h),u}function or(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function Xy(a,u){u&&!a.j&&(Ps(a),a.i=null,a.g.forEach(function(d,g){const x=g.toLowerCase();g!=x&&(Eh(this,g),bh(this,x,d))},a)),a.j=u}function Zy(a,u){const d=new Xr;if(o.Image){const g=new Image;g.onload=f(Yn,d,"TestLoadImage: loaded",!0,u,g),g.onerror=f(Yn,d,"TestLoadImage: error",!1,u,g),g.onabort=f(Yn,d,"TestLoadImage: abort",!1,u,g),g.ontimeout=f(Yn,d,"TestLoadImage: timeout",!1,u,g),o.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else u(!1)}function ev(a,u){const d=new Xr,g=new AbortController,x=setTimeout(()=>{g.abort(),Yn(d,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:g.signal}).then(k=>{clearTimeout(x),k.ok?Yn(d,"TestPingServer: ok",!0,u):Yn(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(x),Yn(d,"TestPingServer: error",!1,u)})}function Yn(a,u,d,g,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),g(d)}catch{}}function tv(){this.g=new vt}function gl(a){this.i=a.Sb||null,this.h=a.ab||!1}p(gl,Ut),gl.prototype.g=function(){return new uo(this.i,this.h)};function uo(a,u){X.call(this),this.H=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(uo,X),t=uo.prototype,t.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=u,this.readyState=1,ai(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const u={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(u.body=a),(this.H||o).fetch(new Request(this.D,u)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,oi(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ai(this)),this.g&&(this.readyState=3,ai(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Rh(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Rh(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.B.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?oi(this):ai(this),this.readyState==3&&Rh(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,oi(this))},t.Na=function(a){this.g&&(this.response=a,oi(this))},t.ga=function(){this.g&&oi(this)};function oi(a){a.readyState=4,a.l=null,a.j=null,a.B=null,ai(a)}t.setRequestHeader=function(a,u){this.A.append(a,u)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=u.next();return a.join(`\r
`)};function ai(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(uo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Sh(a){let u="";return gt(a,function(d,g){u+=g,u+=":",u+=d,u+=`\r
`}),u}function _l(a,u,d){e:{for(g in d){var g=!1;break e}g=!0}g||(d=Sh(d),typeof a=="string"?d!=null&&Zr(d):qe(a,u,d))}function Ke(a){X.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ke,X);var nv=/^https?$/i,sv=["POST","PUT"];t=Ke.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,u,d,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():lh.g(),this.g.onreadystatechange=m(h(this.Ca,this));try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(k){Ch(this,k);return}if(a=d||"",d=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var x in g)d.set(x,g[x]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const k of g.keys())d.set(k,g.get(k));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(d.keys()).find(k=>k.toLowerCase()=="content-type"),x=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(sv,u,void 0)>=0)||g||x||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[k,ee]of d)this.g.setRequestHeader(k,ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(k){Ch(this,k)}};function Ch(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.o=5,Ph(a),ho(a)}function Ph(a){a.A||(a.A=!0,J(a,"complete"),J(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,J(this,"complete"),J(this,"abort"),ho(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ho(this,!0)),Ke.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?xh(this):this.Xa())},t.Xa=function(){xh(this)};function xh(a){if(a.h&&typeof i<"u"){if(a.v&&Jn(a)==4)setTimeout(a.Ca.bind(a),0);else if(J(a,"readystatechange"),Jn(a)==4){a.h=!1;try{const k=a.ca();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var d;if(!(d=u)){var g;if(g=k===0){let ee=String(a.D).match(vh)[1]||null;!ee&&o.self&&o.self.location&&(ee=o.self.location.protocol.slice(0,-1)),g=!nv.test(ee?ee.toLowerCase():"")}d=g}if(d)J(a,"complete"),J(a,"success");else{a.o=6;try{var x=Jn(a)>2?a.g.statusText:""}catch{x=""}a.l=x+" ["+a.ca()+"]",Ph(a)}}finally{ho(a)}}}}function ho(a,u){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const d=a.g;a.g=null,u||J(a,"ready");try{d.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Jn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Jn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),yt(u)}};function kh(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function rv(a){const u={};a=(a.g&&Jn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(E(a[g]))continue;var d=jy(a[g]);const x=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const k=u[x]||[];u[x]=k,k.push(d)}Ot(u,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function li(a,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||u}function Dh(a){this.za=0,this.i=[],this.j=new Xr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=li("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=li("baseRetryDelayMs",5e3,a),this.Za=li("retryDelaySeedMs",1e4,a),this.Ta=li("forwardChannelMaxRetries",2,a),this.va=li("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new ph(a&&a.concurrentRequestLimit),this.Ba=new tv,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Dh.prototype,t.ka=8,t.I=1,t.connect=function(a,u,d,g){Pt(0),this.W=a,this.H=u||{},d&&g!==void 0&&(this.H.OSID=d,this.H.OAID=g),this.F=this.X,this.J=Bh(this,null,this.W),po(this)};function yl(a){if(Nh(a),a.I==3){var u=a.V++,d=dn(a.J);if(qe(d,"SID",a.M),qe(d,"RID",u),qe(d,"TYPE","terminate"),ci(a,d),u=new Kn(a,a.j,u),u.M=2,u.A=co(dn(d)),d=!1,o.navigator&&o.navigator.sendBeacon)try{d=o.navigator.sendBeacon(u.A.toString(),"")}catch{}!d&&o.Image&&(new Image().src=u.A,d=!0),d||(u.g=jh(u.j,null),u.g.ea(u.A)),u.F=Date.now(),lo(u)}$h(a)}function fo(a){a.g&&(wl(a),a.g.cancel(),a.g=null)}function Nh(a){fo(a),a.v&&(o.clearTimeout(a.v),a.v=null),mo(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function po(a){if(!mh(a.h)&&!a.m){a.m=!0;var u=a.Ea;U||_(),q||(U(),q=!0),b.add(u,a),a.D=0}}function iv(a,u){return gh(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=u.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Jr(h(a.Ea,a,u),Uh(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const x=new Kn(this,this.j,a);let k=this.o;if(this.U&&(k?(k=_t(k),Xt(k,this.U)):k=this.U),this.u!==null||this.R||(x.J=k,k=null),this.S)e:{for(var u=0,d=0;d<this.i.length;d++){t:{var g=this.i[d];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(u+=g,u>4096){u=d;break e}if(u===4096||d===this.i.length-1){u=d+1;break e}}u=1e3}else u=1e3;u=Oh(this,x,u),d=dn(this.J),qe(d,"RID",a),qe(d,"CVER",22),this.G&&qe(d,"X-HTTP-Session-Id",this.G),ci(this,d),k&&(this.R?u="headers="+Zr(Sh(k))+"&"+u:this.u&&_l(d,this.u,k)),pl(this.h,x),this.Ra&&qe(d,"TYPE","init"),this.S?(qe(d,"$req",u),qe(d,"SID","null"),x.U=!0,ul(x,d,null)):ul(x,d,u),this.I=2}}else this.I==3&&(a?Vh(this,a):this.i.length==0||mh(this.h)||Vh(this))};function Vh(a,u){var d;u?d=u.l:d=a.V++;const g=dn(a.J);qe(g,"SID",a.M),qe(g,"RID",d),qe(g,"AID",a.K),ci(a,g),a.u&&a.o&&_l(g,a.u,a.o),d=new Kn(a,a.j,d,a.D+1),a.u===null&&(d.J=a.o),u&&(a.i=u.G.concat(a.i)),u=Oh(a,d,1e3),d.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),pl(a.h,d),ul(d,g,u)}function ci(a,u){a.H&&gt(a.H,function(d,g){qe(u,g,d)}),a.l&&gt({},function(d,g){qe(u,g,d)})}function Oh(a,u,d){d=Math.min(a.i.length,d);const g=a.l?h(a.l.Ka,a.l,a):null;e:{var x=a.i;let we=-1;for(;;){const st=["count="+d];we==-1?d>0?(we=x[0].g,st.push("ofs="+we)):we=0:st.push("ofs="+we);let Me=!0;for(let lt=0;lt<d;lt++){var k=x[lt].g;const pn=x[lt].map;if(k-=we,k<0)we=Math.max(0,x[lt].g-100),Me=!1;else try{k="req"+k+"_"||"";try{var ee=pn instanceof Map?pn:Object.entries(pn);for(const[ks,Xn]of ee){let Zn=Xn;l(Xn)&&(Zn=Ce(Xn)),st.push(k+ks+"="+encodeURIComponent(Zn))}}catch(ks){throw st.push(k+"type="+encodeURIComponent("_badmap")),ks}}catch{g&&g(pn)}}if(Me){ee=st.join("&");break e}}ee=void 0}return a=a.i.splice(0,d),u.G=a,ee}function Mh(a){if(!a.g&&!a.v){a.Y=1;var u=a.Da;U||_(),q||(U(),q=!0),b.add(u,a),a.A=0}}function vl(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Jr(h(a.Da,a),Uh(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Lh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Jr(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Pt(10),fo(this),Lh(this))};function wl(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Lh(a){a.g=new Kn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var u=dn(a.na);qe(u,"RID","rpc"),qe(u,"SID",a.M),qe(u,"AID",a.K),qe(u,"CI",a.F?"0":"1"),!a.F&&a.ia&&qe(u,"TO",a.ia),qe(u,"TYPE","xmlhttp"),ci(a,u),a.u&&a.o&&_l(u,a.u,a.o),a.O&&(a.g.H=a.O);var d=a.g;a=a.ba,d.M=1,d.A=co(dn(u)),d.u=null,d.R=!0,hh(d,a)}t.Va=function(){this.C!=null&&(this.C=null,fo(this),vl(this),Pt(19))};function mo(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Fh(a,u){var d=null;if(a.g==u){mo(a),wl(a),a.g=null;var g=2}else if(dl(a.h,u))d=u.G,_h(a.h,u),g=1;else return;if(a.I!=0){if(u.o)if(g==1){d=u.u?u.u.length:0,u=Date.now()-u.F;var x=a.D;g=Ss(),J(g,new oh(g,d)),po(a)}else Mh(a);else if(x=u.m,x==3||x==0&&u.X>0||!(g==1&&iv(a,u)||g==2&&vl(a)))switch(d&&d.length>0&&(u=a.h,u.i=u.i.concat(d)),x){case 1:xs(a,5);break;case 4:xs(a,10);break;case 3:xs(a,6);break;default:xs(a,2)}}}function Uh(a,u){let d=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(d*=2),d*u}function xs(a,u){if(a.j.info("Error code "+u),u==2){var d=h(a.bb,a),g=a.Ua;const x=!g;g=new Qn(g||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ti(g,"https"),co(g),x?Zy(g.toString(),d):ev(g.toString(),d)}else Pt(2);a.I=0,a.l&&a.l.pa(u),$h(a),Nh(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function $h(a){if(a.I=0,a.ja=[],a.l){const u=yh(a.h);(u.length!=0||a.i.length!=0)&&(D(a.ja,u),D(a.ja,a.i),a.h.i.length=0,w(a.i),a.i.length=0),a.l.oa()}}function Bh(a,u,d){var g=d instanceof Qn?dn(d):new Qn(d);if(g.g!="")u&&(g.g=u+"."+g.g),ni(g,g.u);else{var x=o.location;g=x.protocol,u=u?u+"."+x.hostname:x.hostname,x=+x.port;const k=new Qn(null);g&&ti(k,g),u&&(k.g=u),x&&ni(k,x),d&&(k.h=d),g=k}return d=a.G,u=a.wa,d&&u&&qe(g,d,u),qe(g,"VER",a.ka),ci(a,g),g}function jh(a,u,d){if(u&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Aa&&!a.ma?new Ke(new gl({ab:d})):new Ke(a.ma),u.Fa(a.L),u}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function qh(){}t=qh.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function go(){}go.prototype.g=function(a,u){return new Bt(a,u)};function Bt(a,u){X.call(this),this.g=new Dh(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.sa&&(a?a["X-WebChannel-Client-Profile"]=u.sa:a={"X-WebChannel-Client-Profile":u.sa}),this.g.U=a,(a=u&&u.Qb)&&!E(a)&&(this.g.u=a),this.A=u&&u.supportsCrossDomainXhr||!1,this.v=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!E(u)&&(this.g.G=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new ar(this)}p(Bt,X),Bt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){yl(this.g)},Bt.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.v&&(d={},d.__data__=Ce(a),a=d);u.i.push(new zy(u.Ya++,a)),u.I==3&&po(u)},Bt.prototype.N=function(){this.g.l=null,delete this.j,yl(this.g),delete this.g,Bt.Z.N.call(this)};function Hh(a){rr.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){e:{for(const d in u){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}p(Hh,rr);function zh(){ht.call(this),this.status=1}p(zh,ht);function ar(a){this.g=a}p(ar,qh),ar.prototype.ra=function(){J(this.g,"a")},ar.prototype.qa=function(a){J(this.g,new Hh(a))},ar.prototype.pa=function(a){J(this.g,new zh)},ar.prototype.oa=function(){J(this.g,"b")},go.prototype.createWebChannel=go.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,u_=function(){return new go},c_=function(){return Ss()},l_=at,Ic={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ao.NO_ERROR=0,ao.TIMEOUT=8,ao.HTTP_ERROR=6,Lo=ao,ah.COMPLETE="complete",a_=ah,$t.EventType=Zt,Zt.OPEN="a",Zt.CLOSE="b",Zt.ERROR="c",Zt.MESSAGE="d",X.prototype.listen=X.prototype.J,pi=$t,Ke.prototype.listenOnce=Ke.prototype.K,Ke.prototype.getLastError=Ke.prototype.Ha,Ke.prototype.getLastErrorCode=Ke.prototype.ya,Ke.prototype.getStatus=Ke.prototype.ca,Ke.prototype.getResponseJson=Ke.prototype.La,Ke.prototype.getResponseText=Ke.prototype.la,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Fa,o_=Ke}).apply(typeof To<"u"?To:typeof self<"u"?self:typeof window<"u"?window:{});const Rd="@firebase/firestore",Sd="4.9.2";class Et{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");let Hr="12.3.0";const Qs=new Ua("@firebase/firestore");function dr(){return Qs.logLevel}function ie(t,...e){if(Qs.logLevel<=be.DEBUG){const n=e.map(Au);Qs.debug(`Firestore (${Hr}): ${t}`,...n)}}function zn(t,...e){if(Qs.logLevel<=be.ERROR){const n=e.map(Au);Qs.error(`Firestore (${Hr}): ${t}`,...n)}}function Or(t,...e){if(Qs.logLevel<=be.WARN){const n=e.map(Au);Qs.warn(`Firestore (${Hr}): ${t}`,...n)}}function Au(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function fe(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,h_(t,s,n)}function h_(t,e,n){let s=`FIRESTORE (${Hr}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw zn(s),new Error(s)}function Ve(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||h_(e,r,s)}function ge(t,e){return t}const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends fn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ps{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class f_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class K1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Et.UNAUTHENTICATED))}shutdown(){}}class Q1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Y1{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ve(this.o===void 0,42304);let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new ps;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ps,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},l=c=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ps)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ve(typeof s.accessToken=="string",31837,{l:s}),new f_(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ve(e===null||typeof e=="string",2055,{h:e}),new Et(e)}}class J1{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class X1{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new J1(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Cd{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Z1{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,en(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ve(this.o===void 0,3512);const s=i=>{i.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Cd(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Cd(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function eR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}class Ru{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=eR(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Ae(t,e){return t<e?-1:t>e?1:0}function bc(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return Wl(r)===Wl(i)?Ae(r,i):Wl(r)?1:-1}return Ae(t.length,e.length)}const tR=55296,nR=57343;function Wl(t){const e=t.charCodeAt(0);return e>=tR&&e<=nR}function Mr(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}const Pd="__name__";class _n{constructor(e,n,s){n===void 0?n=0:n>e.length&&fe(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&fe(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return _n.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _n?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=_n.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Ae(e.length,n.length)}static compareSegments(e,n){const s=_n.isNumericId(e),r=_n.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?_n.extractNumericId(e).compare(_n.extractNumericId(n)):bc(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ds.fromString(e.substring(4,e.length-2))}}class Be extends _n{construct(e,n,s){return new Be(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new oe(z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const sR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends _n{construct(e,n,s){return new dt(e,n,s)}static isValidIdentifier(e){return sR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Pd}static keyField(){return new dt([Pd])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new oe(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new oe(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new oe(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(s+=l,r++):(i(),r++)}if(i(),o)throw new oe(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(n)}static emptyPath(){return new dt([])}}class le{constructor(e){this.path=e}static fromPath(e){return new le(Be.fromString(e))}static fromName(e){return new le(Be.fromString(e).popFirst(5))}static empty(){return new le(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new Be(e.slice()))}}function d_(t,e,n){if(!n)throw new oe(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function rR(t,e,n,s){if(e===!0&&s===!0)throw new oe(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function xd(t){if(!le.isDocumentKey(t))throw new oe(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function kd(t){if(le.isDocumentKey(t))throw new oe(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function p_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ga(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe(12329,{type:typeof t})}function Ui(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new oe(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ga(t);throw new oe(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Ze(t,e){const n={typeString:t};return e&&(n.value=e),n}function eo(t,e){if(!p_(t))throw new oe(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new oe(z.INVALID_ARGUMENT,n);return!0}const Dd=-62135596800,Nd=1e6;class He{static now(){return He.fromMillis(Date.now())}static fromDate(e){return He.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Nd);return new He(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new oe(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new oe(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Dd)throw new oe(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Nd}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:He._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(eo(e,He._jsonSchema))return new He(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Dd;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}He._jsonSchemaVersion="firestore/timestamp/1.0",He._jsonSchema={type:Ze("string",He._jsonSchemaVersion),seconds:Ze("number"),nanoseconds:Ze("number")};class me{static fromTimestamp(e){return new me(e)}static min(){return new me(new He(0,0))}static max(){return new me(new He(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const $i=-1;function iR(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=me.fromTimestamp(s===1e9?new He(n+1,0):new He(n,s));return new ws(r,le.empty(),e)}function oR(t){return new ws(t.readTime,t.key,$i)}class ws{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ws(me.min(),le.empty(),$i)}static max(){return new ws(me.max(),le.empty(),$i)}}function aR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=le.comparator(t.documentKey,e.documentKey),n!==0?n:Ae(t.largestBatchId,e.largestBatchId))}const lR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function zr(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==lR)throw t;ie("LocalStore","Unexpectedly lost primary lease")}class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,s)=>{n(e)})}static reject(e){return new G((n,s)=>{s(e)})}static waitFor(e){return new G((n,s)=>{let r=0,i=0,o=!1;e.forEach(l=>{++r,l.next(()=>{++i,o&&i===r&&n()},c=>s(c))}),o=!0,i===r&&n()})}static or(e){let n=G.resolve(!1);for(const s of e)n=n.next(r=>r?G.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new G((s,r)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next(f=>{o[h]=f,++l,l===i&&s(o)},f=>r(f))}})}static doWhile(e,n){return new G((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function uR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Gr(t){return t.name==="IndexedDbTransactionError"}class Wa{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Wa.ce=-1;const Su=-1;function Ka(t){return t==null}function ca(t){return t===0&&1/t==-1/0}function hR(t){return typeof t=="number"&&Number.isInteger(t)&&!ca(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const m_="";function fR(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Vd(e)),e=dR(t.get(n),e);return Vd(e)}function dR(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case m_:n+="";break;default:n+=i}}return n}function Vd(t){return t+m_+""}function Od(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function er(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function g_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Ge{constructor(e,n){this.comparator=e,this.root=n||ft.EMPTY}insert(e,n){return new Ge(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ft.BLACK,null,null))}remove(e){return new Ge(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ft.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Io(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Io(this.root,e,this.comparator,!1)}getReverseIterator(){return new Io(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Io(this.root,e,this.comparator,!0)}}class Io{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ft{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??ft.RED,this.left=r??ft.EMPTY,this.right=i??ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new ft(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return ft.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fe(27949);return e+(this.isRed()?0:1)}}ft.EMPTY=null,ft.RED=!0,ft.BLACK=!1;ft.EMPTY=new class{constructor(){this.size=0}get key(){throw fe(57766)}get value(){throw fe(16141)}get color(){throw fe(16727)}get left(){throw fe(29726)}get right(){throw fe(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new ft(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ot{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Md(this.data.getIterator())}getIteratorFrom(e){return new Md(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof ot)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ot(this.comparator);return n.data=e,n}}class Md{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class rn{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new rn([])}unionWith(e){let n=new ot(dt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Mr(this.fields,e.fields,(n,s)=>n.isEqual(s))}}class __ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class mt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new __("Invalid base64 string: "+i):i}}(e);return new mt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new mt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mt.EMPTY_BYTE_STRING=new mt("");const pR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Es(t){if(Ve(!!t,39018),typeof t=="string"){let e=0;const n=pR.exec(t);if(Ve(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ye(t.seconds),nanos:Ye(t.nanos)}}function Ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ts(t){return typeof t=="string"?mt.fromBase64String(t):mt.fromUint8Array(t)}const y_="server_timestamp",v_="__type__",w_="__previous_value__",E_="__local_write_time__";function Cu(t){return(t?.mapValue?.fields||{})[v_]?.stringValue===y_}function Qa(t){const e=t.mapValue.fields[w_];return Cu(e)?Qa(e):e}function Bi(t){const e=Es(t.mapValue.fields[E_].timestampValue);return new He(e.seconds,e.nanos)}class mR{constructor(e,n,s,r,i,o,l,c,h,f){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=f}}const ua="(default)";class ji{constructor(e,n){this.projectId=e,this.database=n||ua}static empty(){return new ji("","")}get isDefaultDatabase(){return this.database===ua}isEqual(e){return e instanceof ji&&e.projectId===this.projectId&&e.database===this.database}}const T_="__type__",gR="__max__",bo={mapValue:{}},I_="__vector__",ha="value";function Is(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cu(t)?4:yR(t)?9007199254740991:_R(t)?10:11:fe(28295,{value:t})}function kn(t,e){if(t===e)return!0;const n=Is(t);if(n!==Is(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Bi(t).isEqual(Bi(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Es(r.timestampValue),l=Es(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Ts(r.bytesValue).isEqual(Ts(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Ye(r.geoPointValue.latitude)===Ye(i.geoPointValue.latitude)&&Ye(r.geoPointValue.longitude)===Ye(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Ye(r.integerValue)===Ye(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Ye(r.doubleValue),l=Ye(i.doubleValue);return o===l?ca(o)===ca(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Mr(t.arrayValue.values||[],e.arrayValue.values||[],kn);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Od(o)!==Od(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!kn(o[c],l[c])))return!1;return!0}(t,e);default:return fe(52216,{left:t})}}function qi(t,e){return(t.values||[]).find(n=>kn(n,e))!==void 0}function Lr(t,e){if(t===e)return 0;const n=Is(t),s=Is(e);if(n!==s)return Ae(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Ye(i.integerValue||i.doubleValue),c=Ye(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Ld(t.timestampValue,e.timestampValue);case 4:return Ld(Bi(t),Bi(e));case 5:return bc(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Ts(i),c=Ts(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let h=0;h<l.length&&h<c.length;h++){const f=Ae(l[h],c[h]);if(f!==0)return f}return Ae(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Ae(Ye(i.latitude),Ye(o.latitude));return l!==0?l:Ae(Ye(i.longitude),Ye(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Fd(t.arrayValue,e.arrayValue);case 10:return function(i,o){const l=i.fields||{},c=o.fields||{},h=l[ha]?.arrayValue,f=c[ha]?.arrayValue,p=Ae(h?.values?.length||0,f?.values?.length||0);return p!==0?p:Fd(h,f)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===bo.mapValue&&o===bo.mapValue)return 0;if(i===bo.mapValue)return 1;if(o===bo.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),h=o.fields||{},f=Object.keys(h);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const m=bc(c[p],f[p]);if(m!==0)return m;const w=Lr(l[c[p]],h[f[p]]);if(w!==0)return w}return Ae(c.length,f.length)}(t.mapValue,e.mapValue);default:throw fe(23264,{he:n})}}function Ld(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ae(t,e);const n=Es(t),s=Es(e),r=Ae(n.seconds,s.seconds);return r!==0?r:Ae(n.nanos,s.nanos)}function Fd(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=Lr(n[r],s[r]);if(i)return i}return Ae(n.length,s.length)}function Fr(t){return Ac(t)}function Ac(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=Es(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ts(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return le.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=Ac(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${Ac(n.fields[o])}`;return r+"}"}(t.mapValue):fe(61005,{value:t})}function Fo(t){switch(Is(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qa(t);return e?16+Fo(e):16;case 5:return 2*t.stringValue.length;case 6:return Ts(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+Fo(i),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return er(s.fields,(i,o)=>{r+=i.length+Fo(o)}),r}(t.mapValue);default:throw fe(13486,{value:t})}}function Ud(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Rc(t){return!!t&&"integerValue"in t}function Pu(t){return!!t&&"arrayValue"in t}function $d(t){return!!t&&"nullValue"in t}function Bd(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Uo(t){return!!t&&"mapValue"in t}function _R(t){return(t?.mapValue?.fields||{})[T_]?.stringValue===I_}function Si(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return er(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Si(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Si(t.arrayValue.values[n]);return e}return{...t}}function yR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===gR}class Wt{constructor(e){this.value=e}static empty(){return new Wt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Uo(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Si(n)}setAll(e){let n=dt.emptyPath(),s={},r=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=l.popLast()}o?s[l.lastSegment()]=Si(o):r.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());Uo(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];Uo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){er(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Wt(Si(this.value))}}function b_(t){const e=[];return er(t.fields,(n,s)=>{const r=new dt([n]);if(Uo(s)){const i=b_(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new rn(e)}class It{constructor(e,n,s,r,i,o,l){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new It(e,0,me.min(),me.min(),me.min(),Wt.empty(),0)}static newFoundDocument(e,n,s,r){return new It(e,1,n,me.min(),s,r,0)}static newNoDocument(e,n){return new It(e,2,n,me.min(),me.min(),Wt.empty(),0)}static newUnknownDocument(e,n){return new It(e,3,n,me.min(),me.min(),Wt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof It&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new It(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class fa{constructor(e,n){this.position=e,this.inclusive=n}}function jd(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=le.comparator(le.fromName(o.referenceValue),n.key):s=Lr(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function qd(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kn(t.position[n],e.position[n]))return!1;return!0}class da{constructor(e,n="asc"){this.field=e,this.dir=n}}function vR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class A_{}class Xe extends A_{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new ER(e,n,s):n==="array-contains"?new bR(e,s):n==="in"?new AR(e,s):n==="not-in"?new RR(e,s):n==="array-contains-any"?new SR(e,s):new Xe(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new TR(e,s):new IR(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Lr(n,this.value)):n!==null&&Is(this.value)===Is(n)&&this.matchesComparison(Lr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hn extends A_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new hn(e,n)}matches(e){return R_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function R_(t){return t.op==="and"}function S_(t){return wR(t)&&R_(t)}function wR(t){for(const e of t.filters)if(e instanceof hn)return!1;return!0}function Sc(t){if(t instanceof Xe)return t.field.canonicalString()+t.op.toString()+Fr(t.value);if(S_(t))return t.filters.map(e=>Sc(e)).join(",");{const e=t.filters.map(n=>Sc(n)).join(",");return`${t.op}(${e})`}}function C_(t,e){return t instanceof Xe?function(s,r){return r instanceof Xe&&s.op===r.op&&s.field.isEqual(r.field)&&kn(s.value,r.value)}(t,e):t instanceof hn?function(s,r){return r instanceof hn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,l)=>i&&C_(o,r.filters[l]),!0):!1}(t,e):void fe(19439)}function P_(t){return t instanceof Xe?function(n){return`${n.field.canonicalString()} ${n.op} ${Fr(n.value)}`}(t):t instanceof hn?function(n){return n.op.toString()+" {"+n.getFilters().map(P_).join(" ,")+"}"}(t):"Filter"}class ER extends Xe{constructor(e,n,s){super(e,n,s),this.key=le.fromName(s.referenceValue)}matches(e){const n=le.comparator(e.key,this.key);return this.matchesComparison(n)}}class TR extends Xe{constructor(e,n){super(e,"in",n),this.keys=x_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class IR extends Xe{constructor(e,n){super(e,"not-in",n),this.keys=x_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function x_(t,e){return(e.arrayValue?.values||[]).map(n=>le.fromName(n.referenceValue))}class bR extends Xe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Pu(n)&&qi(n.arrayValue,this.value)}}class AR extends Xe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qi(this.value.arrayValue,n)}}class RR extends Xe{constructor(e,n){super(e,"not-in",n)}matches(e){if(qi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!qi(this.value.arrayValue,n)}}class SR extends Xe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Pu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>qi(this.value.arrayValue,s))}}class CR{constructor(e,n=null,s=[],r=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function Hd(t,e=null,n=[],s=[],r=null,i=null,o=null){return new CR(t,e,n,s,r,i,o)}function xu(t){const e=ge(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Sc(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),Ka(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Fr(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Fr(s)).join(",")),e.Te=n}return e.Te}function ku(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!C_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qd(t.startAt,e.startAt)&&qd(t.endAt,e.endAt)}function Cc(t){return le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class to{constructor(e,n=null,s=[],r=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function PR(t,e,n,s,r,i,o,l){return new to(t,e,n,s,r,i,o,l)}function k_(t){return new to(t)}function zd(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function D_(t){return t.collectionGroup!==null}function Ci(t){const e=ge(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ot(dt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new da(i,s))}),n.has(dt.keyField().canonicalString())||e.Ie.push(new da(dt.keyField(),s))}return e.Ie}function Tn(t){const e=ge(t);return e.Ee||(e.Ee=xR(e,Ci(t))),e.Ee}function xR(t,e){if(t.limitType==="F")return Hd(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new da(r.field,i)});const n=t.endAt?new fa(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new fa(t.startAt.position,t.startAt.inclusive):null;return Hd(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Pc(t,e){const n=t.filters.concat([e]);return new to(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function xc(t,e,n){return new to(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ya(t,e){return ku(Tn(t),Tn(e))&&t.limitType===e.limitType}function N_(t){return`${xu(Tn(t))}|lt:${t.limitType}`}function pr(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>P_(r)).join(", ")}]`),Ka(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>Fr(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>Fr(r)).join(",")),`Target(${s})`}(Tn(t))}; limitType=${t.limitType})`}function Ja(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):le.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of Ci(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(o,l,c){const h=jd(o,l,c);return o.inclusive?h<=0:h<0}(s.startAt,Ci(s),r)||s.endAt&&!function(o,l,c){const h=jd(o,l,c);return o.inclusive?h>=0:h>0}(s.endAt,Ci(s),r))}(t,e)}function kR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function V_(t){return(e,n)=>{let s=!1;for(const r of Ci(t)){const i=DR(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function DR(t,e,n){const s=t.field.isKeyField()?le.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),h=l.data.field(i);return c!==null&&h!==null?Lr(c,h):fe(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return fe(19790,{direction:t.dir})}}class tr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){er(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return g_(this.inner)}size(){return this.innerSize}}const NR=new Ge(le.comparator);function Gn(){return NR}const O_=new Ge(le.comparator);function mi(...t){let e=O_;for(const n of t)e=e.insert(n.key,n);return e}function M_(t){let e=O_;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function $s(){return Pi()}function L_(){return Pi()}function Pi(){return new tr(t=>t.toString(),(t,e)=>t.isEqual(e))}const VR=new Ge(le.comparator),OR=new ot(le.comparator);function Re(...t){let e=OR;for(const n of t)e=e.add(n);return e}const MR=new ot(Ae);function LR(){return MR}function Du(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ca(e)?"-0":e}}function F_(t){return{integerValue:""+t}}function FR(t,e){return hR(e)?F_(e):Du(t,e)}class Xa{constructor(){this._=void 0}}function UR(t,e,n){return t instanceof pa?function(r,i){const o={fields:{[v_]:{stringValue:y_},[E_]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Cu(i)&&(i=Qa(i)),i&&(o.fields[w_]=i),{mapValue:o}}(n,e):t instanceof Hi?$_(t,e):t instanceof zi?B_(t,e):function(r,i){const o=U_(r,i),l=Gd(o)+Gd(r.Ae);return Rc(o)&&Rc(r.Ae)?F_(l):Du(r.serializer,l)}(t,e)}function $R(t,e,n){return t instanceof Hi?$_(t,e):t instanceof zi?B_(t,e):n}function U_(t,e){return t instanceof ma?function(s){return Rc(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class pa extends Xa{}class Hi extends Xa{constructor(e){super(),this.elements=e}}function $_(t,e){const n=j_(e);for(const s of t.elements)n.some(r=>kn(r,s))||n.push(s);return{arrayValue:{values:n}}}class zi extends Xa{constructor(e){super(),this.elements=e}}function B_(t,e){let n=j_(e);for(const s of t.elements)n=n.filter(r=>!kn(r,s));return{arrayValue:{values:n}}}class ma extends Xa{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Gd(t){return Ye(t.integerValue||t.doubleValue)}function j_(t){return Pu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function BR(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof Hi&&r instanceof Hi||s instanceof zi&&r instanceof zi?Mr(s.elements,r.elements,kn):s instanceof ma&&r instanceof ma?kn(s.Ae,r.Ae):s instanceof pa&&r instanceof pa}(t.transform,e.transform)}class jR{constructor(e,n){this.version=e,this.transformResults=n}}class In{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new In}static exists(e){return new In(void 0,e)}static updateTime(e){return new In(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $o(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Za{}function q_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Nu(t.key,In.none()):new no(t.key,t.data,In.none());{const n=t.data,s=Wt.empty();let r=new ot(dt.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new nr(t.key,s,new rn(r.toArray()),In.none())}}function qR(t,e,n){t instanceof no?function(r,i,o){const l=r.value.clone(),c=Kd(r.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof nr?function(r,i,o){if(!$o(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Kd(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(H_(r)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function xi(t,e,n,s){return t instanceof no?function(i,o,l,c){if(!$o(i.precondition,o))return l;const h=i.value.clone(),f=Qd(i.fieldTransforms,c,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,s):t instanceof nr?function(i,o,l,c){if(!$o(i.precondition,o))return l;const h=Qd(i.fieldTransforms,c,o),f=o.data;return f.setAll(H_(i)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,s):function(i,o,l){return $o(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function HR(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=U_(s.transform,r||null);i!=null&&(n===null&&(n=Wt.empty()),n.set(s.field,i))}return n||null}function Wd(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Mr(s,r,(i,o)=>BR(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class no extends Za{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class nr extends Za{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function H_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function Kd(t,e,n){const s=new Map;Ve(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,l=e.data.field(i.field);s.set(i.field,$R(o,l,n[r]))}return s}function Qd(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,UR(i,o,e))}return s}class Nu extends Za{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zR extends Za{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class GR{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&qR(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=xi(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=xi(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=L_();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(r.key)?null:l;const c=q_(o,l);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(me.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Re())}isEqual(e){return this.batchId===e.batchId&&Mr(this.mutations,e.mutations,(n,s)=>Wd(n,s))&&Mr(this.baseMutations,e.baseMutations,(n,s)=>Wd(n,s))}}class Vu{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){Ve(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=function(){return VR}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Vu(e,n,s,r)}}class WR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class KR{constructor(e,n){this.count=e,this.unchangedNames=n}}var Je,Se;function QR(t){switch(t){case z.OK:return fe(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return fe(15467,{code:t})}}function z_(t){if(t===void 0)return zn("GRPC error has no .code"),z.UNKNOWN;switch(t){case Je.OK:return z.OK;case Je.CANCELLED:return z.CANCELLED;case Je.UNKNOWN:return z.UNKNOWN;case Je.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case Je.INTERNAL:return z.INTERNAL;case Je.UNAVAILABLE:return z.UNAVAILABLE;case Je.UNAUTHENTICATED:return z.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case Je.NOT_FOUND:return z.NOT_FOUND;case Je.ALREADY_EXISTS:return z.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return z.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case Je.ABORTED:return z.ABORTED;case Je.OUT_OF_RANGE:return z.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return z.UNIMPLEMENTED;case Je.DATA_LOSS:return z.DATA_LOSS;default:return fe(39323,{code:t})}}(Se=Je||(Je={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";function YR(){return new TextEncoder}const JR=new ds([4294967295,4294967295],0);function Yd(t){const e=YR().encode(t),n=new i_;return n.update(e),new Uint8Array(n.digest())}function Jd(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ds([n,s],0),new ds([r,i],0)]}class Ou{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new gi(`Invalid padding: ${n}`);if(s<0)throw new gi(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new gi(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new gi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ds.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(ds.fromNumber(s)));return r.compare(JR)===1&&(r=new ds([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Yd(e),[s,r]=Jd(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Ou(i,r,n);return s.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=Yd(e),[s,r]=Jd(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class gi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class el{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,so.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new el(me.min(),r,new Ge(Ae),Gn(),Re())}}class so{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new so(s,n,Re(),Re(),Re())}}class Bo{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class G_{constructor(e,n){this.targetId=e,this.Ce=n}}class W_{constructor(e,n,s=mt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Xd{constructor(){this.ve=0,this.Fe=Zd(),this.Me=mt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Re(),n=Re(),s=Re();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:fe(38017,{changeType:i})}}),new so(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Zd()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ve(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class XR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Gn(),this.Je=Ao(),this.He=Ao(),this.Ye=new Ge(Ae)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:fe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(Cc(i))if(s===0){const o=new le(i.path);this.et(n,o,It.newNoDocument(o,me.min()))}else Ve(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,l;try{o=Ts(s).toUint8Array()}catch(c){if(c instanceof __)return Or("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Ou(o,r,i)}catch(c){return Or(c instanceof gi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Cc(l.target)){const c=new le(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,It.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let s=Re();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const h=this.ot(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const r=new el(e,n,this.Ye,this.je,s);return this.je=Gn(),this.Je=Ao(),this.He=Ao(),this.Ye=new Ge(Ae),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Xd,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ot(Ae),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ot(Ae),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Xd),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ao(){return new Ge(le.comparator)}function Zd(){return new Ge(le.comparator)}const ZR={asc:"ASCENDING",desc:"DESCENDING"},eS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tS={and:"AND",or:"OR"};class nS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function kc(t,e){return t.useProto3Json||Ka(e)?e:{value:e}}function ga(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function K_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function sS(t,e){return ga(t,e.toTimestamp())}function bn(t){return Ve(!!t,49232),me.fromTimestamp(function(n){const s=Es(n);return new He(s.seconds,s.nanos)}(t))}function Mu(t,e){return Dc(t,e).canonicalString()}function Dc(t,e){const n=function(r){return new Be(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Q_(t){const e=Be.fromString(t);return Ve(ey(e),10190,{key:e.toString()}),e}function Nc(t,e){return Mu(t.databaseId,e.path)}function Kl(t,e){const n=Q_(e);if(n.get(1)!==t.databaseId.projectId)throw new oe(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new oe(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new le(J_(n))}function Y_(t,e){return Mu(t.databaseId,e)}function rS(t){const e=Q_(t);return e.length===4?Be.emptyPath():J_(e)}function Vc(t){return new Be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function J_(t){return Ve(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function ep(t,e,n){return{name:Nc(t,e),fields:n.value.mapValue.fields}}function iS(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:fe(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(h,f){return h.useProto3Json?(Ve(f===void 0||typeof f=="string",58123),mt.fromBase64String(f||"")):(Ve(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),mt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const f=h.code===void 0?z.UNKNOWN:z_(h.code);return new oe(f,h.message||"")}(o);n=new W_(s,r,i,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Kl(t,s.document.name),i=bn(s.document.updateTime),o=s.document.createTime?bn(s.document.createTime):me.min(),l=new Wt({mapValue:{fields:s.document.fields}}),c=It.newFoundDocument(r,i,o,l),h=s.targetIds||[],f=s.removedTargetIds||[];n=new Bo(h,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Kl(t,s.document),i=s.readTime?bn(s.readTime):me.min(),o=It.newNoDocument(r,i),l=s.removedTargetIds||[];n=new Bo([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Kl(t,s.document),i=s.removedTargetIds||[];n=new Bo([],i,r,null)}else{if(!("filter"in e))return fe(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new KR(r,i),l=s.targetId;n=new G_(l,o)}}return n}function oS(t,e){let n;if(e instanceof no)n={update:ep(t,e.key,e.value)};else if(e instanceof Nu)n={delete:Nc(t,e.key)};else if(e instanceof nr)n={update:ep(t,e.key,e.data),updateMask:mS(e.fieldMask)};else{if(!(e instanceof zR))return fe(16599,{Vt:e.type});n={verify:Nc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const l=o.transform;if(l instanceof pa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Hi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof zi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ma)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw fe(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:sS(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:fe(27497)}(t,e.precondition)),n}function aS(t,e){return t&&t.length>0?(Ve(e!==void 0,14353),t.map(n=>function(r,i){let o=r.updateTime?bn(r.updateTime):bn(i);return o.isEqual(me.min())&&(o=bn(i)),new jR(o,r.transformResults||[])}(n,e))):[]}function lS(t,e){return{documents:[Y_(t,e.path)]}}function cS(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Y_(t,r);const i=function(h){if(h.length!==0)return Z_(hn.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(f=>function(m){return{field:mr(m.field),direction:fS(m.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=kc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:r}}function uS(t){let e=rS(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Ve(s===1,65062);const f=n.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(p){const m=X_(p);return m instanceof hn&&S_(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(D){return new da(gr(D.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,Ka(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(p){const m=!!p.before,w=p.values||[];return new fa(w,m)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const m=!p.before,w=p.values||[];return new fa(w,m)}(n.endAt)),PR(e,r,o,i,l,"F",c,h)}function hS(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function X_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=gr(n.unaryFilter.field);return Xe.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=gr(n.unaryFilter.field);return Xe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=gr(n.unaryFilter.field);return Xe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=gr(n.unaryFilter.field);return Xe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fe(61313);default:return fe(60726)}}(t):t.fieldFilter!==void 0?function(n){return Xe.create(gr(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fe(58110);default:return fe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return hn.create(n.compositeFilter.filters.map(s=>X_(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return fe(1026)}}(n.compositeFilter.op))}(t):fe(30097,{filter:t})}function fS(t){return ZR[t]}function dS(t){return eS[t]}function pS(t){return tS[t]}function mr(t){return{fieldPath:t.canonicalString()}}function gr(t){return dt.fromServerFormat(t.fieldPath)}function Z_(t){return t instanceof Xe?function(n){if(n.op==="=="){if(Bd(n.value))return{unaryFilter:{field:mr(n.field),op:"IS_NAN"}};if($d(n.value))return{unaryFilter:{field:mr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Bd(n.value))return{unaryFilter:{field:mr(n.field),op:"IS_NOT_NAN"}};if($d(n.value))return{unaryFilter:{field:mr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mr(n.field),op:dS(n.op),value:n.value}}}(t):t instanceof hn?function(n){const s=n.getFilters().map(r=>Z_(r));return s.length===1?s[0]:{compositeFilter:{op:pS(n.op),filters:s}}}(t):fe(54877,{filter:t})}function mS(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ey(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class cs{constructor(e,n,s,r,i=me.min(),o=me.min(),l=mt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class gS{constructor(e){this.yt=e}}function _S(t){const e=uS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?xc(e,e.limit,"L"):e}class yS{constructor(){this.Cn=new vS}addToCollectionParentIndex(e,n){return this.Cn.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(ws.min())}updateCollectionGroup(e,n,s){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class vS{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new ot(Be.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new ot(Be.comparator)).toArray()}}const tp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ty=41943040;class Lt{static withCacheSize(e){return new Lt(e,Lt.DEFAULT_COLLECTION_PERCENTILE,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Lt.DEFAULT_COLLECTION_PERCENTILE=10,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lt.DEFAULT=new Lt(ty,Lt.DEFAULT_COLLECTION_PERCENTILE,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lt.DISABLED=new Lt(-1,0,0);class Ur{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ur(0)}static cr(){return new Ur(-1)}}const np="LruGarbageCollector",wS=1048576;function sp([t,e],[n,s]){const r=Ae(t,n);return r===0?Ae(e,s):r}class ES{constructor(e){this.Ir=e,this.buffer=new ot(sp),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();sp(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class TS{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ie(np,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Gr(n)?ie(np,"Ignoring IndexedDB error during garbage collection: ",n):await zr(n)}await this.Vr(3e5)})}}class IS{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return G.resolve(Wa.ce);const s=new ES(n);return this.mr.forEachTarget(e,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(tp)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tp):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,l,c,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,o=Date.now(),this.nthSequenceNumber(e,r))).next(p=>(s=p,l=Date.now(),this.removeTargets(e,s,n))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,s))).next(p=>(h=Date.now(),dr()<=be.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${r} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(h-c)+`ms
Total Duration: ${h-f}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:p})))}}function bS(t,e){return new IS(t,e)}class AS{constructor(){this.changes=new tr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,It.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?G.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class RS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class SS{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&xi(s.mutation,r,rn.empty(),He.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Re()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Re()){const r=$s();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=mi();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=$s();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Re()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,s,r){let i=Gn();const o=Pi(),l=function(){return Pi()}();return n.forEach((c,h)=>{const f=s.get(h.key);r.has(h.key)&&(f===void 0||f.mutation instanceof nr)?i=i.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),xi(f.mutation,h,f.mutation.getFieldMask(),He.now())):o.set(h.key,rn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((h,f)=>o.set(h,f)),n.forEach((h,f)=>l.set(h,new RS(f,o.get(h)??null))),l))}recalculateAndSaveOverlays(e,n){const s=Pi();let r=new Ge((o,l)=>o-l),i=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let f=s.get(c)||rn.empty();f=l.applyToLocalView(h,f),s.set(c,f);const p=(r.get(l.batchId)||Re()).add(c);r=r.insert(l.batchId,p)})}).next(()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,f=c.value,p=L_();f.forEach(m=>{if(!i.has(m)){const w=q_(n.get(m),s.get(m));w!==null&&p.set(m,w),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return G.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(o){return le.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):D_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):G.resolve($s());let l=$i,c=i;return o.next(h=>G.forEach(h,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(f)?G.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{c=c.insert(f,m)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,c,h,Re())).next(f=>({batchId:l,changes:M_(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next(s=>{let r=mi();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=mi();return this.indexManager.getCollectionParents(e,i).next(l=>G.forEach(l,c=>{const h=function(p,m){return new to(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,s,r).next(f=>{f.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((c,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,It.newInvalidDocument(f)))});let l=mi();return o.forEach((c,h)=>{const f=i.get(c);f!==void 0&&xi(f.mutation,h,rn.empty(),He.now()),Ja(n,h)&&(l=l.insert(c,h))}),l})}}class CS{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return G.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:bn(r.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:_S(r.bundledQuery),readTime:bn(r.readTime)}}(n)),G.resolve()}}class PS{constructor(){this.overlays=new Ge(le.comparator),this.qr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const s=$s();return G.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),G.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),G.resolve()}getOverlaysForCollection(e,n,s){const r=$s(),i=n.length+1,o=new le(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return G.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Ge((h,f)=>h-f);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>s){let f=i.get(h.largestBatchId);f===null&&(f=$s(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=$s(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=r)););return G.resolve(l)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new WR(n,s));let i=this.qr.get(n);i===void 0&&(i=Re(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}class xS{constructor(){this.sessionToken=mt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}class Lu{constructor(){this.Qr=new ot(ct.$r),this.Ur=new ot(ct.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new ct(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new ct(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new le(new Be([])),s=new ct(n,e),r=new ct(n,e+1),i=[];return this.Ur.forEachInRange([s,r],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new le(new Be([])),s=new ct(n,e),r=new ct(n,e+1);let i=Re();return this.Ur.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ct(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class ct{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return le.comparator(e.key,n.key)||Ae(e.Yr,n.Yr)}static Kr(e,n){return Ae(e.Yr,n.Yr)||le.comparator(e.key,n.key)}}class kS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ot(ct.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new GR(i,n,s,r);this.mutationQueue.push(o);for(const l of r)this.Zr=this.Zr.add(new ct(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,n){return G.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return G.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?Su:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new ct(n,0),r=new ct(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],o=>{const l=this.Xr(o.Yr);i.push(l)}),G.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new ot(Ae);return n.forEach(r=>{const i=new ct(r,0),o=new ct(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{s=s.add(l.Yr)})}),G.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;le.isDocumentKey(i)||(i=i.child(""));const o=new ct(new le(i),0);let l=new ot(Ae);return this.Zr.forEachWhile(c=>{const h=c.key.path;return!!s.isPrefixOf(h)&&(h.length===r&&(l=l.add(c.Yr)),!0)},o),G.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(s=>{const r=this.Xr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Ve(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return G.forEach(n.mutations,r=>{const i=new ct(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new ct(n,0),r=this.Zr.firstAfterOrEqual(s);return G.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class DS{constructor(e){this.ri=e,this.docs=function(){return new Ge(le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return G.resolve(s?s.document.mutableCopy():It.newInvalidDocument(n))}getEntries(e,n){let s=Gn();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():It.newInvalidDocument(r))}),G.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=Gn();const o=n.path,l=new le(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:f}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||aR(oR(f),s)<=0||(r.has(f.key)||Ja(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return G.resolve(i)}getAllFromCollectionGroup(e,n,s,r){fe(9500)}ii(e,n){return G.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new NS(this)}getSize(e){return G.resolve(this.size)}}class NS extends AS{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)}),G.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class VS{constructor(e){this.persistence=e,this.si=new tr(n=>xu(n),ku),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.oi=0,this._i=new Lu,this.targetCount=0,this.ai=Ur.ur()}forEachTarget(e,n){return this.si.forEach((s,r)=>n(r)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),G.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ur(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Pr(n),G.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),G.waitFor(i).next(()=>r)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return G.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),G.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),G.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return G.resolve(s)}containsKey(e,n){return G.resolve(this._i.containsKey(n))}}class ny{constructor(e,n){this.ui={},this.overlays={},this.ci=new Wa(0),this.li=!1,this.li=!0,this.hi=new xS,this.referenceDelegate=e(this),this.Pi=new VS(this),this.indexManager=new yS,this.remoteDocumentCache=function(r){return new DS(r)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new gS(n),this.Ii=new CS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new PS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new kS(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){ie("MemoryPersistence","Starting transaction:",e);const r=new OS(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(e,n){return G.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class OS extends cR{constructor(e){super(),this.currentSequenceNumber=e}}class Fu{constructor(e){this.persistence=e,this.Ri=new Lu,this.Vi=null}static mi(e){return new Fu(e)}get fi(){if(this.Vi)return this.Vi;throw fe(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),G.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),G.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,s=>{const r=le.fromPath(s);return this.gi(e,r).next(i=>{i||n.removeEntry(r,me.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return G.or([()=>G.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class _a{constructor(e,n){this.persistence=e,this.pi=new tr(s=>fR(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=bS(this,n)}static mi(e,n){return new _a(e,n)}Ei(){}di(e){return G.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return G.forEach(this.pi,(s,r)=>this.br(e,s,r).next(i=>i?G.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,o=>this.br(e,o,n).next(l=>{l||(s++,i.removeEntry(o,me.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),G.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Fo(e.data.value)),n}br(e,n,s){return G.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return G.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Uu{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=Re(),r=Re();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Uu(e,n.fromCache,s,r)}}class MS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class LS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return iT()?8:uR(Ct())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new MS;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,s,r){return s.documentReadCount<this.fs?(dr()<=be.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",pr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(dr()<=be.DEBUG&&ie("QueryEngine","Query:",pr(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(dr()<=be.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",pr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tn(n))):G.resolve())}ys(e,n){if(zd(n))return G.resolve(null);let s=Tn(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=xc(n,null,"F"),s=Tn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=Re(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,s).next(c=>{const h=this.Ds(n,l);return this.Cs(n,h,o,c.readTime)?this.ys(e,xc(n,null,"F")):this.vs(e,h,n,c)}))})))}ws(e,n,s,r){return zd(n)||r.isEqual(me.min())?G.resolve(null):this.ps.getDocuments(e,s).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?G.resolve(null):(dr()<=be.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),pr(n)),this.vs(e,o,n,iR(r,$i)).next(l=>l))})}Ds(e,n){let s=new ot(V_(e));return n.forEach((r,i)=>{Ja(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return dr()<=be.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",pr(n)),this.ps.getDocumentsMatchingQuery(e,n,ws.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}const $u="LocalStore",FS=3e8;class US{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Ge(Ae),this.xs=new tr(i=>xu(i),ku),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function $S(t,e,n,s){return new US(t,e,n,s)}async function sy(t,e){const n=ge(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],l=[];let c=Re();for(const h of r){o.push(h.batchId);for(const f of h.mutations)c=c.add(f.key)}for(const h of i){l.push(h.batchId);for(const f of h.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(s,c).next(h=>({Ls:h,removedBatchIds:o,addedBatchIds:l}))})})}function BS(t,e){const n=ge(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,h,f){const p=h.batch,m=p.keys();let w=G.resolve();return m.forEach(D=>{w=w.next(()=>f.getEntry(c,D)).next(O=>{const F=h.docVersions.get(D);Ve(F!==null,48541),O.version.compareTo(F)<0&&(p.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),f.addEntry(O)))})}),w.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let c=Re();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function ry(t){const e=ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function jS(t,e){const n=ge(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];e.targetChanges.forEach((f,p)=>{const m=r.get(p);if(!m)return;l.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(i,f.addedDocuments,p)));let w=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(mt.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,s)),r=r.insert(p,w),function(O,F,Q){return O.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=FS?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0}(m,w,f)&&l.push(n.Pi.updateTargetData(i,w))});let c=Gn(),h=Re();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(qS(i,o,e.documentUpdates).next(f=>{c=f.ks,h=f.qs})),!s.isEqual(me.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next(p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));l.push(f)}return G.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(n.Ms=r,i))}function qS(t,e,n){let s=Re(),r=Re();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=Gn();return n.forEach((l,c)=>{const h=i.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(me.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):ie($u,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)}),{ks:o,qs:r}})}function HS(t,e){const n=ge(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Su),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function zS(t,e){const n=ge(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Pi.getTargetData(s,e).next(i=>i?(r=i,G.resolve(r)):n.Pi.allocateTargetId(s).next(o=>(r=new cs(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function Oc(t,e,n){const s=ge(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Gr(o))throw o;ie($u,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function rp(t,e,n){const s=ge(t);let r=me.min(),i=Re();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,f){const p=ge(c),m=p.xs.get(f);return m!==void 0?G.resolve(p.Ms.get(m)):p.Pi.getTargetData(h,f)}(s,o,Tn(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:me.min(),n?i:Re())).next(l=>(GS(s,kR(e),l),{documents:l,Qs:i})))}function GS(t,e,n){let s=t.Os.get(e)||me.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Os.set(e,s)}class ip{constructor(){this.activeTargetIds=LR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WS{constructor(){this.Mo=new ip,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ip,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class KS{Oo(e){}shutdown(){}}const op="ConnectivityMonitor";class ap{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ie(op,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ie(op,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Ro=null;function Mc(){return Ro===null?Ro=function(){return 268435456+Math.round(2147483648*Math.random())}():Ro++,"0x"+Ro.toString(16)}const Ql="RestConnection",QS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YS{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===ua?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=Mc(),l=this.zo(e,n.toUriEncodedString());ie(Ql,`Sending RPC '${e}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,i);const{host:h}=new URL(l),f=Br(h);return this.Jo(e,l,c,s,f).then(p=>(ie(Ql,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Or(Ql,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",s),p})}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Hr}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}zo(e,n){const s=QS[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class JS{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const wt="WebChannelConnection";class XS extends YS{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=Mc();return new Promise((l,c)=>{const h=new o_;h.setWithCredentials(!0),h.listenOnce(a_.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Lo.NO_ERROR:const p=h.getResponseJson();ie(wt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case Lo.TIMEOUT:ie(wt,`RPC '${e}' ${o} timed out`),c(new oe(z.DEADLINE_EXCEEDED,"Request time out"));break;case Lo.HTTP_ERROR:const m=h.getStatus();if(ie(wt,`RPC '${e}' ${o} failed with status:`,m,"response text:",h.getResponseText()),m>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const D=w?.error;if(D&&D.status&&D.message){const O=function(Q){const V=Q.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(V)>=0?V:z.UNKNOWN}(D.status);c(new oe(O,D.message))}else c(new oe(z.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new oe(z.UNAVAILABLE,"Connection failed."));break;default:fe(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ie(wt,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(r);ie(wt,`RPC '${e}' ${o} sending request:`,r),h.send(n,"POST",f,s,15)})}T_(e,n,s){const r=Mc(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=u_(),l=c_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const f=i.join("");ie(wt,`Creating RPC '${e}' stream ${r}: ${f}`,c);const p=o.createWebChannel(f,c);this.I_(p);let m=!1,w=!1;const D=new JS({Yo:F=>{w?ie(wt,`Not sending because RPC '${e}' stream ${r} is closed:`,F):(m||(ie(wt,`Opening RPC '${e}' stream ${r} transport.`),p.open(),m=!0),ie(wt,`RPC '${e}' stream ${r} sending:`,F),p.send(F))},Zo:()=>p.close()}),O=(F,Q,V)=>{F.listen(Q,M=>{try{V(M)}catch(Y){setTimeout(()=>{throw Y},0)}})};return O(p,pi.EventType.OPEN,()=>{w||(ie(wt,`RPC '${e}' stream ${r} transport opened.`),D.o_())}),O(p,pi.EventType.CLOSE,()=>{w||(w=!0,ie(wt,`RPC '${e}' stream ${r} transport closed`),D.a_(),this.E_(p))}),O(p,pi.EventType.ERROR,F=>{w||(w=!0,Or(wt,`RPC '${e}' stream ${r} transport errored. Name:`,F.name,"Message:",F.message),D.a_(new oe(z.UNAVAILABLE,"The operation could not be completed")))}),O(p,pi.EventType.MESSAGE,F=>{if(!w){const Q=F.data[0];Ve(!!Q,16349);const V=Q,M=V?.error||V[0]?.error;if(M){ie(wt,`RPC '${e}' stream ${r} received error:`,M);const Y=M.status;let U=function(_){const v=Je[_];if(v!==void 0)return z_(v)}(Y),q=M.message;U===void 0&&(U=z.INTERNAL,q="Unknown error status: "+Y+" with message "+M.message),w=!0,D.a_(new oe(U,q)),p.close()}else ie(wt,`RPC '${e}' stream ${r} received:`,Q),D.u_(Q)}}),O(l,l_.STAT_EVENT,F=>{F.stat===Ic.PROXY?ie(wt,`RPC '${e}' stream ${r} detected buffering proxy`):F.stat===Ic.NOPROXY&&ie(wt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{D.__()},0),D}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Yl(){return typeof document<"u"?document:null}function tl(t){return new nS(t,!0)}class iy{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&ie("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const lp="PersistentStream";class oy{constructor(e,n,s,r,i,o,l,c){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new iy(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(zn(n.toString()),zn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===n&&this.G_(s,r)},s=>{e(()=>{const r=new oe(z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ie(lp,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ie(lp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ZS extends oy{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=iS(this.serializer,e),s=function(i){if(!("targetChange"in i))return me.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?me.min():o.readTime?bn(o.readTime):me.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Vc(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Cc(c)?{documents:lS(i,c)}:{query:cS(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=K_(i,o.resumeToken);const h=kc(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(me.min())>0){l.readTime=ga(i,o.snapshotVersion.toTimestamp());const h=kc(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const s=hS(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Vc(this.serializer),n.removeTarget=e,this.q_(n)}}class eC extends oy{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=aS(e.writeResults,e.commitTime),s=bn(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Vc(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>oS(this.serializer,s))};this.q_(n)}}class tC{}class nC extends tC{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new oe(z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Dc(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new oe(z.UNKNOWN,i.toString())})}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,Dc(n,s),r,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new oe(z.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class sC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(zn(n),this.aa=!1):ie("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ys="RemoteStore";class rC{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{sr(this)&&(ie(Ys,"Restarting streams for network reachability change."),await async function(c){const h=ge(c);h.Ea.add(4),await ro(h),h.Ra.set("Unknown"),h.Ea.delete(4),await nl(h)}(this))})}),this.Ra=new sC(s,r)}}async function nl(t){if(sr(t))for(const e of t.da)await e(!0)}async function ro(t){for(const e of t.da)await e(!1)}function ay(t,e){const n=ge(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Hu(n)?qu(n):Wr(n).O_()&&ju(n,e))}function Bu(t,e){const n=ge(t),s=Wr(n);n.Ia.delete(e),s.O_()&&ly(n,e),n.Ia.size===0&&(s.O_()?s.L_():sr(n)&&n.Ra.set("Unknown"))}function ju(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Wr(t).Y_(e)}function ly(t,e){t.Va.Ue(e),Wr(t).Z_(e)}function qu(t){t.Va=new XR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Wr(t).start(),t.Ra.ua()}function Hu(t){return sr(t)&&!Wr(t).x_()&&t.Ia.size>0}function sr(t){return ge(t).Ea.size===0}function cy(t){t.Va=void 0}async function iC(t){t.Ra.set("Online")}async function oC(t){t.Ia.forEach((e,n)=>{ju(t,e)})}async function aC(t,e){cy(t),Hu(t)?(t.Ra.ha(e),qu(t)):t.Ra.set("Unknown")}async function lC(t,e,n){if(t.Ra.set("Online"),e instanceof W_&&e.state===2&&e.cause)try{await async function(r,i){const o=i.cause;for(const l of i.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.Ia.delete(l),r.Va.removeTarget(l))}(t,e)}catch(s){ie(Ys,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await ya(t,s)}else if(e instanceof Bo?t.Va.Ze(e):e instanceof G_?t.Va.st(e):t.Va.tt(e),!n.isEqual(me.min()))try{const s=await ry(t.localStore);n.compareTo(s)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.Ia.get(h);f&&i.Ia.set(h,f.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,h)=>{const f=i.Ia.get(c);if(!f)return;i.Ia.set(c,f.withResumeToken(mt.EMPTY_BYTE_STRING,f.snapshotVersion)),ly(i,c);const p=new cs(f.target,c,h,f.sequenceNumber);ju(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(s){ie(Ys,"Failed to raise snapshot:",s),await ya(t,s)}}async function ya(t,e,n){if(!Gr(e))throw e;t.Ea.add(1),await ro(t),t.Ra.set("Offline"),n||(n=()=>ry(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie(Ys,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await nl(t)})}function uy(t,e){return e().catch(n=>ya(t,n,e))}async function sl(t){const e=ge(t),n=bs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Su;for(;cC(e);)try{const r=await HS(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,uC(e,r)}catch(r){await ya(e,r)}hy(e)&&fy(e)}function cC(t){return sr(t)&&t.Ta.length<10}function uC(t,e){t.Ta.push(e);const n=bs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function hy(t){return sr(t)&&!bs(t).x_()&&t.Ta.length>0}function fy(t){bs(t).start()}async function hC(t){bs(t).ra()}async function fC(t){const e=bs(t);for(const n of t.Ta)e.ea(n.mutations)}async function dC(t,e,n){const s=t.Ta.shift(),r=Vu.from(s,e,n);await uy(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await sl(t)}async function pC(t,e){e&&bs(t).X_&&await async function(s,r){if(function(o){return QR(o)&&o!==z.ABORTED}(r.code)){const i=s.Ta.shift();bs(s).B_(),await uy(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await sl(s)}}(t,e),hy(t)&&fy(t)}async function cp(t,e){const n=ge(t);n.asyncQueue.verifyOperationInProgress(),ie(Ys,"RemoteStore received new credentials");const s=sr(n);n.Ea.add(3),await ro(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await nl(n)}async function mC(t,e){const n=ge(t);e?(n.Ea.delete(2),await nl(n)):e||(n.Ea.add(2),await ro(n),n.Ra.set("Unknown"))}function Wr(t){return t.ma||(t.ma=function(n,s,r){const i=ge(n);return i.sa(),new ZS(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:iC.bind(null,t),t_:oC.bind(null,t),r_:aC.bind(null,t),H_:lC.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Hu(t)?qu(t):t.Ra.set("Unknown")):(await t.ma.stop(),cy(t))})),t.ma}function bs(t){return t.fa||(t.fa=function(n,s,r){const i=ge(n);return i.sa(),new eC(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:hC.bind(null,t),r_:pC.bind(null,t),ta:fC.bind(null,t),na:dC.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await sl(t)):(await t.fa.stop(),t.Ta.length>0&&(ie(Ys,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}class zu{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new ps,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,l=new zu(e,n,o,r,i);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gu(t,e){if(zn("AsyncQueue",`${e}: ${t}`),Gr(t))return new oe(z.UNAVAILABLE,`${e}: ${t}`);throw t}class Sr{static emptySet(e){return new Sr(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||le.comparator(n.key,s.key):(n,s)=>le.comparator(n.key,s.key),this.keyedMap=mi(),this.sortedSet=new Ge(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Sr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Sr;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class up{constructor(){this.ga=new Ge(le.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):fe(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class $r{constructor(e,n,s,r,i,o,l,c,h){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new $r(e,n,Sr.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ya(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}class gC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class _C{constructor(){this.queries=hp(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=ge(n),i=r.queries;r.queries=hp(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(s)})})(this,new oe(z.ABORTED,"Firestore shutting down"))}}function hp(){return new tr(t=>N_(t),Ya)}async function yC(t,e){const n=ge(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new gC,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const l=Gu(o,`Initialization of query '${pr(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Wu(n)}async function vC(t,e){const n=ge(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function wC(t,e){const n=ge(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(r)&&(s=!0);o.wa=r}}s&&Wu(n)}function EC(t,e,n){const s=ge(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function Wu(t){t.Ca.forEach(e=>{e.next()})}var Lc,fp;(fp=Lc||(Lc={})).Ma="default",fp.Cache="cache";class TC{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new $r(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=$r.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Lc.Cache}}class dy{constructor(e){this.key=e}}class py{constructor(e){this.key=e}}class IC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Re(),this.mutatedKeys=Re(),this.eu=V_(e),this.tu=new Sr(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new up,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((f,p)=>{const m=r.get(f),w=Ja(this.query,p)?p:null,D=!!m&&this.mutatedKeys.has(m.key),O=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let F=!1;m&&w?m.data.isEqual(w.data)?D!==O&&(s.track({type:3,doc:w}),F=!0):this.su(m,w)||(s.track({type:2,doc:w}),F=!0,(c&&this.eu(w,c)>0||h&&this.eu(w,h)<0)&&(l=!0)):!m&&w?(s.track({type:0,doc:w}),F=!0):m&&!w&&(s.track({type:1,doc:m}),F=!0,(c||h)&&(l=!0)),F&&(w?(o=o.add(w),i=O?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),s.track({type:1,doc:f})}return{tu:o,iu:s,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((f,p)=>function(w,D){const O=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe(20277,{Rt:F})}};return O(w)-O(D)}(f.type,p.type)||this.eu(f.doc,p.doc)),this.ou(s),r=r??!1;const l=n&&!r?this._u():[],c=this.Xa.size===0&&this.current&&!r?1:0,h=c!==this.Za;return this.Za=c,o.length!==0||h?{snapshot:new $r(this.query,e.tu,i,o,e.mutatedKeys,c===0,h,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new up,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Re(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new py(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new dy(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=Re();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return $r.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ku="SyncEngine";class bC{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class AC{constructor(e){this.key=e,this.hu=!1}}class RC{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new tr(l=>N_(l),Ya),this.Iu=new Map,this.Eu=new Set,this.du=new Ge(le.comparator),this.Au=new Map,this.Ru=new Lu,this.Vu={},this.mu=new Map,this.fu=Ur.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function SC(t,e,n=!0){const s=wy(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await my(s,e,n,!0),r}async function CC(t,e){const n=wy(t);await my(n,e,!0,!1)}async function my(t,e,n,s){const r=await zS(t.localStore,Tn(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return s&&(l=await PC(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&ay(t.remoteStore,r),l}async function PC(t,e,n,s,r){t.pu=(p,m,w)=>async function(O,F,Q,V){let M=F.view.ru(Q);M.Cs&&(M=await rp(O.localStore,F.query,!1).then(({documents:b})=>F.view.ru(b,M)));const Y=V&&V.targetChanges.get(F.targetId),U=V&&V.targetMismatches.get(F.targetId)!=null,q=F.view.applyChanges(M,O.isPrimaryClient,Y,U);return pp(O,F.targetId,q.au),q.snapshot}(t,p,m,w);const i=await rp(t.localStore,e,!0),o=new IC(e,i.Qs),l=o.ru(i.documents),c=so.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),h=o.applyChanges(l,t.isPrimaryClient,c);pp(t,n,h.au);const f=new bC(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function xC(t,e,n){const s=ge(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(o=>!Ya(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Oc(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&Bu(s.remoteStore,r.targetId),Fc(s,r.targetId)}).catch(zr)):(Fc(s,r.targetId),await Oc(s.localStore,r.targetId,!0))}async function kC(t,e){const n=ge(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Bu(n.remoteStore,s.targetId))}async function DC(t,e,n){const s=UC(t);try{const r=await function(o,l){const c=ge(o),h=He.now(),f=l.reduce((w,D)=>w.add(D.key),Re());let p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",w=>{let D=Gn(),O=Re();return c.Ns.getEntries(w,f).next(F=>{D=F,D.forEach((Q,V)=>{V.isValidDocument()||(O=O.add(Q))})}).next(()=>c.localDocuments.getOverlayedDocuments(w,D)).next(F=>{p=F;const Q=[];for(const V of l){const M=HR(V,p.get(V.key).overlayedDocument);M!=null&&Q.push(new nr(V.key,M,b_(M.value.mapValue),In.exists(!0)))}return c.mutationQueue.addMutationBatch(w,h,Q,l)}).next(F=>{m=F;const Q=F.applyToLocalDocumentSet(p,O);return c.documentOverlayCache.saveOverlays(w,F.batchId,Q)})}).then(()=>({batchId:m.batchId,changes:M_(p)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(o,l,c){let h=o.Vu[o.currentUser.toKey()];h||(h=new Ge(Ae)),h=h.insert(l,c),o.Vu[o.currentUser.toKey()]=h}(s,r.batchId,n),await io(s,r.changes),await sl(s.remoteStore)}catch(r){const i=Gu(r,"Failed to persist write");n.reject(i)}}async function gy(t,e){const n=ge(t);try{const s=await jS(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Au.get(i);o&&(Ve(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?Ve(o.hu,14607):r.removedDocuments.size>0&&(Ve(o.hu,42227),o.hu=!1))}),await io(n,s,e)}catch(s){await zr(s)}}function dp(t,e,n){const s=ge(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&r.push(l.snapshot)}),function(o,l){const c=ge(o);c.onlineState=l;let h=!1;c.queries.forEach((f,p)=>{for(const m of p.Sa)m.va(l)&&(h=!0)}),h&&Wu(c)}(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function NC(t,e,n){const s=ge(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new Ge(le.comparator);o=o.insert(i,It.newNoDocument(i,me.min()));const l=Re().add(i),c=new el(me.min(),new Map,new Ge(Ae),o,l);await gy(s,c),s.du=s.du.remove(i),s.Au.delete(e),Qu(s)}else await Oc(s.localStore,e,!1).then(()=>Fc(s,e,n)).catch(zr)}async function VC(t,e){const n=ge(t),s=e.batch.batchId;try{const r=await BS(n.localStore,e);yy(n,s,null),_y(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await io(n,r)}catch(r){await zr(r)}}async function OC(t,e,n){const s=ge(t);try{const r=await function(o,l){const c=ge(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return c.mutationQueue.lookupMutationBatch(h,l).next(p=>(Ve(p!==null,37113),f=p.keys(),c.mutationQueue.removeMutationBatch(h,p))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>c.localDocuments.getDocuments(h,f))})}(s.localStore,e);yy(s,e,n),_y(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await io(s,r)}catch(r){await zr(r)}}function _y(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function yy(t,e,n){const s=ge(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function Fc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||vy(t,s)})}function vy(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Bu(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Qu(t))}function pp(t,e,n){for(const s of n)s instanceof dy?(t.Ru.addReference(s.key,e),MC(t,s)):s instanceof py?(ie(Ku,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||vy(t,s.key)):fe(19791,{wu:s})}function MC(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(ie(Ku,"New document in limbo: "+n),t.Eu.add(s),Qu(t))}function Qu(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new le(Be.fromString(e)),s=t.fu.next();t.Au.set(s,new AC(n)),t.du=t.du.insert(n,s),ay(t.remoteStore,new cs(Tn(k_(n.path)),s,"TargetPurposeLimboResolution",Wa.ce))}}async function io(t,e,n){const s=ge(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((l,c)=>{o.push(s.pu(c,e,n).then(h=>{if((h||n)&&s.isPrimaryClient){const f=h?!h.fromCache:n?.targetChanges.get(c.targetId)?.current;s.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(h){r.push(h);const f=Uu.As(c.targetId,h);i.push(f)}}))}),await Promise.all(o),s.Pu.H_(r),await async function(c,h){const f=ge(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>G.forEach(h,m=>G.forEach(m.Es,w=>f.persistence.referenceDelegate.addReference(p,m.targetId,w)).next(()=>G.forEach(m.ds,w=>f.persistence.referenceDelegate.removeReference(p,m.targetId,w)))))}catch(p){if(!Gr(p))throw p;ie($u,"Failed to update sequence numbers: "+p)}for(const p of h){const m=p.targetId;if(!p.fromCache){const w=f.Ms.get(m),D=w.snapshotVersion,O=w.withLastLimboFreeSnapshotVersion(D);f.Ms=f.Ms.insert(m,O)}}}(s.localStore,i))}async function LC(t,e){const n=ge(t);if(!n.currentUser.isEqual(e)){ie(Ku,"User change. New user:",e.toKey());const s=await sy(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new oe(z.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await io(n,s.Ls)}}function FC(t,e){const n=ge(t),s=n.Au.get(e);if(s&&s.hu)return Re().add(s.key);{let r=Re();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const l=n.Tu.get(o);r=r.unionWith(l.view.nu)}return r}}function wy(t){const e=ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=gy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NC.bind(null,e),e.Pu.H_=wC.bind(null,e.eventManager),e.Pu.yu=EC.bind(null,e.eventManager),e}function UC(t){const e=ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=OC.bind(null,e),e}class va{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=tl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return $S(this.persistence,new LS,e.initialUser,this.serializer)}Cu(e){return new ny(Fu.mi,this.serializer)}Du(e){return new WS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}va.provider={build:()=>new va};class $C extends va{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ve(this.persistence.referenceDelegate instanceof _a,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new TS(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Lt.withCacheSize(this.cacheSizeBytes):Lt.DEFAULT;return new ny(s=>_a.mi(s,n),this.serializer)}}class Uc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>dp(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=LC.bind(null,this.syncEngine),await mC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _C}()}createDatastore(e){const n=tl(e.databaseInfo.databaseId),s=function(i){return new XS(i)}(e.databaseInfo);return function(i,o,l,c){return new nC(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,o,l){return new rC(s,r,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>dp(this.syncEngine,n,0),function(){return ap.v()?new ap:new KS}())}createSyncEngine(e,n){return function(r,i,o,l,c,h,f){const p=new RC(r,i,o,l,c,h);return f&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const s=ge(n);ie(Ys,"RemoteStore shutting down."),s.Ea.add(5),await ro(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Uc.provider={build:()=>new Uc};class BC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):zn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}const As="FirestoreClient";class jC{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Et.UNAUTHENTICATED,this.clientId=Ru.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{ie(As,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(ie(As,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ps;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Gu(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Jl(t,e){t.asyncQueue.verifyOperationInProgress(),ie(As,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await sy(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function mp(t,e){t.asyncQueue.verifyOperationInProgress();const n=await qC(t);ie(As,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>cp(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>cp(e.remoteStore,r)),t._onlineComponents=e}async function qC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie(As,"Using user provided OfflineComponentProvider");try{await Jl(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===z.FAILED_PRECONDITION||r.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Or("Error using user provided cache. Falling back to memory cache: "+n),await Jl(t,new va)}}else ie(As,"Using default OfflineComponentProvider"),await Jl(t,new $C(void 0));return t._offlineComponents}async function Ey(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie(As,"Using user provided OnlineComponentProvider"),await mp(t,t._uninitializedComponentsProvider._online)):(ie(As,"Using default OnlineComponentProvider"),await mp(t,new Uc))),t._onlineComponents}function HC(t){return Ey(t).then(e=>e.syncEngine)}async function zC(t){const e=await Ey(t),n=e.eventManager;return n.onListen=SC.bind(null,e.syncEngine),n.onUnlisten=xC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=CC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=kC.bind(null,e.syncEngine),n}function GC(t,e,n={}){const s=new ps;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,h){const f=new BC({next:m=>{f.Nu(),o.enqueueAndForget(()=>vC(i,p)),m.fromCache&&c.source==="server"?h.reject(new oe(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new TC(l,f,{includeMetadataChanges:!0,qa:!0});return yC(i,p)}(await zC(t),t.asyncQueue,e,n,s)),s.promise}function Ty(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const gp=new Map;const Iy="firestore.googleapis.com",_p=!0;class yp{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Iy,this.ssl=_p}else this.host=e.host,this.ssl=e.ssl??_p;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ty;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wS)throw new oe(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ty(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new oe(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new oe(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new oe(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rl{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new K1;switch(s.type){case"firstParty":return new X1(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new oe(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=gp.get(n);s&&(ie("ComponentProvider","Removing Datastore"),gp.delete(n),s.terminate())}(this),Promise.resolve()}}function WC(t,e,n,s={}){t=Ui(t,rl);const r=Br(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;r&&(Jm(`https://${l}`),Xm("Firestore",!0)),i.host!==Iy&&i.host!==l&&Or("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:r,emulatorOptions:s};if(!vs(c,o)&&(t._setSettings(c),s.mockUserToken)){let h,f;if(typeof s.mockUserToken=="string")h=s.mockUserToken,f=Et.MOCK_USER;else{h=JE(s.mockUserToken,t._app?.options.projectId);const p=s.mockUserToken.sub||s.mockUserToken.user_id;if(!p)throw new oe(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Et(p)}t._authCredentials=new Q1(new f_(h,f))}}class Kr{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Kr(this.firestore,e,this._query)}}class ut{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ms(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ut(this.firestore,e,this._key)}toJSON(){return{type:ut._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(eo(n,ut._jsonSchema))return new ut(e,s||null,new le(Be.fromString(n.referencePath)))}}ut._jsonSchemaVersion="firestore/documentReference/1.0",ut._jsonSchema={type:Ze("string",ut._jsonSchemaVersion),referencePath:Ze("string")};class ms extends Kr{constructor(e,n,s){super(e,n,k_(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ut(this.firestore,null,new le(e))}withConverter(e){return new ms(this.firestore,e,this._path)}}function tn(t,e,...n){if(t=pt(t),d_("collection","path",e),t instanceof rl){const s=Be.fromString(e,...n);return kd(s),new ms(t,null,s)}{if(!(t instanceof ut||t instanceof ms))throw new oe(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Be.fromString(e,...n));return kd(s),new ms(t.firestore,null,s)}}function KC(t,e,...n){if(t=pt(t),arguments.length===1&&(e=Ru.newId()),d_("doc","path",e),t instanceof rl){const s=Be.fromString(e,...n);return xd(s),new ut(t,null,new le(s))}{if(!(t instanceof ut||t instanceof ms))throw new oe(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Be.fromString(e,...n));return xd(s),new ut(t.firestore,t instanceof ms?t.converter:null,new le(s))}}const vp="AsyncQueue";class wp{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new iy(this,"async_queue_retry"),this._c=()=>{const s=Yl();s&&ie(vp,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Yl();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Yl();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ps;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Gr(e))throw e;ie(vp,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,zn("INTERNAL UNHANDLED ERROR: ",Ep(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=zu.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&fe(47125,{Pc:Ep(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Ep(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class il extends rl{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new wp,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wp(e),this._firestoreClient=void 0,await e}}}function QC(t,e){const n=typeof t=="object"?t:lu(),s=typeof t=="string"?t:ua,r=Zs(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=QE("firestore");i&&WC(r,...i)}return r}function by(t){if(t._terminated)throw new oe(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||YC(t),t._firestoreClient}function YC(t){const e=t._freezeSettings(),n=function(r,i,o,l){return new mR(r,i,o,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,Ty(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new jC(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(r){const i=r?._online.build();return{_offline:r?._offline.build(i),_online:i}}(t._componentsProvider))}class Kt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kt(mt.fromBase64String(e))}catch(n){throw new oe(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Kt(mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(eo(e,Kt._jsonSchema))return Kt.fromBase64String(e.bytes)}}Kt._jsonSchemaVersion="firestore/bytes/1.0",Kt._jsonSchema={type:Ze("string",Kt._jsonSchemaVersion),bytes:Ze("string")};class Yu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new oe(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ay{constructor(e){this._methodName=e}}class An{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new oe(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new oe(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:An._jsonSchemaVersion}}static fromJSON(e){if(eo(e,An._jsonSchema))return new An(e.latitude,e.longitude)}}An._jsonSchemaVersion="firestore/geoPoint/1.0",An._jsonSchema={type:Ze("string",An._jsonSchemaVersion),latitude:Ze("number"),longitude:Ze("number")};class Rn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Rn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(eo(e,Rn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Rn(e.vectorValues);throw new oe(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Rn._jsonSchemaVersion="firestore/vectorValue/1.0",Rn._jsonSchema={type:Ze("string",Rn._jsonSchemaVersion),vectorValues:Ze("object")};const JC=/^__.*__$/;class XC{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new nr(e,this.data,this.fieldMask,n,this.fieldTransforms):new no(e,this.data,n,this.fieldTransforms)}}function Ry(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe(40011,{Ac:t})}}class Ju{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ju({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return wa(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Ry(this.Ac)&&JC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ZC{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||tl(e)}Cc(e,n,s,r=!1){return new Ju({Ac:e,methodName:n,Dc:s,path:dt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sy(t){const e=t._freezeSettings(),n=tl(t._databaseId);return new ZC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function eP(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);xy("Data must be an object, but it was:",o,s);const l=Cy(s,o);let c,h;if(i.merge)c=new rn(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const m=nP(e,p,n);if(!o.contains(m))throw new oe(z.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);rP(f,m)||f.push(m)}c=new rn(f),h=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,h=o.fieldTransforms;return new XC(new Wt(l),c,h)}function tP(t,e,n,s=!1){return Xu(n,t.Cc(s?4:3,e))}function Xu(t,e){if(Py(t=pt(t)))return xy("Unsupported field value:",e,t),Cy(t,e);if(t instanceof Ay)return function(s,r){if(!Ry(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const l of s){let c=Xu(l,r.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=pt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return FR(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=He.fromDate(s);return{timestampValue:ga(r.serializer,i)}}if(s instanceof He){const i=new He(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ga(r.serializer,i)}}if(s instanceof An)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Kt)return{bytesValue:K_(r.serializer,s._byteString)};if(s instanceof ut){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Mu(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Rn)return function(o,l){return{mapValue:{fields:{[T_]:{stringValue:I_},[ha]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return Du(l.serializer,h)})}}}}}}(s,r);throw r.Sc(`Unsupported field value: ${Ga(s)}`)}(t,e)}function Cy(t,e){const n={};return g_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):er(t,(s,r)=>{const i=Xu(r,e.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function Py(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof He||t instanceof An||t instanceof Kt||t instanceof ut||t instanceof Ay||t instanceof Rn)}function xy(t,e,n){if(!Py(n)||!p_(n)){const s=Ga(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function nP(t,e,n){if((e=pt(e))instanceof Yu)return e._internalPath;if(typeof e=="string")return ky(t,e);throw wa("Field path arguments must be of type string or ",t,!1,void 0,n)}const sP=new RegExp("[~\\*/\\[\\]]");function ky(t,e,n){if(e.search(sP)>=0)throw wa(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Yu(...e.split("."))._internalPath}catch{throw wa(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function wa(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new oe(z.INVALID_ARGUMENT,l+t+c)}function rP(t,e){return t.some(n=>n.isEqual(e))}class Dy{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Zu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class iP extends Dy{data(){return super.data()}}function Zu(t,e){return typeof e=="string"?ky(t,e):e instanceof Yu?e._internalPath:e._delegate._internalPath}function oP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new oe(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eh{}class aP extends eh{}function gs(t,e,...n){let s=[];e instanceof eh&&s.push(e),s=s.concat(n),function(i){const o=i.filter(c=>c instanceof th).length,l=i.filter(c=>c instanceof ol).length;if(o>1||o>0&&l>0)throw new oe(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)t=r._apply(t);return t}class ol extends aP{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new ol(e,n,s)}_apply(e){const n=this._parse(e);return Ny(e._query,n),new Kr(e.firestore,e.converter,Pc(e._query,n))}_parse(e){const n=Sy(e.firestore);return function(i,o,l,c,h,f,p){let m;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new oe(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Ip(p,f);const D=[];for(const O of p)D.push(Tp(c,i,O));m={arrayValue:{values:D}}}else m=Tp(c,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Ip(p,f),m=tP(l,o,p,f==="in"||f==="not-in");return Xe.create(h,f,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function zs(t,e,n){const s=e,r=Zu("where",t);return ol._create(r,s,n)}class th extends eh{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new th(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:hn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let o=r;const l=i.getFlattenedFilters();for(const c of l)Ny(o,c),o=Pc(o,c)}(e._query,n),new Kr(e.firestore,e.converter,Pc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Tp(t,e,n){if(typeof(n=pt(n))=="string"){if(n==="")throw new oe(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!D_(e)&&n.indexOf("/")!==-1)throw new oe(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Be.fromString(n));if(!le.isDocumentKey(s))throw new oe(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Ud(t,new le(s))}if(n instanceof ut)return Ud(t,n._key);throw new oe(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ga(n)}.`)}function Ip(t,e){if(!Array.isArray(t)||t.length===0)throw new oe(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ny(t,e){const n=function(r,i){for(const o of r)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new oe(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class lP{convertValue(e,n="none"){switch(Is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return er(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){const n=e.fields?.[ha].arrayValue?.values?.map(s=>Ye(s.doubleValue));return new Rn(n)}convertGeoPoint(e){return new An(Ye(e.latitude),Ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Qa(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Bi(e));default:return null}}convertTimestamp(e){const n=Es(e);return new He(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Be.fromString(e);Ve(ey(s),9688,{name:e});const r=new ji(s.get(1),s.get(3)),i=new le(s.popFirst(5));return r.isEqual(n)||zn(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function cP(t,e,n){let s;return s=t?t.toFirestore(e):e,s}class So{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Cr extends Dy{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Zu("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Cr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Cr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Cr._jsonSchema={type:Ze("string",Cr._jsonSchemaVersion),bundleSource:Ze("string","DocumentSnapshot"),bundleName:Ze("string"),bundle:Ze("string")};class jo extends Cr{data(e={}){return super.data(e)}}class Pr{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new So(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new jo(this._firestore,this._userDataWriter,s.key,s,new So(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new oe(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>{const c=new jo(r._firestore,r._userDataWriter,l.doc.key,l.doc,new So(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new jo(r._firestore,r._userDataWriter,l.doc.key,l.doc,new So(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,f=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:uP(l.type),doc:c,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Pr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ru.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function uP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe(61501,{type:t})}}Pr._jsonSchemaVersion="firestore/querySnapshot/1.0",Pr._jsonSchema={type:Ze("string",Pr._jsonSchemaVersion),bundleSource:Ze("string","QuerySnapshot"),bundleName:Ze("string"),bundle:Ze("string")};class hP extends lP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ut(this.firestore,null,n)}}function _s(t){t=Ui(t,Kr);const e=Ui(t.firestore,il),n=by(e),s=new hP(e);return oP(t._query),GC(n,t._query).then(r=>new Pr(e,s,t,r))}function fP(t){return Vy(Ui(t.firestore,il),[new Nu(t._key,In.none())])}function $c(t,e){const n=Ui(t.firestore,il),s=KC(t),r=cP(t.converter,e);return Vy(n,[eP(Sy(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,In.exists(!1))]).then(()=>s)}function Vy(t,e){return function(s,r){const i=new ps;return s.asyncQueue.enqueueAndForget(async()=>DC(await HC(s),r,i)),i.promise}(by(t),e)}(function(e,n=!0){(function(r){Hr=r})(jr),Pn(new un("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),l=new il(new Y1(s.getProvider("auth-internal")),new Z1(o,s.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new oe(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ji(h.options.projectId,f)}(o,r),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Yt(Rd,Sd,e),Yt(Rd,Sd,"esm2020")})();const dP={apiKey:"AIzaSyBREo7YpHmycRgjyftoxkiFMLwMVePqeKc",authDomain:"happy-tri-friends.firebaseapp.com",databaseURL:"https://happy-tri-friends-default-rtdb.europe-west1.firebasedatabase.app",projectId:"happy-tri-friends",storageBucket:"happy-tri-friends.firebasestorage.app",messagingSenderId:"442257914194",appId:"1:442257914194:web:bf5e1c5cb21cac78e5e28b",measurementId:"G-RV9XDZH7J9"},nh=ig(dP);qb(nh);const De=G1(nh),Oy=new Ln;Oy.setCustomParameters({prompt:"select_account"});const nn=QC(nh),pP={class:"flex flex-col items-center md:flex-row md:justify-between text-white p-4"},mP={class:"flex flex-wrap justify-center space-x-4 text-sm md:text-base"},gP={class:"flex flex-col gap-2 items-end"},_P={key:1,class:"flex items-center gap-3"},yP={__name:"htfHeader",setup(t){const e=ou(),n=Ie(!1),s=Ie(""),r=["kulikalovdenis@gmail.com","bugary20@gmail.com"],i=At(()=>n.value&&r.includes(s.value||"")),o=At(()=>i.value?"/admin":"/user");Ki(()=>{qa(De,h=>{h?(n.value=!0,s.value=h.email):(n.value=!1,s.value="")})});function l(){alert("Welcome to Happy TRI Friends!")}async function c(){try{await OA(De),e.push("/")}catch(h){console.error(" :",h)}}return(h,f)=>{const p=am("router-link");return ne(),se("header",pP,[je(p,{to:"/"},{default:hr(()=>[...f[0]||(f[0]=[I("img",{src:$E,alt:"Logo",class:"w-20 h-auto mb-4 md:mb-0 cursor-pointer hover:opacity-80 transition"},null,-1)])]),_:1}),I("ul",mP,[f[3]||(f[3]=I("li",null,[I("a",{href:"#",class:"menu-link font-bold hover:text-yellow-400"}," ")],-1)),f[4]||(f[4]=I("li",null,[I("a",{href:"#",class:"menu-link font-bold hover:text-yellow-400"},"")],-1)),f[5]||(f[5]=I("li",null,[I("a",{href:"#",class:"menu-link font-bold hover:text-yellow-400"}," ")],-1)),I("li",null,[je(p,{to:"/schedule",class:"menu-link font-bold hover:text-yellow-400"},{default:hr(()=>[...f[1]||(f[1]=[_r("",-1)])]),_:1})]),f[6]||(f[6]=Sm('<li data-v-d817f29a><a href="#" class="menu-link font-bold hover:text-yellow-400" data-v-d817f29a> </a></li><li data-v-d817f29a><a href="#" class="menu-link font-bold hover:text-yellow-400" data-v-d817f29a></a></li><li data-v-d817f29a><a href="#" class="menu-link font-bold hover:text-yellow-400" data-v-d817f29a> </a></li><li data-v-d817f29a><a href="#" class="menu-link font-bold hover:text-yellow-400" data-v-d817f29a> </a></li><li data-v-d817f29a><a href="#" class="menu-link font-bold hover:text-yellow-400" data-v-d817f29a> </a></li>',5)),I("li",null,[n.value?it("",!0):(ne(),ac(p,{key:0,to:"/login",class:"menu-link font-bold hover:text-yellow-400"},{default:hr(()=>[...f[2]||(f[2]=[_r("",-1)])]),_:1}))])]),I("div",gP,[I("button",{type:"button",onClick:l,class:"bg-yellow-400 text-black font-bold py-2 px-6 rounded-full hover:bg-yellow-500 transition"},"  "),n.value?(ne(),se("div",_P,[je(p,{to:o.value,class:"flex items-center gap-2 bg-transparent border-2 border-white text-white font-semibold py-1.5 px-4 rounded-lg hover:bg-white hover:text-black transition"},{default:hr(()=>[...f[8]||(f[8]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"})],-1),_r("  ",-1)])]),_:1},8,["to"]),I("button",{onClick:c,title:"",class:"p-2 bg-transparent border-2 border-white text-white rounded-lg hover:bg-red-500 hover:border-red-500 transition"},[...f[9]||(f[9]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z","clip-rule":"evenodd"})],-1)])])])):(ne(),ac(p,{key:0,to:"/login",class:"flex items-center gap-2 bg-transparent border-2 border-white text-white font-semibold py-1.5 px-4 rounded-lg hover:bg-white hover:text-black transition"},{default:hr(()=>[...f[7]||(f[7]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 011 1v12a1 1 0 11-2 0V4a1 1 0 011-1zm7.707 3.293a1 1 0 010 1.414L9.414 9H17a1 1 0 110 2H9.414l1.293 1.293a1 1 0 01-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),_r("    ",-1)])]),_:1}))])])}}},oo=Oa(yP,[["__scopeId","data-v-d817f29a"]]),vP={},wP={class:"home text-center text-white px-2 sm:px-4 py-4"};function EP(t,e){return ne(),se("div",wP,[...e[0]||(e[0]=[I("div",{class:"uppercase text-xs sm:text-sm tracking-widest font-light mb-6 sm:mb-10"},"triathlon club",-1),I("div",{class:"text-3xl sm:text-6xl font-bold mb-6 sm:mb-10"},"Happy TRI Friends",-1),I("div",{class:"text-base sm:text-lg text-white"},"Swimmius. Bikeus. Runius",-1)])])}const TP=Oa(vP,[["render",EP]]),al="/HTF/assets/background-CxF9_idu.png",IP="/HTF/assets/timur-CmFIxDiN.png",bP={class:"relative z-10"},AP={class:"text-center p-4 sm:p-6 md:p-10 lg:p-40"},RP={class:"flex flex-col md:flex-row items-center justify-center md:justify-between h-auto md:h-150 bg-gray-100 text-black p-4 sm:p-6 gap-4 md:gap-0"},SP=["src"],CP={__name:"MainPage",setup(t){ou();function e(){window.scrollBy({top:window.innerHeight,behavior:"smooth"})}return(n,s)=>(ne(),se(ze,null,[I("div",{class:"relative min-h-screen bg-cover bg-center bg-fixed",style:Rs({backgroundImage:`url(${Ft(al)})`})},[s[0]||(s[0]=I("div",{class:"absolute inset-0 bg-black opacity-50"},null,-1)),I("div",bP,[je(oo),I("main",AP,[je(TP)])]),I("button",{onClick:e,class:"fixed sm:absolute bottom-5 left-1/2 transform -translate-x-1/2 bg-yellow-400 text-black font-bold py-2 px-4 sm:px-6 md:px-8 rounded-full hover:bg-yellow-500 transition text-base sm:text-lg"},"   ")],4),s[2]||(s[2]=I("div",{class:"flex flex-col items-center justify-center h-auto bg-white text-black p-4 sm:p-6 md:h-80"},[I("h1",{class:"text-xl sm:text-2xl md:text-4xl font-bold mb-4 md:mb-10"},"   ,   !"),I("p",{class:"text-sm sm:text-base md:text-lg mb-4 md:mb-0"},"     .        ,   .")],-1)),I("div",RP,[I("img",{src:Ft(IP),alt:"Timur",class:"w-2/3 sm:w-1/2 md:w-1/3 h-auto mb-4 md:mb-0 ml-0 md:ml-20"},null,8,SP),s[1]||(s[1]=I("div",{class:"w-full md:w-1/2 text-center md:text-left"},[I("h2",{class:"text-lg sm:text-xl md:text-2xl font-bold mb-2 md:mb-4"},""),I("p",{class:"text-sm sm:text-base md:text-lg"},"  ")],-1))])],64))}},PP="/HTF/HTF.png",xP={class:"relative z-10"},kP={__name:"LoginView",setup(t){const e=ou(),n=["kulikalovdenis@gmail.com","bugary20@gmail.com"];async function s(){try{const i=(await t1(De,Oy)).user;n.includes(i.email)?e.push("/admin"):e.push("/user")}catch(r){r.code&&r.code!=="auth/popup-closed-by-user"&&r.code!=="auth/cancelled-popup-request"&&console.error(" :",r.code,r.message)}}return(r,i)=>(ne(),se("div",{class:"relative min-h-screen bg-cover bg-center bg-fixed",style:Rs({backgroundImage:`url(${Ft(al)})`})},[i[5]||(i[5]=I("div",{class:"absolute inset-0 bg-black opacity-50"},null,-1)),I("div",xP,[je(oo),I("div",{class:"flex flex-col items-center justify-center min-h-[calc(100vh-100px)] p-2 sm:p-4"},[I("div",{class:"bg-gradient-to-br from-blue-50 via-white to-blue-50 p-4 sm:p-6 md:p-10 rounded-2xl shadow-2xl max-w-xs sm:max-w-md w-full border border-blue-100"},[i[1]||(i[1]=I("div",{class:"flex justify-center mb-6"},[I("img",{src:PP,alt:"HTF Logo",class:"w-20 h-20 sm:w-24 sm:h-24 rounded-full shadow-lg border-4 border-blue-500"})],-1)),i[2]||(i[2]=I("h1",{class:"text-2xl sm:text-3xl font-bold mb-3 text-center text-gray-800"},"!",-1)),i[3]||(i[3]=I("p",{class:"text-center text-gray-600 mb-6 sm:mb-8"},"Happy TRI Friends",-1)),I("button",{onClick:s,class:"w-full flex items-center justify-center gap-3 bg-white hover:bg-gray-50 text-gray-800 font-semibold px-4 py-3 sm:px-6 sm:py-4 rounded-xl transition shadow-md border border-gray-200 hover:shadow-lg text-base sm:text-lg"},[...i[0]||(i[0]=[Sm('<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"></path><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"></path><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"></path><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"></path></svg>   Google ',2)])]),i[4]||(i[4]=I("p",{class:"text-center text-xs sm:text-sm text-gray-500 mt-4 sm:mt-6"},"      ",-1))])])])],4))}},DP={swimming:[" "," "],running:[""," "],cycling:[""],other:[" "," ",""]},NP=["",""," ",""],VP=t=>DP[t]||NP,OP={swimming:[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}],running:[{value:"RUN_LIGHT",label:"LIGHT"},{value:"RUN_LONG",label:"LONG"},{value:"RUN_TECHNIQUE",label:""}],cycling:[{value:"BIKE_FAST_TUESDAY",label:" "},{value:"BIKE_LONG",label:" "},{value:"BIKE_TECHNIQUE",label:""},{value:"BIKE_COFFEE_RIDE",label:"Coffee Ride"}],other:[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}]},MP=[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}],bp=t=>OP[t]||MP,LP=[" , . .  36"," , 61"," , .  5","",""," "," "],Bc=[{value:"swimming",label:" ",icon:"",name:""},{value:"running",label:" ",icon:"",name:""},{value:"cycling",label:" ",icon:"",name:""},{value:"other",label:" ",icon:"",name:""}],sh=t=>{const e=Bc.find(n=>n.value===t||n.name===t);return e?e.icon:""},FP={class:"relative z-10 h-full flex flex-col"},UP={class:"bg-gray-800"},$P={class:"flex flex-col lg:flex-row gap-2 lg:gap-4 p-2 sm:p-4 flex-1 min-h-0 overflow-y-auto"},BP={class:"w-80 bg-white bg-opacity-90 rounded-2xl shadow-lg p-4 flex-shrink-0 overflow-y-auto flex flex-col"},jP={class:"flex flex-col items-center mb-6 pb-6 border-b border-gray-200"},qP={key:0,class:"w-20 h-20 rounded-full mb-3 shadow-md overflow-hidden bg-gray-200"},HP=["src","alt"],zP={key:1,class:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-bold text-2xl mb-3 shadow-md"},GP={class:"flex items-center justify-center gap-2 w-full"},WP={class:"font-semibold text-gray-800 text-center"},KP={class:"text-sm text-gray-500 text-center break-all"},QP={class:"flex-1"},YP={key:0,class:"bg-white bg-opacity-90 rounded-2xl shadow-lg p-6"},JP={key:0,class:"text-center py-12"},XP={key:1,class:"text-center py-12"},ZP={key:2,class:"space-y-6"},ex={class:"bg-gradient-to-r from-blue-600 to-blue-800 text-white px-6 py-4"},tx={class:"text-2xl font-bold"},nx={class:"text-sm text-blue-100"},sx={class:"p-6 space-y-4 bg-gray-50"},rx={class:"flex-1"},ix={class:"flex items-center gap-3 mb-2"},ox={class:"text-2xl"},ax={class:"text-xl font-bold text-gray-800"},lx={key:0,class:"px-3 py-1 rounded-full text-sm font-semibold bg-yellow-100 text-yellow-800"},cx={class:"flex items-center gap-6 text-gray-600"},ux={class:"flex items-center gap-2"},hx={class:"font-semibold"},fx={class:"flex items-center gap-2"},dx={class:"flex items-center gap-2"},px={class:"ml-6 flex flex-col gap-2"},mx={key:0,disabled:"",class:"px-6 py-3 rounded-lg font-semibold bg-gray-400 text-white cursor-not-allowed shadow-lg opacity-60"},gx=["onClick"],_x=["onClick"],yx={key:3,class:"fixed bottom-8 right-8 bg-green-500 text-white px-6 py-4 rounded-lg shadow-2xl animate-bounce"},vx={class:"font-semibold"},wx={__name:"UserView",setup(t){const e=Ie(""),n=Ie(""),s=Ie(""),r=Ie("registration"),i=Ie(!1),o=Ie(null),l=Ie([]),c=Ie(""),h=()=>{const U=new Date,q=U.getDay(),b=q===0?-6:1-q,_=new Date(U);_.setDate(U.getDate()+b),_.setHours(0,0,0,0);const v=new Date(_);return v.setDate(_.getDate()+6),v.setHours(23,59,59,999),{monday:_,sunday:v}},f=U=>new Date(U).toLocaleDateString("uk-UA",{day:"2-digit",month:"long"}),p=At(()=>{if(!o.value||!o.value.trainings)return{};const U={};o.value.trainings.forEach(_=>{const v=_.dayName;U[v]||(U[v]=[]),U[v].push(_)});const q=["","","","","'","",""],b={};return q.forEach(_=>{U[_]&&(b[_]=U[_].sort((v,R)=>v.time.localeCompare(R.time)))}),b}),m=U=>sh(U),w=U=>({:"bg-green-100 text-green-800",:"bg-yellow-100 text-yellow-800",:"bg-red-100 text-red-800"})[U]||"bg-gray-100 text-gray-800",D=async()=>{try{i.value=!0;const{monday:U,sunday:q}=h(),b=U.toISOString().split("T")[0],_=q.toISOString().split("T")[0],v=gs(tn(nn,"schedules")),R=await _s(v),A=[];R.forEach(C=>{const E=C.data(),Ue=E.weekStart,tt=E.weekEnd;Ue>=b&&tt<=_&&A.push({id:C.id,...E})}),A.length>0?(A.sort((C,E)=>{const Ue=new Date(C.createdAt||0);return new Date(E.createdAt||0)-Ue}),o.value=A[0],await O()):o.value=null}catch(U){console.error("  :",U)}finally{i.value=!1}},O=async()=>{if(De.currentUser)try{const U=gs(tn(nn,"registrations"),zs("userId","==",De.currentUser.uid)),q=await _s(U);l.value=q.docs.map(b=>b.data().trainingId)}catch{}},F=U=>{const q=`${o.value.id}_${U.date}_${U.time}`;return l.value.includes(q)},Q=U=>{const q=new Date(`${U.date}T${U.time}:00`),b=new Date,_=2*60,v=b.getTimezoneOffset(),R=new Date(b.getTime()+(_+v)*6e4);return q<R},V=async U=>{if(!De.currentUser){alert(" ,     ");return}try{const q=`${o.value.id}_${U.date}_${U.time}`;if(F(U))return;await $c(tn(nn,"registrations"),{userId:De.currentUser.uid,userEmail:De.currentUser.email,userName:De.currentUser.displayName||De.currentUser.email,userPhoto:De.currentUser.photoURL||null,trainingId:q,scheduleId:o.value.id,trainingDate:U.date,trainingTime:U.time,trainingName:U.name,trainingType:U.type,registeredAt:new Date().toISOString()}),l.value.push(q),c.value=`   ${U.name}`,"Notification"in window&&Notification.permission==="granted"&&new Notification("HTF -  ",{body:`${U.dayName}, ${U.time} - ${U.name}`,icon:"/HTF.png"}),setTimeout(()=>{c.value=""},3e3)}catch(q){alert(" : "+q.message)}},M=async U=>{if(De.currentUser)try{const q=`${o.value.id}_${U.date}_${U.time}`,b=gs(tn(nn,"registrations"),zs("userId","==",De.currentUser.uid),zs("trainingId","==",q)),_=await _s(b);if(!_.empty){const v=_.docs[0];await deleteDoc(v.ref);const R=l.value.indexOf(q);R>-1&&l.value.splice(R,1),c.value=`  ${U.name} `,"Notification"in window&&Notification.permission==="granted"&&new Notification("HTF -  ",{body:`${U.dayName}, ${U.time} - ${U.name}`,icon:"/HTF.png"}),setTimeout(()=>{c.value=""},3e3)}}catch(q){alert(" : "+q.message)}};Ki(()=>{qa(De,U=>{U&&(e.value=U.displayName||"",n.value=U.email||"",s.value=U.photoURL||"",r.value==="registration"&&D())})}),qs(r,U=>{U==="registration"&&D()});async function Y(){await De.signOut(),window.location.href="/HTF/"}return(U,q)=>(ne(),se("div",{class:"relative h-screen bg-cover bg-center bg-fixed overflow-hidden",style:Rs({backgroundImage:`url(${Ft(al)})`})},[q[10]||(q[10]=I("div",{class:"absolute inset-0 bg-black opacity-40"},null,-1)),I("div",FP,[I("div",UP,[je(oo)]),I("div",$P,[I("aside",BP,[I("div",jP,[s.value?(ne(),se("div",qP,[I("img",{src:s.value,alt:e.value,class:"w-full h-full object-cover",referrerpolicy:"no-referrer"},null,8,HP)])):(ne(),se("div",zP,ye(e.value?e.value.charAt(0).toUpperCase():"U"),1)),I("div",GP,[I("p",WP,ye(e.value||""),1),I("button",{onClick:Y,class:"bg-red-500 hover:bg-red-600 text-white p-1.5 rounded transition flex-shrink-0",title:""},[...q[1]||(q[1]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z","clip-rule":"evenodd"})],-1)])])]),I("p",KP,ye(n.value),1)]),I("div",null,[q[2]||(q[2]=I("h3",{class:"text-sm font-semibold text-gray-500 uppercase mb-3"},"",-1)),I("button",{onClick:q[0]||(q[0]=b=>r.value="registration"),class:Dt(["w-full text-left px-4 py-3 rounded-lg mb-2 transition",r.value==="registration"?"bg-blue-500 text-white":"hover:bg-gray-100 text-gray-700"])},"     ",2)])]),I("main",QP,[r.value==="registration"?(ne(),se("div",YP,[q[9]||(q[9]=I("h1",{class:"text-3xl font-bold mb-6"},"   ",-1)),i.value?(ne(),se("div",JP,[...q[3]||(q[3]=[I("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"},null,-1),I("p",{class:"text-gray-600"}," ...",-1)])])):!o.value||!o.value.trainings||o.value.trainings.length===0?(ne(),se("div",XP,[...q[4]||(q[4]=[I("p",{class:"text-gray-600 text-xl mb-4"},"       ",-1),I("p",{class:"text-gray-500"},"   ",-1)])])):(ne(),se("div",ZP,[(ne(!0),se(ze,null,Gt(p.value,(b,_)=>(ne(),se("div",{key:_,class:"border border-gray-200 rounded-xl overflow-hidden"},[I("div",ex,[I("h2",tx,ye(_),1),I("p",nx,ye(f(b[0].date)),1)]),I("div",sx,[(ne(!0),se(ze,null,Gt(b,(v,R)=>(ne(),se("div",{key:R,class:"flex items-center justify-between p-4 bg-white rounded-lg hover:shadow-md transition-shadow border border-gray-200"},[I("div",rx,[I("div",ix,[I("span",ox,ye(m(v.type)),1),I("h3",ax,ye(v.name),1),I("span",{class:Dt(["px-3 py-1 rounded-full text-sm font-semibold",w(v.difficulty)])},ye(v.difficulty),3),v.isPaid?(ne(),se("span",lx,"   ")):it("",!0)]),I("div",cx,[I("div",ux,[q[5]||(q[5]=I("span",null,"",-1)),I("span",hx,ye(v.time),1)]),I("div",fx,[q[6]||(q[6]=I("span",null,"",-1)),I("span",null,ye(v.address),1)]),I("div",dx,[q[7]||(q[7]=I("span",null,"",-1)),I("span",null,ye(v.type),1)])])]),I("div",px,[Q(v)&&!F(v)?(ne(),se("button",mx,"    ")):F(v)?(ne(),se(ze,{key:2},[q[8]||(q[8]=I("button",{class:"px-6 py-3 rounded-lg font-semibold bg-green-500 text-white cursor-default shadow-lg"},"   ",-1)),Q(v)?it("",!0):(ne(),se("button",{key:0,onClick:A=>M(v),class:"px-6 py-2 rounded-lg font-semibold transition-all transform hover:scale-105 bg-red-500 text-white hover:bg-red-600 shadow-lg hover:shadow-xl"},"   ",8,_x))],64)):(ne(),se("button",{key:1,onClick:A=>V(v),class:"px-6 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 bg-blue-600 text-white hover:bg-blue-700 shadow-lg hover:shadow-xl"},"   ",8,gx))])]))),128))])]))),128))])),c.value?(ne(),se("div",yx,[I("p",vx," "+ye(c.value),1)])):it("",!0)])):it("",!0)])])])],4))}},Ex={class:"relative w-full"},Tx=["value","placeholder"],Ix={key:0,class:"absolute left-0 right-0 z-10 bg-white border rounded-lg shadow-lg max-h-48 overflow-auto mt-1"},bx=["onMousedown"],Ax={__name:"CustomDropdown",props:{modelValue:String,options:Array,placeholder:String},setup(t){const e=Ie(!1);function n(){setTimeout(()=>{e.value=!1},150)}return(s,r)=>(ne(),se("div",Ex,[I("input",{value:t.modelValue,onInput:r[0]||(r[0]=i=>s.$emit("update:modelValue",i.target.value)),onFocus:r[1]||(r[1]=i=>e.value=!0),onBlur:n,placeholder:t.placeholder,class:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",autocomplete:"off"},null,40,Tx),I("button",{type:"button",onMousedown:r[2]||(r[2]=bf(i=>e.value=!0,["prevent"])),class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-blue-500"},[...r[3]||(r[3]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])],32),e.value?(ne(),se("ul",Ix,[(ne(!0),se(ze,null,Gt(t.options,i=>(ne(),se("li",{key:i,onMousedown:bf(o=>{s.$emit("update:modelValue",i),e.value=!1},["prevent"]),class:Dt(["px-3 py-2 cursor-pointer transition",i===t.modelValue?"bg-blue-600 text-white font-semibold":"","hover:bg-blue-100"])},ye(i),43,bx))),128))])):it("",!0)]))}},Ap=Oa(Ax,[["__scopeId","data-v-77e0df9e"]]),Rx={class:"relative z-10 h-full flex flex-col"},Sx={class:"bg-gray-800"},Cx={class:"flex flex-col lg:flex-row gap-2 lg:gap-4 p-2 sm:p-4 flex-1 min-h-0 overflow-y-auto"},Px={class:"w-full lg:w-80 bg-white bg-opacity-90 rounded-2xl shadow-lg p-2 sm:p-4 flex-shrink-0 overflow-y-auto flex flex-col mb-2 lg:mb-0"},xx={class:"flex flex-col items-center mb-6 pb-6 border-b border-gray-200"},kx={key:0,class:"w-20 h-20 rounded-full mb-3 shadow-md overflow-hidden bg-gray-200"},Dx=["src","alt"],Nx={key:1,class:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-bold text-2xl mb-3 shadow-md"},Vx={class:"flex items-center justify-center gap-2 w-full"},Ox={class:"font-semibold text-gray-800 text-center"},Mx={class:"text-sm text-gray-500 text-center break-all"},Lx={class:"mb-6"},Fx={class:"flex-1 w-full"},Ux={key:0,class:"bg-white bg-opacity-90 rounded-2xl shadow-lg p-2 sm:p-4"},$x={class:"mb-4 sm:mb-6 p-2 sm:p-4 bg-blue-50 rounded-lg border border-blue-200"},Bx={class:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4"},jx={key:0,class:"text-red-600 text-sm mt-2"},qx={class:"space-y-4 sm:space-y-6"},Hx={class:"text-lg sm:text-xl font-semibold mb-2 sm:mb-4 text-gray-800"},zx={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-4"},Gx={class:"flex gap-2"},Wx=["onUpdate:modelValue"],Kx=["value"],Qx=["onUpdate:modelValue"],Yx=["value"],Jx=["onUpdate:modelValue"],Xx=["onUpdate:modelValue"],Zx={class:"md:col-span-2"},e2={class:"flex gap-2"},t2=["onClick"],n2=["onClick"],s2={key:0,class:"mt-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg"},r2={key:1,class:"mt-4 p-4 bg-green-100 border-2 border-green-500 text-green-800 rounded-lg shadow-lg animate-pulse"},i2={key:2,class:"mt-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg"},o2={key:3,class:"mt-8 p-4 bg-gray-50 rounded-xl"},a2={class:"flex flex-col items-center gap-4"},l2={key:1,class:"bg-white bg-opacity-90 rounded-2xl shadow-lg p-6"},c2={key:0,class:"text-center py-12"},u2={key:1,class:"text-center py-12"},h2={key:2,class:"space-y-6"},f2={class:"bg-gradient-to-r from-blue-600 to-blue-800 text-white px-6 py-4"},d2={class:"text-2xl font-bold"},p2={class:"text-sm text-blue-100"},m2={class:"p-6 space-y-4 bg-gray-50"},g2={class:"flex-1"},_2={class:"flex items-center gap-3 mb-2"},y2={class:"text-2xl"},v2={class:"text-xl font-bold text-gray-800"},w2={key:0,class:"px-3 py-1 rounded-full text-sm font-semibold bg-yellow-100 text-yellow-800"},E2={class:"flex items-center gap-6 text-gray-600"},T2={class:"flex items-center gap-2"},I2={class:"font-semibold"},b2={class:"flex items-center gap-2"},A2={class:"flex items-center gap-2"},R2={class:"ml-6 flex flex-col gap-2"},S2={key:0,disabled:"",class:"px-6 py-3 rounded-lg font-semibold bg-gray-400 text-white cursor-not-allowed shadow-lg opacity-60"},C2=["onClick"],P2=["onClick"],x2={key:3,class:"fixed bottom-8 right-8 bg-green-500 text-white px-6 py-4 rounded-lg shadow-2xl animate-bounce"},k2={class:"font-semibold"},D2={__name:"AdminView",setup(t){const e=Ie(""),n=Ie(""),s=Ie(""),r=Ie("schedule"),i=Ie(null),o=Ie(!1),l=Ie(!1),c=Ie(!1),h=Ie(""),f=Ie(""),p=Ie(!1),m=Ie(!1),w=Ie(null),D=Ie([]),O=Ie(""),F=Ie(!1),Q=Ie("");function V(Z){const N=new Date(Z),W=["","","","","","","","","","","",""];return`${N.getDate()} ${W[N.getMonth()]}`}function M(Z){return new Date(Z).getFullYear()}const Y=Ie([{id:"monday",name:"",trainings:[]},{id:"tuesday",name:"",trainings:[]},{id:"wednesday",name:"",trainings:[]},{id:"thursday",name:"",trainings:[]},{id:"friday",name:"'",trainings:[]},{id:"saturday",name:"",trainings:[]},{id:"sunday",name:"",trainings:[]}]),U=Ie(LP);Ki(()=>{qa(De,Z=>{Z&&(e.value=Z.displayName||"",n.value=Z.email||"",s.value=Z.photoURL||"")})}),qs(r,Z=>{Z==="registration"&&Ee()}),Ie([]);async function q(){await De.signOut(),window.location.href="/HTF/"}function b(Z){const N=Y.value.find(W=>W.id===Z);N&&N.trainings.push({type:"swimming",name:"",difficulty:"ELEMENTARY",time:"07:00",isPaid:"",address:"",error:!1})}qs(()=>Y.value.map(Z=>Z.trainings.map(N=>N.type)),(Z,N)=>{Y.value.forEach(W=>{W.trainings.forEach(S=>{const H=bp(S.type);!S.difficulty&&H.length>0&&(S.difficulty=H[0].value),S.name=""})})},{deep:!0});function _(Z,N){const W=Y.value.find(S=>S.id===Z);W&&W.trainings.splice(N,1)}async function v(){if(l.value=!1,c.value=!1,!h.value||!f.value){c.value=!0;return}let Z=!1;if(Y.value.forEach(y=>{y.trainings.forEach(T=>{T.error=!1,(!T.name||!T.type||!T.difficulty||!T.time||!T.address)&&(T.error=!0,Z=!0)})}),Z){l.value=!0;return}o.value=!0,await new Promise(y=>setTimeout(y,100));const N=i.value;if(!N){console.error("Canvas not found");return}const W=N.getContext("2d");N.width=1080,N.height=1920,W.fillStyle="#1e3a5f",W.fillRect(0,0,N.width,N.height),W.fillStyle="#ffffff",W.font="bold 60px Arial",W.textAlign="center",W.fillText(" ",N.width/2,100),W.font="bold 80px Arial",W.fillStyle="#ffd700",W.fillText("HAPPY TRI FRIENDS",N.width/2,200),W.fillStyle="#ffffff",W.font="bold 40px Arial";const S=V(h.value),H=V(f.value),j=M(f.value);W.fillText(`${S} - ${H} ${j}`,N.width/2,270),W.fillStyle="#ffd700",W.font="32px Arial",W.fillText("($)     ",N.width/2,330);let ae=360;const _e={:"",:"",:"",:"","'":"",:"",:""};Y.value.forEach(y=>{if(y.trainings.length>0){const P=y.trainings.length>1?(y.trainings.length-1)*20:0,B=60+y.trainings.length*90+P+30;W.strokeStyle="#ffd700",W.lineWidth=3,W.strokeRect(40,ae,N.width-80,B);let $=ae+50;y.trainings.forEach((L,te)=>{te>0&&($+=20);const X=Bc.find(ce=>ce.value===L.type),J=X?X.icon:"";W.font="45px Arial",W.textAlign="left",W.fillText(J,60,$+35),W.fillStyle="#ffffff",W.font="bold 36px Arial";const K=L.isPaid?" ($)":"";W.textAlign="left",W.fillText(L.name+K,130,$+25),W.fillStyle="#ffd700",W.font="24px Arial",W.textAlign="left",W.fillText(L.difficulty,500,$+25),W.fillStyle="#ffffff",W.font="20px Arial",W.textAlign="left",W.fillText(L.address,130,$+50),W.fillStyle="#ffd700",W.font="bold 34px Arial",W.textAlign="right",W.fillText(_e[y.name]||y.name.substring(0,2),N.width-80,$+25),W.fillStyle="#ffd700",W.font="bold 28px Arial",W.textAlign="right",W.fillText(L.time,N.width-80,$+55),$+=90}),ae+=B+20}})}function R(){const Z=i.value;if(!Z)return;const N=document.createElement("a");N.download="htf-schedule.png",N.href=Z.toDataURL("image/png"),N.click()}function A(Z){const N=new Date(h.value),S={monday:0,tuesday:1,wednesday:2,thursday:3,friday:4,saturday:5,sunday:6}[Z],H=new Date(N);return H.setDate(N.getDate()+S),H.toISOString().split("T")[0]}async function C(){if(p.value=!1,F.value=!1,Q.value="",l.value=!1,c.value=!1,!h.value||!f.value){c.value=!0,F.value=!0,Q.value="      ";return}let Z=!1;if(Y.value.forEach(N=>{N.trainings.forEach(W=>{W.error=!1,(!W.name||!W.type||!W.difficulty||!W.time||!W.address)&&(W.error=!0,Z=!0)})}),Z){l.value=!0,F.value=!0,Q.value="  '  ";return}try{const N=[];Y.value.forEach(S=>{if(S.trainings.length>0){const H=A(S.id);S.trainings.forEach(j=>{N.push({date:H,dayName:S.name,type:j.type,name:j.name,difficulty:j.difficulty,time:j.time,isPaid:j.isPaid==="paid",address:j.address,createdAt:new Date().toISOString(),createdBy:De.currentUser?.email||"unknown"})})}});const W=await $c(tn(nn,"schedules"),{weekStart:h.value,weekEnd:f.value,trainings:N,createdAt:new Date().toISOString(),createdBy:De.currentUser?.email||"unknown"});if(W&&W.id)p.value=!0,"Notification"in window&&Notification.permission==="granted"?new Notification("HTF -  ",{body:`  ${N.length} `,icon:"/HTF.png"}):"Notification"in window&&Notification.permission!=="denied"&&Notification.requestPermission().then(S=>{S==="granted"&&new Notification("HTF -  ",{body:`  ${N.length} `,icon:"/HTF.png"})}),setTimeout(()=>{p.value=!1},5e3);else throw new Error("   ID  ")}catch(N){console.error("  :",N),F.value=!0,Q.value=N.message||"   "}}const E=()=>{const Z=new Date,N=Z.getDay(),W=N===0?-6:1-N,S=new Date(Z);S.setDate(Z.getDate()+W),S.setHours(0,0,0,0);const H=new Date(S);return H.setDate(S.getDate()+6),H.setHours(23,59,59,999),{monday:S,sunday:H}},Ue=Z=>new Date(Z).toLocaleDateString("uk-UA",{day:"2-digit",month:"long"}),tt=At(()=>{if(!w.value||!w.value.trainings)return{};const Z={};w.value.trainings.forEach(S=>{const H=S.dayName;Z[H]||(Z[H]=[]),Z[H].push(S)});const N=["","","","","'","",""],W={};return N.forEach(S=>{Z[S]&&(W[S]=Z[S].sort((H,j)=>H.time.localeCompare(j.time)))}),W}),We=Z=>sh(Z),Pe=Z=>({:"bg-green-100 text-green-800",:"bg-yellow-100 text-yellow-800",:"bg-red-100 text-red-800"})[Z]||"bg-gray-100 text-gray-800",Ee=async()=>{if(r.value==="registration")try{m.value=!0;const{monday:Z,sunday:N}=E(),W=Z.toISOString().split("T")[0],S=N.toISOString().split("T")[0],H=gs(tn(nn,"schedules")),j=await _s(H),ae=[];j.forEach(_e=>{const y=_e.data(),T=y.weekStart,P=y.weekEnd;T>=W&&P<=S&&ae.push({id:_e.id,...y})}),ae.length>0?(ae.sort((_e,y)=>{const T=new Date(_e.createdAt||0);return new Date(y.createdAt||0)-T}),w.value=ae[0],await gt()):w.value=null}catch(Z){console.error("  :",Z)}finally{m.value=!1}},gt=async()=>{if(De.currentUser)try{const Z=gs(tn(nn,"registrations"),zs("userId","==",De.currentUser.uid)),N=await _s(Z);D.value=N.docs.map(W=>W.data().trainingId)}catch{}},Ot=Z=>{const N=`${w.value.id}_${Z.date}_${Z.time}`;return D.value.includes(N)},_t=Z=>{const N=new Date(`${Z.date}T${Z.time}:00`),W=new Date,S=2*60,H=W.getTimezoneOffset(),j=new Date(W.getTime()+(S+H)*6e4);return N<j},nt=async Z=>{if(!De.currentUser){alert(" ,     ");return}try{const N=`${w.value.id}_${Z.date}_${Z.time}`;if(Ot(Z))return;await $c(tn(nn,"registrations"),{userId:De.currentUser.uid,userEmail:De.currentUser.email,userName:De.currentUser.displayName||De.currentUser.email,userPhoto:De.currentUser.photoURL||null,trainingId:N,scheduleId:w.value.id,trainingDate:Z.date,trainingTime:Z.time,trainingName:Z.name,trainingType:Z.type,registeredAt:new Date().toISOString()}),D.value.push(N),O.value=`   ${Z.name}`,"Notification"in window&&Notification.permission==="granted"&&new Notification("HTF -  ",{body:`${Z.dayName}, ${Z.time} - ${Z.name}`,icon:"/HTF.png"}),setTimeout(()=>{O.value=""},3e3)}catch(N){alert(" : "+N.message)}},Xt=async Z=>{if(De.currentUser)try{const N=`${w.value.id}_${Z.date}_${Z.time}`,W=gs(tn(nn,"registrations"),zs("userId","==",De.currentUser.uid),zs("trainingId","==",N)),S=await _s(W);if(!S.empty){const H=S.docs[0];await fP(H.ref);const j=D.value.indexOf(N);j>-1&&D.value.splice(j,1),O.value=`  ${Z.name} `,"Notification"in window&&Notification.permission==="granted"&&new Notification("HTF -  ",{body:`${Z.dayName}, ${Z.time} - ${Z.name}`,icon:"/HTF.png"}),setTimeout(()=>{O.value=""},3e3)}}catch(N){alert(" : "+N.message)}};return(Z,N)=>(ne(),se("div",{class:"relative h-screen bg-cover bg-center bg-fixed overflow-hidden",style:Rs({backgroundImage:`url(${Ft(al)})`})},[N[27]||(N[27]=I("div",{class:"absolute inset-0 bg-black opacity-40"},null,-1)),I("div",Rx,[I("div",Sx,[je(oo)]),I("div",Cx,[I("aside",Px,[I("div",xx,[s.value?(ne(),se("div",kx,[I("img",{src:s.value,alt:e.value,class:"w-full h-full object-cover",referrerpolicy:"no-referrer"},null,8,Dx)])):(ne(),se("div",Nx,ye(e.value?e.value.charAt(0).toUpperCase():"A"),1)),I("div",Vx,[I("p",Ox,ye(e.value||""),1),I("button",{onClick:q,class:"bg-red-500 hover:bg-red-600 text-white p-1.5 rounded transition flex-shrink-0",title:""},[...N[4]||(N[4]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z","clip-rule":"evenodd"})],-1)])])]),I("p",Mx,ye(n.value),1)]),I("div",Lx,[N[5]||(N[5]=I("h3",{class:"text-sm font-semibold text-gray-500 uppercase mb-3"},"",-1)),I("button",{onClick:N[0]||(N[0]=W=>r.value="schedule"),class:Dt(["w-full text-left px-4 py-3 rounded-lg mb-2 transition",r.value==="schedule"?"bg-blue-500 text-white":"hover:bg-gray-100 text-gray-700"])},"    ",2)]),I("div",null,[N[6]||(N[6]=I("h3",{class:"text-sm font-semibold text-gray-500 uppercase mb-3"},"",-1)),I("button",{onClick:N[1]||(N[1]=W=>r.value="registration"),class:Dt(["w-full text-left px-4 py-3 rounded-lg mb-2 transition",r.value==="registration"?"bg-blue-500 text-white":"hover:bg-gray-100 text-gray-700"])},"     ",2)])]),I("main",Fx,[r.value==="schedule"?(ne(),se("div",Ux,[N[19]||(N[19]=I("h1",{class:"text-3xl font-bold mb-6"}," ",-1)),I("div",$x,[I("div",Bx,[I("div",null,[N[7]||(N[7]=I("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"   *",-1)),cr(I("input",{"onUpdate:modelValue":N[2]||(N[2]=W=>h.value=W),type:"date",class:Dt(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",c.value&&!h.value?"border-red-500":"border-gray-300"])},null,2),[[kl,h.value]])]),I("div",null,[N[8]||(N[8]=I("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"   *",-1)),cr(I("input",{"onUpdate:modelValue":N[3]||(N[3]=W=>f.value=W),type:"date",class:Dt(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",c.value&&!f.value?"border-red-500":"border-gray-300"])},null,2),[[kl,f.value]])])]),c.value?(ne(),se("p",jx," '      ")):it("",!0)]),I("div",qx,[(ne(!0),se(ze,null,Gt(Y.value,W=>(ne(),se("div",{key:W.id,class:"border border-gray-200 rounded-xl p-2 sm:p-4 bg-gray-50"},[I("h3",Hx,ye(W.name),1),(ne(!0),se(ze,null,Gt(W.trainings,(S,H)=>(ne(),se("div",{key:H,class:"mb-2 sm:mb-4 p-2 sm:p-4 bg-white rounded-lg shadow-sm border border-gray-100"},[I("div",zx,[I("div",null,[N[9]||(N[9]=I("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"  *",-1)),I("div",Gx,[cr(I("select",{"onUpdate:modelValue":j=>S.type=j,class:Dt(["px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",S.error&&!S.type?"border-red-500":"border-gray-300"])},[(ne(!0),se(ze,null,Gt(Ft(Bc),j=>(ne(),se("option",{key:j.value,value:j.value},ye(j.label),9,Kx))),128))],10,Wx),[[Dl,S.type]]),je(Ap,{modelValue:S.name,"onUpdate:modelValue":j=>S.name=j,options:Ft(VP)(S.type),placeholder:"  *"},null,8,["modelValue","onUpdate:modelValue","options"])])]),I("div",null,[N[10]||(N[10]=I("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," *",-1)),cr(I("select",{"onUpdate:modelValue":j=>S.difficulty=j,class:Dt(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",S.error&&!S.difficulty?"border-red-500":"border-gray-300"])},[(ne(!0),se(ze,null,Gt(Ft(bp)(S.type),j=>(ne(),se("option",{key:j.value,value:j.value},ye(j.label),9,Yx))),128))],10,Qx),[[Dl,S.difficulty]])]),I("div",null,[N[11]||(N[11]=I("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"  *",-1)),cr(I("input",{"onUpdate:modelValue":j=>S.time=j,type:"time",class:Dt(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",S.error&&!S.time?"border-red-500":"border-gray-300"])},null,10,Jx),[[kl,S.time]])]),I("div",null,[N[13]||(N[13]=I("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," ",-1)),cr(I("select",{"onUpdate:modelValue":j=>S.isPaid=j,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...N[12]||(N[12]=[I("option",{value:""},"",-1),I("option",{value:"paid"}," ",-1)])],8,Xx),[[Dl,S.isPaid]])]),I("div",Zx,[N[14]||(N[14]=I("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," *",-1)),I("div",e2,[je(Ap,{modelValue:S.address,"onUpdate:modelValue":j=>S.address=j,options:U.value,placeholder:"  *"},null,8,["modelValue","onUpdate:modelValue","options"]),I("button",{onClick:j=>_(W.id,H),class:"px-3 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition"},"  ",8,t2)])])])]))),128)),I("button",{onClick:S=>b(W.id),class:"w-full mt-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition"},"    ",8,n2)]))),128))]),l.value?(ne(),se("div",s2,[...N[15]||(N[15]=[I("p",{class:"font-semibold"},"  ",-1),I("p",null," ,   '  (  *)",-1)])])):it("",!0),I("div",{class:"mt-8 flex gap-4"},[I("button",{onClick:v,class:"flex-1 px-6 py-3 bg-green-500 hover:bg-green-600 text-white font-semibold rounded-lg transition text-lg"},"    "),I("button",{onClick:C,class:"flex-1 px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white font-semibold rounded-lg transition text-lg"},"      ")]),p.value?(ne(),se("div",r2,[...N[16]||(N[16]=[I("p",{class:"font-bold text-lg"},"  !",-1),I("p",null,"      Firebase",-1)])])):it("",!0),F.value?(ne(),se("div",i2,[N[17]||(N[17]=I("p",{class:"font-semibold"},"  ",-1)),I("p",null,ye(Q.value),1)])):it("",!0),o.value?(ne(),se("div",o2,[N[18]||(N[18]=I("h3",{class:"text-xl font-semibold mb-4"}," ",-1)),I("div",a2,[I("canvas",{ref_key:"scheduleCanvas",ref:i,class:"border border-gray-300 rounded-lg shadow-lg max-w-full"},null,512),I("button",{onClick:R,class:"px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white font-semibold rounded-lg transition"},"    ")])])):it("",!0)])):it("",!0),r.value==="registration"?(ne(),se("div",l2,[N[26]||(N[26]=I("h1",{class:"text-3xl font-bold mb-6"},"   ",-1)),m.value?(ne(),se("div",c2,[...N[20]||(N[20]=[I("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"},null,-1),I("p",{class:"text-gray-600"}," ...",-1)])])):!w.value||!w.value.trainings||w.value.trainings.length===0?(ne(),se("div",u2,[...N[21]||(N[21]=[I("p",{class:"text-gray-600 text-xl mb-4"},"       ",-1),I("p",{class:"text-gray-500"},'     " "',-1)])])):(ne(),se("div",h2,[(ne(!0),se(ze,null,Gt(tt.value,(W,S)=>(ne(),se("div",{key:S,class:"border border-gray-200 rounded-xl overflow-hidden"},[I("div",f2,[I("h2",d2,ye(S),1),I("p",p2,ye(Ue(W[0].date)),1)]),I("div",m2,[(ne(!0),se(ze,null,Gt(W,(H,j)=>(ne(),se("div",{key:j,class:"flex items-center justify-between p-4 bg-white rounded-lg hover:shadow-md transition-shadow border border-gray-200"},[I("div",g2,[I("div",_2,[I("span",y2,ye(We(H.type)),1),I("h3",v2,ye(H.name),1),I("span",{class:Dt(["px-3 py-1 rounded-full text-sm font-semibold",Pe(H.difficulty)])},ye(H.difficulty),3),H.isPaid?(ne(),se("span",w2,"   ")):it("",!0)]),I("div",E2,[I("div",T2,[N[22]||(N[22]=I("span",null,"",-1)),I("span",I2,ye(H.time),1)]),I("div",b2,[N[23]||(N[23]=I("span",null,"",-1)),I("span",null,ye(H.address),1)]),I("div",A2,[N[24]||(N[24]=I("span",null,"",-1)),I("span",null,ye(H.type),1)])])]),I("div",R2,[_t(H)&&!Ot(H)?(ne(),se("button",S2,"    ")):Ot(H)?(ne(),se(ze,{key:2},[N[25]||(N[25]=I("button",{class:"px-6 py-3 rounded-lg font-semibold bg-green-500 text-white cursor-default shadow-lg"},"   ",-1)),_t(H)?it("",!0):(ne(),se("button",{key:0,onClick:ae=>Xt(H),class:"px-6 py-2 rounded-lg font-semibold transition-all transform hover:scale-105 bg-red-500 text-white hover:bg-red-600 shadow-lg hover:shadow-xl"},"   ",8,P2))],64)):(ne(),se("button",{key:1,onClick:ae=>nt(H),class:"px-6 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 bg-blue-600 text-white hover:bg-blue-700 shadow-lg hover:shadow-xl"},"   ",8,C2))])]))),128))])]))),128))])),O.value?(ne(),se("div",x2,[I("p",k2," "+ye(O.value),1)])):it("",!0)])):it("",!0)])])])],4))}},N2={class:"relative z-10 min-h-screen flex flex-col"},V2={class:"bg-gray-800"},O2={class:"flex-1 p-2 sm:p-4 md:p-8"},M2={class:"max-w-6xl mx-auto"},L2={class:"bg-white bg-opacity-95 rounded-2xl shadow-2xl p-2 sm:p-4 md:p-8 mb-4 sm:mb-6"},F2={key:0,class:"text-center text-gray-600"},U2={key:0,class:"bg-white bg-opacity-95 rounded-2xl shadow-2xl p-4 sm:p-8 md:p-12 text-center"},$2={key:1,class:"bg-white bg-opacity-95 rounded-2xl shadow-2xl p-4 sm:p-8 md:p-12 text-center"},B2={key:2,class:"space-y-2 sm:space-y-4"},j2={class:"w-full sm:w-32 flex-shrink-0"},q2={class:"bg-gradient-to-br from-blue-600 to-blue-800 rounded-lg p-2 sm:p-4 text-center sticky top-4"},H2={class:"text-base sm:text-lg font-bold text-white"},z2={class:"flex-1 space-y-3"},G2={class:"p-4"},W2={class:"flex items-start justify-between gap-4"},K2={class:"flex-1"},Q2={class:"flex items-center gap-2 mb-2"},Y2={class:"text-2xl"},J2={class:"text-lg font-bold text-gray-800"},X2={key:0,class:"px-2 py-0.5 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800"},Z2={class:"flex items-center gap-4 text-sm text-gray-600"},ek={class:"flex items-center gap-1"},tk={class:"font-semibold"},nk={class:"flex items-center gap-1"},sk={class:"text-xs"},rk={class:"text-xs"},ik={class:"flex-shrink-0"},ok=["onClick"],ak={class:"font-semibold text-gray-800"},lk={class:"text-gray-500 text-xs"},ck={key:0,class:"mt-3 pt-3 border-t border-gray-200"},uk={key:0,class:"text-center text-gray-400 text-sm py-2"},hk={key:1,class:"space-y-1"},fk={class:"font-medium"},dk={class:"text-xs text-gray-500"},pk="/HTF/bg.jpg",mk={__name:"ScheduleView",setup(t){const e=Ie(!0),n=Ie(null),s=Ie([]),r=Ie(new Set),i=()=>{const V=new Date,M=V.getDay(),Y=M===0?-6:1-M,U=new Date(V);U.setDate(V.getDate()+Y),U.setHours(0,0,0,0);const q=new Date(U);return q.setDate(U.getDate()+6),q.setHours(23,59,59,999),{monday:U,sunday:q}},o=V=>new Date(V).toLocaleDateString("uk-UA",{day:"2-digit",month:"long"}),l=V=>new Date(V).toLocaleString("uk-UA",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),c=At(()=>{if(!n.value||!n.value.trainings)return{};const V={};n.value.trainings.forEach(U=>{const q=U.dayName;V[q]||(V[q]=[]),V[q].push(U)});const M=["","","","","'","",""],Y={};return M.forEach(U=>{V[U]&&(Y[U]=V[U].sort((q,b)=>q.time.localeCompare(b.time)))}),Y}),h=V=>sh(V),f=V=>({:"bg-green-100 text-green-800",:"bg-yellow-100 text-yellow-800",:"bg-red-100 text-red-800"})[V]||"bg-gray-100 text-gray-800",p=V=>n.value.id+"_"+V.date+"_"+V.time,m=V=>{const M=p(V);return s.value.filter(Y=>Y.trainingId===M).length},w=V=>{const M=p(V);return s.value.filter(Y=>Y.trainingId===M)},D=V=>{const M=p(V);r.value.has(M)?r.value.delete(M):r.value.add(M)},O=V=>{const M=p(V);return r.value.has(M)},F=async()=>{try{e.value=!0;const{monday:V,sunday:M}=i(),Y=V.toISOString().split("T")[0],U=M.toISOString().split("T")[0],q=gs(tn(nn,"schedules")),b=await _s(q),_=[];b.forEach(v=>{const R=v.data(),A=R.weekStart,C=R.weekEnd;A>=Y&&C<=U&&_.push({id:v.id,...R})}),_.length>0?(_.sort((v,R)=>{const A=new Date(v.createdAt||0);return new Date(R.createdAt||0).getTime()-A.getTime()}),n.value=_[0],await Q(n.value.id)):n.value=null}catch(V){console.error("  :",V)}finally{e.value=!1}},Q=async V=>{try{const M=gs(tn(nn,"registrations"),zs("scheduleId","==",V)),Y=await _s(M);s.value=Y.docs.map(U=>({id:U.id,...U.data()}))}catch(M){console.error("  :",M)}};return Ki(()=>{F()}),(V,M)=>(ne(),se("div",{class:"relative min-h-screen bg-cover bg-center bg-fixed overflow-y-auto",style:Rs({backgroundImage:`url(${pk})`})},[M[7]||(M[7]=I("div",{class:"absolute inset-0 bg-black opacity-40"},null,-1)),I("div",N2,[I("div",V2,[je(oo)]),I("div",O2,[I("div",M2,[I("div",L2,[M[0]||(M[0]=I("h1",{class:"text-4xl font-bold text-gray-800 text-center mb-2 flex items-center justify-center gap-3"},[I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"})]),_r("   ")],-1)),n.value?(ne(),se("p",F2,ye(o(n.value.weekStart))+" - "+ye(o(n.value.weekEnd)),1)):it("",!0)]),e.value?(ne(),se("div",U2,[...M[1]||(M[1]=[I("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"},null,-1),I("p",{class:"text-gray-600"}," ...",-1)])])):!n.value||!n.value.trainings||n.value.trainings.length===0?(ne(),se("div",$2,[...M[2]||(M[2]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 mx-auto mb-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1),I("p",{class:"text-gray-600 text-xl mb-4"},"      ",-1),I("p",{class:"text-gray-500"},"   ",-1)])])):(ne(),se("div",B2,[(ne(!0),se(ze,null,Gt(c.value,(Y,U)=>(ne(),se("div",{key:U,class:"flex flex-col sm:flex-row gap-2 sm:gap-4"},[I("div",j2,[I("div",q2,[I("h2",H2,ye(U),1)])]),I("div",z2,[(ne(!0),se(ze,null,Gt(Y,(q,b)=>(ne(),se("div",{key:b,class:"bg-white bg-opacity-95 rounded-lg shadow-md border border-gray-200"},[I("div",G2,[I("div",W2,[I("div",K2,[I("div",Q2,[I("span",Y2,ye(h(q.type)),1),I("h3",J2,ye(q.name),1),I("span",{class:Dt(["px-2 py-0.5 rounded-full text-xs font-semibold",f(q.difficulty)])},ye(q.difficulty),3),q.isPaid?(ne(),se("span",X2,"  ")):it("",!0)]),I("div",Z2,[I("div",ek,[M[3]||(M[3]=I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),I("span",tk,ye(q.time),1)]),I("div",nk,[M[4]||(M[4]=I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)),I("span",sk,ye(q.address),1)]),I("span",rk,ye(q.type),1)])]),I("div",ik,[I("button",{onClick:_=>D(q),class:"flex items-center gap-2 px-3 py-2 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors text-sm"},[M[5]||(M[5]=I("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-blue-600",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"})],-1)),I("span",ak,ye(m(q)),1),I("span",lk,ye(O(q)?"":""),1)],8,ok)])]),O(q)?(ne(),se("div",ck,[w(q).length===0?(ne(),se("div",uk,"   ")):(ne(),se("div",hk,[(ne(!0),se(ze,null,Gt(w(q),(_,v)=>(ne(),se("div",{key:v,class:"text-sm text-gray-700 py-1"},[I("span",fk,ye(_.userName),1),M[6]||(M[6]=I("span",{class:"text-gray-400 mx-1"},"",-1)),I("span",dk,ye(l(_.registeredAt)),1)]))),128))]))])):it("",!0)])]))),128))])]))),128))]))])])])],4))}},My=UE({history:_E("/HTF/"),routes:[{path:"/",name:"home",component:CP},{path:"/login",name:"login",component:kP},{path:"/schedule",name:"schedule",component:mk},{path:"/user",name:"user",component:wx,meta:{requiresAuth:!0}},{path:"/admin",name:"admin",component:D2,meta:{requiresAuth:!0,requiresAdmin:!0}}]}),gk=["kulikalovdenis@gmail.com","bugary20@gmail.com"],_k=()=>new Promise((t,e)=>{const n=qa(De,s=>{n(),t(s)},e)});My.beforeEach(async(t,e,n)=>{const s=t.matched.some(i=>i.meta.requiresAuth),r=t.matched.some(i=>i.meta.requiresAdmin);if(s||r){const i=await _k();s&&!i?n("/login"):r&&i?gk.includes(i.email||"")?n():n("/user"):n()}else n()});const Ly=R0(D0);Ly.use(My);Ly.mount("#app");
