(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function pu(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const je={},Vr=[],Cn=()=>{},fm=()=>!1,qa=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),mu=t=>t.startsWith("onUpdate:"),Et=Object.assign,gu=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},u0=Object.prototype.hasOwnProperty,Fe=(t,e)=>u0.call(t,e),ve=Array.isArray,Or=t=>za(t)==="[object Map]",pm=t=>za(t)==="[object Set]",be=t=>typeof t=="function",at=t=>typeof t=="string",ss=t=>typeof t=="symbol",Ge=t=>t!==null&&typeof t=="object",mm=t=>(Ge(t)||be(t))&&be(t.then)&&be(t.catch),gm=Object.prototype.toString,za=t=>gm.call(t),h0=t=>za(t).slice(8,-1),_m=t=>za(t)==="[object Object]",_u=t=>at(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Vi=pu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ga=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},d0=/-\w/g,on=Ga(t=>t.replace(d0,e=>e.slice(1).toUpperCase())),f0=/\B([A-Z])/g,mr=Ga(t=>t.replace(f0,"-$1").toLowerCase()),Wa=Ga(t=>t.charAt(0).toUpperCase()+t.slice(1)),Gl=Ga(t=>t?`on${Wa(t)}`:""),Ts=(t,e)=>!Object.is(t,e),Yo=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},ym=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},yu=t=>{const e=parseFloat(t);return isNaN(e)?t:e},p0=t=>{const e=at(t)?Number(t):NaN;return isNaN(e)?t:e};let bd;const Ka=()=>bd||(bd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Us(t){if(ve(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=at(s)?y0(s):Us(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(at(t)||Ge(t))return t}const m0=/;(?![^(]*\))/g,g0=/:([^]+)/,_0=/\/\*[^]*?\*\//g;function y0(t){const e={};return t.replace(_0,"").split(m0).forEach(n=>{if(n){const s=n.split(g0);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Ze(t){let e="";if(at(t))e=t;else if(ve(t))for(let n=0;n<t.length;n++){const s=Ze(t[n]);s&&(e+=s+" ")}else if(Ge(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const v0="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",w0=pu(v0);function vm(t){return!!t||t===""}const wm=t=>!!(t&&t.__v_isRef===!0),fe=t=>at(t)?t:t==null?"":ve(t)||Ge(t)&&(t.toString===gm||!be(t.toString))?wm(t)?fe(t.value):JSON.stringify(t,bm,2):String(t),bm=(t,e)=>wm(e)?bm(t,e.value):Or(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[Wl(s,i)+" =>"]=r,n),{})}:pm(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Wl(n))}:ss(e)?Wl(e):Ge(e)&&!ve(e)&&!_m(e)?String(e):e,Wl=(t,e="")=>{var n;return ss(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let Ht;class b0{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ht,!e&&Ht&&(this.index=(Ht.scopes||(Ht.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Ht;try{return Ht=this,e()}finally{Ht=n}}}on(){++this._on===1&&(this.prevScope=Ht,Ht=this)}off(){this._on>0&&--this._on===0&&(Ht=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function E0(){return Ht}let qe;const Kl=new WeakSet;class Em{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ht&&Ht.active&&Ht.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Kl.has(this)&&(Kl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Im(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ed(this),Am(this);const e=qe,n=dn;qe=this,dn=!0;try{return this.fn()}finally{Rm(this),qe=e,dn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)bu(e);this.deps=this.depsTail=void 0,Ed(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Kl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ic(this)&&this.run()}get dirty(){return Ic(this)}}let Tm=0,Oi,Mi;function Im(t,e=!1){if(t.flags|=8,e){t.next=Mi,Mi=t;return}t.next=Oi,Oi=t}function vu(){Tm++}function wu(){if(--Tm>0)return;if(Mi){let e=Mi;for(Mi=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Oi;){let e=Oi;for(Oi=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function Am(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Rm(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),bu(s),T0(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function Ic(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Sm(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Sm(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Wi)||(t.globalVersion=Wi,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Ic(t))))return;t.flags|=2;const e=t.dep,n=qe,s=dn;qe=t,dn=!0;try{Am(t);const r=t.fn(t._value);(e.version===0||Ts(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{qe=n,dn=s,Rm(t),t.flags&=-3}}function bu(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)bu(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function T0(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let dn=!0;const xm=[];function Yn(){xm.push(dn),dn=!1}function Xn(){const t=xm.pop();dn=t===void 0?!0:t}function Ed(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=qe;qe=void 0;try{e()}finally{qe=n}}}let Wi=0;class I0{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Eu{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!qe||!dn||qe===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==qe)n=this.activeLink=new I0(qe,this),qe.deps?(n.prevDep=qe.depsTail,qe.depsTail.nextDep=n,qe.depsTail=n):qe.deps=qe.depsTail=n,Cm(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=qe.depsTail,n.nextDep=void 0,qe.depsTail.nextDep=n,qe.depsTail=n,qe.deps===n&&(qe.deps=s)}return n}trigger(e){this.version++,Wi++,this.notify(e)}notify(e){vu();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{wu()}}}function Cm(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)Cm(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Ac=new WeakMap,or=Symbol(""),Rc=Symbol(""),Ki=Symbol("");function Pt(t,e,n){if(dn&&qe){let s=Ac.get(t);s||Ac.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new Eu),r.map=s,r.key=n),r.track()}}function zn(t,e,n,s,r,i){const o=Ac.get(t);if(!o){Wi++;return}const l=c=>{c&&c.trigger()};if(vu(),e==="clear")o.forEach(l);else{const c=ve(t),u=c&&_u(n);if(c&&n==="length"){const d=Number(s);o.forEach((f,m)=>{(m==="length"||m===Ki||!ss(m)&&m>=d)&&l(f)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),u&&l(o.get(Ki)),e){case"add":c?u&&l(o.get("length")):(l(o.get(or)),Or(t)&&l(o.get(Rc)));break;case"delete":c||(l(o.get(or)),Or(t)&&l(o.get(Rc)));break;case"set":Or(t)&&l(o.get(or));break}}wu()}function Ar(t){const e=Oe(t);return e===t?e:(Pt(e,"iterate",Ki),rn(t)?e:e.map(_n))}function Qa(t){return Pt(t=Oe(t),"iterate",Ki),t}function ms(t,e){return Jn(t)?ar(t)?Qr(_n(e)):Qr(e):_n(e)}const A0={__proto__:null,[Symbol.iterator](){return Ql(this,Symbol.iterator,t=>ms(this,t))},concat(...t){return Ar(this).concat(...t.map(e=>ve(e)?Ar(e):e))},entries(){return Ql(this,"entries",t=>(t[1]=ms(this,t[1]),t))},every(t,e){return $n(this,"every",t,e,void 0,arguments)},filter(t,e){return $n(this,"filter",t,e,n=>n.map(s=>ms(this,s)),arguments)},find(t,e){return $n(this,"find",t,e,n=>ms(this,n),arguments)},findIndex(t,e){return $n(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return $n(this,"findLast",t,e,n=>ms(this,n),arguments)},findLastIndex(t,e){return $n(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return $n(this,"forEach",t,e,void 0,arguments)},includes(...t){return Yl(this,"includes",t)},indexOf(...t){return Yl(this,"indexOf",t)},join(t){return Ar(this).join(t)},lastIndexOf(...t){return Yl(this,"lastIndexOf",t)},map(t,e){return $n(this,"map",t,e,void 0,arguments)},pop(){return Ri(this,"pop")},push(...t){return Ri(this,"push",t)},reduce(t,...e){return Td(this,"reduce",t,e)},reduceRight(t,...e){return Td(this,"reduceRight",t,e)},shift(){return Ri(this,"shift")},some(t,e){return $n(this,"some",t,e,void 0,arguments)},splice(...t){return Ri(this,"splice",t)},toReversed(){return Ar(this).toReversed()},toSorted(t){return Ar(this).toSorted(t)},toSpliced(...t){return Ar(this).toSpliced(...t)},unshift(...t){return Ri(this,"unshift",t)},values(){return Ql(this,"values",t=>ms(this,t))}};function Ql(t,e,n){const s=Qa(t),r=s[e]();return s!==t&&!rn(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=n(i.value)),i}),r}const R0=Array.prototype;function $n(t,e,n,s,r,i){const o=Qa(t),l=o!==t&&!rn(t),c=o[e];if(c!==R0[e]){const f=c.apply(t,i);return l?_n(f):f}let u=n;o!==t&&(l?u=function(f,m){return n.call(this,ms(t,f),m,t)}:n.length>2&&(u=function(f,m){return n.call(this,f,m,t)}));const d=c.call(o,u,s);return l&&r?r(d):d}function Td(t,e,n,s){const r=Qa(t);let i=n;return r!==t&&(rn(t)?n.length>3&&(i=function(o,l,c){return n.call(this,o,l,c,t)}):i=function(o,l,c){return n.call(this,o,ms(t,l),c,t)}),r[e](i,...s)}function Yl(t,e,n){const s=Oe(t);Pt(s,"iterate",Ki);const r=s[e](...n);return(r===-1||r===!1)&&Au(n[0])?(n[0]=Oe(n[0]),s[e](...n)):r}function Ri(t,e,n=[]){Yn(),vu();const s=Oe(t)[e].apply(t,n);return wu(),Xn(),s}const S0=pu("__proto__,__v_isRef,__isVue"),Pm=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ss));function x0(t){ss(t)||(t=String(t));const e=Oe(this);return Pt(e,"has",t),e.hasOwnProperty(t)}class km{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?F0:Om:i?Vm:Nm).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=ve(e);if(!r){let c;if(o&&(c=A0[n]))return c;if(n==="hasOwnProperty")return x0}const l=Reflect.get(e,n,Vt(e)?e:s);if((ss(n)?Pm.has(n):S0(n))||(r||Pt(e,"get",n),i))return l;if(Vt(l)){const c=o&&_u(n)?l:l.value;return r&&Ge(c)?xc(c):c}return Ge(l)?r?xc(l):Ya(l):l}}class Dm extends km{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];const o=ve(e)&&_u(n);if(!this._isShallow){const u=Jn(i);if(!rn(s)&&!Jn(s)&&(i=Oe(i),s=Oe(s)),!o&&Vt(i)&&!Vt(s))return u||(i.value=s),!0}const l=o?Number(n)<e.length:Fe(e,n),c=Reflect.set(e,n,s,Vt(e)?e:r);return e===Oe(r)&&(l?Ts(s,i)&&zn(e,"set",n,s):zn(e,"add",n,s)),c}deleteProperty(e,n){const s=Fe(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&zn(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!ss(n)||!Pm.has(n))&&Pt(e,"has",n),s}ownKeys(e){return Pt(e,"iterate",ve(e)?"length":or),Reflect.ownKeys(e)}}class C0 extends km{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const P0=new Dm,k0=new C0,D0=new Dm(!0);const Sc=t=>t,Fo=t=>Reflect.getPrototypeOf(t);function N0(t,e,n){return function(...s){const r=this.__v_raw,i=Oe(r),o=Or(i),l=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=r[t](...s),d=n?Sc:e?Qr:_n;return!e&&Pt(i,"iterate",c?Rc:or),{next(){const{value:f,done:m}=u.next();return m?{value:f,done:m}:{value:l?[d(f[0]),d(f[1])]:d(f),done:m}},[Symbol.iterator](){return this}}}}function Uo(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function V0(t,e){const n={get(r){const i=this.__v_raw,o=Oe(i),l=Oe(r);t||(Ts(r,l)&&Pt(o,"get",r),Pt(o,"get",l));const{has:c}=Fo(o),u=e?Sc:t?Qr:_n;if(c.call(o,r))return u(i.get(r));if(c.call(o,l))return u(i.get(l));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&Pt(Oe(r),"iterate",or),r.size},has(r){const i=this.__v_raw,o=Oe(i),l=Oe(r);return t||(Ts(r,l)&&Pt(o,"has",r),Pt(o,"has",l)),r===l?i.has(r):i.has(r)||i.has(l)},forEach(r,i){const o=this,l=o.__v_raw,c=Oe(l),u=e?Sc:t?Qr:_n;return!t&&Pt(c,"iterate",or),l.forEach((d,f)=>r.call(i,u(d),u(f),o))}};return Et(n,t?{add:Uo("add"),set:Uo("set"),delete:Uo("delete"),clear:Uo("clear")}:{add(r){!e&&!rn(r)&&!Jn(r)&&(r=Oe(r));const i=Oe(this);return Fo(i).has.call(i,r)||(i.add(r),zn(i,"add",r,r)),this},set(r,i){!e&&!rn(i)&&!Jn(i)&&(i=Oe(i));const o=Oe(this),{has:l,get:c}=Fo(o);let u=l.call(o,r);u||(r=Oe(r),u=l.call(o,r));const d=c.call(o,r);return o.set(r,i),u?Ts(i,d)&&zn(o,"set",r,i):zn(o,"add",r,i),this},delete(r){const i=Oe(this),{has:o,get:l}=Fo(i);let c=o.call(i,r);c||(r=Oe(r),c=o.call(i,r)),l&&l.call(i,r);const u=i.delete(r);return c&&zn(i,"delete",r,void 0),u},clear(){const r=Oe(this),i=r.size!==0,o=r.clear();return i&&zn(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=N0(r,t,e)}),n}function Tu(t,e){const n=V0(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(Fe(n,r)&&r in s?n:s,r,i)}const O0={get:Tu(!1,!1)},M0={get:Tu(!1,!0)},L0={get:Tu(!0,!1)};const Nm=new WeakMap,Vm=new WeakMap,Om=new WeakMap,F0=new WeakMap;function U0(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function $0(t){return t.__v_skip||!Object.isExtensible(t)?0:U0(h0(t))}function Ya(t){return Jn(t)?t:Iu(t,!1,P0,O0,Nm)}function Mm(t){return Iu(t,!1,D0,M0,Vm)}function xc(t){return Iu(t,!0,k0,L0,Om)}function Iu(t,e,n,s,r){if(!Ge(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=$0(t);if(i===0)return t;const o=r.get(t);if(o)return o;const l=new Proxy(t,i===2?s:n);return r.set(t,l),l}function ar(t){return Jn(t)?ar(t.__v_raw):!!(t&&t.__v_isReactive)}function Jn(t){return!!(t&&t.__v_isReadonly)}function rn(t){return!!(t&&t.__v_isShallow)}function Au(t){return t?!!t.__v_raw:!1}function Oe(t){const e=t&&t.__v_raw;return e?Oe(e):t}function B0(t){return!Fe(t,"__v_skip")&&Object.isExtensible(t)&&ym(t,"__v_skip",!0),t}const _n=t=>Ge(t)?Ya(t):t,Qr=t=>Ge(t)?xc(t):t;function Vt(t){return t?t.__v_isRef===!0:!1}function me(t){return Lm(t,!1)}function j0(t){return Lm(t,!0)}function Lm(t,e){return Vt(t)?t:new H0(t,e)}class H0{constructor(e,n){this.dep=new Eu,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Oe(e),this._value=n?e:_n(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||rn(e)||Jn(e);e=s?e:Oe(e),Ts(e,n)&&(this._rawValue=e,this._value=s?e:_n(e),this.dep.trigger())}}function gt(t){return Vt(t)?t.value:t}const q0={get:(t,e,n)=>e==="__v_raw"?t:gt(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return Vt(r)&&!Vt(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function Fm(t){return ar(t)?t:new Proxy(t,q0)}class z0{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Eu(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Wi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&qe!==this)return Im(this,!0),!0}get value(){const e=this.dep.track();return Sm(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function G0(t,e,n=!1){let s,r;return be(t)?s=t:(s=t.get,r=t.set),new z0(s,r,n)}const $o={},da=new WeakMap;let Zs;function W0(t,e=!1,n=Zs){if(n){let s=da.get(n);s||da.set(n,s=[]),s.push(t)}}function K0(t,e,n=je){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:l,call:c}=n,u=D=>r?D:rn(D)||r===!1||r===0?Gn(D,1):Gn(D);let d,f,m,_,x=!1,k=!1;if(Vt(t)?(f=()=>t.value,x=rn(t)):ar(t)?(f=()=>u(t),x=!0):ve(t)?(k=!0,x=t.some(D=>ar(D)||rn(D)),f=()=>t.map(D=>{if(Vt(D))return D.value;if(ar(D))return u(D);if(be(D))return c?c(D,2):D()})):be(t)?e?f=c?()=>c(t,2):t:f=()=>{if(m){Yn();try{m()}finally{Xn()}}const D=Zs;Zs=d;try{return c?c(t,3,[_]):t(_)}finally{Zs=D}}:f=Cn,e&&r){const D=f,U=r===!0?1/0:r;f=()=>Gn(D(),U)}const V=E0(),H=()=>{d.stop(),V&&V.active&&gu(V.effects,d)};if(i&&e){const D=e;e=(...U)=>{D(...U),H()}}let O=k?new Array(t.length).fill($o):$o;const C=D=>{if(!(!(d.flags&1)||!d.dirty&&!D))if(e){const U=d.run();if(r||x||(k?U.some((F,v)=>Ts(F,O[v])):Ts(U,O))){m&&m();const F=Zs;Zs=d;try{const v=[U,O===$o?void 0:k&&O[0]===$o?[]:O,_];O=U,c?c(e,3,v):e(...v)}finally{Zs=F}}}else d.run()};return l&&l(C),d=new Em(f),d.scheduler=o?()=>o(C,!1):C,_=D=>W0(D,!1,d),m=d.onStop=()=>{const D=da.get(d);if(D){if(c)c(D,4);else for(const U of D)U();da.delete(d)}},e?s?C(!0):O=d.run():o?o(C.bind(null,!0),!0):d.run(),H.pause=d.pause.bind(d),H.resume=d.resume.bind(d),H.stop=H,H}function Gn(t,e=1/0,n){if(e<=0||!Ge(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,Vt(t))Gn(t.value,e,n);else if(ve(t))for(let s=0;s<t.length;s++)Gn(t[s],e,n);else if(pm(t)||Or(t))t.forEach(s=>{Gn(s,e,n)});else if(_m(t)){for(const s in t)Gn(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Gn(t[s],e,n)}return t}function uo(t,e,n,s){try{return s?t(...s):t()}catch(r){Xa(r,e,n)}}function yn(t,e,n,s){if(be(t)){const r=uo(t,e,n,s);return r&&mm(r)&&r.catch(i=>{Xa(i,e,n)}),r}if(ve(t)){const r=[];for(let i=0;i<t.length;i++)r.push(yn(t[i],e,n,s));return r}}function Xa(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||je;if(e){let l=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let f=0;f<d.length;f++)if(d[f](t,c,u)===!1)return}l=l.parent}if(i){Yn(),uo(i,null,10,[t,c,u]),Xn();return}}Q0(t,n,r,s,o)}function Q0(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const $t=[];let An=-1;const Mr=[];let gs=null,Sr=0;const Um=Promise.resolve();let fa=null;function Ru(t){const e=fa||Um;return t?e.then(this?t.bind(this):t):e}function Y0(t){let e=An+1,n=$t.length;for(;e<n;){const s=e+n>>>1,r=$t[s],i=Qi(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function Su(t){if(!(t.flags&1)){const e=Qi(t),n=$t[$t.length-1];!n||!(t.flags&2)&&e>=Qi(n)?$t.push(t):$t.splice(Y0(e),0,t),t.flags|=1,$m()}}function $m(){fa||(fa=Um.then(jm))}function X0(t){ve(t)?Mr.push(...t):gs&&t.id===-1?gs.splice(Sr+1,0,t):t.flags&1||(Mr.push(t),t.flags|=1),$m()}function Id(t,e,n=An+1){for(;n<$t.length;n++){const s=$t[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;$t.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Bm(t){if(Mr.length){const e=[...new Set(Mr)].sort((n,s)=>Qi(n)-Qi(s));if(Mr.length=0,gs){gs.push(...e);return}for(gs=e,Sr=0;Sr<gs.length;Sr++){const n=gs[Sr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}gs=null,Sr=0}}const Qi=t=>t.id==null?t.flags&2?-1:1/0:t.id;function jm(t){try{for(An=0;An<$t.length;An++){const e=$t[An];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),uo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;An<$t.length;An++){const e=$t[An];e&&(e.flags&=-2)}An=-1,$t.length=0,Bm(),fa=null,($t.length||Mr.length)&&jm()}}let At=null,Hm=null;function pa(t){const e=At;return At=t,Hm=t&&t.type.__scopeId||null,e}function Ft(t,e=At,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&_a(-1);const i=pa(e);let o;try{o=t(...r)}finally{pa(i),s._d&&_a(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Lr(t,e){if(At===null)return t;const n=nl(At),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,l,c=je]=e[r];i&&(be(i)&&(i={mounted:i,updated:i}),i.deep&&Gn(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:l,modifiers:c}))}return t}function Qs(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const l=r[o];i&&(l.oldValue=i[o].value);let c=l.dir[s];c&&(Yn(),yn(c,n,8,[t.el,l,t,e]),Xn())}}const J0=Symbol("_vte"),qm=t=>t.__isTeleport,qn=Symbol("_leaveCb"),Bo=Symbol("_enterCb");function Z0(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return is(()=>{t.isMounted=!0}),Zm(()=>{t.isUnmounting=!0}),t}const tn=[Function,Array],zm={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:tn,onEnter:tn,onAfterEnter:tn,onEnterCancelled:tn,onBeforeLeave:tn,onLeave:tn,onAfterLeave:tn,onLeaveCancelled:tn,onBeforeAppear:tn,onAppear:tn,onAfterAppear:tn,onAppearCancelled:tn},Gm=t=>{const e=t.subTree;return e.component?Gm(e.component):e},ew={name:"BaseTransition",props:zm,setup(t,{slots:e}){const n=Rg(),s=Z0();return()=>{const r=e.default&&Qm(e.default(),!0);if(!r||!r.length)return;const i=Wm(r),o=Oe(t),{mode:l}=o;if(s.isLeaving)return Xl(i);const c=Ad(i);if(!c)return Xl(i);let u=Cc(c,o,s,n,f=>u=f);c.type!==Dt&&Yi(c,u);let d=n.subTree&&Ad(n.subTree);if(d&&d.type!==Dt&&!tr(d,c)&&Gm(n).type!==Dt){let f=Cc(d,o,s,n);if(Yi(d,f),l==="out-in"&&c.type!==Dt)return s.isLeaving=!0,f.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,d=void 0},Xl(i);l==="in-out"&&c.type!==Dt?f.delayLeave=(m,_,x)=>{const k=Km(s,d);k[String(d.key)]=d,m[qn]=()=>{_(),m[qn]=void 0,delete u.delayedLeave,d=void 0},u.delayedLeave=()=>{x(),delete u.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return i}}};function Wm(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Dt){e=n;break}}return e}const tw=ew;function Km(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function Cc(t,e,n,s,r){const{appear:i,mode:o,persisted:l=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:d,onEnterCancelled:f,onBeforeLeave:m,onLeave:_,onAfterLeave:x,onLeaveCancelled:k,onBeforeAppear:V,onAppear:H,onAfterAppear:O,onAppearCancelled:C}=e,D=String(t.key),U=Km(n,t),F=(b,S)=>{b&&yn(b,s,9,S)},v=(b,S)=>{const R=S[1];F(b,S),ve(b)?b.every(A=>A.length<=1)&&R():b.length<=1&&R()},w={mode:o,persisted:l,beforeEnter(b){let S=c;if(!n.isMounted)if(i)S=V||c;else return;b[qn]&&b[qn](!0);const R=U[D];R&&tr(t,R)&&R.el[qn]&&R.el[qn](),F(S,[b])},enter(b){let S=u,R=d,A=f;if(!n.isMounted)if(i)S=H||u,R=O||d,A=C||f;else return;let E=!1;const De=b[Bo]=Je=>{E||(E=!0,Je?F(A,[b]):F(R,[b]),w.delayedLeave&&w.delayedLeave(),b[Bo]=void 0)};S?v(S,[b,De]):De()},leave(b,S){const R=String(t.key);if(b[Bo]&&b[Bo](!0),n.isUnmounting)return S();F(m,[b]);let A=!1;const E=b[qn]=De=>{A||(A=!0,S(),De?F(k,[b]):F(x,[b]),b[qn]=void 0,U[R]===t&&delete U[R])};U[R]=t,_?v(_,[b,E]):E()},clone(b){const S=Cc(b,e,n,s,r);return r&&r(S),S}};return w}function Xl(t){if(Ja(t))return t=ks(t),t.children=null,t}function Ad(t){if(!Ja(t))return qm(t.type)&&t.children?Wm(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&be(n.default))return n.default()}}function Yi(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Yi(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Qm(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const l=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===He?(o.patchFlag&128&&r++,s=s.concat(Qm(o.children,e,l))):(e||o.type!==Dt)&&s.push(l!=null?ks(o,{key:l}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}function Ym(t,e){return be(t)?Et({name:t.name},e,{setup:t}):t}function Xm(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const ma=new WeakMap;function Li(t,e,n,s,r=!1){if(ve(t)){t.forEach((x,k)=>Li(x,e&&(ve(e)?e[k]:e),n,s,r));return}if(Fr(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Li(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?nl(s.component):s.el,o=r?null:i,{i:l,r:c}=t,u=e&&e.r,d=l.refs===je?l.refs={}:l.refs,f=l.setupState,m=Oe(f),_=f===je?fm:x=>Fe(m,x);if(u!=null&&u!==c){if(Rd(e),at(u))d[u]=null,_(u)&&(f[u]=null);else if(Vt(u)){u.value=null;const x=e;x.k&&(d[x.k]=null)}}if(be(c))uo(c,l,12,[o,d]);else{const x=at(c),k=Vt(c);if(x||k){const V=()=>{if(t.f){const H=x?_(c)?f[c]:d[c]:c.value;if(r)ve(H)&&gu(H,i);else if(ve(H))H.includes(i)||H.push(i);else if(x)d[c]=[i],_(c)&&(f[c]=d[c]);else{const O=[i];c.value=O,t.k&&(d[t.k]=O)}}else x?(d[c]=o,_(c)&&(f[c]=o)):k&&(c.value=o,t.k&&(d[t.k]=o))};if(o){const H=()=>{V(),ma.delete(t)};H.id=-1,ma.set(t,H),Qt(H,n)}else Rd(t),V()}}}function Rd(t){const e=ma.get(t);e&&(e.flags|=8,ma.delete(t))}Ka().requestIdleCallback;Ka().cancelIdleCallback;const Fr=t=>!!t.type.__asyncLoader,Ja=t=>t.type.__isKeepAlive;function nw(t,e){Jm(t,"a",e)}function sw(t,e){Jm(t,"da",e)}function Jm(t,e,n=Nt){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Za(e,s,n),n){let r=n.parent;for(;r&&r.parent;)Ja(r.parent.vnode)&&rw(s,e,n,r),r=r.parent}}function rw(t,e,n,s){const r=Za(e,t,s,!0);eg(()=>{gu(s[e],r)},n)}function Za(t,e,n=Nt,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Yn();const l=ho(n),c=yn(e,n,t,o);return l(),Xn(),c});return s?r.unshift(i):r.push(i),i}}const rs=t=>(e,n=Nt)=>{(!Zi||t==="sp")&&Za(t,(...s)=>e(...s),n)},iw=rs("bm"),is=rs("m"),ow=rs("bu"),aw=rs("u"),Zm=rs("bum"),eg=rs("um"),lw=rs("sp"),cw=rs("rtg"),uw=rs("rtc");function hw(t,e=Nt){Za("ec",t,e)}const tg="components";function ng(t,e){return rg(tg,t,!0,e)||t}const sg=Symbol.for("v-ndc");function dw(t){return at(t)?rg(tg,t,!1)||t:t||sg}function rg(t,e,n=!0,s=!1){const r=At||Nt;if(r){const i=r.type;{const l=Zw(i,!1);if(l&&(l===e||l===on(e)||l===Wa(on(e))))return i}const o=Sd(r[t]||i[t],e)||Sd(r.appContext[t],e);return!o&&s?i:o}}function Sd(t,e){return t&&(t[e]||t[on(e)]||t[Wa(on(e))])}function fn(t,e,n,s){let r;const i=n,o=ve(t);if(o||at(t)){const l=o&&ar(t);let c=!1,u=!1;l&&(c=!rn(t),u=Jn(t),t=Qa(t)),r=new Array(t.length);for(let d=0,f=t.length;d<f;d++)r[d]=e(c?u?Qr(_n(t[d])):_n(t[d]):t[d],d,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let l=0;l<t;l++)r[l]=e(l+1,l,void 0,i)}else if(Ge(t))if(t[Symbol.iterator])r=Array.from(t,(l,c)=>e(l,c,void 0,i));else{const l=Object.keys(t);r=new Array(l.length);for(let c=0,u=l.length;c<u;c++){const d=l[c];r[c]=e(t[d],d,c,i)}}else r=[];return r}function xd(t,e,n={},s,r){if(At.ce||At.parent&&Fr(At.parent)&&At.parent.ce){const u=Object.keys(n).length>0;return e!=="default"&&(n.name=e),W(),xn(He,null,[Ie("slot",n,s&&s())],u?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),W();const o=i&&ig(i(n)),l=n.key||o&&o.key,c=xn(He,{key:(l&&!ss(l)?l:`_${e}`)+(!o&&s?"_fb":"")},o||(s?s():[]),o&&t._===1?64:-2);return c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),i&&i._c&&(i._d=!0),c}function ig(t){return t.some(e=>Ji(e)?!(e.type===Dt||e.type===He&&!ig(e.children)):!0)?t:null}const Pc=t=>t?Sg(t)?nl(t):Pc(t.parent):null,Fi=Et(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Pc(t.parent),$root:t=>Pc(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>ag(t),$forceUpdate:t=>t.f||(t.f=()=>{Su(t.update)}),$nextTick:t=>t.n||(t.n=Ru.bind(t.proxy)),$watch:t=>Tw.bind(t)}),Jl=(t,e)=>t!==je&&!t.__isScriptSetup&&Fe(t,e),fw={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:l,appContext:c}=t;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(Jl(s,e))return o[e]=1,s[e];if(r!==je&&Fe(r,e))return o[e]=2,r[e];if(Fe(i,e))return o[e]=3,i[e];if(n!==je&&Fe(n,e))return o[e]=4,n[e];kc&&(o[e]=0)}}const u=Fi[e];let d,f;if(u)return e==="$attrs"&&Pt(t.attrs,"get",""),u(t);if((d=l.__cssModules)&&(d=d[e]))return d;if(n!==je&&Fe(n,e))return o[e]=4,n[e];if(f=c.config.globalProperties,Fe(f,e))return f[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return Jl(r,e)?(r[e]=n,!0):s!==je&&Fe(s,e)?(s[e]=n,!0):Fe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,props:i,type:o}},l){let c;return!!(n[l]||t!==je&&l[0]!=="$"&&Fe(t,l)||Jl(e,l)||Fe(i,l)||Fe(s,l)||Fe(Fi,l)||Fe(r.config.globalProperties,l)||(c=o.__cssModules)&&c[l])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Fe(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Cd(t){return ve(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let kc=!0;function pw(t){const e=ag(t),n=t.proxy,s=t.ctx;kc=!1,e.beforeCreate&&Pd(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:l,provide:c,inject:u,created:d,beforeMount:f,mounted:m,beforeUpdate:_,updated:x,activated:k,deactivated:V,beforeDestroy:H,beforeUnmount:O,destroyed:C,unmounted:D,render:U,renderTracked:F,renderTriggered:v,errorCaptured:w,serverPrefetch:b,expose:S,inheritAttrs:R,components:A,directives:E,filters:De}=e;if(u&&mw(u,s,null),o)for(const Ve in o){const xe=o[Ve];be(xe)&&(s[Ve]=xe.bind(n))}if(r){const Ve=r.call(n,n);Ge(Ve)&&(t.data=Ya(Ve))}if(kc=!0,i)for(const Ve in i){const xe=i[Ve],de=be(xe)?xe.bind(n,n):be(xe.get)?xe.get.bind(n,n):Cn,K=!be(xe)&&be(xe.set)?xe.set.bind(n):Cn,M=et({get:de,set:K});Object.defineProperty(s,Ve,{enumerable:!0,configurable:!0,get:()=>M.value,set:ae=>M.value=ae})}if(l)for(const Ve in l)og(l[Ve],s,n,Ve);if(c){const Ve=be(c)?c.call(n):c;Reflect.ownKeys(Ve).forEach(xe=>{Xo(xe,Ve[xe])})}d&&Pd(d,t,"c");function We(Ve,xe){ve(xe)?xe.forEach(de=>Ve(de.bind(n))):xe&&Ve(xe.bind(n))}if(We(iw,f),We(is,m),We(ow,_),We(aw,x),We(nw,k),We(sw,V),We(hw,w),We(uw,F),We(cw,v),We(Zm,O),We(eg,D),We(lw,b),ve(S))if(S.length){const Ve=t.exposed||(t.exposed={});S.forEach(xe=>{Object.defineProperty(Ve,xe,{get:()=>n[xe],set:de=>n[xe]=de,enumerable:!0})})}else t.exposed||(t.exposed={});U&&t.render===Cn&&(t.render=U),R!=null&&(t.inheritAttrs=R),A&&(t.components=A),E&&(t.directives=E),b&&Xm(t)}function mw(t,e,n=Cn){ve(t)&&(t=Dc(t));for(const s in t){const r=t[s];let i;Ge(r)?"default"in r?i=pn(r.from||s,r.default,!0):i=pn(r.from||s):i=pn(r),Vt(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function Pd(t,e,n){yn(ve(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function og(t,e,n,s){let r=s.includes(".")?ug(n,s):()=>n[s];if(at(t)){const i=e[t];be(i)&&Is(r,i)}else if(be(t))Is(r,t.bind(n));else if(Ge(t))if(ve(t))t.forEach(i=>og(i,e,n,s));else{const i=be(t.handler)?t.handler.bind(n):e[t.handler];be(i)&&Is(r,i,t)}}function ag(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,l=i.get(e);let c;return l?c=l:!r.length&&!n&&!s?c=e:(c={},r.length&&r.forEach(u=>ga(c,u,o,!0)),ga(c,e,o)),Ge(e)&&i.set(e,c),c}function ga(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&ga(t,i,n,!0),r&&r.forEach(o=>ga(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const l=gw[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const gw={data:kd,props:Dd,emits:Dd,methods:Pi,computed:Pi,beforeCreate:Lt,created:Lt,beforeMount:Lt,mounted:Lt,beforeUpdate:Lt,updated:Lt,beforeDestroy:Lt,beforeUnmount:Lt,destroyed:Lt,unmounted:Lt,activated:Lt,deactivated:Lt,errorCaptured:Lt,serverPrefetch:Lt,components:Pi,directives:Pi,watch:yw,provide:kd,inject:_w};function kd(t,e){return e?t?function(){return Et(be(t)?t.call(this,this):t,be(e)?e.call(this,this):e)}:e:t}function _w(t,e){return Pi(Dc(t),Dc(e))}function Dc(t){if(ve(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Lt(t,e){return t?[...new Set([].concat(t,e))]:e}function Pi(t,e){return t?Et(Object.create(null),t,e):e}function Dd(t,e){return t?ve(t)&&ve(e)?[...new Set([...t,...e])]:Et(Object.create(null),Cd(t),Cd(e??{})):e}function yw(t,e){if(!t)return e;if(!e)return t;const n=Et(Object.create(null),t);for(const s in e)n[s]=Lt(t[s],e[s]);return n}function lg(){return{app:null,config:{isNativeTag:fm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let vw=0;function ww(t,e){return function(s,r=null){be(s)||(s=Et({},s)),r!=null&&!Ge(r)&&(r=null);const i=lg(),o=new WeakSet,l=[];let c=!1;const u=i.app={_uid:vw++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:tb,get config(){return i.config},set config(d){},use(d,...f){return o.has(d)||(d&&be(d.install)?(o.add(d),d.install(u,...f)):be(d)&&(o.add(d),d(u,...f))),u},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),u},component(d,f){return f?(i.components[d]=f,u):i.components[d]},directive(d,f){return f?(i.directives[d]=f,u):i.directives[d]},mount(d,f,m){if(!c){const _=u._ceVNode||Ie(s,r);return _.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),t(_,d,m),c=!0,u._container=d,d.__vue_app__=u,nl(_.component)}},onUnmount(d){l.push(d)},unmount(){c&&(yn(l,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(d,f){return i.provides[d]=f,u},runWithContext(d){const f=Ur;Ur=u;try{return d()}finally{Ur=f}}};return u}}let Ur=null;function Xo(t,e){if(Nt){let n=Nt.provides;const s=Nt.parent&&Nt.parent.provides;s===n&&(n=Nt.provides=Object.create(s)),n[t]=e}}function pn(t,e,n=!1){const s=Rg();if(s||Ur){let r=Ur?Ur._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&be(e)?e.call(s&&s.proxy):e}}const bw=Symbol.for("v-scx"),Ew=()=>pn(bw);function Is(t,e,n){return cg(t,e,n)}function cg(t,e,n=je){const{immediate:s,deep:r,flush:i,once:o}=n,l=Et({},n),c=e&&s||!e&&i!=="post";let u;if(Zi){if(i==="sync"){const _=Ew();u=_.__watcherHandles||(_.__watcherHandles=[])}else if(!c){const _=()=>{};return _.stop=Cn,_.resume=Cn,_.pause=Cn,_}}const d=Nt;l.call=(_,x,k)=>yn(_,d,x,k);let f=!1;i==="post"?l.scheduler=_=>{Qt(_,d&&d.suspense)}:i!=="sync"&&(f=!0,l.scheduler=(_,x)=>{x?_():Su(_)}),l.augmentJob=_=>{e&&(_.flags|=4),f&&(_.flags|=2,d&&(_.id=d.uid,_.i=d))};const m=K0(t,e,l);return Zi&&(u?u.push(m):c&&m()),m}function Tw(t,e,n){const s=this.proxy,r=at(t)?t.includes(".")?ug(s,t):()=>s[t]:t.bind(s,s);let i;be(e)?i=e:(i=e.handler,n=e);const o=ho(this),l=cg(r,i.bind(s),n);return o(),l}function ug(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const Iw=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${on(e)}Modifiers`]||t[`${mr(e)}Modifiers`];function Aw(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||je;let r=n;const i=e.startsWith("update:"),o=i&&Iw(s,e.slice(7));o&&(o.trim&&(r=n.map(d=>at(d)?d.trim():d)),o.number&&(r=n.map(yu)));let l,c=s[l=Gl(e)]||s[l=Gl(on(e))];!c&&i&&(c=s[l=Gl(mr(e))]),c&&yn(c,t,6,r);const u=s[l+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,yn(u,t,6,r)}}const Rw=new WeakMap;function hg(t,e,n=!1){const s=n?Rw:e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},l=!1;if(!be(t)){const c=u=>{const d=hg(u,e,!0);d&&(l=!0,Et(o,d))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!l?(Ge(t)&&s.set(t,null),null):(ve(i)?i.forEach(c=>o[c]=null):Et(o,i),Ge(t)&&s.set(t,o),o)}function el(t,e){return!t||!qa(e)?!1:(e=e.slice(2).replace(/Once$/,""),Fe(t,e[0].toLowerCase()+e.slice(1))||Fe(t,mr(e))||Fe(t,e))}function Nd(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:l,emit:c,render:u,renderCache:d,props:f,data:m,setupState:_,ctx:x,inheritAttrs:k}=t,V=pa(t);let H,O;try{if(n.shapeFlag&4){const D=r||s,U=D;H=Sn(u.call(U,D,d,f,_,m,x)),O=l}else{const D=e;H=Sn(D.length>1?D(f,{attrs:l,slots:o,emit:c}):D(f,null)),O=e.props?l:Sw(l)}}catch(D){Ui.length=0,Xa(D,t,1),H=Ie(Dt)}let C=H;if(O&&k!==!1){const D=Object.keys(O),{shapeFlag:U}=C;D.length&&U&7&&(i&&D.some(mu)&&(O=xw(O,i)),C=ks(C,O,!1,!0))}return n.dirs&&(C=ks(C,null,!1,!0),C.dirs=C.dirs?C.dirs.concat(n.dirs):n.dirs),n.transition&&Yi(C,n.transition),H=C,pa(V),H}const Sw=t=>{let e;for(const n in t)(n==="class"||n==="style"||qa(n))&&((e||(e={}))[n]=t[n]);return e},xw=(t,e)=>{const n={};for(const s in t)(!mu(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function Cw(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:l,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?Vd(s,o,u):!!o;if(c&8){const d=e.dynamicProps;for(let f=0;f<d.length;f++){const m=d[f];if(o[m]!==s[m]&&!el(u,m))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?Vd(s,o,u):!0:!!o;return!1}function Vd(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!el(n,i))return!0}return!1}function Pw({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const dg={},fg=()=>Object.create(dg),pg=t=>Object.getPrototypeOf(t)===dg;function kw(t,e,n,s=!1){const r={},i=fg();t.propsDefaults=Object.create(null),mg(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:Mm(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function Dw(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,l=Oe(r),[c]=t.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let f=0;f<d.length;f++){let m=d[f];if(el(t.emitsOptions,m))continue;const _=e[m];if(c)if(Fe(i,m))_!==i[m]&&(i[m]=_,u=!0);else{const x=on(m);r[x]=Nc(c,l,x,_,t,!1)}else _!==i[m]&&(i[m]=_,u=!0)}}}else{mg(t,e,r,i)&&(u=!0);let d;for(const f in l)(!e||!Fe(e,f)&&((d=mr(f))===f||!Fe(e,d)))&&(c?n&&(n[f]!==void 0||n[d]!==void 0)&&(r[f]=Nc(c,l,f,void 0,t,!0)):delete r[f]);if(i!==l)for(const f in i)(!e||!Fe(e,f))&&(delete i[f],u=!0)}u&&zn(t.attrs,"set","")}function mg(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,l;if(e)for(let c in e){if(Vi(c))continue;const u=e[c];let d;r&&Fe(r,d=on(c))?!i||!i.includes(d)?n[d]=u:(l||(l={}))[d]=u:el(t.emitsOptions,c)||(!(c in s)||u!==s[c])&&(s[c]=u,o=!0)}if(i){const c=Oe(n),u=l||je;for(let d=0;d<i.length;d++){const f=i[d];n[f]=Nc(r,c,f,u[f],t,!Fe(u,f))}}return o}function Nc(t,e,n,s,r,i){const o=t[n];if(o!=null){const l=Fe(o,"default");if(l&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&be(c)){const{propsDefaults:u}=r;if(n in u)s=u[n];else{const d=ho(r);s=u[n]=c.call(null,e),d()}}else s=c;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!l?s=!1:o[1]&&(s===""||s===mr(n))&&(s=!0))}return s}const Nw=new WeakMap;function gg(t,e,n=!1){const s=n?Nw:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},l=[];let c=!1;if(!be(t)){const d=f=>{c=!0;const[m,_]=gg(f,e,!0);Et(o,m),_&&l.push(..._)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!i&&!c)return Ge(t)&&s.set(t,Vr),Vr;if(ve(i))for(let d=0;d<i.length;d++){const f=on(i[d]);Od(f)&&(o[f]=je)}else if(i)for(const d in i){const f=on(d);if(Od(f)){const m=i[d],_=o[f]=ve(m)||be(m)?{type:m}:Et({},m),x=_.type;let k=!1,V=!0;if(ve(x))for(let H=0;H<x.length;++H){const O=x[H],C=be(O)&&O.name;if(C==="Boolean"){k=!0;break}else C==="String"&&(V=!1)}else k=be(x)&&x.name==="Boolean";_[0]=k,_[1]=V,(k||Fe(_,"default"))&&l.push(f)}}const u=[o,l];return Ge(t)&&s.set(t,u),u}function Od(t){return t[0]!=="$"&&!Vi(t)}const xu=t=>t==="_"||t==="_ctx"||t==="$stable",Cu=t=>ve(t)?t.map(Sn):[Sn(t)],Vw=(t,e,n)=>{if(e._n)return e;const s=Ft((...r)=>Cu(e(...r)),n);return s._c=!1,s},_g=(t,e,n)=>{const s=t._ctx;for(const r in t){if(xu(r))continue;const i=t[r];if(be(i))e[r]=Vw(r,i,s);else if(i!=null){const o=Cu(i);e[r]=()=>o}}},yg=(t,e)=>{const n=Cu(e);t.slots.default=()=>n},vg=(t,e,n)=>{for(const s in e)(n||!xu(s))&&(t[s]=e[s])},Ow=(t,e,n)=>{const s=t.slots=fg();if(t.vnode.shapeFlag&32){const r=e._;r?(vg(s,e,n),n&&ym(s,"_",r,!0)):_g(e,s)}else e&&yg(t,e)},Mw=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=je;if(s.shapeFlag&32){const l=e._;l?n&&l===1?i=!1:vg(r,e,n):(i=!e.$stable,_g(e,r)),o=e}else e&&(yg(t,e),o={default:1});if(i)for(const l in r)!xu(l)&&o[l]==null&&delete r[l]},Qt=Bw;function Lw(t){return Fw(t)}function Fw(t,e){const n=Ka();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:l,createComment:c,setText:u,setElementText:d,parentNode:f,nextSibling:m,setScopeId:_=Cn,insertStaticContent:x}=t,k=(T,I,P,B=null,q=null,j=null,ne=void 0,J=null,X=!!I.dynamicChildren)=>{if(T===I)return;T&&!tr(T,I)&&(B=$(T),ae(T,q,j,!0),T=null),I.patchFlag===-2&&(X=!1,I.dynamicChildren=null);const{type:Q,ref:ie,shapeFlag:ee}=I;switch(Q){case tl:V(T,I,P,B);break;case Dt:H(T,I,P,B);break;case Jo:T==null&&O(I,P,B,ne);break;case He:A(T,I,P,B,q,j,ne,J,X);break;default:ee&1?U(T,I,P,B,q,j,ne,J,X):ee&6?E(T,I,P,B,q,j,ne,J,X):(ee&64||ee&128)&&Q.process(T,I,P,B,q,j,ne,J,X,ce)}ie!=null&&q?Li(ie,T&&T.ref,j,I||T,!I):ie==null&&T&&T.ref!=null&&Li(T.ref,null,j,T,!0)},V=(T,I,P,B)=>{if(T==null)s(I.el=l(I.children),P,B);else{const q=I.el=T.el;I.children!==T.children&&u(q,I.children)}},H=(T,I,P,B)=>{T==null?s(I.el=c(I.children||""),P,B):I.el=T.el},O=(T,I,P,B)=>{[T.el,T.anchor]=x(T.children,I,P,B,T.el,T.anchor)},C=({el:T,anchor:I},P,B)=>{let q;for(;T&&T!==I;)q=m(T),s(T,P,B),T=q;s(I,P,B)},D=({el:T,anchor:I})=>{let P;for(;T&&T!==I;)P=m(T),r(T),T=P;r(I)},U=(T,I,P,B,q,j,ne,J,X)=>{if(I.type==="svg"?ne="svg":I.type==="math"&&(ne="mathml"),T==null)F(I,P,B,q,j,ne,J,X);else{const Q=T.el&&T.el._isVueCE?T.el:null;try{Q&&Q._beginPatch(),b(T,I,q,j,ne,J,X)}finally{Q&&Q._endPatch()}}},F=(T,I,P,B,q,j,ne,J)=>{let X,Q;const{props:ie,shapeFlag:ee,transition:ue,dirs:se}=T;if(X=T.el=o(T.type,j,ie&&ie.is,ie),ee&8?d(X,T.children):ee&16&&w(T.children,X,null,B,q,Zl(T,j),ne,J),se&&Qs(T,null,B,"created"),v(X,T,T.scopeId,ne,B),ie){for(const Te in ie)Te!=="value"&&!Vi(Te)&&i(X,Te,null,ie[Te],j,B);"value"in ie&&i(X,"value",null,ie.value,j),(Q=ie.onVnodeBeforeMount)&&In(Q,B,T)}se&&Qs(T,null,B,"beforeMount");const _e=Uw(q,ue);_e&&ue.beforeEnter(X),s(X,I,P),((Q=ie&&ie.onVnodeMounted)||_e||se)&&Qt(()=>{Q&&In(Q,B,T),_e&&ue.enter(X),se&&Qs(T,null,B,"mounted")},q)},v=(T,I,P,B,q)=>{if(P&&_(T,P),B)for(let j=0;j<B.length;j++)_(T,B[j]);if(q){let j=q.subTree;if(I===j||Eg(j.type)&&(j.ssContent===I||j.ssFallback===I)){const ne=q.vnode;v(T,ne,ne.scopeId,ne.slotScopeIds,q.parent)}}},w=(T,I,P,B,q,j,ne,J,X=0)=>{for(let Q=X;Q<T.length;Q++){const ie=T[Q]=J?_s(T[Q]):Sn(T[Q]);k(null,ie,I,P,B,q,j,ne,J)}},b=(T,I,P,B,q,j,ne)=>{const J=I.el=T.el;let{patchFlag:X,dynamicChildren:Q,dirs:ie}=I;X|=T.patchFlag&16;const ee=T.props||je,ue=I.props||je;let se;if(P&&Ys(P,!1),(se=ue.onVnodeBeforeUpdate)&&In(se,P,I,T),ie&&Qs(I,T,P,"beforeUpdate"),P&&Ys(P,!0),(ee.innerHTML&&ue.innerHTML==null||ee.textContent&&ue.textContent==null)&&d(J,""),Q?S(T.dynamicChildren,Q,J,P,B,Zl(I,q),j):ne||xe(T,I,J,null,P,B,Zl(I,q),j,!1),X>0){if(X&16)R(J,ee,ue,P,q);else if(X&2&&ee.class!==ue.class&&i(J,"class",null,ue.class,q),X&4&&i(J,"style",ee.style,ue.style,q),X&8){const _e=I.dynamicProps;for(let Te=0;Te<_e.length;Te++){const Se=_e[Te],nt=ee[Se],st=ue[Se];(st!==nt||Se==="value")&&i(J,Se,nt,st,q,P)}}X&1&&T.children!==I.children&&d(J,I.children)}else!ne&&Q==null&&R(J,ee,ue,P,q);((se=ue.onVnodeUpdated)||ie)&&Qt(()=>{se&&In(se,P,I,T),ie&&Qs(I,T,P,"updated")},B)},S=(T,I,P,B,q,j,ne)=>{for(let J=0;J<I.length;J++){const X=T[J],Q=I[J],ie=X.el&&(X.type===He||!tr(X,Q)||X.shapeFlag&198)?f(X.el):P;k(X,Q,ie,null,B,q,j,ne,!0)}},R=(T,I,P,B,q)=>{if(I!==P){if(I!==je)for(const j in I)!Vi(j)&&!(j in P)&&i(T,j,I[j],null,q,B);for(const j in P){if(Vi(j))continue;const ne=P[j],J=I[j];ne!==J&&j!=="value"&&i(T,j,J,ne,q,B)}"value"in P&&i(T,"value",I.value,P.value,q)}},A=(T,I,P,B,q,j,ne,J,X)=>{const Q=I.el=T?T.el:l(""),ie=I.anchor=T?T.anchor:l("");let{patchFlag:ee,dynamicChildren:ue,slotScopeIds:se}=I;se&&(J=J?J.concat(se):se),T==null?(s(Q,P,B),s(ie,P,B),w(I.children||[],P,ie,q,j,ne,J,X)):ee>0&&ee&64&&ue&&T.dynamicChildren?(S(T.dynamicChildren,ue,P,q,j,ne,J),(I.key!=null||q&&I===q.subTree)&&wg(T,I,!0)):xe(T,I,P,ie,q,j,ne,J,X)},E=(T,I,P,B,q,j,ne,J,X)=>{I.slotScopeIds=J,T==null?I.shapeFlag&512?q.ctx.activate(I,P,B,ne,X):De(I,P,B,q,j,ne,X):Je(T,I,X)},De=(T,I,P,B,q,j,ne)=>{const J=T.component=Kw(T,B,q);if(Ja(T)&&(J.ctx.renderer=ce),Qw(J,!1,ne),J.asyncDep){if(q&&q.registerDep(J,We,ne),!T.el){const X=J.subTree=Ie(Dt);H(null,X,I,P),T.placeholder=X.el}}else We(J,T,I,P,q,j,ne)},Je=(T,I,P)=>{const B=I.component=T.component;if(Cw(T,I,P))if(B.asyncDep&&!B.asyncResolved){Ve(B,I,P);return}else B.next=I,B.update();else I.el=T.el,B.vnode=I},We=(T,I,P,B,q,j,ne)=>{const J=()=>{if(T.isMounted){let{next:ee,bu:ue,u:se,parent:_e,vnode:Te}=T;{const jt=bg(T);if(jt){ee&&(ee.el=Te.el,Ve(T,ee,ne)),jt.asyncDep.then(()=>{T.isUnmounted||J()});return}}let Se=ee,nt;Ys(T,!1),ee?(ee.el=Te.el,Ve(T,ee,ne)):ee=Te,ue&&Yo(ue),(nt=ee.props&&ee.props.onVnodeBeforeUpdate)&&In(nt,_e,ee,Te),Ys(T,!0);const st=Nd(T),St=T.subTree;T.subTree=st,k(St,st,f(St.el),$(St),T,q,j),ee.el=st.el,Se===null&&Pw(T,st.el),se&&Qt(se,q),(nt=ee.props&&ee.props.onVnodeUpdated)&&Qt(()=>In(nt,_e,ee,Te),q)}else{let ee;const{el:ue,props:se}=I,{bm:_e,m:Te,parent:Se,root:nt,type:st}=T,St=Fr(I);Ys(T,!1),_e&&Yo(_e),!St&&(ee=se&&se.onVnodeBeforeMount)&&In(ee,Se,I),Ys(T,!0);{nt.ce&&nt.ce._def.shadowRoot!==!1&&nt.ce._injectChildStyle(st);const jt=T.subTree=Nd(T);k(null,jt,P,B,T,q,j),I.el=jt.el}if(Te&&Qt(Te,q),!St&&(ee=se&&se.onVnodeMounted)){const jt=I;Qt(()=>In(ee,Se,jt),q)}(I.shapeFlag&256||Se&&Fr(Se.vnode)&&Se.vnode.shapeFlag&256)&&T.a&&Qt(T.a,q),T.isMounted=!0,I=P=B=null}};T.scope.on();const X=T.effect=new Em(J);T.scope.off();const Q=T.update=X.run.bind(X),ie=T.job=X.runIfDirty.bind(X);ie.i=T,ie.id=T.uid,X.scheduler=()=>Su(ie),Ys(T,!0),Q()},Ve=(T,I,P)=>{I.component=T;const B=T.vnode.props;T.vnode=I,T.next=null,Dw(T,I.props,B,P),Mw(T,I.children,P),Yn(),Id(T),Xn()},xe=(T,I,P,B,q,j,ne,J,X=!1)=>{const Q=T&&T.children,ie=T?T.shapeFlag:0,ee=I.children,{patchFlag:ue,shapeFlag:se}=I;if(ue>0){if(ue&128){K(Q,ee,P,B,q,j,ne,J,X);return}else if(ue&256){de(Q,ee,P,B,q,j,ne,J,X);return}}se&8?(ie&16&&Xe(Q,q,j),ee!==Q&&d(P,ee)):ie&16?se&16?K(Q,ee,P,B,q,j,ne,J,X):Xe(Q,q,j,!0):(ie&8&&d(P,""),se&16&&w(ee,P,B,q,j,ne,J,X))},de=(T,I,P,B,q,j,ne,J,X)=>{T=T||Vr,I=I||Vr;const Q=T.length,ie=I.length,ee=Math.min(Q,ie);let ue;for(ue=0;ue<ee;ue++){const se=I[ue]=X?_s(I[ue]):Sn(I[ue]);k(T[ue],se,P,null,q,j,ne,J,X)}Q>ie?Xe(T,q,j,!0,!1,ee):w(I,P,B,q,j,ne,J,X,ee)},K=(T,I,P,B,q,j,ne,J,X)=>{let Q=0;const ie=I.length;let ee=T.length-1,ue=ie-1;for(;Q<=ee&&Q<=ue;){const se=T[Q],_e=I[Q]=X?_s(I[Q]):Sn(I[Q]);if(tr(se,_e))k(se,_e,P,null,q,j,ne,J,X);else break;Q++}for(;Q<=ee&&Q<=ue;){const se=T[ee],_e=I[ue]=X?_s(I[ue]):Sn(I[ue]);if(tr(se,_e))k(se,_e,P,null,q,j,ne,J,X);else break;ee--,ue--}if(Q>ee){if(Q<=ue){const se=ue+1,_e=se<ie?I[se].el:B;for(;Q<=ue;)k(null,I[Q]=X?_s(I[Q]):Sn(I[Q]),P,_e,q,j,ne,J,X),Q++}}else if(Q>ue)for(;Q<=ee;)ae(T[Q],q,j,!0),Q++;else{const se=Q,_e=Q,Te=new Map;for(Q=_e;Q<=ue;Q++){const rt=I[Q]=X?_s(I[Q]):Sn(I[Q]);rt.key!=null&&Te.set(rt.key,Q)}let Se,nt=0;const st=ue-_e+1;let St=!1,jt=0;const Wt=new Array(st);for(Q=0;Q<st;Q++)Wt[Q]=0;for(Q=se;Q<=ee;Q++){const rt=T[Q];if(nt>=st){ae(rt,q,j,!0);continue}let Ke;if(rt.key!=null)Ke=Te.get(rt.key);else for(Se=_e;Se<=ue;Se++)if(Wt[Se-_e]===0&&tr(rt,I[Se])){Ke=Se;break}Ke===void 0?ae(rt,q,j,!0):(Wt[Ke-_e]=Q+1,Ke>=jt?jt=Ke:St=!0,k(rt,I[Ke],P,null,q,j,ne,J,X),nt++)}const Hs=St?$w(Wt):Vr;for(Se=Hs.length-1,Q=st-1;Q>=0;Q--){const rt=_e+Q,Ke=I[rt],br=I[rt+1],Un=rt+1<ie?br.el||br.placeholder:B;Wt[Q]===0?k(null,Ke,P,Un,q,j,ne,J,X):St&&(Se<0||Q!==Hs[Se]?M(Ke,P,Un,2):Se--)}}},M=(T,I,P,B,q=null)=>{const{el:j,type:ne,transition:J,children:X,shapeFlag:Q}=T;if(Q&6){M(T.component.subTree,I,P,B);return}if(Q&128){T.suspense.move(I,P,B);return}if(Q&64){ne.move(T,I,P,ce);return}if(ne===He){s(j,I,P);for(let ee=0;ee<X.length;ee++)M(X[ee],I,P,B);s(T.anchor,I,P);return}if(ne===Jo){C(T,I,P);return}if(B!==2&&Q&1&&J)if(B===0)J.beforeEnter(j),s(j,I,P),Qt(()=>J.enter(j),q);else{const{leave:ee,delayLeave:ue,afterLeave:se}=J,_e=()=>{T.ctx.isUnmounted?r(j):s(j,I,P)},Te=()=>{j._isLeaving&&j[qn](!0),ee(j,()=>{_e(),se&&se()})};ue?ue(j,_e,Te):Te()}else s(j,I,P)},ae=(T,I,P,B=!1,q=!1)=>{const{type:j,props:ne,ref:J,children:X,dynamicChildren:Q,shapeFlag:ie,patchFlag:ee,dirs:ue,cacheIndex:se}=T;if(ee===-2&&(q=!1),J!=null&&(Yn(),Li(J,null,P,T,!0),Xn()),se!=null&&(I.renderCache[se]=void 0),ie&256){I.ctx.deactivate(T);return}const _e=ie&1&&ue,Te=!Fr(T);let Se;if(Te&&(Se=ne&&ne.onVnodeBeforeUnmount)&&In(Se,I,T),ie&6)ft(T.component,P,B);else{if(ie&128){T.suspense.unmount(P,B);return}_e&&Qs(T,null,I,"beforeUnmount"),ie&64?T.type.remove(T,I,P,ce,B):Q&&!Q.hasOnce&&(j!==He||ee>0&&ee&64)?Xe(Q,I,P,!1,!0):(j===He&&ee&384||!q&&ie&16)&&Xe(X,I,P),B&&Me(T)}(Te&&(Se=ne&&ne.onVnodeUnmounted)||_e)&&Qt(()=>{Se&&In(Se,I,T),_e&&Qs(T,null,I,"unmounted")},P)},Me=T=>{const{type:I,el:P,anchor:B,transition:q}=T;if(I===He){Re(P,B);return}if(I===Jo){D(T);return}const j=()=>{r(P),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(T.shapeFlag&1&&q&&!q.persisted){const{leave:ne,delayLeave:J}=q,X=()=>ne(P,j);J?J(T.el,j,X):X()}else j()},Re=(T,I)=>{let P;for(;T!==I;)P=m(T),r(T),T=P;r(I)},ft=(T,I,P)=>{const{bum:B,scope:q,job:j,subTree:ne,um:J,m:X,a:Q}=T;Md(X),Md(Q),B&&Yo(B),q.stop(),j&&(j.flags|=8,ae(ne,T,I,P)),J&&Qt(J,I),Qt(()=>{T.isUnmounted=!0},I)},Xe=(T,I,P,B=!1,q=!1,j=0)=>{for(let ne=j;ne<T.length;ne++)ae(T[ne],I,P,B,q)},$=T=>{if(T.shapeFlag&6)return $(T.component.subTree);if(T.shapeFlag&128)return T.suspense.next();const I=m(T.anchor||T.el),P=I&&I[J0];return P?m(P):I};let Y=!1;const re=(T,I,P)=>{T==null?I._vnode&&ae(I._vnode,null,null,!0):k(I._vnode||null,T,I,null,null,null,P),I._vnode=T,Y||(Y=!0,Id(),Bm(),Y=!1)},ce={p:k,um:ae,m:M,r:Me,mt:De,mc:w,pc:xe,pbc:S,n:$,o:t};return{render:re,hydrate:void 0,createApp:ww(re)}}function Zl({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ys({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Uw(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function wg(t,e,n=!1){const s=t.children,r=e.children;if(ve(s)&&ve(r))for(let i=0;i<s.length;i++){const o=s[i];let l=r[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[i]=_s(r[i]),l.el=o.el),!n&&l.patchFlag!==-2&&wg(o,l)),l.type===tl&&l.patchFlag!==-1&&(l.el=o.el),l.type===Dt&&!l.el&&(l.el=o.el)}}function $w(t){const e=t.slice(),n=[0];let s,r,i,o,l;const c=t.length;for(s=0;s<c;s++){const u=t[s];if(u!==0){if(r=n[n.length-1],t[r]<u){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)l=i+o>>1,t[n[l]]<u?i=l+1:o=l;u<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function bg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:bg(e)}function Md(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Eg=t=>t.__isSuspense;function Bw(t,e){e&&e.pendingBranch?ve(t)?e.effects.push(...t):e.effects.push(t):X0(t)}const He=Symbol.for("v-fgt"),tl=Symbol.for("v-txt"),Dt=Symbol.for("v-cmt"),Jo=Symbol.for("v-stc"),Ui=[];let Xt=null;function W(t=!1){Ui.push(Xt=t?null:[])}function jw(){Ui.pop(),Xt=Ui[Ui.length-1]||null}let Xi=1;function _a(t,e=!1){Xi+=t,t<0&&Xt&&e&&(Xt.hasOnce=!0)}function Tg(t){return t.dynamicChildren=Xi>0?Xt||Vr:null,jw(),Xi>0&&Xt&&Xt.push(t),t}function Z(t,e,n,s,r,i){return Tg(y(t,e,n,s,r,i,!0))}function xn(t,e,n,s,r){return Tg(Ie(t,e,n,s,r,!0))}function Ji(t){return t?t.__v_isVNode===!0:!1}function tr(t,e){return t.type===e.type&&t.key===e.key}const Ig=({key:t})=>t??null,Zo=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?at(t)||Vt(t)||be(t)?{i:At,r:t,k:e,f:!!n}:t:null);function y(t,e=null,n=null,s=0,r=null,i=t===He?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ig(e),ref:e&&Zo(e),scopeId:Hm,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:At};return l?(Pu(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=at(n)?8:16),Xi>0&&!o&&Xt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Xt.push(c),c}const Ie=Hw;function Hw(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===sg)&&(t=Dt),Ji(t)){const l=ks(t,e,!0);return n&&Pu(l,n),Xi>0&&!i&&Xt&&(l.shapeFlag&6?Xt[Xt.indexOf(t)]=l:Xt.push(l)),l.patchFlag=-2,l}if(eb(t)&&(t=t.__vccOpts),e){e=qw(e);let{class:l,style:c}=e;l&&!at(l)&&(e.class=Ze(l)),Ge(c)&&(Au(c)&&!ve(c)&&(c=Et({},c)),e.style=Us(c))}const o=at(t)?1:Eg(t)?128:qm(t)?64:Ge(t)?4:be(t)?2:0;return y(t,e,n,s,r,o,i,!0)}function qw(t){return t?Au(t)||pg(t)?Et({},t):t:null}function ks(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:l,transition:c}=t,u=e?zw(r||{},e):r,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Ig(u),ref:e&&e.ref?n&&i?ve(i)?i.concat(Zo(e)):[i,Zo(e)]:Zo(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==He?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ks(t.ssContent),ssFallback:t.ssFallback&&ks(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&s&&Yi(d,c.clone(d)),d}function Yt(t=" ",e=0){return Ie(tl,null,t,e)}function Ag(t,e){const n=Ie(Jo,null,t);return n.staticCount=e,n}function $e(t="",e=!1){return e?(W(),xn(Dt,null,t)):Ie(Dt,null,t)}function Sn(t){return t==null||typeof t=="boolean"?Ie(Dt):ve(t)?Ie(He,null,t.slice()):Ji(t)?_s(t):Ie(tl,null,String(t))}function _s(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ks(t)}function Pu(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(ve(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),Pu(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!pg(e)?e._ctx=At:r===3&&At&&(At.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else be(e)?(e={default:e,_ctx:At},n=32):(e=String(e),s&64?(n=16,e=[Yt(e)]):n=8);t.children=e,t.shapeFlag|=n}function zw(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Ze([e.class,s.class]));else if(r==="style")e.style=Us([e.style,s.style]);else if(qa(r)){const i=e[r],o=s[r];o&&i!==o&&!(ve(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function In(t,e,n,s=null){yn(t,e,7,[n,s])}const Gw=lg();let Ww=0;function Kw(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||Gw,i={uid:Ww++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new b0(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:gg(s,r),emitsOptions:hg(s,r),emit:null,emitted:null,propsDefaults:je,inheritAttrs:s.inheritAttrs,ctx:je,data:je,props:je,attrs:je,slots:je,refs:je,setupState:je,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Aw.bind(null,i),t.ce&&t.ce(i),i}let Nt=null;const Rg=()=>Nt||At;let ya,Vc;{const t=Ka(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};ya=e("__VUE_INSTANCE_SETTERS__",n=>Nt=n),Vc=e("__VUE_SSR_SETTERS__",n=>Zi=n)}const ho=t=>{const e=Nt;return ya(t),t.scope.on(),()=>{t.scope.off(),ya(e)}},Ld=()=>{Nt&&Nt.scope.off(),ya(null)};function Sg(t){return t.vnode.shapeFlag&4}let Zi=!1;function Qw(t,e=!1,n=!1){e&&Vc(e);const{props:s,children:r}=t.vnode,i=Sg(t);kw(t,s,i,e),Ow(t,r,n||e);const o=i?Yw(t,e):void 0;return e&&Vc(!1),o}function Yw(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,fw);const{setup:s}=n;if(s){Yn();const r=t.setupContext=s.length>1?Jw(t):null,i=ho(t),o=uo(s,t,0,[t.props,r]),l=mm(o);if(Xn(),i(),(l||t.sp)&&!Fr(t)&&Xm(t),l){if(o.then(Ld,Ld),e)return o.then(c=>{Fd(t,c)}).catch(c=>{Xa(c,t,0)});t.asyncDep=o}else Fd(t,o)}else xg(t)}function Fd(t,e,n){be(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ge(e)&&(t.setupState=Fm(e)),xg(t)}function xg(t,e,n){const s=t.type;t.render||(t.render=s.render||Cn);{const r=ho(t);Yn();try{pw(t)}finally{Xn(),r()}}}const Xw={get(t,e){return Pt(t,"get",""),t[e]}};function Jw(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Xw),slots:t.slots,emit:t.emit,expose:e}}function nl(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Fm(B0(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Fi)return Fi[n](t)},has(e,n){return n in e||n in Fi}})):t.proxy}function Zw(t,e=!0){return be(t)?t.displayName||t.name:t.name||e&&t.__name}function eb(t){return be(t)&&"__vccOpts"in t}const et=(t,e)=>G0(t,e,Zi);function ku(t,e,n){try{_a(-1);const s=arguments.length;return s===2?Ge(e)&&!ve(e)?Ji(e)?Ie(t,null,[e]):Ie(t,e):Ie(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Ji(n)&&(n=[n]),Ie(t,e,n))}finally{_a(1)}}const tb="3.5.25";let Oc;const Ud=typeof window<"u"&&window.trustedTypes;if(Ud)try{Oc=Ud.createPolicy("vue",{createHTML:t=>t})}catch{}const Cg=Oc?t=>Oc.createHTML(t):t=>t,nb="http://www.w3.org/2000/svg",sb="http://www.w3.org/1998/Math/MathML",Hn=typeof document<"u"?document:null,$d=Hn&&Hn.createElement("template"),rb={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Hn.createElementNS(nb,t):e==="mathml"?Hn.createElementNS(sb,t):n?Hn.createElement(t,{is:n}):Hn.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Hn.createTextNode(t),createComment:t=>Hn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Hn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{$d.innerHTML=Cg(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const l=$d.content;if(s==="svg"||s==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},ds="transition",Si="animation",eo=Symbol("_vtc"),Pg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ib=Et({},zm,Pg),ob=t=>(t.displayName="Transition",t.props=ib,t),ab=ob((t,{slots:e})=>ku(tw,lb(t),e)),Xs=(t,e=[])=>{ve(t)?t.forEach(n=>n(...e)):t&&t(...e)},Bd=t=>t?ve(t)?t.some(e=>e.length>1):t.length>1:!1;function lb(t){const e={};for(const A in t)A in Pg||(e[A]=t[A]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:u=o,appearToClass:d=l,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:_=`${n}-leave-to`}=t,x=cb(r),k=x&&x[0],V=x&&x[1],{onBeforeEnter:H,onEnter:O,onEnterCancelled:C,onLeave:D,onLeaveCancelled:U,onBeforeAppear:F=H,onAppear:v=O,onAppearCancelled:w=C}=e,b=(A,E,De,Je)=>{A._enterCancelled=Je,Js(A,E?d:l),Js(A,E?u:o),De&&De()},S=(A,E)=>{A._isLeaving=!1,Js(A,f),Js(A,_),Js(A,m),E&&E()},R=A=>(E,De)=>{const Je=A?v:O,We=()=>b(E,A,De);Xs(Je,[E,We]),jd(()=>{Js(E,A?c:i),Bn(E,A?d:l),Bd(Je)||Hd(E,s,k,We)})};return Et(e,{onBeforeEnter(A){Xs(H,[A]),Bn(A,i),Bn(A,o)},onBeforeAppear(A){Xs(F,[A]),Bn(A,c),Bn(A,u)},onEnter:R(!1),onAppear:R(!0),onLeave(A,E){A._isLeaving=!0;const De=()=>S(A,E);Bn(A,f),A._enterCancelled?(Bn(A,m),Gd(A)):(Gd(A),Bn(A,m)),jd(()=>{A._isLeaving&&(Js(A,f),Bn(A,_),Bd(D)||Hd(A,s,V,De))}),Xs(D,[A,De])},onEnterCancelled(A){b(A,!1,void 0,!0),Xs(C,[A])},onAppearCancelled(A){b(A,!0,void 0,!0),Xs(w,[A])},onLeaveCancelled(A){S(A),Xs(U,[A])}})}function cb(t){if(t==null)return null;if(Ge(t))return[ec(t.enter),ec(t.leave)];{const e=ec(t);return[e,e]}}function ec(t){return p0(t)}function Bn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[eo]||(t[eo]=new Set)).add(e)}function Js(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[eo];n&&(n.delete(e),n.size||(t[eo]=void 0))}function jd(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let ub=0;function Hd(t,e,n,s){const r=t._endId=++ub,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:l,propCount:c}=hb(t,e);if(!o)return s();const u=o+"end";let d=0;const f=()=>{t.removeEventListener(u,m),i()},m=_=>{_.target===t&&++d>=c&&f()};setTimeout(()=>{d<c&&f()},l+1),t.addEventListener(u,m)}function hb(t,e){const n=window.getComputedStyle(t),s=x=>(n[x]||"").split(", "),r=s(`${ds}Delay`),i=s(`${ds}Duration`),o=qd(r,i),l=s(`${Si}Delay`),c=s(`${Si}Duration`),u=qd(l,c);let d=null,f=0,m=0;e===ds?o>0&&(d=ds,f=o,m=i.length):e===Si?u>0&&(d=Si,f=u,m=c.length):(f=Math.max(o,u),d=f>0?o>u?ds:Si:null,m=d?d===ds?i.length:c.length:0);const _=d===ds&&/\b(?:transform|all)(?:,|$)/.test(s(`${ds}Property`).toString());return{type:d,timeout:f,propCount:m,hasTransform:_}}function qd(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>zd(n)+zd(t[s])))}function zd(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Gd(t){return(t?t.ownerDocument:document).body.offsetHeight}function db(t,e,n){const s=t[eo];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Wd=Symbol("_vod"),fb=Symbol("_vsh"),pb=Symbol(""),mb=/(?:^|;)\s*display\s*:/;function gb(t,e,n){const s=t.style,r=at(n);let i=!1;if(n&&!r){if(e)if(at(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&ea(s,l,"")}else for(const o in e)n[o]==null&&ea(s,o,"");for(const o in n)o==="display"&&(i=!0),ea(s,o,n[o])}else if(r){if(e!==n){const o=s[pb];o&&(n+=";"+o),s.cssText=n,i=mb.test(n)}}else e&&t.removeAttribute("style");Wd in t&&(t[Wd]=i?s.display:"",t[fb]&&(s.display="none"))}const Kd=/\s*!important$/;function ea(t,e,n){if(ve(n))n.forEach(s=>ea(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=_b(t,e);Kd.test(n)?t.setProperty(mr(s),n.replace(Kd,""),"important"):t[s]=n}}const Qd=["Webkit","Moz","ms"],tc={};function _b(t,e){const n=tc[e];if(n)return n;let s=on(e);if(s!=="filter"&&s in t)return tc[e]=s;s=Wa(s);for(let r=0;r<Qd.length;r++){const i=Qd[r]+s;if(i in t)return tc[e]=i}return e}const Yd="http://www.w3.org/1999/xlink";function Xd(t,e,n,s,r,i=w0(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Yd,e.slice(6,e.length)):t.setAttributeNS(Yd,e,n):n==null||i&&!vm(n)?t.removeAttribute(e):t.setAttribute(e,i?"":ss(n)?String(n):n)}function Jd(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Cg(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=vm(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function xr(t,e,n,s){t.addEventListener(e,n,s)}function yb(t,e,n,s){t.removeEventListener(e,n,s)}const Zd=Symbol("_vei");function vb(t,e,n,s,r=null){const i=t[Zd]||(t[Zd]={}),o=i[e];if(s&&o)o.value=s;else{const[l,c]=wb(e);if(s){const u=i[e]=Tb(s,r);xr(t,l,u,c)}else o&&(yb(t,l,o,c),i[e]=void 0)}}const ef=/(?:Once|Passive|Capture)$/;function wb(t){let e;if(ef.test(t)){e={};let s;for(;s=t.match(ef);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):mr(t.slice(2)),e]}let nc=0;const bb=Promise.resolve(),Eb=()=>nc||(bb.then(()=>nc=0),nc=Date.now());function Tb(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;yn(Ib(s,n.value),e,5,[s])};return n.value=t,n.attached=Eb(),n}function Ib(t,e){if(ve(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const tf=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Ab=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?db(t,s,o):e==="style"?gb(t,n,s):qa(e)?mu(e)||vb(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Rb(t,e,s,o))?(Jd(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Xd(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!at(s))?Jd(t,on(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Xd(t,e,s,o))};function Rb(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&tf(e)&&be(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return tf(e)&&at(n)?!1:e in t}const nf=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ve(e)?n=>Yo(e,n):e};function Sb(t){t.target.composing=!0}function sf(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const sc=Symbol("_assign");function rf(t,e,n){return e&&(t=t.trim()),n&&(t=yu(t)),t}const $r={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[sc]=nf(r);const i=s||r.props&&r.props.type==="number";xr(t,e?"change":"input",o=>{o.target.composing||t[sc](rf(t.value,n,i))}),(n||i)&&xr(t,"change",()=>{t.value=rf(t.value,n,i)}),e||(xr(t,"compositionstart",Sb),xr(t,"compositionend",sf),xr(t,"change",sf))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(t[sc]=nf(o),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?yu(t.value):t.value,c=e??"";l!==c&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||r&&t.value.trim()===c)||(t.value=c))}},xb=["ctrl","shift","alt","meta"],Cb={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>xb.some(n=>t[`${n}Key`]&&!e.includes(n))},va=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const l=Cb[e[o]];if(l&&l(r,e))return}return t(r,...i)})},Pb=Et({patchProp:Ab},rb);let of;function kb(){return of||(of=Lw(Pb))}const Db=(...t)=>{const e=kb().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=Vb(s);if(!r)return;const i=e._component;!be(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,Nb(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function Nb(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Vb(t){return at(t)?document.querySelector(t):t}const ii=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},Ob={},Mb={class:"min-h-screen w-full overflow-x-hidden"};function Lb(t,e){const n=ng("router-view");return W(),Z("div",Mb,[Ie(n)])}const Fb=ii(Ob,[["render",Lb]]);const Cr=typeof document<"u";function kg(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Ub(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&kg(t.default)}const Le=Object.assign;function rc(t,e){const n={};for(const s in e){const r=e[s];n[s]=vn(r)?r.map(t):t(r)}return n}const $i=()=>{},vn=Array.isArray;function af(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}const Dg=/#/g,$b=/&/g,Bb=/\//g,jb=/=/g,Hb=/\?/g,Ng=/\+/g,qb=/%5B/g,zb=/%5D/g,Vg=/%5E/g,Gb=/%60/g,Og=/%7B/g,Wb=/%7C/g,Mg=/%7D/g,Kb=/%20/g;function Du(t){return t==null?"":encodeURI(""+t).replace(Wb,"|").replace(qb,"[").replace(zb,"]")}function Qb(t){return Du(t).replace(Og,"{").replace(Mg,"}").replace(Vg,"^")}function Mc(t){return Du(t).replace(Ng,"%2B").replace(Kb,"+").replace(Dg,"%23").replace($b,"%26").replace(Gb,"`").replace(Og,"{").replace(Mg,"}").replace(Vg,"^")}function Yb(t){return Mc(t).replace(jb,"%3D")}function Xb(t){return Du(t).replace(Dg,"%23").replace(Hb,"%3F")}function Jb(t){return Xb(t).replace(Bb,"%2F")}function to(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const Zb=/\/$/,eE=t=>t.replace(Zb,"");function ic(t,e,n="/"){let s,r={},i="",o="";const l=e.indexOf("#");let c=e.indexOf("?");return c=l>=0&&c>l?-1:c,c>=0&&(s=e.slice(0,c),i=e.slice(c,l>0?l:e.length),r=t(i.slice(1))),l>=0&&(s=s||e.slice(0,l),o=e.slice(l,e.length)),s=rE(s??e,n),{fullPath:s+i+o,path:s,query:r,hash:to(o)}}function tE(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function lf(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function nE(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&Yr(e.matched[s],n.matched[r])&&Lg(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Yr(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Lg(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!sE(t[n],e[n]))return!1;return!0}function sE(t,e){return vn(t)?cf(t,e):vn(e)?cf(e,t):t===e}function cf(t,e){return vn(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function rE(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,l;for(o=0;o<s.length;o++)if(l=s[o],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const fs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Lc=function(t){return t.pop="pop",t.push="push",t}({}),oc=function(t){return t.back="back",t.forward="forward",t.unknown="",t}({});function iE(t){if(!t)if(Cr){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),eE(t)}const oE=/^[^#]+#/;function aE(t,e){return t.replace(oE,"#")+e}function lE(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const sl=()=>({left:window.scrollX,top:window.scrollY});function cE(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=lE(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function uf(t,e){return(history.state?history.state.position-e:-1)+t}const Fc=new Map;function uE(t,e){Fc.set(t,e)}function hE(t){const e=Fc.get(t);return Fc.delete(t),e}function dE(t){return typeof t=="string"||t&&typeof t=="object"}function Fg(t){return typeof t=="string"||typeof t=="symbol"}let ot=function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t}({});const Ug=Symbol("");ot.MATCHER_NOT_FOUND+"",ot.NAVIGATION_GUARD_REDIRECT+"",ot.NAVIGATION_ABORTED+"",ot.NAVIGATION_CANCELLED+"",ot.NAVIGATION_DUPLICATED+"";function Xr(t,e){return Le(new Error,{type:t,[Ug]:!0},e)}function jn(t,e){return t instanceof Error&&Ug in t&&(e==null||!!(t.type&e))}const fE=["params","query","hash"];function pE(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of fE)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function mE(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(Ng," "),i=r.indexOf("="),o=to(i<0?r:r.slice(0,i)),l=i<0?null:to(r.slice(i+1));if(o in e){let c=e[o];vn(c)||(c=e[o]=[c]),c.push(l)}else e[o]=l}return e}function hf(t){let e="";for(let n in t){const s=t[n];if(n=Yb(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(vn(s)?s.map(r=>r&&Mc(r)):[s&&Mc(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function gE(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=vn(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const _E=Symbol(""),df=Symbol(""),rl=Symbol(""),Nu=Symbol(""),Uc=Symbol("");function xi(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function ys(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((l,c)=>{const u=m=>{m===!1?c(Xr(ot.NAVIGATION_ABORTED,{from:n,to:e})):m instanceof Error?c(m):dE(m)?c(Xr(ot.NAVIGATION_GUARD_REDIRECT,{from:e,to:m})):(o&&s.enterCallbacks[r]===o&&typeof m=="function"&&o.push(m),l())},d=i(()=>t.call(s&&s.instances[r],e,n,u));let f=Promise.resolve(d);t.length<3&&(f=f.then(u)),f.catch(m=>c(m))})}function ac(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const l in o.components){let c=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(kg(c)){const u=(c.__vccOpts||c)[e];u&&i.push(ys(u,n,s,o,l,r))}else{let u=c();i.push(()=>u.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const f=Ub(d)?d.default:d;o.mods[l]=d,o.components[l]=f;const m=(f.__vccOpts||f)[e];return m&&ys(m,n,s,o,l,r)()}))}}return i}function yE(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const l=e.matched[o];l&&(t.matched.find(u=>Yr(u,l))?s.push(l):n.push(l));const c=t.matched[o];c&&(e.matched.find(u=>Yr(u,c))||r.push(c))}return[n,s,r]}let vE=()=>location.protocol+"//"+location.host;function $g(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,l=r.slice(o);return l[0]!=="/"&&(l="/"+l),lf(l,"")}return lf(n,t)+s+r}function wE(t,e,n,s){let r=[],i=[],o=null;const l=({state:m})=>{const _=$g(t,location),x=n.value,k=e.value;let V=0;if(m){if(n.value=_,e.value=m,o&&o===x){o=null;return}V=k?m.position-k.position:0}else s(_);r.forEach(H=>{H(n.value,x,{delta:V,type:Lc.pop,direction:V?V>0?oc.forward:oc.back:oc.unknown})})};function c(){o=n.value}function u(m){r.push(m);const _=()=>{const x=r.indexOf(m);x>-1&&r.splice(x,1)};return i.push(_),_}function d(){if(document.visibilityState==="hidden"){const{history:m}=window;if(!m.state)return;m.replaceState(Le({},m.state,{scroll:sl()}),"")}}function f(){for(const m of i)m();i=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",d),document.removeEventListener("visibilitychange",d)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",d),document.addEventListener("visibilitychange",d),{pauseListeners:c,listen:u,destroy:f}}function ff(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?sl():null}}function bE(t){const{history:e,location:n}=window,s={value:$g(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,u,d){const f=t.indexOf("#"),m=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+c:vE()+t+c;try{e[d?"replaceState":"pushState"](u,"",m),r.value=u}catch(_){console.error(_),n[d?"replace":"assign"](m)}}function o(c,u){i(c,Le({},e.state,ff(r.value.back,c,r.value.forward,!0),u,{position:r.value.position}),!0),s.value=c}function l(c,u){const d=Le({},r.value,e.state,{forward:c,scroll:sl()});i(d.current,d,!0),i(c,Le({},ff(s.value,c,null),{position:d.position+1},u),!1),s.value=c}return{location:s,state:r,push:l,replace:o}}function EE(t){t=iE(t);const e=bE(t),n=wE(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=Le({location:"",base:t,go:s,createHref:aE.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function TE(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),EE(t)}let nr=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t}({});var mt=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t}(mt||{});const IE={type:nr.Static,value:""},AE=/[a-zA-Z0-9_]/;function RE(t){if(!t)return[[]];if(t==="/")return[[IE]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(_){throw new Error(`ERR (${n})/"${u}": ${_}`)}let n=mt.Static,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let l=0,c,u="",d="";function f(){u&&(n===mt.Static?i.push({type:nr.Static,value:u}):n===mt.Param||n===mt.ParamRegExp||n===mt.ParamRegExpEnd?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:nr.Param,value:u,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function m(){u+=c}for(;l<t.length;){if(c=t[l++],c==="\\"&&n!==mt.ParamRegExp){s=n,n=mt.EscapeNext;continue}switch(n){case mt.Static:c==="/"?(u&&f(),o()):c===":"?(f(),n=mt.Param):m();break;case mt.EscapeNext:m(),n=s;break;case mt.Param:c==="("?n=mt.ParamRegExp:AE.test(c)?m():(f(),n=mt.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case mt.ParamRegExp:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:n=mt.ParamRegExpEnd:d+=c;break;case mt.ParamRegExpEnd:f(),n=mt.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--,d="";break;default:e("Unknown state");break}}return n===mt.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),f(),o(),r}const pf="[^/]+?",SE={sensitive:!1,strict:!1,start:!0,end:!0};var Ut=function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t}(Ut||{});const xE=/[.+*?^${}()[\]/\\]/g;function CE(t,e){const n=Le({},SE,e),s=[];let r=n.start?"^":"";const i=[];for(const u of t){const d=u.length?[]:[Ut.Root];n.strict&&!u.length&&(r+="/");for(let f=0;f<u.length;f++){const m=u[f];let _=Ut.Segment+(n.sensitive?Ut.BonusCaseSensitive:0);if(m.type===nr.Static)f||(r+="/"),r+=m.value.replace(xE,"\\$&"),_+=Ut.Static;else if(m.type===nr.Param){const{value:x,repeatable:k,optional:V,regexp:H}=m;i.push({name:x,repeatable:k,optional:V});const O=H||pf;if(O!==pf){_+=Ut.BonusCustomRegExp;try{`${O}`}catch(D){throw new Error(`Invalid custom RegExp for param "${x}" (${O}): `+D.message)}}let C=k?`((?:${O})(?:/(?:${O}))*)`:`(${O})`;f||(C=V&&u.length<2?`(?:/${C})`:"/"+C),V&&(C+="?"),r+=C,_+=Ut.Dynamic,V&&(_+=Ut.BonusOptional),k&&(_+=Ut.BonusRepeatable),O===".*"&&(_+=Ut.BonusWildcard)}d.push(_)}s.push(d)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=Ut.BonusStrict}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function l(u){const d=u.match(o),f={};if(!d)return null;for(let m=1;m<d.length;m++){const _=d[m]||"",x=i[m-1];f[x.name]=_&&x.repeatable?_.split("/"):_}return f}function c(u){let d="",f=!1;for(const m of t){(!f||!d.endsWith("/"))&&(d+="/"),f=!1;for(const _ of m)if(_.type===nr.Static)d+=_.value;else if(_.type===nr.Param){const{value:x,repeatable:k,optional:V}=_,H=x in u?u[x]:"";if(vn(H)&&!k)throw new Error(`Provided param "${x}" is an array but it is not repeatable (* or + modifiers)`);const O=vn(H)?H.join("/"):H;if(!O)if(V)m.length<2&&(d.endsWith("/")?d=d.slice(0,-1):f=!0);else throw new Error(`Missing required param "${x}"`);d+=O}}return d||"/"}return{re:o,score:s,keys:i,parse:l,stringify:c}}function PE(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===Ut.Static+Ut.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Ut.Static+Ut.Segment?1:-1:0}function Bg(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=PE(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(mf(s))return 1;if(mf(r))return-1}return r.length-s.length}function mf(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const kE={strict:!1,end:!0,sensitive:!1};function DE(t,e,n){const s=CE(RE(t.path),n),r=Le(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function NE(t,e){const n=[],s=new Map;e=af(kE,e);function r(f){return s.get(f)}function i(f,m,_){const x=!_,k=_f(f);k.aliasOf=_&&_.record;const V=af(e,f),H=[k];if("alias"in f){const D=typeof f.alias=="string"?[f.alias]:f.alias;for(const U of D)H.push(_f(Le({},k,{components:_?_.record.components:k.components,path:U,aliasOf:_?_.record:k})))}let O,C;for(const D of H){const{path:U}=D;if(m&&U[0]!=="/"){const F=m.record.path,v=F[F.length-1]==="/"?"":"/";D.path=m.record.path+(U&&v+U)}if(O=DE(D,m,V),_?_.alias.push(O):(C=C||O,C!==O&&C.alias.push(O),x&&f.name&&!yf(O)&&o(f.name)),jg(O)&&c(O),k.children){const F=k.children;for(let v=0;v<F.length;v++)i(F[v],O,_&&_.children[v])}_=_||O}return C?()=>{o(C)}:$i}function o(f){if(Fg(f)){const m=s.get(f);m&&(s.delete(f),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(f);m>-1&&(n.splice(m,1),f.record.name&&s.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function l(){return n}function c(f){const m=ME(f,n);n.splice(m,0,f),f.record.name&&!yf(f)&&s.set(f.record.name,f)}function u(f,m){let _,x={},k,V;if("name"in f&&f.name){if(_=s.get(f.name),!_)throw Xr(ot.MATCHER_NOT_FOUND,{location:f});V=_.record.name,x=Le(gf(m.params,_.keys.filter(C=>!C.optional).concat(_.parent?_.parent.keys.filter(C=>C.optional):[]).map(C=>C.name)),f.params&&gf(f.params,_.keys.map(C=>C.name))),k=_.stringify(x)}else if(f.path!=null)k=f.path,_=n.find(C=>C.re.test(k)),_&&(x=_.parse(k),V=_.record.name);else{if(_=m.name?s.get(m.name):n.find(C=>C.re.test(m.path)),!_)throw Xr(ot.MATCHER_NOT_FOUND,{location:f,currentLocation:m});V=_.record.name,x=Le({},m.params,f.params),k=_.stringify(x)}const H=[];let O=_;for(;O;)H.unshift(O.record),O=O.parent;return{name:V,path:k,params:x,matched:H,meta:OE(H)}}t.forEach(f=>i(f));function d(){n.length=0,s.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:d,getRoutes:l,getRecordMatcher:r}}function gf(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function _f(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:VE(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function VE(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function yf(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function OE(t){return t.reduce((e,n)=>Le(e,n.meta),{})}function ME(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;Bg(t,e[i])<0?s=i:n=i+1}const r=LE(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function LE(t){let e=t;for(;e=e.parent;)if(jg(e)&&Bg(t,e)===0)return e}function jg({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function vf(t){const e=pn(rl),n=pn(Nu),s=et(()=>{const c=gt(t.to);return e.resolve(c)}),r=et(()=>{const{matched:c}=s.value,{length:u}=c,d=c[u-1],f=n.matched;if(!d||!f.length)return-1;const m=f.findIndex(Yr.bind(null,d));if(m>-1)return m;const _=wf(c[u-2]);return u>1&&wf(d)===_&&f[f.length-1].path!==_?f.findIndex(Yr.bind(null,c[u-2])):m}),i=et(()=>r.value>-1&&jE(n.params,s.value.params)),o=et(()=>r.value>-1&&r.value===n.matched.length-1&&Lg(n.params,s.value.params));function l(c={}){if(BE(c)){const u=e[gt(t.replace)?"replace":"push"](gt(t.to)).catch($i);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:et(()=>s.value.href),isActive:i,isExactActive:o,navigate:l}}function FE(t){return t.length===1?t[0]:t}const UE=Ym({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:vf,setup(t,{slots:e}){const n=Ya(vf(t)),{options:s}=pn(rl),r=et(()=>({[bf(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[bf(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&FE(e.default(n));return t.custom?i:ku("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),$E=UE;function BE(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function jE(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!vn(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function wf(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const bf=(t,e,n)=>t??e??n,HE=Ym({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=pn(Uc),r=et(()=>t.route||s.value),i=pn(df,0),o=et(()=>{let u=gt(i);const{matched:d}=r.value;let f;for(;(f=d[u])&&!f.components;)u++;return u}),l=et(()=>r.value.matched[o.value]);Xo(df,et(()=>o.value+1)),Xo(_E,l),Xo(Uc,r);const c=me();return Is(()=>[c.value,l.value,t.name],([u,d,f],[m,_,x])=>{d&&(d.instances[f]=u,_&&_!==d&&u&&u===m&&(d.leaveGuards.size||(d.leaveGuards=_.leaveGuards),d.updateGuards.size||(d.updateGuards=_.updateGuards))),u&&d&&(!_||!Yr(d,_)||!m)&&(d.enterCallbacks[f]||[]).forEach(k=>k(u))},{flush:"post"}),()=>{const u=r.value,d=t.name,f=l.value,m=f&&f.components[d];if(!m)return Ef(n.default,{Component:m,route:u});const _=f.props[d],x=_?_===!0?u.params:typeof _=="function"?_(u):_:null,V=ku(m,Le({},x,e,{onVnodeUnmounted:H=>{H.component.isUnmounted&&(f.instances[d]=null)},ref:c}));return Ef(n.default,{Component:V,route:u})||V}}});function Ef(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const qE=HE;function zE(t){const e=NE(t.routes,t),n=t.parseQuery||mE,s=t.stringifyQuery||hf,r=t.history,i=xi(),o=xi(),l=xi(),c=j0(fs);let u=fs;Cr&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=rc.bind(null,$=>""+$),f=rc.bind(null,Jb),m=rc.bind(null,to);function _($,Y){let re,ce;return Fg($)?(re=e.getRecordMatcher($),ce=Y):ce=$,e.addRoute(ce,re)}function x($){const Y=e.getRecordMatcher($);Y&&e.removeRoute(Y)}function k(){return e.getRoutes().map($=>$.record)}function V($){return!!e.getRecordMatcher($)}function H($,Y){if(Y=Le({},Y||c.value),typeof $=="string"){const P=ic(n,$,Y.path),B=e.resolve({path:P.path},Y),q=r.createHref(P.fullPath);return Le(P,B,{params:m(B.params),hash:to(P.hash),redirectedFrom:void 0,href:q})}let re;if($.path!=null)re=Le({},$,{path:ic(n,$.path,Y.path).path});else{const P=Le({},$.params);for(const B in P)P[B]==null&&delete P[B];re=Le({},$,{params:f(P)}),Y.params=f(Y.params)}const ce=e.resolve(re,Y),pe=$.hash||"";ce.params=d(m(ce.params));const T=tE(s,Le({},$,{hash:Qb(pe),path:ce.path})),I=r.createHref(T);return Le({fullPath:T,hash:pe,query:s===hf?gE($.query):$.query||{}},ce,{redirectedFrom:void 0,href:I})}function O($){return typeof $=="string"?ic(n,$,c.value.path):Le({},$)}function C($,Y){if(u!==$)return Xr(ot.NAVIGATION_CANCELLED,{from:Y,to:$})}function D($){return v($)}function U($){return D(Le(O($),{replace:!0}))}function F($,Y){const re=$.matched[$.matched.length-1];if(re&&re.redirect){const{redirect:ce}=re;let pe=typeof ce=="function"?ce($,Y):ce;return typeof pe=="string"&&(pe=pe.includes("?")||pe.includes("#")?pe=O(pe):{path:pe},pe.params={}),Le({query:$.query,hash:$.hash,params:pe.path!=null?{}:$.params},pe)}}function v($,Y){const re=u=H($),ce=c.value,pe=$.state,T=$.force,I=$.replace===!0,P=F(re,ce);if(P)return v(Le(O(P),{state:typeof P=="object"?Le({},pe,P.state):pe,force:T,replace:I}),Y||re);const B=re;B.redirectedFrom=Y;let q;return!T&&nE(s,ce,re)&&(q=Xr(ot.NAVIGATION_DUPLICATED,{to:B,from:ce}),M(ce,ce,!0,!1)),(q?Promise.resolve(q):S(B,ce)).catch(j=>jn(j)?jn(j,ot.NAVIGATION_GUARD_REDIRECT)?j:K(j):xe(j,B,ce)).then(j=>{if(j){if(jn(j,ot.NAVIGATION_GUARD_REDIRECT))return v(Le({replace:I},O(j.to),{state:typeof j.to=="object"?Le({},pe,j.to.state):pe,force:T}),Y||B)}else j=A(B,ce,!0,I,pe);return R(B,ce,j),j})}function w($,Y){const re=C($,Y);return re?Promise.reject(re):Promise.resolve()}function b($){const Y=Re.values().next().value;return Y&&typeof Y.runWithContext=="function"?Y.runWithContext($):$()}function S($,Y){let re;const[ce,pe,T]=yE($,Y);re=ac(ce.reverse(),"beforeRouteLeave",$,Y);for(const P of ce)P.leaveGuards.forEach(B=>{re.push(ys(B,$,Y))});const I=w.bind(null,$,Y);return re.push(I),Xe(re).then(()=>{re=[];for(const P of i.list())re.push(ys(P,$,Y));return re.push(I),Xe(re)}).then(()=>{re=ac(pe,"beforeRouteUpdate",$,Y);for(const P of pe)P.updateGuards.forEach(B=>{re.push(ys(B,$,Y))});return re.push(I),Xe(re)}).then(()=>{re=[];for(const P of T)if(P.beforeEnter)if(vn(P.beforeEnter))for(const B of P.beforeEnter)re.push(ys(B,$,Y));else re.push(ys(P.beforeEnter,$,Y));return re.push(I),Xe(re)}).then(()=>($.matched.forEach(P=>P.enterCallbacks={}),re=ac(T,"beforeRouteEnter",$,Y,b),re.push(I),Xe(re))).then(()=>{re=[];for(const P of o.list())re.push(ys(P,$,Y));return re.push(I),Xe(re)}).catch(P=>jn(P,ot.NAVIGATION_CANCELLED)?P:Promise.reject(P))}function R($,Y,re){l.list().forEach(ce=>b(()=>ce($,Y,re)))}function A($,Y,re,ce,pe){const T=C($,Y);if(T)return T;const I=Y===fs,P=Cr?history.state:{};re&&(ce||I?r.replace($.fullPath,Le({scroll:I&&P&&P.scroll},pe)):r.push($.fullPath,pe)),c.value=$,M($,Y,re,I),K()}let E;function De(){E||(E=r.listen(($,Y,re)=>{if(!ft.listening)return;const ce=H($),pe=F(ce,ft.currentRoute.value);if(pe){v(Le(pe,{replace:!0,force:!0}),ce).catch($i);return}u=ce;const T=c.value;Cr&&uE(uf(T.fullPath,re.delta),sl()),S(ce,T).catch(I=>jn(I,ot.NAVIGATION_ABORTED|ot.NAVIGATION_CANCELLED)?I:jn(I,ot.NAVIGATION_GUARD_REDIRECT)?(v(Le(O(I.to),{force:!0}),ce).then(P=>{jn(P,ot.NAVIGATION_ABORTED|ot.NAVIGATION_DUPLICATED)&&!re.delta&&re.type===Lc.pop&&r.go(-1,!1)}).catch($i),Promise.reject()):(re.delta&&r.go(-re.delta,!1),xe(I,ce,T))).then(I=>{I=I||A(ce,T,!1),I&&(re.delta&&!jn(I,ot.NAVIGATION_CANCELLED)?r.go(-re.delta,!1):re.type===Lc.pop&&jn(I,ot.NAVIGATION_ABORTED|ot.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),R(ce,T,I)}).catch($i)}))}let Je=xi(),We=xi(),Ve;function xe($,Y,re){K($);const ce=We.list();return ce.length?ce.forEach(pe=>pe($,Y,re)):console.error($),Promise.reject($)}function de(){return Ve&&c.value!==fs?Promise.resolve():new Promise(($,Y)=>{Je.add([$,Y])})}function K($){return Ve||(Ve=!$,De(),Je.list().forEach(([Y,re])=>$?re($):Y()),Je.reset()),$}function M($,Y,re,ce){const{scrollBehavior:pe}=t;if(!Cr||!pe)return Promise.resolve();const T=!re&&hE(uf($.fullPath,0))||(ce||!re)&&history.state&&history.state.scroll||null;return Ru().then(()=>pe($,Y,T)).then(I=>I&&cE(I)).catch(I=>xe(I,$,Y))}const ae=$=>r.go($);let Me;const Re=new Set,ft={currentRoute:c,listening:!0,addRoute:_,removeRoute:x,clearRoutes:e.clearRoutes,hasRoute:V,getRoutes:k,resolve:H,options:t,push:D,replace:U,go:ae,back:()=>ae(-1),forward:()=>ae(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:We.add,isReady:de,install($){$.component("RouterLink",$E),$.component("RouterView",qE),$.config.globalProperties.$router=ft,Object.defineProperty($.config.globalProperties,"$route",{enumerable:!0,get:()=>gt(c)}),Cr&&!Me&&c.value===fs&&(Me=!0,D(r.location).catch(ce=>{}));const Y={};for(const ce in fs)Object.defineProperty(Y,ce,{get:()=>c.value[ce],enumerable:!0});$.provide(rl,ft),$.provide(Nu,Mm(Y)),$.provide(Uc,c);const re=$.unmount;Re.add($),$.unmount=function(){Re.delete($),Re.size<1&&(u=fs,E&&E(),E=null,c.value=fs,Me=!1,Ve=!1),re()}}};function Xe($){return $.reduce((Y,re)=>Y.then(()=>b(re)),Promise.resolve())}return ft}function il(){return pn(rl)}function GE(t){return pn(Nu)}const Tf="/HTF/assets/Logo_yellow-C2dq30_U.png",WE=()=>{};var If={};const Hg=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},KE=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],l=t[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},qg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,l=o?t[r+1]:0,c=r+2<t.length,u=c?t[r+2]:0,d=i>>2,f=(i&3)<<4|l>>4;let m=(l&15)<<2|u>>6,_=u&63;c||(_=64,o||(m=64)),s.push(n[d],n[f],n[m],n[_])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Hg(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):KE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const f=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||l==null||u==null||f==null)throw new QE;const m=i<<2|l>>4;if(s.push(m),u!==64){const _=l<<4&240|u>>2;if(s.push(_),f!==64){const x=u<<6&192|f;s.push(x)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class QE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YE=function(t){const e=Hg(t);return qg.encodeByteArray(e,!0)},wa=function(t){return YE(t).replace(/\./g,"")},zg=function(t){try{return qg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function XE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const JE=()=>XE().__FIREBASE_DEFAULTS__,ZE=()=>{if(typeof process>"u"||typeof If>"u")return;const t=If.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},eT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zg(t[1]);return e&&JSON.parse(e)},ol=()=>{try{return WE()||JE()||ZE()||eT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Gg=t=>ol()?.emulatorHosts?.[t],Wg=t=>{const e=Gg(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Kg=()=>ol()?.config,Qg=t=>ol()?.[`_${t}`];class tT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function gr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Vu(t){return(await fetch(t,{credentials:"include"})).ok}function Yg(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[wa(JSON.stringify(n)),wa(JSON.stringify(o)),""].join(".")}const Bi={};function nT(){const t={prod:[],emulator:[]};for(const e of Object.keys(Bi))Bi[e]?t.emulator.push(e):t.prod.push(e);return t}function sT(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Af=!1;function Ou(t,e){if(typeof window>"u"||typeof document>"u"||!gr(window.location.host)||Bi[t]===e||Bi[t]||Af)return;Bi[t]=e;function n(m){return`__firebase__banner__${m}`}const s="__firebase__banner",i=nT().prod.length>0;function o(){const m=document.getElementById(s);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Af=!0,o()},m}function d(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=sT(s),_=n("text"),x=document.getElementById(_)||document.createElement("span"),k=n("learnmore"),V=document.getElementById(k)||document.createElement("a"),H=n("preprendIcon"),O=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const C=m.element;l(C),d(V,k);const D=u();c(O,H),C.append(O,x,V,D),document.body.appendChild(C)}i?(x.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function Ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())}function iT(){const t=ol()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Xg(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function aT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lT(){const t=Ot();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cT(){return!iT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Jg(){try{return typeof indexedDB=="object"}catch{return!1}}function Zg(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}function uT(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const hT="FirebaseError";class ln extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=hT,Object.setPrototypeOf(this,ln.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_r.prototype.create)}}class _r{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?dT(i,s):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new ln(r,l,s)}}function dT(t,e){return t.replace(fT,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const fT=/\{\$([^}]+)}/g;function pT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ds(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(Rf(i)&&Rf(o)){if(!Ds(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Rf(t){return t!==null&&typeof t=="object"}function fo(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function mT(t,e){const n=new gT(t,e);return n.subscribe.bind(n)}class gT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");_T(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=lc),r.error===void 0&&(r.error=lc),r.complete===void 0&&(r.complete=lc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _T(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function lc(){}const yT=1e3,vT=2,wT=4*60*60*1e3,bT=.5;function Sf(t,e=yT,n=vT){const s=e*Math.pow(n,t),r=Math.round(bT*s*(Math.random()-.5)*2);return Math.min(wT,s+r)}function ct(t){return t&&t._delegate?t._delegate:t}class an{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const er="[DEFAULT]";class ET{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new tT;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IT(e))try{this.getOrInitializeService({instanceIdentifier:er})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=er){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=er){return this.instances.has(e)}getOptions(e=er){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:TT(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=er){return this.component?this.component.multipleInstances?e:er:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TT(t){return t===er?void 0:t}function IT(t){return t.instantiationMode==="EAGER"}class AT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ET(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const RT={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},ST=Ce.INFO,xT={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},CT=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=xT[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class al{constructor(e){this.name=e,this._logLevel=ST,this._logHandler=CT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const PT=(t,e)=>e.some(n=>t instanceof n);let xf,Cf;function kT(){return xf||(xf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DT(){return Cf||(Cf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const e_=new WeakMap,$c=new WeakMap,t_=new WeakMap,cc=new WeakMap,Mu=new WeakMap;function NT(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(As(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&e_.set(n,t)}).catch(()=>{}),Mu.set(e,t),e}function VT(t){if($c.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});$c.set(t,e)}let Bc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $c.get(t);if(e==="objectStoreNames")return t.objectStoreNames||t_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return As(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function OT(t){Bc=t(Bc)}function MT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(uc(this),e,...n);return t_.set(s,e.sort?e.sort():[e]),As(s)}:DT().includes(t)?function(...e){return t.apply(uc(this),e),As(e_.get(this))}:function(...e){return As(t.apply(uc(this),e))}}function LT(t){return typeof t=="function"?MT(t):(t instanceof IDBTransaction&&VT(t),PT(t,kT())?new Proxy(t,Bc):t)}function As(t){if(t instanceof IDBRequest)return NT(t);if(cc.has(t))return cc.get(t);const e=LT(t);return e!==t&&(cc.set(t,e),Mu.set(e,t)),e}const uc=t=>Mu.get(t);function n_(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),l=As(o);return s&&o.addEventListener("upgradeneeded",c=>{s(As(o.result),c.oldVersion,c.newVersion,As(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const FT=["get","getKey","getAll","getAllKeys","count"],UT=["put","add","delete","clear"],hc=new Map;function Pf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(hc.get(e))return hc.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=UT.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||FT.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,r?"readwrite":"readonly");let u=c.store;return s&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),r&&c.done]))[0]};return hc.set(e,i),i}OT(t=>({...t,get:(e,n,s)=>Pf(e,n)||t.get(e,n,s),has:(e,n)=>!!Pf(e,n)||t.has(e,n)}));class $T{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(BT(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function BT(t){return t.getComponent()?.type==="VERSION"}const jc="@firebase/app",kf="0.14.6";const Zn=new al("@firebase/app"),jT="@firebase/app-compat",HT="@firebase/analytics-compat",qT="@firebase/analytics",zT="@firebase/app-check-compat",GT="@firebase/app-check",WT="@firebase/auth",KT="@firebase/auth-compat",QT="@firebase/database",YT="@firebase/data-connect",XT="@firebase/database-compat",JT="@firebase/functions",ZT="@firebase/functions-compat",eI="@firebase/installations",tI="@firebase/installations-compat",nI="@firebase/messaging",sI="@firebase/messaging-compat",rI="@firebase/performance",iI="@firebase/performance-compat",oI="@firebase/remote-config",aI="@firebase/remote-config-compat",lI="@firebase/storage",cI="@firebase/storage-compat",uI="@firebase/firestore",hI="@firebase/ai",dI="@firebase/firestore-compat",fI="firebase",pI="12.6.0";const Hc="[DEFAULT]",mI={[jc]:"fire-core",[jT]:"fire-core-compat",[qT]:"fire-analytics",[HT]:"fire-analytics-compat",[GT]:"fire-app-check",[zT]:"fire-app-check-compat",[WT]:"fire-auth",[KT]:"fire-auth-compat",[QT]:"fire-rtdb",[YT]:"fire-data-connect",[XT]:"fire-rtdb-compat",[JT]:"fire-fn",[ZT]:"fire-fn-compat",[eI]:"fire-iid",[tI]:"fire-iid-compat",[nI]:"fire-fcm",[sI]:"fire-fcm-compat",[rI]:"fire-perf",[iI]:"fire-perf-compat",[oI]:"fire-rc",[aI]:"fire-rc-compat",[lI]:"fire-gcs",[cI]:"fire-gcs-compat",[uI]:"fire-fst",[dI]:"fire-fst-compat",[hI]:"fire-vertex","fire-js":"fire-js",[fI]:"fire-js-all"};const ba=new Map,gI=new Map,qc=new Map;function Df(t,e){try{t.container.addComponent(e)}catch(n){Zn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function wn(t){const e=t.name;if(qc.has(e))return Zn.debug(`There were multiple attempts to register component ${e}.`),!1;qc.set(e,t);for(const n of ba.values())Df(n,t);for(const n of gI.values())Df(n,t);return!0}function $s(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function nn(t){return t==null?!1:t.settings!==void 0}const _I={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rs=new _r("app","Firebase",_I);class yI{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new an("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rs.create("app-deleted",{appName:this._name})}}const yr=pI;function s_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:Hc,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Rs.create("bad-app-name",{appName:String(r)});if(n||(n=Kg()),!n)throw Rs.create("no-options");const i=ba.get(r);if(i){if(Ds(n,i.options)&&Ds(s,i.config))return i;throw Rs.create("duplicate-app",{appName:r})}const o=new AT(r);for(const c of qc.values())o.addComponent(c);const l=new yI(n,s,o);return ba.set(r,l),l}function ll(t=Hc){const e=ba.get(t);if(!e&&t===Hc&&Kg())return s_();if(!e)throw Rs.create("no-app",{appName:t});return e}function Gt(t,e,n){let s=mI[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zn.warn(o.join(" "));return}wn(new an(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const vI="firebase-heartbeat-database",wI=1,no="firebase-heartbeat-store";let dc=null;function r_(){return dc||(dc=n_(vI,wI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(no)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rs.create("idb-open",{originalErrorMessage:t.message})})),dc}async function bI(t){try{const n=(await r_()).transaction(no),s=await n.objectStore(no).get(i_(t));return await n.done,s}catch(e){if(e instanceof ln)Zn.warn(e.message);else{const n=Rs.create("idb-get",{originalErrorMessage:e?.message});Zn.warn(n.message)}}}async function Nf(t,e){try{const s=(await r_()).transaction(no,"readwrite");await s.objectStore(no).put(e,i_(t)),await s.done}catch(n){if(n instanceof ln)Zn.warn(n.message);else{const s=Rs.create("idb-set",{originalErrorMessage:n?.message});Zn.warn(s.message)}}}function i_(t){return`${t.name}!${t.options.appId}`}const EI=1024,TI=30;class II{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new RI(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Vf();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>TI){const r=SI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Zn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Vf(),{heartbeatsToSend:n,unsentEntries:s}=AI(this._heartbeatsCache.heartbeats),r=wa(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Zn.warn(e),""}}}function Vf(){return new Date().toISOString().substring(0,10)}function AI(t,e=EI){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),Of(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Of(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class RI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Jg()?Zg().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bI(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Nf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Nf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Of(t){return wa(JSON.stringify({version:2,heartbeats:t})).length}function SI(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}function xI(t){wn(new an("platform-logger",e=>new $T(e),"PRIVATE")),wn(new an("heartbeat",e=>new II(e),"PRIVATE")),Gt(jc,kf,t),Gt(jc,kf,"esm2020"),Gt("fire-js","")}xI("");var CI="firebase",PI="12.6.0";Gt(CI,PI,"app");const o_="@firebase/installations",Lu="0.6.19";const a_=1e4,l_=`w:${Lu}`,c_="FIS_v2",kI="https://firebaseinstallations.googleapis.com/v1",DI=60*60*1e3,NI="installations",VI="Installations";const OI={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},cr=new _r(NI,VI,OI);function u_(t){return t instanceof ln&&t.code.includes("request-failed")}function h_({projectId:t}){return`${kI}/projects/${t}/installations`}function d_(t){return{token:t.token,requestStatus:2,expiresIn:LI(t.expiresIn),creationTime:Date.now()}}async function f_(t,e){const s=(await e.json()).error;return cr.create("request-failed",{requestName:t,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function p_({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function MI(t,{refreshToken:e}){const n=p_(t);return n.append("Authorization",FI(e)),n}async function m_(t){const e=await t();return e.status>=500&&e.status<600?t():e}function LI(t){return Number(t.replace("s","000"))}function FI(t){return`${c_} ${t}`}async function UI({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const s=h_(t),r=p_(t),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={fid:n,authVersion:c_,appId:t.appId,sdkVersion:l_},l={method:"POST",headers:r,body:JSON.stringify(o)},c=await m_(()=>fetch(s,l));if(c.ok){const u=await c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:d_(u.authToken)}}else throw await f_("Create Installation",c)}function g_(t){return new Promise(e=>{setTimeout(e,t)})}function $I(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}const BI=/^[cdef][\w-]{21}$/,zc="";function jI(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=HI(t);return BI.test(n)?n:zc}catch{return zc}}function HI(t){return $I(t).substr(0,22)}function cl(t){return`${t.appName}!${t.appId}`}const __=new Map;function y_(t,e){const n=cl(t);v_(n,e),qI(n,e)}function v_(t,e){const n=__.get(t);if(n)for(const s of n)s(e)}function qI(t,e){const n=zI();n&&n.postMessage({key:t,fid:e}),GI()}let sr=null;function zI(){return!sr&&"BroadcastChannel"in self&&(sr=new BroadcastChannel("[Firebase] FID Change"),sr.onmessage=t=>{v_(t.data.key,t.data.fid)}),sr}function GI(){__.size===0&&sr&&(sr.close(),sr=null)}const WI="firebase-installations-database",KI=1,ur="firebase-installations-store";let fc=null;function Fu(){return fc||(fc=n_(WI,KI,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ur)}}})),fc}async function Ea(t,e){const n=cl(t),r=(await Fu()).transaction(ur,"readwrite"),i=r.objectStore(ur),o=await i.get(n);return await i.put(e,n),await r.done,(!o||o.fid!==e.fid)&&y_(t,e.fid),e}async function w_(t){const e=cl(t),s=(await Fu()).transaction(ur,"readwrite");await s.objectStore(ur).delete(e),await s.done}async function ul(t,e){const n=cl(t),r=(await Fu()).transaction(ur,"readwrite"),i=r.objectStore(ur),o=await i.get(n),l=e(o);return l===void 0?await i.delete(n):await i.put(l,n),await r.done,l&&(!o||o.fid!==l.fid)&&y_(t,l.fid),l}async function Uu(t){let e;const n=await ul(t.appConfig,s=>{const r=QI(s),i=YI(t,r);return e=i.registrationPromise,i.installationEntry});return n.fid===zc?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function QI(t){const e=t||{fid:jI(),registrationStatus:0};return b_(e)}function YI(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(cr.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=XI(t,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:JI(t)}:{installationEntry:e}}async function XI(t,e){try{const n=await UI(t,e);return Ea(t.appConfig,n)}catch(n){throw u_(n)&&n.customData.serverCode===409?await w_(t.appConfig):await Ea(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function JI(t){let e=await Mf(t.appConfig);for(;e.registrationStatus===1;)await g_(100),e=await Mf(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await Uu(t);return s||n}return e}function Mf(t){return ul(t,e=>{if(!e)throw cr.create("installation-not-found");return b_(e)})}function b_(t){return ZI(t)?{fid:t.fid,registrationStatus:0}:t}function ZI(t){return t.registrationStatus===1&&t.registrationTime+a_<Date.now()}async function e1({appConfig:t,heartbeatServiceProvider:e},n){const s=t1(t,n),r=MI(t,n),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={installation:{sdkVersion:l_,appId:t.appId}},l={method:"POST",headers:r,body:JSON.stringify(o)},c=await m_(()=>fetch(s,l));if(c.ok){const u=await c.json();return d_(u)}else throw await f_("Generate Auth Token",c)}function t1(t,{fid:e}){return`${h_(t)}/${e}/authTokens:generate`}async function $u(t,e=!1){let n;const s=await ul(t.appConfig,i=>{if(!E_(i))throw cr.create("not-registered");const o=i.authToken;if(!e&&r1(o))return i;if(o.requestStatus===1)return n=n1(t,e),i;{if(!navigator.onLine)throw cr.create("app-offline");const l=o1(i);return n=s1(t,l),l}});return n?await n:s.authToken}async function n1(t,e){let n=await Lf(t.appConfig);for(;n.authToken.requestStatus===1;)await g_(100),n=await Lf(t.appConfig);const s=n.authToken;return s.requestStatus===0?$u(t,e):s}function Lf(t){return ul(t,e=>{if(!E_(e))throw cr.create("not-registered");const n=e.authToken;return a1(n)?{...e,authToken:{requestStatus:0}}:e})}async function s1(t,e){try{const n=await e1(t,e),s={...e,authToken:n};return await Ea(t.appConfig,s),n}catch(n){if(u_(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await w_(t.appConfig);else{const s={...e,authToken:{requestStatus:0}};await Ea(t.appConfig,s)}throw n}}function E_(t){return t!==void 0&&t.registrationStatus===2}function r1(t){return t.requestStatus===2&&!i1(t)}function i1(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+DI}function o1(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function a1(t){return t.requestStatus===1&&t.requestTime+a_<Date.now()}async function l1(t){const e=t,{installationEntry:n,registrationPromise:s}=await Uu(e);return s?s.catch(console.error):$u(e).catch(console.error),n.fid}async function c1(t,e=!1){const n=t;return await u1(n),(await $u(n,e)).token}async function u1(t){const{registrationPromise:e}=await Uu(t);e&&await e}function h1(t){if(!t||!t.options)throw pc("App Configuration");if(!t.name)throw pc("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw pc(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function pc(t){return cr.create("missing-app-config-values",{valueName:t})}const T_="installations",d1="installations-internal",f1=t=>{const e=t.getProvider("app").getImmediate(),n=h1(e),s=$s(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},p1=t=>{const e=t.getProvider("app").getImmediate(),n=$s(e,T_).getImmediate();return{getId:()=>l1(n),getToken:r=>c1(n,r)}};function m1(){wn(new an(T_,f1,"PUBLIC")),wn(new an(d1,p1,"PRIVATE"))}m1();Gt(o_,Lu);Gt(o_,Lu,"esm2020");const Ta="analytics",g1="firebase_id",_1="origin",y1=60*1e3,v1="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Bu="https://www.googletagmanager.com/gtag/js";const Bt=new al("@firebase/analytics");const w1={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},en=new _r("analytics","Analytics",w1);function b1(t){if(!t.startsWith(Bu)){const e=en.create("invalid-gtag-resource",{gtagURL:t});return Bt.warn(e.message),""}return t}function I_(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function E1(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function T1(t,e){const n=E1("firebase-js-sdk-policy",{createScriptURL:b1}),s=document.createElement("script"),r=`${Bu}?l=${t}&id=${e}`;s.src=n?n?.createScriptURL(r):r,s.async=!0,document.head.appendChild(s)}function I1(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function A1(t,e,n,s,r,i){const o=s[r];try{if(o)await e[o];else{const c=(await I_(n)).find(u=>u.measurementId===r);c&&await e[c.appId]}}catch(l){Bt.error(l)}t("config",r,i)}async function R1(t,e,n,s,r){try{let i=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const l=await I_(n);for(const c of o){const u=l.find(f=>f.measurementId===c),d=u&&e[u.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",s,r||{})}catch(i){Bt.error(i)}}function S1(t,e,n,s){async function r(i,...o){try{if(i==="event"){const[l,c]=o;await R1(t,e,n,l,c)}else if(i==="config"){const[l,c]=o;await A1(t,e,n,s,l,c)}else if(i==="consent"){const[l,c]=o;t("consent",l,c)}else if(i==="get"){const[l,c,u]=o;t("get",l,c,u)}else if(i==="set"){const[l]=o;t("set",l)}else t(i,...o)}catch(l){Bt.error(l)}}return r}function x1(t,e,n,s,r){let i=function(...o){window[s].push(arguments)};return window[r]&&typeof window[r]=="function"&&(i=window[r]),window[r]=S1(i,t,e,n),{gtagCore:i,wrappedGtag:window[r]}}function C1(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Bu)&&n.src.includes(t))return n;return null}const P1=30,k1=1e3;class D1{constructor(e={},n=k1){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const A_=new D1;function N1(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function V1(t){const{appId:e,apiKey:n}=t,s={method:"GET",headers:N1(n)},r=v1.replace("{app-id}",e),i=await fetch(r,s);if(i.status!==200&&i.status!==304){let o="";try{const l=await i.json();l.error?.message&&(o=l.error.message)}catch{}throw en.create("config-fetch-failed",{httpStatus:i.status,responseMessage:o})}return i.json()}async function O1(t,e=A_,n){const{appId:s,apiKey:r,measurementId:i}=t.options;if(!s)throw en.create("no-app-id");if(!r){if(i)return{measurementId:i,appId:s};throw en.create("no-api-key")}const o=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new F1;return setTimeout(async()=>{l.abort()},y1),R_({appId:s,apiKey:r,measurementId:i},o,l,e)}async function R_(t,{throttleEndTimeMillis:e,backoffCount:n},s,r=A_){const{appId:i,measurementId:o}=t;try{await M1(s,e)}catch(l){if(o)return Bt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:i,measurementId:o};throw l}try{const l=await V1(t);return r.deleteThrottleMetadata(i),l}catch(l){const c=l;if(!L1(c)){if(r.deleteThrottleMetadata(i),o)return Bt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:i,measurementId:o};throw l}const u=Number(c?.customData?.httpStatus)===503?Sf(n,r.intervalMillis,P1):Sf(n,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return r.setThrottleMetadata(i,d),Bt.debug(`Calling attemptFetch again in ${u} millis`),R_(t,d,s,r)}}function M1(t,e){return new Promise((n,s)=>{const r=Math.max(e-Date.now(),0),i=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(i),s(en.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function L1(t){if(!(t instanceof ln)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class F1{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function U1(t,e,n,s,r){if(r&&r.global){t("event",n,s);return}else{const i=await e,o={...s,send_to:i};t("event",n,o)}}async function $1(t,e,n,s){if(s&&s.global){const r={};for(const i of Object.keys(n))r[`user_properties.${i}`]=n[i];return t("set",r),Promise.resolve()}else{const r=await e;t("config",r,{update:!0,user_properties:n})}}async function B1(){if(Jg())try{await Zg()}catch(t){return Bt.warn(en.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return Bt.warn(en.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function j1(t,e,n,s,r,i,o){const l=O1(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Bt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Bt.error(m)),e.push(l);const c=B1().then(m=>{if(m)return s.getId()}),[u,d]=await Promise.all([l,c]);C1(i)||T1(i,u.measurementId),r("js",new Date);const f=o?.config??{};return f[_1]="firebase",f.update=!0,d!=null&&(f[g1]=d),r("config",u.measurementId,f),u.measurementId}class H1{constructor(e){this.app=e}_delete(){return delete Br[this.app.options.appId],Promise.resolve()}}let Br={},Ff=[];const Uf={};let mc="dataLayer",q1="gtag",$f,ju,Bf=!1;function z1(){const t=[];if(Xg()&&t.push("This is a browser extension environment."),uT()||t.push("Cookies are not available."),t.length>0){const e=t.map((s,r)=>`(${r+1}) ${s}`).join(" "),n=en.create("invalid-analytics-context",{errorInfo:e});Bt.warn(n.message)}}function G1(t,e,n){z1();const s=t.options.appId;if(!s)throw en.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Bt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw en.create("no-api-key");if(Br[s]!=null)throw en.create("already-exists",{id:s});if(!Bf){I1(mc);const{wrappedGtag:i,gtagCore:o}=x1(Br,Ff,Uf,mc,q1);ju=i,$f=o,Bf=!0}return Br[s]=j1(t,Ff,Uf,e,$f,mc,n),new H1(t)}function W1(t=ll()){t=ct(t);const e=$s(t,Ta);return e.isInitialized()?e.getImmediate():K1(t)}function K1(t,e={}){const n=$s(t,Ta);if(n.isInitialized()){const r=n.getImmediate();if(Ds(e,n.getOptions()))return r;throw en.create("already-initialized")}return n.initialize({options:e})}function Q1(t,e,n){t=ct(t),$1(ju,Br[t.app.options.appId],e,n).catch(s=>Bt.error(s))}function Y1(t,e,n,s){t=ct(t),U1(ju,Br[t.app.options.appId],e,n,s).catch(r=>Bt.error(r))}const jf="@firebase/analytics",Hf="0.10.19";function X1(){wn(new an(Ta,(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return G1(s,r,n)},"PUBLIC")),wn(new an("analytics-internal",t,"PRIVATE")),Gt(jf,Hf),Gt(jf,Hf,"esm2020");function t(e){try{const n=e.getProvider(Ta).getImmediate();return{logEvent:(s,r,i)=>Y1(n,s,r,i),setUserProperties:(s,r)=>Q1(n,s,r)}}catch(n){throw en.create("interop-component-reg-failed",{reason:n})}}}X1();function S_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const J1=S_,x_=new _r("auth","Firebase",S_());const Ia=new al("@firebase/auth");function Z1(t,...e){Ia.logLevel<=Ce.WARN&&Ia.warn(`Auth (${yr}): ${t}`,...e)}function ta(t,...e){Ia.logLevel<=Ce.ERROR&&Ia.error(`Auth (${yr}): ${t}`,...e)}function On(t,...e){throw qu(t,...e)}function mn(t,...e){return qu(t,...e)}function Hu(t,e,n){const s={...J1(),[e]:n};return new _r("auth","Firebase",s).create(e,{appName:t.name})}function lr(t){return Hu(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function eA(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&On(t,"argument-error"),Hu(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qu(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return x_.create(t,...e)}function ye(t,e,...n){if(!t)throw qu(e,...n)}function Kn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ta(e),new Error(e)}function es(t,e){t||Kn(e)}function Gc(){return typeof self<"u"&&self.location?.href||""}function tA(){return qf()==="http:"||qf()==="https:"}function qf(){return typeof self<"u"&&self.location?.protocol||null}function nA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tA()||Xg()||"connection"in navigator)?navigator.onLine:!0}function sA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class po{constructor(e,n){this.shortDelay=e,this.longDelay=n,es(n>e,"Short delay should be less than long delay!"),this.isMobile=rT()||aT()}get(){return nA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function zu(t,e){es(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class C_{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const iA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oA=new po(3e4,6e4);function Gu(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function oi(t,e,n,s,r={}){return P_(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const l=fo({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return oT()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&gr(t.emulatorConfig.host)&&(u.credentials="include"),C_.fetch()(await k_(t,t.config.apiHost,n,l),u)})}async function P_(t,e,n){t._canInitEmulator=!1;const s={...rA,...e};try{const r=new lA(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw jo(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw jo(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw jo(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw jo(t,"user-disabled",o);const d=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Hu(t,d,u);On(t,d)}}catch(r){if(r instanceof ln)throw r;On(t,"network-request-failed",{message:String(r)})}}async function aA(t,e,n,s,r={}){const i=await oi(t,e,n,s,r);return"mfaPendingCredential"in i&&On(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function k_(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?zu(t.config,r):`${t.config.apiScheme}://${r}`;return iA.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class lA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(mn(this.auth,"network-request-failed")),oA.get())})}}function jo(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=mn(t,e,s);return r.customData._tokenResponse=n,r}async function cA(t,e){return oi(t,"POST","/v1/accounts:delete",e)}async function Aa(t,e){return oi(t,"POST","/v1/accounts:lookup",e)}function ji(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uA(t,e=!1){const n=ct(t),s=await n.getIdToken(e),r=Wu(s);ye(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:ji(gc(r.auth_time)),issuedAtTime:ji(gc(r.iat)),expirationTime:ji(gc(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function gc(t){return Number(t)*1e3}function Wu(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return ta("JWT malformed, contained fewer than 3 sections"),null;try{const r=zg(n);return r?JSON.parse(r):(ta("Failed to decode base64 JWT payload"),null)}catch(r){return ta("Caught error parsing JWT payload as JSON",r?.toString()),null}}function zf(t){const e=Wu(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function so(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ln&&hA(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function hA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class dA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Wc{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ji(this.lastLoginAt),this.creationTime=ji(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ra(t){const e=t.auth,n=await t.getIdToken(),s=await so(t,Aa(e,{idToken:n}));ye(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?D_(r.providerUserInfo):[],o=pA(t.providerData,i),l=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!o?.length,u=l?c:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Wc(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function fA(t){const e=ct(t);await Ra(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pA(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function D_(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function mA(t,e){const n=await P_(t,{},async()=>{const s=fo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await k_(t,r,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:s};return t.emulatorConfig&&gr(t.emulatorConfig.host)&&(c.credentials="include"),C_.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function gA(t,e){return oi(t,"POST","/v2/accounts:revokeToken",Gu(t,e))}class jr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zf(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=zf(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await mA(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new jr;return s&&(ye(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(ye(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(ye(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jr,this.toJSON())}_performRefresh(){return Kn("not implemented")}}function ps(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class cn{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new dA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Wc(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await so(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return uA(this,e)}reload(){return fA(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new cn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Ra(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nn(this.auth.app))return Promise.reject(lr(this.auth));const e=await this.getIdToken();return await so(this,cA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:_,providerData:x,stsTokenManager:k}=n;ye(f&&k,e,"internal-error");const V=jr.fromJSON(this.name,k);ye(typeof f=="string",e,"internal-error"),ps(s,e.name),ps(r,e.name),ye(typeof m=="boolean",e,"internal-error"),ye(typeof _=="boolean",e,"internal-error"),ps(i,e.name),ps(o,e.name),ps(l,e.name),ps(c,e.name),ps(u,e.name),ps(d,e.name);const H=new cn({uid:f,auth:e,email:r,emailVerified:m,displayName:s,isAnonymous:_,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:V,createdAt:u,lastLoginAt:d});return x&&Array.isArray(x)&&(H.providerData=x.map(O=>({...O}))),c&&(H._redirectEventId=c),H}static async _fromIdTokenResponse(e,n,s=!1){const r=new jr;r.updateFromServerResponse(n);const i=new cn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await Ra(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];ye(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?D_(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,l=new jr;l.updateFromIdToken(s);const c=new cn({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Wc(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(c,u),c}}const Gf=new Map;function Qn(t){es(t instanceof Function,"Expected a class definition");let e=Gf.get(t);return e?(es(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Gf.set(t,e),e)}class N_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}N_.type="NONE";const Wf=N_;function na(t,e,n){return`firebase:${t}:${e}:${n}`}class Hr{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=na(this.userKey,r.apiKey,i),this.fullPersistenceKey=na("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Aa(this.auth,{idToken:e}).catch(()=>{});return n?cn._fromGetAccountInfoResponse(this.auth,n,e):null}return cn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Hr(Qn(Wf),e,s);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||Qn(Wf);const o=na(s,e.config.apiKey,e.name);let l=null;for(const u of n)try{const d=await u._get(o);if(d){let f;if(typeof d=="string"){const m=await Aa(e,{idToken:d}).catch(()=>{});if(!m)break;f=await cn._fromGetAccountInfoResponse(e,m,d)}else f=cn._fromJSON(e,d);u!==i&&(l=f),i=u;break}}catch{}const c=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Hr(i,e,s):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Hr(i,e,s))}}function Kf(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(L_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(V_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(U_(e))return"Blackberry";if($_(e))return"Webos";if(O_(e))return"Safari";if((e.includes("chrome/")||M_(e))&&!e.includes("edge/"))return"Chrome";if(F_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function V_(t=Ot()){return/firefox\//i.test(t)}function O_(t=Ot()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function M_(t=Ot()){return/crios\//i.test(t)}function L_(t=Ot()){return/iemobile/i.test(t)}function F_(t=Ot()){return/android/i.test(t)}function U_(t=Ot()){return/blackberry/i.test(t)}function $_(t=Ot()){return/webos/i.test(t)}function Ku(t=Ot()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _A(t=Ot()){return Ku(t)&&!!window.navigator?.standalone}function yA(){return lT()&&document.documentMode===10}function B_(t=Ot()){return Ku(t)||F_(t)||$_(t)||U_(t)||/windows phone/i.test(t)||L_(t)}function j_(t,e=[]){let n;switch(t){case"Browser":n=Kf(Ot());break;case"Worker":n=`${Kf(Ot())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${yr}/${s}`}class vA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function wA(t,e={}){return oi(t,"GET","/v2/passwordPolicy",Gu(t,e))}const bA=6;class EA{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??bA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class TA{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qf(this),this.idTokenSubscription=new Qf(this),this.beforeStateQueue=new vA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=x_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qn(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Hr.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Aa(this,{idToken:e}),s=await cn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(nn(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&l?.user&&(s=l.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ra(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nn(this.app))return Promise.reject(lr(this));const n=e?ct(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nn(this.app)?Promise.reject(lr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nn(this.app)?Promise.reject(lr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wA(this),n=new EA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _r("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await gA(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Qn(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await Hr.create(this,[Qn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,r);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=j_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Z1(`Error while retrieving App Check token: ${e.error}`),e?.token}}function hl(t){return ct(t)}class Qf{constructor(e){this.auth=e,this.observer=null,this.addObserver=mT(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Qu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function IA(t){Qu=t}function AA(t){return Qu.loadJS(t)}function RA(){return Qu.gapiScript}function SA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function xA(t,e){const n=$s(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(Ds(i,e??{}))return r;On(r,"already-initialized")}return n.initialize({options:e})}function CA(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Qn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function PA(t,e,n){const s=hl(t);ye(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=H_(e),{host:o,port:l}=kA(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){ye(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ye(Ds(u,s.config.emulator)&&Ds(d,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=d,s.settings.appVerificationDisabledForTesting=!0,gr(o)?(Vu(`${i}//${o}${c}`),Ou("Auth",!0)):DA()}function H_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function kA(t){const e=H_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:Yf(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:Yf(o)}}}function Yf(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function DA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class q_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Kn("not implemented")}_getIdTokenResponse(e){return Kn("not implemented")}_linkToIdToken(e,n){return Kn("not implemented")}_getReauthenticationResolver(e){return Kn("not implemented")}}async function qr(t,e){return aA(t,"POST","/v1/accounts:signInWithIdp",Gu(t,e))}const NA="http://localhost";class hr extends q_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new hr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):On("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new hr(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return qr(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,qr(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qr(e,n)}buildRequest(){const e={requestUri:NA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=fo(n)}return e}}class Yu{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class mo extends Yu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class vs extends mo{constructor(){super("facebook.com")}static credential(e){return hr._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vs.credential(e.oauthAccessToken)}catch{return null}}}vs.FACEBOOK_SIGN_IN_METHOD="facebook.com";vs.PROVIDER_ID="facebook.com";class Wn extends mo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return hr._fromParams({providerId:Wn.PROVIDER_ID,signInMethod:Wn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Wn.credentialFromTaggedObject(e)}static credentialFromError(e){return Wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Wn.credential(n,s)}catch{return null}}}Wn.GOOGLE_SIGN_IN_METHOD="google.com";Wn.PROVIDER_ID="google.com";class ws extends mo{constructor(){super("github.com")}static credential(e){return hr._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ws.credential(e.oauthAccessToken)}catch{return null}}}ws.GITHUB_SIGN_IN_METHOD="github.com";ws.PROVIDER_ID="github.com";class bs extends mo{constructor(){super("twitter.com")}static credential(e,n){return hr._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return bs.credential(n,s)}catch{return null}}}bs.TWITTER_SIGN_IN_METHOD="twitter.com";bs.PROVIDER_ID="twitter.com";class Jr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await cn._fromIdTokenResponse(e,s,r),o=Xf(s);return new Jr({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=Xf(s);return new Jr({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function Xf(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Sa extends ln{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,Sa.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new Sa(e,n,s,r)}}function z_(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Sa._fromErrorAndOperation(t,i,e,s):i})}async function VA(t,e,n=!1){const s=await so(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Jr._forOperation(t,"link",s)}async function OA(t,e,n=!1){const{auth:s}=t;if(nn(s.app))return Promise.reject(lr(s));const r="reauthenticate";try{const i=await so(t,z_(s,r,e,t),n);ye(i.idToken,s,"internal-error");const o=Wu(i.idToken);ye(o,s,"internal-error");const{sub:l}=o;return ye(t.uid===l,s,"user-mismatch"),Jr._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&On(s,"user-mismatch"),i}}async function MA(t,e,n=!1){if(nn(t.app))return Promise.reject(lr(t));const s="signIn",r=await z_(t,s,e),i=await Jr._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}function LA(t,e,n,s){return ct(t).onIdTokenChanged(e,n,s)}function FA(t,e,n){return ct(t).beforeAuthStateChanged(e,n)}function Xu(t,e,n,s){return ct(t).onAuthStateChanged(e,n,s)}function UA(t){return ct(t).signOut()}const xa="__sak";class G_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(xa,"1"),this.storage.removeItem(xa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const $A=1e3,BA=10;class W_ extends G_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=B_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);yA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,BA):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},$A)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}W_.type="LOCAL";const jA=W_;class K_ extends G_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}K_.type="SESSION";const Q_=K_;function HA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class dl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new dl(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await HA(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dl.receivers=[];function Ju(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}class qA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=Ju("",20);r.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(d),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Pn(){return window}function zA(t){Pn().location.href=t}function Y_(){return typeof Pn().WorkerGlobalScope<"u"&&typeof Pn().importScripts=="function"}async function GA(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function WA(){return navigator?.serviceWorker?.controller||null}function KA(){return Y_()?self:null}const X_="firebaseLocalStorageDb",QA=1,Ca="firebaseLocalStorage",J_="fbase_key";class go{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function fl(t,e){return t.transaction([Ca],e?"readwrite":"readonly").objectStore(Ca)}function YA(){const t=indexedDB.deleteDatabase(X_);return new go(t).toPromise()}function Kc(){const t=indexedDB.open(X_,QA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Ca,{keyPath:J_})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Ca)?e(s):(s.close(),await YA(),e(await Kc()))})})}async function Jf(t,e,n){const s=fl(t,!0).put({[J_]:e,value:n});return new go(s).toPromise()}async function XA(t,e){const n=fl(t,!1).get(e),s=await new go(n).toPromise();return s===void 0?null:s.value}function Zf(t,e){const n=fl(t,!0).delete(e);return new go(n).toPromise()}const JA=800,ZA=3;class Z_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kc(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>ZA)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Y_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dl._getInstance(KA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await GA(),!this.activeServiceWorker)return;this.sender=new qA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||WA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kc();return await Jf(e,xa,"1"),await Zf(e,xa),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Jf(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>XA(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Zf(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=fl(r,!1).getAll();return new go(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),JA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Z_.type="LOCAL";const eR=Z_;new po(3e4,6e4);function ey(t,e){return e?Qn(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Zu extends q_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function tR(t){return MA(t.auth,new Zu(t),t.bypassAuthState)}function nR(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),OA(n,new Zu(t),t.bypassAuthState)}async function sR(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),VA(n,new Zu(t),t.bypassAuthState)}class ty{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tR;case"linkViaPopup":case"linkViaRedirect":return sR;case"reauthViaPopup":case"reauthViaRedirect":return nR;default:On(this.auth,"internal-error")}}resolve(e){es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const rR=new po(2e3,1e4);async function iR(t,e,n){if(nn(t.app))return Promise.reject(mn(t,"operation-not-supported-in-this-environment"));const s=hl(t);eA(t,e,Yu);const r=ey(s,n);return new rr(s,"signInViaPopup",e,r).executeNotNull()}class rr extends ty{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,rr.currentPopupAction&&rr.currentPopupAction.cancel(),rr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){es(this.filter.length===1,"Popup operations only handle one event");const e=Ju();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(mn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(mn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rr.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rR.get())};e()}}rr.currentPopupAction=null;const oR="pendingRedirect",sa=new Map;class aR extends ty{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=sa.get(this.auth._key());if(!e){try{const s=await lR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}sa.set(this.auth._key(),e)}return this.bypassAuthState||sa.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function lR(t,e){const n=hR(e),s=uR(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function cR(t,e){sa.set(t._key(),e)}function uR(t){return Qn(t._redirectPersistence)}function hR(t){return na(oR,t.config.apiKey,t.name)}async function dR(t,e,n=!1){if(nn(t.app))return Promise.reject(lr(t));const s=hl(t),r=ey(s,e),o=await new aR(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}const fR=10*60*1e3;class pR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!ny(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(mn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fR&&this.cachedEventUids.clear(),this.cachedEventUids.has(ep(e))}saveEventToCache(e){this.cachedEventUids.add(ep(e)),this.lastProcessedEventTime=Date.now()}}function ep(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ny({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function mR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ny(t);default:return!1}}async function gR(t,e={}){return oi(t,"GET","/v1/projects",e)}const _R=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yR=/^https?/;async function vR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await gR(t);for(const n of e)try{if(wR(n))return}catch{}On(t,"unauthorized-domain")}function wR(t){const e=Gc(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!yR.test(n))return!1;if(_R.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}const bR=new po(3e4,6e4);function tp(){const t=Pn().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ER(t){return new Promise((e,n)=>{function s(){tp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{tp(),n(mn(t,"network-request-failed"))},timeout:bR.get()})}if(Pn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Pn().gapi?.load)s();else{const r=SA("iframefcb");return Pn()[r]=()=>{gapi.load?s():n(mn(t,"network-request-failed"))},AA(`${RA()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw ra=null,e})}let ra=null;function TR(t){return ra=ra||ER(t),ra}const IR=new po(5e3,15e3),AR="__/auth/iframe",RR="emulator/auth/iframe",SR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CR(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?zu(e,RR):`https://${t.config.authDomain}/${AR}`,s={apiKey:e.apiKey,appName:t.name,v:yr},r=xR.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${fo(s).slice(1)}`}async function PR(t){const e=await TR(t),n=Pn().gapi;return ye(n,t,"internal-error"),e.open({where:document.body,url:CR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SR,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=mn(t,"network-request-failed"),l=Pn().setTimeout(()=>{i(o)},IR.get());function c(){Pn().clearTimeout(l),r(s)}s.ping(c).then(c,()=>{i(o)})}))}const kR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DR=500,NR=600,VR="_blank",OR="http://localhost";class np{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function MR(t,e,n,s=DR,r=NR){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c={...kR,width:s.toString(),height:r.toString(),top:i,left:o},u=Ot().toLowerCase();n&&(l=M_(u)?VR:n),V_(u)&&(e=e||OR,c.scrollbars="yes");const d=Object.entries(c).reduce((m,[_,x])=>`${m}${_}=${x},`,"");if(_A(u)&&l!=="_self")return LR(e||"",l),new np(null);const f=window.open(e||"",l,d);ye(f,t,"popup-blocked");try{f.focus()}catch{}return new np(f)}function LR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const FR="__/auth/handler",UR="emulator/auth/handler",$R=encodeURIComponent("fac");async function sp(t,e,n,s,r,i){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:yr,eventId:r};if(e instanceof Yu){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",pT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof mo){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${$R}=${encodeURIComponent(c)}`:"";return`${BR(t)}?${fo(l).slice(1)}${u}`}function BR({config:t}){return t.emulator?zu(t,UR):`https://${t.authDomain}/${FR}`}const _c="webStorageSupport";class jR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Q_,this._completeRedirectFn=dR,this._overrideRedirectResult=cR}async _openPopup(e,n,s,r){es(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await sp(e,n,s,Gc(),r);return MR(e,i,Ju())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await sp(e,n,s,Gc(),r);return zA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(es(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await PR(e),s=new pR(e);return n.register("authEvent",r=>(ye(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(_c,{type:_c},r=>{const i=r?.[0]?.[_c];i!==void 0&&n(!!i),On(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=vR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return B_()||O_()||Ku()}}const HR=jR;var rp="@firebase/auth",ip="1.11.1";class qR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function zR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GR(t){wn(new an("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;ye(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:j_(t)},u=new TA(s,r,i,c);return CA(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),wn(new an("auth-internal",e=>{const n=hl(e.getProvider("auth").getImmediate());return(s=>new qR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gt(rp,ip,zR(t)),Gt(rp,ip,"esm2020")}const WR=5*60,KR=Qg("authIdTokenMaxAge")||WR;let op=null;const QR=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>KR)return;const r=n?.token;op!==r&&(op=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function YR(t=ll()){const e=$s(t,"auth");if(e.isInitialized())return e.getImmediate();const n=xA(t,{popupRedirectResolver:HR,persistence:[eR,jA,Q_]}),s=Qg("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=QR(i.toString());FA(n,o,()=>o(n.currentUser)),LA(n,l=>o(l))}}const r=Gg("auth");return r&&PA(n,`http://${r}`),n}function XR(){return document.getElementsByTagName("head")?.[0]??document}IA({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=mn("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",XR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GR("Browser");var ap=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ss,sy;(function(){var t;function e(v,w){function b(){}b.prototype=w.prototype,v.F=w.prototype,v.prototype=new b,v.prototype.constructor=v,v.D=function(S,R,A){for(var E=Array(arguments.length-2),De=2;De<arguments.length;De++)E[De-2]=arguments[De];return w.prototype[R].apply(S,E)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(v,w,b){b||(b=0);const S=Array(16);if(typeof w=="string")for(var R=0;R<16;++R)S[R]=w.charCodeAt(b++)|w.charCodeAt(b++)<<8|w.charCodeAt(b++)<<16|w.charCodeAt(b++)<<24;else for(R=0;R<16;++R)S[R]=w[b++]|w[b++]<<8|w[b++]<<16|w[b++]<<24;w=v.g[0],b=v.g[1],R=v.g[2];let A=v.g[3],E;E=w+(A^b&(R^A))+S[0]+3614090360&4294967295,w=b+(E<<7&4294967295|E>>>25),E=A+(R^w&(b^R))+S[1]+3905402710&4294967295,A=w+(E<<12&4294967295|E>>>20),E=R+(b^A&(w^b))+S[2]+606105819&4294967295,R=A+(E<<17&4294967295|E>>>15),E=b+(w^R&(A^w))+S[3]+3250441966&4294967295,b=R+(E<<22&4294967295|E>>>10),E=w+(A^b&(R^A))+S[4]+4118548399&4294967295,w=b+(E<<7&4294967295|E>>>25),E=A+(R^w&(b^R))+S[5]+1200080426&4294967295,A=w+(E<<12&4294967295|E>>>20),E=R+(b^A&(w^b))+S[6]+2821735955&4294967295,R=A+(E<<17&4294967295|E>>>15),E=b+(w^R&(A^w))+S[7]+4249261313&4294967295,b=R+(E<<22&4294967295|E>>>10),E=w+(A^b&(R^A))+S[8]+1770035416&4294967295,w=b+(E<<7&4294967295|E>>>25),E=A+(R^w&(b^R))+S[9]+2336552879&4294967295,A=w+(E<<12&4294967295|E>>>20),E=R+(b^A&(w^b))+S[10]+4294925233&4294967295,R=A+(E<<17&4294967295|E>>>15),E=b+(w^R&(A^w))+S[11]+2304563134&4294967295,b=R+(E<<22&4294967295|E>>>10),E=w+(A^b&(R^A))+S[12]+1804603682&4294967295,w=b+(E<<7&4294967295|E>>>25),E=A+(R^w&(b^R))+S[13]+4254626195&4294967295,A=w+(E<<12&4294967295|E>>>20),E=R+(b^A&(w^b))+S[14]+2792965006&4294967295,R=A+(E<<17&4294967295|E>>>15),E=b+(w^R&(A^w))+S[15]+1236535329&4294967295,b=R+(E<<22&4294967295|E>>>10),E=w+(R^A&(b^R))+S[1]+4129170786&4294967295,w=b+(E<<5&4294967295|E>>>27),E=A+(b^R&(w^b))+S[6]+3225465664&4294967295,A=w+(E<<9&4294967295|E>>>23),E=R+(w^b&(A^w))+S[11]+643717713&4294967295,R=A+(E<<14&4294967295|E>>>18),E=b+(A^w&(R^A))+S[0]+3921069994&4294967295,b=R+(E<<20&4294967295|E>>>12),E=w+(R^A&(b^R))+S[5]+3593408605&4294967295,w=b+(E<<5&4294967295|E>>>27),E=A+(b^R&(w^b))+S[10]+38016083&4294967295,A=w+(E<<9&4294967295|E>>>23),E=R+(w^b&(A^w))+S[15]+3634488961&4294967295,R=A+(E<<14&4294967295|E>>>18),E=b+(A^w&(R^A))+S[4]+3889429448&4294967295,b=R+(E<<20&4294967295|E>>>12),E=w+(R^A&(b^R))+S[9]+568446438&4294967295,w=b+(E<<5&4294967295|E>>>27),E=A+(b^R&(w^b))+S[14]+3275163606&4294967295,A=w+(E<<9&4294967295|E>>>23),E=R+(w^b&(A^w))+S[3]+4107603335&4294967295,R=A+(E<<14&4294967295|E>>>18),E=b+(A^w&(R^A))+S[8]+1163531501&4294967295,b=R+(E<<20&4294967295|E>>>12),E=w+(R^A&(b^R))+S[13]+2850285829&4294967295,w=b+(E<<5&4294967295|E>>>27),E=A+(b^R&(w^b))+S[2]+4243563512&4294967295,A=w+(E<<9&4294967295|E>>>23),E=R+(w^b&(A^w))+S[7]+1735328473&4294967295,R=A+(E<<14&4294967295|E>>>18),E=b+(A^w&(R^A))+S[12]+2368359562&4294967295,b=R+(E<<20&4294967295|E>>>12),E=w+(b^R^A)+S[5]+4294588738&4294967295,w=b+(E<<4&4294967295|E>>>28),E=A+(w^b^R)+S[8]+2272392833&4294967295,A=w+(E<<11&4294967295|E>>>21),E=R+(A^w^b)+S[11]+1839030562&4294967295,R=A+(E<<16&4294967295|E>>>16),E=b+(R^A^w)+S[14]+4259657740&4294967295,b=R+(E<<23&4294967295|E>>>9),E=w+(b^R^A)+S[1]+2763975236&4294967295,w=b+(E<<4&4294967295|E>>>28),E=A+(w^b^R)+S[4]+1272893353&4294967295,A=w+(E<<11&4294967295|E>>>21),E=R+(A^w^b)+S[7]+4139469664&4294967295,R=A+(E<<16&4294967295|E>>>16),E=b+(R^A^w)+S[10]+3200236656&4294967295,b=R+(E<<23&4294967295|E>>>9),E=w+(b^R^A)+S[13]+681279174&4294967295,w=b+(E<<4&4294967295|E>>>28),E=A+(w^b^R)+S[0]+3936430074&4294967295,A=w+(E<<11&4294967295|E>>>21),E=R+(A^w^b)+S[3]+3572445317&4294967295,R=A+(E<<16&4294967295|E>>>16),E=b+(R^A^w)+S[6]+76029189&4294967295,b=R+(E<<23&4294967295|E>>>9),E=w+(b^R^A)+S[9]+3654602809&4294967295,w=b+(E<<4&4294967295|E>>>28),E=A+(w^b^R)+S[12]+3873151461&4294967295,A=w+(E<<11&4294967295|E>>>21),E=R+(A^w^b)+S[15]+530742520&4294967295,R=A+(E<<16&4294967295|E>>>16),E=b+(R^A^w)+S[2]+3299628645&4294967295,b=R+(E<<23&4294967295|E>>>9),E=w+(R^(b|~A))+S[0]+4096336452&4294967295,w=b+(E<<6&4294967295|E>>>26),E=A+(b^(w|~R))+S[7]+1126891415&4294967295,A=w+(E<<10&4294967295|E>>>22),E=R+(w^(A|~b))+S[14]+2878612391&4294967295,R=A+(E<<15&4294967295|E>>>17),E=b+(A^(R|~w))+S[5]+4237533241&4294967295,b=R+(E<<21&4294967295|E>>>11),E=w+(R^(b|~A))+S[12]+1700485571&4294967295,w=b+(E<<6&4294967295|E>>>26),E=A+(b^(w|~R))+S[3]+2399980690&4294967295,A=w+(E<<10&4294967295|E>>>22),E=R+(w^(A|~b))+S[10]+4293915773&4294967295,R=A+(E<<15&4294967295|E>>>17),E=b+(A^(R|~w))+S[1]+2240044497&4294967295,b=R+(E<<21&4294967295|E>>>11),E=w+(R^(b|~A))+S[8]+1873313359&4294967295,w=b+(E<<6&4294967295|E>>>26),E=A+(b^(w|~R))+S[15]+4264355552&4294967295,A=w+(E<<10&4294967295|E>>>22),E=R+(w^(A|~b))+S[6]+2734768916&4294967295,R=A+(E<<15&4294967295|E>>>17),E=b+(A^(R|~w))+S[13]+1309151649&4294967295,b=R+(E<<21&4294967295|E>>>11),E=w+(R^(b|~A))+S[4]+4149444226&4294967295,w=b+(E<<6&4294967295|E>>>26),E=A+(b^(w|~R))+S[11]+3174756917&4294967295,A=w+(E<<10&4294967295|E>>>22),E=R+(w^(A|~b))+S[2]+718787259&4294967295,R=A+(E<<15&4294967295|E>>>17),E=b+(A^(R|~w))+S[9]+3951481745&4294967295,v.g[0]=v.g[0]+w&4294967295,v.g[1]=v.g[1]+(R+(E<<21&4294967295|E>>>11))&4294967295,v.g[2]=v.g[2]+R&4294967295,v.g[3]=v.g[3]+A&4294967295}s.prototype.v=function(v,w){w===void 0&&(w=v.length);const b=w-this.blockSize,S=this.C;let R=this.h,A=0;for(;A<w;){if(R==0)for(;A<=b;)r(this,v,A),A+=this.blockSize;if(typeof v=="string"){for(;A<w;)if(S[R++]=v.charCodeAt(A++),R==this.blockSize){r(this,S),R=0;break}}else for(;A<w;)if(S[R++]=v[A++],R==this.blockSize){r(this,S),R=0;break}}this.h=R,this.o+=w},s.prototype.A=function(){var v=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);v[0]=128;for(var w=1;w<v.length-8;++w)v[w]=0;w=this.o*8;for(var b=v.length-8;b<v.length;++b)v[b]=w&255,w/=256;for(this.v(v),v=Array(16),w=0,b=0;b<4;++b)for(let S=0;S<32;S+=8)v[w++]=this.g[b]>>>S&255;return v};function i(v,w){var b=l;return Object.prototype.hasOwnProperty.call(b,v)?b[v]:b[v]=w(v)}function o(v,w){this.h=w;const b=[];let S=!0;for(let R=v.length-1;R>=0;R--){const A=v[R]|0;S&&A==w||(b[R]=A,S=!1)}this.g=b}var l={};function c(v){return-128<=v&&v<128?i(v,function(w){return new o([w|0],w<0?-1:0)}):new o([v|0],v<0?-1:0)}function u(v){if(isNaN(v)||!isFinite(v))return f;if(v<0)return V(u(-v));const w=[];let b=1;for(let S=0;v>=b;S++)w[S]=v/b|0,b*=4294967296;return new o(w,0)}function d(v,w){if(v.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(v.charAt(0)=="-")return V(d(v.substring(1),w));if(v.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=u(Math.pow(w,8));let S=f;for(let A=0;A<v.length;A+=8){var R=Math.min(8,v.length-A);const E=parseInt(v.substring(A,A+R),w);R<8?(R=u(Math.pow(w,R)),S=S.j(R).add(u(E))):(S=S.j(b),S=S.add(u(E)))}return S}var f=c(0),m=c(1),_=c(16777216);t=o.prototype,t.m=function(){if(k(this))return-V(this).m();let v=0,w=1;for(let b=0;b<this.g.length;b++){const S=this.i(b);v+=(S>=0?S:4294967296+S)*w,w*=4294967296}return v},t.toString=function(v){if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(x(this))return"0";if(k(this))return"-"+V(this).toString(v);const w=u(Math.pow(v,6));var b=this;let S="";for(;;){const R=D(b,w).g;b=H(b,R.j(w));let A=((b.g.length>0?b.g[0]:b.h)>>>0).toString(v);if(b=R,x(b))return A+S;for(;A.length<6;)A="0"+A;S=A+S}},t.i=function(v){return v<0?0:v<this.g.length?this.g[v]:this.h};function x(v){if(v.h!=0)return!1;for(let w=0;w<v.g.length;w++)if(v.g[w]!=0)return!1;return!0}function k(v){return v.h==-1}t.l=function(v){return v=H(this,v),k(v)?-1:x(v)?0:1};function V(v){const w=v.g.length,b=[];for(let S=0;S<w;S++)b[S]=~v.g[S];return new o(b,~v.h).add(m)}t.abs=function(){return k(this)?V(this):this},t.add=function(v){const w=Math.max(this.g.length,v.g.length),b=[];let S=0;for(let R=0;R<=w;R++){let A=S+(this.i(R)&65535)+(v.i(R)&65535),E=(A>>>16)+(this.i(R)>>>16)+(v.i(R)>>>16);S=E>>>16,A&=65535,E&=65535,b[R]=E<<16|A}return new o(b,b[b.length-1]&-2147483648?-1:0)};function H(v,w){return v.add(V(w))}t.j=function(v){if(x(this)||x(v))return f;if(k(this))return k(v)?V(this).j(V(v)):V(V(this).j(v));if(k(v))return V(this.j(V(v)));if(this.l(_)<0&&v.l(_)<0)return u(this.m()*v.m());const w=this.g.length+v.g.length,b=[];for(var S=0;S<2*w;S++)b[S]=0;for(S=0;S<this.g.length;S++)for(let R=0;R<v.g.length;R++){const A=this.i(S)>>>16,E=this.i(S)&65535,De=v.i(R)>>>16,Je=v.i(R)&65535;b[2*S+2*R]+=E*Je,O(b,2*S+2*R),b[2*S+2*R+1]+=A*Je,O(b,2*S+2*R+1),b[2*S+2*R+1]+=E*De,O(b,2*S+2*R+1),b[2*S+2*R+2]+=A*De,O(b,2*S+2*R+2)}for(v=0;v<w;v++)b[v]=b[2*v+1]<<16|b[2*v];for(v=w;v<2*w;v++)b[v]=0;return new o(b,0)};function O(v,w){for(;(v[w]&65535)!=v[w];)v[w+1]+=v[w]>>>16,v[w]&=65535,w++}function C(v,w){this.g=v,this.h=w}function D(v,w){if(x(w))throw Error("division by zero");if(x(v))return new C(f,f);if(k(v))return w=D(V(v),w),new C(V(w.g),V(w.h));if(k(w))return w=D(v,V(w)),new C(V(w.g),w.h);if(v.g.length>30){if(k(v)||k(w))throw Error("slowDivide_ only works with positive integers.");for(var b=m,S=w;S.l(v)<=0;)b=U(b),S=U(S);var R=F(b,1),A=F(S,1);for(S=F(S,2),b=F(b,2);!x(S);){var E=A.add(S);E.l(v)<=0&&(R=R.add(b),A=E),S=F(S,1),b=F(b,1)}return w=H(v,R.j(w)),new C(R,w)}for(R=f;v.l(w)>=0;){for(b=Math.max(1,Math.floor(v.m()/w.m())),S=Math.ceil(Math.log(b)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),A=u(b),E=A.j(w);k(E)||E.l(v)>0;)b-=S,A=u(b),E=A.j(w);x(A)&&(A=m),R=R.add(A),v=H(v,E)}return new C(R,v)}t.B=function(v){return D(this,v).h},t.and=function(v){const w=Math.max(this.g.length,v.g.length),b=[];for(let S=0;S<w;S++)b[S]=this.i(S)&v.i(S);return new o(b,this.h&v.h)},t.or=function(v){const w=Math.max(this.g.length,v.g.length),b=[];for(let S=0;S<w;S++)b[S]=this.i(S)|v.i(S);return new o(b,this.h|v.h)},t.xor=function(v){const w=Math.max(this.g.length,v.g.length),b=[];for(let S=0;S<w;S++)b[S]=this.i(S)^v.i(S);return new o(b,this.h^v.h)};function U(v){const w=v.g.length+1,b=[];for(let S=0;S<w;S++)b[S]=v.i(S)<<1|v.i(S-1)>>>31;return new o(b,v.h)}function F(v,w){const b=w>>5;w%=32;const S=v.g.length-b,R=[];for(let A=0;A<S;A++)R[A]=w>0?v.i(A+b)>>>w|v.i(A+b+1)<<32-w:v.i(A+b);return new o(R,v.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,sy=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Ss=o}).apply(typeof ap<"u"?ap:typeof self<"u"?self:typeof window<"u"?window:{});var Ho=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ry,ki,iy,ia,Qc,oy,ay,ly;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ho=="object"&&Ho];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var s=n(this);function r(a,h){if(h)e:{var p=s;a=a.split(".");for(var g=0;g<a.length-1;g++){var N=a[g];if(!(N in p))break e;p=p[N]}a=a[a.length-1],g=p[a],h=h(g),h!=g&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}r("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(a){return a||function(h){var p=[],g;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&p.push([g,h[g]]);return p}});var i=i||{},o=this||self;function l(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function c(a,h,p){return a.call.apply(a.bind,arguments)}function u(a,h,p){return u=c,u.apply(null,arguments)}function d(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function f(a,h){function p(){}p.prototype=h.prototype,a.Z=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Ob=function(g,N,L){for(var te=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)te[Ae-2]=arguments[Ae];return h.prototype[N].apply(g,te)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function _(a){const h=a.length;if(h>0){const p=Array(h);for(let g=0;g<h;g++)p[g]=a[g];return p}return[]}function x(a,h){for(let g=1;g<arguments.length;g++){const N=arguments[g];var p=typeof N;if(p=p!="object"?p:N?Array.isArray(N)?"array":p:"null",p=="array"||p=="object"&&typeof N.length=="number"){p=a.length||0;const L=N.length||0;a.length=p+L;for(let te=0;te<L;te++)a[p+te]=N[te]}else a.push(N)}}class k{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function V(a){o.setTimeout(()=>{throw a},0)}function H(){var a=v;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class O{constructor(){this.h=this.g=null}add(h,p){const g=C.get();g.set(h,p),this.h?this.h.next=g:this.g=g,this.h=g}}var C=new k(()=>new D,a=>a.reset());class D{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let U,F=!1,v=new O,w=()=>{const a=Promise.resolve(void 0);U=()=>{a.then(b)}};function b(){for(var a;a=H();){try{a.h.call(a.g)}catch(p){V(p)}var h=C;h.j(a),h.h<100&&(h.h++,a.next=h.g,h.g=a)}F=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};o.addEventListener("test",p,h),o.removeEventListener("test",p,h)}catch{}return a}();function E(a){return/^[\s\xa0]*$/.test(a)}function De(a,h){R.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,h)}f(De,R),De.prototype.init=function(a,h){const p=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget,h||(p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement)),this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&De.Z.h.call(this)},De.prototype.h=function(){De.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Je="closure_listenable_"+(Math.random()*1e6|0),We=0;function Ve(a,h,p,g,N){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!g,this.ha=N,this.key=++We,this.da=this.fa=!1}function xe(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function de(a,h,p){for(const g in a)h.call(p,a[g],g,a)}function K(a,h){for(const p in a)h.call(void 0,a[p],p,a)}function M(a){const h={};for(const p in a)h[p]=a[p];return h}const ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Me(a,h){let p,g;for(let N=1;N<arguments.length;N++){g=arguments[N];for(p in g)a[p]=g[p];for(let L=0;L<ae.length;L++)p=ae[L],Object.prototype.hasOwnProperty.call(g,p)&&(a[p]=g[p])}}function Re(a){this.src=a,this.g={},this.h=0}Re.prototype.add=function(a,h,p,g,N){const L=a.toString();a=this.g[L],a||(a=this.g[L]=[],this.h++);const te=Xe(a,h,g,N);return te>-1?(h=a[te],p||(h.fa=!1)):(h=new Ve(h,this.src,L,!!g,N),h.fa=p,a.push(h)),h};function ft(a,h){const p=h.type;if(p in a.g){var g=a.g[p],N=Array.prototype.indexOf.call(g,h,void 0),L;(L=N>=0)&&Array.prototype.splice.call(g,N,1),L&&(xe(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function Xe(a,h,p,g){for(let N=0;N<a.length;++N){const L=a[N];if(!L.da&&L.listener==h&&L.capture==!!p&&L.ha==g)return N}return-1}var $="closure_lm_"+(Math.random()*1e6|0),Y={};function re(a,h,p,g,N){if(Array.isArray(h)){for(let L=0;L<h.length;L++)re(a,h[L],p,g,N);return null}return p=ne(p),a&&a[Je]?a.J(h,p,l(g)?!!g.capture:!1,N):ce(a,h,p,!1,g,N)}function ce(a,h,p,g,N,L){if(!h)throw Error("Invalid event type");const te=l(N)?!!N.capture:!!N;let Ae=q(a);if(Ae||(a[$]=Ae=new Re(a)),p=Ae.add(h,p,g,te,L),p.proxy)return p;if(g=pe(),p.proxy=g,g.src=a,g.listener=p,a.addEventListener)A||(N=te),N===void 0&&(N=!1),a.addEventListener(h.toString(),g,N);else if(a.attachEvent)a.attachEvent(P(h.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function pe(){function a(p){return h.call(a.src,a.listener,p)}const h=B;return a}function T(a,h,p,g,N){if(Array.isArray(h))for(var L=0;L<h.length;L++)T(a,h[L],p,g,N);else g=l(g)?!!g.capture:!!g,p=ne(p),a&&a[Je]?(a=a.i,L=String(h).toString(),L in a.g&&(h=a.g[L],p=Xe(h,p,g,N),p>-1&&(xe(h[p]),Array.prototype.splice.call(h,p,1),h.length==0&&(delete a.g[L],a.h--)))):a&&(a=q(a))&&(h=a.g[h.toString()],a=-1,h&&(a=Xe(h,p,g,N)),(p=a>-1?h[a]:null)&&I(p))}function I(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Je])ft(h.i,a);else{var p=a.type,g=a.proxy;h.removeEventListener?h.removeEventListener(p,g,a.capture):h.detachEvent?h.detachEvent(P(p),g):h.addListener&&h.removeListener&&h.removeListener(g),(p=q(h))?(ft(p,a),p.h==0&&(p.src=null,h[$]=null)):xe(a)}}}function P(a){return a in Y?Y[a]:Y[a]="on"+a}function B(a,h){if(a.da)a=!0;else{h=new De(h,this);const p=a.listener,g=a.ha||a.src;a.fa&&I(a),a=p.call(g,h)}return a}function q(a){return a=a[$],a instanceof Re?a:null}var j="__closure_events_fn_"+(Math.random()*1e9>>>0);function ne(a){return typeof a=="function"?a:(a[j]||(a[j]=function(h){return a.handleEvent(h)}),a[j])}function J(){S.call(this),this.i=new Re(this),this.M=this,this.G=null}f(J,S),J.prototype[Je]=!0,J.prototype.removeEventListener=function(a,h,p,g){T(this,a,h,p,g)};function X(a,h){var p,g=a.G;if(g)for(p=[];g;g=g.G)p.push(g);if(a=a.M,g=h.type||h,typeof h=="string")h=new R(h,a);else if(h instanceof R)h.target=h.target||a;else{var N=h;h=new R(g,a),Me(h,N)}N=!0;let L,te;if(p)for(te=p.length-1;te>=0;te--)L=h.g=p[te],N=Q(L,g,!0,h)&&N;if(L=h.g=a,N=Q(L,g,!0,h)&&N,N=Q(L,g,!1,h)&&N,p)for(te=0;te<p.length;te++)L=h.g=p[te],N=Q(L,g,!1,h)&&N}J.prototype.N=function(){if(J.Z.N.call(this),this.i){var a=this.i;for(const h in a.g){const p=a.g[h];for(let g=0;g<p.length;g++)xe(p[g]);delete a.g[h],a.h--}}this.G=null},J.prototype.J=function(a,h,p,g){return this.i.add(String(a),h,!1,p,g)},J.prototype.K=function(a,h,p,g){return this.i.add(String(a),h,!0,p,g)};function Q(a,h,p,g){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();let N=!0;for(let L=0;L<h.length;++L){const te=h[L];if(te&&!te.da&&te.capture==p){const Ae=te.listener,pt=te.ha||te.src;te.fa&&ft(a.i,te),N=Ae.call(pt,g)!==!1&&N}}return N&&!g.defaultPrevented}function ie(a,h){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(a,h||0)}function ee(a){a.g=ie(()=>{a.g=null,a.i&&(a.i=!1,ee(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class ue extends S{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function se(a){S.call(this),this.h=a,this.g={}}f(se,S);var _e=[];function Te(a){de(a.g,function(h,p){this.g.hasOwnProperty(p)&&I(h)},a),a.g={}}se.prototype.N=function(){se.Z.N.call(this),Te(this)},se.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Se=o.JSON.stringify,nt=o.JSON.parse,st=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function St(){}function jt(){}var Wt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Hs(){R.call(this,"d")}f(Hs,R);function rt(){R.call(this,"c")}f(rt,R);var Ke={},br=null;function Un(){return br=br||new J}Ke.Ia="serverreachability";function di(a){R.call(this,Ke.Ia,a)}f(di,R);function qs(a){const h=Un();X(h,new di(h))}Ke.STAT_EVENT="statevent";function So(a,h){R.call(this,Ke.STAT_EVENT,a),this.stat=h}f(So,R);function Mt(a){const h=Un();X(h,new So(h,a))}Ke.Ja="timingevent";function Oh(a,h){R.call(this,Ke.Ja,a),this.size=h}f(Oh,R);function fi(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},h)}function pi(){this.g=!0}pi.prototype.ua=function(){this.g=!1};function jv(a,h,p,g,N,L){a.info(function(){if(a.g)if(L){var te="",Ae=L.split("&");for(let Be=0;Be<Ae.length;Be++){var pt=Ae[Be].split("=");if(pt.length>1){const vt=pt[0];pt=pt[1];const Tn=vt.split("_");te=Tn.length>=2&&Tn[1]=="type"?te+(vt+"="+pt+"&"):te+(vt+"=redacted&")}}}else te=null;else te=L;return"XMLHTTP REQ ("+g+") [attempt "+N+"]: "+h+`
`+p+`
`+te})}function Hv(a,h,p,g,N,L,te){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+N+"]: "+h+`
`+p+`
`+L+" "+te})}function Er(a,h,p,g){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+zv(a,p)+(g?" "+g:"")})}function qv(a,h){a.info(function(){return"TIMEOUT: "+h})}pi.prototype.info=function(){};function zv(a,h){if(!a.g)return h;if(!h)return null;try{const L=JSON.parse(h);if(L){for(a=0;a<L.length;a++)if(Array.isArray(L[a])){var p=L[a];if(!(p.length<2)){var g=p[1];if(Array.isArray(g)&&!(g.length<1)){var N=g[0];if(N!="noop"&&N!="stop"&&N!="close")for(let te=1;te<g.length;te++)g[te]=""}}}}return Se(L)}catch{return h}}var xo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Mh={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Lh;function Dl(){}f(Dl,St),Dl.prototype.g=function(){return new XMLHttpRequest},Lh=new Dl;function mi(a){return encodeURIComponent(String(a))}function Gv(a){var h=1;a=a.split(":");const p=[];for(;h>0&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function os(a,h,p,g){this.j=a,this.i=h,this.l=p,this.S=g||1,this.V=new se(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Fh}function Fh(){this.i=null,this.g="",this.h=!1}var Uh={},Nl={};function Vl(a,h,p){a.M=1,a.A=Po(En(h)),a.u=p,a.R=!0,$h(a,null)}function $h(a,h){a.F=Date.now(),Co(a),a.B=En(a.A);var p=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),Zh(p.i,"t",g),a.C=0,p=a.j.L,a.h=new Fh,a.g=_d(a.j,p?h:null,!a.u),a.P>0&&(a.O=new ue(u(a.Y,a,a.g),a.P)),h=a.V,p=a.g,g=a.ba;var N="readystatechange";Array.isArray(N)||(N&&(_e[0]=N.toString()),N=_e);for(let L=0;L<N.length;L++){const te=re(p,N[L],g||h.handleEvent,!1,h.h||h);if(!te)break;h.g[te.key]=te}h=a.J?M(a.J):{},a.u?(a.v||(a.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,h)):(a.v="GET",a.g.ea(a.B,a.v,null,h)),qs(),jv(a.i,a.v,a.B,a.l,a.S,a.u)}os.prototype.ba=function(a){a=a.target;const h=this.O;h&&cs(a)==3?h.j():this.Y(a)},os.prototype.Y=function(a){try{if(a==this.g)e:{const Ae=cs(this.g),pt=this.g.ya(),Be=this.g.ca();if(!(Ae<3)&&(Ae!=3||this.g&&(this.h.h||this.g.la()||od(this.g)))){this.K||Ae!=4||pt==7||(pt==8||Be<=0?qs(3):qs(2)),Ol(this);var h=this.g.ca();this.X=h;var p=Wv(this);if(this.o=h==200,Hv(this.i,this.v,this.B,this.l,this.S,Ae,h),this.o){if(this.U&&!this.L){t:{if(this.g){var g,N=this.g;if((g=N.g?N.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(g)){var L=g;break t}}L=null}if(a=L)Er(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ml(this,a);else{this.o=!1,this.m=3,Mt(12),zs(this),gi(this);break e}}if(this.R){a=!0;let vt;for(;!this.K&&this.C<p.length;)if(vt=Kv(this,p),vt==Nl){Ae==4&&(this.m=4,Mt(14),a=!1),Er(this.i,this.l,null,"[Incomplete Response]");break}else if(vt==Uh){this.m=4,Mt(15),Er(this.i,this.l,p,"[Invalid Chunk]"),a=!1;break}else Er(this.i,this.l,vt,null),Ml(this,vt);if(Bh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ae!=4||p.length!=0||this.h.h||(this.m=1,Mt(16),a=!1),this.o=this.o&&a,!a)Er(this.i,this.l,p,"[Invalid Chunked Response]"),zs(this),gi(this);else if(p.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),ql(te),te.P=!0,Mt(11))}}else Er(this.i,this.l,p,null),Ml(this,p);Ae==4&&zs(this),this.o&&!this.K&&(Ae==4?fd(this.j,this):(this.o=!1,Co(this)))}else l0(this.g),h==400&&p.indexOf("Unknown SID")>0?(this.m=3,Mt(12)):(this.m=0,Mt(13)),zs(this),gi(this)}}}catch{}finally{}};function Wv(a){if(!Bh(a))return a.g.la();const h=od(a.g);if(h==="")return"";let p="";const g=h.length,N=cs(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return zs(a),gi(a),"";a.h.i=new o.TextDecoder}for(let L=0;L<g;L++)a.h.h=!0,p+=a.h.i.decode(h[L],{stream:!(N&&L==g-1)});return h.length=0,a.h.g+=p,a.C=0,a.h.g}function Bh(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function Kv(a,h){var p=a.C,g=h.indexOf(`
`,p);return g==-1?Nl:(p=Number(h.substring(p,g)),isNaN(p)?Uh:(g+=1,g+p>h.length?Nl:(h=h.slice(g,g+p),a.C=g+p,h)))}os.prototype.cancel=function(){this.K=!0,zs(this)};function Co(a){a.T=Date.now()+a.H,jh(a,a.H)}function jh(a,h){if(a.D!=null)throw Error("WatchDog timer not null");a.D=fi(u(a.aa,a),h)}function Ol(a){a.D&&(o.clearTimeout(a.D),a.D=null)}os.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(qv(this.i,this.B),this.M!=2&&(qs(),Mt(17)),zs(this),this.m=2,gi(this)):jh(this,this.T-a)};function gi(a){a.j.I==0||a.K||fd(a.j,a)}function zs(a){Ol(a);var h=a.O;h&&typeof h.dispose=="function"&&h.dispose(),a.O=null,Te(a.V),a.g&&(h=a.g,a.g=null,h.abort(),h.dispose())}function Ml(a,h){try{var p=a.j;if(p.I!=0&&(p.g==a||Ll(p.h,a))){if(!a.L&&Ll(p.h,a)&&p.I==3){try{var g=p.Ba.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var N=g;if(N[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<a.F)Oo(p),No(p);else break e;Hl(p),Mt(18)}}else p.xa=N[1],0<p.xa-p.K&&N[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=fi(u(p.Va,p),6e3));zh(p.h)<=1&&p.ta&&(p.ta=void 0)}else Ws(p,11)}else if((a.L||p.g==a)&&Oo(p),!E(h))for(N=p.Ba.g.parse(h),h=0;h<N.length;h++){let Be=N[h];const vt=Be[0];if(!(vt<=p.K))if(p.K=vt,Be=Be[1],p.I==2)if(Be[0]=="c"){p.M=Be[1],p.ba=Be[2];const Tn=Be[3];Tn!=null&&(p.ka=Tn,p.j.info("VER="+p.ka));const Ks=Be[4];Ks!=null&&(p.za=Ks,p.j.info("SVER="+p.za));const us=Be[5];us!=null&&typeof us=="number"&&us>0&&(g=1.5*us,p.O=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;const hs=a.g;if(hs){const Lo=hs.g?hs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Lo){var L=g.h;L.g||Lo.indexOf("spdy")==-1&&Lo.indexOf("quic")==-1&&Lo.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Fl(L,L.h),L.h=null))}if(g.G){const zl=hs.g?hs.g.getResponseHeader("X-HTTP-Session-Id"):null;zl&&(g.wa=zl,Qe(g.J,g.G,zl))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-a.F,p.j.info("Handshake RTT: "+p.T+"ms")),g=p;var te=a;if(g.na=gd(g,g.L?g.ba:null,g.W),te.L){Gh(g.h,te);var Ae=te,pt=g.O;pt&&(Ae.H=pt),Ae.D&&(Ol(Ae),Co(Ae)),g.g=te}else hd(g);p.i.length>0&&Vo(p)}else Be[0]!="stop"&&Be[0]!="close"||Ws(p,7);else p.I==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?Ws(p,7):jl(p):Be[0]!="noop"&&p.l&&p.l.qa(Be),p.A=0)}}qs(4)}catch{}}var Qv=class{constructor(a,h){this.g=a,this.map=h}};function Hh(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function qh(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function zh(a){return a.h?1:a.g?a.g.size:0}function Ll(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Fl(a,h){a.g?a.g.add(h):a.h=h}function Gh(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Hh.prototype.cancel=function(){if(this.i=Wh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Wh(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const p of a.g.values())h=h.concat(p.G);return h}return _(a.i)}var Kh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yv(a,h){if(a){a=a.split("&");for(let p=0;p<a.length;p++){const g=a[p].indexOf("=");let N,L=null;g>=0?(N=a[p].substring(0,g),L=a[p].substring(g+1)):N=a[p],h(N,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function as(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;a instanceof as?(this.l=a.l,_i(this,a.j),this.o=a.o,this.g=a.g,yi(this,a.u),this.h=a.h,Ul(this,ed(a.i)),this.m=a.m):a&&(h=String(a).match(Kh))?(this.l=!1,_i(this,h[1]||"",!0),this.o=vi(h[2]||""),this.g=vi(h[3]||"",!0),yi(this,h[4]),this.h=vi(h[5]||"",!0),Ul(this,h[6]||"",!0),this.m=vi(h[7]||"")):(this.l=!1,this.i=new bi(null,this.l))}as.prototype.toString=function(){const a=[];var h=this.j;h&&a.push(wi(h,Qh,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(wi(h,Qh,!0),"@"),a.push(mi(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&a.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(wi(p,p.charAt(0)=="/"?Zv:Jv,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",wi(p,t0)),a.join("")},as.prototype.resolve=function(a){const h=En(this);let p=!!a.j;p?_i(h,a.j):p=!!a.o,p?h.o=a.o:p=!!a.g,p?h.g=a.g:p=a.u!=null;var g=a.h;if(p)yi(h,a.u);else if(p=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var N=h.h.lastIndexOf("/");N!=-1&&(g=h.h.slice(0,N+1)+g)}if(N=g,N==".."||N==".")g="";else if(N.indexOf("./")!=-1||N.indexOf("/.")!=-1){g=N.lastIndexOf("/",0)==0,N=N.split("/");const L=[];for(let te=0;te<N.length;){const Ae=N[te++];Ae=="."?g&&te==N.length&&L.push(""):Ae==".."?((L.length>1||L.length==1&&L[0]!="")&&L.pop(),g&&te==N.length&&L.push("")):(L.push(Ae),g=!0)}g=L.join("/")}else g=N}return p?h.h=g:p=a.i.toString()!=="",p?Ul(h,ed(a.i)):p=!!a.m,p&&(h.m=a.m),h};function En(a){return new as(a)}function _i(a,h,p){a.j=p?vi(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function yi(a,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);a.u=h}else a.u=null}function Ul(a,h,p){h instanceof bi?(a.i=h,n0(a.i,a.l)):(p||(h=wi(h,e0)),a.i=new bi(h,a.l))}function Qe(a,h,p){a.i.set(h,p)}function Po(a){return Qe(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function vi(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function wi(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,Xv),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Xv(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Qh=/[#\/\?@]/g,Jv=/[#\?:]/g,Zv=/[#\?]/g,e0=/[#\?@]/g,t0=/#/g;function bi(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Gs(a){a.g||(a.g=new Map,a.h=0,a.i&&Yv(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=bi.prototype,t.add=function(a,h){Gs(this),this.i=null,a=Tr(this,a);let p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function Yh(a,h){Gs(a),h=Tr(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Xh(a,h){return Gs(a),h=Tr(a,h),a.g.has(h)}t.forEach=function(a,h){Gs(this),this.g.forEach(function(p,g){p.forEach(function(N){a.call(h,N,g,this)},this)},this)};function Jh(a,h){Gs(a);let p=[];if(typeof h=="string")Xh(a,h)&&(p=p.concat(a.g.get(Tr(a,h))));else for(a=Array.from(a.g.values()),h=0;h<a.length;h++)p=p.concat(a[h]);return p}t.set=function(a,h){return Gs(this),this.i=null,a=Tr(this,a),Xh(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=Jh(this,a),a.length>0?String(a[0]):h):h};function Zh(a,h,p){Yh(a,h),p.length>0&&(a.i=null,a.g.set(Tr(a,h),_(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(let g=0;g<h.length;g++){var p=h[g];const N=mi(p);p=Jh(this,p);for(let L=0;L<p.length;L++){let te=N;p[L]!==""&&(te+="="+mi(p[L])),a.push(te)}}return this.i=a.join("&")};function ed(a){const h=new bi;return h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),h}function Tr(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function n0(a,h){h&&!a.j&&(Gs(a),a.i=null,a.g.forEach(function(p,g){const N=g.toLowerCase();g!=N&&(Yh(this,g),Zh(this,N,p))},a)),a.j=h}function s0(a,h){const p=new pi;if(o.Image){const g=new Image;g.onload=d(ls,p,"TestLoadImage: loaded",!0,h,g),g.onerror=d(ls,p,"TestLoadImage: error",!1,h,g),g.onabort=d(ls,p,"TestLoadImage: abort",!1,h,g),g.ontimeout=d(ls,p,"TestLoadImage: timeout",!1,h,g),o.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else h(!1)}function r0(a,h){const p=new pi,g=new AbortController,N=setTimeout(()=>{g.abort(),ls(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:g.signal}).then(L=>{clearTimeout(N),L.ok?ls(p,"TestPingServer: ok",!0,h):ls(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(N),ls(p,"TestPingServer: error",!1,h)})}function ls(a,h,p,g,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),g(p)}catch{}}function i0(){this.g=new st}function $l(a){this.i=a.Sb||null,this.h=a.ab||!1}f($l,St),$l.prototype.g=function(){return new ko(this.i,this.h)};function ko(a,h){J.call(this),this.H=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(ko,J),t=ko.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=h,this.readyState=1,Ti(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(h.body=a),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ei(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ti(this)),this.g&&(this.readyState=3,Ti(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;td(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function td(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Ei(this):Ti(this),this.readyState==3&&td(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Ei(this))},t.Na=function(a){this.g&&(this.response=a,Ei(this))},t.ga=function(){this.g&&Ei(this)};function Ei(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Ti(a)}t.setRequestHeader=function(a,h){this.A.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function Ti(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ko.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function nd(a){let h="";return de(a,function(p,g){h+=g,h+=":",h+=p,h+=`\r
`}),h}function Bl(a,h,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=nd(p),typeof a=="string"?p!=null&&mi(p):Qe(a,h,p))}function it(a){J.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(it,J);var o0=/^https?$/i,a0=["POST","PUT"];t=it.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,h,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Lh.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(L){sd(this,L);return}if(a=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var N in g)p.set(N,g[N]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const L of g.keys())p.set(L,g.get(L));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(L=>L.toLowerCase()=="content-type"),N=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(a0,h,void 0)>=0)||g||N||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,te]of p)this.g.setRequestHeader(L,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(L){sd(this,L)}};function sd(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.o=5,rd(a),Do(a)}function rd(a){a.A||(a.A=!0,X(a,"complete"),X(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,X(this,"complete"),X(this,"abort"),Do(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Do(this,!0)),it.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?id(this):this.Xa())},t.Xa=function(){id(this)};function id(a){if(a.h&&typeof i<"u"){if(a.v&&cs(a)==4)setTimeout(a.Ca.bind(a),0);else if(X(a,"readystatechange"),cs(a)==4){a.h=!1;try{const L=a.ca();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var g;if(g=L===0){let te=String(a.D).match(Kh)[1]||null;!te&&o.self&&o.self.location&&(te=o.self.location.protocol.slice(0,-1)),g=!o0.test(te?te.toLowerCase():"")}p=g}if(p)X(a,"complete"),X(a,"success");else{a.o=6;try{var N=cs(a)>2?a.g.statusText:""}catch{N=""}a.l=N+" ["+a.ca()+"]",rd(a)}}finally{Do(a)}}}}function Do(a,h){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const p=a.g;a.g=null,h||X(a,"ready");try{p.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function cs(a){return a.g?a.g.readyState:0}t.ca=function(){try{return cs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),nt(h)}};function od(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function l0(a){const h={};a=(a.g&&cs(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(E(a[g]))continue;var p=Gv(a[g]);const N=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const L=h[N]||[];h[N]=L,L.push(p)}K(h,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ii(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function ad(a){this.za=0,this.i=[],this.j=new pi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ii("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ii("baseRetryDelayMs",5e3,a),this.Za=Ii("retryDelaySeedMs",1e4,a),this.Ta=Ii("forwardChannelMaxRetries",2,a),this.va=Ii("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Hh(a&&a.concurrentRequestLimit),this.Ba=new i0,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ad.prototype,t.ka=8,t.I=1,t.connect=function(a,h,p,g){Mt(0),this.W=a,this.H=h||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.J=gd(this,null,this.W),Vo(this)};function jl(a){if(ld(a),a.I==3){var h=a.V++,p=En(a.J);if(Qe(p,"SID",a.M),Qe(p,"RID",h),Qe(p,"TYPE","terminate"),Ai(a,p),h=new os(a,a.j,h),h.M=2,h.A=Po(En(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!p&&o.Image&&(new Image().src=h.A,p=!0),p||(h.g=_d(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Co(h)}md(a)}function No(a){a.g&&(ql(a),a.g.cancel(),a.g=null)}function ld(a){No(a),a.v&&(o.clearTimeout(a.v),a.v=null),Oo(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Vo(a){if(!qh(a.h)&&!a.m){a.m=!0;var h=a.Ea;U||w(),F||(U(),F=!0),v.add(h,a),a.D=0}}function c0(a,h){return zh(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=h.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=fi(u(a.Ea,a,h),pd(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const N=new os(this,this.j,a);let L=this.o;if(this.U&&(L?(L=M(L),Me(L,this.U)):L=this.U),this.u!==null||this.R||(N.J=L,L=null),this.S)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,h>4096){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=ud(this,N,h),p=En(this.J),Qe(p,"RID",a),Qe(p,"CVER",22),this.G&&Qe(p,"X-HTTP-Session-Id",this.G),Ai(this,p),L&&(this.R?h="headers="+mi(nd(L))+"&"+h:this.u&&Bl(p,this.u,L)),Fl(this.h,N),this.Ra&&Qe(p,"TYPE","init"),this.S?(Qe(p,"$req",h),Qe(p,"SID","null"),N.U=!0,Vl(N,p,null)):Vl(N,p,h),this.I=2}}else this.I==3&&(a?cd(this,a):this.i.length==0||qh(this.h)||cd(this))};function cd(a,h){var p;h?p=h.l:p=a.V++;const g=En(a.J);Qe(g,"SID",a.M),Qe(g,"RID",p),Qe(g,"AID",a.K),Ai(a,g),a.u&&a.o&&Bl(g,a.u,a.o),p=new os(a,a.j,p,a.D+1),a.u===null&&(p.J=a.o),h&&(a.i=h.G.concat(a.i)),h=ud(a,p,1e3),p.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Fl(a.h,p),Vl(p,g,h)}function Ai(a,h){a.H&&de(a.H,function(p,g){Qe(h,g,p)}),a.l&&de({},function(p,g){Qe(h,g,p)})}function ud(a,h,p){p=Math.min(a.i.length,p);const g=a.l?u(a.l.Ka,a.l,a):null;e:{var N=a.i;let Ae=-1;for(;;){const pt=["count="+p];Ae==-1?p>0?(Ae=N[0].g,pt.push("ofs="+Ae)):Ae=0:pt.push("ofs="+Ae);let Be=!0;for(let vt=0;vt<p;vt++){var L=N[vt].g;const Tn=N[vt].map;if(L-=Ae,L<0)Ae=Math.max(0,N[vt].g-100),Be=!1;else try{L="req"+L+"_"||"";try{var te=Tn instanceof Map?Tn:Object.entries(Tn);for(const[Ks,us]of te){let hs=us;l(us)&&(hs=Se(us)),pt.push(L+Ks+"="+encodeURIComponent(hs))}}catch(Ks){throw pt.push(L+"type="+encodeURIComponent("_badmap")),Ks}}catch{g&&g(Tn)}}if(Be){te=pt.join("&");break e}}te=void 0}return a=a.i.splice(0,p),h.G=a,te}function hd(a){if(!a.g&&!a.v){a.Y=1;var h=a.Da;U||w(),F||(U(),F=!0),v.add(h,a),a.A=0}}function Hl(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=fi(u(a.Da,a),pd(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,dd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=fi(u(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Mt(10),No(this),dd(this))};function ql(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function dd(a){a.g=new os(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var h=En(a.na);Qe(h,"RID","rpc"),Qe(h,"SID",a.M),Qe(h,"AID",a.K),Qe(h,"CI",a.F?"0":"1"),!a.F&&a.ia&&Qe(h,"TO",a.ia),Qe(h,"TYPE","xmlhttp"),Ai(a,h),a.u&&a.o&&Bl(h,a.u,a.o),a.O&&(a.g.H=a.O);var p=a.g;a=a.ba,p.M=1,p.A=Po(En(h)),p.u=null,p.R=!0,$h(p,a)}t.Va=function(){this.C!=null&&(this.C=null,No(this),Hl(this),Mt(19))};function Oo(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function fd(a,h){var p=null;if(a.g==h){Oo(a),ql(a),a.g=null;var g=2}else if(Ll(a.h,h))p=h.G,Gh(a.h,h),g=1;else return;if(a.I!=0){if(h.o)if(g==1){p=h.u?h.u.length:0,h=Date.now()-h.F;var N=a.D;g=Un(),X(g,new Oh(g,p)),Vo(a)}else hd(a);else if(N=h.m,N==3||N==0&&h.X>0||!(g==1&&c0(a,h)||g==2&&Hl(a)))switch(p&&p.length>0&&(h=a.h,h.i=h.i.concat(p)),N){case 1:Ws(a,5);break;case 4:Ws(a,10);break;case 3:Ws(a,6);break;default:Ws(a,2)}}}function pd(a,h){let p=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(p*=2),p*h}function Ws(a,h){if(a.j.info("Error code "+h),h==2){var p=u(a.bb,a),g=a.Ua;const N=!g;g=new as(g||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||_i(g,"https"),Po(g),N?s0(g.toString(),p):r0(g.toString(),p)}else Mt(2);a.I=0,a.l&&a.l.pa(h),md(a),ld(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function md(a){if(a.I=0,a.ja=[],a.l){const h=Wh(a.h);(h.length!=0||a.i.length!=0)&&(x(a.ja,h),x(a.ja,a.i),a.h.i.length=0,_(a.i),a.i.length=0),a.l.oa()}}function gd(a,h,p){var g=p instanceof as?En(p):new as(p);if(g.g!="")h&&(g.g=h+"."+g.g),yi(g,g.u);else{var N=o.location;g=N.protocol,h=h?h+"."+N.hostname:N.hostname,N=+N.port;const L=new as(null);g&&_i(L,g),h&&(L.g=h),N&&yi(L,N),p&&(L.h=p),g=L}return p=a.G,h=a.wa,p&&h&&Qe(g,p,h),Qe(g,"VER",a.ka),Ai(a,g),g}function _d(a,h,p){if(h&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Aa&&!a.ma?new it(new $l({ab:p})):new it(a.ma),h.Fa(a.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function yd(){}t=yd.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Mo(){}Mo.prototype.g=function(a,h){return new Kt(a,h)};function Kt(a,h){J.call(this),this.g=new ad(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(a?a["X-WebChannel-Client-Profile"]=h.sa:a={"X-WebChannel-Client-Profile":h.sa}),this.g.U=a,(a=h&&h.Qb)&&!E(a)&&(this.g.u=a),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!E(h)&&(this.g.G=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Ir(this)}f(Kt,J),Kt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){jl(this.g)},Kt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.v&&(p={},p.__data__=Se(a),a=p);h.i.push(new Qv(h.Ya++,a)),h.I==3&&Vo(h)},Kt.prototype.N=function(){this.g.l=null,delete this.j,jl(this.g),delete this.g,Kt.Z.N.call(this)};function vd(a){Hs.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}f(vd,Hs);function wd(){rt.call(this),this.status=1}f(wd,rt);function Ir(a){this.g=a}f(Ir,yd),Ir.prototype.ra=function(){X(this.g,"a")},Ir.prototype.qa=function(a){X(this.g,new vd(a))},Ir.prototype.pa=function(a){X(this.g,new wd)},Ir.prototype.oa=function(){X(this.g,"b")},Mo.prototype.createWebChannel=Mo.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,ly=function(){return new Mo},ay=function(){return Un()},oy=Ke,Qc={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xo.NO_ERROR=0,xo.TIMEOUT=8,xo.HTTP_ERROR=6,ia=xo,Mh.COMPLETE="complete",iy=Mh,jt.EventType=Wt,Wt.OPEN="a",Wt.CLOSE="b",Wt.ERROR="c",Wt.MESSAGE="d",J.prototype.listen=J.prototype.J,ki=jt,it.prototype.listenOnce=it.prototype.K,it.prototype.getLastError=it.prototype.Ha,it.prototype.getLastErrorCode=it.prototype.ya,it.prototype.getStatus=it.prototype.ca,it.prototype.getResponseJson=it.prototype.La,it.prototype.getResponseText=it.prototype.la,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Fa,ry=it}).apply(typeof Ho<"u"?Ho:typeof self<"u"?self:typeof window<"u"?window:{});const lp="@firebase/firestore",cp="4.9.2";class Ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");let ai="12.3.0";const dr=new al("@firebase/firestore");function Pr(){return dr.logLevel}function le(t,...e){if(dr.logLevel<=Ce.DEBUG){const n=e.map(eh);dr.debug(`Firestore (${ai}): ${t}`,...n)}}function ts(t,...e){if(dr.logLevel<=Ce.ERROR){const n=e.map(eh);dr.error(`Firestore (${ai}): ${t}`,...n)}}function Zr(t,...e){if(dr.logLevel<=Ce.WARN){const n=e.map(eh);dr.warn(`Firestore (${ai}): ${t}`,...n)}}function eh(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function ge(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,cy(t,s,n)}function cy(t,e,n){let s=`FIRESTORE (${ai}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw ts(s),new Error(s)}function Ue(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||cy(e,r,s)}function Ee(t,e){return t}const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends ln{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class uy{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class JR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ct.UNAUTHENTICATED))}shutdown(){}}class ZR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class eS{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ue(this.o===void 0,42304);let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new xs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new xs,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},l=c=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new xs)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ue(typeof s.accessToken=="string",31837,{l:s}),new uy(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string",2055,{h:e}),new Ct(e)}}class tS{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class nS{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new tS(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class up{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sS{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ue(this.o===void 0,3512);const s=i=>{i.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,le("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new up(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ue(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new up(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function rS(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}class th{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=rS(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Pe(t,e){return t<e?-1:t>e?1:0}function Yc(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return yc(r)===yc(i)?Pe(r,i):yc(r)?1:-1}return Pe(t.length,e.length)}const iS=55296,oS=57343;function yc(t){const e=t.charCodeAt(0);return e>=iS&&e<=oS}function ei(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}const hp="__name__";class Rn{constructor(e,n,s){n===void 0?n=0:n>e.length&&ge(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&ge(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Rn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Rn?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=Rn.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Pe(e.length,n.length)}static compareSegments(e,n){const s=Rn.isNumericId(e),r=Rn.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?Rn.extractNumericId(e).compare(Rn.extractNumericId(n)):Yc(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ss.fromString(e.substring(4,e.length-2))}}class ze extends Rn{construct(e,n,s){return new ze(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new oe(z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new ze(n)}static emptyPath(){return new ze([])}}const aS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class It extends Rn{construct(e,n,s){return new It(e,n,s)}static isValidIdentifier(e){return aS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),It.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hp}static keyField(){return new It([hp])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new oe(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new oe(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new oe(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(s+=l,r++):(i(),r++)}if(i(),o)throw new oe(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new It(n)}static emptyPath(){return new It([])}}class he{constructor(e){this.path=e}static fromPath(e){return new he(ze.fromString(e))}static fromName(e){return new he(ze.fromString(e).popFirst(5))}static empty(){return new he(ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new ze(e.slice()))}}function hy(t,e,n){if(!n)throw new oe(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function lS(t,e,n,s){if(e===!0&&s===!0)throw new oe(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dp(t){if(!he.isDocumentKey(t))throw new oe(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fp(t){if(he.isDocumentKey(t))throw new oe(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function dy(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function pl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge(12329,{type:typeof t})}function fr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new oe(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pl(t);throw new oe(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function dt(t,e){const n={typeString:t};return e&&(n.value=e),n}function _o(t,e){if(!dy(t))throw new oe(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new oe(z.INVALID_ARGUMENT,n);return!0}const pp=-62135596800,mp=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*mp);return new Ye(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new oe(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new oe(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<pp)throw new oe(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/mp}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_o(e,Ye._jsonSchema))return new Ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-pp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:dt("string",Ye._jsonSchemaVersion),seconds:dt("number"),nanoseconds:dt("number")};class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new Ye(0,0))}static max(){return new we(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ro=-1;function cS(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=we.fromTimestamp(s===1e9?new Ye(n+1,0):new Ye(n,s));return new Ns(r,he.empty(),e)}function uS(t){return new Ns(t.readTime,t.key,ro)}class Ns{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Ns(we.min(),he.empty(),ro)}static max(){return new Ns(we.max(),he.empty(),ro)}}function hS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(t.documentKey,e.documentKey),n!==0?n:Pe(t.largestBatchId,e.largestBatchId))}const dS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function li(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==dS)throw t;le("LocalStore","Unexpectedly lost primary lease")}class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,s)=>{n(e)})}static reject(e){return new G((n,s)=>{s(e)})}static waitFor(e){return new G((n,s)=>{let r=0,i=0,o=!1;e.forEach(l=>{++r,l.next(()=>{++i,o&&i===r&&n()},c=>s(c))}),o=!0,i===r&&n()})}static or(e){let n=G.resolve(!1);for(const s of e)n=n.next(r=>r?G.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new G((s,r)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(d=>{o[u]=d,++l,l===i&&s(o)},d=>r(d))}})}static doWhile(e,n){return new G((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function pS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ci(t){return t.name==="IndexedDbTransactionError"}class ml{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ml.ce=-1;const nh=-1;function gl(t){return t==null}function Pa(t){return t===0&&1/t==-1/0}function mS(t){return typeof t=="number"&&Number.isInteger(t)&&!Pa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const fy="";function gS(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=gp(e)),e=_S(t.get(n),e);return gp(e)}function _S(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case fy:n+="";break;default:n+=i}}return n}function gp(t){return t+fy+""}function _p(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Bs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function py(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class tt{constructor(e,n){this.comparator=e,this.root=n||Tt.EMPTY}insert(e,n){return new tt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tt.BLACK,null,null))}remove(e){return new tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qo(this.root,e,this.comparator,!1)}getReverseIterator(){return new qo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qo(this.root,e,this.comparator,!0)}}class qo{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tt{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??Tt.RED,this.left=r??Tt.EMPTY,this.right=i??Tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Tt(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Tt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}Tt.EMPTY=null,Tt.RED=!0,Tt.BLACK=!1;Tt.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new Tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yt{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new yp(this.data.getIterator())}getIteratorFrom(e){return new yp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof yt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new yt(this.comparator);return n.data=e,n}}class yp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Jt{constructor(e){this.fields=e,e.sort(It.comparator)}static empty(){return new Jt([])}unionWith(e){let n=new yt(It.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Jt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ei(this.fields,e.fields,(n,s)=>n.isEqual(s))}}class my extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new my("Invalid base64 string: "+i):i}}(e);return new Rt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const yS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vs(t){if(Ue(!!t,39018),typeof t=="string"){let e=0;const n=yS.exec(t);if(Ue(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:lt(t.seconds),nanos:lt(t.nanos)}}function lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Os(t){return typeof t=="string"?Rt.fromBase64String(t):Rt.fromUint8Array(t)}const gy="server_timestamp",_y="__type__",yy="__previous_value__",vy="__local_write_time__";function sh(t){return(t?.mapValue?.fields||{})[_y]?.stringValue===gy}function _l(t){const e=t.mapValue.fields[yy];return sh(e)?_l(e):e}function io(t){const e=Vs(t.mapValue.fields[vy].timestampValue);return new Ye(e.seconds,e.nanos)}class vS{constructor(e,n,s,r,i,o,l,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const ka="(default)";class oo{constructor(e,n){this.projectId=e,this.database=n||ka}static empty(){return new oo("","")}get isDefaultDatabase(){return this.database===ka}isEqual(e){return e instanceof oo&&e.projectId===this.projectId&&e.database===this.database}}const wy="__type__",wS="__max__",zo={mapValue:{}},by="__vector__",Da="value";function Ms(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?sh(t)?4:ES(t)?9007199254740991:bS(t)?10:11:ge(28295,{value:t})}function Mn(t,e){if(t===e)return!0;const n=Ms(t);if(n!==Ms(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return io(t).isEqual(io(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Vs(r.timestampValue),l=Vs(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Os(r.bytesValue).isEqual(Os(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return lt(r.geoPointValue.latitude)===lt(i.geoPointValue.latitude)&&lt(r.geoPointValue.longitude)===lt(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return lt(r.integerValue)===lt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=lt(r.doubleValue),l=lt(i.doubleValue);return o===l?Pa(o)===Pa(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return ei(t.arrayValue.values||[],e.arrayValue.values||[],Mn);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(_p(o)!==_p(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Mn(o[c],l[c])))return!1;return!0}(t,e);default:return ge(52216,{left:t})}}function ao(t,e){return(t.values||[]).find(n=>Mn(n,e))!==void 0}function ti(t,e){if(t===e)return 0;const n=Ms(t),s=Ms(e);if(n!==s)return Pe(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=lt(i.integerValue||i.doubleValue),c=lt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return vp(t.timestampValue,e.timestampValue);case 4:return vp(io(t),io(e));case 5:return Yc(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Os(i),c=Os(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=Pe(l[u],c[u]);if(d!==0)return d}return Pe(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Pe(lt(i.latitude),lt(o.latitude));return l!==0?l:Pe(lt(i.longitude),lt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return wp(t.arrayValue,e.arrayValue);case 10:return function(i,o){const l=i.fields||{},c=o.fields||{},u=l[Da]?.arrayValue,d=c[Da]?.arrayValue,f=Pe(u?.values?.length||0,d?.values?.length||0);return f!==0?f:wp(u,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===zo.mapValue&&o===zo.mapValue)return 0;if(i===zo.mapValue)return 1;if(o===zo.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const m=Yc(c[f],d[f]);if(m!==0)return m;const _=ti(l[c[f]],u[d[f]]);if(_!==0)return _}return Pe(c.length,d.length)}(t.mapValue,e.mapValue);default:throw ge(23264,{he:n})}}function vp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Pe(t,e);const n=Vs(t),s=Vs(e),r=Pe(n.seconds,s.seconds);return r!==0?r:Pe(n.nanos,s.nanos)}function wp(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=ti(n[r],s[r]);if(i)return i}return Pe(n.length,s.length)}function ni(t){return Xc(t)}function Xc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=Vs(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Os(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return he.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=Xc(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${Xc(n.fields[o])}`;return r+"}"}(t.mapValue):ge(61005,{value:t})}function oa(t){switch(Ms(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_l(t);return e?16+oa(e):16;case 5:return 2*t.stringValue.length;case 6:return Os(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+oa(i),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return Bs(s.fields,(i,o)=>{r+=i.length+oa(o)}),r}(t.mapValue);default:throw ge(13486,{value:t})}}function bp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Jc(t){return!!t&&"integerValue"in t}function rh(t){return!!t&&"arrayValue"in t}function Ep(t){return!!t&&"nullValue"in t}function Tp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function aa(t){return!!t&&"mapValue"in t}function bS(t){return(t?.mapValue?.fields||{})[wy]?.stringValue===by}function Hi(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Bs(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Hi(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Hi(t.arrayValue.values[n]);return e}return{...t}}function ES(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===wS}class zt{constructor(e){this.value=e}static empty(){return new zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!aa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hi(n)}setAll(e){let n=It.emptyPath(),s={},r=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=l.popLast()}o?s[l.lastSegment()]=Hi(o):r.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());aa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];aa(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Bs(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new zt(Hi(this.value))}}function Ey(t){const e=[];return Bs(t.fields,(n,s)=>{const r=new It([n]);if(aa(s)){const i=Ey(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new Jt(e)}class kt{constructor(e,n,s,r,i,o,l){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new kt(e,0,we.min(),we.min(),we.min(),zt.empty(),0)}static newFoundDocument(e,n,s,r){return new kt(e,1,n,we.min(),s,r,0)}static newNoDocument(e,n){return new kt(e,2,n,we.min(),we.min(),zt.empty(),0)}static newUnknownDocument(e,n){return new kt(e,3,n,we.min(),we.min(),zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Na{constructor(e,n){this.position=e,this.inclusive=n}}function Ip(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=he.comparator(he.fromName(o.referenceValue),n.key):s=ti(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function Ap(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mn(t.position[n],e.position[n]))return!1;return!0}class Va{constructor(e,n="asc"){this.field=e,this.dir=n}}function TS(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Ty{}class ht extends Ty{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new AS(e,n,s):n==="array-contains"?new xS(e,s):n==="in"?new CS(e,s):n==="not-in"?new PS(e,s):n==="array-contains-any"?new kS(e,s):new ht(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new RS(e,s):new SS(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ti(n,this.value)):n!==null&&Ms(this.value)===Ms(n)&&this.matchesComparison(ti(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bn extends Ty{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new bn(e,n)}matches(e){return Iy(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Iy(t){return t.op==="and"}function Ay(t){return IS(t)&&Iy(t)}function IS(t){for(const e of t.filters)if(e instanceof bn)return!1;return!0}function Zc(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+ni(t.value);if(Ay(t))return t.filters.map(e=>Zc(e)).join(",");{const e=t.filters.map(n=>Zc(n)).join(",");return`${t.op}(${e})`}}function Ry(t,e){return t instanceof ht?function(s,r){return r instanceof ht&&s.op===r.op&&s.field.isEqual(r.field)&&Mn(s.value,r.value)}(t,e):t instanceof bn?function(s,r){return r instanceof bn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,l)=>i&&Ry(o,r.filters[l]),!0):!1}(t,e):void ge(19439)}function Sy(t){return t instanceof ht?function(n){return`${n.field.canonicalString()} ${n.op} ${ni(n.value)}`}(t):t instanceof bn?function(n){return n.op.toString()+" {"+n.getFilters().map(Sy).join(" ,")+"}"}(t):"Filter"}class AS extends ht{constructor(e,n,s){super(e,n,s),this.key=he.fromName(s.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class RS extends ht{constructor(e,n){super(e,"in",n),this.keys=xy("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class SS extends ht{constructor(e,n){super(e,"not-in",n),this.keys=xy("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function xy(t,e){return(e.arrayValue?.values||[]).map(n=>he.fromName(n.referenceValue))}class xS extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return rh(n)&&ao(n.arrayValue,this.value)}}class CS extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ao(this.value.arrayValue,n)}}class PS extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(ao(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ao(this.value.arrayValue,n)}}class kS extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!rh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>ao(this.value.arrayValue,s))}}class DS{constructor(e,n=null,s=[],r=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function Rp(t,e=null,n=[],s=[],r=null,i=null,o=null){return new DS(t,e,n,s,r,i,o)}function ih(t){const e=Ee(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Zc(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),gl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>ni(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>ni(s)).join(",")),e.Te=n}return e.Te}function oh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!TS(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ry(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ap(t.startAt,e.startAt)&&Ap(t.endAt,e.endAt)}function eu(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class yo{constructor(e,n=null,s=[],r=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function NS(t,e,n,s,r,i,o,l){return new yo(t,e,n,s,r,i,o,l)}function Cy(t){return new yo(t)}function Sp(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Py(t){return t.collectionGroup!==null}function qi(t){const e=Ee(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new yt(It.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Va(i,s))}),n.has(It.keyField().canonicalString())||e.Ie.push(new Va(It.keyField(),s))}return e.Ie}function kn(t){const e=Ee(t);return e.Ee||(e.Ee=VS(e,qi(t))),e.Ee}function VS(t,e){if(t.limitType==="F")return Rp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new Va(r.field,i)});const n=t.endAt?new Na(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Na(t.startAt.position,t.startAt.inclusive):null;return Rp(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function tu(t,e){const n=t.filters.concat([e]);return new yo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function nu(t,e,n){return new yo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yl(t,e){return oh(kn(t),kn(e))&&t.limitType===e.limitType}function ky(t){return`${ih(kn(t))}|lt:${t.limitType}`}function kr(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>Sy(r)).join(", ")}]`),gl(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>ni(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>ni(r)).join(",")),`Target(${s})`}(kn(t))}; limitType=${t.limitType})`}function vl(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):he.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of qi(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(o,l,c){const u=Ip(o,l,c);return o.inclusive?u<=0:u<0}(s.startAt,qi(s),r)||s.endAt&&!function(o,l,c){const u=Ip(o,l,c);return o.inclusive?u>=0:u>0}(s.endAt,qi(s),r))}(t,e)}function OS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Dy(t){return(e,n)=>{let s=!1;for(const r of qi(t)){const i=MS(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function MS(t,e,n){const s=t.field.isKeyField()?he.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?ti(c,u):ge(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return ge(19790,{direction:t.dir})}}class vr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Bs(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return py(this.inner)}size(){return this.innerSize}}const LS=new tt(he.comparator);function ns(){return LS}const Ny=new tt(he.comparator);function Di(...t){let e=Ny;for(const n of t)e=e.insert(n.key,n);return e}function Vy(t){let e=Ny;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function ir(){return zi()}function Oy(){return zi()}function zi(){return new vr(t=>t.toString(),(t,e)=>t.isEqual(e))}const FS=new tt(he.comparator),US=new yt(he.comparator);function ke(...t){let e=US;for(const n of t)e=e.add(n);return e}const $S=new yt(Pe);function BS(){return $S}function ah(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pa(e)?"-0":e}}function My(t){return{integerValue:""+t}}function jS(t,e){return mS(e)?My(e):ah(t,e)}class wl{constructor(){this._=void 0}}function HS(t,e,n){return t instanceof Oa?function(r,i){const o={fields:{[_y]:{stringValue:gy},[vy]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&sh(i)&&(i=_l(i)),i&&(o.fields[yy]=i),{mapValue:o}}(n,e):t instanceof lo?Fy(t,e):t instanceof co?Uy(t,e):function(r,i){const o=Ly(r,i),l=xp(o)+xp(r.Ae);return Jc(o)&&Jc(r.Ae)?My(l):ah(r.serializer,l)}(t,e)}function qS(t,e,n){return t instanceof lo?Fy(t,e):t instanceof co?Uy(t,e):n}function Ly(t,e){return t instanceof Ma?function(s){return Jc(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class Oa extends wl{}class lo extends wl{constructor(e){super(),this.elements=e}}function Fy(t,e){const n=$y(e);for(const s of t.elements)n.some(r=>Mn(r,s))||n.push(s);return{arrayValue:{values:n}}}class co extends wl{constructor(e){super(),this.elements=e}}function Uy(t,e){let n=$y(e);for(const s of t.elements)n=n.filter(r=>!Mn(r,s));return{arrayValue:{values:n}}}class Ma extends wl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function xp(t){return lt(t.integerValue||t.doubleValue)}function $y(t){return rh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function zS(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof lo&&r instanceof lo||s instanceof co&&r instanceof co?ei(s.elements,r.elements,Mn):s instanceof Ma&&r instanceof Ma?Mn(s.Ae,r.Ae):s instanceof Oa&&r instanceof Oa}(t.transform,e.transform)}class GS{constructor(e,n){this.version=e,this.transformResults=n}}class gn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gn}static exists(e){return new gn(void 0,e)}static updateTime(e){return new gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function la(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class bl{}function By(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new lh(t.key,gn.none()):new vo(t.key,t.data,gn.none());{const n=t.data,s=zt.empty();let r=new yt(It.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new js(t.key,s,new Jt(r.toArray()),gn.none())}}function WS(t,e,n){t instanceof vo?function(r,i,o){const l=r.value.clone(),c=Pp(r.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof js?function(r,i,o){if(!la(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Pp(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(jy(r)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Gi(t,e,n,s){return t instanceof vo?function(i,o,l,c){if(!la(i.precondition,o))return l;const u=i.value.clone(),d=kp(i.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,s):t instanceof js?function(i,o,l,c){if(!la(i.precondition,o))return l;const u=kp(i.fieldTransforms,c,o),d=o.data;return d.setAll(jy(i)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,s):function(i,o,l){return la(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function KS(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=Ly(s.transform,r||null);i!=null&&(n===null&&(n=zt.empty()),n.set(s.field,i))}return n||null}function Cp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&ei(s,r,(i,o)=>zS(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class vo extends bl{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class js extends bl{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function jy(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function Pp(t,e,n){const s=new Map;Ue(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,l=e.data.field(i.field);s.set(i.field,qS(o,l,n[r]))}return s}function kp(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,HS(i,o,e))}return s}class lh extends bl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QS extends bl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class YS{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&WS(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Gi(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Gi(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Oy();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(r.key)?null:l;const c=By(o,l);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(we.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ke())}isEqual(e){return this.batchId===e.batchId&&ei(this.mutations,e.mutations,(n,s)=>Cp(n,s))&&ei(this.baseMutations,e.baseMutations,(n,s)=>Cp(n,s))}}class ch{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){Ue(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=function(){return FS}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new ch(e,n,s,r)}}class XS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class JS{constructor(e,n){this.count=e,this.unchangedNames=n}}var ut,Ne;function ZS(t){switch(t){case z.OK:return ge(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return ge(15467,{code:t})}}function Hy(t){if(t===void 0)return ts("GRPC error has no .code"),z.UNKNOWN;switch(t){case ut.OK:return z.OK;case ut.CANCELLED:return z.CANCELLED;case ut.UNKNOWN:return z.UNKNOWN;case ut.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case ut.INTERNAL:return z.INTERNAL;case ut.UNAVAILABLE:return z.UNAVAILABLE;case ut.UNAUTHENTICATED:return z.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case ut.NOT_FOUND:return z.NOT_FOUND;case ut.ALREADY_EXISTS:return z.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return z.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case ut.ABORTED:return z.ABORTED;case ut.OUT_OF_RANGE:return z.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return z.UNIMPLEMENTED;case ut.DATA_LOSS:return z.DATA_LOSS;default:return ge(39323,{code:t})}}(Ne=ut||(ut={}))[Ne.OK=0]="OK",Ne[Ne.CANCELLED=1]="CANCELLED",Ne[Ne.UNKNOWN=2]="UNKNOWN",Ne[Ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ne[Ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ne[Ne.NOT_FOUND=5]="NOT_FOUND",Ne[Ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ne[Ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ne[Ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ne[Ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ne[Ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ne[Ne.ABORTED=10]="ABORTED",Ne[Ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ne[Ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ne[Ne.INTERNAL=13]="INTERNAL",Ne[Ne.UNAVAILABLE=14]="UNAVAILABLE",Ne[Ne.DATA_LOSS=15]="DATA_LOSS";function ex(){return new TextEncoder}const tx=new Ss([4294967295,4294967295],0);function Dp(t){const e=ex().encode(t),n=new sy;return n.update(e),new Uint8Array(n.digest())}function Np(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ss([n,s],0),new Ss([r,i],0)]}class uh{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Ni(`Invalid padding: ${n}`);if(s<0)throw new Ni(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ni(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Ni(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ss.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(Ss.fromNumber(s)));return r.compare(tx)===1&&(r=new Ss([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Dp(e),[s,r]=Np(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new uh(i,r,n);return s.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=Dp(e),[s,r]=Np(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Ni extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class El{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,wo.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new El(we.min(),r,new tt(Pe),ns(),ke())}}class wo{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new wo(s,n,ke(),ke(),ke())}}class ca{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class qy{constructor(e,n){this.targetId=e,this.Ce=n}}class zy{constructor(e,n,s=Rt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Vp{constructor(){this.ve=0,this.Fe=Op(),this.Me=Rt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ke(),n=ke(),s=ke();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:ge(38017,{changeType:i})}}),new wo(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Op()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ue(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class nx{constructor(e){this.Ge=e,this.ze=new Map,this.je=ns(),this.Je=Go(),this.He=Go(),this.Ye=new tt(Pe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:ge(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(eu(i))if(s===0){const o=new he(i.path);this.et(n,o,kt.newNoDocument(o,we.min()))}else Ue(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,l;try{o=Os(s).toUint8Array()}catch(c){if(c instanceof my)return Zr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new uh(o,r,i)}catch(c){return Zr(c instanceof Ni?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&eu(l.target)){const c=new he(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,kt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let s=ke();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const r=new El(e,n,this.Ye,this.je,s);return this.je=ns(),this.Je=Go(),this.He=Go(),this.Ye=new tt(Pe),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Vp,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new yt(Pe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new yt(Pe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||le("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Vp),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Go(){return new tt(he.comparator)}function Op(){return new tt(he.comparator)}const sx={asc:"ASCENDING",desc:"DESCENDING"},rx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ix={and:"AND",or:"OR"};class ox{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function su(t,e){return t.useProto3Json||gl(e)?e:{value:e}}function La(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Gy(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ax(t,e){return La(t,e.toTimestamp())}function Dn(t){return Ue(!!t,49232),we.fromTimestamp(function(n){const s=Vs(n);return new Ye(s.seconds,s.nanos)}(t))}function hh(t,e){return ru(t,e).canonicalString()}function ru(t,e){const n=function(r){return new ze(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Wy(t){const e=ze.fromString(t);return Ue(Jy(e),10190,{key:e.toString()}),e}function iu(t,e){return hh(t.databaseId,e.path)}function vc(t,e){const n=Wy(e);if(n.get(1)!==t.databaseId.projectId)throw new oe(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new oe(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new he(Qy(n))}function Ky(t,e){return hh(t.databaseId,e)}function lx(t){const e=Wy(t);return e.length===4?ze.emptyPath():Qy(e)}function ou(t){return new ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Qy(t){return Ue(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Mp(t,e,n){return{name:iu(t,e),fields:n.value.mapValue.fields}}function cx(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ge(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(u,d){return u.useProto3Json?(Ue(d===void 0||typeof d=="string",58123),Rt.fromBase64String(d||"")):(Ue(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Rt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?z.UNKNOWN:Hy(u.code);return new oe(d,u.message||"")}(o);n=new zy(s,r,i,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=vc(t,s.document.name),i=Dn(s.document.updateTime),o=s.document.createTime?Dn(s.document.createTime):we.min(),l=new zt({mapValue:{fields:s.document.fields}}),c=kt.newFoundDocument(r,i,o,l),u=s.targetIds||[],d=s.removedTargetIds||[];n=new ca(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=vc(t,s.document),i=s.readTime?Dn(s.readTime):we.min(),o=kt.newNoDocument(r,i),l=s.removedTargetIds||[];n=new ca([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=vc(t,s.document),i=s.removedTargetIds||[];n=new ca([],i,r,null)}else{if(!("filter"in e))return ge(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new JS(r,i),l=s.targetId;n=new qy(l,o)}}return n}function ux(t,e){let n;if(e instanceof vo)n={update:Mp(t,e.key,e.value)};else if(e instanceof lh)n={delete:iu(t,e.key)};else if(e instanceof js)n={update:Mp(t,e.key,e.data),updateMask:vx(e.fieldMask)};else{if(!(e instanceof QS))return ge(16599,{Vt:e.type});n={verify:iu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const l=o.transform;if(l instanceof Oa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof lo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof co)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ma)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw ge(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:ax(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ge(27497)}(t,e.precondition)),n}function hx(t,e){return t&&t.length>0?(Ue(e!==void 0,14353),t.map(n=>function(r,i){let o=r.updateTime?Dn(r.updateTime):Dn(i);return o.isEqual(we.min())&&(o=Dn(i)),new GS(o,r.transformResults||[])}(n,e))):[]}function dx(t,e){return{documents:[Ky(t,e.path)]}}function fx(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Ky(t,r);const i=function(u){if(u.length!==0)return Xy(bn.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:Dr(m.field),direction:gx(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=su(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:r}}function px(t){let e=lx(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Ue(s===1,65062);const d=n.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(f){const m=Yy(f);return m instanceof bn&&Ay(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(x){return new Va(Nr(x.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,gl(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){const m=!!f.before,_=f.values||[];return new Na(_,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const m=!f.before,_=f.values||[];return new Na(_,m)}(n.endAt)),NS(e,r,o,i,l,"F",c,u)}function mx(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Yy(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Nr(n.unaryFilter.field);return ht.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=Nr(n.unaryFilter.field);return ht.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Nr(n.unaryFilter.field);return ht.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Nr(n.unaryFilter.field);return ht.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}}(t):t.fieldFilter!==void 0?function(n){return ht.create(Nr(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return bn.create(n.compositeFilter.filters.map(s=>Yy(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ge(1026)}}(n.compositeFilter.op))}(t):ge(30097,{filter:t})}function gx(t){return sx[t]}function _x(t){return rx[t]}function yx(t){return ix[t]}function Dr(t){return{fieldPath:t.canonicalString()}}function Nr(t){return It.fromServerFormat(t.fieldPath)}function Xy(t){return t instanceof ht?function(n){if(n.op==="=="){if(Tp(n.value))return{unaryFilter:{field:Dr(n.field),op:"IS_NAN"}};if(Ep(n.value))return{unaryFilter:{field:Dr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Tp(n.value))return{unaryFilter:{field:Dr(n.field),op:"IS_NOT_NAN"}};if(Ep(n.value))return{unaryFilter:{field:Dr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dr(n.field),op:_x(n.op),value:n.value}}}(t):t instanceof bn?function(n){const s=n.getFilters().map(r=>Xy(r));return s.length===1?s[0]:{compositeFilter:{op:yx(n.op),filters:s}}}(t):ge(54877,{filter:t})}function vx(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Jy(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class Es{constructor(e,n,s,r,i=we.min(),o=we.min(),l=Rt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class wx{constructor(e){this.yt=e}}function bx(t){const e=px({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?nu(e,e.limit,"L"):e}class Ex{constructor(){this.Cn=new Tx}addToCollectionParentIndex(e,n){return this.Cn.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(Ns.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(Ns.min())}updateCollectionGroup(e,n,s){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class Tx{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new yt(ze.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new yt(ze.comparator)).toArray()}}const Lp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Zy=41943040;class qt{static withCacheSize(e){return new qt(e,qt.DEFAULT_COLLECTION_PERCENTILE,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}qt.DEFAULT_COLLECTION_PERCENTILE=10,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qt.DEFAULT=new qt(Zy,qt.DEFAULT_COLLECTION_PERCENTILE,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qt.DISABLED=new qt(-1,0,0);class si{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new si(0)}static cr(){return new si(-1)}}const Fp="LruGarbageCollector",Ix=1048576;function Up([t,e],[n,s]){const r=Pe(t,n);return r===0?Pe(e,s):r}class Ax{constructor(e){this.Ir=e,this.buffer=new yt(Up),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Up(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Rx{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){le(Fp,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ci(n)?le(Fp,"Ignoring IndexedDB error during garbage collection: ",n):await li(n)}await this.Vr(3e5)})}}class Sx{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return G.resolve(ml.ce);const s=new Ax(n);return this.mr.forEachTarget(e,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(Lp)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lp):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,o=Date.now(),this.nthSequenceNumber(e,r))).next(f=>(s=f,l=Date.now(),this.removeTargets(e,s,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,s))).next(f=>(u=Date.now(),Pr()<=Ce.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${r} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:f})))}}function xx(t,e){return new Sx(t,e)}class Cx{constructor(){this.changes=new vr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,kt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?G.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Px{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class kx{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&Gi(s.mutation,r,Jt.empty(),Ye.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,ke()).next(()=>s))}getLocalViewOfDocuments(e,n,s=ke()){const r=ir();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=Di();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=ir();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,ke()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,s,r){let i=ns();const o=zi(),l=function(){return zi()}();return n.forEach((c,u)=>{const d=s.get(u.key);r.has(u.key)&&(d===void 0||d.mutation instanceof js)?i=i.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Gi(d.mutation,u,d.mutation.getFieldMask(),Ye.now())):o.set(u.key,Jt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>l.set(u,new Px(d,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const s=zi();let r=new tt((o,l)=>o-l),i=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=s.get(c)||Jt.empty();d=l.applyToLocalView(u,d),s.set(c,d);const f=(r.get(l.batchId)||ke()).add(c);r=r.insert(l.batchId,f)})}).next(()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=Oy();d.forEach(m=>{if(!i.has(m)){const _=By(n.get(m),s.get(m));_!==null&&f.set(m,_),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return G.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Py(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):G.resolve(ir());let l=ro,c=i;return o.next(u=>G.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(d)?G.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,ke())).next(d=>({batchId:l,changes:Vy(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next(s=>{let r=Di();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=Di();return this.indexManager.getCollectionParents(e,i).next(l=>G.forEach(l,c=>{const u=function(f,m){return new yo(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,r).next(d=>{d.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,kt.newInvalidDocument(d)))});let l=Di();return o.forEach((c,u)=>{const d=i.get(c);d!==void 0&&Gi(d.mutation,u,Jt.empty(),Ye.now()),vl(n,u)&&(l=l.insert(c,u))}),l})}}class Dx{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return G.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Dn(r.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:bx(r.bundledQuery),readTime:Dn(r.readTime)}}(n)),G.resolve()}}class Nx{constructor(){this.overlays=new tt(he.comparator),this.qr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const s=ir();return G.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),G.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),G.resolve()}getOverlaysForCollection(e,n,s){const r=ir(),i=n.length+1,o=new he(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return G.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new tt((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let d=i.get(u.largestBatchId);d===null&&(d=ir(),i=i.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=ir(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=r)););return G.resolve(l)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new XS(n,s));let i=this.qr.get(n);i===void 0&&(i=ke(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}class Vx{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}class dh{constructor(){this.Qr=new yt(bt.$r),this.Ur=new yt(bt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new bt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new bt(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new he(new ze([])),s=new bt(n,e),r=new bt(n,e+1),i=[];return this.Ur.forEachInRange([s,r],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new he(new ze([])),s=new bt(n,e),r=new bt(n,e+1);let i=ke();return this.Ur.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new bt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class bt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return he.comparator(e.key,n.key)||Pe(e.Yr,n.Yr)}static Kr(e,n){return Pe(e.Yr,n.Yr)||he.comparator(e.key,n.key)}}class Ox{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new yt(bt.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new YS(i,n,s,r);this.mutationQueue.push(o);for(const l of r)this.Zr=this.Zr.add(new bt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,n){return G.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return G.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?nh:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new bt(n,0),r=new bt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],o=>{const l=this.Xr(o.Yr);i.push(l)}),G.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new yt(Pe);return n.forEach(r=>{const i=new bt(r,0),o=new bt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{s=s.add(l.Yr)})}),G.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;he.isDocumentKey(i)||(i=i.child(""));const o=new bt(new he(i),0);let l=new yt(Pe);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(l=l.add(c.Yr)),!0)},o),G.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(s=>{const r=this.Xr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Ue(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return G.forEach(n.mutations,r=>{const i=new bt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new bt(n,0),r=this.Zr.firstAfterOrEqual(s);return G.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Mx{constructor(e){this.ri=e,this.docs=function(){return new tt(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return G.resolve(s?s.document.mutableCopy():kt.newInvalidDocument(n))}getEntries(e,n){let s=ns();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():kt.newInvalidDocument(r))}),G.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=ns();const o=n.path,l=new he(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||hS(uS(d),s)<=0||(r.has(d.key)||vl(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return G.resolve(i)}getAllFromCollectionGroup(e,n,s,r){ge(9500)}ii(e,n){return G.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new Lx(this)}getSize(e){return G.resolve(this.size)}}class Lx extends Cx{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)}),G.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class Fx{constructor(e){this.persistence=e,this.si=new vr(n=>ih(n),oh),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new dh,this.targetCount=0,this.ai=si.ur()}forEachTarget(e,n){return this.si.forEach((s,r)=>n(r)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),G.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new si(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Pr(n),G.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),G.waitFor(i).next(()=>r)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return G.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),G.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),G.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return G.resolve(s)}containsKey(e,n){return G.resolve(this._i.containsKey(n))}}class ev{constructor(e,n){this.ui={},this.overlays={},this.ci=new ml(0),this.li=!1,this.li=!0,this.hi=new Vx,this.referenceDelegate=e(this),this.Pi=new Fx(this),this.indexManager=new Ex,this.remoteDocumentCache=function(r){return new Mx(r)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new wx(n),this.Ii=new Dx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Nx,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new Ox(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){le("MemoryPersistence","Starting transaction:",e);const r=new Ux(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(e,n){return G.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class Ux extends fS{constructor(e){super(),this.currentSequenceNumber=e}}class fh{constructor(e){this.persistence=e,this.Ri=new dh,this.Vi=null}static mi(e){return new fh(e)}get fi(){if(this.Vi)return this.Vi;throw ge(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),G.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),G.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,s=>{const r=he.fromPath(s);return this.gi(e,r).next(i=>{i||n.removeEntry(r,we.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return G.or([()=>G.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Fa{constructor(e,n){this.persistence=e,this.pi=new vr(s=>gS(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=xx(this,n)}static mi(e,n){return new Fa(e,n)}Ei(){}di(e){return G.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return G.forEach(this.pi,(s,r)=>this.br(e,s,r).next(i=>i?G.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,o=>this.br(e,o,n).next(l=>{l||(s++,i.removeEntry(o,we.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),G.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=oa(e.data.value)),n}br(e,n,s){return G.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return G.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ph{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=ke(),r=ke();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new ph(e,n.fromCache,s,r)}}class $x{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Bx{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return cT()?8:pS(Ot())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new $x;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,s,r){return s.documentReadCount<this.fs?(Pr()<=Ce.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",kr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(Pr()<=Ce.DEBUG&&le("QueryEngine","Query:",kr(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(Pr()<=Ce.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",kr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kn(n))):G.resolve())}ys(e,n){if(Sp(n))return G.resolve(null);let s=kn(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=nu(n,null,"F"),s=kn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=ke(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,s).next(c=>{const u=this.Ds(n,l);return this.Cs(n,u,o,c.readTime)?this.ys(e,nu(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,s,r){return Sp(n)||r.isEqual(we.min())?G.resolve(null):this.ps.getDocuments(e,s).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?G.resolve(null):(Pr()<=Ce.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),kr(n)),this.vs(e,o,n,cS(r,ro)).next(l=>l))})}Ds(e,n){let s=new yt(Dy(e));return n.forEach((r,i)=>{vl(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return Pr()<=Ce.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",kr(n)),this.ps.getDocumentsMatchingQuery(e,n,Ns.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}const mh="LocalStore",jx=3e8;class Hx{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new tt(Pe),this.xs=new vr(i=>ih(i),oh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kx(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function qx(t,e,n,s){return new Hx(t,e,n,s)}async function tv(t,e){const n=Ee(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],l=[];let c=ke();for(const u of r){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of i){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(s,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function zx(t,e){const n=Ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,m=f.keys();let _=G.resolve();return m.forEach(x=>{_=_.next(()=>d.getEntry(c,x)).next(k=>{const V=u.docVersions.get(x);Ue(V!==null,48541),k.version.compareTo(V)<0&&(f.applyToRemoteDocument(k,u),k.isValidDocument()&&(k.setReadTime(u.commitVersion),d.addEntry(k)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let c=ke();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function nv(t){const e=Ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Gx(t,e){const n=Ee(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];e.targetChanges.forEach((d,f)=>{const m=r.get(f);if(!m)return;l.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,f)));let _=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?_=_.withResumeToken(Rt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,s)),r=r.insert(f,_),function(k,V,H){return k.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=jx?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(m,_,d)&&l.push(n.Pi.updateTargetData(i,_))});let c=ns(),u=ke();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(Wx(i,o,e.documentUpdates).next(d=>{c=d.ks,u=d.qs})),!s.isEqual(we.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));l.push(d)}return G.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ms=r,i))}function Wx(t,e,n){let s=ke(),r=ke();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=ns();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(we.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):le(mh,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:r}})}function Kx(t,e){const n=Ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=nh),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Qx(t,e){const n=Ee(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Pi.getTargetData(s,e).next(i=>i?(r=i,G.resolve(r)):n.Pi.allocateTargetId(s).next(o=>(r=new Es(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function au(t,e,n){const s=Ee(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!ci(o))throw o;le(mh,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function $p(t,e,n){const s=Ee(t);let r=we.min(),i=ke();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const f=Ee(c),m=f.xs.get(d);return m!==void 0?G.resolve(f.Ms.get(m)):f.Pi.getTargetData(u,d)}(s,o,kn(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:we.min(),n?i:ke())).next(l=>(Yx(s,OS(e),l),{documents:l,Qs:i})))}function Yx(t,e,n){let s=t.Os.get(e)||we.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Os.set(e,s)}class Bp{constructor(){this.activeTargetIds=BS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Xx{constructor(){this.Mo=new Bp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Bp,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Jx{Oo(e){}shutdown(){}}const jp="ConnectivityMonitor";class Hp{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){le(jp,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){le(jp,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Wo=null;function lu(){return Wo===null?Wo=function(){return 268435456+Math.round(2147483648*Math.random())}():Wo++,"0x"+Wo.toString(16)}const wc="RestConnection",Zx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===ka?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=lu(),l=this.zo(e,n.toUriEncodedString());le(wc,`Sending RPC '${e}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,i);const{host:u}=new URL(l),d=gr(u);return this.Jo(e,l,c,s,d).then(f=>(le(wc,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Zr(wc,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",s),f})}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ai}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}zo(e,n){const s=Zx[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class tC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const xt="WebChannelConnection";class nC extends eC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=lu();return new Promise((l,c)=>{const u=new ry;u.setWithCredentials(!0),u.listenOnce(iy.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ia.NO_ERROR:const f=u.getResponseJson();le(xt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case ia.TIMEOUT:le(xt,`RPC '${e}' ${o} timed out`),c(new oe(z.DEADLINE_EXCEEDED,"Request time out"));break;case ia.HTTP_ERROR:const m=u.getStatus();if(le(xt,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const x=_?.error;if(x&&x.status&&x.message){const k=function(H){const O=H.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(O)>=0?O:z.UNKNOWN}(x.status);c(new oe(k,x.message))}else c(new oe(z.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new oe(z.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{le(xt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(r);le(xt,`RPC '${e}' ${o} sending request:`,r),u.send(n,"POST",d,s,15)})}T_(e,n,s){const r=lu(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ly(),l=ay(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const d=i.join("");le(xt,`Creating RPC '${e}' stream ${r}: ${d}`,c);const f=o.createWebChannel(d,c);this.I_(f);let m=!1,_=!1;const x=new tC({Yo:V=>{_?le(xt,`Not sending because RPC '${e}' stream ${r} is closed:`,V):(m||(le(xt,`Opening RPC '${e}' stream ${r} transport.`),f.open(),m=!0),le(xt,`RPC '${e}' stream ${r} sending:`,V),f.send(V))},Zo:()=>f.close()}),k=(V,H,O)=>{V.listen(H,C=>{try{O(C)}catch(D){setTimeout(()=>{throw D},0)}})};return k(f,ki.EventType.OPEN,()=>{_||(le(xt,`RPC '${e}' stream ${r} transport opened.`),x.o_())}),k(f,ki.EventType.CLOSE,()=>{_||(_=!0,le(xt,`RPC '${e}' stream ${r} transport closed`),x.a_(),this.E_(f))}),k(f,ki.EventType.ERROR,V=>{_||(_=!0,Zr(xt,`RPC '${e}' stream ${r} transport errored. Name:`,V.name,"Message:",V.message),x.a_(new oe(z.UNAVAILABLE,"The operation could not be completed")))}),k(f,ki.EventType.MESSAGE,V=>{if(!_){const H=V.data[0];Ue(!!H,16349);const O=H,C=O?.error||O[0]?.error;if(C){le(xt,`RPC '${e}' stream ${r} received error:`,C);const D=C.status;let U=function(w){const b=ut[w];if(b!==void 0)return Hy(b)}(D),F=C.message;U===void 0&&(U=z.INTERNAL,F="Unknown error status: "+D+" with message "+C.message),_=!0,x.a_(new oe(U,F)),f.close()}else le(xt,`RPC '${e}' stream ${r} received:`,H),x.u_(H)}}),k(l,oy.STAT_EVENT,V=>{V.stat===Qc.PROXY?le(xt,`RPC '${e}' stream ${r} detected buffering proxy`):V.stat===Qc.NOPROXY&&le(xt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{x.__()},0),x}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function bc(){return typeof document<"u"?document:null}function Tl(t){return new ox(t,!0)}class sv{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&le("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const qp="PersistentStream";class rv{constructor(e,n,s,r,i,o,l,c){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new sv(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(ts(n.toString()),ts("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===n&&this.G_(s,r)},s=>{e(()=>{const r=new oe(z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return le(qp,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(le(qp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sC extends rv{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=cx(this.serializer,e),s=function(i){if(!("targetChange"in i))return we.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?we.min():o.readTime?Dn(o.readTime):we.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=ou(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=eu(c)?{documents:dx(i,c)}:{query:fx(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Gy(i,o.resumeToken);const u=su(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(we.min())>0){l.readTime=La(i,o.snapshotVersion.toTimestamp());const u=su(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const s=mx(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=ou(this.serializer),n.removeTarget=e,this.q_(n)}}class rC extends rv{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=hx(e.writeResults,e.commitTime),s=Dn(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=ou(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>ux(this.serializer,s))};this.q_(n)}}class iC{}class oC extends iC{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new oe(z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,ru(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new oe(z.UNKNOWN,i.toString())})}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,ru(n,s),r,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new oe(z.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class aC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ts(n),this.aa=!1):le("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const pr="RemoteStore";class lC{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{wr(this)&&(le(pr,"Restarting streams for network reachability change."),await async function(c){const u=Ee(c);u.Ea.add(4),await bo(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Il(u)}(this))})}),this.Ra=new aC(s,r)}}async function Il(t){if(wr(t))for(const e of t.da)await e(!0)}async function bo(t){for(const e of t.da)await e(!1)}function iv(t,e){const n=Ee(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),vh(n)?yh(n):ui(n).O_()&&_h(n,e))}function gh(t,e){const n=Ee(t),s=ui(n);n.Ia.delete(e),s.O_()&&ov(n,e),n.Ia.size===0&&(s.O_()?s.L_():wr(n)&&n.Ra.set("Unknown"))}function _h(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ui(t).Y_(e)}function ov(t,e){t.Va.Ue(e),ui(t).Z_(e)}function yh(t){t.Va=new nx({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ui(t).start(),t.Ra.ua()}function vh(t){return wr(t)&&!ui(t).x_()&&t.Ia.size>0}function wr(t){return Ee(t).Ea.size===0}function av(t){t.Va=void 0}async function cC(t){t.Ra.set("Online")}async function uC(t){t.Ia.forEach((e,n)=>{_h(t,e)})}async function hC(t,e){av(t),vh(t)?(t.Ra.ha(e),yh(t)):t.Ra.set("Unknown")}async function dC(t,e,n){if(t.Ra.set("Online"),e instanceof zy&&e.state===2&&e.cause)try{await async function(r,i){const o=i.cause;for(const l of i.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.Ia.delete(l),r.Va.removeTarget(l))}(t,e)}catch(s){le(pr,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Ua(t,s)}else if(e instanceof ca?t.Va.Ze(e):e instanceof qy?t.Va.st(e):t.Va.tt(e),!n.isEqual(we.min()))try{const s=await nv(t.localStore);n.compareTo(s)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.Ia.get(u);d&&i.Ia.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=i.Ia.get(c);if(!d)return;i.Ia.set(c,d.withResumeToken(Rt.EMPTY_BYTE_STRING,d.snapshotVersion)),ov(i,c);const f=new Es(d.target,c,u,d.sequenceNumber);_h(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(s){le(pr,"Failed to raise snapshot:",s),await Ua(t,s)}}async function Ua(t,e,n){if(!ci(e))throw e;t.Ea.add(1),await bo(t),t.Ra.set("Offline"),n||(n=()=>nv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{le(pr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Il(t)})}function lv(t,e){return e().catch(n=>Ua(t,n,e))}async function Al(t){const e=Ee(t),n=Ls(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:nh;for(;fC(e);)try{const r=await Kx(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,pC(e,r)}catch(r){await Ua(e,r)}cv(e)&&uv(e)}function fC(t){return wr(t)&&t.Ta.length<10}function pC(t,e){t.Ta.push(e);const n=Ls(t);n.O_()&&n.X_&&n.ea(e.mutations)}function cv(t){return wr(t)&&!Ls(t).x_()&&t.Ta.length>0}function uv(t){Ls(t).start()}async function mC(t){Ls(t).ra()}async function gC(t){const e=Ls(t);for(const n of t.Ta)e.ea(n.mutations)}async function _C(t,e,n){const s=t.Ta.shift(),r=ch.from(s,e,n);await lv(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Al(t)}async function yC(t,e){e&&Ls(t).X_&&await async function(s,r){if(function(o){return ZS(o)&&o!==z.ABORTED}(r.code)){const i=s.Ta.shift();Ls(s).B_(),await lv(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Al(s)}}(t,e),cv(t)&&uv(t)}async function zp(t,e){const n=Ee(t);n.asyncQueue.verifyOperationInProgress(),le(pr,"RemoteStore received new credentials");const s=wr(n);n.Ea.add(3),await bo(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Il(n)}async function vC(t,e){const n=Ee(t);e?(n.Ea.delete(2),await Il(n)):e||(n.Ea.add(2),await bo(n),n.Ra.set("Unknown"))}function ui(t){return t.ma||(t.ma=function(n,s,r){const i=Ee(n);return i.sa(),new sC(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:cC.bind(null,t),t_:uC.bind(null,t),r_:hC.bind(null,t),H_:dC.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),vh(t)?yh(t):t.Ra.set("Unknown")):(await t.ma.stop(),av(t))})),t.ma}function Ls(t){return t.fa||(t.fa=function(n,s,r){const i=Ee(n);return i.sa(),new rC(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:mC.bind(null,t),r_:yC.bind(null,t),ta:gC.bind(null,t),na:_C.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Al(t)):(await t.fa.stop(),t.Ta.length>0&&(le(pr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}class wh{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,l=new wh(e,n,o,r,i);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bh(t,e){if(ts("AsyncQueue",`${e}: ${t}`),ci(t))return new oe(z.UNAVAILABLE,`${e}: ${t}`);throw t}class zr{static emptySet(e){return new zr(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||he.comparator(n.key,s.key):(n,s)=>he.comparator(n.key,s.key),this.keyedMap=Di(),this.sortedSet=new tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof zr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new zr;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class Gp{constructor(){this.ga=new tt(he.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ge(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class ri{constructor(e,n,s,r,i,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new ri(e,n,zr.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}class wC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class bC{constructor(){this.queries=Wp(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=Ee(n),i=r.queries;r.queries=Wp(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(s)})})(this,new oe(z.ABORTED,"Firestore shutting down"))}}function Wp(){return new vr(t=>ky(t),yl)}async function EC(t,e){const n=Ee(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new wC,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const l=bh(o,`Initialization of query '${kr(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Eh(n)}async function TC(t,e){const n=Ee(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function IC(t,e){const n=Ee(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(r)&&(s=!0);o.wa=r}}s&&Eh(n)}function AC(t,e,n){const s=Ee(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function Eh(t){t.Ca.forEach(e=>{e.next()})}var cu,Kp;(Kp=cu||(cu={})).Ma="default",Kp.Cache="cache";class RC{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new ri(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ri.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==cu.Cache}}class hv{constructor(e){this.key=e}}class dv{constructor(e){this.key=e}}class SC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ke(),this.mutatedKeys=ke(),this.eu=Dy(e),this.tu=new zr(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new Gp,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((d,f)=>{const m=r.get(d),_=vl(this.query,f)?f:null,x=!!m&&this.mutatedKeys.has(m.key),k=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let V=!1;m&&_?m.data.isEqual(_.data)?x!==k&&(s.track({type:3,doc:_}),V=!0):this.su(m,_)||(s.track({type:2,doc:_}),V=!0,(c&&this.eu(_,c)>0||u&&this.eu(_,u)<0)&&(l=!0)):!m&&_?(s.track({type:0,doc:_}),V=!0):m&&!_&&(s.track({type:1,doc:m}),V=!0,(c||u)&&(l=!0)),V&&(_?(o=o.add(_),i=k?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),s.track({type:1,doc:d})}return{tu:o,iu:s,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,f)=>function(_,x){const k=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{Rt:V})}};return k(_)-k(x)}(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(s),r=r??!1;const l=n&&!r?this._u():[],c=this.Xa.size===0&&this.current&&!r?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new ri(this.query,e.tu,i,o,e.mutatedKeys,c===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Gp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ke(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new dv(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new hv(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=ke();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ri.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Th="SyncEngine";class xC{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class CC{constructor(e){this.key=e,this.hu=!1}}class PC{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new vr(l=>ky(l),yl),this.Iu=new Map,this.Eu=new Set,this.du=new tt(he.comparator),this.Au=new Map,this.Ru=new dh,this.Vu={},this.mu=new Map,this.fu=si.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function kC(t,e,n=!0){const s=yv(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await fv(s,e,n,!0),r}async function DC(t,e){const n=yv(t);await fv(n,e,!0,!1)}async function fv(t,e,n,s){const r=await Qx(t.localStore,kn(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return s&&(l=await NC(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&iv(t.remoteStore,r),l}async function NC(t,e,n,s,r){t.pu=(f,m,_)=>async function(k,V,H,O){let C=V.view.ru(H);C.Cs&&(C=await $p(k.localStore,V.query,!1).then(({documents:v})=>V.view.ru(v,C)));const D=O&&O.targetChanges.get(V.targetId),U=O&&O.targetMismatches.get(V.targetId)!=null,F=V.view.applyChanges(C,k.isPrimaryClient,D,U);return Yp(k,V.targetId,F.au),F.snapshot}(t,f,m,_);const i=await $p(t.localStore,e,!0),o=new SC(e,i.Qs),l=o.ru(i.documents),c=wo.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=o.applyChanges(l,t.isPrimaryClient,c);Yp(t,n,u.au);const d=new xC(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function VC(t,e,n){const s=Ee(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(o=>!yl(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await au(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&gh(s.remoteStore,r.targetId),uu(s,r.targetId)}).catch(li)):(uu(s,r.targetId),await au(s.localStore,r.targetId,!0))}async function OC(t,e){const n=Ee(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),gh(n.remoteStore,s.targetId))}async function MC(t,e,n){const s=HC(t);try{const r=await function(o,l){const c=Ee(o),u=Ye.now(),d=l.reduce((_,x)=>_.add(x.key),ke());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let x=ns(),k=ke();return c.Ns.getEntries(_,d).next(V=>{x=V,x.forEach((H,O)=>{O.isValidDocument()||(k=k.add(H))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,x)).next(V=>{f=V;const H=[];for(const O of l){const C=KS(O,f.get(O.key).overlayedDocument);C!=null&&H.push(new js(O.key,C,Ey(C.value.mapValue),gn.exists(!0)))}return c.mutationQueue.addMutationBatch(_,u,H,l)}).next(V=>{m=V;const H=V.applyToLocalDocumentSet(f,k);return c.documentOverlayCache.saveOverlays(_,V.batchId,H)})}).then(()=>({batchId:m.batchId,changes:Vy(f)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new tt(Pe)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(s,r.batchId,n),await Eo(s,r.changes),await Al(s.remoteStore)}catch(r){const i=bh(r,"Failed to persist write");n.reject(i)}}async function pv(t,e){const n=Ee(t);try{const s=await Gx(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Au.get(i);o&&(Ue(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?Ue(o.hu,14607):r.removedDocuments.size>0&&(Ue(o.hu,42227),o.hu=!1))}),await Eo(n,s,e)}catch(s){await li(s)}}function Qp(t,e,n){const s=Ee(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&r.push(l.snapshot)}),function(o,l){const c=Ee(o);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const m of f.Sa)m.va(l)&&(u=!0)}),u&&Eh(c)}(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function LC(t,e,n){const s=Ee(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new tt(he.comparator);o=o.insert(i,kt.newNoDocument(i,we.min()));const l=ke().add(i),c=new El(we.min(),new Map,new tt(Pe),o,l);await pv(s,c),s.du=s.du.remove(i),s.Au.delete(e),Ih(s)}else await au(s.localStore,e,!1).then(()=>uu(s,e,n)).catch(li)}async function FC(t,e){const n=Ee(t),s=e.batch.batchId;try{const r=await zx(n.localStore,e);gv(n,s,null),mv(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Eo(n,r)}catch(r){await li(r)}}async function UC(t,e,n){const s=Ee(t);try{const r=await function(o,l){const c=Ee(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(Ue(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(s.localStore,e);gv(s,e,n),mv(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Eo(s,r)}catch(r){await li(r)}}function mv(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function gv(t,e,n){const s=Ee(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function uu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||_v(t,s)})}function _v(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(gh(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Ih(t))}function Yp(t,e,n){for(const s of n)s instanceof hv?(t.Ru.addReference(s.key,e),$C(t,s)):s instanceof dv?(le(Th,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||_v(t,s.key)):ge(19791,{wu:s})}function $C(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(le(Th,"New document in limbo: "+n),t.Eu.add(s),Ih(t))}function Ih(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new he(ze.fromString(e)),s=t.fu.next();t.Au.set(s,new CC(n)),t.du=t.du.insert(n,s),iv(t.remoteStore,new Es(kn(Cy(n.path)),s,"TargetPurposeLimboResolution",ml.ce))}}async function Eo(t,e,n){const s=Ee(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((l,c)=>{o.push(s.pu(c,e,n).then(u=>{if((u||n)&&s.isPrimaryClient){const d=u?!u.fromCache:n?.targetChanges.get(c.targetId)?.current;s.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(u){r.push(u);const d=ph.As(c.targetId,u);i.push(d)}}))}),await Promise.all(o),s.Pu.H_(r),await async function(c,u){const d=Ee(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>G.forEach(u,m=>G.forEach(m.Es,_=>d.persistence.referenceDelegate.addReference(f,m.targetId,_)).next(()=>G.forEach(m.ds,_=>d.persistence.referenceDelegate.removeReference(f,m.targetId,_)))))}catch(f){if(!ci(f))throw f;le(mh,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const _=d.Ms.get(m),x=_.snapshotVersion,k=_.withLastLimboFreeSnapshotVersion(x);d.Ms=d.Ms.insert(m,k)}}}(s.localStore,i))}async function BC(t,e){const n=Ee(t);if(!n.currentUser.isEqual(e)){le(Th,"User change. New user:",e.toKey());const s=await tv(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new oe(z.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Eo(n,s.Ls)}}function jC(t,e){const n=Ee(t),s=n.Au.get(e);if(s&&s.hu)return ke().add(s.key);{let r=ke();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const l=n.Tu.get(o);r=r.unionWith(l.view.nu)}return r}}function yv(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=pv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LC.bind(null,e),e.Pu.H_=IC.bind(null,e.eventManager),e.Pu.yu=AC.bind(null,e.eventManager),e}function HC(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UC.bind(null,e),e}class $a{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return qx(this.persistence,new Bx,e.initialUser,this.serializer)}Cu(e){return new ev(fh.mi,this.serializer)}Du(e){return new Xx}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$a.provider={build:()=>new $a};class qC extends $a{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ue(this.persistence.referenceDelegate instanceof Fa,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new Rx(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?qt.withCacheSize(this.cacheSizeBytes):qt.DEFAULT;return new ev(s=>Fa.mi(s,n),this.serializer)}}class hu{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Qp(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=BC.bind(null,this.syncEngine),await vC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new bC}()}createDatastore(e){const n=Tl(e.databaseInfo.databaseId),s=function(i){return new nC(i)}(e.databaseInfo);return function(i,o,l,c){return new oC(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,o,l){return new lC(s,r,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Qp(this.syncEngine,n,0),function(){return Hp.v()?new Hp:new Jx}())}createSyncEngine(e,n){return function(r,i,o,l,c,u,d){const f=new PC(r,i,o,l,c,u);return d&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const s=Ee(n);le(pr,"RemoteStore shutting down."),s.Ea.add(5),await bo(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}hu.provider={build:()=>new hu};class zC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ts("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}const Fs="FirestoreClient";class GC{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Ct.UNAUTHENTICATED,this.clientId=th.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{le(Fs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(le(Fs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=bh(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Ec(t,e){t.asyncQueue.verifyOperationInProgress(),le(Fs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await tv(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Xp(t,e){t.asyncQueue.verifyOperationInProgress();const n=await WC(t);le(Fs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>zp(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>zp(e.remoteStore,r)),t._onlineComponents=e}async function WC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){le(Fs,"Using user provided OfflineComponentProvider");try{await Ec(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===z.FAILED_PRECONDITION||r.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Zr("Error using user provided cache. Falling back to memory cache: "+n),await Ec(t,new $a)}}else le(Fs,"Using default OfflineComponentProvider"),await Ec(t,new qC(void 0));return t._offlineComponents}async function vv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(le(Fs,"Using user provided OnlineComponentProvider"),await Xp(t,t._uninitializedComponentsProvider._online)):(le(Fs,"Using default OnlineComponentProvider"),await Xp(t,new hu))),t._onlineComponents}function KC(t){return vv(t).then(e=>e.syncEngine)}async function QC(t){const e=await vv(t),n=e.eventManager;return n.onListen=kC.bind(null,e.syncEngine),n.onUnlisten=VC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=DC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=OC.bind(null,e.syncEngine),n}function YC(t,e,n={}){const s=new xs;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const d=new zC({next:m=>{d.Nu(),o.enqueueAndForget(()=>TC(i,f)),m.fromCache&&c.source==="server"?u.reject(new oe(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new RC(l,d,{includeMetadataChanges:!0,qa:!0});return EC(i,f)}(await QC(t),t.asyncQueue,e,n,s)),s.promise}function wv(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const Jp=new Map;const bv="firestore.googleapis.com",Zp=!0;class em{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bv,this.ssl=Zp}else this.host=e.host,this.ssl=e.ssl??Zp;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Zy;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ix)throw new oe(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wv(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new oe(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new oe(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new oe(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rl{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new em({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new em(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new JR;switch(s.type){case"firstParty":return new nS(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new oe(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Jp.get(n);s&&(le("ComponentProvider","Removing Datastore"),Jp.delete(n),s.terminate())}(this),Promise.resolve()}}function XC(t,e,n,s={}){t=fr(t,Rl);const r=gr(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;r&&(Vu(`https://${l}`),Ou("Firestore",!0)),i.host!==bv&&i.host!==l&&Zr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:r,emulatorOptions:s};if(!Ds(c,o)&&(t._setSettings(c),s.mockUserToken)){let u,d;if(typeof s.mockUserToken=="string")u=s.mockUserToken,d=Ct.MOCK_USER;else{u=Yg(s.mockUserToken,t._app?.options.projectId);const f=s.mockUserToken.sub||s.mockUserToken.user_id;if(!f)throw new oe(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Ct(f)}t._authCredentials=new ZR(new uy(u,d))}}class hi{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new hi(this.firestore,e,this._query)}}class _t{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}toJSON(){return{type:_t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(_o(n,_t._jsonSchema))return new _t(e,s||null,new he(ze.fromString(n.referencePath)))}}_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:dt("string",_t._jsonSchemaVersion),referencePath:dt("string")};class Cs extends hi{constructor(e,n,s){super(e,n,Cy(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new he(e))}withConverter(e){return new Cs(this.firestore,e,this._path)}}function un(t,e,...n){if(t=ct(t),hy("collection","path",e),t instanceof Rl){const s=ze.fromString(e,...n);return fp(s),new Cs(t,null,s)}{if(!(t instanceof _t||t instanceof Cs))throw new oe(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ze.fromString(e,...n));return fp(s),new Cs(t.firestore,null,s)}}function du(t,e,...n){if(t=ct(t),arguments.length===1&&(e=th.newId()),hy("doc","path",e),t instanceof Rl){const s=ze.fromString(e,...n);return dp(s),new _t(t,null,new he(s))}{if(!(t instanceof _t||t instanceof Cs))throw new oe(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ze.fromString(e,...n));return dp(s),new _t(t.firestore,t instanceof Cs?t.converter:null,new he(s))}}const tm="AsyncQueue";class nm{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new sv(this,"async_queue_retry"),this._c=()=>{const s=bc();s&&le(tm,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=bc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=bc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new xs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ci(e))throw e;le(tm,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,ts("INTERNAL UNHANDLED ERROR: ",sm(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=wh.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&ge(47125,{Pc:sm(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function sm(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class To extends Rl{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new nm,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nm(e),this._firestoreClient=void 0,await e}}}function JC(t,e){const n=typeof t=="object"?t:ll(),s=typeof t=="string"?t:ka,r=$s(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=Wg("firestore");i&&XC(r,...i)}return r}function Ev(t){if(t._terminated)throw new oe(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ZC(t),t._firestoreClient}function ZC(t){const e=t._freezeSettings(),n=function(r,i,o,l){return new vS(r,i,o,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,wv(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new GC(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(r){const i=r?._online.build();return{_offline:r?._offline.build(i),_online:i}}(t._componentsProvider))}class sn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sn(Rt.fromBase64String(e))}catch(n){throw new oe(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new sn(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:sn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_o(e,sn._jsonSchema))return sn.fromBase64String(e.bytes)}}sn._jsonSchemaVersion="firestore/bytes/1.0",sn._jsonSchema={type:dt("string",sn._jsonSchemaVersion),bytes:dt("string")};class Sl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new oe(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new It(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ah{constructor(e){this._methodName=e}}class Nn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new oe(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new oe(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Nn._jsonSchemaVersion}}static fromJSON(e){if(_o(e,Nn._jsonSchema))return new Nn(e.latitude,e.longitude)}}Nn._jsonSchemaVersion="firestore/geoPoint/1.0",Nn._jsonSchema={type:dt("string",Nn._jsonSchemaVersion),latitude:dt("number"),longitude:dt("number")};class Vn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Vn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_o(e,Vn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Vn(e.vectorValues);throw new oe(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vn._jsonSchemaVersion="firestore/vectorValue/1.0",Vn._jsonSchema={type:dt("string",Vn._jsonSchemaVersion),vectorValues:dt("object")};const e2=/^__.*__$/;class t2{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new js(e,this.data,this.fieldMask,n,this.fieldTransforms):new vo(e,this.data,n,this.fieldTransforms)}}class Tv{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new js(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Iv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{Ac:t})}}class Rh{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Rh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ba(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Iv(this.Ac)&&e2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class n2{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Tl(e)}Cc(e,n,s,r=!1){return new Rh({Ac:e,methodName:n,Dc:s,path:It.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sh(t){const e=t._freezeSettings(),n=Tl(t._databaseId);return new n2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function s2(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);xh("Data must be an object, but it was:",o,s);const l=Av(s,o);let c,u;if(i.merge)c=new Jt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const f of i.mergeFields){const m=fu(e,f,n);if(!o.contains(m))throw new oe(z.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Sv(d,m)||d.push(m)}c=new Jt(d),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new t2(new zt(l),c,u)}class xl extends Ah{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xl}}function r2(t,e,n,s){const r=t.Cc(1,e,n);xh("Data must be an object, but it was:",r,s);const i=[],o=zt.empty();Bs(s,(c,u)=>{const d=Ch(e,c,n);u=ct(u);const f=r.yc(d);if(u instanceof xl)i.push(d);else{const m=Io(u,f);m!=null&&(i.push(d),o.set(d,m))}});const l=new Jt(i);return new Tv(o,l,r.fieldTransforms)}function i2(t,e,n,s,r,i){const o=t.Cc(1,e,n),l=[fu(e,s,n)],c=[r];if(i.length%2!=0)throw new oe(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(fu(e,i[m])),c.push(i[m+1]);const u=[],d=zt.empty();for(let m=l.length-1;m>=0;--m)if(!Sv(u,l[m])){const _=l[m];let x=c[m];x=ct(x);const k=o.yc(_);if(x instanceof xl)u.push(_);else{const V=Io(x,k);V!=null&&(u.push(_),d.set(_,V))}}const f=new Jt(u);return new Tv(d,f,o.fieldTransforms)}function o2(t,e,n,s=!1){return Io(n,t.Cc(s?4:3,e))}function Io(t,e){if(Rv(t=ct(t)))return xh("Unsupported field value:",e,t),Av(t,e);if(t instanceof Ah)return function(s,r){if(!Iv(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const l of s){let c=Io(l,r.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=ct(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return jS(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Ye.fromDate(s);return{timestampValue:La(r.serializer,i)}}if(s instanceof Ye){const i=new Ye(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:La(r.serializer,i)}}if(s instanceof Nn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof sn)return{bytesValue:Gy(r.serializer,s._byteString)};if(s instanceof _t){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:hh(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Vn)return function(o,l){return{mapValue:{fields:{[wy]:{stringValue:by},[Da]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return ah(l.serializer,u)})}}}}}}(s,r);throw r.Sc(`Unsupported field value: ${pl(s)}`)}(t,e)}function Av(t,e){const n={};return py(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bs(t,(s,r)=>{const i=Io(r,e.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function Rv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof Nn||t instanceof sn||t instanceof _t||t instanceof Ah||t instanceof Vn)}function xh(t,e,n){if(!Rv(n)||!dy(n)){const s=pl(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function fu(t,e,n){if((e=ct(e))instanceof Sl)return e._internalPath;if(typeof e=="string")return Ch(t,e);throw Ba("Field path arguments must be of type string or ",t,!1,void 0,n)}const a2=new RegExp("[~\\*/\\[\\]]");function Ch(t,e,n){if(e.search(a2)>=0)throw Ba(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Sl(...e.split("."))._internalPath}catch{throw Ba(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ba(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new oe(z.INVALID_ARGUMENT,l+t+c)}function Sv(t,e){return t.some(n=>n.isEqual(e))}class xv{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new l2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ph("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class l2 extends xv{data(){return super.data()}}function Ph(t,e){return typeof e=="string"?Ch(t,e):e instanceof Sl?e._internalPath:e._delegate._internalPath}function c2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new oe(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kh{}class u2 extends kh{}function Gr(t,e,...n){let s=[];e instanceof kh&&s.push(e),s=s.concat(n),function(i){const o=i.filter(c=>c instanceof Dh).length,l=i.filter(c=>c instanceof Cl).length;if(o>1||o>0&&l>0)throw new oe(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)t=r._apply(t);return t}class Cl extends u2{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Cl(e,n,s)}_apply(e){const n=this._parse(e);return Cv(e._query,n),new hi(e.firestore,e.converter,tu(e._query,n))}_parse(e){const n=Sh(e.firestore);return function(i,o,l,c,u,d,f){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new oe(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){im(f,d);const x=[];for(const k of f)x.push(rm(c,i,k));m={arrayValue:{values:x}}}else m=rm(c,i,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||im(f,d),m=o2(l,o,f,d==="in"||d==="not-in");return ht.create(u,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ua(t,e,n){const s=e,r=Ph("where",t);return Cl._create(r,s,n)}class Dh extends kh{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Dh(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:bn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let o=r;const l=i.getFlattenedFilters();for(const c of l)Cv(o,c),o=tu(o,c)}(e._query,n),new hi(e.firestore,e.converter,tu(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function rm(t,e,n){if(typeof(n=ct(n))=="string"){if(n==="")throw new oe(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Py(e)&&n.indexOf("/")!==-1)throw new oe(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(ze.fromString(n));if(!he.isDocumentKey(s))throw new oe(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return bp(t,new he(s))}if(n instanceof _t)return bp(t,n._key);throw new oe(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pl(n)}.`)}function im(t,e){if(!Array.isArray(t)||t.length===0)throw new oe(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Cv(t,e){const n=function(r,i){for(const o of r)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new oe(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class h2{convertValue(e,n="none"){switch(Ms(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Bs(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){const n=e.fields?.[Da].arrayValue?.values?.map(s=>lt(s.doubleValue));return new Vn(n)}convertGeoPoint(e){return new Nn(lt(e.latitude),lt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=_l(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(io(e));default:return null}}convertTimestamp(e){const n=Vs(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ze.fromString(e);Ue(Jy(s),9688,{name:e});const r=new oo(s.get(1),s.get(3)),i=new he(s.popFirst(5));return r.isEqual(n)||ts(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function d2(t,e,n){let s;return s=t?t.toFirestore(e):e,s}class Ko{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wr extends xv{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ha(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Ph("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Wr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Wr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wr._jsonSchema={type:dt("string",Wr._jsonSchemaVersion),bundleSource:dt("string","DocumentSnapshot"),bundleName:dt("string"),bundle:dt("string")};class ha extends Wr{data(e={}){return super.data(e)}}class Kr{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Ko(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new ha(this._firestore,this._userDataWriter,s.key,s,new Ko(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new oe(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>{const c=new ha(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Ko(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new ha(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Ko(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:f2(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Kr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=th.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function f2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:t})}}Kr._jsonSchemaVersion="firestore/querySnapshot/1.0",Kr._jsonSchema={type:dt("string",Kr._jsonSchemaVersion),bundleSource:dt("string","QuerySnapshot"),bundleName:dt("string"),bundle:dt("string")};class p2 extends h2{constructor(e){super(),this.firestore=e}convertBytes(e){return new sn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,n)}}function Ps(t){t=fr(t,hi);const e=fr(t.firestore,To),n=Ev(e),s=new p2(e);return c2(t._query),YC(n,t._query).then(r=>new Kr(e,s,t,r))}function m2(t,e,n,...s){t=fr(t,_t);const r=fr(t.firestore,To),i=Sh(r);let o;return o=typeof(e=ct(e))=="string"||e instanceof Sl?i2(i,"updateDoc",t._key,e,n,s):r2(i,"updateDoc",t._key,e),Vh(r,[o.toMutation(t._key,gn.exists(!0))])}function Pv(t){return Vh(fr(t.firestore,To),[new lh(t._key,gn.none())])}function Nh(t,e){const n=fr(t.firestore,To),s=du(t),r=d2(t.converter,e);return Vh(n,[s2(Sh(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,gn.exists(!1))]).then(()=>s)}function Vh(t,e){return function(s,r){const i=new xs;return s.asyncQueue.enqueueAndForget(async()=>MC(await KC(s),r,i)),i.promise}(Ev(t),e)}(function(e,n=!0){(function(r){ai=r})(yr),wn(new an("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),l=new To(new eS(s.getProvider("auth-internal")),new sS(o,s.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new oe(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oo(u.options.projectId,d)}(o,r),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Gt(lp,cp,e),Gt(lp,cp,"esm2020")})();const kv="firebasestorage.googleapis.com",g2="storageBucket",_2=2*60*1e3,y2=10*60*1e3;class Fn extends ln{constructor(e,n,s=0){super(Tc(e),`Firebase Storage: ${n} (${Tc(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Fn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Tc(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ln;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ln||(Ln={}));function Tc(t){return"storage/"+t}function v2(){const t="An unknown error occurred, please check the error payload for server response.";return new Fn(Ln.UNKNOWN,t)}function w2(){return new Fn(Ln.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function b2(){return new Fn(Ln.CANCELED,"User canceled the upload/download.")}function E2(t){return new Fn(Ln.INVALID_URL,"Invalid URL '"+t+"'.")}function T2(t){return new Fn(Ln.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function om(t){return new Fn(Ln.INVALID_ARGUMENT,t)}function Dv(){return new Fn(Ln.APP_DELETED,"The Firebase app was deleted.")}function I2(t){return new Fn(Ln.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class hn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=hn.makeFromUrl(e,n)}catch{return new hn(e,"")}if(s.path==="")return s;throw T2(e)}static makeFromUrl(e,n){let s=null;const r="([A-Za-z0-9.\\-_]+)";function i(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+r+o,"i"),c={bucket:1,path:3};function u(D){D.path_=decodeURIComponent(D.path)}const d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",_=new RegExp(`^https?://${f}/${d}/b/${r}/o${m}`,"i"),x={bucket:1,path:3},k=n===kv?"(?:storage.googleapis.com|storage.cloud.google.com)":n,V="([^?#]*)",H=new RegExp(`^https?://${k}/${r}/${V}`,"i"),C=[{regex:l,indices:c,postModify:i},{regex:_,indices:x,postModify:u},{regex:H,indices:{bucket:1,path:2},postModify:u}];for(let D=0;D<C.length;D++){const U=C[D],F=U.regex.exec(e);if(F){const v=F[U.indices.bucket];let w=F[U.indices.path];w||(w=""),s=new hn(v,w),U.postModify(s);break}}if(s==null)throw E2(e);return s}}class A2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function R2(t,e,n){let s=1,r=null,i=null,o=!1,l=0;function c(){return l===2}let u=!1;function d(...V){u||(u=!0,e.apply(null,V))}function f(V){r=setTimeout(()=>{r=null,t(_,c())},V)}function m(){i&&clearTimeout(i)}function _(V,...H){if(u){m();return}if(V){m(),d.call(null,V,...H);return}if(c()||o){m(),d.call(null,V,...H);return}s<64&&(s*=2);let C;l===1?(l=2,C=0):C=(s+Math.random())*1e3,f(C)}let x=!1;function k(V){x||(x=!0,m(),!u&&(r!==null?(V||(l=2),clearTimeout(r),f(0)):V||(l=1)))}return f(0),i=setTimeout(()=>{o=!0,k(!0)},n),k}function S2(t){t(!1)}function x2(t){return t!==void 0}function am(t,e,n,s){if(s<e)throw om(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw om(`Invalid value for '${t}'. Expected ${n} or less.`)}function C2(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const r=e(s)+"="+e(t[s]);n=n+r+"&"}return n=n.slice(0,-1),n}var ja;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ja||(ja={}));function P2(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||r||i}class k2{constructor(e,n,s,r,i,o,l,c,u,d,f,m=!0,_=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=m,this.isUsingEmulator=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,k)=>{this.resolve_=x,this.reject_=k,this.start_()})}start_(){const e=(s,r)=>{if(r){s(!1,new Qo(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===ja.NO_ERROR,c=i.getStatus();if(!l||P2(c,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===ja.ABORT;s(!1,new Qo(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;s(!0,new Qo(u,i))})},n=(s,r)=>{const i=this.resolve_,o=this.reject_,l=r.connection;if(r.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());x2(c)?i(c):i()}catch(c){o(c)}else if(l!==null){const c=v2();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(r.canceled){const c=this.appDelete_?Dv():b2();o(c)}else{const c=w2();o(c)}};this.canceled_?n(!1,new Qo(!1,null,!0)):this.backoffId_=R2(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&S2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Qo{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function D2(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function N2(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function V2(t,e){e&&(t["X-Firebase-GMPID"]=e)}function O2(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function M2(t,e,n,s,r,i,o=!0,l=!1){const c=C2(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return V2(d,e),D2(d,n),N2(d,i),O2(d,s),new k2(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o,l)}function L2(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function F2(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}class Ha{constructor(e,n){this._service=e,n instanceof hn?this._location=n:this._location=hn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ha(e,n)}get root(){const e=new hn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return F2(this._location.path)}get storage(){return this._service}get parent(){const e=L2(this._location.path);if(e===null)return null;const n=new hn(this._location.bucket,e);return new Ha(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw I2(e)}}function lm(t,e){const n=e?.[g2];return n==null?null:hn.makeFromBucketSpec(n,t)}function U2(t,e,n,s={}){t.host=`${e}:${n}`;const r=gr(e);r&&(Vu(`https://${t.host}/b`),Ou("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:i}=s;i&&(t._overrideAuthToken=typeof i=="string"?i:Yg(i,t.app.options.projectId))}class $2{constructor(e,n,s,r,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=kv,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=_2,this._maxUploadRetryTime=y2,this._requests=new Set,r!=null?this._bucket=hn.makeFromBucketSpec(r,this._host):this._bucket=lm(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=hn.makeFromBucketSpec(this._url,e):this._bucket=lm(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){am("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){am("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ha(this,e)}_makeRequest(e,n,s,r,i=!0){if(this._deleted)return new A2(Dv());{const o=M2(e,this._appId,s,r,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,r).getPromise()}}const cm="@firebase/storage",um="0.14.0";const Nv="storage";function B2(t=ll(),e){t=ct(t);const s=$s(t,Nv).getImmediate({identifier:e}),r=Wg("storage");return r&&j2(s,...r),s}function j2(t,e,n,s={}){U2(t,e,n,s)}function H2(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new $2(n,s,r,e,yr)}function q2(){wn(new an(Nv,H2,"PUBLIC").setMultipleInstances(!0)),Gt(cm,um,""),Gt(cm,um,"esm2020")}q2();const z2={apiKey:"AIzaSyBREo7YpHmycRgjyftoxkiFMLwMVePqeKc",authDomain:"happy-tri-friends.firebaseapp.com",databaseURL:"https://happy-tri-friends-default-rtdb.europe-west1.firebasedatabase.app",projectId:"happy-tri-friends",storageBucket:"happy-tri-friends.firebasestorage.app",messagingSenderId:"442257914194",appId:"1:442257914194:web:bf5e1c5cb21cac78e5e28b",measurementId:"G-RV9XDZH7J9"},Pl=s_(z2);W1(Pl);const wt=YR(Pl),Vv=new Wn;Vv.setCustomParameters({prompt:"select_account"});const Zt=JC(Pl);B2(Pl);const G2={class:"flex flex-col md:flex-row md:justify-between md:items-center text-white p-3 gap-4 md:gap-0"},W2={class:"flex md:hidden justify-between items-center w-full relative"},K2={class:"flex flex-row items-center gap-1 ml-auto"},Q2={key:1,class:"flex flex-row items-center gap-1"},Y2={class:"hidden md:flex md:justify-start md:w-48"},X2={class:"hidden md:flex justify-center flex-1"},J2={class:"flex flex-wrap justify-center space-x-4 text-sm md:text-base"},Z2={key:0,class:"md:hidden w-full bg-opacity-95 rounded-lg p-4 space-y-3"},eP={class:"hidden md:flex md:flex-col gap-2 items-end md:items-center md:w-48 md:justify-end"},tP={key:2,class:"flex md:flex-col items-center md:items-end gap-3 md:gap-2"},nP={__name:"htfHeader",setup(t){const e=il(),n=me(!1),s=me(""),r=me(!1),i=["kulikalovdenis@gmail.com","bugary20@gmail.com"],o=et(()=>n.value&&i.includes(s.value||"")),l=et(()=>o.value?"/admin":"/user");is(()=>{Xu(wt,f=>{f?(n.value=!0,s.value=f.email):(n.value=!1,s.value="")})});function c(){alert("Welcome to Happy TRI Friends!")}function u(){r.value=!1}async function d(){try{await UA(wt),u(),e.push("/")}catch(f){console.error(" :",f)}}return(f,m)=>{const _=ng("router-link");return W(),Z("header",G2,[y("div",W2,[y("button",{onClick:m[0]||(m[0]=x=>r.value=!r.value),class:"p-2 hover:bg-gray-700 rounded transition",title:""},[...m[1]||(m[1]=[y("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]),Ie(_,{to:"/",class:"absolute left-1/2 transform -translate-x-1/2"},{default:Ft(()=>[...m[2]||(m[2]=[y("img",{src:Tf,alt:"Logo",class:"w-10 h-auto cursor-pointer hover:opacity-80 transition"},null,-1)])]),_:1}),y("div",K2,[n.value?(W(),Z("div",Q2,[Ie(_,{to:l.value,class:"flex items-center justify-center p-2 bg-transparent border-2 border-yellow-400 text-yellow-400 font-semibold rounded-lg hover:bg-yellow-400 hover:text-black transition"},{default:Ft(()=>[...m[4]||(m[4]=[y("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[y("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"})],-1)])]),_:1},8,["to"]),y("button",{onClick:d,title:"",class:"p-2 bg-transparent border-2 border-yellow-400 text-yellow-400 rounded-lg hover:bg-yellow-400 hover:border-yellow-500 hover:text-black transition"},[...m[5]||(m[5]=[y("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[y("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z","clip-rule":"evenodd"})],-1)])])])):(W(),xn(_,{key:0,to:"/login",class:"flex items-center justify-center p-2 bg-transparent border-2 border-yellow-400 text-yellow-400 font-semibold rounded-lg hover:bg-yellow-400 hover:text-black transition"},{default:Ft(()=>[...m[3]||(m[3]=[y("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[y("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 011 1v12a1 1 0 11-2 0V4a1 1 0 011-1zm7.707 3.293a1 1 0 010 1.414L9.414 9H17a1 1 0 110 2H9.414l1.293 1.293a1 1 0 01-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)])]),_:1}))])]),y("div",Y2,[Ie(_,{to:"/"},{default:Ft(()=>[...m[6]||(m[6]=[y("img",{src:Tf,alt:"Logo",class:"w-20 h-auto cursor-pointer hover:opacity-80 transition"},null,-1)])]),_:1})]),y("div",X2,[y("ul",J2,[y("li",null,[Ie(_,{to:"/schedule",class:"menu-link font-bold hover:text-yellow-400","active-class":"text-yellow-400"},{default:Ft(()=>[...m[7]||(m[7]=[Yt("",-1)])]),_:1})]),y("li",null,[Ie(_,{to:"/donations",class:"menu-link font-bold hover:text-yellow-400","active-class":"text-yellow-400"},{default:Ft(()=>[...m[8]||(m[8]=[Yt(" ",-1)])]),_:1})]),y("li",null,[n.value?$e("",!0):(W(),xn(_,{key:0,to:"/login",class:"menu-link font-bold hover:text-yellow-400","active-class":"text-yellow-400"},{default:Ft(()=>[...m[9]||(m[9]=[Yt("",-1)])]),_:1}))])])]),r.value?(W(),Z("div",Z2,[Ie(_,{to:"/schedule",class:"block menu-link font-bold hover:text-yellow-400 text-center py-2","active-class":"text-yellow-400",onClick:u},{default:Ft(()=>[...m[10]||(m[10]=[Yt("  ",-1)])]),_:1}),Ie(_,{to:"/donations",class:"block menu-link font-bold hover:text-yellow-400 text-center py-2","active-class":"text-yellow-400",onClick:u},{default:Ft(()=>[...m[11]||(m[11]=[Yt("   ",-1)])]),_:1}),n.value?$e("",!0):(W(),xn(_,{key:0,to:"/login",class:"block menu-link font-bold hover:text-yellow-400 text-center py-2","active-class":"text-yellow-400",onClick:u},{default:Ft(()=>[...m[12]||(m[12]=[Yt("  ",-1)])]),_:1}))])):$e("",!0),y("div",eP,[n.value?$e("",!0):(W(),Z("button",{key:0,type:"button",onClick:c,class:"bg-yellow-400 text-black font-bold py-2 px-6 rounded-full hover:bg-yellow-500 transition"},"  ")),n.value?(W(),Z("div",tP,[Ie(_,{to:l.value,class:"flex items-center gap-2 bg-transparent border-2 border-yellow-400 text-yellow-400 font-semibold py-1.5 px-4 rounded-lg hover:bg-yellow-400 hover:text-black transition text-sm"},{default:Ft(()=>[...m[14]||(m[14]=[y("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[y("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"})],-1),Yt("  ",-1)])]),_:1},8,["to"]),y("button",{onClick:d,title:"",class:"p-2 bg-transparent border-2 border-yellow-400 text-yellow-400 rounded-lg hover:bg-yellow-400 hover:border-yellow-500 hover:text-black transition"},[...m[15]||(m[15]=[y("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[y("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z","clip-rule":"evenodd"})],-1)])])])):(W(),xn(_,{key:1,to:"/login",class:"flex items-center justify-center gap-2 bg-transparent border-2 border-yellow-400 text-yellow-400 font-semibold py-1.5 px-4 rounded-lg hover:bg-yellow-400 hover:text-black transition text-sm"},{default:Ft(()=>[...m[13]||(m[13]=[y("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[y("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 011 1v12a1 1 0 11-2 0V4a1 1 0 011-1zm7.707 3.293a1 1 0 010 1.414L9.414 9H17a1 1 0 110 2H9.414l1.293 1.293a1 1 0 01-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),Yt("    ",-1)])]),_:1}))])])}}},sP=ii(nP,[["__scopeId","data-v-a60ed41f"]]),rP={class:"relative z-10"},Ao={__name:"HeaderWrapper",setup(t){return(e,n)=>(W(),Z("div",rP,[Ie(sP)]))}},iP={},oP={class:"bg-transparent text-white p-4 sm:p-6 md:p-8"};function aP(t,e){return W(),Z("footer",oP,[...e[0]||(e[0]=[Ag('<div class="max-w-7xl mx-auto"><div class="flex items-center justify-center gap-4"><a href="https://www.facebook.com/HappyTRIFriendsTeam" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center w-10 h-10 rounded-full border-2 border-yellow-400 text-yellow-400 hover:border-white hover:text-white transition-all duration-300" title="Facebook"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path></svg></a><a href="https://www.youtube.com/@happytrifriendsteam" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center w-10 h-10 rounded-full border-2 border-yellow-400 text-yellow-400 hover:border-white hover:text-white transition-all duration-300" title="YouTube"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"></path></svg></a><a href="https://www.instagram.com/happy_tri_friends/" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center w-10 h-10 rounded-full border-2 border-yellow-400 text-yellow-400 hover:border-white hover:text-white transition-all duration-300" title="Instagram"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.117.6c-.794.272-1.473.646-2.157 1.33-.683.683-1.065 1.35-1.33 2.157-.266.792-.468 1.662-.54 2.942C.008 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.528 2.913.262.763.633 1.41 1.313 2.088.68.68 1.325 1.05 2.092 1.303.765.266 1.636.477 2.914.54 1.28.058 1.687.072 4.947.072s3.667-.015 4.947-.072c1.280-.063 2.148-.274 2.913-.54.763-.253 1.410-.623 2.088-1.303.680-.68 1.050-1.335 1.303-2.1.266-.765.477-1.636.540-2.914.058-1.280.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.063-1.277-.274-2.148-.540-2.913-.253-.764-.623-1.409-1.303-2.088-.68-.68-1.335-1.050-2.100-1.303-.765-.266-1.636-.477-2.913-.540C15.667.008 15.260 0 12 0zm0 2.16c3.203 0 3.585.009 4.849.070 1.171.054 1.805.244 2.227.408.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.354 1.057.408 2.227.061 1.264.070 1.645.070 4.849 0 3.204-.009 3.585-.070 4.849-.054 1.171-.244 1.806-.408 2.228-.217.562-.477.960-.896 1.382-.420.419-.819.679-1.381.896-.422.164-1.057.354-2.227.408-1.264.061-1.645.070-4.849.070-3.204 0-3.585-.009-4.849-.070-1.171-.054-1.806-.244-2.228-.408-.562-.217-.960-.477-1.382-.896-.419-.420-.679-.819-.896-1.381-.164-.422-.354-1.057-.408-2.227-.061-1.264-.070-1.645-.070-4.849 0-3.204.009-3.585.070-4.849.054-1.171.244-1.805.408-2.227.217-.562.477-.960.896-1.382.420-.419.819-.679 1.381-.896.422-.164 1.057-.354 2.227-.408 1.264-.061 1.645-.070 4.849-.070z"></path><circle cx="12" cy="12" r="3.846"></circle><path d="M5.408 7.065a1.657 1.657 0 100 3.314 1.657 1.657 0 000-3.314z"></path></svg></a></div></div>',1)])])}const kl=ii(iP,[["render",aP]]),lP={},cP={class:"home text-center text-white px-2 sm:px-4 py-4"};function uP(t,e){return W(),Z("div",cP,[...e[0]||(e[0]=[y("div",{class:"uppercase text-xs sm:text-sm tracking-widest font-light mb-6 sm:mb-10"},"triathlon club",-1),y("div",{class:"text-3xl sm:text-6xl font-bold mb-6 sm:mb-10"},"Happy TRI Friends",-1),y("div",{class:"text-base sm:text-lg text-white"},"Swimmius. Bikeus. Runius",-1)])])}const hP=ii(lP,[["render",uP]]),Ro="/HTF/assets/background-CxF9_idu.png",dP="/HTF/assets/founders_HTF-D-k_59ix.png",fP="/HTF/assets/Kulikalov-c-KDy7Jn.png",pP={class:"relative z-10"},mP={class:"text-center p-4 sm:p-6 md:p-10 lg:p-40"},gP={class:"flex flex-col md:flex-row items-center justify-center md:justify-between h-auto md:h-150 bg-gray-100 text-black p-8 sm:p-10 md:p-16 gap-4 md:gap-0 overflow-hidden"},_P=["src"],yP={class:"flex flex-col md:flex-row-reverse items-center justify-center md:justify-between h-auto md:h-150 bg-white text-black p-8 sm:p-10 md:p-16 gap-4 md:gap-0 overflow-hidden"},vP=["src"],wP={__name:"MainPage",setup(t){il();function e(){window.scrollBy({top:window.innerHeight,behavior:"smooth"})}return(n,s)=>(W(),Z(He,null,[y("div",{class:"relative min-h-screen bg-cover bg-center bg-fixed",style:Us({backgroundImage:`url(${gt(Ro)})`})},[s[0]||(s[0]=y("div",{class:"absolute inset-0 bg-black opacity-50"},null,-1)),y("div",pP,[Ie(Ao),y("main",mP,[Ie(hP)])]),y("button",{onClick:e,class:"fixed sm:absolute bottom-5 left-1/2 transform -translate-x-1/2 bg-yellow-400 text-black font-bold py-2 px-4 sm:px-6 md:px-8 rounded-full hover:bg-yellow-500 transition text-base sm:text-lg"},"   ")],4),s[3]||(s[3]=y("div",{class:"flex flex-col items-center justify-center h-auto bg-white text-black p-4 sm:p-6 md:h-80"},[y("h1",{class:"text-xl sm:text-2xl md:text-4xl font-bold mb-4 md:mb-10"},"  "),y("p",{class:"text-sm sm:text-base md:text-lg mb-4 md:mb-0"},"  ,        !")],-1)),y("div",gP,[y("img",{src:gt(dP),alt:"Founders",class:"w-2/3 sm:w-1/2 md:w-1/3 h-auto mb-4 md:mb-0 ml-0 md:ml-20 object-contain max-h-full"},null,8,_P),s[1]||(s[1]=y("div",{class:"w-full md:w-1/2 text-center md:text-left px-6 md:px-12 lg:px-16"},[y("h2",{class:"text-lg sm:text-xl md:text-2xl font-bold mb-2 md:mb-4"}," HTF"),y("p",{class:"text-sm sm:text-base md:text-lg"},"  '  .   HTF,       ,        .       !")],-1))]),y("div",yP,[y("img",{src:gt(fP),alt:"Kulikalov",class:"w-2/3 sm:w-1/2 md:w-1/3 h-auto mb-4 md:mb-0 mr-0 md:mr-20 object-contain max-h-full"},null,8,vP),s[2]||(s[2]=y("div",{class:"w-full md:w-1/2 text-center md:text-left px-6 md:px-12 lg:px-16"},[y("h2",{class:"text-lg sm:text-xl md:text-2xl font-bold mb-2 md:mb-4"},"  "),y("p",{class:"text-sm sm:text-base md:text-lg"},"       .     ,             .")],-1))]),Ie(kl)],64))}},bP="/HTF/HTF.png",EP={class:"relative z-10 flex flex-col min-h-screen"},TP={__name:"LoginView",setup(t){const e=il(),n=["kulikalovdenis@gmail.com","bugary20@gmail.com"];async function s(){try{const i=(await iR(wt,Vv)).user;n.includes(i.email)?e.push("/admin"):e.push("/user")}catch(r){r.code&&r.code!=="auth/popup-closed-by-user"&&r.code!=="auth/cancelled-popup-request"&&console.error(" :",r.code,r.message)}}return(r,i)=>(W(),Z("div",{class:"relative min-h-screen bg-cover bg-center bg-fixed",style:Us({backgroundImage:`url(${gt(Ro)})`})},[i[5]||(i[5]=y("div",{class:"absolute inset-0 bg-black opacity-50"},null,-1)),y("div",EP,[Ie(Ao),y("div",{class:"flex flex-col items-center justify-center flex-1 p-2 sm:p-4"},[y("div",{class:"bg-gradient-to-br from-blue-50 via-white to-blue-50 p-4 sm:p-6 md:p-10 rounded-2xl shadow-2xl max-w-xs sm:max-w-md w-full border border-blue-100"},[i[1]||(i[1]=y("div",{class:"flex justify-center mb-6"},[y("img",{src:bP,alt:"HTF Logo",class:"w-20 h-20 sm:w-24 sm:h-24 rounded-full shadow-lg border-4 border-blue-500"})],-1)),i[2]||(i[2]=y("h1",{class:"text-2xl sm:text-3xl font-bold mb-3 text-center text-gray-800"},"!",-1)),i[3]||(i[3]=y("p",{class:"text-center text-gray-600 mb-6 sm:mb-8"},"Happy TRI Friends",-1)),y("button",{onClick:s,class:"w-full flex items-center justify-center gap-3 bg-white hover:bg-gray-50 text-gray-800 font-semibold px-4 py-3 sm:px-6 sm:py-4 rounded-xl transition shadow-md border border-gray-200 hover:shadow-lg text-base sm:text-lg"},[...i[0]||(i[0]=[Ag('<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"></path><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"></path><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"></path><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"></path></svg>   Google ',2)])]),i[4]||(i[4]=y("p",{class:"text-center text-xs sm:text-sm text-gray-500 mt-4 sm:mt-6"},"      ",-1))])]),Ie(kl)])],4))}},IP={class:"flex-shrink-0 text-2xl"},AP={class:"flex-1"},RP={key:0,class:"font-bold text-lg mb-1"},SP={class:"text-sm"},xP={__name:"Notification",props:{type:{type:String,default:"success",validator:t=>["success","warning","error"].includes(t)},message:{type:String,required:!0},title:{type:String,default:""},duration:{type:Number,default:3e3},show:{type:Boolean,default:!1}},emits:["close"],setup(t,{emit:e}){const n=t,s=e,r=me(n.show);let i=null;const o=et(()=>({success:"bg-green-50 border-l-4 border-green-500 text-green-800",warning:"bg-yellow-50 border-l-4 border-yellow-500 text-yellow-800",error:"bg-red-50 border-l-4 border-red-500 text-red-800"})[n.type]),l=et(()=>({success:"",warning:"",error:""})[n.type]),c=()=>{r.value=!1,s("close"),i&&clearTimeout(i)};return Is(()=>n.show,u=>{r.value=u,u&&n.duration>0&&(i&&clearTimeout(i),i=setTimeout(()=>{c()},n.duration))}),n.show&&n.duration>0&&(i=setTimeout(()=>{c()},n.duration)),(u,d)=>(W(),xn(ab,{name:"slide-fade"},{default:Ft(()=>[r.value?(W(),Z("div",{key:0,class:Ze(["fixed top-20 left-1/2 -translate-x-1/2 z-50 max-w-md rounded-lg shadow-2xl p-4 flex items-start gap-3","transition-all duration-300",o.value])},[y("div",IP,fe(l.value),1),y("div",AP,[t.title?(W(),Z("h4",RP,fe(t.title),1)):$e("",!0),y("p",SP,fe(t.message),1)]),y("button",{onClick:c,class:"flex-shrink-0 text-2xl opacity-60 hover:opacity-100 transition-opacity"},"  ")],2)):$e("",!0)]),_:1}))}},CP=ii(xP,[["__scopeId","data-v-21362ac3"]]),PP={class:"relative w-full"},kP=["value","placeholder","readonly"],DP={key:0,class:"absolute left-0 right-0 z-20 border-2 border-white rounded-lg shadow-lg max-h-48 overflow-auto mt-1 bg-gray-800"},NP=["onMousedown"],VP={key:0,class:"px-3 py-2 text-gray-400 text-sm"},OP={__name:"CustomDropdown",props:{modelValue:String,options:Array,placeholder:String,hasError:{type:Boolean,default:!1},allowCustom:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,s=et(()=>n.options.length>0&&typeof n.options[0]=="object"),r=k=>typeof k=="string"?k:k.label||k.value,i=k=>typeof k=="string"?k:k.value,o=et(()=>{if(n.modelValue===void 0||n.modelValue===null)return"";if(!s.value)return n.modelValue;const k=n.options.find(V=>V.value===n.modelValue);return k?k.label:n.modelValue}),l=me(!1);function c(){setTimeout(()=>{l.value=!1},150)}function u(k){const V=i(k);d("update:modelValue",V),l.value=!1}const d=e,f=me(o.value),m=et(()=>{if(!n.allowCustom||f.value===o.value||!f.value)return n.options;const k=f.value.toLowerCase();return n.options.filter(V=>r(V).toLowerCase().includes(k))});Is(()=>n.modelValue,()=>{f.value=o.value});function _(){l.value=!0}function x(k){n.allowCustom&&(f.value=k.target.value,l.value=!1,d("update:modelValue",k.target.value))}return(k,V)=>(W(),Z("div",PP,[y("input",{value:t.allowCustom?f.value:o.value,onInput:x,onClick:_,onFocus:_,onBlur:c,placeholder:t.placeholder,class:Ze(["w-full px-3 py-2 border-2 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 appearance-none cursor-pointer placeholder-gray-400 transition",t.hasError?"border-red-500":t.modelValue?"border-yellow-400 bg-yellow-400 text-black font-semibold":"border-white text-white bg-gray-700 hover:border-yellow-400"]),autocomplete:"off",readonly:!t.allowCustom},null,42,kP),y("button",{type:"button",onMousedown:V[0]||(V[0]=va(H=>l.value=!0,["prevent"])),class:Ze(["absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none transition",t.modelValue?"text-black":"text-white hover:text-yellow-400"])},[...V[1]||(V[1]=[y("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[y("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])],34),l.value?(W(),Z("ul",DP,[(W(!0),Z(He,null,fn(m.value,(H,O)=>(W(),Z("li",{key:O,onMousedown:va(C=>u(H),["prevent"]),class:Ze(["px-3 py-2 cursor-pointer transition border-b border-gray-700 text-white hover:bg-yellow-400 hover:text-black",i(H)===t.modelValue?"bg-yellow-400 text-black font-semibold":""])},fe(r(H)),43,NP))),128)),t.allowCustom&&m.value.length===0?(W(),Z("li",VP,"    ")):$e("",!0)])):$e("",!0)]))}},Ci=ii(OP,[["__scopeId","data-v-f91b8425"]]),Ov="/HTF/assets/icon-swimming-BaKitOA7.png",Mv="/HTF/assets/icon-running-CXWM86tb.png",Lv="/HTF/assets/icon-cycling-BWF-ICF6.png",Fv="/HTF/assets/icon-other-CNe9co9v.png",MP={swimming:[" "," "," "],running:[""," ","  "," "],cycling:["","Indoor Zwift"],other:[" "," "]},LP=["",""," ",""],FP=t=>MP[t]||LP,UP={swimming:[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}],running:[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}],cycling:[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}],other:[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}]},$P=[{value:"ELEMENTARY",label:"ELEMENTARY"},{value:"INTERMEDIATE",label:"INTERMEDIATE"},{value:"HARD",label:"HARD"}],hm=t=>UP[t]||$P,BP=[" , . .  36","  , . , 10"," , 61"," , .  5"," , . ., 18","",""," "," "],jP="",HP="",qP="",zP="",Uv=[{value:"swimming",label:"",icon:jP,iconImg:Ov,name:""},{value:"running",label:"",icon:HP,iconImg:Mv,name:""},{value:"cycling",label:"",icon:qP,iconImg:Lv,name:""},{value:"other",label:"",icon:zP,iconImg:Fv,name:""}],GP=t=>{const e=Uv.find(n=>n.value===t||n.name===t);return e?e.icon:""},WP={class:"bg-gray-800/50 backdrop-blur-md rounded-2xl shadow-lg p-2 sm:p-4"},KP={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4"},QP={key:0,class:"flex items-center gap-2"},YP=["disabled"],XP=["disabled"],JP={key:1,class:"text-gray-500 text-sm"},ZP={key:2,class:"text-gray-400 text-sm"},ek={class:"mb-4 sm:mb-6 p-2 sm:p-4 bg-gray-800/70 rounded-lg border-2 border-yellow-400"},tk={class:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4"},nk={key:0,class:"text-yellow-400 text-sm mt-2 font-semibold"},sk={class:"space-y-4 sm:space-y-6"},rk={class:"text-lg sm:text-xl font-bold mb-2 sm:mb-4 text-yellow-400"},ik={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-4"},ok={class:"flex gap-2"},ak=["onUpdate:modelValue"],lk={class:"md:col-span-2"},ck={class:"flex gap-2"},uk=["onClick"],hk=["onClick"],dk={key:0,class:"mt-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg"},fk={key:1,class:"mt-4 p-4 bg-green-100 border-2 border-green-500 text-green-800 rounded-lg shadow-lg animate-pulse"},pk={key:2,class:"mt-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg"},mk={key:3,class:"mt-8 p-4 bg-gray-800/70 rounded-xl border-2 border-white"},gk={class:"flex flex-col items-center gap-4"},_k={__name:"FormSchedule",props:{notification:Object},emits:["show-notification"],setup(t,{emit:e}){const n=e,s=me(null),r=me(null),i=me(null),o=me(!1),l=me(!1),c=me(!1),u=me(""),d=me(""),f=me(!1),m=me([]),_=me(0),x=me(!1),k=me(!1),V=me(""),H=me(0),O=me([{id:"monday",name:"",trainings:[]},{id:"tuesday",name:"",trainings:[]},{id:"wednesday",name:"",trainings:[]},{id:"thursday",name:"",trainings:[]},{id:"friday",name:"'",trainings:[]},{id:"saturday",name:"",trainings:[]},{id:"sunday",name:"",trainings:[]}]),C=me(BP);function D(de,K,M=""){n("show-notification",de,K,M)}async function U(){try{x.value=!0;const de=Gr(un(Zt,"schedules")),K=await Ps(de),M=[];K.forEach(ae=>{M.push({id:ae.id,...ae.data()})}),m.value=M.sort((ae,Me)=>new Date(Me.weekStart)-new Date(ae.weekStart)),m.value.length>0&&(_.value=0)}catch(de){console.error("  :",de)}finally{x.value=!1}}const F=et(()=>m.value.length===0?null:m.value[_.value]);function v(de,K){const M=new Date(de),ae=new Date(K),Me=Re=>{const ft=String(Re.getDate()).padStart(2,"0"),Xe=String(Re.getMonth()+1).padStart(2,"0");return`${ft}.${Xe}`};return`${Me(M)} - ${Me(ae)}`}function w(){_.value<m.value.length-1&&_.value++}function b(){_.value>0&&_.value--}function S(){const de=F.value;de&&(u.value=de.weekStart,d.value=de.weekEnd,O.value.forEach(K=>{K.trainings=[]}),de.trainings&&Array.isArray(de.trainings)&&de.trainings.forEach(K=>{const M=R(K.dayName),ae=O.value.find(Me=>Me.id===M);ae&&ae.trainings.push({name:K.name,time:K.time,type:K.type,difficulty:K.difficulty,address:K.address,isPaid:K.isPaid||!1})}),D("success","   !      .",""))}function R(de){return{:"monday",:"tuesday",:"wednesday",:"thursday","'":"friday",:"saturday",:"sunday"}[de]||"monday"}function A(de){const K=O.value.find(M=>M.id===de);K&&K.trainings.push({type:"swimming",name:"",difficulty:"ELEMENTARY",time:"07:00",isPaid:"",address:"",error:!1})}function E(de){const K=de.target;if(K&&typeof K.showPicker=="function")try{K.showPicker()}catch{}}Is(()=>O.value.map(de=>de.trainings.map(K=>K.type)),(de,K)=>{O.value.forEach((M,ae)=>{M.trainings.forEach((Me,Re)=>{const ft=K[ae]?.[Re],Xe=de[ae]?.[Re];if(ft&&Xe&&ft!==Xe){const $=hm(Me.type);$.length>0&&(Me.difficulty=$[0].value),Me.name=""}})})},{deep:!0});function De(de,K){const M=O.value.find(ae=>ae.id===de);M&&M.trainings.splice(K,1)}async function Je(){l.value=!1,c.value=!1;let de=!1;if((!u.value||!d.value)&&(c.value=!0,de=!0),O.value.forEach(ce=>{ce.trainings.forEach(pe=>{pe.error=!1,(!pe.name||!pe.type||!pe.difficulty||!pe.time||!pe.address)&&(pe.error=!0,de=!0)})}),de){l.value=!0,H.value++,await Ru(),D("error"," ,   '  (  *)"," ");return}o.value=!0,await new Promise(ce=>setTimeout(ce,100)),await document.fonts.ready;const K=s.value;if(!K){console.error("Canvas not found");return}const M=K.getContext("2d");K.width=1080,K.height=1920,M.fillStyle="#2C3E5F",M.fillRect(0,0,K.width,K.height),M.fillStyle="#FFD700",M.font="bold 70px Montserrat",M.textAlign="center",M.fillText("  HTF",K.width/2,120),M.font="bold 26px Montserrat";const ae=M.measureText("($) - ").width;M.font="26px Montserrat";const Me=M.measureText(" ").width,Re=ae+Me,ft=K.width-60-Re;M.fillStyle="#FFD700",M.font="bold 26px Montserrat",M.textAlign="left",M.fillText("($) - ",ft,150),M.fillStyle="#ffffff",M.font="26px Montserrat",M.fillText(" ",ft+ae,150),M.fillStyle="#ffffff",M.font="26px Montserrat",M.textAlign="right",M.fillText(" ",K.width-60,180);const Xe={},$=[{type:"swimming",src:Ov},{type:"running",src:Mv},{type:"cycling",src:Lv},{type:"other",src:Fv}].map(({type:ce,src:pe})=>new Promise(T=>{const I=new Image;I.onload=()=>{Xe[ce]=I,T()},I.onerror=()=>T(),I.src=pe}));await Promise.all($);let Y=220;const re={:"",:"",:"",:"","'":"",:"",:""};O.value.forEach(ce=>{if(ce.trainings.length>0){const pe=[];ce.trainings.forEach(se=>{const _e=pe.find(Te=>Te.type===se.type&&Te.isPaid===se.isPaid&&Te.address===se.address&&Te.name===se.name);if(_e){const Te=_e.difficultyTimes.find(Se=>Se.difficulty===se.difficulty);Te?Te.times.push(se.time):_e.difficultyTimes.push({difficulty:se.difficulty,times:[se.time]})}else pe.push({type:se.type,name:se.name,isPaid:se.isPaid,address:se.address,difficultyTimes:[{difficulty:se.difficulty,times:[se.time]}]})});const T=[];let I=15;pe.forEach((se,_e)=>{const Se=28+(se.difficultyTimes.length-1)*35,st=Math.max(Se,60)+30;T.push(st),I+=st,_e<pe.length-1&&(I+=15)}),I+=15;const P=I,B=45,q=P;M.fillStyle="#FFD700",M.beginPath(),M.moveTo(55,Y),M.lineTo(40+B,Y),M.lineTo(40+B,Y+q),M.lineTo(55,Y+q),M.arcTo(40,Y+q,40,Y+q-15,15),M.lineTo(40,Y+15),M.arcTo(40,Y,55,Y,15),M.closePath(),M.fill(),M.fillStyle="#000000",M.font="32px Montserrat",M.textAlign="center";const ne=(re[ce.name]||ce.name.substring(0,2)).toUpperCase().split(""),J=38,X=ne.length*J,Q=Y+(q-X)/2+30;ne.forEach((se,_e)=>{M.fillText(se,40+B/2,Q+_e*J)});const ie=40+B,ee=K.width-ie-50;M.fillStyle="#2C3E5F",M.beginPath(),M.moveTo(ie,Y),M.lineTo(ie+ee-15,Y),M.arcTo(ie+ee,Y,ie+ee,Y+15,15),M.lineTo(ie+ee,Y+P-15),M.arcTo(ie+ee,Y+P,ie+ee-15,Y+P,15),M.lineTo(ie,Y+P),M.closePath(),M.fill(),M.strokeStyle="#FFD700",M.lineWidth=4,M.beginPath(),M.moveTo(55,Y),M.lineTo(ie+ee-15,Y),M.arcTo(ie+ee,Y,ie+ee,Y+15,15),M.lineTo(ie+ee,Y+P-15),M.arcTo(ie+ee,Y+P,ie+ee-15,Y+P,15),M.lineTo(55,Y+P),M.arcTo(40,Y+P,40,Y+P-15,15),M.lineTo(40,Y+15),M.arcTo(40,Y,55,Y,15),M.closePath(),M.stroke();let ue=Y+15;pe.forEach((se,_e)=>{const Te=T[_e],nt=(Te-55)/2,st=Xe[se.type];if(st&&M.drawImage(st,ie+20,ue+nt,50,50),M.fillStyle="#ffffff",M.font="300 32px Montserrat",M.textAlign="left",M.fillText(se.name,ie+85,ue+nt+25),se.isPaid){const Ke=M.measureText(se.name).width;M.fillStyle="#FFD700",M.fillText(" ($)",ie+85+Ke,ue+nt+25)}M.fillStyle="#D1D5DB",M.font="20px Montserrat",M.fillText(se.address,ie+85,ue+nt+55);const St=ie+ee-350,Wt=28+(se.difficultyTimes.length-1)*35;let rt=ue+(Te-Wt)/2;se.difficultyTimes.forEach((Ke,br)=>{M.font="20px Montserrat",M.textAlign="left";const Un=M.measureText(Ke.difficulty).width,di=15,qs=Un+di*2;M.strokeStyle="#FFD700",M.lineWidth=2,M.strokeRect(St,rt,qs,28),M.fillStyle="#FFD700",M.fillText(Ke.difficulty,St+di,rt+20),M.fillStyle="#ffffff",M.font="22px Montserrat",M.textAlign="right";const So=Ke.times.join(" | ");M.fillText(So,ie+ee-30,rt+18),rt+=35}),ue+=Te,_e<pe.length-1&&(ue+=7.5,M.strokeStyle="#FFD700",M.lineWidth=1,M.beginPath(),M.moveTo(ie+20,ue),M.lineTo(ie+ee-20,ue),M.stroke(),ue+=7.5)}),Y+=P+25}})}function We(){const de=s.value;if(!de)return;const K=document.createElement("a");K.download="htf-schedule.png",K.href=de.toDataURL("image/png"),K.click()}function Ve(de){const K=new Date(u.value),ae={monday:0,tuesday:1,wednesday:2,thursday:3,friday:4,saturday:5,sunday:6}[de],Me=new Date(K);return Me.setDate(K.getDate()+ae),Me.toISOString().split("T")[0]}async function xe(){if(f.value=!1,k.value=!1,V.value="",l.value=!1,c.value=!1,!u.value||!d.value){c.value=!0,k.value=!0,V.value="      ";return}let de=!1;if(O.value.forEach(K=>{K.trainings.forEach(M=>{M.error=!1,(!M.name||!M.type||!M.difficulty||!M.time||!M.address)&&(M.error=!0,de=!0)})}),de){l.value=!0,k.value=!0,V.value="  '  ";return}try{const K=[];O.value.forEach(ae=>{if(ae.trainings.length>0){const Me=Ve(ae.id);ae.trainings.forEach(Re=>{K.push({date:Me,dayName:ae.name,type:Re.type,name:Re.name,difficulty:Re.difficulty,time:Re.time,isPaid:Re.isPaid==="paid",address:Re.address,createdAt:new Date().toISOString(),createdBy:wt.currentUser?.email||"unknown"})})}});const M=await Nh(un(Zt,"schedules"),{weekStart:u.value,weekEnd:d.value,trainings:K,createdAt:new Date().toISOString(),createdBy:wt.currentUser?.email||"unknown"});if(M&&M.id)f.value=!0,D("success",`  ${K.length} `," "),setTimeout(()=>{f.value=!1},5e3),await U();else throw new Error("   ID  ")}catch(K){console.error("  :",K),k.value=!0,V.value=K.message||"   "}}return is(()=>{U()}),(de,K)=>(W(),Z("div",WP,[y("div",KP,[K[4]||(K[4]=y("h1",{class:"text-3xl font-bold text-yellow-400"}," ",-1)),m.value.length>0?(W(),Z("div",QP,[y("button",{onClick:w,disabled:_.value===m.value.length-1,class:Ze(["px-3 py-2 rounded-lg font-bold transition-colors border-2",_.value===m.value.length-1?"bg-gray-600 text-gray-400 cursor-not-allowed border-gray-600":"border-white text-white hover:border-yellow-400 hover:text-yellow-400"]),title:" "}," < ",10,YP),y("button",{onClick:S,class:"px-4 py-2 bg-yellow-400 hover:bg-yellow-500 text-black rounded-lg font-semibold transition-colors border-2 border-yellow-400",title:"   "},fe(F.value?`${_.value+1}: ${v(F.value.weekStart,F.value.weekEnd)}`:" "),1),y("button",{onClick:b,disabled:_.value===0,class:Ze(["px-3 py-2 rounded-lg font-bold transition-colors border-2",_.value===0?"bg-gray-600 text-gray-400 cursor-not-allowed border-gray-600":"border-white text-white hover:border-yellow-400 hover:text-yellow-400"]),title:" "}," > ",10,XP)])):x.value?(W(),Z("div",JP,"  ... ")):(W(),Z("div",ZP,"    "))]),y("div",ek,[K[7]||(K[7]=y("h3",{class:"text-lg font-bold text-yellow-400 mb-4"}," ",-1)),y("div",tk,[y("div",null,[K[5]||(K[5]=y("label",{class:"block text-sm font-semibold text-white mb-2"},"   *",-1)),Lr(y("input",{ref_key:"startDateInput",ref:r,"onUpdate:modelValue":K[0]||(K[0]=M=>u.value=M),type:"date",onClick:K[1]||(K[1]=M=>E(M)),class:Ze(["w-full px-3 py-2 border-2 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 cursor-pointer bg-gray-700 text-white",c.value&&!u.value?"border-red-500":"border-white hover:border-yellow-400"])},null,2),[[$r,u.value]])]),y("div",null,[K[6]||(K[6]=y("label",{class:"block text-sm font-semibold text-white mb-2"},"   *",-1)),Lr(y("input",{ref_key:"endDateInput",ref:i,"onUpdate:modelValue":K[2]||(K[2]=M=>d.value=M),type:"date",onClick:K[3]||(K[3]=M=>E(M)),class:Ze(["w-full px-3 py-2 border-2 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 cursor-pointer bg-gray-700 text-white",c.value&&!d.value?"border-red-500":"border-white hover:border-yellow-400"])},null,2),[[$r,d.value]])])]),c.value?(W(),Z("p",nk," '      ")):$e("",!0)]),y("div",sk,[(W(!0),Z(He,null,fn(O.value,M=>(W(),Z("div",{key:M.id,class:"border-2 border-yellow-400 rounded-xl p-2 sm:p-4 bg-gray-800/70"},[y("h3",rk,fe(M.name),1),(W(!0),Z(He,null,fn(M.trainings,(ae,Me)=>(W(),Z("div",{key:`${M.id}-${Me}-${H.value}`,class:"mb-2 sm:mb-4 p-2 sm:p-4 bg-gray-700/50 rounded-lg shadow-sm border-2 border-yellow-400"},[y("div",ik,[y("div",null,[K[8]||(K[8]=y("label",{class:"block text-sm font-semibold text-white mb-2"},"  *",-1)),y("div",ok,[Ie(Ci,{modelValue:ae.type,"onUpdate:modelValue":Re=>ae.type=Re,options:gt(Uv),placeholder:"  *",hasError:!!(ae.error&&!ae.type)},null,8,["modelValue","onUpdate:modelValue","options","hasError"]),Ie(Ci,{modelValue:ae.name,"onUpdate:modelValue":Re=>ae.name=Re,options:gt(FP)(ae.type),placeholder:"  *",hasError:!!(ae.error&&!ae.name),allowCustom:!0},null,8,["modelValue","onUpdate:modelValue","options","hasError"])])]),y("div",null,[K[9]||(K[9]=y("label",{class:"block text-sm font-semibold text-white mb-2"}," *",-1)),Ie(Ci,{modelValue:ae.difficulty,"onUpdate:modelValue":Re=>ae.difficulty=Re,options:gt(hm)(ae.type),placeholder:" *",hasError:!!(ae.error&&!ae.difficulty)},null,8,["modelValue","onUpdate:modelValue","options","hasError"])]),y("div",null,[K[10]||(K[10]=y("label",{class:"block text-sm font-semibold text-white mb-2"},"  *",-1)),Lr(y("input",{"onUpdate:modelValue":Re=>ae.time=Re,type:"time",class:Ze(["w-full px-3 py-2 border-2 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 bg-gray-700 text-white",ae.error&&!ae.time?"border-red-500":"border-white hover:border-yellow-400"])},null,10,ak),[[$r,ae.time]])]),y("div",null,[K[11]||(K[11]=y("label",{class:"block text-sm font-semibold text-white mb-2"}," ",-1)),Ie(Ci,{modelValue:ae.isPaid,"onUpdate:modelValue":Re=>ae.isPaid=Re,options:[{value:"",label:""},{value:"paid",label:" "}],placeholder:""},null,8,["modelValue","onUpdate:modelValue"])]),y("div",lk,[K[13]||(K[13]=y("label",{class:"block text-sm font-semibold text-white mb-2"}," *",-1)),y("div",ck,[Ie(Ci,{modelValue:ae.address,"onUpdate:modelValue":Re=>ae.address=Re,options:C.value,placeholder:"  *",hasError:ae.error&&!ae.address,allowCustom:!0},null,8,["modelValue","onUpdate:modelValue","options","hasError"]),y("button",{onClick:Re=>De(M.id,Me),class:"px-3 py-2 bg-transparent border-2 border-white text-white rounded-lg transition hover:border-red-400 hover:text-red-400"},[...K[12]||(K[12]=[y("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[y("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)])],8,uk)])])])]))),128)),y("button",{onClick:ae=>A(M.id),class:"w-full mt-2 px-4 py-2 border-2 border-yellow-400 text-white rounded-lg transition hover:border-white hover:text-yellow-400"},"    ",8,hk)]))),128))]),l.value?(W(),Z("div",dk,[...K[14]||(K[14]=[y("p",{class:"font-semibold"},"  ",-1),y("p",null," ,   '  (  *)",-1)])])):$e("",!0),y("div",{class:"mt-8 flex gap-4"},[y("button",{onClick:Je,class:"flex-1 px-6 py-3 border-2 border-white text-white font-semibold rounded-lg transition text-lg hover:border-yellow-400 hover:text-yellow-400"},"    "),y("button",{onClick:xe,class:"flex-1 px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition text-lg border-2 border-yellow-400"},"      ")]),f.value?(W(),Z("div",fk,[...K[15]||(K[15]=[y("p",{class:"font-bold text-lg"},"  !",-1),y("p",null,"      Firebase",-1)])])):$e("",!0),k.value?(W(),Z("div",pk,[K[16]||(K[16]=y("p",{class:"font-semibold"},"  ",-1)),y("p",null,fe(V.value),1)])):$e("",!0),o.value?(W(),Z("div",mk,[K[17]||(K[17]=y("h3",{class:"text-xl font-bold mb-4 text-yellow-400"}," ",-1)),y("div",gk,[y("canvas",{ref_key:"scheduleCanvas",ref:s,class:"border-2 border-white rounded-lg shadow-lg max-w-full"},null,512),y("button",{onClick:We,class:"px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition border-2 border-yellow-400"},"    ")])])):$e("",!0)]))}},yk={class:"bg-gray-800/50 backdrop-blur-md rounded-2xl shadow-lg p-2 sm:p-4"},vk={class:"text-3xl font-bold mb-6 text-yellow-400"},wk={key:0,class:"text-center py-12"},bk={key:1,class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ek={class:"space-y-4"},Tk={class:"flex items-center justify-between mb-4"},Ik={class:"text-xl font-bold text-yellow-400"},Ak={class:"text-sm text-white"},Rk={key:0,class:"text-center py-12 bg-gray-700/50 rounded-lg border-2 border-dashed border-white"},Sk={class:"text-white"},xk={key:1,class:"space-y-4 max-h-[600px] overflow-y-auto pr-2"},Ck={key:0,class:"mb-3"},Pk=["src"],kk={key:1,class:"mb-3 h-32 bg-gray-600 rounded-lg flex items-center justify-center"},Dk={class:"font-bold text-lg mb-2 text-yellow-400"},Nk={class:"text-sm text-white mb-2 line-clamp-2"},Vk=["href"],Ok={class:"flex gap-2 mt-3"},Mk=["onClick"],Lk=["onClick"],Fk={class:"text-xs text-gray-400 mt-2"},Uk={class:"space-y-6 lg:sticky lg:top-4 lg:self-start"},$k={class:"flex items-center justify-between mb-4"},Bk={class:"text-xl font-bold text-yellow-400"},jk={class:"flex gap-4"},Hk=["disabled"],qk={key:0},zk={key:1},Gk={__name:"ItemsManager",props:{title:{type:String,default:"  "},listTitle:{type:String,default:"  "},formCreateTitle:{type:String,default:"  "},formEditTitle:{type:String,default:"  "},emptyMessage:{type:String,default:"  "},items:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},saving:{type:Boolean,default:!1},editingId:{type:String,default:null}},emits:["edit","delete","save","cancel"],setup(t){function e(n){return n?new Date(n).toLocaleString("uk-UA",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):""}return(n,s)=>(W(),Z("div",yk,[y("h1",vk,fe(t.title),1),t.loading?(W(),Z("div",wk,[...s[3]||(s[3]=[y("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-yellow-400 mx-auto mb-4"},null,-1),y("p",{class:"text-white"},"...",-1)])])):(W(),Z("div",bk,[y("div",Ek,[y("div",Tk,[y("h2",Ik,fe(t.listTitle),1),y("span",Ak,": "+fe(t.items.length),1)]),t.items.length===0?(W(),Z("div",Rk,[s[4]||(s[4]=y("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 mx-auto text-white mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1)),y("p",Sk,fe(t.emptyMessage),1),s[5]||(s[5]=y("p",{class:"text-gray-300 text-sm"},"     ",-1))])):(W(),Z("div",xk,[(W(!0),Z(He,null,fn(t.items,r=>(W(),Z("div",{key:r.id,class:Ze(["bg-gray-700/50 border-2 rounded-lg p-4 hover:shadow-lg transition cursor-pointer",t.editingId===r.id?"border-yellow-400 shadow-lg":"border-white"])},[s[7]||(s[7]=Yt(` @click="$emit('edit', item)"> `,-1)),xd(n.$slots,"item-card",{item:r},()=>[r.imageUrl||r.imageBase64?(W(),Z("div",Ck,[y("img",{src:r.imageUrl||r.imageBase64,alt:"Item",class:"w-full h-32 object-cover rounded-lg"},null,8,Pk)])):(W(),Z("div",kk,[...s[6]||(s[6]=[y("span",{class:"text-gray-400"}," ",-1)])])),y("h3",Dk,fe(r.title),1),y("p",Nk,fe(r.description),1),r.link?(W(),Z("a",{key:2,href:r.link,target:"_blank",class:"text-xs text-yellow-400 hover:underline block mb-3 truncate"},"  "+fe(r.link),9,Vk)):$e("",!0)]),y("div",Ok,[y("button",{onClick:va(i=>n.$emit("edit",r),["stop"]),class:"flex-1 px-3 py-2 border-2 border-white text-white text-sm rounded transition hover:border-yellow-400 hover:text-yellow-400"},"   ",8,Mk),y("button",{onClick:va(i=>n.$emit("delete",r.id),["stop"]),class:"px-3 py-2 border-2 border-white text-white text-sm rounded transition hover:border-red-400 hover:text-red-400"},"  ",8,Lk)]),y("p",Fk,": "+fe(e(r.updatedAt)),1)],2))),128))]))]),y("div",Uk,[y("div",$k,[y("h2",Bk,fe(t.editingId?t.formEditTitle:t.formCreateTitle),1),t.editingId?(W(),Z("button",{key:0,onClick:s[0]||(s[0]=r=>n.$emit("cancel")),class:"text-sm text-white hover:text-yellow-400 transition"},"   ")):$e("",!0)]),xd(n.$slots,"form"),y("div",jk,[y("button",{onClick:s[1]||(s[1]=r=>n.$emit("save")),disabled:t.saving,class:"flex-1 px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed border-2 border-yellow-400"},[t.saving?(W(),Z("span",qk," ...")):(W(),Z("span",zk,fe(t.editingId?" ":" "),1))],8,Hk),t.editingId?(W(),Z("button",{key:0,onClick:s[2]||(s[2]=r=>n.$emit("cancel")),class:"px-6 py-3 border-2 border-white text-white font-semibold rounded-lg transition hover:border-gray-400 hover:text-gray-400"},"   ")):$e("",!0)])])]))]))}},Wk={class:"border-2 border-dashed border-white rounded-xl p-6 text-center hover:border-yellow-400 transition bg-gray-700/50"},Kk={key:0,class:"mb-4"},Qk=["src"],Yk={key:1},Xk={key:0,class:"text-yellow-400 text-sm mt-1 font-semibold"},Jk={key:0,class:"text-yellow-400 text-sm mt-1 font-semibold"},Zk={key:0,class:"text-yellow-400 text-sm mt-1 font-semibold"},e4={__name:"DonationsManager",emits:["show-notification"],setup(t,{emit:e}){const n=e,s=me(!1),r=me(!1),i=me(""),o=me(null),l=me([]),c=me(null),u=me(null),d=me({title:"",description:"",link:""}),f=me({title:"",description:"",link:""});async function m(){try{s.value=!0;const U=await Ps(un(Zt,"donations"));l.value=[],U.forEach(F=>{l.value.push({id:F.id,...F.data()})}),l.value.sort((F,v)=>new Date(v.updatedAt||0)-new Date(F.updatedAt||0))}catch(U){console.error("  :",U),n("show-notification","error","  ","")}finally{s.value=!1}}function _(U){c.value=U.id,d.value.title=U.title||"",d.value.description=U.description||"",d.value.link=U.link||"",U.imageBase64?i.value=U.imageBase64:i.value="",o.value=null,window.scrollTo({top:0,behavior:"smooth"})}function x(){c.value=null,D()}async function k(U){if(confirm(" ,     ?"))try{await Pv(du(Zt,"donations",U)),n("show-notification","success","  ",""),await m(),c.value===U&&x()}catch(F){console.error(" :",F),n("show-notification","error","  ","")}}function V(U){const F=U.target.files[0];if(!F)return;if(!F.type.includes("png")){n("show-notification","warning"," ,    PNG"," ");return}if(F.size>1024*1024){n("show-notification","warning","  .  1MB"," ");return}o.value=F;const v=new FileReader;v.onload=w=>{i.value=w.target.result},v.readAsDataURL(F)}function H(){i.value="",o.value=null,u.value&&(u.value.value="")}function O(){f.value={title:"",description:"",link:""};let U=!0;return d.value.title.trim()||(f.value.title=" '",U=!1),d.value.description.trim()||(f.value.description=" '",U=!1),d.value.link.trim()?d.value.link.startsWith("http")||(f.value.link="    http://  https://",U=!1):(f.value.link=" '",U=!1),U}async function C(){if(!O()){n("show-notification","warning","  ' "," ");return}try{r.value=!0;const U={title:d.value.title.trim(),description:d.value.description.trim(),link:d.value.link.trim(),imageBase64:i.value||"",updatedAt:new Date().toISOString()};if(c.value){const F=du(Zt,"donations",c.value);await m2(F,U),n("show-notification","success","  ","")}else U.createdAt=new Date().toISOString(),await Nh(un(Zt,"donations"),U),n("show-notification","success","   ","");await m(),x()}catch(U){console.error(" :",U),n("show-notification","error",U.message||"   ","")}finally{r.value=!1}}function D(){d.value={title:"",description:"",link:""},H(),f.value={title:"",description:"",link:""}}return is(()=>{m()}),(U,F)=>(W(),xn(Gk,{title:"  ","list-title":"  ","form-create-title":"  ","form-edit-title":"  ","empty-message":"  ",items:l.value,loading:s.value,saving:r.value,"editing-id":c.value,onEdit:_,onDelete:k,onSave:C,onCancel:x},{form:Ft(()=>[y("div",Wk,[i.value?(W(),Z("div",Kk,[y("img",{src:i.value,alt:"Preview",class:"max-h-64 mx-auto rounded-lg shadow-md"},null,8,Qk),y("button",{onClick:H,class:"mt-4 px-4 py-2 border-2 border-white text-white rounded-lg transition hover:border-red-400 hover:text-red-400"},"    ")])):(W(),Z("div",Yk,[F[4]||(F[4]=y("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 mx-auto text-white mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),F[5]||(F[5]=y("p",{class:"text-white mb-2"},"  (PNG)",-1)),y("input",{ref_key:"fileInput",ref:u,type:"file",accept:"image/png",onChange:V,class:"hidden"},null,544),y("button",{onClick:F[0]||(F[0]=v=>U.$refs.fileInput.click()),class:"px-6 py-3 border-2 border-white text-white rounded-lg transition"},"    ")]))]),y("div",null,[F[6]||(F[6]=y("label",{class:"block text-sm font-semibold text-white mb-2"}," *",-1)),Lr(y("input",{"onUpdate:modelValue":F[1]||(F[1]=v=>d.value.title=v),type:"text",placeholder:":  ",class:Ze(["w-full px-4 py-3 border-2 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 bg-gray-700 text-white",f.value.title?"border-red-500":"border-white"])},null,2),[[$r,d.value.title]]),f.value.title?(W(),Z("p",Xk," "+fe(f.value.title),1)):$e("",!0)]),y("div",null,[F[7]||(F[7]=y("label",{class:"block text-sm font-semibold text-white mb-2"}," *",-1)),Lr(y("textarea",{"onUpdate:modelValue":F[2]||(F[2]=v=>d.value.description=v),rows:"4",placeholder:"  ...",class:Ze(["w-full px-4 py-3 border-2 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 bg-gray-700 text-white",f.value.description?"border-red-500":"border-white"])},null,2),[[$r,d.value.description]]),f.value.description?(W(),Z("p",Jk," "+fe(f.value.description),1)):$e("",!0)]),y("div",null,[F[8]||(F[8]=y("label",{class:"block text-sm font-semibold text-white mb-2"},"   *",-1)),Lr(y("input",{"onUpdate:modelValue":F[3]||(F[3]=v=>d.value.link=v),type:"url",placeholder:"https://send.monobank.ua/...",class:Ze(["w-full px-4 py-3 border-2 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 bg-gray-700 text-white",f.value.link?"border-red-500":"border-white"])},null,2),[[$r,d.value.link]]),f.value.link?(W(),Z("p",Zk," "+fe(f.value.link),1)):$e("",!0)])]),_:1},8,["items","loading","saving","editing-id"]))}},t4={class:"bg-gray-800/50 backdrop-blur-md rounded-2xl shadow-lg p-2 sm:p-4"},n4={key:0,class:"text-center py-12"},s4={key:1,class:"text-center py-12"},r4={key:2,class:"space-y-4 sm:space-y-6"},i4={class:"bg-gray-700/70 text-white px-4 sm:px-6 py-3 sm:py-4 border-b-2 border-yellow-400 flex items-center justify-between"},o4={class:"text-xl sm:text-2xl font-bold text-yellow-400"},a4={class:"text-sm text-gray-300"},l4={class:"p-2 sm:p-4 space-y-3 sm:space-y-4 bg-gray-700/50"},c4={class:"flex items-center justify-between gap-3 mb-3"},u4={class:"flex items-center gap-2 min-w-0 flex-1"},h4=["src","alt"],d4={class:"text-lg font-bold text-yellow-400 truncate"},f4={class:"text-right"},p4={class:"text-2l font-bold text-white"},m4={class:"flex flex-wrap gap-2 mb-4"},g4={key:0,class:"px-3 py-1 rounded text-xs font-semibold bg-yellow-400 text-black"},_4={class:"space-y-2 mb-4 text-gray-300 text-sm"},y4={class:"flex items-start gap-2"},v4={class:"flex items-center gap-2"},w4={class:"space-y-2"},b4={key:0,disabled:"",class:"w-full px-4 py-2 rounded-lg font-semibold bg-gray-600 text-gray-400 cursor-not-allowed opacity-60"},E4=["onClick"],T4=["onClick"],I4={class:"flex-1"},A4={class:"flex flex-wrap items-center gap-2 sm:gap-3 mb-3"},R4=["src","alt"],S4={class:"text-lg sm:text-xl font-bold text-yellow-400"},x4={key:0,class:"px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-semibold bg-yellow-400 text-black"},C4={class:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-6 text-gray-300 text-sm"},P4={class:"flex items-center gap-2"},k4={class:"font-semibold"},D4={class:"flex items-center gap-2"},N4={class:"flex items-center gap-2"},V4={class:"flex flex-col gap-2 flex-shrink-0"},O4={key:0,disabled:"",class:"px-10 py-2 rounded font-semibold text-sm bg-gray-600 text-gray-400 cursor-not-allowed opacity-60 whitespace-nowrap"},M4=["onClick"],L4=["onClick"],F4={key:3,class:"fixed bottom-4 right-4 sm:bottom-8 sm:right-8 bg-yellow-400 text-black px-4 sm:px-6 py-3 sm:py-4 rounded-lg shadow-2xl animate-bounce z-50"},U4={class:"font-semibold text-sm sm:text-base"},dm={__name:"TrainingRegistration",props:{notification:Object},emits:["show-notification"],setup(t,{emit:e}){const n=e,s=me(!1),r=me(null),i=me([]),o=me("");function l(C,D,U=""){n("show-notification",C,D,U)}const c=()=>{const C=new Date,D=C.getDay(),U=D===0?-6:1-D,F=new Date(C);F.setDate(C.getDate()+U),F.setHours(0,0,0,0);const v=new Date(F);return v.setDate(F.getDate()+6),v.setHours(23,59,59,999),{monday:F,sunday:v}},u=C=>new Date(C).toLocaleDateString("uk-UA",{day:"2-digit",month:"long"}),d=et(()=>{if(!r.value||!r.value.trainings)return{};const C={};r.value.trainings.forEach(F=>{const v=F.dayName;C[v]||(C[v]=[]),C[v].push(F)});const D=["","","","","'","",""],U={};return D.forEach(F=>{C[F]&&(U[F]=C[F].sort((v,w)=>v.time.localeCompare(w.time)))}),U}),f=C=>{const D={swimming:new URL("/HTF/assets/icon-swimming-BaKitOA7.png",import.meta.url).href,running:new URL("/HTF/assets/icon-running-CXWM86tb.png",import.meta.url).href,cycling:new URL("/HTF/assets/icon-cycling-BWF-ICF6.png",import.meta.url).href,other:new URL("/HTF/assets/icon-other-CNe9co9v.png",import.meta.url).href},U=C.toLowerCase();return D[U]||D.other},m=C=>({:"bg-green-500 text-white",:"bg-yellow-500 text-black",:"bg-red-500 text-white"})[C]||"bg-gray-500 text-white",_=async()=>{try{s.value=!0;const{monday:C,sunday:D}=c(),U=C.toISOString().split("T")[0],F=D.toISOString().split("T")[0],v=Gr(un(Zt,"schedules")),w=await Ps(v),b=[];w.forEach(S=>{const R=S.data(),A=R.weekStart,E=R.weekEnd;A>=U&&E<=F&&b.push({id:S.id,...R})}),b.length>0?(b.sort((S,R)=>{const A=new Date(S.createdAt||0);return new Date(R.createdAt||0)-A}),r.value=b[0],await x()):r.value=null}catch(C){console.error("  :",C)}finally{s.value=!1}},x=async()=>{if(wt.currentUser)try{const C=Gr(un(Zt,"registrations"),ua("userId","==",wt.currentUser.uid)),D=await Ps(C);i.value=D.docs.map(U=>U.data().trainingId)}catch{}},k=C=>{const D=`${r.value.id}_${C.date}_${C.time}`;return i.value.includes(D)},V=C=>{const D=new Date(`${C.date}T${C.time}:00`),U=new Date,F=2*60,v=U.getTimezoneOffset(),w=new Date(U.getTime()+(F+v)*6e4);return D<w},H=async C=>{if(!wt.currentUser){l("warning"," ,     "," ");return}try{const D=`${r.value.id}_${C.date}_${C.time}`;if(k(C))return;await Nh(un(Zt,"registrations"),{userId:wt.currentUser.uid,userEmail:wt.currentUser.email,userName:wt.currentUser.displayName||wt.currentUser.email,userPhoto:wt.currentUser.photoURL||null,trainingId:D,scheduleId:r.value.id,trainingDate:C.date,trainingTime:C.time,trainingName:C.name,trainingType:C.type,registeredAt:new Date().toISOString()}),i.value.push(D),o.value=`   ${C.name}`,setTimeout(()=>{o.value=""},3e3)}catch(D){l("error",D.message," ")}},O=async C=>{if(wt.currentUser)try{const D=`${r.value.id}_${C.date}_${C.time}`,U=Gr(un(Zt,"registrations"),ua("userId","==",wt.currentUser.uid),ua("trainingId","==",D)),F=await Ps(U);if(!F.empty){const v=F.docs[0];await Pv(v.ref);const w=i.value.indexOf(D);w>-1&&i.value.splice(w,1),o.value=`  ${C.name} `,setTimeout(()=>{o.value=""},3e3)}}catch(D){l("error",D.message," ")}};return is(()=>{_()}),(C,D)=>(W(),Z("div",t4,[D[9]||(D[9]=y("h1",{class:"text-2xl sm:text-3xl font-bold mb-6 text-yellow-400"},"   ",-1)),s.value?(W(),Z("div",n4,[...D[0]||(D[0]=[y("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-yellow-400 mx-auto mb-4"},null,-1),y("p",{class:"text-white"}," ...",-1)])])):!r.value||!r.value.trainings||r.value.trainings.length===0?(W(),Z("div",s4,[...D[1]||(D[1]=[y("p",{class:"text-white text-lg sm:text-xl mb-4"},"       ",-1),y("p",{class:"text-gray-300"},'     " "',-1)])])):(W(),Z("div",r4,[(W(!0),Z(He,null,fn(d.value,(U,F)=>(W(),Z("div",{key:F,class:"border-2 border-yellow-400 rounded-xl overflow-hidden"},[y("div",i4,[y("h2",o4,fe(F),1),y("p",a4,fe(u(U[0].date)),1)]),y("div",l4,[(W(!0),Z(He,null,fn(U,(v,w)=>(W(),Z("div",{key:w,class:"sm:hidden border-2 border-yellow-400 rounded-lg p-4 bg-gray-800"},[y("div",c4,[y("div",u4,[y("img",{src:f(v.type),alt:v.type,class:"w-8 h-8 object-contain flex-shrink-0"},null,8,h4),y("h3",d4,fe(v.name),1)]),y("div",f4,[y("div",p4,fe(v.time),1)])]),y("div",m4,[y("span",{class:Ze(["px-3 py-1 rounded text-xs font-semibold",m(v.difficulty)])},fe(v.difficulty),3),v.isPaid?(W(),Z("span",g4,"   ")):$e("",!0)]),y("div",_4,[y("div",y4,[D[2]||(D[2]=y("span",null,"",-1)),y("span",null,fe(v.address),1)]),y("div",v4,[D[3]||(D[3]=y("span",null,"",-1)),y("span",null,fe(v.type),1)])]),y("div",w4,[V(v)&&!k(v)?(W(),Z("button",b4,"    ")):k(v)?(W(),Z(He,{key:2},[D[4]||(D[4]=y("button",{class:"w-full px-4 py-3 rounded-lg font-semibold bg-yellow-400 text-black cursor-default"},"   ",-1)),V(v)?$e("",!0):(W(),Z("button",{key:0,onClick:b=>O(v),class:"w-full px-4 py-2 rounded-lg font-semibold border-2 border-white text-white hover:border-red-400 hover:text-red-400 transition-colors"},"   ",8,T4))],64)):(W(),Z("button",{key:1,onClick:b=>H(v),class:"w-full px-4 py-3 rounded-lg font-semibold border-2 border-white text-white hover:border-yellow-400 hover:text-yellow-400 transition-colors"},"   ",8,E4))])]))),128)),(W(!0),Z(He,null,fn(U,(v,w)=>(W(),Z("div",{key:w,class:"hidden sm:flex items-center justify-between gap-4 p-4 bg-gray-800 rounded-lg border-2 border-yellow-400 hover:shadow-lg transition-shadow"},[y("div",I4,[y("div",A4,[y("img",{src:f(v.type),alt:v.type,class:"w-8 h-8 object-contain"},null,8,R4),y("h3",S4,fe(v.name),1),y("span",{class:Ze(["px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-semibold",m(v.difficulty)])},fe(v.difficulty),3),v.isPaid?(W(),Z("span",x4,"   ")):$e("",!0)]),y("div",C4,[y("div",P4,[D[5]||(D[5]=y("span",null,"",-1)),y("span",k4,fe(v.time),1)]),y("div",D4,[D[6]||(D[6]=y("span",null,"",-1)),y("span",null,fe(v.address),1)]),y("div",N4,[D[7]||(D[7]=y("span",null,"",-1)),y("span",null,fe(v.type),1)])])]),y("div",V4,[V(v)&&!k(v)?(W(),Z("button",O4,"    ")):k(v)?(W(),Z(He,{key:2},[D[8]||(D[8]=y("button",{class:"px-10 py-2 rounded font-semibold text-sm bg-yellow-400 text-black cursor-default whitespace-nowrap"},"   ",-1)),V(v)?$e("",!0):(W(),Z("button",{key:0,onClick:b=>O(v),class:"px-10 py-2 rounded font-semibold text-sm border-2 border-white text-white hover:border-red-400 hover:text-red-400 transition-colors whitespace-nowrap"},"   ",8,L4))],64)):(W(),Z("button",{key:1,onClick:b=>H(v),class:"px-10 py-2 rounded font-semibold text-sm transition-all border-2 border-white text-white hover:border-yellow-400 hover:text-yellow-400 whitespace-nowrap"},"   ",8,M4))])]))),128))])]))),128))])),o.value?(W(),Z("div",F4,[y("p",U4," "+fe(o.value),1)])):$e("",!0)]))}},$4={class:"relative z-10 h-full flex flex-col"},B4={class:"flex flex-col lg:flex-row gap-2 lg:gap-4 p-2 sm:p-4 flex-1 min-h-0 overflow-y-auto"},j4={class:"w-full lg:w-80 bg-gray-800/50 backdrop-blur-md rounded-2xl shadow-lg p-2 sm:p-4 flex-shrink-0 overflow-y-auto flex flex-col mb-2 lg:mb-0"},H4={class:"flex flex-col items-center mb-6 pb-6 border-b border-gray-400"},q4={key:0,class:"w-20 h-20 rounded-full mb-3 shadow-md overflow-hidden bg-gray-200"},z4=["src","alt"],G4={key:1,class:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-bold text-2xl mb-3 shadow-md"},W4={class:"flex items-center justify-center gap-2 w-full"},K4={class:"font-semibold text-yellow-400 text-center"},Q4={class:"text-sm text-yellow-400 text-center break-all"},Y4={key:0,class:"mb-6"},X4={class:"flex-1 w-full"},Rr={__name:"CabinetView",props:{section:String},setup(t){const e=GE(),n=il(),s=me(""),r=me(""),i=me(""),o=me(!1),l=me("training-registration"),c=me({show:!1,type:"success",title:"",message:""});function u(_,x,k=""){c.value={show:!0,type:_,title:k,message:x}}function d(){c.value.show=!1}const f=et(()=>({"form-schedule":_k,"donations-manager":e4,"training-registration":dm})[l.value]||dm);Is(()=>e.path,()=>{e.path==="/user/registration"||e.path.includes("/user")?l.value="training-registration":e.path==="/admin/schedule"?l.value="form-schedule":e.path==="/admin/donations"?l.value="donations-manager":e.path.includes("/admin")?l.value="form-schedule":l.value="training-registration"},{immediate:!0}),is(()=>{Xu(wt,_=>{if(_){s.value=_.displayName||"",r.value=_.email||"",i.value=_.photoURL||"";const x=["kulikalovdenis@gmail.com","bugary20@gmail.com"];o.value=x.includes(_.email),e.path==="/user/registration"||e.path.includes("/user")?l.value="training-registration":e.path==="/admin/schedule"?l.value="form-schedule":e.path==="/admin/donations"?l.value="donations-manager":e.path.includes("/admin")&&o.value?l.value="form-schedule":l.value="training-registration"}})});async function m(){await wt.signOut(),window.location.href="/HTF/"}return(_,x)=>(W(),Z("div",{class:"relative h-screen bg-cover bg-center bg-fixed overflow-hidden",style:Us({backgroundImage:`url(${gt(Ro)})`})},[x[8]||(x[8]=y("div",{class:"absolute inset-0 bg-black opacity-40"},null,-1)),Ie(CP,{show:c.value.show,type:c.value.type,title:c.value.title,message:c.value.message,onClose:d},null,8,["show","type","title","message"]),y("div",$4,[Ie(Ao),y("div",B4,[y("aside",j4,[y("div",H4,[i.value?(W(),Z("div",q4,[y("img",{src:i.value,alt:s.value,class:"w-full h-full object-cover",referrerpolicy:"no-referrer"},null,8,z4)])):(W(),Z("div",G4,fe(s.value?s.value.charAt(0).toUpperCase():"A"),1)),y("div",W4,[y("p",K4,fe(s.value||""),1),y("button",{onClick:m,class:"bg-transparent border-2 border-yellow-400 text-yellow-400 p-1.5 rounded transition flex-shrink-0 hover:border-white hover:text-white",title:""},[...x[3]||(x[3]=[y("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[y("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z","clip-rule":"evenodd"})],-1)])])]),y("p",Q4,fe(r.value),1)]),o.value?(W(),Z("div",Y4,[x[6]||(x[6]=y("h3",{class:"text-sm font-bold text-yellow-400 uppercase mb-3"},"",-1)),y("button",{onClick:x[0]||(x[0]=k=>gt(n).push("/admin/schedule")),class:Ze(["w-full text-left px-4 py-3 rounded-lg mb-2 transition flex items-center gap-2 border-2 border-white text-white",l.value==="form-schedule"?"bg-yellow-400 text-black border-yellow-400":"hover:border-yellow-400 hover:text-yellow-400"])},[...x[4]||(x[4]=[y("span",null,"",-1),y("span",null," ",-1)])],2),y("button",{onClick:x[1]||(x[1]=k=>gt(n).push("/admin/donations")),class:Ze(["w-full text-left px-4 py-3 rounded-lg mb-2 transition border-2 border-white text-white",l.value==="donations-manager"?"bg-yellow-400 text-black border-yellow-400":"hover:border-yellow-400 hover:text-yellow-400"])},[...x[5]||(x[5]=[y("span",null,"  ",-1)])],2)])):$e("",!0),y("div",null,[x[7]||(x[7]=y("h3",{class:"text-sm font-bold text-yellow-400 uppercase mb-3"},"",-1)),y("button",{onClick:x[2]||(x[2]=k=>gt(n).push("/user/registration")),class:Ze(["w-full text-left px-4 py-3 rounded-lg mb-2 transition border-2 border-white text-white",l.value==="training-registration"?"bg-yellow-400 text-black border-yellow-400":"hover:border-yellow-400 hover:text-yellow-400"])},"     ",2)])]),y("main",X4,[(W(),xn(dw(f.value),{notification:c.value,onShowNotification:u},null,40,["notification"]))])])])],4))}},J4={class:"relative z-10 min-h-screen flex flex-col"},Z4={class:"flex-1 p-2 sm:p-4 md:p-8"},eD={class:"max-w-6xl mx-auto"},tD={class:"mb-2 sm:mb-4"},nD={key:0,class:"text-center text-white text-xs sm:text-sm"},sD={key:0,class:"bg-gray-800/50 backdrop-blur-md rounded-xl shadow-lg p-4 sm:p-8 text-center border-2 border-yellow-400"},rD={key:1,class:"bg-gray-800/50 backdrop-blur-md rounded-xl shadow-lg p-4 sm:p-8 text-center border-2 border-yellow-400"},iD={key:2,class:"space-y-4 sm:space-y-6"},oD={class:"bg-gray-700/70 text-white px-4 sm:px-6 py-3 sm:py-4 border-b-2 border-yellow-400 flex items-center justify-between"},aD={class:"text-xl sm:text-2xl font-bold text-yellow-400"},lD={class:"text-sm text-gray-300"},cD={class:"p-2 sm:p-4 space-y-3 sm:space-y-4 bg-gray-700/50"},uD={class:"flex flex-col sm:flex-row items-start justify-between gap-3 sm:gap-4"},hD={class:"flex-1 w-full"},dD={class:"flex flex-wrap items-center gap-2 sm:gap-3 mb-2"},fD={class:"text-lg"},pD={class:"text-base sm:text-lg font-bold text-yellow-400"},mD={key:0,class:"px-2 sm:px-3 py-1 rounded text-xs sm:text-sm font-semibold bg-yellow-400 text-black"},gD={class:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-6 text-gray-300 text-xs sm:text-sm"},_D={class:"flex items-center gap-1 flex-shrink-0"},yD={class:"font-semibold"},vD={class:"flex items-center gap-1"},wD={class:"flex items-center gap-1"},bD={class:"flex-shrink-0 w-full sm:w-auto"},ED=["onClick"],TD={class:"text-xs"},ID={key:0,class:"border-t border-gray-600 mt-3 pt-3"},AD={key:0,class:"text-center text-gray-400 text-xs py-2"},RD={key:1,class:"space-y-2"},SD={class:"font-medium"},xD={class:"text-gray-500"},CD={class:"mt-4"},PD={__name:"ScheduleView",setup(t){const e=me(!0),n=me(null),s=me([]),r=me(new Set),i=()=>{const O=new Date,C=O.getDay(),D=C===0?-6:1-C,U=new Date(O);U.setDate(O.getDate()+D),U.setHours(0,0,0,0);const F=new Date(U);return F.setDate(U.getDate()+6),F.setHours(23,59,59,999),{monday:U,sunday:F}},o=O=>new Date(O).toLocaleDateString("uk-UA",{day:"2-digit",month:"long"}),l=O=>new Date(O).toLocaleString("uk-UA",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),c=et(()=>{if(!n.value||!n.value.trainings)return{};const O={};n.value.trainings.forEach(U=>{const F=U.dayName;O[F]||(O[F]=[]),O[F].push(U)});const C=["","","","","'","",""],D={};return C.forEach(U=>{O[U]&&(D[U]=O[U].sort((F,v)=>F.time.localeCompare(v.time)))}),D}),u=O=>GP(O),d=O=>({:"bg-green-500 text-white",:"bg-yellow-400 text-black",:"bg-red-500 text-white"})[O]||"bg-gray-500 text-white",f=O=>n.value.id+"_"+O.date+"_"+O.time,m=O=>{const C=f(O);return s.value.filter(D=>D.trainingId===C).length},_=O=>{const C=f(O);return s.value.filter(D=>D.trainingId===C)},x=O=>{const C=f(O);r.value.has(C)?r.value.delete(C):r.value.add(C)},k=O=>{const C=f(O);return r.value.has(C)},V=async()=>{try{e.value=!0;const{monday:O,sunday:C}=i(),D=O.toISOString().split("T")[0],U=C.toISOString().split("T")[0],F=Gr(un(Zt,"schedules")),v=await Ps(F),w=[];v.forEach(b=>{const S=b.data(),R=S.weekStart,A=S.weekEnd;R>=D&&A<=U&&w.push({id:b.id,...S})}),w.length>0?(w.sort((b,S)=>{const R=new Date(b.createdAt||0);return new Date(S.createdAt||0).getTime()-R.getTime()}),n.value=w[0],await H(n.value.id)):n.value=null}catch(O){console.error("  :",O)}finally{e.value=!1}},H=async O=>{try{const C=Gr(un(Zt,"registrations"),ua("scheduleId","==",O)),D=await Ps(C);s.value=D.docs.map(U=>({id:U.id,...U.data()}))}catch(C){console.error("  :",C)}};return is(()=>{V()}),(O,C)=>(W(),Z("div",{class:"relative min-h-screen bg-cover bg-center bg-fixed overflow-y-auto",style:Us({backgroundImage:`url(${gt(Ro)})`})},[C[8]||(C[8]=y("div",{class:"absolute inset-0 bg-black opacity-50"},null,-1)),y("div",J4,[Ie(Ao),y("div",Z4,[y("div",eD,[y("div",tD,[C[0]||(C[0]=y("h1",{class:"text-lg sm:text-2xl font-bold text-yellow-400 text-center mb-1 flex items-center justify-center gap-2"},[y("span",null,""),Yt("   ")],-1)),n.value?(W(),Z("p",nD,fe(o(n.value.weekStart))+" - "+fe(o(n.value.weekEnd)),1)):$e("",!0)]),e.value?(W(),Z("div",sD,[...C[1]||(C[1]=[y("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-400 mx-auto mb-2"},null,-1),y("p",{class:"text-white text-sm"}," ...",-1)])])):!n.value||!n.value.trainings||n.value.trainings.length===0?(W(),Z("div",rD,[...C[2]||(C[2]=[y("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 mx-auto mb-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1),y("p",{class:"text-white text-sm font-bold mb-1"},"   ",-1),y("p",{class:"text-gray-400 text-xs"},"   ",-1)])])):(W(),Z("div",iD,[(W(!0),Z(He,null,fn(c.value,(D,U)=>(W(),Z("div",{key:U,class:"border-2 border-yellow-400 rounded-xl overflow-hidden"},[y("div",oD,[y("h2",aD,fe(U),1),y("p",lD,fe(o(D[0].date)),1)]),y("div",cD,[(W(!0),Z(He,null,fn(D,(F,v)=>(W(),Z("div",{key:v,class:"p-3 sm:p-4 bg-gray-800 rounded-lg border-2 border-yellow-400"},[y("div",uD,[y("div",hD,[y("div",dD,[y("span",fD,fe(u(F.type)),1),y("h3",pD,fe(F.name),1),y("span",{class:Ze(["px-2 sm:px-3 py-1 rounded text-xs sm:text-sm font-semibold",d(F.difficulty)])},fe(F.difficulty),3),F.isPaid?(W(),Z("span",mD,"   ")):$e("",!0)]),y("div",gD,[y("div",_D,[C[3]||(C[3]=y("span",null,"",-1)),y("span",yD,fe(F.time),1)]),y("div",vD,[C[4]||(C[4]=y("span",null,"",-1)),y("span",null,fe(F.address),1)]),y("div",wD,[C[5]||(C[5]=y("span",null,"",-1)),y("span",null,fe(F.type),1)])])]),y("div",bD,[y("button",{onClick:w=>x(F),class:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-yellow-400 hover:bg-yellow-500 rounded-lg transition-colors text-xs sm:text-sm font-semibold text-black"},[C[6]||(C[6]=y("span",null,"",-1)),y("span",null,fe(m(F)),1),y("span",TD,fe(k(F)?"":""),1)],8,ED)])]),k(F)?(W(),Z("div",ID,[_(F).length===0?(W(),Z("div",AD,"   ")):(W(),Z("div",RD,[(W(!0),Z(He,null,fn(_(F),(w,b)=>(W(),Z("div",{key:b,class:"text-xs text-white"},[y("span",SD,fe(w.userName),1),C[7]||(C[7]=y("span",{class:"text-gray-400 mx-1"},"",-1)),y("span",xD,fe(l(w.registeredAt)),1)]))),128))]))])):$e("",!0)]))),128))])]))),128))])),y("div",CD,[Ie(kl)])])])])],4))}},kD={class:"relative z-10"},DD={class:"flex-1 p-2 sm:p-4 md:p-8"},ND={class:"max-w-7xl mx-auto"},VD={key:0,class:"bg-gray-800/50 backdrop-blur-md rounded-2xl shadow-lg p-8 md:p-12 text-center border-2 border-yellow-400"},OD={key:1,class:"bg-gray-800/50 backdrop-blur-md rounded-2xl shadow-lg p-8 md:p-12 text-center border-2 border-yellow-400"},MD={key:0,class:"w-full h-64 overflow-hidden bg-gray-700"},LD=["src","alt"],FD={key:1,class:"w-full h-64 bg-gradient-to-br from-gray-700 to-gray-800 flex items-center justify-center border-b-2 border-yellow-400"},UD={class:"p-6"},$D={class:"text-2xl font-bold text-yellow-400 mb-3"},BD={class:"text-white mb-6 leading-relaxed"},jD=["href"],HD={class:"text-xs text-gray-400 text-center mt-4"},qD={class:"mt-2"},zD={__name:"DonationsView",setup(t){const e=me(!1),n=me([]),s=et(()=>{const o=n.value.length;return o===1?"grid grid-cols-1 md:grid-cols-1 gap-6 max-w-md mx-auto":o===2?"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto":o===3?"grid grid-cols-1 md:grid-cols-3 gap-6":"grid grid-cols-1 md:grid-cols-2 gap-6"});async function r(){try{e.value=!0;const o=await Ps(un(Zt,"donations"));n.value=[],o.forEach(l=>{n.value.push({id:l.id,...l.data()})}),n.value.sort((l,c)=>new Date(c.updatedAt||0)-new Date(l.updatedAt||0))}catch(o){console.error("  :",o)}finally{e.value=!1}}function i(o){return o?new Date(o).toLocaleString("uk-UA",{year:"numeric",month:"long",day:"numeric"}):""}return is(()=>{r()}),(o,l)=>(W(),Z("div",{class:"relative min-h-screen bg-cover bg-center bg-fixed overflow-y-auto",style:Us({backgroundImage:`url(${gt(Ro)})`})},[l[6]||(l[6]=y("div",{class:"absolute inset-0 bg-black opacity-50"},null,-1)),y("div",kD,[Ie(Ao),y("div",DD,[y("div",ND,[l[4]||(l[4]=y("div",{class:"mb-5"},[y("h1",{class:"text-sm sm:text-base font-bold text-yellow-400 text-center mb-1 flex items-center justify-center gap-1"},[y("span",{class:"text-sm"},""),Yt("   ! ")])],-1)),e.value?(W(),Z("div",VD,[...l[0]||(l[0]=[y("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-yellow-400 mx-auto mb-4"},null,-1),y("p",{class:"text-white text-lg"},"...",-1)])])):n.value.length===0?(W(),Z("div",OD,[...l[1]||(l[1]=[y("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 mx-auto mb-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),y("p",{class:"text-white text-xl"},"     ",-1)])])):(W(),Z("div",{key:2,class:Ze(s.value)},[(W(!0),Z(He,null,fn(n.value,c=>(W(),Z("div",{key:c.id,class:"bg-gray-800/50 backdrop-blur-md rounded-2xl shadow-lg overflow-hidden transform transition-all duration-300 hover:shadow-xl border-2 border-yellow-400"},[c.imageBase64?(W(),Z("div",MD,[y("img",{src:c.imageBase64,alt:c.title,class:"w-full h-full object-cover"},null,8,LD)])):(W(),Z("div",FD,[...l[2]||(l[2]=[y("span",{class:"text-white text-6xl"},"",-1)])])),y("div",UD,[y("h2",$D,fe(c.title),1),y("p",BD,fe(c.description),1),y("a",{href:c.link,target:"_blank",rel:"noopener noreferrer",class:"block w-full bg-yellow-400 hover:bg-yellow-500 text-black font-bold py-4 px-6 rounded-xl transition-all duration-300 text-center shadow-lg hover:shadow-xl border-2 border-yellow-400"},[...l[3]||(l[3]=[y("span",{class:"flex items-center justify-center gap-2"},[y("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),Yt("   ")],-1)])],8,jD),y("p",HD," : "+fe(i(c.updatedAt)),1)])]))),128))],2)),l[5]||(l[5]=y("div",{class:"mt-5 text-center"},[y("h3",{class:"text-sm font-bold mb-1 text-center text-yellow-400"},"   !"),y("p",{class:"text-center text-xs mb-1 text-white"})],-1)),y("div",qD,[Ie(kl)])])])])],4))}},$v=zE({history:TE("/HTF/"),routes:[{path:"/",name:"home",component:wP},{path:"/login",name:"login",component:TP},{path:"/schedule",name:"schedule",component:PD},{path:"/donations",name:"donations",component:zD},{path:"/user",name:"user",component:Rr,meta:{requiresAuth:!0}},{path:"/user/registration",name:"user-registration",component:Rr,meta:{requiresAuth:!0},props:{section:"training-registration"}},{path:"/admin",name:"admin",component:Rr,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/schedule",name:"admin-schedule",component:Rr,meta:{requiresAuth:!0,requiresAdmin:!0},props:{section:"form-schedule"}},{path:"/admin/donations",name:"admin-donations",component:Rr,meta:{requiresAuth:!0,requiresAdmin:!0},props:{section:"donations-manager"}},{path:"/cabinet",name:"cabinet",component:Rr,meta:{requiresAuth:!0}}]}),GD=["kulikalovdenis@gmail.com","bugary20@gmail.com"],WD=()=>new Promise((t,e)=>{const n=Xu(wt,s=>{n(),t(s)},e)});$v.beforeEach(async(t,e,n)=>{const s=t.matched.some(i=>i.meta.requiresAuth),r=t.matched.some(i=>i.meta.requiresAdmin);if(s||r){const i=await WD();s&&!i?n("/login"):r&&i?GD.includes(i.email||"")?n():n("/user"):n()}else n()});const Bv=Db(Fb);Bv.use($v);Bv.mount("#app");
